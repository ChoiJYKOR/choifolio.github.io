import{aW as C,r as k,k as t,aX as I,aY as L,aZ as T,a_ as _,a$ as R,b0 as F,b1 as M,a4 as H}from"./index-1fe3a1ef.js";function z(i){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}}]})(i)}const E=({value:i,onChange:c,placeholder:v="내용을 입력하세요",rows:j=8,className:f=""})=>{const l=k.useRef(null),[p,N]=k.useState(0),y=()=>{l.current&&N(l.current.selectionStart)},g=()=>{var s;const a=i.split(`
`);let r=0,e=0;for(let o=0;o<a.length;o++){const n=(((s=a[o])==null?void 0:s.length)||0)+1;if(p>=e&&(p<e+n||o===a.length-1)){r=o;break}e+=n}return{lineIndex:r,line:a[r]||"",lines:a,lineStart:e}},b=a=>{const{lineIndex:r,line:e,lines:s}=g(),o="#".repeat(a)+" ";e.match(/^#+\s/)?s[r]=o+e.replace(/^#+\s/,""):s[r]=o+e,c(s.join(`
`))},u=a=>{var o;const{lineIndex:r,line:e,lines:s}=g();if(e!=null&&e.match(/^[\s]*[-*+]\s/)||e!=null&&e.match(/^[\s]*\d+\.\s/))s[r]=(e==null?void 0:e.replace(/^[\s]*[-*+\d\.]\s/,"").trim())||"";else{const n=((o=e==null?void 0:e.match(/^[\s]*/))==null?void 0:o[0])||"",d=a==="bullet"?"- ":"1. ";s[r]=n+d+((e==null?void 0:e.trim())||"")}c(s.join(`
`))},h=a=>{const{lineIndex:r,lines:e}=g(),s=e[r]||"";a==="in"?e[r]="  "+s:e[r]=s.replace(/^[\s]{0,2}/,""),c(e.join(`
`))},w=()=>{const{lineIndex:a,lines:r,lineStart:e}=g(),s="▶ 토글 제목";r.splice(a+1,0,s,"  토글 내용을 입력하세요"),c(r.join(`
`)),setTimeout(()=>{var o;if(l.current){const n=e+(((o=r[a])==null?void 0:o.length)||0)+1+s.length+1+2;l.current.setSelectionRange(n,n),l.current.focus()}},0)},$=()=>{const{lineIndex:a,lines:r,lineStart:e}=g(),s=["```javascript","// 여기에 코드를 작성하세요","```"];r.splice(a+1,0,...s);const o=r.join(`
`);c(o),setTimeout(()=>{var n,d;if(l.current){const x=e+(((n=r[a])==null?void 0:n.length)||0)+1+(((d=s[0])==null?void 0:d.length)||0)+1+2;l.current.setSelectionRange(x,x),l.current.focus()}},0)},m=a=>{const r=l.current;if(!r)return;const e=r.selectionStart,s=r.selectionEnd,o=i.substring(e,s);let n="";switch(a){case"bold":n="**";break;case"italic":n="*";break;case"underline":n="__";break}const d=`${n}${o}${n}`,x=i.substring(0,e)+d+i.substring(s);c(x),setTimeout(()=>{e===s?r.setSelectionRange(e+n.length,s+n.length):r.setSelectionRange(s+2*n.length,s+2*n.length),r.focus()},0)},S=a=>a.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-white">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mt-4 mb-2 text-gray-900 dark:text-white">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mt-4 mb-2 text-gray-900 dark:text-white">$1</h1>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>').replace(/__(.*?)__/g,'<u class="underline">$1</u>').replace(/`(.*?)`/g,'<code class="bg-gray-200 dark:bg-gray-600 text-red-600 dark:text-red-400 px-1 rounded text-sm">$1</code>').replace(/^▶ (.*$)/gim,'<div class="flex items-center mt-2 mb-1"><span class="mr-2">▶</span><span class="font-medium text-gray-900 dark:text-white">$1</span></div>').replace(/^[\s]*[-*+]\s(.*$)/gim,'<div class="ml-4 mb-1"><span class="mr-2">•</span>$1</div>').replace(/^[\s]*\d+\.\s(.*$)/gim,'<div class="ml-4 mb-1"><span class="mr-2">1.</span>$1</div>').replace(/```(.*?)\n([\s\S]*?)\n```/gim,(r,e,s)=>`<pre class="bg-gray-800 p-3 rounded-lg overflow-x-auto my-3"><code class="${e?`language-${e.trim()}`:""} text-sm text-gray-100">${s.trim()}</code></pre>`).replace(/\n/g,"<br>");return t.jsxs("div",{className:`border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 ${f}`,children:[t.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 rounded-t-lg",children:[t.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[t.jsx("button",{type:"button",onClick:()=>b(1),className:"px-2 py-1 text-xs font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"제목 1",children:"H1"}),t.jsx("button",{type:"button",onClick:()=>b(2),className:"px-2 py-1 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"제목 2",children:"H2"}),t.jsx("button",{type:"button",onClick:()=>b(3),className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"제목 3",children:"H3"})]}),t.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),t.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[t.jsx("button",{type:"button",onClick:()=>m("bold"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"굵게",children:t.jsx(I,{className:"text-xs"})}),t.jsx("button",{type:"button",onClick:()=>m("italic"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"기울임",children:t.jsx(L,{className:"text-xs"})}),t.jsx("button",{type:"button",onClick:()=>m("underline"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"밑줄",children:t.jsx(T,{className:"text-xs"})})]}),t.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),t.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[t.jsx("button",{type:"button",onClick:()=>u("bullet"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"불릿 리스트",children:t.jsx(_,{className:"text-xs"})}),t.jsx("button",{type:"button",onClick:()=>u("number"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"번호 리스트",children:t.jsx(R,{className:"text-xs"})})]}),t.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),t.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[t.jsx("button",{type:"button",onClick:()=>h("out"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"내어쓰기",children:t.jsx(F,{className:"text-xs"})}),t.jsx("button",{type:"button",onClick:()=>h("in"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"들여쓰기",children:t.jsx(M,{className:"text-xs"})})]}),t.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),t.jsx("button",{type:"button",onClick:w,className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors mx-2",title:"토글 블록",children:t.jsx(H,{className:"text-xs"})}),t.jsx("button",{type:"button",onClick:$,className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"코드 블록",children:t.jsx(z,{className:"text-sm"})})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:l,value:i,onChange:a=>c(a.target.value),onSelect:y,onKeyUp:y,onMouseUp:y,placeholder:v,rows:j,className:"w-full p-3 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none resize-y"}),i&&t.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-0",children:t.jsx("div",{className:"p-3 text-gray-900 dark:text-white whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:S(i)}})})]})]})};export{E as R};
