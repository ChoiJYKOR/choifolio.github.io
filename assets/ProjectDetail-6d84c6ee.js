import{r as g,l as z,a8 as v,ad as H,ae as V,af as R,O as Y,P as G,A as U,j as W,k as e,q as N,L,R as q,n as P,aa as K,a9 as Q,z as X,ag as I,ah as J,V as A}from"./index-1fe3a1ef.js";import{u as Z}from"./useSkills-77227ec9.js";import{d as k,E as w}from"./detector-bcdba050.js";const O=(m,i)=>{const[r,S]=g.useState(null),[u,y]=g.useState(!0),[D,b]=g.useState(null),{skillCategories:s}=Z();g.useEffect(()=>{(async()=>{if(m)try{y(!0);const n=await R.getById(m);S(n.data)}catch(n){console.error("Failed to fetch project:",n),b("프로젝트를 불러오는데 실패했습니다.")}finally{y(!1)}})()},[m]);const f=g.useMemo(()=>r?{...r,title:z(i,r.title,r.titleEn,r.titleJa),description:z(i,r.description,r.descriptionEn,r.descriptionJa),detailedDescription:z(i,r.detailedDescription,r.detailedDescriptionEn,r.detailedDescriptionJa),technologies:v(i,r.technologies,r.technologiesEn,r.technologiesJa)||[],features:v(i,r.features,r.featuresEn,r.featuresJa)||[],learnings:v(i,r.learnings,r.learningsEn,r.learningsJa)||[],videoDescriptions:v(i,r.videoDescriptions,r.videoDescriptionsEn,r.videoDescriptionsJa)||[]}:null,[r,i]),j=l=>l>=90?"Expert":l>=70?"Proficient":l>=50?"Competent":"Basic",p=g.useMemo(()=>{if(!r||!s)return[];const l=s.flatMap(o=>o.skills||[]),n=new Set(r.skillIds||[]);return l.filter(o=>n.has(o._id)).map(o=>({...o,name:H(i,o),description:V(i,o),levelText:j(o.level||0)}))},[r,s,i]);return{loading:u,error:D,localizedProject:f,linkedSkills:p}},ae=()=>{var E,$;const{id:m}=Y(),i=G(),r=U(),{i18n:S,t:u}=W(),y=S.language,{loading:D,error:b,localizedProject:s,linkedSkills:f}=O(m,y),[j,p]=g.useState(null),[l,n]=g.useState(0),[o,C]=g.useState(0),M=t=>({backgroundColor:`${t}26`,color:t});if(D)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})});if(b||!s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:b||"프로젝트를 찾을 수 없습니다."}),e.jsx("button",{onClick:()=>i("/projects",{state:r.state}),className:"text-primary-600 hover:text-primary-700",children:u("projects.backToList")})]})});const B=t=>t.includes("youtube.com")||t.includes("youtu.be"),F=t=>t.includes("youtube.com/shorts/"),_=t=>{var x,h,T;let a="";return t.includes("youtube.com/shorts/")?a=((x=t.split("shorts/")[1])==null?void 0:x.split("?")[0])||"":t.includes("youtube.com/watch?v=")?a=((h=t.split("v=")[1])==null?void 0:h.split("&")[0])||"":t.includes("youtu.be/")&&(a=((T=t.split("youtu.be/")[1])==null?void 0:T.split("?")[0])||""),a?`https://www.youtube.com/embed/${a}?rel=0&modestbranding=1&showinfo=0`:""},d=((E=s.videos)==null?void 0:E.filter(t=>!F(t)))||[],c=(($=s.videos)==null?void 0:$.filter(t=>F(t)))||[];return e.jsxs("section",{className:"section-padding bg-gray-50 dark:bg-dark-900 min-h-screen",children:[e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:e.jsxs(L,{to:"/projects",state:r.state,className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6 dark:text-primary-400",children:[e.jsx(q,{})," ",u("projects.backToList")]})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[s.image&&e.jsx("div",{className:"md:w-1/3",children:e.jsx("img",{src:s.image,alt:s.title,className:"w-full h-auto rounded-lg shadow-lg object-cover",loading:"eager",decoding:"async",width:"800",height:"600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4 flex-wrap",children:[s.categoryIds&&s.categoryIds.length>0?s.categoryIds.map(t=>{const a=typeof t=="string"?t:t==null?void 0:t.name;return a?e.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:a},typeof t=="string"?t:t==null?void 0:t._id):null}):s.category&&e.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:s.category}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.status==="completed"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":s.status==="planning"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200"}`,children:s.status==="completed"?"완료":s.status==="planning"?"기획중":"준비중"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:s.title}),s.description&&e.jsx("div",{className:"mb-6",children:k(s.description)==="editorjs"?e.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:e.jsx(w,{data:s.description,className:"prose prose-lg dark:prose-invert max-w-none"})}):e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 leading-relaxed",children:s.description})}),s.technologies.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(P,{})," 사용 기술"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.technologies.map((t,a)=>e.jsx("span",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium",children:t},a))})]}),f.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(P,{})," 사용된 핵심 스킬"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(t=>{const a=t.color?M(t.color):void 0;return e.jsxs(L,{to:`/projects?skillId=${t._id}`,className:"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium hover:ring-2 transition-all hover:opacity-80",title:`${t.name} 스킬이 사용된 모든 프로젝트 보기`,style:{...a,"--tw-ring-color":t.color||"#3B82F6"},children:[e.jsx("span",{className:"font-semibold",children:t.name}),e.jsxs("span",{className:"text-xs font-semibold ml-1",style:{color:t.color||"#3B82F6"},children:["[",t.levelText,"]"]})]},t._id)})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.githubLink&&e.jsxs("a",{href:s.githubLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(K,{})," GitHub"]}),s.liveLink&&e.jsxs("a",{href:s.liveLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(Q,{})," Live Demo"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[s.images&&s.images.length>0&&e.jsxs("div",{className:"lg:col-span-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[e.jsx(X,{})," 프로젝트 이미지"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.images.map((t,a)=>e.jsx(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:a*.1},className:"cursor-pointer group",onClick:()=>p(t),children:e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden shadow-md group-hover:shadow-xl transition-shadow",children:e.jsx("img",{src:t,alt:`${s.title} ${a+1}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",decoding:"async",width:"640",height:"360"})})},a))})]}),d.length>0&&e.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8","data-video-section":!0,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(I,{})," 프로젝트 동영상"]}),d.length>1&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l+1," / ",d.length]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative group",children:[(()=>{var a;const t=d[l];return t?e.jsxs("div",{children:[B(t)?e.jsxs("div",{className:"relative w-full rounded-lg overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-700",children:[e.jsx("div",{className:"aspect-video",children:e.jsx("iframe",{src:_(t),title:`${s.title} 동영상 ${l+1}`,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors",children:"YouTube에서 보기"})})]}):e.jsxs("div",{className:"relative w-full rounded-lg overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-700",children:[e.jsx("div",{className:"aspect-video",children:e.jsxs("video",{src:t,controls:!0,className:"w-full h-full object-cover",preload:"metadata",children:[e.jsx("source",{src:t,type:"video/mp4"}),e.jsx("source",{src:t,type:"video/webm"}),e.jsx("source",{src:t,type:"video/ogg"}),"브라우저가 비디오를 지원하지 않습니다."]})}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors",children:"원본 보기"})})]}),((a=s.videoDescriptions)==null?void 0:a[l])&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:k(s.videoDescriptions[l])==="editorjs"?e.jsx(w,{data:s.videoDescriptions[l],className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none"}):e.jsx("div",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:s.videoDescriptions[l]}})})]}):null})(),d.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>n(t=>t===0?d.length-1:t-1),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10","aria-label":"이전 영상",children:e.jsx(J,{size:20})}),e.jsx("button",{onClick:()=>n(t=>t===d.length-1?0:t+1),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10","aria-label":"다음 영상",children:e.jsx(A,{size:20})})]})]}),d.length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:d.map((t,a)=>e.jsx("button",{onClick:()=>n(a),className:`h-2 rounded-full transition-all ${a===l?"w-8 bg-blue-600 dark:bg-blue-400":"w-2 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"}`,"aria-label":`${a+1}번째 영상 보기`},a))})]})]}),c.length>0&&e.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg px-4 py-8","data-shorts-section":!0,children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("div",{className:"relative group px-0",style:{maxWidth:"280px",width:"100%"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(I,{})," Shorts"]}),c.length>1&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o+1," / ",c.length]})]}),(()=>{var x,h;const t=c[o];if(!t)return null;const a=((x=s.videos)==null?void 0:x.indexOf(t))??-1;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"relative w-full rounded-lg overflow-hidden shadow-lg bg-black",children:[e.jsx("div",{className:"aspect-[9/16] w-full",style:{maxHeight:"600px"},children:e.jsx("iframe",{src:_(t),title:`${s.title} Shorts ${o+1}`,className:"w-full h-full",allowFullScreen:!0,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:e.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors flex items-center gap-1 shadow-lg",children:"Shorts"})})]}),((h=s.videoDescriptions)==null?void 0:h[a])&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",style:{maxWidth:"600px",margin:"1rem auto 0"},children:k(s.videoDescriptions[a])==="editorjs"?e.jsx(w,{data:s.videoDescriptions[a],className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none"}):e.jsx("div",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:s.videoDescriptions[a]}})})]})})(),c.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(t=>t===0?c.length-1:t-1),className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10","aria-label":"이전 쇼츠",children:e.jsx(J,{size:20})}),e.jsx("button",{onClick:()=>C(t=>t===c.length-1?0:t+1),className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10","aria-label":"다음 쇼츠",children:e.jsx(A,{size:20})})]})]})}),c.length>1&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:c.map((t,a)=>e.jsx("button",{onClick:()=>C(a),className:`h-2 rounded-full transition-all ${a===o?"w-8 bg-red-600 dark:bg-red-400":"w-2 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500"}`,"aria-label":`${a+1}번째 쇼츠 보기`},a))})]}),s.detailedDescription&&e.jsxs("div",{className:"lg:col-span-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"상세 설명"}),k(s.detailedDescription)==="editorjs"?e.jsx(w,{data:s.detailedDescription,className:"prose prose-lg dark:prose-invert max-w-none text-gray-700 dark:text-gray-300"}):e.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none text-gray-700 dark:text-gray-300",dangerouslySetInnerHTML:{__html:s.detailedDescription}})]}),s.features.length>0&&e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"주요 기능"}),e.jsx("ul",{className:"space-y-3",children:s.features.map((t,a)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-300 flex items-center justify-center text-sm font-medium mt-0.5",children:a+1}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t})]},a))})]}),s.learnings.length>0&&e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"배운 점"}),e.jsx("ul",{className:"space-y-3",children:s.learnings.map((t,a)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 mt-2"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:t})]},a))})]})]})]}),j&&e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:()=>p(null),children:[e.jsx("button",{onClick:()=>p(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 text-3xl",children:"×"}),e.jsx("img",{src:j,alt:"확대 이미지",className:"max-w-full max-h-full object-contain",loading:"eager",decoding:"async"})]})]})};export{ae as default};
