import{Q as l,aT as n,H as u}from"./index-1fe3a1ef.js";import{u as c}from"./useMutation-31c06883.js";const o=["categories"],p=()=>l({queryKey:o,queryFn:async()=>(await n.getAll()).data}),Q=e=>l({queryKey:[...o,e,"usage"],queryFn:async()=>{if(!e)throw new Error("ID가 필요합니다");return(await n.getUsage(e)).data},enabled:!!e}),d=()=>{const e=u();return c({mutationFn:async t=>(await n.create(t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:o})}})},C=()=>{const e=u();return c({mutationFn:async({id:t,data:s})=>(await n.update(t,s)).data,onSuccess:()=>{e.invalidateQueries({queryKey:o})}})},m=()=>{const e=u();return c({mutationFn:async t=>(await n.delete(t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:o})}})},f=()=>{const{data:e=[],isLoading:t}=p(),s=d(),y=C(),g=m();return{categories:e,isLoading:t,createCategory:async a=>{try{return await s.mutateAsync(a),{success:!0}}catch(r){return console.error("카테고리 생성 실패:",r),{success:!1,error:r}}},updateCategory:async(a,r)=>{try{return await y.mutateAsync({id:a,data:r}),{success:!0}}catch(i){return console.error("카테고리 수정 실패:",i),{success:!1,error:i}}},deleteCategory:async a=>{try{return await g.mutateAsync(a),{success:!0}}catch(r){return console.error("카테고리 삭제 실패:",r),{success:!1,error:r}}}}};export{f as a,Q as b,p as u};
