var t,e,n,i,r,s,o,a,l,c,u,h,d,f,p,g,m,_,v,y,x,b,S,w,E,T,M,C,A,R,P,N,D,L,O,k,I,F,U,z,B,H,V,W,G,j,X,q,K,$,Y,J,Z,Q,tt,et,nt,it,rt,st,ot,at,lt,ct,ut,ht,dt,ft,pt,gt,mt,_t,vt,yt,xt,bt,St,wt,Et,Tt,Mt,Ct,At,Rt,Pt,Nt,Dt,Lt,Ot=Object.defineProperty,kt=(t,e,n)=>(((t,e,n)=>{e in t?Ot(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n})(t,"symbol"!=typeof e?e+"":e,n),n),It=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Ft=(t,e,n)=>(It(t,e,"read from private field"),n?n.call(t):e.get(t)),Ut=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},zt=(t,e,n,i)=>(It(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Bt=(t,e,n,i)=>({set _(i){zt(t,e,i,n)},get _(){return Ft(t,e,i)}}),Ht=(t,e,n)=>(It(t,e,"access private method"),n);import{r as Vt,aQ as Wt,aR as Gt,aS as jt,c as Xt,aT as qt}from"./chunk-ace41c66.js";var Kt={exports:{}},$t={};
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
!function(t){function e(t,e){var n=t.length;t.push(e);t:for(;0<n;){var i=n-1>>>1,s=t[i];if(!(0<r(s,e)))break t;t[i]=e,t[n]=s,n=i}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,s=t.length,o=s>>>1;i<o;){var a=2*(i+1)-1,l=t[a],c=a+1,u=t[c];if(0>r(l,n))c<s&&0>r(u,l)?(t[i]=u,t[c]=n,i=c):(t[i]=l,t[a]=n,i=a);else{if(!(c<s&&0>r(u,n)))break t;t[i]=u,t[c]=n,i=c}}}return e}function r(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,d=3,f=!1,p=!1,g=!1,m="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(t){for(var r=n(c);null!==r;){if(null===r.callback)i(c);else{if(!(r.startTime<=t))break;i(c),r.sortIndex=r.expirationTime,e(l,r)}r=n(c)}}function x(t){if(g=!1,y(t),!p)if(null!==n(l))p=!0,D(b);else{var e=n(c);null!==e&&L(x,e.startTime-t)}}function b(e,r){p=!1,g&&(g=!1,_(T),T=-1),f=!0;var s=d;try{for(y(r),h=n(l);null!==h&&(!(h.expirationTime>r)||e&&!A());){var o=h.callback;if("function"==typeof o){h.callback=null,d=h.priorityLevel;var a=o(h.expirationTime<=r);r=t.unstable_now(),"function"==typeof a?h.callback=a:h===n(l)&&i(l),y(r)}else i(l);h=n(l)}if(null!==h)var u=!0;else{var m=n(c);null!==m&&L(x,m.startTime-r),u=!1}return u}finally{h=null,d=s,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,E=null,T=-1,M=5,C=-1;function A(){return!(t.unstable_now()-C<M)}function R(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?S():(w=!1,E=null)}}else w=!1}if("function"==typeof v)S=function(){v(R)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=R,S=function(){N.postMessage(null)}}else S=function(){m(R,0)};function D(t){E=t,w||(w=!0,S())}function L(e,n){T=m(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(t){t.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,D(b))},t.unstable_forceFrameRate=function(t){0>t||125<t||(M=0<t?Math.floor(1e3/t):5)},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(t){switch(d){case 1:case 2:case 3:var e=3;break;default:e=d}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_scheduleCallback=function(i,r,s){var o=t.unstable_now();switch("object"==typeof s&&null!==s?s="number"==typeof(s=s.delay)&&0<s?o+s:o:s=o,i){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return i={id:u++,callback:r,priorityLevel:i,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(i.sortIndex=s,e(c,i),null===n(l)&&i===n(c)&&(g?(_(T),T=-1):g=!0,L(x,s-o))):(i.sortIndex=a,e(l,i),p||f||(p=!0,D(b))),i},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(t){var e=d;return function(){var n=d;d=e;try{return t.apply(this,arguments)}finally{d=n}}}}($t),Kt.exports=$t;var Yt,Jt,Zt=Kt.exports;
/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qt(){return Qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qt.apply(this,arguments)}(Jt=Yt||(Yt={})).Pop="POP",Jt.Push="PUSH",Jt.Replace="REPLACE";const te="popstate";function ee(t){return void 0===t&&(t={}),function(t,e,n,i){void 0===i&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Yt.Pop,l=null,c=u();null==c&&(c=0,o.replaceState(Qt({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=Yt.Pop;let t=u(),e=null==t?null:t-c;c=t,l&&l({action:a,location:g.location,delta:e})}function d(t,e){a=Yt.Push;let i=se(g.location,t,e);n&&n(i,t),c=u()+1;let h=re(i,c),d=g.createHref(i);try{o.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;r.location.assign(d)}s&&l&&l({action:a,location:g.location,delta:1})}function f(t,e){a=Yt.Replace;let i=se(g.location,t,e);n&&n(i,t),c=u();let r=re(i,c),h=g.createHref(i);o.replaceState(r,"",h),s&&l&&l({action:a,location:g.location,delta:0})}function p(t){let e="null"!==r.location.origin?r.location.origin:r.location.href,n="string"==typeof t?t:oe(t);return n=n.replace(/ $/,"%20"),ne(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}let g={get action(){return a},get location(){return t(r,o)},listen(t){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(te,h),l=t,()=>{r.removeEventListener(te,h),l=null}},createHref:t=>e(r,t),createURL:p,encodeLocation(t){let e=p(t);return{pathname:e.pathname,search:e.search,hash:e.hash}},push:d,replace:f,go:t=>o.go(t)};return g}(function(t,e){let{pathname:n,search:i,hash:r}=t.location;return se("",{pathname:n,search:i,hash:r},e.state&&e.state.usr||null,e.state&&e.state.key||"default")},function(t,e){return"string"==typeof e?e:oe(e)},null,t)}function ne(t,e){if(!1===t||null==t)throw new Error(e)}function ie(t,e){if(!t)try{throw new Error(e)}catch(n){}}function re(t,e){return{usr:t.state,key:t.key,idx:e}}function se(t,e,n,i){return void 0===n&&(n=null),Qt({pathname:"string"==typeof t?t:t.pathname,search:"",hash:""},"string"==typeof e?ae(e):e,{state:n,key:e&&e.key||i||Math.random().toString(36).substr(2,8)})}function oe(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(e+="#"===i.charAt(0)?i:"#"+i),e}function ae(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}var le,ce;function ue(t,e,n){return void 0===n&&(n="/"),function(t,e,n,i){let r="string"==typeof e?ae(e):e,s=Ee(r.pathname||"/",n);if(null==s)return null;let o=he(t);!function(t){t.sort((t,e)=>t.score!==e.score?e.score-t.score:function(t,e){let n=t.length===e.length&&t.slice(0,-1).every((t,n)=>t===e[n]);return n?t[t.length-1]-e[e.length-1]:0}(t.routesMeta.map(t=>t.childrenIndex),e.routesMeta.map(t=>t.childrenIndex)))}(o);let a=null;for(let l=0;null==a&&l<o.length;++l){let t=we(s);a=be(o[l],t,i)}return a}(t,e,n,!1)}function he(t,e,n,i){void 0===e&&(e=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(t,r,s)=>{let o={relativePath:void 0===s?t.path||"":s,caseSensitive:!0===t.caseSensitive,childrenIndex:r,route:t};o.relativePath.startsWith("/")&&(ne(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=Ae([i,o.relativePath]),l=n.concat(o);t.children&&t.children.length>0&&(ne(!0!==t.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),he(t.children,e,l,a)),(null!=t.path||t.index)&&e.push({path:a,score:xe(a,t.index),routesMeta:l})};return t.forEach((t,e)=>{var n;if(""!==t.path&&null!=(n=t.path)&&n.includes("?"))for(let i of de(t.path))r(t,e,i);else r(t,e)}),e}function de(t){let e=t.split("/");if(0===e.length)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=de(i.join("/")),a=[];return a.push(...o.map(t=>""===t?s:[s,t].join("/"))),r&&a.push(...o),a.map(e=>t.startsWith("/")&&""===e?"/":e)}(ce=le||(le={})).data="data",ce.deferred="deferred",ce.redirect="redirect",ce.error="error";const fe=/^:[\w-]+$/,pe=3,ge=2,me=1,_e=10,ve=-2,ye=t=>"*"===t;function xe(t,e){let n=t.split("/"),i=n.length;return n.some(ye)&&(i+=ve),e&&(i+=ge),n.filter(t=>!ye(t)).reduce((t,e)=>t+(fe.test(e)?pe:""===e?me:_e),i)}function be(t,e,n){void 0===n&&(n=!1);let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let t=i[a],l=a===i.length-1,c="/"===s?e:e.slice(s.length)||"/",u=Se({path:t.relativePath,caseSensitive:t.caseSensitive,end:l},c),h=t.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=Se({path:t.relativePath,caseSensitive:t.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:Ae([s,u.pathname]),pathnameBase:Re(Ae([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=Ae([s,u.pathnameBase]))}return o}function Se(t,e){"string"==typeof t&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=function(t,e,n){void 0===e&&(e=!1);void 0===n&&(n=!0);ie("*"===t||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were "'+t.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+t.replace(/\*$/,"/*")+'".');let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(t,e,n)=>(i.push({paramName:e,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));t.endsWith("*")?(i.push({paramName:"*"}),r+="*"===t||"/*"===t?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==t&&"/"!==t&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,e?void 0:"i");return[s,i]}(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((t,e,n)=>{let{paramName:i,isOptional:r}=e;if("*"===i){let t=a[n]||"";o=s.slice(0,s.length-t.length).replace(/(.)\/+$/,"$1")}const l=a[n];return t[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),t},{}),pathname:s,pathnameBase:o,pattern:t}}function we(t){try{return t.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(e){return ie(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+e+")."),t}}function Ee(t,e){if("/"===e)return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&"/"!==i?null:t.slice(n)||"/"}function Te(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified `to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Me(t,e){let n=function(t){return t.filter((t,e)=>0===e||t.route.path&&t.route.path.length>0)}(t);return e?n.map((t,e)=>e===n.length-1?t.pathname:t.pathnameBase):n.map(t=>t.pathnameBase)}function Ce(t,e,n,i){let r;void 0===i&&(i=!1),"string"==typeof t?r=ae(t):(r=Qt({},t),ne(!r.pathname||!r.pathname.includes("?"),Te("?","pathname","search",r)),ne(!r.pathname||!r.pathname.includes("#"),Te("#","pathname","hash",r)),ne(!r.search||!r.search.includes("#"),Te("#","search","hash",r)));let s,o=""===t||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let t=e.length-1;if(!i&&a.startsWith("..")){let e=a.split("/");for(;".."===e[0];)e.shift(),t-=1;r.pathname=e.join("/")}s=t>=0?e[t]:"/"}let l=function(t,e){void 0===e&&(e="/");let{pathname:n,search:i="",hash:r=""}="string"==typeof t?ae(t):t,s=n?n.startsWith("/")?n:function(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(t=>{".."===t?n.length>1&&n.pop():"."!==t&&n.push(t)}),n.length>1?n.join("/"):"/"}(n,e):e;return{pathname:s,search:Pe(i),hash:Ne(r)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Ae=t=>t.join("/").replace(/\/\/+/g,"/"),Re=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Pe=t=>t&&"?"!==t?t.startsWith("?")?t:"?"+t:"",Ne=t=>t&&"#"!==t?t.startsWith("#")?t:"#"+t:"";function De(t){return null!=t&&"number"==typeof t.status&&"string"==typeof t.statusText&&"boolean"==typeof t.internal&&"data"in t}const Le=["post","put","patch","delete"];new Set(Le);const Oe=["get",...Le];new Set(Oe);var ke=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ie={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},Fe=new(n=class{constructor(){Ut(this,t,Ie),Ut(this,e,!1)}setTimeoutProvider(e){zt(this,t,e)}setTimeout(e,n){return Ft(this,t).setTimeout(e,n)}clearTimeout(e){Ft(this,t).clearTimeout(e)}setInterval(e,n){return Ft(this,t).setInterval(e,n)}clearInterval(e){Ft(this,t).clearInterval(e)}},t=new WeakMap,e=new WeakMap,n);var Ue="undefined"==typeof window||"Deno"in globalThis;function ze(){}function Be(t){return"number"==typeof t&&t>=0&&t!==1/0}function He(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Ve(t,e){return"function"==typeof t?t(e):t}function We(t,e){return"function"==typeof t?t(e):t}function Ge(t,e){const{type:n="all",exact:i,fetchStatus:r,predicate:s,queryKey:o,stale:a}=t;if(o)if(i){if(e.queryHash!==Xe(o,e.options))return!1}else if(!Ke(e.queryKey,o))return!1;if("all"!==n){const t=e.isActive();if("active"===n&&!t)return!1;if("inactive"===n&&t)return!1}return("boolean"!=typeof a||e.isStale()===a)&&((!r||r===e.state.fetchStatus)&&!(s&&!s(e)))}function je(t,e){const{exact:n,status:i,predicate:r,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(qe(e.options.mutationKey)!==qe(s))return!1}else if(!Ke(e.options.mutationKey,s))return!1}return(!i||e.state.status===i)&&!(r&&!r(e))}function Xe(t,e){return((null==e?void 0:e.queryKeyHashFn)||qe)(t)}function qe(t){return JSON.stringify(t,(t,e)=>Qe(e)?Object.keys(e).sort().reduce((t,n)=>(t[n]=e[n],t),{}):e)}function Ke(t,e){return t===e||typeof t==typeof e&&(!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&Object.keys(e).every(n=>Ke(t[n],e[n])))}var $e=Object.prototype.hasOwnProperty;function Ye(t,e){if(t===e)return t;const n=Ze(t)&&Ze(e);if(!(n||Qe(t)&&Qe(e)))return e;const i=(n?t:Object.keys(t)).length,r=n?e:Object.keys(e),s=r.length,o=n?new Array(s):{};let a=0;for(let l=0;l<s;l++){const s=n?l:r[l],c=t[s],u=e[s];if(c===u){o[s]=c,(n?l<i:$e.call(t,s))&&a++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){o[s]=u;continue}const h=Ye(c,u);o[s]=h,h===c&&a++}return i===s&&a===i?t:o}function Je(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Ze(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Qe(t){if(!tn(t))return!1;const e=t.constructor;if(void 0===e)return!0;const n=e.prototype;return!!tn(n)&&(!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype)}function tn(t){return"[object Object]"===Object.prototype.toString.call(t)}function en(t,e,n){return"function"==typeof n.structuralSharing?n.structuralSharing(t,e):!1!==n.structuralSharing?Ye(t,e):e}function nn(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function rn(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var sn=Symbol();function on(t,e){return!t.queryFn&&(null==e?void 0:e.initialPromise)?()=>e.initialPromise:t.queryFn&&t.queryFn!==sn?t.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`))}function an(t,e){return"function"==typeof t?t(...e):!!t}var ln=new(o=class extends ke{constructor(){super(),Ut(this,i,void 0),Ut(this,r,void 0),Ut(this,s,void 0),zt(this,s,t=>{if(!Ue&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){Ft(this,r)||this.setEventListener(Ft(this,s))}onUnsubscribe(){var t;this.hasListeners()||(null==(t=Ft(this,r))||t.call(this),zt(this,r,void 0))}setEventListener(t){var e;zt(this,s,t),null==(e=Ft(this,r))||e.call(this),zt(this,r,t(t=>{"boolean"==typeof t?this.setFocused(t):this.onFocus()}))}setFocused(t){Ft(this,i)!==t&&(zt(this,i,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return"boolean"==typeof Ft(this,i)?Ft(this,i):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},i=new WeakMap,r=new WeakMap,s=new WeakMap,o);function cn(){let t,e;const n=new Promise((n,i)=>{t=n,e=i});function i(t){Object.assign(n,t),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=e=>{i({status:"fulfilled",value:e}),t(e)},n.reject=t=>{i({status:"rejected",reason:t}),e(t)},n}var un=function(t){setTimeout(t,0)};var hn=function(){let t=[],e=0,n=t=>{t()},i=t=>{t()},r=un;const s=i=>{e?t.push(i):r(()=>{n(i)})};return{batch:s=>{let o;e++;try{o=s()}finally{e--,e||(()=>{const e=t;t=[],e.length&&r(()=>{i(()=>{e.forEach(t=>{n(t)})})})})()}return o},batchCalls:t=>(...e)=>{s(()=>{t(...e)})},schedule:s,setNotifyFunction:t=>{n=t},setBatchNotifyFunction:t=>{i=t},setScheduler:t=>{r=t}}}(),dn=new(u=class extends ke{constructor(){super(),Ut(this,a,!0),Ut(this,l,void 0),Ut(this,c,void 0),zt(this,c,t=>{if(!Ue&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){Ft(this,l)||this.setEventListener(Ft(this,c))}onUnsubscribe(){var t;this.hasListeners()||(null==(t=Ft(this,l))||t.call(this),zt(this,l,void 0))}setEventListener(t){var e;zt(this,c,t),null==(e=Ft(this,l))||e.call(this),zt(this,l,t(this.setOnline.bind(this)))}setOnline(t){Ft(this,a)!==t&&(zt(this,a,t),this.listeners.forEach(e=>{e(t)}))}isOnline(){return Ft(this,a)}},a=new WeakMap,l=new WeakMap,c=new WeakMap,u);function fn(t){return Math.min(1e3*2**t,3e4)}function pn(t){return"online"!==(t??"online")||dn.isOnline()}var gn=class extends Error{constructor(t){super("CancelledError"),this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent}};function mn(t){let e,n=!1,i=0;const r=cn(),s=()=>"pending"!==r.status,o=()=>ln.isFocused()&&("always"===t.networkMode||dn.isOnline())&&t.canRun(),a=()=>pn(t.networkMode)&&t.canRun(),l=t=>{s()||(null==e||e(),r.resolve(t))},c=t=>{s()||(null==e||e(),r.reject(t))},u=()=>new Promise(n=>{var i;e=t=>{(s()||o())&&n(t)},null==(i=t.onPause)||i.call(t)}).then(()=>{var n;e=void 0,s()||null==(n=t.onContinue)||n.call(t)}),h=()=>{if(s())return;let e;const r=0===i?t.initialPromise:void 0;try{e=r??t.fn()}catch(a){e=Promise.reject(a)}Promise.resolve(e).then(l).catch(e=>{var r;if(s())return;const a=t.retry??(Ue?0:3),l=t.retryDelay??fn,d="function"==typeof l?l(i,e):l,f=!0===a||"number"==typeof a&&i<a||"function"==typeof a&&a(i,e);var p;!n&&f?(i++,null==(r=t.onFail)||r.call(t,i,e),(p=d,new Promise(t=>{Fe.setTimeout(t,p)})).then(()=>o()?void 0:u()).then(()=>{n?c(e):h()})):c(e)})};return{promise:r,status:()=>r.status,cancel:e=>{var n;if(!s()){const i=new gn(e);c(i),null==(n=t.onCancel)||n.call(t,i)}},continue:()=>(null==e||e(),r),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:a,start:()=>(a()?h():u().then(h),r)}}var _n=(d=class{constructor(){Ut(this,h,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Be(this.gcTime)&&zt(this,h,Fe.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ue?1/0:3e5))}clearGcTimeout(){Ft(this,h)&&(Fe.clearTimeout(Ft(this,h)),zt(this,h,void 0))}},h=new WeakMap,d),vn=(S=class extends _n{constructor(t){super(),Ut(this,x),Ut(this,f,void 0),Ut(this,p,void 0),Ut(this,g,void 0),Ut(this,m,void 0),Ut(this,_,void 0),Ut(this,v,void 0),Ut(this,y,void 0),zt(this,y,!1),zt(this,v,t.defaultOptions),this.setOptions(t.options),this.observers=[],zt(this,m,t.client),zt(this,g,Ft(this,m).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,zt(this,f,xn(this.options)),this.state=t.state??Ft(this,f),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return null==(t=Ft(this,_))?void 0:t.promise}setOptions(t){if(this.options={...Ft(this,v),...t},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const t=xn(this.options);void 0!==t.data&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),zt(this,f,t))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Ft(this,g).remove(this)}setData(t,e){const n=en(this.state.data,t,this.options);return Ht(this,x,b).call(this,{data:n,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt,manual:null==e?void 0:e.manual}),n}setState(t,e){Ht(this,x,b).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var e,n;const i=null==(e=Ft(this,_))?void 0:e.promise;return null==(n=Ft(this,_))||n.cancel(t),i?i.then(ze).catch(ze):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ft(this,f))}isActive(){return this.observers.some(t=>!1!==We(t.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(t=>"static"===Ve(t.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(t=0){return void 0===this.state.data||"static"!==t&&(!!this.state.isInvalidated||!He(this.state.dataUpdatedAt,t))}onFocus(){var t;const e=this.observers.find(t=>t.shouldFetchOnWindowFocus());null==e||e.refetch({cancelRefetch:!1}),null==(t=Ft(this,_))||t.continue()}onOnline(){var t;const e=this.observers.find(t=>t.shouldFetchOnReconnect());null==e||e.refetch({cancelRefetch:!1}),null==(t=Ft(this,_))||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ft(this,g).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(Ft(this,_)&&(Ft(this,y)?Ft(this,_).cancel({revert:!0}):Ft(this,_).cancelRetry()),this.scheduleGc()),Ft(this,g).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,x,b).call(this,{type:"invalidate"})}async fetch(t,e){var n,i,r,s,o,a,l,c,u,h,d,f;if("idle"!==this.state.fetchStatus&&"rejected"!==(null==(n=Ft(this,_))?void 0:n.status()))if(void 0!==this.state.data&&(null==e?void 0:e.cancelRefetch))this.cancel({silent:!0});else if(Ft(this,_))return Ft(this,_).continueRetry(),Ft(this,_).promise;if(t&&this.setOptions(t),!this.options.queryFn){const t=this.observers.find(t=>t.options.queryFn);t&&this.setOptions(t.options)}const v=new AbortController,S=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>(zt(this,y,!0),v.signal)})},w=()=>{const t=on(this.options,e),n=(()=>{const t={client:Ft(this,m),queryKey:this.queryKey,meta:this.meta};return S(t),t})();return zt(this,y,!1),this.options.persister?this.options.persister(t,n,this):t(n)},E=(()=>{const t={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:Ft(this,m),state:this.state,fetchFn:w};return S(t),t})();null==(i=this.options.behavior)||i.onFetch(E,this),zt(this,p,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=E.fetchOptions)?void 0:r.meta)||Ht(this,x,b).call(this,{type:"fetch",meta:null==(s=E.fetchOptions)?void 0:s.meta}),zt(this,_,mn({initialPromise:null==e?void 0:e.initialPromise,fn:E.fetchFn,onCancel:t=>{t instanceof gn&&t.revert&&this.setState({...Ft(this,p),fetchStatus:"idle"}),v.abort()},onFail:(t,e)=>{Ht(this,x,b).call(this,{type:"failed",failureCount:t,error:e})},onPause:()=>{Ht(this,x,b).call(this,{type:"pause"})},onContinue:()=>{Ht(this,x,b).call(this,{type:"continue"})},retry:E.options.retry,retryDelay:E.options.retryDelay,networkMode:E.options.networkMode,canRun:()=>!0}));try{const t=await Ft(this,_).start();if(void 0===t)throw new Error(`${this.queryHash} data is undefined`);return this.setData(t),null==(a=(o=Ft(this,g).config).onSuccess)||a.call(o,t,this),null==(c=(l=Ft(this,g).config).onSettled)||c.call(l,t,this.state.error,this),t}catch(T){if(T instanceof gn){if(T.silent)return Ft(this,_).promise;if(T.revert){if(void 0===this.state.data)throw T;return this.state.data}}throw Ht(this,x,b).call(this,{type:"error",error:T}),null==(h=(u=Ft(this,g).config).onError)||h.call(u,T,this),null==(f=(d=Ft(this,g).config).onSettled)||f.call(d,this.state.data,T,this),T}finally{this.scheduleGc()}}},f=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,v=new WeakMap,y=new WeakMap,x=new WeakSet,b=function(t){this.state=(e=>{switch(t.type){case"failed":return{...e,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...e,fetchStatus:"paused"};case"continue":return{...e,fetchStatus:"fetching"};case"fetch":return{...e,...yn(e.data,this.options),fetchMeta:t.meta??null};case"success":const n={...e,data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return zt(this,p,t.manual?n:void 0),n;case"error":const i=t.error;return{...e,error:i,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...e,isInvalidated:!0};case"setState":return{...e,...t.state}}})(this.state),hn.batch(()=>{this.observers.forEach(t=>{t.onQueryUpdate()}),Ft(this,g).notify({query:this,type:"updated",action:t})})},S);function yn(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pn(e.networkMode)?"fetching":"paused",...void 0===t&&{error:null,status:"pending"}}}function xn(t){const e="function"==typeof t.initialData?t.initialData():t.initialData,n=void 0!==e,i=n?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bn=(nt=class extends ke{constructor(t,e){super(),Ut(this,U),Ut(this,B),Ut(this,V),Ut(this,G),Ut(this,X),Ut(this,K),Ut(this,Y),Ut(this,Z),Ut(this,tt),Ut(this,w,void 0),Ut(this,E,void 0),Ut(this,T,void 0),Ut(this,M,void 0),Ut(this,C,void 0),Ut(this,A,void 0),Ut(this,R,void 0),Ut(this,P,void 0),Ut(this,N,void 0),Ut(this,D,void 0),Ut(this,L,void 0),Ut(this,O,void 0),Ut(this,k,void 0),Ut(this,I,void 0),Ut(this,F,new Set),this.options=e,zt(this,w,t),zt(this,P,null),zt(this,R,cn()),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Ft(this,E).addObserver(this),Sn(Ft(this,E),this.options)?Ht(this,U,z).call(this):this.updateResult(),Ht(this,X,q).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return wn(Ft(this,E),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return wn(Ft(this,E),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ht(this,K,$).call(this),Ht(this,Y,J).call(this),Ft(this,E).removeObserver(this)}setOptions(t){const e=this.options,n=Ft(this,E);if(this.options=Ft(this,w).defaultQueryOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof We(this.options.enabled,Ft(this,E)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ht(this,Z,Q).call(this),Ft(this,E).setOptions(this.options),e._defaulted&&!Je(this.options,e)&&Ft(this,w).getQueryCache().notify({type:"observerOptionsUpdated",query:Ft(this,E),observer:this});const i=this.hasListeners();i&&En(Ft(this,E),n,this.options,e)&&Ht(this,U,z).call(this),this.updateResult(),!i||Ft(this,E)===n&&We(this.options.enabled,Ft(this,E))===We(e.enabled,Ft(this,E))&&Ve(this.options.staleTime,Ft(this,E))===Ve(e.staleTime,Ft(this,E))||Ht(this,B,H).call(this);const r=Ht(this,V,W).call(this);!i||Ft(this,E)===n&&We(this.options.enabled,Ft(this,E))===We(e.enabled,Ft(this,E))&&r===Ft(this,I)||Ht(this,G,j).call(this,r)}getOptimisticResult(t){const e=Ft(this,w).getQueryCache().build(Ft(this,w),t),n=this.createResult(e,t);return function(t,e){if(!Je(t.getCurrentResult(),e))return!0;return!1}(this,n)&&(zt(this,M,n),zt(this,A,this.options),zt(this,C,Ft(this,E).state)),n}getCurrentResult(){return Ft(this,M)}trackResult(t,e){return new Proxy(t,{get:(t,n)=>(this.trackProp(n),null==e||e(n),"promise"===n&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==Ft(this,R).status||Ft(this,R).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(t,n))})}trackProp(t){Ft(this,F).add(t)}getCurrentQuery(){return Ft(this,E)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=Ft(this,w).defaultQueryOptions(t),n=Ft(this,w).getQueryCache().build(Ft(this,w),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return Ht(this,U,z).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Ft(this,M)))}createResult(t,e){var n;const i=Ft(this,E),r=this.options,s=Ft(this,M),o=Ft(this,C),a=Ft(this,A),l=t!==i?t.state:Ft(this,T),{state:c}=t;let u,h={...c},d=!1;if(e._optimisticResults){const n=this.hasListeners(),s=!n&&Sn(t,e),o=n&&En(t,i,e,r);(s||o)&&(h={...h,...yn(c.data,t.options)}),"isRestoring"===e._optimisticResults&&(h.fetchStatus="idle")}let{error:f,errorUpdatedAt:p,status:g}=h;u=h.data;let m=!1;if(void 0!==e.placeholderData&&void 0===u&&"pending"===g){let t;(null==s?void 0:s.isPlaceholderData)&&e.placeholderData===(null==a?void 0:a.placeholderData)?(t=s.data,m=!0):t="function"==typeof e.placeholderData?e.placeholderData(null==(n=Ft(this,L))?void 0:n.state.data,Ft(this,L)):e.placeholderData,void 0!==t&&(g="success",u=en(null==s?void 0:s.data,t,e),d=!0)}if(e.select&&void 0!==u&&!m)if(s&&u===(null==o?void 0:o.data)&&e.select===Ft(this,N))u=Ft(this,D);else try{zt(this,N,e.select),u=e.select(u),u=en(null==s?void 0:s.data,u,e),zt(this,D,u),zt(this,P,null)}catch(w){zt(this,P,w)}Ft(this,P)&&(f=Ft(this,P),u=Ft(this,D),p=Date.now(),g="error");const _="fetching"===h.fetchStatus,v="pending"===g,y="error"===g,x=v&&_,b=void 0!==u,S={status:g,fetchStatus:h.fetchStatus,isPending:v,isSuccess:"success"===g,isError:y,isInitialLoading:x,isLoading:x,data:u,dataUpdatedAt:h.dataUpdatedAt,error:f,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>l.dataUpdateCount||h.errorUpdateCount>l.errorUpdateCount,isFetching:_,isRefetching:_&&!v,isLoadingError:y&&!b,isPaused:"paused"===h.fetchStatus,isPlaceholderData:d,isRefetchError:y&&b,isStale:Tn(t,e),refetch:this.refetch,promise:Ft(this,R),isEnabled:!1!==We(e.enabled,t)};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===S.status?t.reject(S.error):void 0!==S.data&&t.resolve(S.data)},n=()=>{const t=zt(this,R,S.promise=cn());e(t)},r=Ft(this,R);switch(r.status){case"pending":t.queryHash===i.queryHash&&e(r);break;case"fulfilled":"error"!==S.status&&S.data===r.value||n();break;case"rejected":"error"===S.status&&S.error===r.reason||n()}}return S}updateResult(){const t=Ft(this,M),e=this.createResult(Ft(this,E),this.options);if(zt(this,C,Ft(this,E).state),zt(this,A,this.options),void 0!==Ft(this,C).data&&zt(this,L,Ft(this,E)),Je(e,t))return;zt(this,M,e);Ht(this,tt,et).call(this,{listeners:(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,n="function"==typeof e?e():e;if("all"===n||!n&&!Ft(this,F).size)return!0;const i=new Set(n??Ft(this,F));return this.options.throwOnError&&i.add("error"),Object.keys(Ft(this,M)).some(e=>{const n=e;return Ft(this,M)[n]!==t[n]&&i.has(n)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ht(this,X,q).call(this)}},w=new WeakMap,E=new WeakMap,T=new WeakMap,M=new WeakMap,C=new WeakMap,A=new WeakMap,R=new WeakMap,P=new WeakMap,N=new WeakMap,D=new WeakMap,L=new WeakMap,O=new WeakMap,k=new WeakMap,I=new WeakMap,F=new WeakMap,U=new WeakSet,z=function(t){Ht(this,Z,Q).call(this);let e=Ft(this,E).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(ze)),e},B=new WeakSet,H=function(){Ht(this,K,$).call(this);const t=Ve(this.options.staleTime,Ft(this,E));if(Ue||Ft(this,M).isStale||!Be(t))return;const e=He(Ft(this,M).dataUpdatedAt,t)+1;zt(this,O,Fe.setTimeout(()=>{Ft(this,M).isStale||this.updateResult()},e))},V=new WeakSet,W=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(Ft(this,E)):this.options.refetchInterval)??!1},G=new WeakSet,j=function(t){Ht(this,Y,J).call(this),zt(this,I,t),!Ue&&!1!==We(this.options.enabled,Ft(this,E))&&Be(Ft(this,I))&&0!==Ft(this,I)&&zt(this,k,Fe.setInterval(()=>{(this.options.refetchIntervalInBackground||ln.isFocused())&&Ht(this,U,z).call(this)},Ft(this,I)))},X=new WeakSet,q=function(){Ht(this,B,H).call(this),Ht(this,G,j).call(this,Ht(this,V,W).call(this))},K=new WeakSet,$=function(){Ft(this,O)&&(Fe.clearTimeout(Ft(this,O)),zt(this,O,void 0))},Y=new WeakSet,J=function(){Ft(this,k)&&(Fe.clearInterval(Ft(this,k)),zt(this,k,void 0))},Z=new WeakSet,Q=function(){const t=Ft(this,w).getQueryCache().build(Ft(this,w),this.options);if(t===Ft(this,E))return;const e=Ft(this,E);zt(this,E,t),zt(this,T,t.state),this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))},tt=new WeakSet,et=function(t){hn.batch(()=>{t.listeners&&this.listeners.forEach(t=>{t(Ft(this,M))}),Ft(this,w).getQueryCache().notify({query:Ft(this,E),type:"observerResultsUpdated"})})},nt);function Sn(t,e){return function(t,e){return!1!==We(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&wn(t,e,e.refetchOnMount)}function wn(t,e,n){if(!1!==We(e.enabled,t)&&"static"!==Ve(e.staleTime,t)){const i="function"==typeof n?n(t):n;return"always"===i||!1!==i&&Tn(t,e)}return!1}function En(t,e,n,i){return(t!==e||!1===We(i.enabled,t))&&(!n.suspense||"error"!==t.state.status)&&Tn(t,n)}function Tn(t,e){return!1!==We(e.enabled,t)&&t.isStaleByTime(Ve(e.staleTime,t))}function Mn(t){return{onFetch:(e,n)=>{var i,r,s,o,a;const l=e.options,c=null==(s=null==(r=null==(i=e.fetchOptions)?void 0:i.meta)?void 0:r.fetchMore)?void 0:s.direction,u=(null==(o=e.state.data)?void 0:o.pages)||[],h=(null==(a=e.state.data)?void 0:a.pageParams)||[];let d={pages:[],pageParams:[]},f=0;const p=async()=>{let n=!1;const i=on(e.options,e.fetchOptions),r=async(t,r,s)=>{if(n)return Promise.reject();if(null==r&&t.pages.length)return Promise.resolve(t);const o=(()=>{const t={client:e.client,queryKey:e.queryKey,pageParam:r,direction:s?"backward":"forward",meta:e.options.meta};var i;return i=t,Object.defineProperty(i,"signal",{enumerable:!0,get:()=>(e.signal.aborted?n=!0:e.signal.addEventListener("abort",()=>{n=!0}),e.signal)}),t})(),a=await i(o),{maxPages:l}=e.options,c=s?rn:nn;return{pages:c(t.pages,a,l),pageParams:c(t.pageParams,r,l)}};if(c&&u.length){const t="backward"===c,e={pages:u,pageParams:h},n=(t?An:Cn)(l,e);d=await r(e,n,t)}else{const e=t??u.length;do{const t=0===f?h[0]??l.initialPageParam:Cn(l,d);if(f>0&&null==t)break;d=await r(d,t),f++}while(f<e)}return d};e.options.persister?e.fetchFn=()=>{var t,i;return null==(i=(t=e.options).persister)?void 0:i.call(t,p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=p}}}function Cn(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function An(t,{pages:e,pageParams:n}){var i;return e.length>0?null==(i=t.getPreviousPageParam)?void 0:i.call(t,e[0],e,n[0],n):void 0}var Rn=(ct=class extends _n{constructor(t){super(),Ut(this,at),Ut(this,it,void 0),Ut(this,rt,void 0),Ut(this,st,void 0),Ut(this,ot,void 0),zt(this,it,t.client),this.mutationId=t.mutationId,zt(this,st,t.mutationCache),zt(this,rt,[]),this.state=t.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ft(this,rt).includes(t)||(Ft(this,rt).push(t),this.clearGcTimeout(),Ft(this,st).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){zt(this,rt,Ft(this,rt).filter(e=>e!==t)),this.scheduleGc(),Ft(this,st).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ft(this,rt).length||("pending"===this.state.status?this.scheduleGc():Ft(this,st).remove(this))}continue(){var t;return(null==(t=Ft(this,ot))?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var e,n,i,r,s,o,a,l,c,u,h,d,f,p,g,m,_,v,y,x;const b=()=>{Ht(this,at,lt).call(this,{type:"continue"})},S={client:Ft(this,it),meta:this.options.meta,mutationKey:this.options.mutationKey};zt(this,ot,mn({fn:()=>this.options.mutationFn?this.options.mutationFn(t,S):Promise.reject(new Error("No mutationFn found")),onFail:(t,e)=>{Ht(this,at,lt).call(this,{type:"failed",failureCount:t,error:e})},onPause:()=>{Ht(this,at,lt).call(this,{type:"pause"})},onContinue:b,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ft(this,st).canRun(this)}));const w="pending"===this.state.status,E=!Ft(this,ot).canStart();try{if(w)b();else{Ht(this,at,lt).call(this,{type:"pending",variables:t,isPaused:E}),await(null==(n=(e=Ft(this,st).config).onMutate)?void 0:n.call(e,t,this,S));const s=await(null==(r=(i=this.options).onMutate)?void 0:r.call(i,t,S));s!==this.state.context&&Ht(this,at,lt).call(this,{type:"pending",context:s,variables:t,isPaused:E})}const f=await Ft(this,ot).start();return await(null==(o=(s=Ft(this,st).config).onSuccess)?void 0:o.call(s,f,t,this.state.context,this,S)),await(null==(l=(a=this.options).onSuccess)?void 0:l.call(a,f,t,this.state.context,S)),await(null==(u=(c=Ft(this,st).config).onSettled)?void 0:u.call(c,f,null,this.state.variables,this.state.context,this,S)),await(null==(d=(h=this.options).onSettled)?void 0:d.call(h,f,null,t,this.state.context,S)),Ht(this,at,lt).call(this,{type:"success",data:f}),f}catch(T){try{throw await(null==(p=(f=Ft(this,st).config).onError)?void 0:p.call(f,T,t,this.state.context,this,S)),await(null==(m=(g=this.options).onError)?void 0:m.call(g,T,t,this.state.context,S)),await(null==(v=(_=Ft(this,st).config).onSettled)?void 0:v.call(_,void 0,T,this.state.variables,this.state.context,this,S)),await(null==(x=(y=this.options).onSettled)?void 0:x.call(y,void 0,T,t,this.state.context,S)),T}finally{Ht(this,at,lt).call(this,{type:"error",error:T})}}finally{Ft(this,st).runNext(this)}}},it=new WeakMap,rt=new WeakMap,st=new WeakMap,ot=new WeakMap,at=new WeakSet,lt=function(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),hn.batch(()=>{Ft(this,rt).forEach(e=>{e.onMutationUpdate(t)}),Ft(this,st).notify({mutation:this,type:"updated",action:t})})},ct);var Pn=(ft=class extends ke{constructor(t={}){super(),Ut(this,ut,void 0),Ut(this,ht,void 0),Ut(this,dt,void 0),this.config=t,zt(this,ut,new Set),zt(this,ht,new Map),zt(this,dt,0)}build(t,e,n){const i=new Rn({client:t,mutationCache:this,mutationId:++Bt(this,dt)._,options:t.defaultMutationOptions(e),state:n});return this.add(i),i}add(t){Ft(this,ut).add(t);const e=Nn(t);if("string"==typeof e){const n=Ft(this,ht).get(e);n?n.push(t):Ft(this,ht).set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ft(this,ut).delete(t)){const e=Nn(t);if("string"==typeof e){const n=Ft(this,ht).get(e);if(n)if(n.length>1){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}else n[0]===t&&Ft(this,ht).delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Nn(t);if("string"==typeof e){const n=Ft(this,ht).get(e),i=null==n?void 0:n.find(t=>"pending"===t.state.status);return!i||i===t}return!0}runNext(t){var e;const n=Nn(t);if("string"==typeof n){const i=null==(e=Ft(this,ht).get(n))?void 0:e.find(e=>e!==t&&e.state.isPaused);return(null==i?void 0:i.continue())??Promise.resolve()}return Promise.resolve()}clear(){hn.batch(()=>{Ft(this,ut).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ft(this,ut).clear(),Ft(this,ht).clear()})}getAll(){return Array.from(Ft(this,ut))}find(t){const e={exact:!0,...t};return this.getAll().find(t=>je(e,t))}findAll(t={}){return this.getAll().filter(e=>je(t,e))}notify(t){hn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(t=>t.state.isPaused);return hn.batch(()=>Promise.all(t.map(t=>t.continue().catch(ze))))}},ut=new WeakMap,ht=new WeakMap,dt=new WeakMap,ft);function Nn(t){var e;return null==(e=t.options.scope)?void 0:e.id}var Dn=(St=class extends ke{constructor(t,e){super(),Ut(this,vt),Ut(this,xt),Ut(this,pt,void 0),Ut(this,gt,void 0),Ut(this,mt,void 0),Ut(this,_t,void 0),zt(this,pt,t),this.setOptions(e),this.bindMethods(),Ht(this,vt,yt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var e;const n=this.options;this.options=Ft(this,pt).defaultMutationOptions(t),Je(this.options,n)||Ft(this,pt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ft(this,mt),observer:this}),(null==n?void 0:n.mutationKey)&&this.options.mutationKey&&qe(n.mutationKey)!==qe(this.options.mutationKey)?this.reset():"pending"===(null==(e=Ft(this,mt))?void 0:e.state.status)&&Ft(this,mt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||null==(t=Ft(this,mt))||t.removeObserver(this)}onMutationUpdate(t){Ht(this,vt,yt).call(this),Ht(this,xt,bt).call(this,t)}getCurrentResult(){return Ft(this,gt)}reset(){var t;null==(t=Ft(this,mt))||t.removeObserver(this),zt(this,mt,void 0),Ht(this,vt,yt).call(this),Ht(this,xt,bt).call(this)}mutate(t,e){var n;return zt(this,_t,e),null==(n=Ft(this,mt))||n.removeObserver(this),zt(this,mt,Ft(this,pt).getMutationCache().build(Ft(this,pt),this.options)),Ft(this,mt).addObserver(this),Ft(this,mt).execute(t)}},pt=new WeakMap,gt=new WeakMap,mt=new WeakMap,_t=new WeakMap,vt=new WeakSet,yt=function(){var t;const e=(null==(t=Ft(this,mt))?void 0:t.state)??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};zt(this,gt,{...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset})},xt=new WeakSet,bt=function(t){hn.batch(()=>{var e,n,i,r,s,o,a,l;if(Ft(this,_t)&&this.hasListeners()){const c=Ft(this,gt).variables,u=Ft(this,gt).context,h={client:Ft(this,pt),meta:this.options.meta,mutationKey:this.options.mutationKey};"success"===(null==t?void 0:t.type)?(null==(n=(e=Ft(this,_t)).onSuccess)||n.call(e,t.data,c,u,h),null==(r=(i=Ft(this,_t)).onSettled)||r.call(i,t.data,null,c,u,h)):"error"===(null==t?void 0:t.type)&&(null==(o=(s=Ft(this,_t)).onError)||o.call(s,t.error,c,u,h),null==(l=(a=Ft(this,_t)).onSettled)||l.call(a,void 0,t.error,c,u,h))}this.listeners.forEach(t=>{t(Ft(this,gt))})})},St),Ln=(Et=class extends ke{constructor(t={}){super(),Ut(this,wt,void 0),this.config=t,zt(this,wt,new Map)}build(t,e,n){const i=e.queryKey,r=e.queryHash??Xe(i,e);let s=this.get(r);return s||(s=new vn({client:t,queryKey:i,queryHash:r,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(s)),s}add(t){Ft(this,wt).has(t.queryHash)||(Ft(this,wt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=Ft(this,wt).get(t.queryHash);e&&(t.destroy(),e===t&&Ft(this,wt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){hn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ft(this,wt).get(t)}getAll(){return[...Ft(this,wt).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(t=>Ge(e,t))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(e=>Ge(t,e)):e}notify(t){hn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){hn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){hn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},wt=new WeakMap,Et),On=(Lt=class{constructor(t={}){Ut(this,Tt,void 0),Ut(this,Mt,void 0),Ut(this,Ct,void 0),Ut(this,At,void 0),Ut(this,Rt,void 0),Ut(this,Pt,void 0),Ut(this,Nt,void 0),Ut(this,Dt,void 0),zt(this,Tt,t.queryCache||new Ln),zt(this,Mt,t.mutationCache||new Pn),zt(this,Ct,t.defaultOptions||{}),zt(this,At,new Map),zt(this,Rt,new Map),zt(this,Pt,0)}mount(){Bt(this,Pt)._++,1===Ft(this,Pt)&&(zt(this,Nt,ln.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ft(this,Tt).onFocus())})),zt(this,Dt,dn.subscribe(async t=>{t&&(await this.resumePausedMutations(),Ft(this,Tt).onOnline())})))}unmount(){var t,e;Bt(this,Pt)._--,0===Ft(this,Pt)&&(null==(t=Ft(this,Nt))||t.call(this),zt(this,Nt,void 0),null==(e=Ft(this,Dt))||e.call(this),zt(this,Dt,void 0))}isFetching(t){return Ft(this,Tt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Ft(this,Mt).findAll({...t,status:"pending"}).length}getQueryData(t){var e;const n=this.defaultQueryOptions({queryKey:t});return null==(e=Ft(this,Tt).get(n.queryHash))?void 0:e.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Ft(this,Tt).build(this,e),i=n.state.data;return void 0===i?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Ve(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return Ft(this,Tt).findAll(t).map(({queryKey:t,state:e})=>[t,e.data])}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),r=Ft(this,Tt).get(i.queryHash),s=function(t,e){return"function"==typeof t?t(e):t}(e,null==r?void 0:r.state.data);if(void 0!==s)return Ft(this,Tt).build(this,i).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return hn.batch(()=>Ft(this,Tt).findAll(t).map(({queryKey:t})=>[t,this.setQueryData(t,e,n)]))}getQueryState(t){var e;const n=this.defaultQueryOptions({queryKey:t});return null==(e=Ft(this,Tt).get(n.queryHash))?void 0:e.state}removeQueries(t){const e=Ft(this,Tt);hn.batch(()=>{e.findAll(t).forEach(t=>{e.remove(t)})})}resetQueries(t,e){const n=Ft(this,Tt);return hn.batch(()=>(n.findAll(t).forEach(t=>{t.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=hn.batch(()=>Ft(this,Tt).findAll(t).map(t=>t.cancel(n)));return Promise.all(i).then(ze).catch(ze)}invalidateQueries(t,e={}){return hn.batch(()=>(Ft(this,Tt).findAll(t).forEach(t=>{t.invalidate()}),"none"===(null==t?void 0:t.refetchType)?Promise.resolve():this.refetchQueries({...t,type:(null==t?void 0:t.refetchType)??(null==t?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=hn.batch(()=>Ft(this,Tt).findAll(t).filter(t=>!t.isDisabled()&&!t.isStatic()).map(t=>{let e=t.fetch(void 0,n);return n.throwOnError||(e=e.catch(ze)),"paused"===t.state.fetchStatus?Promise.resolve():e}));return Promise.all(i).then(ze)}fetchQuery(t){const e=this.defaultQueryOptions(t);void 0===e.retry&&(e.retry=!1);const n=Ft(this,Tt).build(this,e);return n.isStaleByTime(Ve(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(ze).catch(ze)}fetchInfiniteQuery(t){return t.behavior=Mn(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(ze).catch(ze)}ensureInfiniteQueryData(t){return t.behavior=Mn(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return dn.isOnline()?Ft(this,Mt).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ft(this,Tt)}getMutationCache(){return Ft(this,Mt)}getDefaultOptions(){return Ft(this,Ct)}setDefaultOptions(t){zt(this,Ct,t)}setQueryDefaults(t,e){Ft(this,At).set(qe(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Ft(this,At).values()],n={};return e.forEach(e=>{Ke(t,e.queryKey)&&Object.assign(n,e.defaultOptions)}),n}setMutationDefaults(t,e){Ft(this,Rt).set(qe(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Ft(this,Rt).values()],n={};return e.forEach(e=>{Ke(t,e.mutationKey)&&Object.assign(n,e.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Ft(this,Ct).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Xe(e.queryKey,e)),void 0===e.refetchOnReconnect&&(e.refetchOnReconnect="always"!==e.networkMode),void 0===e.throwOnError&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===sn&&(e.enabled=!1),e}defaultMutationOptions(t){return(null==t?void 0:t._defaulted)?t:{...Ft(this,Ct).mutations,...(null==t?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Ft(this,Tt).clear(),Ft(this,Mt).clear()}},Tt=new WeakMap,Mt=new WeakMap,Ct=new WeakMap,At=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,Nt=new WeakMap,Dt=new WeakMap,Lt);
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const kn="180",In=2,Fn=0,Un=1,zn=2,Bn=100,Hn=101,Vn=102,Wn=200,Gn=201,jn=202,Xn=203,qn=204,Kn=205,$n=206,Yn=207,Jn=208,Zn=209,Qn=210,ti=211,ei=212,ni=213,ii=214,ri=0,si=1,oi=2,ai=3,li=4,ci=5,ui=6,hi=7,di=301,fi=302,pi=306,gi=1e3,mi=1001,_i=1002,vi=1003,yi=1004,xi=1005,bi=1006,Si=1007,wi=1008,Ei=1009,Ti=1010,Mi=1011,Ci=1012,Ai=1013,Ri=1014,Pi=1015,Ni=1016,Di=1017,Li=1018,Oi=1020,ki=35902,Ii=35899,Fi=1023,Ui=1026,zi=1027,Bi=1029,Hi=1031,Vi=1033,Wi=33776,Gi=33777,ji=33778,Xi=33779,qi=35840,Ki=35841,$i=35842,Yi=35843,Ji=36196,Zi=37492,Qi=37496,tr=37808,er=37809,nr=37810,ir=37811,rr=37812,sr=37813,or=37814,ar=37815,lr=37816,cr=37817,ur=37818,hr=37819,dr=37820,fr=37821,pr=36492,gr=36494,mr=36495,_r=36283,vr=36284,yr=36285,xr=36286,br="",Sr="srgb",wr="srgb-linear",Er="linear",Tr="srgb",Mr=7680,Cr=512,Ar=513,Rr=514,Pr=515,Nr=516,Dr=517,Lr=518,Or=519,kr="300 es",Ir=2e3,Fr=2001;class Ur{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){const n=this._listeners;return void 0!==n&&(void 0!==n[t]&&-1!==n[t].indexOf(e))}removeEventListener(t,e){const n=this._listeners;if(void 0===n)return;const i=n[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){const e=this._listeners;if(void 0===e)return;const n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,i=e.length;n<i;n++)e[n].call(this,t);t.target=null}}}const zr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Br=Math.PI/180,Hr=180/Math.PI;function Vr(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(zr[255&t]+zr[t>>8&255]+zr[t>>16&255]+zr[t>>24&255]+"-"+zr[255&e]+zr[e>>8&255]+"-"+zr[e>>16&15|64]+zr[e>>24&255]+"-"+zr[63&n|128]+zr[n>>8&255]+"-"+zr[n>>16&255]+zr[n>>24&255]+zr[255&i]+zr[i>>8&255]+zr[i>>16&255]+zr[i>>24&255]).toLowerCase()}function Wr(t,e,n){return Math.max(e,Math.min(n,t))}function Gr(t,e,n){return(1-n)*t+n*e}function jr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Xr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class qr{constructor(t=0,e=0){qr.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Wr(this.x,t.x,e.x),this.y=Wr(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Wr(this.x,t,e),this.y=Wr(this.y,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wr(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Wr(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,s=this.y-t.y;return this.x=r*n-s*i+t.x,this.y=r*i+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Kr{constructor(t=0,e=0,n=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=i}static slerpFlat(t,e,n,i,r,s,o){let a=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[s+0],d=r[s+1],f=r[s+2],p=r[s+3];if(0===o)return t[e+0]=a,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===o)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||a!==h||l!==d||c!==f){let t=1-o;const e=a*h+l*d+c*f+u*p,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,e*n);t=Math.sin(t*s)/r,o=Math.sin(o*s)/r}const r=o*n;if(a=a*t+h*r,l=l*t+d*r,c=c*t+f*r,u=u*t+p*r,t===1-o){const t=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=t,l*=t,c*=t,u*=t}}t[e]=a,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,s){const o=n[i],a=n[i+1],l=n[i+2],c=n[i+3],u=r[s],h=r[s+1],d=r[s+2],f=r[s+3];return t[e]=o*f+c*u+a*d-l*h,t[e+1]=a*f+c*h+l*u-o*d,t[e+2]=l*f+c*d+o*h-a*u,t[e+3]=c*f-o*u-a*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,i=t._y,r=t._z,s=t._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(i/2),u=o(r/2),h=a(n/2),d=a(i/2),f=a(r/2);switch(s){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],u=e[10],h=n+o+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-a)*t,this._y=(r-l)*t,this._z=(s-i)*t}else if(n>o&&n>u){const t=2*Math.sqrt(1+n-o-u);this._w=(c-a)/t,this._x=.25*t,this._y=(i+s)/t,this._z=(r+l)/t}else if(o>u){const t=2*Math.sqrt(1+o-n-u);this._w=(r-l)/t,this._x=(i+s)/t,this._y=.25*t,this._z=(a+c)/t}else{const t=2*Math.sqrt(1+u-n-o);this._w=(s-i)/t,this._x=(r+l)/t,this._y=(a+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Wr(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,s=t._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=n*c+s*o+i*l-r*a,this._y=i*c+s*a+r*o-n*l,this._z=r*c+s*l+n*a-i*o,this._w=s*c-n*o-i*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,s=this._w;let o=s*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(t),i*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class $r{constructor(t=0,e=0,n=0){$r.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Jr.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Jr.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,s=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,s=t.y,o=t.z,a=t.w,l=2*(s*i-o*n),c=2*(o*e-r*i),u=2*(r*n-s*e);return this.x=e+a*l+s*u-o*c,this.y=n+a*c+o*l-r*u,this.z=i+a*u+r*c-s*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Wr(this.x,t.x,e.x),this.y=Wr(this.y,t.y,e.y),this.z=Wr(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Wr(this.x,t,e),this.y=Wr(this.y,t,e),this.z=Wr(this.z,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wr(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,s=e.x,o=e.y,a=e.z;return this.x=i*a-r*o,this.y=r*s-n*a,this.z=n*o-i*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Yr.copy(this).projectOnVector(t),this.sub(Yr)}reflect(t){return this.sub(Yr.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Wr(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Yr=new $r,Jr=new Kr;class Zr{constructor(t,e,n,i,r,s,o,a,l){Zr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,s,o,a,l)}set(t,e,n,i,r,s,o,a,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],g=i[3],m=i[6],_=i[1],v=i[4],y=i[7],x=i[2],b=i[5],S=i[8];return r[0]=s*p+o*_+a*x,r[3]=s*g+o*v+a*b,r[6]=s*m+o*y+a*S,r[1]=l*p+c*_+u*x,r[4]=l*g+c*v+u*b,r[7]=l*m+c*y+u*S,r[2]=h*p+d*_+f*x,r[5]=h*g+d*v+f*b,r[8]=h*m+d*y+f*S,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*s*c-e*o*l-n*r*c+n*o*a+i*r*l-i*s*a}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=c*s-o*l,h=o*a-c*r,d=l*r-s*a,f=e*u+n*h+i*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(i*l-c*n)*p,t[2]=(o*n-i*s)*p,t[3]=h*p,t[4]=(c*e-i*a)*p,t[5]=(i*r-o*e)*p,t[6]=d*p,t[7]=(n*a-l*e)*p,t[8]=(s*e-n*r)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,s,o){const a=Math.cos(r),l=Math.sin(r);return this.set(n*a,n*l,-n*(a*s+l*o)+s+t,-i*l,i*a,-i*(-l*s+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(Qr.makeScale(t,e)),this}rotate(t){return this.premultiply(Qr.makeRotation(-t)),this}translate(t,e){return this.premultiply(Qr.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const Qr=new Zr;function ts(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function es(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function ns(){const t=es("canvas");return t.style.display="block",t}const is={};function rs(t){t in is||(is[t]=!0)}const ss=(new Zr).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),os=(new Zr).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function as(){const t={enabled:!0,workingColorSpace:wr,spaces:{},convert:function(t,e,n){return!1!==this.enabled&&e!==n&&e&&n?(this.spaces[e].transfer===Tr&&(t.r=cs(t.r),t.g=cs(t.g),t.b=cs(t.b)),this.spaces[e].primaries!==this.spaces[n].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[n].fromXYZ)),this.spaces[n].transfer===Tr&&(t.r=us(t.r),t.g=us(t.g),t.b=us(t.b)),t):t},workingToColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},colorSpaceToWorking:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===br?Er:this.spaces[t].transfer},getToneMappingMode:function(t){return this.spaces[t].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,n){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[n].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(e,n){return rs("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(e,n)},toWorkingColorSpace:function(e,n){return rs("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(e,n)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[wr]:{primaries:e,whitePoint:i,transfer:Er,toXYZ:ss,fromXYZ:os,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Sr},outputColorSpaceConfig:{drawingBufferColorSpace:Sr}},[Sr]:{primaries:e,whitePoint:i,transfer:Tr,toXYZ:ss,fromXYZ:os,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Sr}}}),t}const ls=as();function cs(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function us(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let hs;class ds{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{void 0===hs&&(hs=es("canvas")),hs.width=t.width,hs.height=t.height;const e=hs.getContext("2d");t instanceof ImageData?e.putImageData(t,0,0):e.drawImage(t,0,0,t.width,t.height),n=hs}return n.toDataURL(e)}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=es("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const i=n.getImageData(0,0,t.width,t.height),r=i.data;for(let t=0;t<r.length;t++)r[t]=255*cs(r[t]/255);return n.putImageData(i,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*cs(e[t]/255)):e[t]=cs(e[t]);return{data:e,width:t.width,height:t.height}}return t}}let fs=0;class ps{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fs++}),this.uuid=Vr(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const e=this.data;return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):null!==e?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let t;if(Array.isArray(i)){t=[];for(let e=0,n=i.length;e<n;e++)i[e].isDataTexture?t.push(gs(i[e].image)):t.push(gs(i[e]))}else t=gs(i);n.url=t}return e||(t.images[this.uuid]=n),n}}function gs(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?ds.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:{}}let ms=0;const _s=new $r;class vs extends Ur{constructor(t=vs.DEFAULT_IMAGE,e=vs.DEFAULT_MAPPING,n=1001,i=1001,r=1006,s=1008,o=1023,a=1009,l=vs.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ms++}),this.uuid=Vr(),this.name="",this.source=new ps(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new qr(0,0),this.repeat=new qr(1,1),this.center=new qr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_s).x}get height(){return this.source.getSize(_s).y}get depth(){return this.source.getSize(_s).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const n=t[e];if(void 0===n)continue;const i=this[e];void 0!==i&&(i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[e]=n)}}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case gi:t.x=t.x-Math.floor(t.x);break;case mi:t.x=t.x<0?0:1;break;case _i:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case gi:t.y=t.y-Math.floor(t.y);break;case mi:t.y=t.y<0?0:1;break;case _i:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}vs.DEFAULT_IMAGE=null,vs.DEFAULT_MAPPING=300,vs.DEFAULT_ANISOTROPY=1;class ys{constructor(t=0,e=0,n=0,i=1){ys.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*e+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*e+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*e+s[7]*n+s[11]*i+s[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const s=.01,o=.1,a=t.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],f=a[9],p=a[2],g=a[6],m=a[10];if(Math.abs(c-h)<s&&Math.abs(u-p)<s&&Math.abs(f-g)<s){if(Math.abs(c+h)<o&&Math.abs(u+p)<o&&Math.abs(f+g)<o&&Math.abs(l+d+m-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,a=(d+1)/2,_=(m+1)/2,v=(c+h)/4,y=(u+p)/4,x=(f+g)/4;return t>a&&t>_?t<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=v/n,r=y/n):a>_?a<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(a),n=v/i,r=x/i):_<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(_),n=y/r,i=x/r),this.set(n,i,r,e),this}let _=Math.sqrt((g-f)*(g-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(g-f)/_,this.y=(u-p)/_,this.z=(h-c)/_,this.w=Math.acos((l+d+m-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Wr(this.x,t.x,e.x),this.y=Wr(this.y,t.y,e.y),this.z=Wr(this.z,t.z,e.z),this.w=Wr(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Wr(this.x,t,e),this.y=Wr(this.y,t,e),this.z=Wr(this.z,t,e),this.w=Wr(this.w,t,e),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Wr(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xs extends Ur{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:bi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new ys(0,0,t,e),this.scissorTest=!1,this.viewport=new ys(0,0,t,e);const i={width:t,height:e,depth:n.depth},r=new vs(i);this.textures=[];const s=n.count;for(let o=0;o<s;o++)this.textures[o]=r.clone(),this.textures[o].isRenderTargetTexture=!0,this.textures[o].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){const e={minFilter:bi,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==t.mapping&&(e.mapping=t.mapping),void 0!==t.wrapS&&(e.wrapS=t.wrapS),void 0!==t.wrapT&&(e.wrapT=t.wrapT),void 0!==t.wrapR&&(e.wrapR=t.wrapR),void 0!==t.magFilter&&(e.magFilter=t.magFilter),void 0!==t.minFilter&&(e.minFilter=t.minFilter),void 0!==t.format&&(e.format=t.format),void 0!==t.type&&(e.type=t.type),void 0!==t.anisotropy&&(e.anisotropy=t.anisotropy),void 0!==t.colorSpace&&(e.colorSpace=t.colorSpace),void 0!==t.flipY&&(e.flipY=t.flipY),void 0!==t.generateMipmaps&&(e.generateMipmaps=t.generateMipmaps),void 0!==t.internalFormat&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++){this.textures[n].setValues(e)}}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=n,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const n=Object.assign({},t.textures[e].image);this.textures[e].source=new ps(n)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class bs extends xs{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class Ss extends vs{constructor(t=null,e=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=vi,this.minFilter=vi,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class ws extends vs{constructor(t=null,e=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:i},this.magFilter=vi,this.minFilter=vi,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Es{constructor(t=new $r(1/0,1/0,1/0),e=new $r(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Ms.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Ms.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ms.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const i=n.getAttribute("position");if(!0===e&&void 0!==i&&!0!==t.isInstancedMesh)for(let e=0,n=i.count;e<n;e++)!0===t.isMesh?t.getVertexPosition(e,Ms):Ms.fromBufferAttribute(i,e),Ms.applyMatrix4(t.matrixWorld),this.expandByPoint(Ms);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Cs.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Cs.copy(n.boundingBox)),Cs.applyMatrix4(t.matrixWorld),this.union(Cs)}const i=t.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ms),Ms.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Os),ks.subVectors(this.max,Os),As.subVectors(t.a,Os),Rs.subVectors(t.b,Os),Ps.subVectors(t.c,Os),Ns.subVectors(Rs,As),Ds.subVectors(Ps,Rs),Ls.subVectors(As,Ps);let e=[0,-Ns.z,Ns.y,0,-Ds.z,Ds.y,0,-Ls.z,Ls.y,Ns.z,0,-Ns.x,Ds.z,0,-Ds.x,Ls.z,0,-Ls.x,-Ns.y,Ns.x,0,-Ds.y,Ds.x,0,-Ls.y,Ls.x,0];return!!Us(e,As,Rs,Ps,ks)&&(e=[1,0,0,0,1,0,0,0,1],!!Us(e,As,Rs,Ps,ks)&&(Is.crossVectors(Ns,Ds),e=[Is.x,Is.y,Is.z],Us(e,As,Rs,Ps,ks)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ms).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Ms).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Ts[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ts[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ts[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ts[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ts[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ts[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ts[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ts[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ts)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const Ts=[new $r,new $r,new $r,new $r,new $r,new $r,new $r,new $r],Ms=new $r,Cs=new Es,As=new $r,Rs=new $r,Ps=new $r,Ns=new $r,Ds=new $r,Ls=new $r,Os=new $r,ks=new $r,Is=new $r,Fs=new $r;function Us(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){Fs.fromArray(t,s);const o=r.x*Math.abs(Fs.x)+r.y*Math.abs(Fs.y)+r.z*Math.abs(Fs.z),a=e.dot(Fs),l=n.dot(Fs),c=i.dot(Fs);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const zs=new Es,Bs=new $r,Hs=new $r;class Vs{constructor(t=new $r,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):zs.setFromPoints(t).getCenter(n);let i=0;for(let r=0,s=t.length;r<s;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Bs.subVectors(t,this.center);const e=Bs.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.addScaledVector(Bs,n/t),this.radius+=n}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Hs.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Bs.copy(t.center).add(Hs)),this.expandByPoint(Bs.copy(t.center).sub(Hs))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const Ws=new $r,Gs=new $r,js=new $r,Xs=new $r,qs=new $r,Ks=new $r,$s=new $r;class Ys{constructor(t=new $r,e=new $r(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ws)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Ws.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ws.copy(this.origin).addScaledVector(this.direction,e),Ws.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){Gs.copy(t).add(e).multiplyScalar(.5),js.copy(e).sub(t).normalize(),Xs.copy(this.origin).sub(Gs);const r=.5*t.distanceTo(e),s=-this.direction.dot(js),o=Xs.dot(this.direction),a=-Xs.dot(js),l=Xs.lengthSq(),c=Math.abs(1-s*s);let u,h,d,f;if(c>0)if(u=s*a-o,h=s*o-a,f=r*c,u>=0)if(h>=-f)if(h<=f){const t=1/c;u*=t,h*=t,d=u*(u+s*h+2*o)+h*(s*u+h+2*a)+l}else h=r,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;else h=-r,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;else h<=-f?(u=Math.max(0,-(-s*r+o)),h=u>0?-r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l):h<=f?(u=0,h=Math.min(Math.max(-r,-a),r),d=h*(h+2*a)+l):(u=Math.max(0,-(s*r+o)),h=u>0?r:Math.min(Math.max(-r,-a),r),d=-u*u+h*(h+2*a)+l);else h=s>0?-r:r,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(Gs).addScaledVector(js,h),d}intersectSphere(t,e){Ws.subVectors(t.center,this.origin);const n=Ws.dot(this.direction),i=Ws.dot(Ws)-n*n,r=t.radius*t.radius;if(i>r)return null;const s=Math.sqrt(r-i),o=n-s,a=n+s;return a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return!(t.radius<0)&&this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,s,o,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,s=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,s=(t.min.y-h.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(o=(t.min.z-h.z)*u,a=(t.max.z-h.z)*u):(o=(t.max.z-h.z)*u,a=(t.min.z-h.z)*u),n>a||o>i?null:((o>n||n!=n)&&(n=o),(a<i||i!=i)&&(i=a),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,Ws)}intersectTriangle(t,e,n,i,r){qs.subVectors(e,t),Ks.subVectors(n,t),$s.crossVectors(qs,Ks);let s,o=this.direction.dot($s);if(o>0){if(i)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Xs.subVectors(this.origin,t);const a=s*this.direction.dot(Ks.crossVectors(Xs,Ks));if(a<0)return null;const l=s*this.direction.dot(qs.cross(Xs));if(l<0)return null;if(a+l>o)return null;const c=-s*Xs.dot($s);return c<0?null:this.at(c/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Js{constructor(t,e,n,i,r,s,o,a,l,c,u,h,d,f,p,g){Js.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,i,r,s,o,a,l,c,u,h,d,f,p,g)}set(t,e,n,i,r,s,o,a,l,c,u,h,d,f,p,g){const m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=s,m[9]=o,m[13]=a,m[2]=l,m[6]=c,m[10]=u,m[14]=h,m[3]=d,m[7]=f,m[11]=p,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Js).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Zs.setFromMatrixColumn(t,0).length(),r=1/Zs.setFromMatrixColumn(t,1).length(),s=1/Zs.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,i=t.y,r=t.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=s*c,n=s*u,i=o*c,r=o*u;e[0]=a*c,e[4]=-a*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-o*a,e[2]=r-t*l,e[6]=i+n*l,e[10]=s*a}else if("YXZ"===t.order){const t=a*c,n=a*u,i=l*c,r=l*u;e[0]=t+r*o,e[4]=i*o-n,e[8]=s*l,e[1]=s*u,e[5]=s*c,e[9]=-o,e[2]=n*o-i,e[6]=r+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*c,n=a*u,i=l*c,r=l*u;e[0]=t-r*o,e[4]=-s*u,e[8]=i+n*o,e[1]=n+i*o,e[5]=s*c,e[9]=r-t*o,e[2]=-s*l,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*c,n=s*u,i=o*c,r=o*u;e[0]=a*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=a*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=s*c,e[9]=-o*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=s*a,n=s*l,i=o*a,r=o*l;e[0]=a*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=s*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=o*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(to,t,eo)}lookAt(t,e,n){const i=this.elements;return ro.subVectors(t,e),0===ro.lengthSq()&&(ro.z=1),ro.normalize(),no.crossVectors(n,ro),0===no.lengthSq()&&(1===Math.abs(n.z)?ro.x+=1e-4:ro.z+=1e-4,ro.normalize(),no.crossVectors(n,ro)),no.normalize(),io.crossVectors(ro,no),i[0]=no.x,i[4]=io.x,i[8]=ro.x,i[1]=no.y,i[5]=io.y,i[9]=ro.y,i[2]=no.z,i[6]=io.z,i[10]=ro.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],g=n[10],m=n[14],_=n[3],v=n[7],y=n[11],x=n[15],b=i[0],S=i[4],w=i[8],E=i[12],T=i[1],M=i[5],C=i[9],A=i[13],R=i[2],P=i[6],N=i[10],D=i[14],L=i[3],O=i[7],k=i[11],I=i[15];return r[0]=s*b+o*T+a*R+l*L,r[4]=s*S+o*M+a*P+l*O,r[8]=s*w+o*C+a*N+l*k,r[12]=s*E+o*A+a*D+l*I,r[1]=c*b+u*T+h*R+d*L,r[5]=c*S+u*M+h*P+d*O,r[9]=c*w+u*C+h*N+d*k,r[13]=c*E+u*A+h*D+d*I,r[2]=f*b+p*T+g*R+m*L,r[6]=f*S+p*M+g*P+m*O,r[10]=f*w+p*C+g*N+m*k,r[14]=f*E+p*A+g*D+m*I,r[3]=_*b+v*T+y*R+x*L,r[7]=_*S+v*M+y*P+x*O,r[11]=_*w+v*C+y*N+x*k,r[15]=_*E+v*A+y*D+x*I,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],s=t[1],o=t[5],a=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*a*u-i*l*u-r*o*h+n*l*h+i*o*d-n*a*d)+t[7]*(+e*a*d-e*l*h+r*s*h-i*s*d+i*l*c-r*a*c)+t[11]*(+e*l*u-e*o*d-r*s*u+n*s*d+r*o*c-n*l*c)+t[15]*(-i*o*c-e*a*u+e*o*h+i*s*u-n*s*h+n*a*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],f=t[12],p=t[13],g=t[14],m=t[15],_=u*g*l-p*h*l+p*a*d-o*g*d-u*a*m+o*h*m,v=f*h*l-c*g*l-f*a*d+s*g*d+c*a*m-s*h*m,y=c*p*l-f*u*l+f*o*d-s*p*d-c*o*m+s*u*m,x=f*u*a-c*p*a-f*o*h+s*p*h+c*o*g-s*u*g,b=e*_+n*v+i*y+r*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/b;return t[0]=_*S,t[1]=(p*h*r-u*g*r-p*i*d+n*g*d+u*i*m-n*h*m)*S,t[2]=(o*g*r-p*a*r+p*i*l-n*g*l-o*i*m+n*a*m)*S,t[3]=(u*a*r-o*h*r-u*i*l+n*h*l+o*i*d-n*a*d)*S,t[4]=v*S,t[5]=(c*g*r-f*h*r+f*i*d-e*g*d-c*i*m+e*h*m)*S,t[6]=(f*a*r-s*g*r-f*i*l+e*g*l+s*i*m-e*a*m)*S,t[7]=(s*h*r-c*a*r+c*i*l-e*h*l-s*i*d+e*a*d)*S,t[8]=y*S,t[9]=(f*u*r-c*p*r-f*n*d+e*p*d+c*n*m-e*u*m)*S,t[10]=(s*p*r-f*o*r+f*n*l-e*p*l-s*n*m+e*o*m)*S,t[11]=(c*o*r-s*u*r-c*n*l+e*u*l+s*n*d-e*o*d)*S,t[12]=x*S,t[13]=(c*p*i-f*u*i+f*n*h-e*p*h-c*n*g+e*u*g)*S,t[14]=(f*o*i-s*p*i-f*n*a+e*p*a+s*n*g-e*o*g)*S,t[15]=(s*u*i-c*o*i+c*n*a-e*u*a-s*n*h+e*o*h)*S,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,s=t.x,o=t.y,a=t.z,l=r*s,c=r*o;return this.set(l*s+n,l*o-i*a,l*a+i*o,0,l*o+i*a,c*o+n,c*a-i*s,0,l*a-i*o,c*a+i*s,r*a*a+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,s){return this.set(1,n,r,0,t,1,s,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,s=e._y,o=e._z,a=e._w,l=r+r,c=s+s,u=o+o,h=r*l,d=r*c,f=r*u,p=s*c,g=s*u,m=o*u,_=a*l,v=a*c,y=a*u,x=n.x,b=n.y,S=n.z;return i[0]=(1-(p+m))*x,i[1]=(d+y)*x,i[2]=(f-v)*x,i[3]=0,i[4]=(d-y)*b,i[5]=(1-(h+m))*b,i[6]=(g+_)*b,i[7]=0,i[8]=(f+v)*S,i[9]=(g-_)*S,i[10]=(1-(h+p))*S,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=Zs.set(i[0],i[1],i[2]).length();const s=Zs.set(i[4],i[5],i[6]).length(),o=Zs.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Qs.copy(this);const a=1/r,l=1/s,c=1/o;return Qs.elements[0]*=a,Qs.elements[1]*=a,Qs.elements[2]*=a,Qs.elements[4]*=l,Qs.elements[5]*=l,Qs.elements[6]*=l,Qs.elements[8]*=c,Qs.elements[9]*=c,Qs.elements[10]*=c,e.setFromRotationMatrix(Qs),n.x=r,n.y=s,n.z=o,this}makePerspective(t,e,n,i,r,s,o=2e3,a=!1){const l=this.elements,c=2*r/(e-t),u=2*r/(n-i),h=(e+t)/(e-t),d=(n+i)/(n-i);let f,p;if(a)f=r/(s-r),p=s*r/(s-r);else if(o===Ir)f=-(s+r)/(s-r),p=-2*s*r/(s-r);else{if(o!==Fr)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);f=-s/(s-r),p=-s*r/(s-r)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,i,r,s,o=2e3,a=!1){const l=this.elements,c=2/(e-t),u=2/(n-i),h=-(e+t)/(e-t),d=-(n+i)/(n-i);let f,p;if(a)f=1/(s-r),p=s/(s-r);else if(o===Ir)f=-2/(s-r),p=-(s+r)/(s-r);else{if(o!==Fr)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);f=-1/(s-r),p=-r/(s-r)}return l[0]=c,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=u,l[9]=0,l[13]=d,l[2]=0,l[6]=0,l[10]=f,l[14]=p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Zs=new $r,Qs=new Js,to=new $r(0,0,0),eo=new $r(1,1,1),no=new $r,io=new $r,ro=new $r,so=new Js,oo=new Kr;class ao{constructor(t=0,e=0,n=0,i=ao.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],s=i[4],o=i[8],a=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(e){case"XYZ":this._y=Math.asin(Wr(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Wr(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Wr(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-Wr(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Wr(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Wr(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-c,d),this._y=0)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return so.makeRotationFromQuaternion(t),this.setFromRotationMatrix(so,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return oo.setFromEuler(this),this.setFromQuaternion(oo,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ao.DEFAULT_ORDER="XYZ";class lo{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let co=0;const uo=new $r,ho=new Kr,fo=new Js,po=new $r,go=new $r,mo=new $r,_o=new Kr,vo=new $r(1,0,0),yo=new $r(0,1,0),xo=new $r(0,0,1),bo={type:"added"},So={type:"removed"},wo={type:"childadded",child:null},Eo={type:"childremoved",child:null};class To extends Ur{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:co++}),this.uuid=Vr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=To.DEFAULT_UP.clone();const t=new $r,e=new ao,n=new Kr,i=new $r(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Js},normalMatrix:{value:new Zr}}),this.matrix=new Js,this.matrixWorld=new Js,this.matrixAutoUpdate=To.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=To.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new lo,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return ho.setFromAxisAngle(t,e),this.quaternion.multiply(ho),this}rotateOnWorldAxis(t,e){return ho.setFromAxisAngle(t,e),this.quaternion.premultiply(ho),this}rotateX(t){return this.rotateOnAxis(vo,t)}rotateY(t){return this.rotateOnAxis(yo,t)}rotateZ(t){return this.rotateOnAxis(xo,t)}translateOnAxis(t,e){return uo.copy(t).applyQuaternion(this.quaternion),this.position.add(uo.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(vo,t)}translateY(t){return this.translateOnAxis(yo,t)}translateZ(t){return this.translateOnAxis(xo,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(fo.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?po.copy(t):po.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),go.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?fo.lookAt(go,po,this.up):fo.lookAt(po,go,this.up),this.quaternion.setFromRotationMatrix(fo),i&&(fo.extractRotation(i.matrixWorld),ho.setFromRotationMatrix(fo),this.quaternion.premultiply(ho.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this||t&&t.isObject3D&&(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(bo),wo.child=t,this.dispatchEvent(wo),wo.child=null),this}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(So),Eo.child=t,this.dispatchEvent(Eo),Eo.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),fo.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),fo.multiply(t.parent.matrixWorld)),t.applyMatrix4(fo),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(bo),wo.child=t,this.dispatchEvent(wo),wo.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getObjectsByProperty(t,e,n=[]){this[t]===e&&n.push(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].getObjectsByProperty(t,e,n);return n}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(go,t,mo),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(go,_o,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++){e[n].updateMatrixWorld(t)}}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++){t[e].updateWorldMatrix(!1,!0)}}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox?t.boundingBox.toJSON():void 0,boundingSphere:t.boundingSphere?t.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(t=>({...t})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(t),i.indirectTexture=this._indirectTexture.toJSON(t),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=s(t.geometries),i=s(t.materials),r=s(t.textures),o=s(t.images),a=s(t.shapes),l=s(t.skeletons),c=s(t.animations),u=s(t.nodes);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}}To.DEFAULT_UP=new $r(0,1,0),To.DEFAULT_MATRIX_AUTO_UPDATE=!0,To.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Mo=new $r,Co=new $r,Ao=new $r,Ro=new $r,Po=new $r,No=new $r,Do=new $r,Lo=new $r,Oo=new $r,ko=new $r,Io=new ys,Fo=new ys,Uo=new ys;class zo{constructor(t=new $r,e=new $r,n=new $r){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),Mo.subVectors(t,e),i.cross(Mo);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){Mo.subVectors(i,e),Co.subVectors(n,e),Ao.subVectors(t,e);const s=Mo.dot(Mo),o=Mo.dot(Co),a=Mo.dot(Ao),l=Co.dot(Co),c=Co.dot(Ao),u=s*l-o*o;if(0===u)return r.set(0,0,0),null;const h=1/u,d=(l*a-o*c)*h,f=(s*c-o*a)*h;return r.set(1-d-f,f,d)}static containsPoint(t,e,n,i){return null!==this.getBarycoord(t,e,n,i,Ro)&&(Ro.x>=0&&Ro.y>=0&&Ro.x+Ro.y<=1)}static getInterpolation(t,e,n,i,r,s,o,a){return null===this.getBarycoord(t,e,n,i,Ro)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(r,Ro.x),a.addScaledVector(s,Ro.y),a.addScaledVector(o,Ro.z),a)}static getInterpolatedAttribute(t,e,n,i,r,s){return Io.setScalar(0),Fo.setScalar(0),Uo.setScalar(0),Io.fromBufferAttribute(t,e),Fo.fromBufferAttribute(t,n),Uo.fromBufferAttribute(t,i),s.setScalar(0),s.addScaledVector(Io,r.x),s.addScaledVector(Fo,r.y),s.addScaledVector(Uo,r.z),s}static isFrontFacing(t,e,n,i){return Mo.subVectors(n,e),Co.subVectors(t,e),Mo.cross(Co).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Mo.subVectors(this.c,this.b),Co.subVectors(this.a,this.b),.5*Mo.cross(Co).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return zo.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return zo.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,i,r){return zo.getInterpolation(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return zo.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return zo.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let s,o;Po.subVectors(i,n),No.subVectors(r,n),Lo.subVectors(t,n);const a=Po.dot(Lo),l=No.dot(Lo);if(a<=0&&l<=0)return e.copy(n);Oo.subVectors(t,i);const c=Po.dot(Oo),u=No.dot(Oo);if(c>=0&&u<=c)return e.copy(i);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return s=a/(a-c),e.copy(n).addScaledVector(Po,s);ko.subVectors(t,r);const d=Po.dot(ko),f=No.dot(ko);if(f>=0&&d<=f)return e.copy(r);const p=d*l-a*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),e.copy(n).addScaledVector(No,o);const g=c*f-d*u;if(g<=0&&u-c>=0&&d-f>=0)return Do.subVectors(r,i),o=(u-c)/(u-c+(d-f)),e.copy(i).addScaledVector(Do,o);const m=1/(g+p+h);return s=p*m,o=h*m,e.copy(n).addScaledVector(Po,s).addScaledVector(No,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const Bo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ho={h:0,s:0,l:0},Vo={h:0,s:0,l:0};function Wo(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}class Go{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Sr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ls.colorSpaceToWorking(this,e),this}setRGB(t,e,n,i=ls.workingColorSpace){return this.r=t,this.g=e,this.b=n,ls.colorSpaceToWorking(this,i),this}setHSL(t,e,n,i=ls.workingColorSpace){var r;if(t=(t%(r=1)+r)%r,e=Wr(e,0,1),n=Wr(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=Wo(r,i,t+1/3),this.g=Wo(r,i,t),this.b=Wo(r,i,t-1/3)}return ls.colorSpaceToWorking(this,i),this}setStyle(t,e=Sr){function n(t){void 0!==t&&parseFloat(t)}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let t;const r=i[1],s=i[2];switch(r){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(t[4]),this.setRGB(Math.min(255,parseInt(t[1],10))/255,Math.min(255,parseInt(t[2],10))/255,Math.min(255,parseInt(t[3],10))/255,e);if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(t[4]),this.setRGB(Math.min(100,parseInt(t[1],10))/100,Math.min(100,parseInt(t[2],10))/100,Math.min(100,parseInt(t[3],10))/100,e);break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return n(t[4]),this.setHSL(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=i[1],n=t.length;if(3===n)return this.setRGB(parseInt(t.charAt(0),16)/15,parseInt(t.charAt(1),16)/15,parseInt(t.charAt(2),16)/15,e);if(6===n)return this.setHex(parseInt(t,16),e)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Sr){const n=Bo[t.toLowerCase()];return void 0!==n&&this.setHex(n,e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=cs(t.r),this.g=cs(t.g),this.b=cs(t.b),this}copyLinearToSRGB(t){return this.r=us(t.r),this.g=us(t.g),this.b=us(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Sr){return ls.workingToColorSpace(jo.copy(this),t),65536*Math.round(Wr(255*jo.r,0,255))+256*Math.round(Wr(255*jo.g,0,255))+Math.round(Wr(255*jo.b,0,255))}getHexString(t=Sr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=ls.workingColorSpace){ls.workingToColorSpace(jo.copy(this),e);const n=jo.r,i=jo.g,r=jo.b,s=Math.max(n,i,r),o=Math.min(n,i,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const t=s-o;switch(l=c<=.5?t/(s+o):t/(2-s-o),s){case n:a=(i-r)/t+(i<r?6:0);break;case i:a=(r-n)/t+2;break;case r:a=(n-i)/t+4}a/=6}return t.h=a,t.s=l,t.l=c,t}getRGB(t,e=ls.workingColorSpace){return ls.workingToColorSpace(jo.copy(this),e),t.r=jo.r,t.g=jo.g,t.b=jo.b,t}getStyle(t=Sr){ls.workingToColorSpace(jo.copy(this),t);const e=jo.r,n=jo.g,i=jo.b;return t!==Sr?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*i)})`}offsetHSL(t,e,n){return this.getHSL(Ho),this.setHSL(Ho.h+t,Ho.s+e,Ho.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Ho),t.getHSL(Vo);const n=Gr(Ho.h,Vo.h,e),i=Gr(Ho.s,Vo.s,e),r=Gr(Ho.l,Vo.l,e);return this.setHSL(n,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*n+r[6]*i,this.g=r[1]*e+r[4]*n+r[7]*i,this.b=r[2]*e+r[5]*n+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const jo=new Go;Go.NAMES=Bo;let Xo=0;class qo extends Ur{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Xo++}),this.uuid=Vr(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=Bn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Go(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mr,this.stencilZFail=Mr,this.stencilZPass=Mr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n)continue;const i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==Bn&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Mr&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Mr&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Mr&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Ko extends qo{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Go(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const $o=new $r,Yo=new qr;let Jo=0;class Zo{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Jo++}),this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=Pi,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Yo.fromBufferAttribute(this,e),Yo.applyMatrix3(t),this.setXY(e,Yo.x,Yo.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)$o.fromBufferAttribute(this,e),$o.applyMatrix3(t),this.setXYZ(e,$o.x,$o.y,$o.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)$o.fromBufferAttribute(this,e),$o.applyMatrix4(t),this.setXYZ(e,$o.x,$o.y,$o.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)$o.fromBufferAttribute(this,e),$o.applyNormalMatrix(t),this.setXYZ(e,$o.x,$o.y,$o.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)$o.fromBufferAttribute(this,e),$o.transformDirection(t),this.setXYZ(e,$o.x,$o.y,$o.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=jr(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Xr(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=jr(e,this.array)),e}setX(t,e){return this.normalized&&(e=Xr(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=jr(e,this.array)),e}setY(t,e){return this.normalized&&(e=Xr(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=jr(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Xr(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=jr(e,this.array)),e}setW(t,e){return this.normalized&&(e=Xr(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Xr(e,this.array),n=Xr(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.normalized&&(e=Xr(e,this.array),n=Xr(n,this.array),i=Xr(i,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.normalized&&(e=Xr(e,this.array),n=Xr(n,this.array),i=Xr(i,this.array),r=Xr(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class Qo extends Zo{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class ta extends Zo{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ea extends Zo{constructor(t,e,n){super(new Float32Array(t),e,n)}}let na=0;const ia=new Js,ra=new To,sa=new $r,oa=new Es,aa=new Es,la=new $r;class ca extends Ur{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:na++}),this.uuid=Vr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ts(t)?ta:Qo)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Zr).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return ia.makeRotationFromQuaternion(t),this.applyMatrix4(ia),this}rotateX(t){return ia.makeRotationX(t),this.applyMatrix4(ia),this}rotateY(t){return ia.makeRotationY(t),this.applyMatrix4(ia),this}rotateZ(t){return ia.makeRotationZ(t),this.applyMatrix4(ia),this}translate(t,e,n){return ia.makeTranslation(t,e,n),this.applyMatrix4(ia),this}scale(t,e,n){return ia.makeScale(t,e,n),this.applyMatrix4(ia),this}lookAt(t){return ra.lookAt(t),ra.updateMatrix(),this.applyMatrix4(ra.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sa).negate(),this.translate(sa.x,sa.y,sa.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}this.setAttribute("position",new ea(e,3))}else{const n=Math.min(t.length,e.count);for(let i=0;i<n;i++){const n=t[i];e.setXYZ(i,n.x,n.y,n.z||0)}t.length,e.count,e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Es);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingBox.set(new $r(-1/0,-1/0,-1/0),new $r(1/0,1/0,1/0));else{if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];oa.setFromBufferAttribute(n),this.morphTargetsRelative?(la.addVectors(this.boundingBox.min,oa.min),this.boundingBox.expandByPoint(la),la.addVectors(this.boundingBox.max,oa.max),this.boundingBox.expandByPoint(la)):(this.boundingBox.expandByPoint(oa.min),this.boundingBox.expandByPoint(oa.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Vs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)this.boundingSphere.set(new $r,1/0);else if(t){const n=this.boundingSphere.center;if(oa.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];aa.setFromBufferAttribute(n),this.morphTargetsRelative?(la.addVectors(oa.min,aa.min),oa.expandByPoint(la),la.addVectors(oa.max,aa.max),oa.expandByPoint(la)):(oa.expandByPoint(aa.min),oa.expandByPoint(aa.max))}oa.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)la.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(la));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)la.fromBufferAttribute(s,e),o&&(sa.fromBufferAttribute(t,e),la.add(sa)),i=Math.max(i,n.distanceToSquared(la))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return;const n=e.position,i=e.normal,r=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Zo(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),o=[],a=[];for(let w=0;w<n.count;w++)o[w]=new $r,a[w]=new $r;const l=new $r,c=new $r,u=new $r,h=new qr,d=new qr,f=new qr,p=new $r,g=new $r;function m(t,e,i){l.fromBufferAttribute(n,t),c.fromBufferAttribute(n,e),u.fromBufferAttribute(n,i),h.fromBufferAttribute(r,t),d.fromBufferAttribute(r,e),f.fromBufferAttribute(r,i),c.sub(l),u.sub(l),d.sub(h),f.sub(h);const s=1/(d.x*f.y-f.x*d.y);isFinite(s)&&(p.copy(c).multiplyScalar(f.y).addScaledVector(u,-d.y).multiplyScalar(s),g.copy(u).multiplyScalar(d.x).addScaledVector(c,-f.x).multiplyScalar(s),o[t].add(p),o[e].add(p),o[i].add(p),a[t].add(g),a[e].add(g),a[i].add(g))}let _=this.groups;0===_.length&&(_=[{start:0,count:t.count}]);for(let w=0,E=_.length;w<E;++w){const e=_[w],n=e.start;for(let i=n,r=n+e.count;i<r;i+=3)m(t.getX(i+0),t.getX(i+1),t.getX(i+2))}const v=new $r,y=new $r,x=new $r,b=new $r;function S(t){x.fromBufferAttribute(i,t),b.copy(x);const e=o[t];v.copy(e),v.sub(x.multiplyScalar(x.dot(e))).normalize(),y.crossVectors(b,e);const n=y.dot(a[t])<0?-1:1;s.setXYZW(t,v.x,v.y,v.z,n)}for(let w=0,E=_.length;w<E;++w){const e=_[w],n=e.start;for(let i=n,r=n+e.count;i<r;i+=3)S(t.getX(i+0)),S(t.getX(i+1)),S(t.getX(i+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Zo(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new $r,r=new $r,s=new $r,o=new $r,a=new $r,l=new $r,c=new $r,u=new $r;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),f=t.getX(h+1),p=t.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,f),s.fromBufferAttribute(e,p),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)la.fromBufferAttribute(t,e),la.normalize(),t.setXYZ(e,la.x,la.y,la.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,s=new n.constructor(e.length*i);let o=0,a=0;for(let l=0,c=e.length;l<c;l++){o=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(let t=0;t<i;t++)s[a++]=n[o++]}return new Zo(s,i,r)}if(null===this.index)return this;const e=new ca,n=this.index.array,i=this.attributes;for(const o in i){const r=t(i[o],n);e.setAttribute(o,r)}const r=this.morphAttributes;for(const o in r){const i=[],s=r[o];for(let e=0,r=s.length;e<r;e++){const r=t(s[e],n);i.push(r)}e.morphAttributes[o]=i}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,a=s.length;o<a;o++){const t=s[o];e.addGroup(t.start,t.count,t.materialIndex)}return e}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const e=n[a];t.data.attributes[a]=e.toJSON(t.data)}const i={};let r=!1;for(const a in this.morphAttributes){const e=this.morphAttributes[a],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];n.push(r.toJSON(t.data))}n.length>0&&(i[a]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere=o.toJSON()),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone());const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let l=0,c=s.length;l<c;l++){const t=s[l];this.addGroup(t.start,t.count,t.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ua=new Js,ha=new Ys,da=new Vs,fa=new $r,pa=new $r,ga=new $r,ma=new $r,_a=new $r,va=new $r,ya=new $r,xa=new $r;class ba extends To{constructor(t=new ca,e=new Ko){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const n=t[e[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=n.length;t<e;t++){const e=n[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(i,t);const o=this.morphTargetInfluences;if(r&&o){va.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=o[n],a=r[n];0!==i&&(_a.fromBufferAttribute(a,t),s?va.addScaledVector(_a,i):va.addScaledVector(_a.sub(e),i))}e.add(va)}return e}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i){if(null===n.boundingSphere&&n.computeBoundingSphere(),da.copy(n.boundingSphere),da.applyMatrix4(r),ha.copy(t.ray).recast(t.near),!1===da.containsPoint(ha.origin)){if(null===ha.intersectSphere(da,fa))return;if(ha.origin.distanceToSquared(fa)>(t.far-t.near)**2)return}ua.copy(r).invert(),ha.copy(t.ray).applyMatrix4(ua),null!==n.boundingBox&&!1===ha.intersectsBox(n.boundingBox)||this._computeIntersections(t,e,ha)}}_computeIntersections(t,e,n){let i;const r=this.geometry,s=this.material,o=r.index,a=r.attributes.position,l=r.attributes.uv,c=r.attributes.uv1,u=r.attributes.normal,h=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(s))for(let f=0,p=h.length;f<p;f++){const r=h[f],a=s[r.materialIndex];for(let s=Math.max(r.start,d.start),h=Math.min(o.count,Math.min(r.start+r.count,d.start+d.count));s<h;s+=3){i=Sa(this,a,t,n,l,c,u,o.getX(s),o.getX(s+1),o.getX(s+2)),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);r<a;r+=3){i=Sa(this,s,t,n,l,c,u,o.getX(r),o.getX(r+1),o.getX(r+2)),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}else if(void 0!==a)if(Array.isArray(s))for(let f=0,p=h.length;f<p;f++){const r=h[f],o=s[r.materialIndex];for(let s=Math.max(r.start,d.start),h=Math.min(a.count,Math.min(r.start+r.count,d.start+d.count));s<h;s+=3){i=Sa(this,o,t,n,l,c,u,s,s+1,s+2),i&&(i.faceIndex=Math.floor(s/3),i.face.materialIndex=r.materialIndex,e.push(i))}}else{for(let r=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);r<o;r+=3){i=Sa(this,s,t,n,l,c,u,r,r+1,r+2),i&&(i.faceIndex=Math.floor(r/3),e.push(i))}}}}function Sa(t,e,n,i,r,s,o,a,l,c){t.getVertexPosition(a,pa),t.getVertexPosition(l,ga),t.getVertexPosition(c,ma);const u=function(t,e,n,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;xa.copy(a),xa.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(xa);return c<n.near||c>n.far?null:{distance:c,point:xa.clone(),object:t}}(t,e,n,i,pa,ga,ma,ya);if(u){const t=new $r;zo.getBarycoord(ya,pa,ga,ma,t),r&&(u.uv=zo.getInterpolatedAttribute(r,a,l,c,t,new qr)),s&&(u.uv1=zo.getInterpolatedAttribute(s,a,l,c,t,new qr)),o&&(u.normal=zo.getInterpolatedAttribute(o,a,l,c,t,new $r),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const e={a:a,b:l,c:c,normal:new $r,materialIndex:0};zo.getNormal(pa,ga,ma,e.normal),u.face=e,u.barycoord=t}return u}class wa extends ca{constructor(t=1,e=1,n=1,i=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const o=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const a=[],l=[],c=[],u=[];let h=0,d=0;function f(t,e,n,i,r,s,f,p,g,m,_){const v=s/g,y=f/m,x=s/2,b=f/2,S=p/2,w=g+1,E=m+1;let T=0,M=0;const C=new $r;for(let o=0;o<E;o++){const s=o*y-b;for(let a=0;a<w;a++){const h=a*v-x;C[t]=h*i,C[e]=s*r,C[n]=S,l.push(C.x,C.y,C.z),C[t]=0,C[e]=0,C[n]=p>0?1:-1,c.push(C.x,C.y,C.z),u.push(a/g),u.push(1-o/m),T+=1}}for(let o=0;o<m;o++)for(let t=0;t<g;t++){const e=h+t+w*o,n=h+t+w*(o+1),i=h+(t+1)+w*(o+1),r=h+(t+1)+w*o;a.push(e,n,r),a.push(n,i,r),M+=6}o.addGroup(d,M,_),d+=M,h+=T}f("z","y","x",-1,-1,n,e,t,s,r,0),f("z","y","x",1,-1,n,e,-t,s,r,1),f("x","z","y",1,1,t,n,e,i,s,2),f("x","z","y",1,-1,t,n,-e,i,s,3),f("x","y","z",1,-1,t,e,n,i,r,4),f("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(a),this.setAttribute("position",new ea(l,3)),this.setAttribute("normal",new ea(c,3)),this.setAttribute("uv",new ea(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new wa(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ea(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?e[n][i]=null:e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function Ta(t){const e={};for(let n=0;n<t.length;n++){const i=Ea(t[n]);for(const t in i)e[t]=i[t]}return e}function Ma(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:ls.workingColorSpace}const Ca={clone:Ea,merge:Ta};class Aa extends qo{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ea(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class Ra extends To{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Js,this.projectionMatrix=new Js,this.projectionMatrixInverse=new Js,this.coordinateSystem=Ir,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Pa=new $r,Na=new qr,Da=new qr;class La extends Ra{constructor(t=50,e=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Hr*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Br*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Hr*Math.atan(Math.tan(.5*Br*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Pa.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Pa.x,Pa.y).multiplyScalar(-t/Pa.z),Pa.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Pa.x,Pa.y).multiplyScalar(-t/Pa.z)}getViewSize(t,e){return this.getViewBounds(t,Na,Da),e.subVectors(Da,Na)}setViewOffset(t,e,n,i,r,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Br*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;r+=s.offsetX*i/t,e-=s.offsetY*n/o,i*=s.width/t,n*=s.height/o}const o=this.filmOffset;0!==o&&(r+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Oa=-90;class ka extends To{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new La(Oa,1,t,e);i.layers=this.layers,this.add(i);const r=new La(Oa,1,t,e);r.layers=this.layers,this.add(r);const s=new La(Oa,1,t,e);s.layers=this.layers,this.add(s);const o=new La(Oa,1,t,e);o.layers=this.layers,this.add(o);const a=new La(Oa,1,t,e);a.layers=this.layers,this.add(a);const l=new La(Oa,1,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,i,r,s,o,a]=e;for(const l of e)this.remove(l);if(t===Ir)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==Fr)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of e)this.add(l),l.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,s,o,a,l,c]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),f=t.xr.enabled;t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,i),t.render(e,r),t.setRenderTarget(n,1,i),t.render(e,s),t.setRenderTarget(n,2,i),t.render(e,o),t.setRenderTarget(n,3,i),t.render(e,a),t.setRenderTarget(n,4,i),t.render(e,l),n.texture.generateMipmaps=p,t.setRenderTarget(n,5,i),t.render(e,c),t.setRenderTarget(u,h,d),t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class Ia extends vs{constructor(t=[],e=301,n,i,r,s,o,a,l,c){super(t,e,n,i,r,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fa extends bs{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1},i=[n,n,n,n,n,n];this.texture=new Ia(i),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new wa(5,5,5),r=new Aa({name:"CubemapFromEquirect",uniforms:Ea(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=e;const s=new ba(i,r),o=e.minFilter;e.minFilter===wi&&(e.minFilter=bi);return new ka(1,10,this).update(t,s),e.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(t,e=!0,n=!0,i=!0){const r=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,i);t.setRenderTarget(r)}}class Ua extends To{constructor(){super(),this.isGroup=!0,this.type="Group"}}const za={type:"move"};class Ba{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ua,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ua,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new $r,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new $r),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ua,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new $r,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new $r),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){s=!0;for(const s of t.hand.values()){const t=e.getJointPose(s,n),i=this._getHandJoint(l,s);null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],o=i.position.distanceTo(r.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(i=e.getPose(t.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(za)))}return null!==o&&(o.visible=null!==i),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Ua;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Ha extends To{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ao,this.environmentIntensity=1,this.environmentRotation=new ao,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}const Va=new $r,Wa=new $r,Ga=new Zr;class ja{constructor(t=new $r(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Va.subVectors(n,e).cross(Wa.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(Va),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(n,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Ga.getNormalMatrix(t),i=this.coplanarPoint(Va).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Xa=new Vs,qa=new qr(.5,.5),Ka=new $r;class $a{constructor(t=new ja,e=new ja,n=new ja,i=new ja,r=new ja,s=new ja){this.planes=[t,e,n,i,r,s]}set(t,e,n,i,r,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=2e3,n=!1){const i=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=r[7],f=r[8],p=r[9],g=r[10],m=r[11],_=r[12],v=r[13],y=r[14],x=r[15];if(i[0].setComponents(l-s,d-c,m-f,x-_).normalize(),i[1].setComponents(l+s,d+c,m+f,x+_).normalize(),i[2].setComponents(l+o,d+u,m+p,x+v).normalize(),i[3].setComponents(l-o,d-u,m-p,x-v).normalize(),n)i[4].setComponents(a,h,g,y).normalize(),i[5].setComponents(l-a,d-h,m-g,x-y).normalize();else if(i[4].setComponents(l-a,d-h,m-g,x-y).normalize(),e===Ir)i[5].setComponents(l+a,d+h,m+g,x+y).normalize();else{if(e!==Fr)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);i[5].setComponents(a,h,g,y).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Xa.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Xa.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Xa)}intersectsSprite(t){Xa.center.set(0,0,0);const e=qa.distanceTo(t.center);return Xa.radius=.7071067811865476+e,Xa.applyMatrix4(t.matrixWorld),this.intersectsSphere(Xa)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Ka.x=i.normal.x>0?t.max.x:t.min.x,Ka.y=i.normal.y>0?t.max.y:t.min.y,Ka.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Ka)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Ya extends vs{constructor(t,e,n=1014,i,r,s,o=1003,a=1003,l,c=1026,u=1){if(c!==Ui&&c!==zi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:t,height:e,depth:u},i,r,s,o,a,c,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new ps(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class Ja extends vs{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}}class Za extends ca{constructor(t=1,e=1,n=1,i=32,r=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let f=0;const p=[],g=n/2;let m=0;function _(n){const r=f,s=new qr,p=new $r;let _=0;const v=!0===n?t:e,y=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,g*y,0),h.push(0,y,0),d.push(.5,.5),f++;const x=f;for(let t=0;t<=i;t++){const e=t/i*a+o,n=Math.cos(e),r=Math.sin(e);p.x=v*r,p.y=g*y,p.z=v*n,u.push(p.x,p.y,p.z),h.push(0,y,0),s.x=.5*n+.5,s.y=.5*r*y+.5,d.push(s.x,s.y),f++}for(let t=0;t<i;t++){const e=r+t,i=x+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),_+=3}l.addGroup(m,_,!0===n?1:2),m+=_}!function(){const s=new $r,_=new $r;let v=0;const y=(e-t)/n;for(let l=0;l<=r;l++){const c=[],m=l/r,v=m*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*a+o,l=Math.sin(r),p=Math.cos(r);_.x=v*l,_.y=-m*n+g,_.z=v*p,u.push(_.x,_.y,_.z),s.set(l,y,p).normalize(),h.push(s.x,s.y,s.z),d.push(e,1-m),c.push(f++)}p.push(c)}for(let n=0;n<i;n++)for(let i=0;i<r;i++){const s=p[i][n],o=p[i+1][n],a=p[i+1][n+1],l=p[i][n+1];(t>0||0!==i)&&(c.push(s,o,l),v+=3),(e>0||i!==r-1)&&(c.push(o,a,l),v+=3)}l.addGroup(m,v,0),m+=v}(),!1===s&&(t>0&&_(!0),e>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new ea(u,3)),this.setAttribute("normal",new ea(h,3)),this.setAttribute("uv",new ea(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Za(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Qa extends Za{constructor(t=1,e=1,n=32,i=1,r=!1,s=0,o=2*Math.PI){super(0,t,e,n,i,r,s,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:o}}static fromJSON(t){return new Qa(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class tl extends ca{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,s=e/2,o=Math.floor(n),a=Math.floor(i),l=o+1,c=a+1,u=t/o,h=e/a,d=[],f=[],p=[],g=[];for(let m=0;m<c;m++){const t=m*h-s;for(let e=0;e<l;e++){const n=e*u-r;f.push(n,-t,0),p.push(0,0,1),g.push(e/o),g.push(1-m/a)}}for(let m=0;m<a;m++)for(let t=0;t<o;t++){const e=t+l*m,n=t+l*(m+1),i=t+1+l*(m+1),r=t+1+l*m;d.push(e,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new ea(f,3)),this.setAttribute("normal",new ea(p,3)),this.setAttribute("uv",new ea(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new tl(t.width,t.height,t.widthSegments,t.heightSegments)}}class el extends ca{constructor(t=1,e=.4,n=12,i=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],o=[],a=[],l=[],c=new $r,u=new $r,h=new $r;for(let d=0;d<=n;d++)for(let s=0;s<=i;s++){const f=s/i*r,p=d/n*Math.PI*2;u.x=(t+e*Math.cos(p))*Math.cos(f),u.y=(t+e*Math.cos(p))*Math.sin(f),u.z=e*Math.sin(p),o.push(u.x,u.y,u.z),c.x=t*Math.cos(f),c.y=t*Math.sin(f),h.subVectors(u,c).normalize(),a.push(h.x,h.y,h.z),l.push(s/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=i;t++){const e=(i+1)*d+t-1,n=(i+1)*(d-1)+t-1,r=(i+1)*(d-1)+t,o=(i+1)*d+t;s.push(e,n,o),s.push(n,r,o)}this.setIndex(s),this.setAttribute("position",new ea(o,3)),this.setAttribute("normal",new ea(a,3)),this.setAttribute("uv",new ea(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new el(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class nl extends qo{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Go(16777215),this.specular=new Go(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Go(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new qr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ao,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class il extends qo{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class rl extends qo{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class sl extends To{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Go(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(e.object.target=this.target.uuid),e}}const ol=new Js,al=new $r,ll=new $r;class cl{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qr(512,512),this.mapType=Ei,this.map=null,this.mapPass=null,this.matrix=new Js,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $a,this._frameExtents=new qr(1,1),this._viewportCount=1,this._viewports=[new ys(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;al.setFromMatrixPosition(t.matrixWorld),e.position.copy(al),ll.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(ll),e.updateMatrixWorld(),ol.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ol,e.coordinateSystem,e.reversedDepth),e.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ol)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}const ul=new Js,hl=new $r,dl=new $r;class fl extends cl{constructor(){super(new La(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qr(4,2),this._viewportCount=6,this._viewports=[new ys(2,1,1,1),new ys(0,1,1,1),new ys(3,1,1,1),new ys(1,1,1,1),new ys(3,0,1,1),new ys(1,0,1,1)],this._cubeDirections=[new $r(1,0,0),new $r(-1,0,0),new $r(0,0,1),new $r(0,0,-1),new $r(0,1,0),new $r(0,-1,0)],this._cubeUps=[new $r(0,1,0),new $r(0,1,0),new $r(0,1,0),new $r(0,1,0),new $r(0,0,1),new $r(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),hl.setFromMatrixPosition(t.matrixWorld),n.position.copy(hl),dl.copy(n.position),dl.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(dl),n.updateMatrixWorld(),i.makeTranslation(-hl.x,-hl.y,-hl.z),ul.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ul,n.coordinateSystem,n.reversedDepth)}}class pl extends sl{constructor(t,e,n=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new fl}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class gl extends Ra{constructor(t=-1,e=1,n=1,i=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,s=n+t,o=i+e,a=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,s=r+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,a,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}class ml extends cl{constructor(){super(new gl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _l extends sl{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(To.DEFAULT_UP),this.updateMatrix(),this.target=new To,this.shadow=new ml}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class vl extends sl{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class yl extends La{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}}function xl(t,e,n,i){const r=function(t){switch(t){case Ei:case Ti:return{byteLength:1,components:1};case Ci:case Mi:case Ni:return{byteLength:2,components:1};case Di:case Li:return{byteLength:2,components:4};case Ri:case Ai:case Pi:return{byteLength:4,components:1};case ki:case Ii:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(i);switch(n){case 1021:return t*e;case 1028:case Bi:return t*e/r.components*r.byteLength;case 1030:case Hi:return t*e*2/r.components*r.byteLength;case 1022:return t*e*3/r.components*r.byteLength;case Fi:case Vi:return t*e*4/r.components*r.byteLength;case Wi:case Gi:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case ji:case Xi:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Ki:case Yi:return Math.max(t,16)*Math.max(e,8)/4;case qi:case $i:return Math.max(t,8)*Math.max(e,8)/2;case Ji:case Zi:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Qi:case tr:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case er:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case nr:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case ir:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case rr:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case sr:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case or:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case ar:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case lr:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case cr:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case ur:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case hr:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case dr:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case fr:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case pr:case gr:case mr:return Math.ceil(t/4)*Math.ceil(e/4)*16;case _r:case vr:return Math.ceil(t/4)*Math.ceil(e/4)*8;case yr:case xr:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
function bl(){let t=null,e=!1,n=null,i=null;function r(e,s){n(e,s),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Sl(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))},update:function(n,i){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const t=e.get(n);return void((!t||t.version<n.version)&&e.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const r=e.get(n);if(void 0===r)e.set(n,function(e,n){const i=e.array,r=e.usage,s=i.byteLength,o=t.createBuffer();let a;if(t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback(),i instanceof Float32Array)a=t.FLOAT;else if("undefined"!=typeof Float16Array&&i instanceof Float16Array)a=t.HALF_FLOAT;else if(i instanceof Uint16Array)a=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(i instanceof Int16Array)a=t.SHORT;else if(i instanceof Uint32Array)a=t.UNSIGNED_INT;else if(i instanceof Int32Array)a=t.INT;else if(i instanceof Int8Array)a=t.BYTE;else if(i instanceof Uint8Array)a=t.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);a=t.UNSIGNED_BYTE}return{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version,size:s}}(n,i));else if(r.version<n.version){if(r.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,n,i){const r=n.array,s=n.updateRanges;if(t.bindBuffer(i,e),0===s.length)t.bufferSubData(i,0,r);else{s.sort((t,e)=>t.start-e.start);let e=0;for(let t=1;t<s.length;t++){const n=s[e],i=s[t];i.start<=n.start+n.count+1?n.count=Math.max(n.count,i.start+i.count-n.start):(++e,s[e]=i)}s.length=e+1;for(let n=0,o=s.length;n<o;n++){const e=s[n];t.bufferSubData(i,e.start*r.BYTES_PER_ELEMENT,r,e.start,e.count)}n.clearUpdateRanges()}n.onUploadCallback()}(r.buffer,n,i),r.version=n.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kn}})),"undefined"!=typeof window&&(window.__THREE__||(window.__THREE__=kn));const wl={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare, distribution.x );\n\t\t#endif\n\t\tif ( hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSED_DEPTH_BUFFER\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},El={common:{diffuse:{value:new Go(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zr},alphaMap:{value:null},alphaMapTransform:{value:new Zr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zr}},envmap:{envMap:{value:null},envMapRotation:{value:new Zr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zr},normalScale:{value:new qr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Go(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Go(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zr},alphaTest:{value:0},uvTransform:{value:new Zr}},sprite:{diffuse:{value:new Go(16777215)},opacity:{value:1},center:{value:new qr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zr},alphaMap:{value:null},alphaMapTransform:{value:new Zr},alphaTest:{value:0}}},Tl={basic:{uniforms:Ta([El.common,El.specularmap,El.envmap,El.aomap,El.lightmap,El.fog]),vertexShader:wl.meshbasic_vert,fragmentShader:wl.meshbasic_frag},lambert:{uniforms:Ta([El.common,El.specularmap,El.envmap,El.aomap,El.lightmap,El.emissivemap,El.bumpmap,El.normalmap,El.displacementmap,El.fog,El.lights,{emissive:{value:new Go(0)}}]),vertexShader:wl.meshlambert_vert,fragmentShader:wl.meshlambert_frag},phong:{uniforms:Ta([El.common,El.specularmap,El.envmap,El.aomap,El.lightmap,El.emissivemap,El.bumpmap,El.normalmap,El.displacementmap,El.fog,El.lights,{emissive:{value:new Go(0)},specular:{value:new Go(1118481)},shininess:{value:30}}]),vertexShader:wl.meshphong_vert,fragmentShader:wl.meshphong_frag},standard:{uniforms:Ta([El.common,El.envmap,El.aomap,El.lightmap,El.emissivemap,El.bumpmap,El.normalmap,El.displacementmap,El.roughnessmap,El.metalnessmap,El.fog,El.lights,{emissive:{value:new Go(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wl.meshphysical_vert,fragmentShader:wl.meshphysical_frag},toon:{uniforms:Ta([El.common,El.aomap,El.lightmap,El.emissivemap,El.bumpmap,El.normalmap,El.displacementmap,El.gradientmap,El.fog,El.lights,{emissive:{value:new Go(0)}}]),vertexShader:wl.meshtoon_vert,fragmentShader:wl.meshtoon_frag},matcap:{uniforms:Ta([El.common,El.bumpmap,El.normalmap,El.displacementmap,El.fog,{matcap:{value:null}}]),vertexShader:wl.meshmatcap_vert,fragmentShader:wl.meshmatcap_frag},points:{uniforms:Ta([El.points,El.fog]),vertexShader:wl.points_vert,fragmentShader:wl.points_frag},dashed:{uniforms:Ta([El.common,El.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wl.linedashed_vert,fragmentShader:wl.linedashed_frag},depth:{uniforms:Ta([El.common,El.displacementmap]),vertexShader:wl.depth_vert,fragmentShader:wl.depth_frag},normal:{uniforms:Ta([El.common,El.bumpmap,El.normalmap,El.displacementmap,{opacity:{value:1}}]),vertexShader:wl.meshnormal_vert,fragmentShader:wl.meshnormal_frag},sprite:{uniforms:Ta([El.sprite,El.fog]),vertexShader:wl.sprite_vert,fragmentShader:wl.sprite_frag},background:{uniforms:{uvTransform:{value:new Zr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wl.background_vert,fragmentShader:wl.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Zr}},vertexShader:wl.backgroundCube_vert,fragmentShader:wl.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wl.cube_vert,fragmentShader:wl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wl.equirect_vert,fragmentShader:wl.equirect_frag},distanceRGBA:{uniforms:Ta([El.common,El.displacementmap,{referencePosition:{value:new $r},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wl.distanceRGBA_vert,fragmentShader:wl.distanceRGBA_frag},shadow:{uniforms:Ta([El.lights,El.fog,{color:{value:new Go(0)},opacity:{value:1}}]),vertexShader:wl.shadow_vert,fragmentShader:wl.shadow_frag}};Tl.physical={uniforms:Ta([Tl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zr},clearcoatNormalScale:{value:new qr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zr},sheen:{value:0},sheenColor:{value:new Go(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zr},transmissionSamplerSize:{value:new qr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zr},attenuationDistance:{value:0},attenuationColor:{value:new Go(0)},specularColor:{value:new Go(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zr},anisotropyVector:{value:new qr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zr}}]),vertexShader:wl.meshphysical_vert,fragmentShader:wl.meshphysical_frag};const Ml={r:0,b:0,g:0},Cl=new ao,Al=new Js;function Rl(t,e,n,i,r,s,o){const a=new Go(0);let l,c,u=!0===s?0:1,h=null,d=0,f=null;function p(t){let i=!0===t.isScene?t.background:null;if(i&&i.isTexture){i=(t.backgroundBlurriness>0?n:e).get(i)}return i}function g(e,n){e.getRGB(Ml,Ma(t)),i.buffers.color.setClear(Ml.r,Ml.g,Ml.b,n,o)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),u=e,g(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(t){u=t,g(a,u)},render:function(e){let n=!1;const r=p(e);null===r?g(a,u):r&&r.isColor&&(g(r,1),n=!0);const s=t.xr.getEnvironmentBlendMode();"additive"===s?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===s&&i.buffers.color.setClear(0,0,0,0,o),(t.autoClear||n)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,n){const i=p(n);i&&(i.isCubeTexture||i.mapping===pi)?(void 0===c&&(c=new ba(new wa(1,1,1),new Aa({name:"BackgroundCubeMaterial",uniforms:Ea(Tl.backgroundCube.uniforms),vertexShader:Tl.backgroundCube.vertexShader,fragmentShader:Tl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Cl.copy(n.backgroundRotation),Cl.x*=-1,Cl.y*=-1,Cl.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(Cl.y*=-1,Cl.z*=-1),c.material.uniforms.envMap.value=i,c.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Al.makeRotationFromEuler(Cl)),c.material.toneMapped=ls.getTransfer(i.colorSpace)!==Tr,h===i&&d===i.version&&f===t.toneMapping||(c.material.needsUpdate=!0,h=i,d=i.version,f=t.toneMapping),c.layers.enableAll(),e.unshift(c,c.geometry,c.material,0,0,null)):i&&i.isTexture&&(void 0===l&&(l=new ba(new tl(2,2),new Aa({name:"BackgroundMaterial",uniforms:Ea(Tl.background.uniforms),vertexShader:Tl.background.vertexShader,fragmentShader:Tl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=i,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=ls.getTransfer(i.colorSpace)!==Tr,!0===i.matrixAutoUpdate&&i.updateMatrix(),l.material.uniforms.uvTransform.value.copy(i.matrix),h===i&&d===i.version&&f===t.toneMapping||(l.material.needsUpdate=!0,h=i,d=i.version,f=t.toneMapping),l.layers.enableAll(),e.unshift(l,l.geometry,l.material,0,0,null))},dispose:function(){void 0!==c&&(c.geometry.dispose(),c.material.dispose(),c=void 0),void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}}}function Pl(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=c(null);let s=r,o=!1;function a(e){return t.bindVertexArray(e)}function l(e){return t.deleteVertexArray(e)}function c(t){const e=[],i=[],r=[];for(let s=0;s<n;s++)e[s]=0,i[s]=0,r[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:r,object:t,attributes:{},index:null}}function u(){const t=s.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function h(t){d(t,0)}function d(e,n){const i=s.newAttributes,r=s.enabledAttributes,o=s.attributeDivisors;i[e]=1,0===r[e]&&(t.enableVertexAttribArray(e),r[e]=1),o[e]!==n&&(t.vertexAttribDivisor(e,n),o[e]=n)}function f(){const e=s.newAttributes,n=s.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function p(e,n,i,r,s,o,a){!0===a?t.vertexAttribIPointer(e,n,i,s,o):t.vertexAttribPointer(e,n,i,r,s,o)}function g(){m(),o=!0,s!==r&&(s=r,a(s.object))}function m(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(n,r,l,g,m){let _=!1;const v=function(e,n,r){const s=!0===r.wireframe;let o=i[e.id];void 0===o&&(o={},i[e.id]=o);let a=o[n.id];void 0===a&&(a={},o[n.id]=a);let l=a[s];void 0===l&&(l=c(t.createVertexArray()),a[s]=l);return l}(g,l,r);s!==v&&(s=v,a(s.object)),_=function(t,e,n,i){const r=s.attributes,o=e.attributes;let a=0;const l=n.getAttributes();for(const s in l){if(l[s].location>=0){const e=r[s];let n=o[s];if(void 0===n&&("instanceMatrix"===s&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===s&&t.instanceColor&&(n=t.instanceColor)),void 0===e)return!0;if(e.attribute!==n)return!0;if(n&&e.data!==n.data)return!0;a++}}return s.attributesNum!==a||s.index!==i}(n,g,l,m),_&&function(t,e,n,i){const r={},o=e.attributes;let a=0;const l=n.getAttributes();for(const s in l){if(l[s].location>=0){let e=o[s];void 0===e&&("instanceMatrix"===s&&t.instanceMatrix&&(e=t.instanceMatrix),"instanceColor"===s&&t.instanceColor&&(e=t.instanceColor));const n={};n.attribute=e,e&&e.data&&(n.data=e.data),r[s]=n,a++}}s.attributes=r,s.attributesNum=a,s.index=i}(n,g,l,m),null!==m&&e.update(m,t.ELEMENT_ARRAY_BUFFER),(_||o)&&(o=!1,function(n,i,r,s){u();const o=s.attributes,a=r.getAttributes(),l=i.defaultAttributeValues;for(const c in a){const i=a[c];if(i.location>=0){let r=o[c];if(void 0===r&&("instanceMatrix"===c&&n.instanceMatrix&&(r=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(r=n.instanceColor)),void 0!==r){const o=r.normalized,a=r.itemSize,l=e.get(r);if(void 0===l)continue;const c=l.buffer,u=l.type,f=l.bytesPerElement,g=u===t.INT||u===t.UNSIGNED_INT||r.gpuType===Ai;if(r.isInterleavedBufferAttribute){const e=r.data,l=e.stride,m=r.offset;if(e.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)d(i.location+t,e.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<i.locationSize;t++)h(i.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<i.locationSize;t++)p(i.location+t,a/i.locationSize,u,o,l*f,(m+a/i.locationSize*t)*f,g)}else{if(r.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)d(i.location+t,r.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=r.meshPerAttribute*r.count)}else for(let t=0;t<i.locationSize;t++)h(i.location+t);t.bindBuffer(t.ARRAY_BUFFER,c);for(let t=0;t<i.locationSize;t++)p(i.location+t,a/i.locationSize,u,o,a*f,a/i.locationSize*t*f,g)}}else if(void 0!==l){const e=l[c];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(i.location,e);break;case 3:t.vertexAttrib3fv(i.location,e);break;case 4:t.vertexAttrib4fv(i.location,e);break;default:t.vertexAttrib1fv(i.location,e)}}}}f()}(n,r,l,g),null!==m&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(m).buffer))},reset:g,resetDefaultState:m,dispose:function(){g();for(const t in i){const e=i[t];for(const t in e){const n=e[t];for(const t in n)l(n[t].object),delete n[t];delete e[t]}delete i[t]}},releaseStatesOfGeometry:function(t){if(void 0===i[t.id])return;const e=i[t.id];for(const n in e){const t=e[n];for(const e in t)l(t[e].object),delete t[e];delete e[n]}delete i[t.id]},releaseStatesOfProgram:function(t){for(const e in i){const n=i[e];if(void 0===n[t.id])continue;const r=n[t.id];for(const t in r)l(r[t].object),delete r[t];delete n[t.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:f}}function Nl(t,e,n){let i;function r(e,r,s){0!==s&&(t.drawArraysInstanced(i,e,r,s),n.update(r,i,s))}this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i,1)},this.renderInstances=r,this.renderMultiDraw=function(t,r,s){if(0===s)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,t,0,r,0,s);let o=0;for(let e=0;e<s;e++)o+=r[e];n.update(o,i,1)},this.renderMultiDrawInstances=function(t,s,o,a){if(0===o)return;const l=e.get("WEBGL_multi_draw");if(null===l)for(let e=0;e<t.length;e++)r(t[e],s[e],a[e]);else{l.multiDrawArraysInstancedWEBGL(i,t,0,s,0,a,0,o);let e=0;for(let t=0;t<o;t++)e+=s[t]*a[t];n.update(e,i,1)}}}function Dl(t,e,n,i){let r;function s(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==n.precision?n.precision:"highp";const a=s(o);a!==o&&(o=a);const l=!0===n.logarithmicDepthBuffer,c=!0===n.reversedDepthBuffer&&e.has("EXT_clip_control"),u=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,textureFormatReadable:function(e){return e===Fi||i.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const r=n===Ni&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(n!==Ei&&i.convert(n)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==Pi&&!r)},precision:o,logarithmicDepthBuffer:l,reversedDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function Ll(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new ja,a=new Zr,l={value:null,needsUpdate:!1};function c(t,n,i,r){const s=null!==t?t.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const e=i+4*s,r=n.matrixWorldInverse;a.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=i;n!==s;++n,l+=4)o.copy(t[n]).applyMatrix4(r,a),o.normal.toArray(c,l),c[l+3]=o.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const n=0!==t.length||e||0!==i||r;return r=e,i=t.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(t,e){n=c(t,e,0)},this.setState=function(o,a,u){const h=o.clippingPlanes,d=o.clipIntersection,f=o.clipShadows,p=t.get(o);if(!r||null===h||0===h.length||s&&!f)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);e.numPlanes=i,e.numIntersection=0}();else{const t=s?0:i,e=4*t;let r=p.clippingState||null;l.value=r,r=c(h,a,e,u);for(let i=0;i!==e;++i)r[i]=n[i];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function Ol(t){let e=new WeakMap;function n(t,e){return 303===e?t.mapping=di:304===e&&(t.mapping=fi),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping;if(303===s||304===s){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const o=new Fa(s.height);return o.fromEquirectangularTexture(t,r),e.set(r,o),r.addEventListener("dispose",i),n(o.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}const kl=[.125,.215,.35,.446,.526,.582],Il=20,Fl=new gl,Ul=new Go;let zl=null,Bl=0,Hl=0,Vl=!1;const Wl=(1+Math.sqrt(5))/2,Gl=1/Wl,jl=[new $r(-Wl,Gl,0),new $r(Wl,Gl,0),new $r(-Gl,0,Wl),new $r(Gl,0,Wl),new $r(0,Wl,-Gl),new $r(0,Wl,Gl),new $r(-1,1,-1),new $r(1,1,-1),new $r(-1,1,1),new $r(1,1,1)],Xl=new $r;class ql{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100,r={}){const{size:s=256,position:o=Xl}=r;zl=this._renderer.getRenderTarget(),Bl=this._renderer.getActiveCubeFace(),Hl=this._renderer.getActiveMipmapLevel(),Vl=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);const a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(t,n,i,a,o),e>0&&this._blur(a,0,0,e),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Jl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Yl(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(zl,Bl,Hl),this._renderer.xr.enabled=Vl,t.scissorTest=!1,$l(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===di||t.mapping===fi?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),zl=this._renderer.getRenderTarget(),Bl=this._renderer.getActiveCubeFace(),Hl=this._renderer.getActiveMipmapLevel(),Vl=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:bi,minFilter:bi,generateMipmaps:!1,type:Ni,format:Fi,colorSpace:wr,depthBuffer:!1},i=Kl(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Kl(t,e,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],n=[],i=[];let r=t;const s=t-4+1+kl.length;for(let o=0;o<s;o++){const s=Math.pow(2,r);n.push(s);let a=1/s;o>t-4?a=kl[o-t+4-1]:0===o&&(a=0),i.push(a);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,g=2,m=1,_=new Float32Array(p*f*d),v=new Float32Array(g*f*d),y=new Float32Array(m*f*d);for(let t=0;t<d;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];_.set(i,p*f*t),v.set(h,g*f*t);const r=[t,t,t,t,t,t];y.set(r,m*f*t)}const x=new ca;x.setAttribute("position",new Zo(_,p)),x.setAttribute("uv",new Zo(v,g)),x.setAttribute("faceIndex",new Zo(y,m)),e.push(x),r>4&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(t,e,n){const i=new Float32Array(Il),r=new $r(0,1,0),s=new Aa({name:"SphericalGaussianBlur",defines:{n:Il,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Zl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return s}(i,t,e)}return i}_compileMaterial(t){const e=new ba(this._lodPlanes[0],t);this._renderer.compile(e,Fl)}_sceneToCubeUV(t,e,n,i,r){const s=new La(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(Ul),l.toneMapping=0,l.autoClear=!1;l.state.buffers.depth.getReversed()&&(l.setRenderTarget(i),l.clearDepth(),l.setRenderTarget(null));const h=new Ko({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new ba(new wa,h);let f=!1;const p=t.background;p?p.isColor&&(h.color.copy(p),t.background=null,f=!0):(h.color.copy(Ul),f=!0);for(let g=0;g<6;g++){const e=g%3;0===e?(s.up.set(0,o[g],0),s.position.set(r.x,r.y,r.z),s.lookAt(r.x+a[g],r.y,r.z)):1===e?(s.up.set(0,0,o[g]),s.position.set(r.x,r.y,r.z),s.lookAt(r.x,r.y+a[g],r.z)):(s.up.set(0,o[g],0),s.position.set(r.x,r.y,r.z),s.lookAt(r.x,r.y,r.z+a[g]));const n=this._cubeSize;$l(i,e*n,g>2?n:0,n,n),l.setRenderTarget(i),f&&l.render(d,s),l.render(t,s)}d.geometry.dispose(),d.material.dispose(),l.toneMapping=u,l.autoClear=c,t.background=p}_textureToCubeUV(t,e){const n=this._renderer,i=t.mapping===di||t.mapping===fi;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Jl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Yl());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new ba(this._lodPlanes[0],r);r.uniforms.envMap.value=t;const o=this._cubeSize;$l(e,0,0,3*o,2*o),n.setRenderTarget(e),n.render(s,Fl)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const i=this._lodPlanes.length;for(let r=1;r<i;r++){const e=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=jl[(i-r-1)%jl.length];this._blur(t,r-1,r,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,i,"latitudinal",r),this._halfBlur(s,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,s,o){const a=this._renderer,l=this._blurMaterial,c=new ba(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):Il,g=[];let m=0;for(let y=0;y<Il;++y){const t=y/f,e=Math.exp(-t*t/2);g.push(e),0===y?m+=e:y<p&&(m+=2*e)}for(let y=0;y<g.length;y++)g[y]=g[y]/m;u.envMap.value=t.texture,u.samples.value=p,u.weights.value=g,u.latitudinal.value="latitudinal"===s,o&&(u.poleAxis.value=o);const{_lodMax:_}=this;u.dTheta.value=d,u.mipInt.value=_-n;const v=this._sizeLods[i];$l(e,3*v*(i>_-4?i-_+4:0),4*(this._cubeSize-v),3*v,2*v),a.setRenderTarget(e),a.render(c,Fl)}}function Kl(t,e,n){const i=new bs(t,e,n);return i.texture.mapping=pi,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function $l(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Yl(){return new Aa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Zl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Jl(){return new Aa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Zl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Zl(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Ql(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,o=303===s||304===s,a=s===di||s===fi;if(o||a){let s=e.get(r);const l=void 0!==s?s.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===n&&(n=new ql(t)),s=o?n.fromEquirectangular(r,s):n.fromCubemap(r,s),s.texture.pmremVersion=r.pmremVersion,e.set(r,s),s.texture;if(void 0!==s)return s.texture;{const l=r.image;return o&&l&&l.height>0||a&&l&&function(t){let e=0;const n=6;for(let i=0;i<n;i++)void 0!==t[i]&&e++;return e===n}(l)?(null===n&&(n=new ql(t)),s=o?n.fromEquirectangular(r):n.fromCubemap(r),s.texture.pmremVersion=r.pmremVersion,e.set(r,s),r.addEventListener("dispose",i),s.texture):null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function tc(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(t){const e=n(t);return null===e&&rs("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ec(t,e,n,i){const r={},s=new WeakMap;function o(t){const a=t.target;null!==a.index&&e.remove(a.index);for(const n in a.attributes)e.remove(a.attributes[n]);a.removeEventListener("dispose",o),delete r[a.id];const l=s.get(a);l&&(e.remove(l),s.delete(a)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){const n=[],i=t.index,r=t.attributes.position;let o=0;if(null!==i){const t=i.array;o=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],s=t[e+2];n.push(i,r,r,s,s,i)}}else{if(void 0===r)return;{const t=r.array;o=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}}const a=new(ts(n)?ta:Qo)(n,1);a.version=o;const l=s.get(t);l&&e.remove(l),s.set(t,a)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",o),r[e.id]=!0,n.memory.geometries++),e},update:function(n){const i=n.attributes;for(const r in i)e.update(i[r],t.ARRAY_BUFFER)},getWireframeAttribute:function(t){const e=s.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function nc(t,e,n){let i,r,s;function o(e,o,a){0!==a&&(t.drawElementsInstanced(i,o,r,e*s,a),n.update(o,i,a))}this.setMode=function(t){i=t},this.setIndex=function(t){r=t.type,s=t.bytesPerElement},this.render=function(e,o){t.drawElements(i,o,r,e*s),n.update(o,i,1)},this.renderInstances=o,this.renderMultiDraw=function(t,s,o){if(0===o)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,s,0,r,t,0,o);let a=0;for(let e=0;e<o;e++)a+=s[e];n.update(a,i,1)},this.renderMultiDrawInstances=function(t,a,l,c){if(0===l)return;const u=e.get("WEBGL_multi_draw");if(null===u)for(let e=0;e<t.length;e++)o(t[e]/s,a[e],c[e]);else{u.multiDrawElementsInstancedWEBGL(i,a,0,r,t,0,c,0,l);let e=0;for(let t=0;t<l;t++)e+=a[t]*c[t];n.update(e,i,1)}}}function ic(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(n,i,r){switch(e.calls++,i){case t.TRIANGLES:e.triangles+=r*(n/3);break;case t.LINES:e.lines+=r*(n/2);break;case t.LINE_STRIP:e.lines+=r*(n-1);break;case t.LINE_LOOP:e.lines+=r*n;break;case t.POINTS:e.points+=r*n}}}}function rc(t,e,n){const i=new WeakMap,r=new ys;return{update:function(s,o,a){const l=s.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=void 0!==c?c.length:0;let h=i.get(o);if(void 0===h||h.count!==u){let t=function(){_.dispose(),i.delete(o),o.removeEventListener("dispose",t)};void 0!==h&&h.texture.dispose();const n=void 0!==o.morphAttributes.position,s=void 0!==o.morphAttributes.normal,a=void 0!==o.morphAttributes.color,l=o.morphAttributes.position||[],c=o.morphAttributes.normal||[],d=o.morphAttributes.color||[];let f=0;!0===n&&(f=1),!0===s&&(f=2),!0===a&&(f=3);let p=o.attributes.position.count*f,g=1;p>e.maxTextureSize&&(g=Math.ceil(p/e.maxTextureSize),p=e.maxTextureSize);const m=new Float32Array(p*g*4*u),_=new Ss(m,p,g,u);_.type=Pi,_.needsUpdate=!0;const v=4*f;for(let e=0;e<u;e++){const t=l[e],i=c[e],o=d[e],u=p*g*4*e;for(let e=0;e<t.count;e++){const l=e*v;!0===n&&(r.fromBufferAttribute(t,e),m[u+l+0]=r.x,m[u+l+1]=r.y,m[u+l+2]=r.z,m[u+l+3]=0),!0===s&&(r.fromBufferAttribute(i,e),m[u+l+4]=r.x,m[u+l+5]=r.y,m[u+l+6]=r.z,m[u+l+7]=0),!0===a&&(r.fromBufferAttribute(o,e),m[u+l+8]=r.x,m[u+l+9]=r.y,m[u+l+10]=r.z,m[u+l+11]=4===o.itemSize?r.w:1)}}h={count:u,texture:_,size:new qr(p,g)},i.set(o,h),o.addEventListener("dispose",t)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)a.getUniforms().setValue(t,"morphTexture",s.morphTexture,n);else{let e=0;for(let t=0;t<l.length;t++)e+=l[t];const n=o.morphTargetsRelative?1:1-e;a.getUniforms().setValue(t,"morphTargetBaseInfluence",n),a.getUniforms().setValue(t,"morphTargetInfluences",l)}a.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),a.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}}}function sc(t,e,n,i){let r=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(o){const a=i.render.frame,l=o.geometry,c=e.get(o,l);if(r.get(c)!==a&&(e.update(c),r.set(c,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",s)&&o.addEventListener("dispose",s),r.get(o)!==a&&(n.update(o.instanceMatrix,t.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,t.ARRAY_BUFFER),r.set(o,a))),o.isSkinnedMesh){const t=o.skeleton;r.get(t)!==a&&(t.update(),r.set(t,a))}return c},dispose:function(){r=new WeakMap}}}const oc=new vs,ac=new Ya(1,1),lc=new Ss,cc=new ws,uc=new Ia,hc=[],dc=[],fc=new Float32Array(16),pc=new Float32Array(9),gc=new Float32Array(4);function mc(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=hc[r];if(void 0===s&&(s=new Float32Array(r),hc[r]=s),0!==e){i.toArray(s,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(s,r)}return s}function _c(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function vc(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function yc(t,e){let n=dc[e];void 0===n&&(n=new Int32Array(e),dc[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function xc(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function bc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_c(n,e))return;t.uniform2fv(this.addr,e),vc(n,e)}}function Sc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(_c(n,e))return;t.uniform3fv(this.addr,e),vc(n,e)}}function wc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_c(n,e))return;t.uniform4fv(this.addr,e),vc(n,e)}}function Ec(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(_c(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),vc(n,e)}else{if(_c(n,i))return;gc.set(i),t.uniformMatrix2fv(this.addr,!1,gc),vc(n,i)}}function Tc(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(_c(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),vc(n,e)}else{if(_c(n,i))return;pc.set(i),t.uniformMatrix3fv(this.addr,!1,pc),vc(n,i)}}function Mc(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(_c(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),vc(n,e)}else{if(_c(n,i))return;fc.set(i),t.uniformMatrix4fv(this.addr,!1,fc),vc(n,i)}}function Cc(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ac(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_c(n,e))return;t.uniform2iv(this.addr,e),vc(n,e)}}function Rc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(_c(n,e))return;t.uniform3iv(this.addr,e),vc(n,e)}}function Pc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_c(n,e))return;t.uniform4iv(this.addr,e),vc(n,e)}}function Nc(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Dc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(_c(n,e))return;t.uniform2uiv(this.addr,e),vc(n,e)}}function Lc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(_c(n,e))return;t.uniform3uiv(this.addr,e),vc(n,e)}}function Oc(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(_c(n,e))return;t.uniform4uiv(this.addr,e),vc(n,e)}}function kc(t,e,n){const i=this.cache,r=n.allocateTextureUnit();let s;i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),this.type===t.SAMPLER_2D_SHADOW?(ac.compareFunction=515,s=ac):s=oc,n.setTexture2D(e||s,r)}function Ic(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||cc,r)}function Fc(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||uc,r)}function Uc(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||lc,r)}function zc(t,e){t.uniform1fv(this.addr,e)}function Bc(t,e){const n=mc(e,this.size,2);t.uniform2fv(this.addr,n)}function Hc(t,e){const n=mc(e,this.size,3);t.uniform3fv(this.addr,n)}function Vc(t,e){const n=mc(e,this.size,4);t.uniform4fv(this.addr,n)}function Wc(t,e){const n=mc(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Gc(t,e){const n=mc(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function jc(t,e){const n=mc(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Xc(t,e){t.uniform1iv(this.addr,e)}function qc(t,e){t.uniform2iv(this.addr,e)}function Kc(t,e){t.uniform3iv(this.addr,e)}function $c(t,e){t.uniform4iv(this.addr,e)}function Yc(t,e){t.uniform1uiv(this.addr,e)}function Jc(t,e){t.uniform2uiv(this.addr,e)}function Zc(t,e){t.uniform3uiv(this.addr,e)}function Qc(t,e){t.uniform4uiv(this.addr,e)}function tu(t,e,n){const i=this.cache,r=e.length,s=yc(n,r);_c(i,s)||(t.uniform1iv(this.addr,s),vc(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||oc,s[o])}function eu(t,e,n){const i=this.cache,r=e.length,s=yc(n,r);_c(i,s)||(t.uniform1iv(this.addr,s),vc(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||cc,s[o])}function nu(t,e,n){const i=this.cache,r=e.length,s=yc(n,r);_c(i,s)||(t.uniform1iv(this.addr,s),vc(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||uc,s[o])}function iu(t,e,n){const i=this.cache,r=e.length,s=yc(n,r);_c(i,s)||(t.uniform1iv(this.addr,s),vc(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||lc,s[o])}class ru{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return xc;case 35664:return bc;case 35665:return Sc;case 35666:return wc;case 35674:return Ec;case 35675:return Tc;case 35676:return Mc;case 5124:case 35670:return Cc;case 35667:case 35671:return Ac;case 35668:case 35672:return Rc;case 35669:case 35673:return Pc;case 5125:return Nc;case 36294:return Dc;case 36295:return Lc;case 36296:return Oc;case 35678:case 36198:case 36298:case 36306:case 35682:return kc;case 35679:case 36299:case 36307:return Ic;case 35680:case 36300:case 36308:case 36293:return Fc;case 36289:case 36303:case 36311:case 36292:return Uc}}(e.type)}}class su{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return zc;case 35664:return Bc;case 35665:return Hc;case 35666:return Vc;case 35674:return Wc;case 35675:return Gc;case 35676:return jc;case 5124:case 35670:return Xc;case 35667:case 35671:return qc;case 35668:case 35672:return Kc;case 35669:case 35673:return $c;case 5125:return Yc;case 36294:return Jc;case 36295:return Zc;case 36296:return Qc;case 35678:case 36198:case 36298:case 36306:case 35682:return tu;case 35679:case 36299:case 36307:return eu;case 35680:case 36300:case 36308:case 36293:return nu;case 36289:case 36303:case 36311:case 36292:return iu}}(e.type)}}class ou{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(t,e[s.id],n)}}}const au=/(\w+)(\])?(\[|\.)?/g;function lu(t,e){t.seq.push(e),t.map[e.id]=e}function cu(t,e,n){const i=t.name,r=i.length;for(au.lastIndex=0;;){const s=au.exec(i),o=au.lastIndex;let a=s[1];const l="]"===s[2],c=s[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===r){lu(n,void 0===c?new ru(a,t,e):new su(a,t,e));break}{let t=n.map[a];void 0===t&&(t=new ou(a),lu(n,t)),n=t}}}class uu{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);cu(n,t.getUniformLocation(e,n.name),this)}}setValue(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)}setOptional(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)}static upload(t,e,n,i){for(let r=0,s=e.length;r!==s;++r){const s=e[r],o=n[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,i)}}static seqWithValue(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n}}function hu(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let du=0;const fu=new Zr;function pu(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),r=(t.getShaderInfoLog(e)||"").trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(t,e){const n=t.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const t=o+1;i.push(`${t===e?">":" "} ${t}: ${n[o]}`)}return i.join("\n")}(t.getShaderSource(e),i)}return r}function gu(t,e){const n=function(t){ls._getMatrix(fu,ls.workingColorSpace,t);const e=`mat3( ${fu.elements.map(t=>t.toFixed(4))} )`;switch(ls.getTransfer(t)){case Er:return[e,"LinearTransferOETF"];case Tr:return[e,"sRGBTransferOETF"];default:return[e,"LinearTransferOETF"]}}(e);return[`vec4 ${t}( vec4 value ) {`,`\treturn ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join("\n")}function mu(t,e){let n;switch(e){case 1:default:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Cineon";break;case 4:n="ACESFilmic";break;case 6:n="AgX";break;case 7:n="Neutral";break;case 5:n="Custom"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const _u=new $r;function vu(){ls.getLuminanceCoefficients(_u);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${_u.x.toFixed(4)}, ${_u.y.toFixed(4)}, ${_u.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function yu(t){return""!==t}function xu(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function bu(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Su=/^[ \t]*#include +<([\w\d./]+)>/gm;function wu(t){return t.replace(Su,Tu)}const Eu=new Map;function Tu(t,e){let n=wl[e];if(void 0===n){const t=Eu.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");n=wl[t]}return wu(n)}const Mu=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Cu(t){return t.replace(Mu,Au)}function Au(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Ru(t){let e=`precision ${t.precision} float;\n\tprecision ${t.precision} int;\n\tprecision ${t.precision} sampler2D;\n\tprecision ${t.precision} samplerCube;\n\tprecision ${t.precision} sampler3D;\n\tprecision ${t.precision} sampler2DArray;\n\tprecision ${t.precision} sampler2DShadow;\n\tprecision ${t.precision} samplerCubeShadow;\n\tprecision ${t.precision} sampler2DArrayShadow;\n\tprecision ${t.precision} isampler2D;\n\tprecision ${t.precision} isampler3D;\n\tprecision ${t.precision} isamplerCube;\n\tprecision ${t.precision} isampler2DArray;\n\tprecision ${t.precision} usampler2D;\n\tprecision ${t.precision} usampler3D;\n\tprecision ${t.precision} usamplerCube;\n\tprecision ${t.precision} usampler2DArray;\n\t`;return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Pu(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case di:case fi:e="ENVMAP_TYPE_CUBE";break;case pi:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";t.envMap&&t.envMapMode===fi&&(e="ENVMAP_MODE_REFRACTION");return e}(n),h=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),d=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),f=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(yu).join("\n")}(n),p=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),g=r.createProgram();let m,_,v=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(yu).join("\n"),m.length>0&&(m+="\n"),_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter(yu).join("\n"),_.length>0&&(_+="\n")):(m=[Ru(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(yu).join("\n"),_=[Ru(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?wl.tonemapping_pars_fragment:"",0!==n.toneMapping?mu("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",wl.colorspace_pars_fragment,gu("linearToOutputTexel",n.outputColorSpace),vu(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(yu).join("\n")),o=wu(o),o=xu(o,n),o=bu(o,n),a=wu(a),a=xu(a,n),a=bu(a,n),o=Cu(o),a=Cu(a),!0!==n.isRawShaderMaterial&&(v="#version 300 es\n",m=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#define varying in",n.glslVersion===kr?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===kr?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const y=v+m+o,x=v+_+a,b=hu(r,r.VERTEX_SHADER,y),S=hu(r,r.FRAGMENT_SHADER,x);function w(e){if(t.debug.checkShaderErrors){const n=r.getProgramInfoLog(g)||"",i=r.getShaderInfoLog(b)||"",s=r.getShaderInfoLog(S)||"",o=n.trim(),a=i.trim(),l=s.trim();let c=!0,u=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(c=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(r,g,b,S);else{pu(r,b,"vertex"),pu(r,S,"fragment")}else""!==o||""!==a&&""!==l||(u=!1);u&&(e.diagnostics={runnable:c,programLog:o,vertexShader:{log:a,prefix:m},fragmentShader:{log:l,prefix:_}})}r.deleteShader(b),r.deleteShader(S),E=new uu(r,g),T=function(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),s=i.name;let o=1;i.type===t.FLOAT_MAT2&&(o=2),i.type===t.FLOAT_MAT3&&(o=3),i.type===t.FLOAT_MAT4&&(o=4),n[s]={type:i.type,location:t.getAttribLocation(e,s),locationSize:o}}return n}(r,g)}let E,T;r.attachShader(g,b),r.attachShader(g,S),void 0!==n.index0AttributeName?r.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===E&&w(this),E},this.getAttributes=function(){return void 0===T&&w(this),T};let M=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===M&&(M=r.getProgramParameter(g,37297)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=du++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=b,this.fragmentShader=S,this}let Nu=0;class Du{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Lu(t),e.set(t,n)),n}}class Lu{constructor(t){this.id=Nu++,this.code=t,this.usedTimes=0}}function Ou(t,e,n,i,r,s,o){const a=new lo,l=new Du,c=new Set,u=[],h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(t){return c.add(t),0===t?"uv":`uv${t}`}return{getParameters:function(s,a,u,m,_){const v=m.fog,y=_.geometry,x=s.isMeshStandardMaterial?m.environment:null,b=(s.isMeshStandardMaterial?n:e).get(s.envMap||x),S=b&&b.mapping===pi?b.image.height:null,w=p[s.type];null!==s.precision&&(f=r.getMaxPrecision(s.precision),s.precision);const E=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,T=void 0!==E?E.length:0;let M,C,A,R,P=0;if(void 0!==y.morphAttributes.position&&(P=1),void 0!==y.morphAttributes.normal&&(P=2),void 0!==y.morphAttributes.color&&(P=3),w){const t=Tl[w];M=t.vertexShader,C=t.fragmentShader}else M=s.vertexShader,C=s.fragmentShader,l.update(s),A=l.getVertexShaderID(s),R=l.getFragmentShaderID(s);const N=t.getRenderTarget(),D=t.state.buffers.depth.getReversed(),L=!0===_.isInstancedMesh,O=!0===_.isBatchedMesh,k=!!s.map,I=!!s.matcap,F=!!b,U=!!s.aoMap,z=!!s.lightMap,B=!!s.bumpMap,H=!!s.normalMap,V=!!s.displacementMap,W=!!s.emissiveMap,G=!!s.metalnessMap,j=!!s.roughnessMap,X=s.anisotropy>0,q=s.clearcoat>0,K=s.dispersion>0,$=s.iridescence>0,Y=s.sheen>0,J=s.transmission>0,Z=X&&!!s.anisotropyMap,Q=q&&!!s.clearcoatMap,tt=q&&!!s.clearcoatNormalMap,et=q&&!!s.clearcoatRoughnessMap,nt=$&&!!s.iridescenceMap,it=$&&!!s.iridescenceThicknessMap,rt=Y&&!!s.sheenColorMap,st=Y&&!!s.sheenRoughnessMap,ot=!!s.specularMap,at=!!s.specularColorMap,lt=!!s.specularIntensityMap,ct=J&&!!s.transmissionMap,ut=J&&!!s.thicknessMap,ht=!!s.gradientMap,dt=!!s.alphaMap,ft=s.alphaTest>0,pt=!!s.alphaHash,gt=!!s.extensions;let mt=0;s.toneMapped&&(null!==N&&!0!==N.isXRRenderTarget||(mt=t.toneMapping));const _t={shaderID:w,shaderType:s.type,shaderName:s.name,vertexShader:M,fragmentShader:C,defines:s.defines,customVertexShaderID:A,customFragmentShaderID:R,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,batching:O,batchingColor:O&&null!==_._colorsTexture,instancing:L,instancingColor:L&&null!==_.instanceColor,instancingMorph:L&&null!==_.morphTexture,supportsVertexTextures:d,outputColorSpace:null===N?t.outputColorSpace:!0===N.isXRRenderTarget?N.texture.colorSpace:wr,alphaToCoverage:!!s.alphaToCoverage,map:k,matcap:I,envMap:F,envMapMode:F&&b.mapping,envMapCubeUVHeight:S,aoMap:U,lightMap:z,bumpMap:B,normalMap:H,displacementMap:d&&V,emissiveMap:W,normalMapObjectSpace:H&&1===s.normalMapType,normalMapTangentSpace:H&&0===s.normalMapType,metalnessMap:G,roughnessMap:j,anisotropy:X,anisotropyMap:Z,clearcoat:q,clearcoatMap:Q,clearcoatNormalMap:tt,clearcoatRoughnessMap:et,dispersion:K,iridescence:$,iridescenceMap:nt,iridescenceThicknessMap:it,sheen:Y,sheenColorMap:rt,sheenRoughnessMap:st,specularMap:ot,specularColorMap:at,specularIntensityMap:lt,transmission:J,transmissionMap:ct,thicknessMap:ut,gradientMap:ht,opaque:!1===s.transparent&&1===s.blending&&!1===s.alphaToCoverage,alphaMap:dt,alphaTest:ft,alphaHash:pt,combine:s.combine,mapUv:k&&g(s.map.channel),aoMapUv:U&&g(s.aoMap.channel),lightMapUv:z&&g(s.lightMap.channel),bumpMapUv:B&&g(s.bumpMap.channel),normalMapUv:H&&g(s.normalMap.channel),displacementMapUv:V&&g(s.displacementMap.channel),emissiveMapUv:W&&g(s.emissiveMap.channel),metalnessMapUv:G&&g(s.metalnessMap.channel),roughnessMapUv:j&&g(s.roughnessMap.channel),anisotropyMapUv:Z&&g(s.anisotropyMap.channel),clearcoatMapUv:Q&&g(s.clearcoatMap.channel),clearcoatNormalMapUv:tt&&g(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&g(s.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&g(s.iridescenceMap.channel),iridescenceThicknessMapUv:it&&g(s.iridescenceThicknessMap.channel),sheenColorMapUv:rt&&g(s.sheenColorMap.channel),sheenRoughnessMapUv:st&&g(s.sheenRoughnessMap.channel),specularMapUv:ot&&g(s.specularMap.channel),specularColorMapUv:at&&g(s.specularColorMap.channel),specularIntensityMapUv:lt&&g(s.specularIntensityMap.channel),transmissionMapUv:ct&&g(s.transmissionMap.channel),thicknessMapUv:ut&&g(s.thicknessMap.channel),alphaMapUv:dt&&g(s.alphaMap.channel),vertexTangents:!!y.attributes.tangent&&(H||X),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,pointsUvs:!0===_.isPoints&&!!y.attributes.uv&&(k||dt),fog:!!v,useFog:!0===s.fog,fogExp2:!!v&&v.isFogExp2,flatShading:!0===s.flatShading&&!1===s.wireframe,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:h,reversedDepthBuffer:D,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:T,morphTextureStride:P,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:mt,decodeVideoTexture:k&&!0===s.map.isVideoTexture&&ls.getTransfer(s.map.colorSpace)===Tr,decodeVideoTextureEmissive:W&&!0===s.emissiveMap.isVideoTexture&&ls.getTransfer(s.emissiveMap.colorSpace)===Tr,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:gt&&!0===s.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(gt&&!0===s.extensions.multiDraw||O)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return _t.vertexUv1s=c.has(1),_t.vertexUv2s=c.has(2),_t.vertexUv3s=c.has(3),c.clear(),_t},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(n,e),function(t,e){a.disableAll(),e.supportsVertexTextures&&a.enable(0);e.instancing&&a.enable(1);e.instancingColor&&a.enable(2);e.instancingMorph&&a.enable(3);e.matcap&&a.enable(4);e.envMap&&a.enable(5);e.normalMapObjectSpace&&a.enable(6);e.normalMapTangentSpace&&a.enable(7);e.clearcoat&&a.enable(8);e.iridescence&&a.enable(9);e.alphaTest&&a.enable(10);e.vertexColors&&a.enable(11);e.vertexAlphas&&a.enable(12);e.vertexUv1s&&a.enable(13);e.vertexUv2s&&a.enable(14);e.vertexUv3s&&a.enable(15);e.vertexTangents&&a.enable(16);e.anisotropy&&a.enable(17);e.alphaHash&&a.enable(18);e.batching&&a.enable(19);e.dispersion&&a.enable(20);e.batchingColor&&a.enable(21);e.gradientMap&&a.enable(22);t.push(a.mask),a.disableAll(),e.fog&&a.enable(0);e.useFog&&a.enable(1);e.flatShading&&a.enable(2);e.logarithmicDepthBuffer&&a.enable(3);e.reversedDepthBuffer&&a.enable(4);e.skinning&&a.enable(5);e.morphTargets&&a.enable(6);e.morphNormals&&a.enable(7);e.morphColors&&a.enable(8);e.premultipliedAlpha&&a.enable(9);e.shadowMapEnabled&&a.enable(10);e.doubleSided&&a.enable(11);e.flipSided&&a.enable(12);e.useDepthPacking&&a.enable(13);e.dithering&&a.enable(14);e.transmission&&a.enable(15);e.sheen&&a.enable(16);e.opaque&&a.enable(17);e.pointsUvs&&a.enable(18);e.decodeVideoTexture&&a.enable(19);e.decodeVideoTextureEmissive&&a.enable(20);e.alphaToCoverage&&a.enable(21);t.push(a.mask)}(n,e),n.push(t.outputColorSpace)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=p[t.type];let n;if(e){const t=Tl[e];n=Ca.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,r=u.length;t<r;t++){const e=u[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Pu(t,n,e,s),u.push(i)),i},releaseProgram:function(t){if(0===--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:u,dispose:function(){l.dispose()}}}function ku(){let t=new WeakMap;return{has:function(e){return t.has(e)},get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Iu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Fu(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Uu(){const t=[];let e=0;const n=[],i=[],r=[];function s(n,i,r,s,o,a){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=o,l.group=a),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,o,a,l,c){const u=s(t,e,o,a,l,c);o.transmission>0?i.push(u):!0===o.transparent?r.push(u):n.push(u)},unshift:function(t,e,o,a,l,c){const u=s(t,e,o,a,l,c);o.transmission>0?i.unshift(u):!0===o.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Iu),i.length>1&&i.sort(e||Fu),r.length>1&&r.sort(e||Fu)}}}function zu(){let t=new WeakMap;return{get:function(e,n){const i=t.get(e);let r;return void 0===i?(r=new Uu,t.set(e,[r])):n>=i.length?(r=new Uu,i.push(r)):r=i[n],r},dispose:function(){t=new WeakMap}}}function Bu(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new $r,color:new Go};break;case"SpotLight":n={position:new $r,direction:new $r,color:new Go,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new $r,color:new Go,distance:0,decay:0};break;case"HemisphereLight":n={direction:new $r,skyColor:new Go,groundColor:new Go};break;case"RectAreaLight":n={color:new Go,position:new $r,halfWidth:new $r,halfHeight:new $r}}return t[e.id]=n,n}}}let Hu=0;function Vu(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Wu(t){const e=new Bu,n=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qr};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qr,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let a=0;a<9;a++)i.probe.push(new $r);const r=new $r,s=new Js,o=new Js;return{setup:function(r){let s=0,o=0,a=0;for(let t=0;t<9;t++)i.probe[t].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,_=0,v=0;r.sort(Vu);for(let t=0,x=r.length;t<x;t++){const y=r[t],x=y.color,b=y.intensity,S=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)s+=x.r*b,o+=x.g*b,a+=x.b*b;else if(y.isLightProbe){for(let t=0;t<9;t++)i.probe[t].addScaledVector(y.sh.coefficients[t],b);v++}else if(y.isDirectionalLight){const t=e.get(y);if(t.color.copy(y.color).multiplyScalar(y.intensity),y.castShadow){const t=y.shadow,e=n.get(y);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,i.directionalShadow[l]=e,i.directionalShadowMap[l]=w,i.directionalShadowMatrix[l]=y.shadow.matrix,f++}i.directional[l]=t,l++}else if(y.isSpotLight){const t=e.get(y);t.position.setFromMatrixPosition(y.matrixWorld),t.color.copy(x).multiplyScalar(b),t.distance=S,t.coneCos=Math.cos(y.angle),t.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),t.decay=y.decay,i.spot[u]=t;const r=y.shadow;if(y.map&&(i.spotLightMap[m]=y.map,m++,r.updateMatrices(y),y.castShadow&&_++),i.spotLightMatrix[u]=r.matrix,y.castShadow){const t=n.get(y);t.shadowIntensity=r.intensity,t.shadowBias=r.bias,t.shadowNormalBias=r.normalBias,t.shadowRadius=r.radius,t.shadowMapSize=r.mapSize,i.spotShadow[u]=t,i.spotShadowMap[u]=w,g++}u++}else if(y.isRectAreaLight){const t=e.get(y);t.color.copy(x).multiplyScalar(b),t.halfWidth.set(.5*y.width,0,0),t.halfHeight.set(0,.5*y.height,0),i.rectArea[h]=t,h++}else if(y.isPointLight){const t=e.get(y);if(t.color.copy(y.color).multiplyScalar(y.intensity),t.distance=y.distance,t.decay=y.decay,y.castShadow){const t=y.shadow,e=n.get(y);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,e.shadowCameraNear=t.camera.near,e.shadowCameraFar=t.camera.far,i.pointShadow[c]=e,i.pointShadowMap[c]=w,i.pointShadowMatrix[c]=y.shadow.matrix,p++}i.point[c]=t,c++}else if(y.isHemisphereLight){const t=e.get(y);t.skyColor.copy(y.color).multiplyScalar(b),t.groundColor.copy(y.groundColor).multiplyScalar(b),i.hemi[d]=t,d++}}h>0&&(!0===t.has("OES_texture_float_linear")?(i.rectAreaLTC1=El.LTC_FLOAT_1,i.rectAreaLTC2=El.LTC_FLOAT_2):(i.rectAreaLTC1=El.LTC_HALF_1,i.rectAreaLTC2=El.LTC_HALF_2)),i.ambient[0]=s,i.ambient[1]=o,i.ambient[2]=a;const y=i.hash;y.directionalLength===l&&y.pointLength===c&&y.spotLength===u&&y.rectAreaLength===h&&y.hemiLength===d&&y.numDirectionalShadows===f&&y.numPointShadows===p&&y.numSpotShadows===g&&y.numSpotMaps===m&&y.numLightProbes===v||(i.directional.length=l,i.spot.length=u,i.rectArea.length=h,i.point.length=c,i.hemi.length=d,i.directionalShadow.length=f,i.directionalShadowMap.length=f,i.pointShadow.length=p,i.pointShadowMap.length=p,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=f,i.pointShadowMatrix.length=p,i.spotLightMatrix.length=g+m-_,i.spotLightMap.length=m,i.numSpotLightShadowsWithMaps=_,i.numLightProbes=v,y.directionalLength=l,y.pointLength=c,y.spotLength=u,y.rectAreaLength=h,y.hemiLength=d,y.numDirectionalShadows=f,y.numPointShadows=p,y.numSpotShadows=g,y.numSpotMaps=m,y.numLightProbes=v,i.version=Hu++)},setupView:function(t,e){let n=0,a=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,f=t.length;d<f;d++){const e=t[d];if(e.isDirectionalLight){const t=i.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(r),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=i.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(r),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=i.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),o.identity(),s.copy(e.matrixWorld),s.premultiply(h),o.extractRotation(s),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(o),t.halfHeight.applyMatrix4(o),c++}else if(e.isPointLight){const t=i.point[a];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),a++}else if(e.isHemisphereLight){const t=i.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),u++}}},state:i}}function Gu(t){const e=new Wu(t),n=[],i=[];const r={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){r.camera=t,n.length=0,i.length=0},state:r,setupLights:function(){e.setup(n)},setupLightsView:function(t){e.setupView(n,t)},pushLight:function(t){n.push(t)},pushShadow:function(t){i.push(t)}}}function ju(t){let e=new WeakMap;return{get:function(n,i=0){const r=e.get(n);let s;return void 0===r?(s=new Gu(t),e.set(n,[s])):i>=r.length?(s=new Gu(t),r.push(s)):s=r[i],s},dispose:function(){e=new WeakMap}}}function Xu(t,e,n){let i=new $a;const r=new qr,s=new qr,o=new ys,a=new il({depthPacking:3201}),l=new rl,c={},u=n.maxTextureSize,h={[Fn]:1,[Un]:0,[zn]:2},d=new Aa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qr},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new ca;p.setAttribute("position",new Zo(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new ba(p,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let _=this.type;function v(n,i){const s=e.update(g);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new bs(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,s,d,g,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,s,f,g,null)}function y(e,n,i,r){let s=null;const o=!0===i.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===i.isPointLight?l:a,t.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0||!0===n.alphaToCoverage){const t=s.uuid,e=n.uuid;let i=c[t];void 0===i&&(i={},c[t]=i);let r=i[e];void 0===r&&(r=s.clone(),i[e]=r,n.addEventListener("dispose",b)),s=r}if(s.visible=n.visible,s.wireframe=n.wireframe,s.side=3===r?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],s.alphaMap=n.alphaMap,s.alphaTest=!0===n.alphaToCoverage?.5:n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===i.isPointLight&&!0===s.isMeshDistanceMaterial){t.properties.get(s).light=i}return s}function x(n,r,s,o,a){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===a)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=e.update(n),l=n.material;if(Array.isArray(l)){const e=i.groups;for(let c=0,u=e.length;c<u;c++){const u=e[c],h=l[u.materialIndex];if(h&&h.visible){const e=y(n,h,o,a);n.onBeforeShadow(t,n,r,s,i,e,u),t.renderBufferDirect(s,null,i,e,n,u),n.onAfterShadow(t,n,r,s,i,e,u)}}}else if(l.visible){const e=y(n,l,o,a);n.onBeforeShadow(t,n,r,s,i,e,null),t.renderBufferDirect(s,null,i,e,n,null),n.onAfterShadow(t,n,r,s,i,e,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)x(l[t],r,s,o,a)}function b(t){t.target.removeEventListener("dispose",b);for(const e in c){const n=c[e],i=t.target.uuid;if(i in n){n[i].dispose(),delete n[i]}}}this.render=function(e,n,a){if(!1===m.enabled)return;if(!1===m.autoUpdate&&!1===m.needsUpdate)return;if(0===e.length)return;const l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(0),!0===d.buffers.depth.getReversed()?d.buffers.color.setClear(0,0,0,0):d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=3!==_&&3===this.type,p=3===_&&3!==this.type;for(let g=0,m=e.length;g<m;g++){const l=e[g],c=l.shadow;if(void 0===c)continue;if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),s.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/h.x),r.x=s.x*h.x,c.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/h.y),r.y=s.y*h.y,c.mapSize.y=s.y)),null===c.map||!0===f||!0===p){const t=3!==this.type?{minFilter:vi,magFilter:vi}:{};null!==c.map&&c.map.dispose(),c.map=new bs(r.x,r.y,t),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}t.setRenderTarget(c.map),t.clear();const m=c.getViewportCount();for(let t=0;t<m;t++){const e=c.getViewport(t);o.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),d.viewport(o),c.updateMatrices(l,t),i=c.getFrustum(),x(n,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&3===this.type&&v(c,a),c.needsUpdate=!1}_=this.type,m.needsUpdate=!1,t.setRenderTarget(l,c,h)}}const qu={[ri]:1,[oi]:6,[li]:7,[ai]:5,[si]:0,[ui]:2,[hi]:4,[ci]:3};function Ku(t,e){const n=new function(){let e=!1;const n=new ys;let i=null;const r=new ys(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,s,o,a){!0===a&&(e*=o,i*=o,s*=o),n.set(e,i,s,o),!1===r.equals(n)&&(t.clearColor(e,i,s,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},i=new function(){let n=!1,i=!1,r=null,s=null,o=null;return{setReversed:function(t){if(i!==t){const n=e.get("EXT_clip_control");t?n.clipControlEXT(n.LOWER_LEFT_EXT,n.ZERO_TO_ONE_EXT):n.clipControlEXT(n.LOWER_LEFT_EXT,n.NEGATIVE_ONE_TO_ONE_EXT),i=t;const r=o;o=null,this.setClear(r)}},getReversed:function(){return i},setTest:function(e){e?B(t.DEPTH_TEST):H(t.DEPTH_TEST)},setMask:function(e){r===e||n||(t.depthMask(e),r=e)},setFunc:function(e){if(i&&(e=qu[e]),s!==e){switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}s=e}},setLocked:function(t){n=t},setClear:function(e){o!==e&&(i&&(e=1-e),t.clearDepth(e),o=e)},reset:function(){n=!1,r=null,s=null,o=null,i=!1}}},r=new function(){let e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(n){e||(n?B(t.STENCIL_TEST):H(t.STENCIL_TEST))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,o){i===e&&r===n&&s===o||(t.stencilFunc(e,n,o),i=e,r=n,s=o)},setOp:function(e,n,i){o===e&&a===n&&l===i||(t.stencilOp(e,n,i),o=e,a=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,s=null,o=null,a=null,l=null,c=null}}},s=new WeakMap,o=new WeakMap;let a={},l={},c=new WeakMap,u=[],h=null,d=!1,f=null,p=null,g=null,m=null,_=null,v=null,y=null,x=new Go(0,0,0),b=0,S=!1,w=null,E=null,T=null,M=null,C=null;const A=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,P=0;const N=t.getParameter(t.VERSION);-1!==N.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(N)[1]),R=P>=1):-1!==N.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),R=P>=2);let D=null,L={};const O=t.getParameter(t.SCISSOR_BOX),k=t.getParameter(t.VIEWPORT),I=(new ys).fromArray(O),F=(new ys).fromArray(k);function U(e,n,i,r){const s=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let a=0;a<i;a++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(n,0,t.RGBA,1,1,r,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage2D(n+a,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s);return o}const z={};function B(e){!0!==a[e]&&(t.enable(e),a[e]=!0)}function H(e){!1!==a[e]&&(t.disable(e),a[e]=!1)}z[t.TEXTURE_2D]=U(t.TEXTURE_2D,t.TEXTURE_2D,1),z[t.TEXTURE_CUBE_MAP]=U(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[t.TEXTURE_2D_ARRAY]=U(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),z[t.TEXTURE_3D]=U(t.TEXTURE_3D,t.TEXTURE_3D,1,1),n.setClear(0,0,0,1),i.setClear(1),r.setClear(0),B(t.DEPTH_TEST),i.setFunc(3),j(!1),X(1),B(t.CULL_FACE),G(0);const V={[Bn]:t.FUNC_ADD,[Hn]:t.FUNC_SUBTRACT,[Vn]:t.FUNC_REVERSE_SUBTRACT};V[103]=t.MIN,V[104]=t.MAX;const W={[Wn]:t.ZERO,[Gn]:t.ONE,[jn]:t.SRC_COLOR,[qn]:t.SRC_ALPHA,[Qn]:t.SRC_ALPHA_SATURATE,[Jn]:t.DST_COLOR,[$n]:t.DST_ALPHA,[Xn]:t.ONE_MINUS_SRC_COLOR,[Kn]:t.ONE_MINUS_SRC_ALPHA,[Zn]:t.ONE_MINUS_DST_COLOR,[Yn]:t.ONE_MINUS_DST_ALPHA,[ti]:t.CONSTANT_COLOR,[ei]:t.ONE_MINUS_CONSTANT_COLOR,[ni]:t.CONSTANT_ALPHA,[ii]:t.ONE_MINUS_CONSTANT_ALPHA};function G(e,n,i,r,s,o,a,l,c,u){if(0!==e){if(!1===d&&(B(t.BLEND),d=!0),5===e)s=s||n,o=o||i,a=a||r,n===p&&s===_||(t.blendEquationSeparate(V[n],V[s]),p=n,_=s),i===g&&r===m&&o===v&&a===y||(t.blendFuncSeparate(W[i],W[r],W[o],W[a]),g=i,m=r,v=o,y=a),!1!==l.equals(x)&&c===b||(t.blendColor(l.r,l.g,l.b,c),x.copy(l),b=c),f=e,S=!1;else if(e!==f||u!==S){if(p===Bn&&_===Bn||(t.blendEquation(t.FUNC_ADD),p=Bn,_=Bn),u)switch(e){case 1:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFunc(t.ONE,t.ONE);break;case 3:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case 4:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE)}else switch(e){case 1:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case 2:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE)}g=null,m=null,v=null,y=null,x.set(0,0,0),b=0,f=e,S=u}}else!0===d&&(H(t.BLEND),d=!1)}function j(e){w!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),w=e)}function X(e){0!==e?(B(t.CULL_FACE),e!==E&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):H(t.CULL_FACE),E=e}function q(e,n,i){e?(B(t.POLYGON_OFFSET_FILL),M===n&&C===i||(t.polygonOffset(n,i),M=n,C=i)):H(t.POLYGON_OFFSET_FILL)}return{buffers:{color:n,depth:i,stencil:r},enable:B,disable:H,bindFramebuffer:function(e,n){return l[e]!==n&&(t.bindFramebuffer(e,n),l[e]=n,e===t.DRAW_FRAMEBUFFER&&(l[t.FRAMEBUFFER]=n),e===t.FRAMEBUFFER&&(l[t.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(e,n){let i=u,r=!1;if(e){i=c.get(n),void 0===i&&(i=[],c.set(n,i));const s=e.textures;if(i.length!==s.length||i[0]!==t.COLOR_ATTACHMENT0){for(let e=0,n=s.length;e<n;e++)i[e]=t.COLOR_ATTACHMENT0+e;i.length=s.length,r=!0}}else i[0]!==t.BACK&&(i[0]=t.BACK,r=!0);r&&t.drawBuffers(i)},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:G,setMaterial:function(e,s){2===e.side?H(t.CULL_FACE):B(t.CULL_FACE);let o=1===e.side;s&&(o=!o),j(o),1===e.blending&&!1===e.transparent?G(0):G(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),i.setFunc(e.depthFunc),i.setTest(e.depthTest),i.setMask(e.depthWrite),n.setMask(e.colorWrite);const a=e.stencilWrite;r.setTest(a),a&&(r.setMask(e.stencilWriteMask),r.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),r.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(t.SAMPLE_ALPHA_TO_COVERAGE):H(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:j,setCullFace:X,setLineWidth:function(e){e!==T&&(R&&t.lineWidth(e),T=e)},setPolygonOffset:q,setScissorTest:function(e){e?B(t.SCISSOR_TEST):H(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+A-1),D!==e&&(t.activeTexture(e),D=e)},bindTexture:function(e,n,i){void 0===i&&(i=null===D?t.TEXTURE0+A-1:D);let r=L[i];void 0===r&&(r={type:void 0,texture:void 0},L[i]=r),r.type===e&&r.texture===n||(D!==i&&(t.activeTexture(i),D=i),t.bindTexture(e,n||z[e]),r.type=e,r.texture=n)},unbindTexture:function(){const e=L[D];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D(...arguments)}catch(e){}},compressedTexImage3D:function(){try{t.compressedTexImage3D(...arguments)}catch(e){}},texImage2D:function(){try{t.texImage2D(...arguments)}catch(e){}},texImage3D:function(){try{t.texImage3D(...arguments)}catch(e){}},updateUBOMapping:function(e,n){let i=o.get(n);void 0===i&&(i=new WeakMap,o.set(n,i));let r=i.get(e);void 0===r&&(r=t.getUniformBlockIndex(n,e.name),i.set(e,r))},uniformBlockBinding:function(e,n){const i=o.get(n).get(e);s.get(n)!==i&&(t.uniformBlockBinding(n,i,e.__bindingPointIndex),s.set(n,i))},texStorage2D:function(){try{t.texStorage2D(...arguments)}catch(e){}},texStorage3D:function(){try{t.texStorage3D(...arguments)}catch(e){}},texSubImage2D:function(){try{t.texSubImage2D(...arguments)}catch(e){}},texSubImage3D:function(){try{t.texSubImage3D(...arguments)}catch(e){}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D(...arguments)}catch(e){}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D(...arguments)}catch(e){}},scissor:function(e){!1===I.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),I.copy(e))},viewport:function(e){!1===F.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),F.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),i.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),a={},D=null,L={},l={},c=new WeakMap,u=[],h=null,d=!1,f=null,p=null,g=null,m=null,_=null,v=null,y=null,x=new Go(0,0,0),b=0,S=!1,w=null,E=null,T=null,M=null,C=null,I.set(0,0,t.canvas.width,t.canvas.height),F.set(0,0,t.canvas.width,t.canvas.height),n.reset(),i.reset(),r.reset()}}}function $u(t,e,n,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new qr,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(G){}function p(t,e){return f?new OffscreenCanvas(t,e):es("canvas")}function g(t,e,n){let i=1;const r=W(t);if((r.width>n||r.height>n)&&(i=n/Math.max(r.width,r.height)),i<1){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&t instanceof VideoFrame){const n=Math.floor(i*r.width),s=Math.floor(i*r.height);void 0===h&&(h=p(n,s));const o=e?p(n,s):h;o.width=n,o.height=s;return o.getContext("2d").drawImage(t,0,0,n,s),o}return t}return t}function m(t){return t.generateMipmaps}function _(e){t.generateMipmap(e)}function v(e){return e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:e.isWebGL3DRenderTarget?t.TEXTURE_3D:e.isWebGLArrayRenderTarget||e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function y(n,i,r,s,o=!1){if(null!==n&&void 0!==t[n])return t[n];let a=i;if(i===t.RED&&(r===t.FLOAT&&(a=t.R32F),r===t.HALF_FLOAT&&(a=t.R16F),r===t.UNSIGNED_BYTE&&(a=t.R8)),i===t.RED_INTEGER&&(r===t.UNSIGNED_BYTE&&(a=t.R8UI),r===t.UNSIGNED_SHORT&&(a=t.R16UI),r===t.UNSIGNED_INT&&(a=t.R32UI),r===t.BYTE&&(a=t.R8I),r===t.SHORT&&(a=t.R16I),r===t.INT&&(a=t.R32I)),i===t.RG&&(r===t.FLOAT&&(a=t.RG32F),r===t.HALF_FLOAT&&(a=t.RG16F),r===t.UNSIGNED_BYTE&&(a=t.RG8)),i===t.RG_INTEGER&&(r===t.UNSIGNED_BYTE&&(a=t.RG8UI),r===t.UNSIGNED_SHORT&&(a=t.RG16UI),r===t.UNSIGNED_INT&&(a=t.RG32UI),r===t.BYTE&&(a=t.RG8I),r===t.SHORT&&(a=t.RG16I),r===t.INT&&(a=t.RG32I)),i===t.RGB_INTEGER&&(r===t.UNSIGNED_BYTE&&(a=t.RGB8UI),r===t.UNSIGNED_SHORT&&(a=t.RGB16UI),r===t.UNSIGNED_INT&&(a=t.RGB32UI),r===t.BYTE&&(a=t.RGB8I),r===t.SHORT&&(a=t.RGB16I),r===t.INT&&(a=t.RGB32I)),i===t.RGBA_INTEGER&&(r===t.UNSIGNED_BYTE&&(a=t.RGBA8UI),r===t.UNSIGNED_SHORT&&(a=t.RGBA16UI),r===t.UNSIGNED_INT&&(a=t.RGBA32UI),r===t.BYTE&&(a=t.RGBA8I),r===t.SHORT&&(a=t.RGBA16I),r===t.INT&&(a=t.RGBA32I)),i===t.RGB&&(r===t.UNSIGNED_INT_5_9_9_9_REV&&(a=t.RGB9_E5),r===t.UNSIGNED_INT_10F_11F_11F_REV&&(a=t.R11F_G11F_B10F)),i===t.RGBA){const e=o?Er:ls.getTransfer(s);r===t.FLOAT&&(a=t.RGBA32F),r===t.HALF_FLOAT&&(a=t.RGBA16F),r===t.UNSIGNED_BYTE&&(a=e===Tr?t.SRGB8_ALPHA8:t.RGBA8),r===t.UNSIGNED_SHORT_4_4_4_4&&(a=t.RGBA4),r===t.UNSIGNED_SHORT_5_5_5_1&&(a=t.RGB5_A1)}return a!==t.R16F&&a!==t.R32F&&a!==t.RG16F&&a!==t.RG32F&&a!==t.RGBA16F&&a!==t.RGBA32F||e.get("EXT_color_buffer_float"),a}function x(e,n){let i;return e?null===n||n===Ri||n===Oi?i=t.DEPTH24_STENCIL8:n===Pi?i=t.DEPTH32F_STENCIL8:n===Ci&&(i=t.DEPTH24_STENCIL8):null===n||n===Ri||n===Oi?i=t.DEPTH_COMPONENT24:n===Pi?i=t.DEPTH_COMPONENT32F:n===Ci&&(i=t.DEPTH_COMPONENT16),i}function b(t,e){return!0===m(t)||t.isFramebufferTexture&&t.minFilter!==vi&&t.minFilter!==bi?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function S(t){const e=t.target;e.removeEventListener("dispose",S),function(t){const e=i.get(t);if(void 0===e.__webglInit)return;const n=t.source,r=d.get(n);if(r){const i=r[e.__cacheKey];i.usedTimes--,0===i.usedTimes&&E(t),0===Object.keys(r).length&&d.delete(n)}i.remove(t)}(e),e.isVideoTexture&&u.delete(e)}function w(e){const n=e.target;n.removeEventListener("dispose",w),function(e){const n=i.get(e);e.depthTexture&&(e.depthTexture.dispose(),i.remove(e.depthTexture));if(e.isWebGLCubeRenderTarget)for(let i=0;i<6;i++){if(Array.isArray(n.__webglFramebuffer[i]))for(let e=0;e<n.__webglFramebuffer[i].length;e++)t.deleteFramebuffer(n.__webglFramebuffer[i][e]);else t.deleteFramebuffer(n.__webglFramebuffer[i]);n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[i])}else{if(Array.isArray(n.__webglFramebuffer))for(let e=0;e<n.__webglFramebuffer.length;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let e=0;e<n.__webglColorRenderbuffer.length;e++)n.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(n.__webglColorRenderbuffer[e]);n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const r=e.textures;for(let s=0,a=r.length;s<a;s++){const e=i.get(r[s]);e.__webglTexture&&(t.deleteTexture(e.__webglTexture),o.memory.textures--),i.remove(r[s])}i.remove(e)}(n)}function E(e){const n=i.get(e);t.deleteTexture(n.__webglTexture);const r=e.source;delete d.get(r)[n.__cacheKey],o.memory.textures--}let T=0;function M(e,r){const s=i.get(e);if(e.isVideoTexture&&function(t){const e=o.render.frame;u.get(t)!==e&&(u.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&!0!==e.isExternalTexture&&e.version>0&&s.__version!==e.version){const t=e.image;if(null===t);else if(!1!==t.complete)return void L(s,e,r)}else e.isExternalTexture&&(s.__webglTexture=e.sourceTexture?e.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,s.__webglTexture,t.TEXTURE0+r)}const C={[gi]:t.REPEAT,[mi]:t.CLAMP_TO_EDGE,[_i]:t.MIRRORED_REPEAT},A={[vi]:t.NEAREST,[yi]:t.NEAREST_MIPMAP_NEAREST,[xi]:t.NEAREST_MIPMAP_LINEAR,[bi]:t.LINEAR,[Si]:t.LINEAR_MIPMAP_NEAREST,[wi]:t.LINEAR_MIPMAP_LINEAR},R={[Cr]:t.NEVER,[Or]:t.ALWAYS,[Ar]:t.LESS,[Pr]:t.LEQUAL,[Rr]:t.EQUAL,[Lr]:t.GEQUAL,[Nr]:t.GREATER,[Dr]:t.NOTEQUAL};function P(n,s){if(s.type===Pi&&!1===e.has("OES_texture_float_linear")&&(s.magFilter===bi||s.magFilter===Si||s.magFilter===xi||s.magFilter===wi||s.minFilter===bi||s.minFilter===Si||s.minFilter===xi||s.minFilter),t.texParameteri(n,t.TEXTURE_WRAP_S,C[s.wrapS]),t.texParameteri(n,t.TEXTURE_WRAP_T,C[s.wrapT]),n!==t.TEXTURE_3D&&n!==t.TEXTURE_2D_ARRAY||t.texParameteri(n,t.TEXTURE_WRAP_R,C[s.wrapR]),t.texParameteri(n,t.TEXTURE_MAG_FILTER,A[s.magFilter]),t.texParameteri(n,t.TEXTURE_MIN_FILTER,A[s.minFilter]),s.compareFunction&&(t.texParameteri(n,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(n,t.TEXTURE_COMPARE_FUNC,R[s.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(s.magFilter===vi)return;if(s.minFilter!==xi&&s.minFilter!==wi)return;if(s.type===Pi&&!1===e.has("OES_texture_float_linear"))return;if(s.anisotropy>1||i.get(s).__currentAnisotropy){const o=e.get("EXT_texture_filter_anisotropic");t.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy}}}function N(e,n){let i=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",S));const r=n.source;let s=d.get(r);void 0===s&&(s={},d.set(r,s));const a=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(n);if(a!==e.__cacheKey){void 0===s[a]&&(s[a]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,i=!0),s[a].usedTimes++;const r=s[e.__cacheKey];void 0!==r&&(s[e.__cacheKey].usedTimes--,0===r.usedTimes&&E(n)),e.__cacheKey=a,e.__webglTexture=s[a].texture}return i}function D(t,e,n){return Math.floor(Math.floor(t/n)/e)}function L(e,o,a){let l=t.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(l=t.TEXTURE_2D_ARRAY),o.isData3DTexture&&(l=t.TEXTURE_3D);const c=N(e,o),u=o.source;n.bindTexture(l,e.__webglTexture,t.TEXTURE0+a);const h=i.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(t.TEXTURE0+a);const e=ls.getPrimaries(ls.workingColorSpace),i=o.colorSpace===br?null:ls.getPrimaries(o.colorSpace),d=o.colorSpace===br||e===i?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,o.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,o.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let f=g(o.image,!1,r.maxTextureSize);f=V(o,f);const p=s.convert(o.format,o.colorSpace),v=s.convert(o.type);let S,w=y(o.internalFormat,p,v,o.colorSpace,o.isVideoTexture);P(l,o);const E=o.mipmaps,T=!0!==o.isVideoTexture,M=void 0===h.__version||!0===c,C=u.dataReady,A=b(o,f);if(o.isDepthTexture)w=x(o.format===zi,o.type),M&&(T?n.texStorage2D(t.TEXTURE_2D,1,w,f.width,f.height):n.texImage2D(t.TEXTURE_2D,0,w,f.width,f.height,0,p,v,null));else if(o.isDataTexture)if(E.length>0){T&&M&&n.texStorage2D(t.TEXTURE_2D,A,w,E[0].width,E[0].height);for(let e=0,i=E.length;e<i;e++)S=E[e],T?C&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,S.width,S.height,p,v,S.data):n.texImage2D(t.TEXTURE_2D,e,w,S.width,S.height,0,p,v,S.data);o.generateMipmaps=!1}else T?(M&&n.texStorage2D(t.TEXTURE_2D,A,w,f.width,f.height),C&&function(e,i,r,s){const o=e.updateRanges;if(0===o.length)n.texSubImage2D(t.TEXTURE_2D,0,0,0,i.width,i.height,r,s,i.data);else{o.sort((t,e)=>t.start-e.start);let a=0;for(let t=1;t<o.length;t++){const e=o[a],n=o[t],r=e.start+e.count,s=D(n.start,i.width,4),l=D(e.start,i.width,4);n.start<=r+1&&s===l&&D(n.start+n.count-1,i.width,4)===s?e.count=Math.max(e.count,n.start+n.count-e.start):(++a,o[a]=n)}o.length=a+1;const l=t.getParameter(t.UNPACK_ROW_LENGTH),c=t.getParameter(t.UNPACK_SKIP_PIXELS),u=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,i.width);for(let e=0,h=o.length;e<h;e++){const a=o[e],l=Math.floor(a.start/4),c=Math.ceil(a.count/4),u=l%i.width,h=Math.floor(l/i.width),d=c,f=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,u),t.pixelStorei(t.UNPACK_SKIP_ROWS,h),n.texSubImage2D(t.TEXTURE_2D,0,u,h,d,f,r,s,i.data)}e.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,l),t.pixelStorei(t.UNPACK_SKIP_PIXELS,c),t.pixelStorei(t.UNPACK_SKIP_ROWS,u)}}(o,f,p,v)):n.texImage2D(t.TEXTURE_2D,0,w,f.width,f.height,0,p,v,f.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){T&&M&&n.texStorage3D(t.TEXTURE_2D_ARRAY,A,w,E[0].width,E[0].height,f.depth);for(let e=0,i=E.length;e<i;e++)if(S=E[e],o.format!==Fi){if(null!==p)if(T){if(C)if(o.layerUpdates.size>0){const i=xl(S.width,S.height,o.format,o.type);for(const r of o.layerUpdates){const s=S.data.subarray(r*i/S.data.BYTES_PER_ELEMENT,(r+1)*i/S.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,r,S.width,S.height,1,p,s)}o.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,S.width,S.height,f.depth,p,S.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,w,S.width,S.height,f.depth,0,S.data,0,0)}else T?C&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,S.width,S.height,f.depth,p,v,S.data):n.texImage3D(t.TEXTURE_2D_ARRAY,e,w,S.width,S.height,f.depth,0,p,v,S.data)}else{T&&M&&n.texStorage2D(t.TEXTURE_2D,A,w,E[0].width,E[0].height);for(let e=0,i=E.length;e<i;e++)S=E[e],o.format!==Fi?null!==p&&(T?C&&n.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,S.width,S.height,p,S.data):n.compressedTexImage2D(t.TEXTURE_2D,e,w,S.width,S.height,0,S.data)):T?C&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,S.width,S.height,p,v,S.data):n.texImage2D(t.TEXTURE_2D,e,w,S.width,S.height,0,p,v,S.data)}else if(o.isDataArrayTexture)if(T){if(M&&n.texStorage3D(t.TEXTURE_2D_ARRAY,A,w,f.width,f.height,f.depth),C)if(o.layerUpdates.size>0){const e=xl(f.width,f.height,o.format,o.type);for(const i of o.layerUpdates){const r=f.data.subarray(i*e/f.data.BYTES_PER_ELEMENT,(i+1)*e/f.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,i,f.width,f.height,1,p,v,r)}o.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,p,v,f.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,w,f.width,f.height,f.depth,0,p,v,f.data);else if(o.isData3DTexture)T?(M&&n.texStorage3D(t.TEXTURE_3D,A,w,f.width,f.height,f.depth),C&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,p,v,f.data)):n.texImage3D(t.TEXTURE_3D,0,w,f.width,f.height,f.depth,0,p,v,f.data);else if(o.isFramebufferTexture){if(M)if(T)n.texStorage2D(t.TEXTURE_2D,A,w,f.width,f.height);else{let e=f.width,i=f.height;for(let r=0;r<A;r++)n.texImage2D(t.TEXTURE_2D,r,w,e,i,0,p,v,null),e>>=1,i>>=1}}else if(E.length>0){if(T&&M){const e=W(E[0]);n.texStorage2D(t.TEXTURE_2D,A,w,e.width,e.height)}for(let e=0,i=E.length;e<i;e++)S=E[e],T?C&&n.texSubImage2D(t.TEXTURE_2D,e,0,0,p,v,S):n.texImage2D(t.TEXTURE_2D,e,w,p,v,S);o.generateMipmaps=!1}else if(T){if(M){const e=W(f);n.texStorage2D(t.TEXTURE_2D,A,w,e.width,e.height)}C&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,p,v,f)}else n.texImage2D(t.TEXTURE_2D,0,w,p,v,f);m(o)&&_(l),h.__version=u.version,o.onUpdate&&o.onUpdate(o)}e.__version=o.version}function O(e,r,o,l,c,u){const h=s.convert(o.format,o.colorSpace),d=s.convert(o.type),f=y(o.internalFormat,h,d,o.colorSpace),p=i.get(r),g=i.get(o);if(g.__renderTarget=r,!p.__hasExternalTextures){const e=Math.max(1,r.width>>u),i=Math.max(1,r.height>>u);c===t.TEXTURE_3D||c===t.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,e,i,r.depth,0,h,d,null):n.texImage2D(c,u,f,e,i,0,h,d,null)}n.bindFramebuffer(t.FRAMEBUFFER,e),H(r)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,l,c,g.__webglTexture,0,B(r)):(c===t.TEXTURE_2D||c>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,l,c,g.__webglTexture,u),n.bindFramebuffer(t.FRAMEBUFFER,null)}function k(e,n,i){if(t.bindRenderbuffer(t.RENDERBUFFER,e),n.depthBuffer){const r=n.depthTexture,s=r&&r.isDepthTexture?r.type:null,o=x(n.stencilBuffer,s),l=n.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,c=B(n);H(n)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,o,n.width,n.height):i?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,o,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,o,n.width,n.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,l,t.RENDERBUFFER,e)}else{const e=n.textures;for(let r=0;r<e.length;r++){const o=e[r],l=s.convert(o.format,o.colorSpace),c=s.convert(o.type),u=y(o.internalFormat,l,c,o.colorSpace),h=B(n);i&&!1===H(n)?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,u,n.width,n.height):H(n)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,h,u,n.width,n.height):t.renderbufferStorage(t.RENDERBUFFER,u,n.width,n.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function I(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const s=i.get(r.depthTexture);s.__renderTarget=r,s.__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),M(r.depthTexture,0);const o=s.__webglTexture,l=B(r);if(r.depthTexture.format===Ui)H(r)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0,l):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,o,0);else{if(r.depthTexture.format!==zi)throw new Error("Unknown depthTexture format");H(r)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0,l):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,o,0)}}function F(e){const r=i.get(e),s=!0===e.isWebGLCubeRenderTarget;if(r.__boundDepthTexture!==e.depthTexture){const t=e.depthTexture;if(r.__depthDisposeCallback&&r.__depthDisposeCallback(),t){const e=()=>{delete r.__boundDepthTexture,delete r.__depthDisposeCallback,t.removeEventListener("dispose",e)};t.addEventListener("dispose",e),r.__depthDisposeCallback=e}r.__boundDepthTexture=t}if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");const t=e.texture.mipmaps;t&&t.length>0?I(r.__webglFramebuffer[0],e):I(r.__webglFramebuffer,e)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[i]),void 0===r.__webglDepthbuffer[i])r.__webglDepthbuffer[i]=t.createRenderbuffer(),k(r.__webglDepthbuffer[i],e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,s=r.__webglDepthbuffer[i];t.bindRenderbuffer(t.RENDERBUFFER,s),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,s)}}else{const i=e.texture.mipmaps;if(i&&i.length>0?n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,r.__webglFramebuffer),void 0===r.__webglDepthbuffer)r.__webglDepthbuffer=t.createRenderbuffer(),k(r.__webglDepthbuffer,e,!1);else{const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,i=r.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,i),t.framebufferRenderbuffer(t.FRAMEBUFFER,n,t.RENDERBUFFER,i)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}const U=[],z=[];function B(t){return Math.min(r.maxSamples,t.samples)}function H(t){const n=i.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(t,e){const n=t.colorSpace;t.format,t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||n!==wr&&n!==br&&ls.getTransfer(n),e}function W(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?(c.width=t.naturalWidth||t.width,c.height=t.naturalHeight||t.height):"undefined"!=typeof VideoFrame&&t instanceof VideoFrame?(c.width=t.displayWidth,c.height=t.displayHeight):(c.width=t.width,c.height=t.height),c}this.allocateTextureUnit=function(){const t=T;return r.maxTextures,T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=M,this.setTexture2DArray=function(e,r){const s=i.get(e);!1===e.isRenderTargetTexture&&e.version>0&&s.__version!==e.version?L(s,e,r):n.bindTexture(t.TEXTURE_2D_ARRAY,s.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const s=i.get(e);!1===e.isRenderTargetTexture&&e.version>0&&s.__version!==e.version?L(s,e,r):n.bindTexture(t.TEXTURE_3D,s.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,o){const a=i.get(e);e.version>0&&a.__version!==e.version?function(e,o,a){if(6!==o.image.length)return;const l=N(e,o),c=o.source;n.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+a);const u=i.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(t.TEXTURE0+a);const e=ls.getPrimaries(ls.workingColorSpace),i=o.colorSpace===br?null:ls.getPrimaries(o.colorSpace),h=o.colorSpace===br||e===i?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,o.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,o.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=o.isCompressedTexture||o.image[0].isCompressedTexture,f=o.image[0]&&o.image[0].isDataTexture,p=[];for(let t=0;t<6;t++)p[t]=d||f?f?o.image[t].image:o.image[t]:g(o.image[t],!0,r.maxCubemapSize),p[t]=V(o,p[t]);const v=p[0],x=s.convert(o.format,o.colorSpace),S=s.convert(o.type),w=y(o.internalFormat,x,S,o.colorSpace),E=!0!==o.isVideoTexture,T=void 0===u.__version||!0===l,M=c.dataReady;let C,A=b(o,v);if(P(t.TEXTURE_CUBE_MAP,o),d){E&&T&&n.texStorage2D(t.TEXTURE_CUBE_MAP,A,w,v.width,v.height);for(let e=0;e<6;e++){C=p[e].mipmaps;for(let i=0;i<C.length;i++){const r=C[i];o.format!==Fi?null!==x&&(E?M&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,r.width,r.height,x,r.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,w,r.width,r.height,0,r.data)):E?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,0,0,r.width,r.height,x,S,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i,w,r.width,r.height,0,x,S,r.data)}}}else{if(C=o.mipmaps,E&&T){C.length>0&&A++;const e=W(p[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,A,w,e.width,e.height)}for(let e=0;e<6;e++)if(f){E?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,p[e].width,p[e].height,x,S,p[e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,w,p[e].width,p[e].height,0,x,S,p[e].data);for(let i=0;i<C.length;i++){const r=C[i].image[e].image;E?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,r.width,r.height,x,S,r.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,w,r.width,r.height,0,x,S,r.data)}}else{E?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,x,S,p[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,w,x,S,p[e]);for(let i=0;i<C.length;i++){const r=C[i];E?M&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,0,0,x,S,r.image[e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,i+1,w,x,S,r.image[e])}}}m(o)&&_(t.TEXTURE_CUBE_MAP),u.__version=c.version,o.onUpdate&&o.onUpdate(o)}e.__version=o.version}(a,e,o):n.bindTexture(t.TEXTURE_CUBE_MAP,a.__webglTexture,t.TEXTURE0+o)},this.rebindTextures=function(e,n,r){const s=i.get(e);void 0!==n&&O(s.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==r&&F(e)},this.setupRenderTarget=function(e){const r=e.texture,a=i.get(e),l=i.get(r);e.addEventListener("dispose",w);const c=e.textures,u=!0===e.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=t.createTexture()),l.__version=r.version,o.memory.textures++),u){a.__webglFramebuffer=[];for(let e=0;e<6;e++)if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer[e]=[];for(let n=0;n<r.mipmaps.length;n++)a.__webglFramebuffer[e][n]=t.createFramebuffer()}else a.__webglFramebuffer[e]=t.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer=[];for(let e=0;e<r.mipmaps.length;e++)a.__webglFramebuffer[e]=t.createFramebuffer()}else a.__webglFramebuffer=t.createFramebuffer();if(h)for(let e=0,n=c.length;e<n;e++){const n=i.get(c[e]);void 0===n.__webglTexture&&(n.__webglTexture=t.createTexture(),o.memory.textures++)}if(e.samples>0&&!1===H(e)){a.__webglMultisampledFramebuffer=t.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const i=c[n];a.__webglColorRenderbuffer[n]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,a.__webglColorRenderbuffer[n]);const r=s.convert(i.format,i.colorSpace),o=s.convert(i.type),l=y(i.internalFormat,r,o,i.colorSpace,!0===e.isXRRenderTarget),u=B(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,l,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n,t.RENDERBUFFER,a.__webglColorRenderbuffer[n])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(a.__webglDepthRenderbuffer=t.createRenderbuffer(),k(a.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(u){n.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture),P(t.TEXTURE_CUBE_MAP,r);for(let n=0;n<6;n++)if(r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)O(a.__webglFramebuffer[n][i],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,i);else O(a.__webglFramebuffer[n],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);m(r)&&_(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let r=0,s=c.length;r<s;r++){const s=c[r],o=i.get(s);let l=t.TEXTURE_2D;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(l=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(l,o.__webglTexture),P(l,s),O(a.__webglFramebuffer,e,s,t.COLOR_ATTACHMENT0+r,l,0),m(s)&&_(l)}n.unbindTexture()}else{let i=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(i=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(i,l.__webglTexture),P(i,r),r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)O(a.__webglFramebuffer[n],e,r,t.COLOR_ATTACHMENT0,i,n);else O(a.__webglFramebuffer,e,r,t.COLOR_ATTACHMENT0,i,0);m(r)&&_(i),n.unbindTexture()}e.depthBuffer&&F(e)},this.updateRenderTargetMipmap=function(t){const e=t.textures;for(let r=0,s=e.length;r<s;r++){const s=e[r];if(m(s)){const e=v(t),r=i.get(s).__webglTexture;n.bindTexture(e,r),_(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===H(e)){const r=e.textures,s=e.width,o=e.height;let a=t.COLOR_BUFFER_BIT;const c=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,u=i.get(e),h=r.length>1;if(h)for(let e=0;e<r.length;e++)n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer);const d=e.texture.mipmaps;d&&d.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<r.length;n++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(a|=t.STENCIL_BUFFER_BIT)),h){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const e=i.get(r[n]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,s,o,0,0,s,o,a,t.NEAREST),!0===l&&(U.length=0,z.length=0,U.push(t.COLOR_ATTACHMENT0+n),e.depthBuffer&&!1===e.resolveDepthBuffer&&(U.push(c),z.push(c),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,z)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,U))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),h)for(let e=0;e<r.length;e++){n.bindFramebuffer(t.FRAMEBUFFER,u.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,u.__webglColorRenderbuffer[e]);const s=i.get(r[e]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,u.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,s,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&l){const n=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=O,this.useMultisampledRTT=H}function Yu(t,e){return{convert:function(n,i=""){let r;const s=ls.getTransfer(i);if(n===Ei)return t.UNSIGNED_BYTE;if(n===Di)return t.UNSIGNED_SHORT_4_4_4_4;if(n===Li)return t.UNSIGNED_SHORT_5_5_5_1;if(n===ki)return t.UNSIGNED_INT_5_9_9_9_REV;if(n===Ii)return t.UNSIGNED_INT_10F_11F_11F_REV;if(n===Ti)return t.BYTE;if(n===Mi)return t.SHORT;if(n===Ci)return t.UNSIGNED_SHORT;if(n===Ai)return t.INT;if(n===Ri)return t.UNSIGNED_INT;if(n===Pi)return t.FLOAT;if(n===Ni)return t.HALF_FLOAT;if(1021===n)return t.ALPHA;if(1022===n)return t.RGB;if(n===Fi)return t.RGBA;if(n===Ui)return t.DEPTH_COMPONENT;if(n===zi)return t.DEPTH_STENCIL;if(1028===n)return t.RED;if(n===Bi)return t.RED_INTEGER;if(1030===n)return t.RG;if(n===Hi)return t.RG_INTEGER;if(n===Vi)return t.RGBA_INTEGER;if(n===Wi||n===Gi||n===ji||n===Xi)if(s===Tr){if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Wi)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Gi)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ji)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Xi)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=e.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Wi)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Gi)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ji)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Xi)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===qi||n===Ki||n===$i||n===Yi){if(r=e.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===qi)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Ki)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===$i)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Yi)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ji||n===Zi||n===Qi){if(r=e.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Ji||n===Zi)return s===Tr?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Qi)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===tr||n===er||n===nr||n===ir||n===rr||n===sr||n===or||n===ar||n===lr||n===cr||n===ur||n===hr||n===dr||n===fr){if(r=e.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===tr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===er)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===nr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===ir)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===rr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===sr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===or)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===ar)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===lr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===cr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===ur)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===hr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===dr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===fr)return s===Tr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===pr||n===gr||n===mr){if(r=e.get("EXT_texture_compression_bptc"),null===r)return null;if(n===pr)return s===Tr?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===gr)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===mr)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===_r||n===vr||n===yr||n===xr){if(r=e.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===_r)return r.COMPRESSED_RED_RGTC1_EXT;if(n===vr)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===yr)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===xr)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Oi?t.UNSIGNED_INT_24_8:void 0!==t[n]?t[n]:null}}}class Ju{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(null===this.texture){const n=new Ja(t.texture);t.depthNear===e.depthNear&&t.depthFar===e.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new Aa({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new ba(new tl(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Zu extends Ur{constructor(t,e){super();const n=this;let i=null,r=1,s=null,o="local-floor",a=1,l=null,c=null,u=null,h=null,d=null,f=null;const p="undefined"!=typeof XRWebGLBinding,g=new Ju,m={},_=e.getContextAttributes();let v=null,y=null;const x=[],b=[],S=new qr;let w=null;const E=new La;E.viewport=new ys;const T=new La;T.viewport=new ys;const M=[E,T],C=new yl;let A=null,R=null;function P(t){const e=b.indexOf(t.inputSource);if(-1===e)return;const n=x[e];void 0!==n&&(n.update(t.inputSource,t.frame,l||s),n.dispatchEvent({type:t.type,data:t.inputSource}))}function N(){i.removeEventListener("select",P),i.removeEventListener("selectstart",P),i.removeEventListener("selectend",P),i.removeEventListener("squeeze",P),i.removeEventListener("squeezestart",P),i.removeEventListener("squeezeend",P),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",D);for(let t=0;t<x.length;t++){const e=b[t];null!==e&&(b[t]=null,x[t].disconnect(e))}A=null,R=null,g.reset();for(const t in m)delete m[t];t.setRenderTarget(v),d=null,h=null,u=null,i=null,y=null,F.stop(),n.isPresenting=!1,t.setPixelRatio(w),t.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}function D(t){for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=b.indexOf(n);i>=0&&(b[i]=null,x[i].disconnect(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e];let i=b.indexOf(n);if(-1===i){for(let t=0;t<x.length;t++){if(t>=b.length){b.push(n),i=t;break}if(null===b[t]){b[t]=n,i=t;break}}if(-1===i)break}const r=x[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=x[t];return void 0===e&&(e=new Ba,x[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=x[t];return void 0===e&&(e=new Ba,x[t]=e),e.getGripSpace()},this.getHand=function(t){let e=x[t];return void 0===e&&(e=new Ba,x[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,n.isPresenting},this.setReferenceSpaceType=function(t){o=t,n.isPresenting},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return null===u&&p&&(u=new XRWebGLBinding(i,e)),u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){v=t.getRenderTarget(),i.addEventListener("select",P),i.addEventListener("selectstart",P),i.addEventListener("selectend",P),i.addEventListener("squeeze",P),i.addEventListener("squeezestart",P),i.addEventListener("squeezeend",P),i.addEventListener("end",N),i.addEventListener("inputsourceschange",D),!0!==_.xrCompatible&&await e.makeXRCompatible(),w=t.getPixelRatio(),t.getSize(S);if(p&&"createProjectionLayer"in XRWebGLBinding.prototype){let n=null,s=null,o=null;_.depth&&(o=_.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,n=_.stencil?zi:Ui,s=_.stencil?Oi:Ri);const a={colorFormat:e.RGBA8,depthFormat:o,scaleFactor:r};u=this.getBinding(),h=u.createProjectionLayer(a),i.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),y=new bs(h.textureWidth,h.textureHeight,{format:Fi,type:Ei,depthTexture:new Ya(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:_.stencil,colorSpace:t.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}else{const n={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:d}),t.setPixelRatio(1),t.setSize(d.framebufferWidth,d.framebufferHeight,!1),y=new bs(d.framebufferWidth,d.framebufferHeight,{format:Fi,type:Ei,colorSpace:t.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}y.isXRRenderTarget=!0,this.setFoveation(a),l=null,s=await i.requestReferenceSpace(o),F.setContext(i),F.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};const L=new $r,O=new $r;function k(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;let e=t.near,n=t.far;null!==g.texture&&(g.depthNear>0&&(e=g.depthNear),g.depthFar>0&&(n=g.depthFar)),C.near=T.near=E.near=e,C.far=T.far=E.far=n,A===C.near&&R===C.far||(i.updateRenderState({depthNear:C.near,depthFar:C.far}),A=C.near,R=C.far),C.layers.mask=6|t.layers.mask,E.layers.mask=3&C.layers.mask,T.layers.mask=5&C.layers.mask;const r=t.parent,s=C.cameras;k(C,r);for(let i=0;i<s.length;i++)k(s[i],r);2===s.length?function(t,e,n){L.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const i=L.distanceTo(O),r=e.projectionMatrix.elements,s=n.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=o*u,f=o*h,p=i/(-u+h),g=p*-u;if(e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(g),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),-1===r[10])t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const e=o+p,n=a+p,r=d-g,s=f+(i-g),u=l*a/n*e,h=c*a/n*e;t.projectionMatrix.makePerspective(r,s,u,h,e,n),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}(C,E,T):C.projectionMatrix.copy(E.projectionMatrix),function(t,e,n){null===n?t.matrix.copy(e.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld));t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*Hr*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,C,r)},this.getCamera=function(){return C},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(t){a=t,null!==h&&(h.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(C)},this.getCameraTexture=function(t){return m[t]};let I=null;const F=new bl;F.setAnimationLoop(function(e,r){if(c=r.getViewerPose(l||s),f=r,null!==c){const e=c.views;null!==d&&(t.setRenderTargetFramebuffer(y,d.framebuffer),t.setRenderTarget(y));let r=!1;e.length!==C.cameras.length&&(C.cameras.length=0,r=!0);for(let n=0;n<e.length;n++){const i=e[n];let s=null;if(null!==d)s=d.getViewport(i);else{const e=u.getViewSubImage(h,i);s=e.viewport,0===n&&(t.setRenderTargetTextures(y,e.colorTexture,e.depthStencilTexture),t.setRenderTarget(y))}let o=M[n];void 0===o&&(o=new La,o.layers.enable(n),o.viewport=new ys,M[n]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(s.x,s.y,s.width,s.height),0===n&&(C.matrix.copy(o.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),!0===r&&C.cameras.push(o)}const s=i.enabledFeatures;if(s&&s.includes("depth-sensing")&&"gpu-optimized"==i.depthUsage&&p){u=n.getBinding();const t=u.getDepthInformation(e[0]);t&&t.isValid&&t.texture&&g.init(t,i.renderState)}if(s&&s.includes("camera-access")&&p){t.state.unbindTexture(),u=n.getBinding();for(let t=0;t<e.length;t++){const n=e[t].camera;if(n){let t=m[n];t||(t=new Ja,m[n]=t);const e=u.getCameraImage(n);t.sourceTexture=e}}}}for(let t=0;t<x.length;t++){const e=b[t],n=x[t];null!==e&&void 0!==n&&n.update(e,r,l||s)}I&&I(e,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null}),this.setAnimationLoop=function(t){I=t},this.dispose=function(){}}}const Qu=new ao,th=new Js;function eh(t,e){function n(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function i(t,i){t.opacity.value=i.opacity,i.color&&t.diffuse.value.copy(i.color),i.emissive&&t.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(t.map.value=i.map,n(i.map,t.mapTransform)),i.alphaMap&&(t.alphaMap.value=i.alphaMap,n(i.alphaMap,t.alphaMapTransform)),i.bumpMap&&(t.bumpMap.value=i.bumpMap,n(i.bumpMap,t.bumpMapTransform),t.bumpScale.value=i.bumpScale,1===i.side&&(t.bumpScale.value*=-1)),i.normalMap&&(t.normalMap.value=i.normalMap,n(i.normalMap,t.normalMapTransform),t.normalScale.value.copy(i.normalScale),1===i.side&&t.normalScale.value.negate()),i.displacementMap&&(t.displacementMap.value=i.displacementMap,n(i.displacementMap,t.displacementMapTransform),t.displacementScale.value=i.displacementScale,t.displacementBias.value=i.displacementBias),i.emissiveMap&&(t.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,t.emissiveMapTransform)),i.specularMap&&(t.specularMap.value=i.specularMap,n(i.specularMap,t.specularMapTransform)),i.alphaTest>0&&(t.alphaTest.value=i.alphaTest);const r=e.get(i),s=r.envMap,o=r.envMapRotation;s&&(t.envMap.value=s,Qu.copy(o),Qu.x*=-1,Qu.y*=-1,Qu.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(Qu.y*=-1,Qu.z*=-1),t.envMapRotation.value.setFromMatrix4(th.makeRotationFromEuler(Qu)),t.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,t.reflectivity.value=i.reflectivity,t.ior.value=i.ior,t.refractionRatio.value=i.refractionRatio),i.lightMap&&(t.lightMap.value=i.lightMap,t.lightMapIntensity.value=i.lightMapIntensity,n(i.lightMap,t.lightMapTransform)),i.aoMap&&(t.aoMap.value=i.aoMap,t.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,n){n.color.getRGB(e.fogColor.value,Ma(t)),n.isFog?(e.fogNear.value=n.near,e.fogFar.value=n.far):n.isFogExp2&&(e.fogDensity.value=n.density)},refreshMaterialUniforms:function(t,r,s,o,a){r.isMeshBasicMaterial||r.isMeshLambertMaterial?i(t,r):r.isMeshToonMaterial?(i(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,r)):r.isMeshPhongMaterial?(i(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,r)):r.isMeshStandardMaterial?(i(t,r),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,n(e.metalnessMap,t.metalnessMapTransform));t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,n(e.roughnessMap,t.roughnessMapTransform));e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,r),r.isMeshPhysicalMaterial&&function(t,e,i){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,n(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,n(e.sheenRoughnessMap,t.sheenRoughnessMapTransform)));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,n(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,n(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,n(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),1===e.side&&t.clearcoatNormalScale.value.negate()));e.dispersion>0&&(t.dispersion.value=e.dispersion);e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,n(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,n(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform)));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,n(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,n(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,n(e.anisotropyMap,t.anisotropyMapTransform)));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,n(e.specularColorMap,t.specularColorMapTransform));e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,n(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,r,a)):r.isMeshMatcapMaterial?(i(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,r)):r.isMeshDepthMaterial?i(t,r):r.isMeshDistanceMaterial?(i(t,r),function(t,n){const i=e.get(n).light;t.referencePosition.value.setFromMatrixPosition(i.matrixWorld),t.nearDistance.value=i.shadow.camera.near,t.farDistance.value=i.shadow.camera.far}(t,r)):r.isMeshNormalMaterial?i(t,r):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform))}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,i,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*i,t.scale.value=.5*r,e.map&&(t.map.value=e.map,n(e.map,t.uvTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r,s,o):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,n(e.map,t.mapTransform));e.alphaMap&&(t.alphaMap.value=e.alphaMap,n(e.alphaMap,t.alphaMapTransform));e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function nh(t,e,n,i){let r={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(t,e,n,i){const r=t.value,s=e+"_"+n;if(void 0===i[s])return i[s]="number"==typeof r||"boolean"==typeof r?r:r.clone(),!0;{const t=i[s];if("number"==typeof r||"boolean"==typeof r){if(t!==r)return i[s]=r,!0}else if(!1===t.equals(r))return t.copy(r),!0}return!1}function c(t){const e={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture,e}function u(e){const n=e.target;n.removeEventListener("dispose",u);const i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),t.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(t,e){const n=e.program;i.uniformBlockBinding(t,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(t){const e=t.uniforms;let n=0;const i=16;for(let s=0,o=e.length;s<o;s++){const t=Array.isArray(e[s])?e[s]:[e[s]];for(let e=0,r=t.length;e<r;e++){const r=t[e],s=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=s.length;t<e;t++){const e=c(s[t]),o=n%i,a=o%e.boundary,l=o+a;n+=a,0!==l&&i-l<e.storage&&(n+=i-l),r.__data=new Float32Array(e.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=n,n+=e.storage}}}const r=n%i;r>0&&(n+=i-r);t.__size=n,t.__cache={}}(n),d=function(e){const n=function(){for(let t=0;t<a;t++)if(-1===o.indexOf(t))return o.push(t),t;return 0}();e.__bindingPointIndex=n;const i=t.createBuffer(),r=e.__size,s=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,r,s),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const f=h.program;i.updateUBOMapping(n,f);const p=e.render.frame;s[n.id]!==p&&(!function(e){const n=r[e.id],i=e.uniforms,s=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,n);for(let r=0,o=i.length;r<o;r++){const e=Array.isArray(i[r])?i[r]:[i[r]];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!0===l(i,r,n,s)){const e=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const o=n[s],a=c(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,t.bufferSubData(t.UNIFORM_BUFFER,e+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,i.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(n),s[n.id]=p)},dispose:function(){for(const e in r)t.deleteBuffer(r[e]);o=[],r={},s={}}}}class ih{constructor(t={}){const{canvas:e=ns(),context:n=null,depth:i=!0,stencil:r=!1,alpha:s=!1,antialias:o=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1,reversedDepthBuffer:h=!1}=t;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=s;const f=new Uint32Array(4),p=new Int32Array(4);let g=null,m=null;const _=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const y=this;let x=!1;this._outputColorSpace=Sr;let b=0,S=0,w=null,E=-1,T=null;const M=new ys,C=new ys;let A=null;const R=new Go(0);let P=0,N=e.width,D=e.height,L=1,O=null,k=null;const I=new ys(0,0,N,D),F=new ys(0,0,N,D);let U=!1;const z=new $a;let B=!1,H=!1;const V=new Js,W=new $r,G=new ys,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function q(){return null===w?L:1}let K,$,Y,J,Z,Q,tt,et,nt,it,rt,st,ot,at,lt,ct,ut,ht,dt,ft,pt,gt,mt,_t,vt=n;function yt(t,n){return e.getContext(t,n)}try{const t={alpha:!0,depth:i,stencil:r,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${kn}`),e.addEventListener("webglcontextlost",St,!1),e.addEventListener("webglcontextrestored",wt,!1),e.addEventListener("webglcontextcreationerror",Et,!1),null===vt){const e="webgl2";if(vt=yt(e,t),null===vt)throw yt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Vt){throw Vt}function xt(){K=new tc(vt),K.init(),gt=new Yu(vt,K),$=new Dl(vt,K,t,gt),Y=new Ku(vt,K),$.reversedDepthBuffer&&h&&Y.buffers.depth.setReversed(!0),J=new ic(vt),Z=new ku,Q=new $u(vt,K,Y,Z,$,gt,J),tt=new Ol(y),et=new Ql(y),nt=new Sl(vt),mt=new Pl(vt,nt),it=new ec(vt,nt,J,mt),rt=new sc(vt,it,nt,J),dt=new rc(vt,$,Q),ct=new Ll(Z),st=new Ou(y,tt,et,K,$,mt,ct),ot=new eh(y,Z),at=new zu,lt=new ju(K),ht=new Rl(y,tt,et,Y,rt,d,a),ut=new Xu(y,rt,$),_t=new nh(vt,J,$,Y),ft=new Nl(vt,K,J),pt=new nc(vt,K,J),J.programs=st.programs,y.capabilities=$,y.extensions=K,y.properties=Z,y.renderLists=at,y.shadowMap=ut,y.state=Y,y.info=J}xt();const bt=new Zu(y,vt);function St(t){t.preventDefault(),x=!0}function wt(){x=!1;const t=J.autoReset,e=ut.enabled,n=ut.autoUpdate,i=ut.needsUpdate,r=ut.type;xt(),J.autoReset=t,ut.enabled=e,ut.autoUpdate=n,ut.needsUpdate=i,ut.type=r}function Et(t){}function Tt(t){const e=t.target;e.removeEventListener("dispose",Tt),function(t){(function(t){const e=Z.get(t).programs;void 0!==e&&(e.forEach(function(t){st.releaseProgram(t)}),t.isShaderMaterial&&st.releaseShaderCache(t))})(t),Z.remove(t)}(e)}function Mt(t,e,n){!0===t.transparent&&2===t.side&&!1===t.forceSinglePass?(t.side=1,t.needsUpdate=!0,It(t,e,n),t.side=0,t.needsUpdate=!0,It(t,e,n),t.side=2):It(t,e,n)}this.xr=bt,this.getContext=function(){return vt},this.getContextAttributes=function(){return vt.getContextAttributes()},this.forceContextLoss=function(){const t=K.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=K.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return L},this.setPixelRatio=function(t){void 0!==t&&(L=t,this.setSize(N,D,!1))},this.getSize=function(t){return t.set(N,D)},this.setSize=function(t,n,i=!0){bt.isPresenting||(N=t,D=n,e.width=Math.floor(t*L),e.height=Math.floor(n*L),!0===i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(N*L,D*L).floor()},this.setDrawingBufferSize=function(t,n,i){N=t,D=n,L=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(M)},this.getViewport=function(t){return t.copy(I)},this.setViewport=function(t,e,n,i){t.isVector4?I.set(t.x,t.y,t.z,t.w):I.set(t,e,n,i),Y.viewport(M.copy(I).multiplyScalar(L).round())},this.getScissor=function(t){return t.copy(F)},this.setScissor=function(t,e,n,i){t.isVector4?F.set(t.x,t.y,t.z,t.w):F.set(t,e,n,i),Y.scissor(C.copy(F).multiplyScalar(L).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(t){Y.setScissorTest(U=t)},this.setOpaqueSort=function(t){O=t},this.setTransparentSort=function(t){k=t},this.getClearColor=function(t){return t.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor(...arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha(...arguments)},this.clear=function(t=!0,e=!0,n=!0){let i=0;if(t){let t=!1;if(null!==w){const e=w.texture.format;t=e===Vi||e===Hi||e===Bi}if(t){const t=w.texture.type,e=t===Ei||t===Ri||t===Ci||t===Oi||t===Di||t===Li,n=ht.getClearColor(),i=ht.getClearAlpha(),r=n.r,s=n.g,o=n.b;e?(f[0]=r,f[1]=s,f[2]=o,f[3]=i,vt.clearBufferuiv(vt.COLOR,0,f)):(p[0]=r,p[1]=s,p[2]=o,p[3]=i,vt.clearBufferiv(vt.COLOR,0,p))}else i|=vt.COLOR_BUFFER_BIT}e&&(i|=vt.DEPTH_BUFFER_BIT),n&&(i|=vt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),vt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",St,!1),e.removeEventListener("webglcontextrestored",wt,!1),e.removeEventListener("webglcontextcreationerror",Et,!1),ht.dispose(),at.dispose(),lt.dispose(),Z.dispose(),tt.dispose(),et.dispose(),rt.dispose(),mt.dispose(),_t.dispose(),st.dispose(),bt.dispose(),bt.removeEventListener("sessionstart",At),bt.removeEventListener("sessionend",Rt),Pt.stop()},this.renderBufferDirect=function(t,e,n,i,r,s){null===e&&(e=j);const o=r.isMesh&&r.matrixWorld.determinant()<0,a=function(t,e,n,i,r){!0!==e.isScene&&(e=j);Q.resetTextureUnits();const s=e.fog,o=i.isMeshStandardMaterial?e.environment:null,a=null===w?y.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:wr,l=(i.isMeshStandardMaterial?et:tt).get(i.envMap||o),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!i.normalMap||i.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=0;i.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(p=y.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,_=void 0!==g?g.length:0,v=Z.get(i),x=m.state.lights;if(!0===B&&(!0===H||t!==T)){const e=t===T&&i.id===E;ct.setState(i,t,e)}let b=!1;i.version===v.__version?v.needsLights&&v.lightsStateVersion!==x.state.version||v.outputColorSpace!==a||r.isBatchedMesh&&!1===v.batching?b=!0:r.isBatchedMesh||!0!==v.batching?r.isBatchedMesh&&!0===v.batchingColor&&null===r.colorTexture||r.isBatchedMesh&&!1===v.batchingColor&&null!==r.colorTexture||r.isInstancedMesh&&!1===v.instancing?b=!0:r.isInstancedMesh||!0!==v.instancing?r.isSkinnedMesh&&!1===v.skinning?b=!0:r.isSkinnedMesh||!0!==v.skinning?r.isInstancedMesh&&!0===v.instancingColor&&null===r.instanceColor||r.isInstancedMesh&&!1===v.instancingColor&&null!==r.instanceColor||r.isInstancedMesh&&!0===v.instancingMorph&&null===r.morphTexture||r.isInstancedMesh&&!1===v.instancingMorph&&null!==r.morphTexture||v.envMap!==l||!0===i.fog&&v.fog!==s?b=!0:void 0===v.numClippingPlanes||v.numClippingPlanes===ct.numPlanes&&v.numIntersection===ct.numIntersection?(v.vertexAlphas!==c||v.vertexTangents!==u||v.morphTargets!==h||v.morphNormals!==d||v.morphColors!==f||v.toneMapping!==p||v.morphTargetsCount!==_)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,v.__version=i.version);let S=v.currentProgram;!0===b&&(S=It(i,e,r));let M=!1,C=!1,A=!1;const R=S.getUniforms(),P=v.uniforms;Y.useProgram(S.program)&&(M=!0,C=!0,A=!0);i.id!==E&&(E=i.id,C=!0);if(M||T!==t){Y.buffers.depth.getReversed()&&!0!==t.reversedDepth&&(t._reversedDepth=!0,t.updateProjectionMatrix()),R.setValue(vt,"projectionMatrix",t.projectionMatrix),R.setValue(vt,"viewMatrix",t.matrixWorldInverse);const e=R.map.cameraPosition;void 0!==e&&e.setValue(vt,W.setFromMatrixPosition(t.matrixWorld)),$.logarithmicDepthBuffer&&R.setValue(vt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&R.setValue(vt,"isOrthographic",!0===t.isOrthographicCamera),T!==t&&(T=t,C=!0,A=!0)}if(r.isSkinnedMesh){R.setOptional(vt,r,"bindMatrix"),R.setOptional(vt,r,"bindMatrixInverse");const t=r.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),R.setValue(vt,"boneTexture",t.boneTexture,Q))}r.isBatchedMesh&&(R.setOptional(vt,r,"batchingTexture"),R.setValue(vt,"batchingTexture",r._matricesTexture,Q),R.setOptional(vt,r,"batchingIdTexture"),R.setValue(vt,"batchingIdTexture",r._indirectTexture,Q),R.setOptional(vt,r,"batchingColorTexture"),null!==r._colorsTexture&&R.setValue(vt,"batchingColorTexture",r._colorsTexture,Q));const N=n.morphAttributes;void 0===N.position&&void 0===N.normal&&void 0===N.color||dt.update(r,n,S);(C||v.receiveShadow!==r.receiveShadow)&&(v.receiveShadow=r.receiveShadow,R.setValue(vt,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(P.envMap.value=l,P.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);i.isMeshStandardMaterial&&null===i.envMap&&null!==e.environment&&(P.envMapIntensity.value=e.environmentIntensity);C&&(R.setValue(vt,"toneMappingExposure",y.toneMappingExposure),v.needsLights&&(k=A,(O=P).ambientLightColor.needsUpdate=k,O.lightProbe.needsUpdate=k,O.directionalLights.needsUpdate=k,O.directionalLightShadows.needsUpdate=k,O.pointLights.needsUpdate=k,O.pointLightShadows.needsUpdate=k,O.spotLights.needsUpdate=k,O.spotLightShadows.needsUpdate=k,O.rectAreaLights.needsUpdate=k,O.hemisphereLights.needsUpdate=k),s&&!0===i.fog&&ot.refreshFogUniforms(P,s),ot.refreshMaterialUniforms(P,i,L,D,m.state.transmissionRenderTarget[t.id]),uu.upload(vt,Ft(v),P,Q));var O,k;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(uu.upload(vt,Ft(v),P,Q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&R.setValue(vt,"center",r.center);if(R.setValue(vt,"modelViewMatrix",r.modelViewMatrix),R.setValue(vt,"normalMatrix",r.normalMatrix),R.setValue(vt,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const t=i.uniformsGroups;for(let e=0,n=t.length;e<n;e++){const n=t[e];_t.update(n,S),_t.bind(n,S)}}return S}(t,e,n,i,r);Y.setMaterial(i,o);let l=n.index,c=1;if(!0===i.wireframe){if(l=it.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==s&&(d=Math.max(d,s.start*c),f=Math.min(f,(s.start+s.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):null!=h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let g;mt.setup(r,i,a,n,l);let _=ft;if(null!==l&&(g=nt.get(l),_=pt,_.setIndex(g)),r.isMesh)!0===i.wireframe?(Y.setLineWidth(i.wireframeLinewidth*q()),_.setMode(vt.LINES)):_.setMode(vt.TRIANGLES);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),Y.setLineWidth(t*q()),r.isLineSegments?_.setMode(vt.LINES):r.isLineLoop?_.setMode(vt.LINE_LOOP):_.setMode(vt.LINE_STRIP)}else r.isPoints?_.setMode(vt.POINTS):r.isSprite&&_.setMode(vt.TRIANGLES);if(r.isBatchedMesh)if(null!==r._multiDrawInstances)rs("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),_.renderMultiDrawInstances(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount,r._multiDrawInstances);else if(K.get("WEBGL_multi_draw"))_.renderMultiDraw(r._multiDrawStarts,r._multiDrawCounts,r._multiDrawCount);else{const t=r._multiDrawStarts,e=r._multiDrawCounts,n=r._multiDrawCount,s=l?nt.get(l).bytesPerElement:1,o=Z.get(i).currentProgram.getUniforms();for(let i=0;i<n;i++)o.setValue(vt,"_gl_DrawID",i),_.render(t[i]/s,e[i])}else if(r.isInstancedMesh)_.renderInstances(d,p,r.count);else if(n.isInstancedBufferGeometry){const t=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,e=Math.min(n.instanceCount,t);_.renderInstances(d,p,e)}else _.render(d,p)},this.compile=function(t,e,n=null){null===n&&(n=t),m=lt.get(n),m.init(e),v.push(m),n.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))}),t!==n&&t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(m.pushLight(t),t.castShadow&&m.pushShadow(t))}),m.setupLights();const i=new Set;return t.traverse(function(t){if(!(t.isMesh||t.isPoints||t.isLine||t.isSprite))return;const e=t.material;if(e)if(Array.isArray(e))for(let r=0;r<e.length;r++){const s=e[r];Mt(s,n,t),i.add(s)}else Mt(e,n,t),i.add(e)}),m=v.pop(),i},this.compileAsync=function(t,e,n=null){const i=this.compile(t,e,n);return new Promise(e=>{function n(){i.forEach(function(t){Z.get(t).currentProgram.isReady()&&i.delete(t)}),0!==i.size?setTimeout(n,10):e(t)}null!==K.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let Ct=null;function At(){Pt.stop()}function Rt(){Pt.start()}const Pt=new bl;function Nt(t,e,n,i){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||z.intersectsSprite(t)){i&&G.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);const e=rt.update(t),r=t.material;r.visible&&g.push(t,e,r,n,G.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||z.intersectsObject(t))){const e=rt.update(t),r=t.material;if(i&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)),G.applyMatrix4(t.matrixWorld).applyMatrix4(V)),Array.isArray(r)){const i=e.groups;for(let s=0,o=i.length;s<o;s++){const o=i[s],a=r[o.materialIndex];a&&a.visible&&g.push(t,e,a,n,G.z,o)}}else r.visible&&g.push(t,e,r,n,G.z,null)}const r=t.children;for(let s=0,o=r.length;s<o;s++)Nt(r[s],e,n,i)}function Dt(t,e,n,i){const r=t.opaque,s=t.transmissive,o=t.transparent;m.setupLightsView(n),!0===B&&ct.setGlobalState(y.clippingPlanes,n),i&&Y.viewport(M.copy(i)),r.length>0&&Ot(r,e,n),s.length>0&&Ot(s,e,n),o.length>0&&Ot(o,e,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Lt(t,e,n,i){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[i.id]&&(m.state.transmissionRenderTarget[i.id]=new bs(1,1,{generateMipmaps:!0,type:K.has("EXT_color_buffer_half_float")||K.has("EXT_color_buffer_float")?Ni:Ei,minFilter:wi,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ls.workingColorSpace}));const s=m.state.transmissionRenderTarget[i.id],o=i.viewport||M;s.setSize(o.z*y.transmissionResolutionScale,o.w*y.transmissionResolutionScale);const a=y.getRenderTarget(),l=y.getActiveCubeFace(),c=y.getActiveMipmapLevel();y.setRenderTarget(s),y.getClearColor(R),P=y.getClearAlpha(),P<1&&y.setClearColor(16777215,.5),y.clear(),X&&ht.render(n);const u=y.toneMapping;y.toneMapping=0;const h=i.viewport;if(void 0!==i.viewport&&(i.viewport=void 0),m.setupLightsView(i),!0===B&&ct.setGlobalState(y.clippingPlanes,i),Ot(t,n,i),Q.updateMultisampleRenderTarget(s),Q.updateRenderTargetMipmap(s),!1===K.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let r=0,s=e.length;r<s;r++){const s=e[r],o=s.object,a=s.geometry,l=s.material,c=s.group;if(2===l.side&&o.layers.test(i.layers)){const e=l.side;l.side=1,l.needsUpdate=!0,kt(o,n,i,a,l,c),l.side=e,l.needsUpdate=!0,t=!0}}!0===t&&(Q.updateMultisampleRenderTarget(s),Q.updateRenderTargetMipmap(s))}y.setRenderTarget(a,l,c),y.setClearColor(R,P),void 0!==h&&(i.viewport=h),y.toneMapping=u}function Ot(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,s=t.length;r<s;r++){const s=t[r],o=s.object,a=s.geometry,l=s.group;let c=s.material;!0===c.allowOverride&&null!==i&&(c=i),o.layers.test(n.layers)&&kt(o,e,n,a,c,l)}}function kt(t,e,n,i,r,s){t.onBeforeRender(y,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(y,e,n,i,t,s),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,s),r.side=0,r.needsUpdate=!0,y.renderBufferDirect(n,e,i,r,t,s),r.side=2):y.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(y,e,n,i,r,s)}function It(t,e,n){!0!==e.isScene&&(e=j);const i=Z.get(t),r=m.state.lights,s=m.state.shadowsArray,o=r.state.version,a=st.getParameters(t,r.state,s,e,n),l=st.getProgramCacheKey(a);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?et:tt).get(t.envMap||i.environment),i.envMapRotation=null!==i.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===c&&(t.addEventListener("dispose",Tt),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===o)return Ut(t,a),u}else a.uniforms=st.getUniforms(t),t.onBeforeCompile(a,y),u=st.acquireProgram(a,l),c.set(l,u),i.uniforms=a.uniforms;const h=i.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(h.clippingPlanes=ct.uniform),Ut(t,a),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix),i.currentProgram=u,i.uniformsList=null,u}function Ft(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=uu.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function Ut(t,e){const n=Z.get(t);n.outputColorSpace=e.outputColorSpace,n.batching=e.batching,n.batchingColor=e.batchingColor,n.instancing=e.instancing,n.instancingColor=e.instancingColor,n.instancingMorph=e.instancingMorph,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Pt.setAnimationLoop(function(t){Ct&&Ct(t)}),"undefined"!=typeof self&&Pt.setContext(self),this.setAnimationLoop=function(t){Ct=t,bt.setAnimationLoop(t),null===t?Pt.stop():Pt.start()},bt.addEventListener("sessionstart",At),bt.addEventListener("sessionend",Rt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return;if(!0===x)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===bt.enabled&&!0===bt.isPresenting&&(!0===bt.cameraAutoUpdate&&bt.updateCamera(e),e=bt.getCamera()),!0===t.isScene&&t.onBeforeRender(y,t,e,w),m=lt.get(t,v.length),m.init(e),v.push(m),V.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),z.setFromProjectionMatrix(V,Ir,e.reversedDepth),H=this.localClippingEnabled,B=ct.init(this.clippingPlanes,H),g=at.get(t,_.length),g.init(),_.push(g),!0===bt.enabled&&!0===bt.isPresenting){const t=y.xr.getDepthSensingMesh();null!==t&&Nt(t,e,-1/0,y.sortObjects)}Nt(t,e,0,y.sortObjects),g.finish(),!0===y.sortObjects&&g.sort(O,k),X=!1===bt.enabled||!1===bt.isPresenting||!1===bt.hasDepthSensing(),X&&ht.addToRenderList(g,t),this.info.render.frame++,!0===B&&ct.beginShadows();const n=m.state.shadowsArray;ut.render(n,t,e),!0===B&&ct.endShadows(),!0===this.info.autoReset&&this.info.reset();const i=g.opaque,r=g.transmissive;if(m.setupLights(),e.isArrayCamera){const n=e.cameras;if(r.length>0)for(let e=0,s=n.length;e<s;e++){Lt(i,r,t,n[e])}X&&ht.render(t);for(let e=0,i=n.length;e<i;e++){const i=n[e];Dt(g,t,i,i.viewport)}}else r.length>0&&Lt(i,r,t,e),X&&ht.render(t),Dt(g,t,e);null!==w&&0===S&&(Q.updateMultisampleRenderTarget(w),Q.updateRenderTargetMipmap(w)),!0===t.isScene&&t.onAfterRender(y,t,e),mt.resetDefaultState(),E=-1,T=null,v.pop(),v.length>0?(m=v[v.length-1],!0===B&&ct.setGlobalState(y.clippingPlanes,m.state.camera)):m=null,_.pop(),g=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(t,e,n){const i=Z.get(t);i.__autoAllocateDepthBuffer=!1===t.resolveDepthBuffer,!1===i.__autoAllocateDepthBuffer&&(i.__useRenderToTexture=!1),Z.get(t.texture).__webglTexture=e,Z.get(t.depthTexture).__webglTexture=i.__autoAllocateDepthBuffer?void 0:n,i.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(t,e){const n=Z.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e};const zt=vt.createFramebuffer();this.setRenderTarget=function(t,e=0,n=0){w=t,b=e,S=n;let i=!0,r=null,s=!1,o=!1;if(t){const a=Z.get(t);if(void 0!==a.__useDefaultFramebuffer)Y.bindFramebuffer(vt.FRAMEBUFFER,null),i=!1;else if(void 0===a.__webglFramebuffer)Q.setupRenderTarget(t);else if(a.__hasExternalTextures)Q.rebindTextures(t,Z.get(t.texture).__webglTexture,Z.get(t.depthTexture).__webglTexture);else if(t.depthBuffer){const e=t.depthTexture;if(a.__boundDepthTexture!==e){if(null!==e&&Z.has(e)&&(t.width!==e.image.width||t.height!==e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Q.setupDepthRenderbuffer(t)}}const l=t.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=Z.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=Array.isArray(c[e])?c[e][n]:c[e],s=!0):r=t.samples>0&&!1===Q.useMultisampledRTT(t)?Z.get(t).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,M.copy(t.viewport),C.copy(t.scissor),A=t.scissorTest}else M.copy(I).multiplyScalar(L).floor(),C.copy(F).multiplyScalar(L).floor(),A=U;0!==n&&(r=zt);if(Y.bindFramebuffer(vt.FRAMEBUFFER,r)&&i&&Y.drawBuffers(t,r),Y.viewport(M),Y.scissor(C),Y.setScissorTest(A),s){const i=Z.get(t.texture);vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_CUBE_MAP_POSITIVE_X+e,i.__webglTexture,n)}else if(o){const i=e;for(let e=0;e<t.textures.length;e++){const r=Z.get(t.textures[e]);vt.framebufferTextureLayer(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0+e,r.__webglTexture,n,i)}}else if(null!==t&&0!==n){const e=Z.get(t.texture);vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,e.__webglTexture,n)}E=-1},this.readRenderTargetPixels=function(t,e,n,i,r,s,o,a=0){if(!t||!t.isWebGLRenderTarget)return;let l=Z.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){Y.bindFramebuffer(vt.FRAMEBUFFER,l);try{const o=t.textures[a],l=o.format,c=o.type;if(!$.textureFormatReadable(l))return;if(!$.textureTypeReadable(c))return;e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&(t.textures.length>1&&vt.readBuffer(vt.COLOR_ATTACHMENT0+a),vt.readPixels(e,n,i,r,gt.convert(l),gt.convert(c),s))}finally{const t=null!==w?Z.get(w).__webglFramebuffer:null;Y.bindFramebuffer(vt.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,e,n,i,r,s,o,a=0){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let l=Z.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){if(e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r){Y.bindFramebuffer(vt.FRAMEBUFFER,l);const o=t.textures[a],c=o.format,u=o.type;if(!$.textureFormatReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!$.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const h=vt.createBuffer();vt.bindBuffer(vt.PIXEL_PACK_BUFFER,h),vt.bufferData(vt.PIXEL_PACK_BUFFER,s.byteLength,vt.STREAM_READ),t.textures.length>1&&vt.readBuffer(vt.COLOR_ATTACHMENT0+a),vt.readPixels(e,n,i,r,gt.convert(c),gt.convert(u),0);const d=null!==w?Z.get(w).__webglFramebuffer:null;Y.bindFramebuffer(vt.FRAMEBUFFER,d);const f=vt.fenceSync(vt.SYNC_GPU_COMMANDS_COMPLETE,0);return vt.flush(),await function(t,e,n){return new Promise(function(i,r){setTimeout(function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}},n)})}(vt,f,4),vt.bindBuffer(vt.PIXEL_PACK_BUFFER,h),vt.getBufferSubData(vt.PIXEL_PACK_BUFFER,0,s),vt.deleteBuffer(h),vt.deleteSync(f),s}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(t,e=null,n=0){const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i),o=null!==e?e.x:0,a=null!==e?e.y:0;Q.setTexture2D(t,0),vt.copyTexSubImage2D(vt.TEXTURE_2D,n,0,0,o,a,r,s),Y.unbindTexture()};const Bt=vt.createFramebuffer(),Ht=vt.createFramebuffer();this.copyTextureToTexture=function(t,e,n=null,i=null,r=0,s=null){let o,a,l,c,u,h,d,f,p;null===s&&(0!==r?(rs("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),s=r,r=0):s=0);const g=t.isCompressedTexture?t.mipmaps[s]:t.image;if(null!==n)o=n.max.x-n.min.x,a=n.max.y-n.min.y,l=n.isBox3?n.max.z-n.min.z:1,c=n.min.x,u=n.min.y,h=n.isBox3?n.min.z:0;else{const e=Math.pow(2,-r);o=Math.floor(g.width*e),a=Math.floor(g.height*e),l=t.isDataArrayTexture?g.depth:t.isData3DTexture?Math.floor(g.depth*e):1,c=0,u=0,h=0}null!==i?(d=i.x,f=i.y,p=i.z):(d=0,f=0,p=0);const m=gt.convert(e.format),_=gt.convert(e.type);let v;e.isData3DTexture?(Q.setTexture3D(e,0),v=vt.TEXTURE_3D):e.isDataArrayTexture||e.isCompressedArrayTexture?(Q.setTexture2DArray(e,0),v=vt.TEXTURE_2D_ARRAY):(Q.setTexture2D(e,0),v=vt.TEXTURE_2D),vt.pixelStorei(vt.UNPACK_FLIP_Y_WEBGL,e.flipY),vt.pixelStorei(vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),vt.pixelStorei(vt.UNPACK_ALIGNMENT,e.unpackAlignment);const y=vt.getParameter(vt.UNPACK_ROW_LENGTH),x=vt.getParameter(vt.UNPACK_IMAGE_HEIGHT),b=vt.getParameter(vt.UNPACK_SKIP_PIXELS),S=vt.getParameter(vt.UNPACK_SKIP_ROWS),w=vt.getParameter(vt.UNPACK_SKIP_IMAGES);vt.pixelStorei(vt.UNPACK_ROW_LENGTH,g.width),vt.pixelStorei(vt.UNPACK_IMAGE_HEIGHT,g.height),vt.pixelStorei(vt.UNPACK_SKIP_PIXELS,c),vt.pixelStorei(vt.UNPACK_SKIP_ROWS,u),vt.pixelStorei(vt.UNPACK_SKIP_IMAGES,h);const E=t.isDataArrayTexture||t.isData3DTexture,T=e.isDataArrayTexture||e.isData3DTexture;if(t.isDepthTexture){const n=Z.get(t),i=Z.get(e),g=Z.get(n.__renderTarget),m=Z.get(i.__renderTarget);Y.bindFramebuffer(vt.READ_FRAMEBUFFER,g.__webglFramebuffer),Y.bindFramebuffer(vt.DRAW_FRAMEBUFFER,m.__webglFramebuffer);for(let _=0;_<l;_++)E&&(vt.framebufferTextureLayer(vt.READ_FRAMEBUFFER,vt.COLOR_ATTACHMENT0,Z.get(t).__webglTexture,r,h+_),vt.framebufferTextureLayer(vt.DRAW_FRAMEBUFFER,vt.COLOR_ATTACHMENT0,Z.get(e).__webglTexture,s,p+_)),vt.blitFramebuffer(c,u,o,a,d,f,o,a,vt.DEPTH_BUFFER_BIT,vt.NEAREST);Y.bindFramebuffer(vt.READ_FRAMEBUFFER,null),Y.bindFramebuffer(vt.DRAW_FRAMEBUFFER,null)}else if(0!==r||t.isRenderTargetTexture||Z.has(t)){const n=Z.get(t),i=Z.get(e);Y.bindFramebuffer(vt.READ_FRAMEBUFFER,Bt),Y.bindFramebuffer(vt.DRAW_FRAMEBUFFER,Ht);for(let t=0;t<l;t++)E?vt.framebufferTextureLayer(vt.READ_FRAMEBUFFER,vt.COLOR_ATTACHMENT0,n.__webglTexture,r,h+t):vt.framebufferTexture2D(vt.READ_FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,n.__webglTexture,r),T?vt.framebufferTextureLayer(vt.DRAW_FRAMEBUFFER,vt.COLOR_ATTACHMENT0,i.__webglTexture,s,p+t):vt.framebufferTexture2D(vt.DRAW_FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,i.__webglTexture,s),0!==r?vt.blitFramebuffer(c,u,o,a,d,f,o,a,vt.COLOR_BUFFER_BIT,vt.NEAREST):T?vt.copyTexSubImage3D(v,s,d,f,p+t,c,u,o,a):vt.copyTexSubImage2D(v,s,d,f,c,u,o,a);Y.bindFramebuffer(vt.READ_FRAMEBUFFER,null),Y.bindFramebuffer(vt.DRAW_FRAMEBUFFER,null)}else T?t.isDataTexture||t.isData3DTexture?vt.texSubImage3D(v,s,d,f,p,o,a,l,m,_,g.data):e.isCompressedArrayTexture?vt.compressedTexSubImage3D(v,s,d,f,p,o,a,l,m,g.data):vt.texSubImage3D(v,s,d,f,p,o,a,l,m,_,g):t.isDataTexture?vt.texSubImage2D(vt.TEXTURE_2D,s,d,f,o,a,m,_,g.data):t.isCompressedTexture?vt.compressedTexSubImage2D(vt.TEXTURE_2D,s,d,f,g.width,g.height,m,g.data):vt.texSubImage2D(vt.TEXTURE_2D,s,d,f,o,a,m,_,g);vt.pixelStorei(vt.UNPACK_ROW_LENGTH,y),vt.pixelStorei(vt.UNPACK_IMAGE_HEIGHT,x),vt.pixelStorei(vt.UNPACK_SKIP_PIXELS,b),vt.pixelStorei(vt.UNPACK_SKIP_ROWS,S),vt.pixelStorei(vt.UNPACK_SKIP_IMAGES,w),0===s&&e.generateMipmaps&&vt.generateMipmap(v),Y.unbindTexture()},this.initRenderTarget=function(t){void 0===Z.get(t).__webglFramebuffer&&Q.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?Q.setTextureCube(t,0):t.isData3DTexture?Q.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?Q.setTexture2DArray(t,0):Q.setTexture2D(t,0),Y.unbindTexture()},this.resetState=function(){b=0,S=0,w=null,Y.reset(),mt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ir}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=ls._getDrawingBufferColorSpace(t),e.unpackColorSpace=ls._getUnpackColorSpace()}}function rh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sh(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var oh,ah,lh,ch,uh,hh,dh,fh,ph,gh,mh,_h,vh,yh,xh,bh,Sh,wh,Eh,Th,Mh,Ch,Ah,Rh,Ph,Nh,Dh,Lh,Oh,kh,Ih,Fh,Uh={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},zh={duration:.5,overwrite:!1,delay:0},Bh=1e8,Hh=1e-8,Vh=2*Math.PI,Wh=Vh/4,Gh=0,jh=Math.sqrt,Xh=Math.cos,qh=Math.sin,Kh=function(t){return"string"==typeof t},$h=function(t){return"function"==typeof t},Yh=function(t){return"number"==typeof t},Jh=function(t){return void 0===t},Zh=function(t){return"object"==typeof t},Qh=function(t){return!1!==t},td=function(){return"undefined"!=typeof window},ed=function(t){return $h(t)||Kh(t)},nd="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},id=Array.isArray,rd=/(?:-?\.?\d|\.)+/gi,sd=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,od=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ad=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ld=/[+-]=-?[.\d]+/,cd=/[^,'"\[\]\s]+/gi,ud=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,hd={},dd={},fd=function(t){return(dd=Wd(t,hd))&&Gp},pd=function(t,e){},gd=function(t,e){return!e&&void 0},md=function(t,e){return t&&(hd[t]=e)&&dd&&(dd[t]=e)||hd},_d=function(){return 0},vd={suppressEvents:!0,isStart:!0,kill:!1},yd={suppressEvents:!0,kill:!1},xd={suppressEvents:!0},bd={},Sd=[],wd={},Ed={},Td={},Md=30,Cd=[],Ad="",Rd=function(t){var e,n,i=t[0];if(Zh(i)||$h(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=Cd.length;n--&&!Cd[n].targetTest(i););e=Cd[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new rp(t[n],e)))||t.splice(n,1);return t},Pd=function(t){return t._gsap||Rd(bf(t))[0]._gsap},Nd=function(t,e,n){return(n=t[e])&&$h(n)?t[e]():Jh(n)&&t.getAttribute&&t.getAttribute(e)||n},Dd=function(t,e){return(t=t.split(",")).forEach(e)||t},Ld=function(t){return Math.round(1e5*t)/1e5||0},Od=function(t){return Math.round(1e7*t)/1e7||0},kd=function(t,e){var n=e.charAt(0),i=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+i:"-"===n?t-i:"*"===n?t*i:t/i},Id=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Fd=function(){var t,e,n=Sd.length,i=Sd.slice(0);for(wd={},Sd.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Ud=function(t){return!!(t._initted||t._startAt||t.add)},zd=function(t,e,n,i){Sd.length&&!ah&&Fd(),t.render(e,n,i||!!(ah&&e<0&&Ud(t))),Sd.length&&!ah&&Fd()},Bd=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(cd).length<2?e:Kh(t)?t.trim():t},Hd=function(t){return t},Vd=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Wd=function(t,e){for(var n in e)t[n]=e[n];return t},Gd=function t(e,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(e[i]=Zh(n[i])?t(e[i]||(e[i]={}),n[i]):n[i]);return e},jd=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},Xd=function(t){var e,n=t.parent||ch,i=t.keyframes?(e=id(t.keyframes),function(t,n){for(var i in n)i in t||"duration"===i&&e||"ease"===i||(t[i]=n[i])}):Vd;if(Qh(t.inherit))for(;n;)i(t,n.vars.defaults),n=n.parent||n._dp;return t},qd=function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var s,o=t[i];if(r)for(s=e[r];o&&o[r]>s;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t,e},Kd=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,s=e._next;r?r._next=s:t[n]===e&&(t[n]=s),s?s._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},$d=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Yd=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Jd=function(t,e,n,i){return t._startAt&&(ah?t._startAt.revert(yd):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,i))},Zd=function t(e){return!e||e._ts&&t(e.parent)},Qd=function(t){return t._repeat?tf(t._tTime,t=t.duration()+t._rDelay)*t:0},tf=function(t,e){var n=Math.floor(t=Od(t/e));return t&&n===t?n-1:n},ef=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},nf=function(t){return t._end=Od(t._start+(t._tDur/Math.abs(t._ts||t._rts||Hh)||0))},rf=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Od(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),nf(t),n._dirty||Yd(n,t)),t},sf=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=ef(t.rawTime(),e),(!e._dur||_f(0,e.totalDuration(),n)-e._tTime>Hh)&&e.render(n,!0)),Yd(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},of=function(t,e,n,i){return e.parent&&$d(e),e._start=Od((Yh(n)?n:n||t!==ch?pf(t,n,e):t._time)+e._delay),e._end=Od(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),qd(t,e,"_first","_last",t._sort?"_start":0),uf(e)||(t._recent=e),i||sf(t,e),t._ts<0&&rf(t,t._tTime),t},af=function(t,e){return hd.ScrollTrigger?hd.ScrollTrigger.create(e,t):void 0},lf=function(t,e,n,i,r){return dp(t,e,r),t._initted?!n&&t._pt&&!ah&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&ph!==jf.frame?(Sd.push(t),t._lazy=[r,i],1):void 0:1},cf=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},uf=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},hf=function(t,e,n,i){var r=t._repeat,s=Od(e)||0,o=t._tTime/t._tDur;return o&&!i&&(t._time*=s/t._dur),t._dur=s,t._tDur=r?r<0?1e10:Od(s*(r+1)+t._rDelay*r):s,o>0&&!i&&rf(t,t._tTime=t._tDur*o),t.parent&&nf(t),n||Yd(t.parent,t),t},df=function(t){return t instanceof op?Yd(t):hf(t,t._dur)},ff={_start:0,endTime:_d,totalDuration:_d},pf=function t(e,n,i){var r,s,o,a=e.labels,l=e._recent||ff,c=e.duration()>=Bh?l.endTime(!1):e._dur;return Kh(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(r<0?l:i).totalDuration()/100:1)):r<0?(n in a||(a[n]=c),a[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),o&&i&&(s=s/100*(id(i)?i[0]:i).totalDuration()),r>1?t(e,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},gf=function(t,e,n){var i,r,s=Yh(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=n,t){for(i=a,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=Qh(r.vars.inherit)&&r.parent;a.immediateRender=Qh(i.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new _p(e[0],a,e[o+1])},mf=function(t,e){return t||0===t?e(t):e},_f=function(t,e,n){return n<t?t:n>e?e:n},vf=function(t,e){return Kh(t)&&(e=ud.exec(t))?e[1]:""},yf=[].slice,xf=function(t,e){return t&&Zh(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Zh(t[0]))&&!t.nodeType&&t!==uh},bf=function(t,e,n){return lh&&!e&&lh.selector?lh.selector(t):!Kh(t)||n||!hh&&Xf()?id(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach(function(t){var i;return Kh(t)&&!e||xf(t,1)?(i=n).push.apply(i,bf(t)):n.push(t)})||n}(t,n):xf(t)?yf.call(t,0):t?[t]:[]:yf.call((e||dh).querySelectorAll(t),0)},Sf=function(t){return t=bf(t)[0]||gd()||{},function(e){var n=t.current||t.nativeElement||t;return bf(e,n.querySelectorAll?n:n===t?gd()||dh.createElement("div"):t)}},wf=function(t){return t.sort(function(){return.5-Math.random()})},Ef=function(t){if($h(t))return t;var e=Zh(t)?t:{each:t},n=Qf(e.ease),i=e.from||0,r=parseFloat(e.base)||0,s={},o=i>0&&i<1,a=isNaN(i)||o,l=e.axis,c=i,u=i;return Kh(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!o&&a&&(c=i[0],u=i[1]),function(t,o,h){var d,f,p,g,m,_,v,y,x,b=(h||e).length,S=s[b];if(!S){if(!(x="auto"===e.grid?0:(e.grid||[1,Bh])[1])){for(v=-1e8;v<(v=h[x++].getBoundingClientRect().left)&&x<b;);x<b&&x--}for(S=s[b]=[],d=a?Math.min(x,b)*c-.5:i%x,f=x===Bh?0:a?b*u/x-.5:i/x|0,v=0,y=Bh,_=0;_<b;_++)p=_%x-d,g=f-(_/x|0),S[_]=m=l?Math.abs("y"===l?g:p):jh(p*p+g*g),m>v&&(v=m),m<y&&(y=m);"random"===i&&wf(S),S.max=v-y,S.min=y,S.v=b=(parseFloat(e.amount)||parseFloat(e.each)*(x>b?b-1:l?"y"===l?b/x:x:Math.max(x,b/x))||0)*("edges"===i?-1:1),S.b=b<0?r-b:r,S.u=vf(e.amount||e.each)||0,n=n&&b<0?Jf(n):n}return b=(S[t]-S.min)/S.max||0,Od(S.b+(n?n(b):b)*S.v)+S.u}},Tf=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var i=Od(Math.round(parseFloat(n)/t)*t*e);return(i-i%1)/e+(Yh(n)?0:vf(n))}},Mf=function(t,e){var n,i,r=id(t);return!r&&Zh(t)&&(n=r=t.radius||Bh,t.values?(t=bf(t.values),(i=!Yh(t[0]))&&(n*=n)):t=Tf(t.increment)),mf(e,r?$h(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,s,o=parseFloat(i?e.x:e),a=parseFloat(i?e.y:0),l=Bh,c=0,u=t.length;u--;)(r=i?(r=t[u].x-o)*r+(s=t[u].y-a)*s:Math.abs(t[u]-o))<l&&(l=r,c=u);return c=!n||l<=n?t[c]:e,i||c===e||Yh(e)?c:c+vf(e)}:Tf(t))},Cf=function(t,e,n,i){return mf(id(t)?!e:!0===n?!!(n=0):!i,function(){return id(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*i)/i})},Af=function(t,e,n){return mf(n,function(n){return t[~~e(n)]})},Rf=function(t){for(var e,n,i,r,s=0,o="";~(e=t.indexOf("random(",s));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?cd:rd),o+=t.substr(s,e-s)+Cf(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return o+t.substr(s,t.length-s)},Pf=function(t,e,n,i,r){var s=e-t,o=i-n;return mf(r,function(e){return n+((e-t)/s*o||0)})},Nf=function(t,e,n){var i,r,s,o=t.labels,a=Bh;for(i in o)(r=o[i]-e)<0==!!n&&r&&a>(r=Math.abs(r))&&(s=i,a=r);return s},Df=function(t,e,n){var i,r,s,o=t.vars,a=o[e],l=lh,c=t._ctx;if(a)return i=o[e+"Params"],r=o.callbackScope||t,n&&Sd.length&&Fd(),c&&(lh=c),s=i?a.apply(r,i):a.call(r),lh=l,s},Lf=function(t){return $d(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ah),t.progress()<1&&Df(t,"onInterrupt"),t},Of=[],kf=function(t){if(t)if(t=!t.name&&t.default||t,td()||t.headless){var e=t.name,n=$h(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:_d,render:Mp,add:up,kill:Ap,modifier:Cp,rawVars:0},s={targetTest:0,get:0,getSetter:Sp,aliases:{},register:0};if(Xf(),t!==i){if(Ed[e])return;Vd(i,Vd(jd(t,r),s)),Wd(i.prototype,Wd(r,jd(t,s))),Ed[i.prop=e]=i,t.targetTest&&(Cd.push(i),bd[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}md(e,i),t.register&&t.register(Gp,i,Np)}else Of.push(t)},If=255,Ff={aqua:[0,If,If],lime:[0,If,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,If],navy:[0,0,128],white:[If,If,If],olive:[128,128,0],yellow:[If,If,0],orange:[If,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[If,0,0],pink:[If,192,203],cyan:[0,If,If],transparent:[If,If,If,0]},Uf=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*If+.5|0},zf=function(t,e,n){var i,r,s,o,a,l,c,u,h,d,f=t?Yh(t)?[t>>16,t>>8&If,t&If]:0:Ff.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ff[t])f=Ff[t];else if("#"===t.charAt(0)){if(t.length<6&&(i=t.charAt(1),r=t.charAt(2),s=t.charAt(3),t="#"+i+i+r+r+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(f=parseInt(t.substr(1,6),16))>>16,f>>8&If,f&If,parseInt(t.substr(7),16)/255];f=[(t=parseInt(t.substr(1),16))>>16,t>>8&If,t&If]}else if("hsl"===t.substr(0,3))if(f=d=t.match(rd),e){if(~t.indexOf("="))return f=t.match(sd),n&&f.length<4&&(f[3]=1),f}else o=+f[0]%360/360,a=+f[1]/100,i=2*(l=+f[2]/100)-(r=l<=.5?l*(a+1):l+a-l*a),f.length>3&&(f[3]*=1),f[0]=Uf(o+1/3,i,r),f[1]=Uf(o,i,r),f[2]=Uf(o-1/3,i,r);else f=t.match(rd)||Ff.transparent;f=f.map(Number)}return e&&!d&&(i=f[0]/If,r=f[1]/If,s=f[2]/If,l=((c=Math.max(i,r,s))+(u=Math.min(i,r,s)))/2,c===u?o=a=0:(h=c-u,a=l>.5?h/(2-c-u):h/(c+u),o=c===i?(r-s)/h+(r<s?6:0):c===r?(s-i)/h+2:(i-r)/h+4,o*=60),f[0]=~~(o+.5),f[1]=~~(100*a+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},Bf=function(t){var e=[],n=[],i=-1;return t.split(Vf).forEach(function(t){var r=t.match(od)||[];e.push.apply(e,r),n.push(i+=r.length+1)}),e.c=n,e},Hf=function(t,e,n){var i,r,s,o,a="",l=(t+a).match(Vf),c=e?"hsla(":"rgba(",u=0;if(!l)return t;if(l=l.map(function(t){return(t=zf(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(s=Bf(t),(i=n.c).join(a)!==s.c.join(a)))for(o=(r=t.replace(Vf,"1").split(od)).length-1;u<o;u++)a+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(o=(r=t.split(Vf)).length-1;u<o;u++)a+=r[u]+l[u];return a+r[o]},Vf=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Ff)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Wf=/hsl[a]?\(/,Gf=function(t){var e,n=t.join(" ");if(Vf.lastIndex=0,Vf.test(n))return e=Wf.test(n),t[1]=Hf(t[1],e),t[0]=Hf(t[0],e,Bf(t[1])),!0},jf=(wh=Date.now,Eh=500,Th=33,Mh=wh(),Ch=Mh,Rh=Ah=1e3/240,Nh=function t(e){var n,i,r,s,o=wh()-Ch,a=!0===e;if((o>Eh||o<0)&&(Mh+=o-Th),((n=(r=(Ch+=o)-Mh)-Rh)>0||a)&&(s=++xh.frame,bh=r-1e3*xh.time,xh.time=r/=1e3,Rh+=n+(n>=Ah?4:Ah-n),i=1),a||(_h=vh(t)),i)for(Sh=0;Sh<Ph.length;Sh++)Ph[Sh](r,bh,s,e)},xh={time:0,frame:0,tick:function(){Nh(!0)},deltaRatio:function(t){return bh/(1e3/(t||60))},wake:function(){fh&&(!hh&&td()&&(uh=hh=window,dh=uh.document||{},hd.gsap=Gp,(uh.gsapVersions||(uh.gsapVersions=[])).push(Gp.version),fd(dd||uh.GreenSockGlobals||!uh.gsap&&uh||{}),Of.forEach(kf)),yh="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,_h&&xh.sleep(),vh=yh||function(t){return setTimeout(t,Rh-1e3*xh.time+1|0)},mh=1,Nh(2))},sleep:function(){(yh?cancelAnimationFrame:clearTimeout)(_h),mh=0,vh=_d},lagSmoothing:function(t,e){Eh=t||1/0,Th=Math.min(e||33,Eh)},fps:function(t){Ah=1e3/(t||240),Rh=1e3*xh.time+Ah},add:function(t,e,n){var i=e?function(e,n,r,s){t(e,n,r,s),xh.remove(i)}:t;return xh.remove(t),Ph[n?"unshift":"push"](i),Xf(),i},remove:function(t,e){~(e=Ph.indexOf(t))&&Ph.splice(e,1)&&Sh>=e&&Sh--},_listeners:Ph=[]}),Xf=function(){return!mh&&jf.wake()},qf={},Kf=/^[\d.\-M][\d.\-,\s]/,$f=/["']/g,Yf=function(t){for(var e,n,i,r={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)n=s[a],e=a!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace($f,"").trim():+i,o=n.substr(e+1).trim();return r},Jf=function(t){return function(e){return 1-t(1-e)}},Zf=function t(e,n){for(var i,r=e._first;r;)r instanceof op?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},Qf=function(t,e){return t&&($h(t)?t:qf[t]||function(t){var e,n,i,r,s=(t+"").split("("),o=qf[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[Yf(s[1])]:(e=t,n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n),e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)).split(",").map(Bd)):qf._CE&&Kf.test(t)?qf._CE("",t):o}(t))||e},tp=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,s={easeIn:e,easeOut:n,easeInOut:i};return Dd(t,function(t){for(var e in qf[t]=hd[t]=s,qf[r=t.toLowerCase()]=n,s)qf[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=qf[t+"."+e]=s[e]}),s},ep=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},np=function t(e,n,i){var r=n>=1?n:1,s=(i||(e?.3:.45))/(n<1?n:1),o=s/Vh*(Math.asin(1/r)||0),a=function(t){return 1===t?1:r*Math.pow(2,-10*t)*qh((t-o)*s)+1},l="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:ep(a);return s=Vh/s,l.config=function(n,i){return t(e,n,i)},l},ip=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:ep(i);return r.config=function(n){return t(e,n)},r};Dd("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;tp(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),qf.Linear.easeNone=qf.none=qf.Linear.easeIn,tp("Elastic",np("in"),np("out"),np()),Dh=7.5625,kh=2*(Oh=1/(Lh=2.75)),Ih=2.5*Oh,tp("Bounce",function(t){return 1-Fh(1-t)},Fh=function(t){return t<Oh?Dh*t*t:t<kh?Dh*Math.pow(t-1.5/Lh,2)+.75:t<Ih?Dh*(t-=2.25/Lh)*t+.9375:Dh*Math.pow(t-2.625/Lh,2)+.984375}),tp("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)}),tp("Circ",function(t){return-(jh(1-t*t)-1)}),tp("Sine",function(t){return 1===t?1:1-Xh(t*Wh)}),tp("Back",ip("in"),ip("out"),ip()),qf.SteppedEase=qf.steps=hd.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0;return function(t){return((i*_f(0,.99999999,t)|0)+r)*n}}},zh.ease=qf["quad.out"],Dd("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Ad+=t+","+t+"Params,"});var rp=function(t,e){this.id=Gh++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Nd,this.set=e?e.getSetter:Sp},sp=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,hf(this,+t.duration,1,1),this.data=t.data,lh&&(this._ctx=lh,lh.data.push(this)),mh||jf.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,hf(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Xf(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(rf(this,t),!n._dp||n.parent||sf(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&of(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Hh||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),zd(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Qd(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Qd(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?tf(this._tTime,n)+1:1},e.timeScale=function(t,e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var n=this.parent&&this._ts?ef(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(_f(-Math.abs(this._delay),this.totalDuration(),n),!1!==e),nf(this),function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Xf(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Hh&&(this._tTime-=Hh)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&of(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Qh(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ef(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=xd);var e=ah;return ah=t,Ud(this)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),ah=e,this},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(Math.abs(e._ts)||1),e=e._dp;return!this.parent&&this._sat?this._sat.globalTime(t):n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,df(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,df(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(pf(this,t),Qh(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Qh(e)),this._dur||(this._zTime=-1e-8),this},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-Hh))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise(function(n){var i=$h(t)?t:Hd,r=function(){var t=e.then;e.then=null,$h(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r})},e.kill=function(){Lf(this)},t}();Vd(sp.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var op=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=Qh(e.sortChildren),ch&&of(e.parent||ch,rh(i),n),e.reversed&&i.reverse(),e.paused&&i.paused(!0),e.scrollTrigger&&af(rh(i),e.scrollTrigger),i}sh(e,t);var n=e.prototype;return n.to=function(t,e,n){return gf(0,arguments,this),this},n.from=function(t,e,n){return gf(1,arguments,this),this},n.fromTo=function(t,e,n,i){return gf(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Xd(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new _p(t,e,pf(this,n),1),this},n.call=function(t,e,n){return of(this,_p.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,i,r,s,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new _p(t,n,pf(this,r)),this},n.staggerFrom=function(t,e,n,i,r,s,o){return n.runBackwards=1,Xd(n).immediateRender=Qh(n.immediateRender),this.staggerTo(t,e,n,i,r,s,o)},n.staggerFromTo=function(t,e,n,i,r,s,o,a){return i.startAt=n,Xd(i).immediateRender=Qh(i.immediateRender),this.staggerTo(t,e,i,r,s,o,a)},n.render=function(t,e,n){var i,r,s,o,a,l,c,u,h,d,f,p,g=this._time,m=this._dirty?this.totalDuration():this._tDur,_=this._dur,v=t<=0?0:Od(t),y=this._zTime<0!=t<0&&(this._initted||!_);if(this!==ch&&v>m&&t>=0&&(v=m),v!==this._tTime||n||y){if(g!==this._time&&_&&(v+=this._time-g,t+=this._time-g),i=v,h=this._start,l=!(u=this._ts),y&&(_||(g=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,a=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(i=Od(v%a),v===m?(o=this._repeat,i=_):((o=~~(d=Od(v/a)))&&o===d&&(i=_,o--),i>_&&(i=_)),d=tf(this._tTime,a),!g&&this._tTime&&d!==o&&this._tTime-d*a-this._dur<=0&&(d=o),f&&1&o&&(i=_-i,p=1),o!==d&&!this._lock){var x=f&&1&d,b=x===(f&&1&o);if(o<d&&(x=!x),g=x?0:v%_?_:v,this._lock=1,this.render(g||(p?0:Od(o*a)),e,!_)._lock=0,this._tTime=v,!e&&this.parent&&Df(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),g&&g!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,m=this._tDur,b&&(this._lock=2,g=x?_:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Zf(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,Od(g),Od(i)),c&&(v-=i-(i=c._start))),this._tTime=v,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,g=0),!g&&v&&!e&&!d&&(Df(this,"onStart"),this._tTime!==v))return this;if(i>=g&&t>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,e,n),i!==this._time||!this._ts&&!l){c=0,s&&(v+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var S=t<0?t:i;r;){if(s=r._prev,(r._act||S<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(S-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(S-r._start)*r._ts,e,n||ah&&Ud(r)),i!==this._time||!this._ts&&!l){c=0,s&&(v+=this._zTime=S?-1e-8:Hh);break}}r=s}}if(c&&!e&&(this.pause(),c.render(i>=g?0:-1e-8)._zTime=i>=g?1:-1,this._ts))return this._start=h,nf(this),this.render(t,e,n);this._onUpdate&&!e&&Df(this,"onUpdate",!0),(v===m&&this._tTime>=this.totalDuration()||!v&&g)&&(h!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!_)&&(v===m&&this._ts>0||!v&&this._ts<0)&&$d(this,1),e||t<0&&!g||!v&&!g&&m||(Df(this,v===m&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<m&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(Yh(e)||(e=pf(this,e,t)),!(t instanceof sp)){if(id(t))return t.forEach(function(t){return n.add(t,e)}),this;if(Kh(t))return this.addLabel(t,e);if(!$h(t))return this;t=_p.delayedCall(0,t)}return this!==t?of(this,t,e):this},n.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-1e8);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof _p?e&&r.push(s):(n&&r.push(s),t&&r.push.apply(r,s.getChildren(!0,e,n)))),s=s._next;return r},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return Kh(t)?this.removeLabel(t):$h(t)?this.killTweensOf(t):(t.parent===this&&Kd(this,t),t===this._recent&&(this._recent=this._last),Yd(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Od(jf.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=pf(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var i=_p.delayedCall(0,e||_d,n);return i.data="isPause",this._hasPause=1,of(this,i,pf(this,t))},n.removePause=function(t){var e=this._first;for(t=pf(this,t);e;)e._start===t&&"isPause"===e.data&&$d(e),e=e._next},n.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)ap!==i[r]&&i[r].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,i=[],r=bf(t),s=this._first,o=Yh(e);s;)s instanceof _p?Id(s._targets,r)&&(o?(!ap||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&i.push(s):(n=s.getTweensOf(r,e)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(t,e){e=e||{};var n,i=this,r=pf(i,t),s=e,o=s.startAt,a=s.onStart,l=s.onStartParams,c=s.immediateRender,u=_p.to(i,Vd({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale())||Hh,onStart:function(){if(i.pause(),!n){var t=e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale());u._dur!==t&&hf(u,t,0,1).render(u._time,!0,!0),n=1}a&&a.apply(u,l||[])}},e));return c?u.render(0):u},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Vd({startAt:{time:pf(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),Nf(this,pf(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),Nf(this,pf(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Hh)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(i in s)s[i]>=n&&(s[i]+=t);return Yd(this)},n.invalidate=function(e){var n=this._first;for(this._lock=0;n;)n.invalidate(e),n=n._next;return t.prototype.invalidate.call(this,e)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Yd(this)},n.totalDuration=function(t){var e,n,i,r=0,s=this,o=s._last,a=Bh;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(i=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,of(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-1/0),a=0),o._end>r&&o._ts&&(r=o._end),o=e;hf(s,s===ch&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(ch._ts&&(zd(ch,ef(t,ch)),ph=jf.frame),jf.frame>=Md){Md+=Uh.autoSleep||120;var e=ch._first;if((!e||!e._ts)&&Uh.autoSleep&&jf._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||jf.sleep()}}},e}(sp);Vd(op.prototype,{_lock:0,_hasPause:0,_forcing:0});var ap,lp,cp=function(t,e,n,i,r,s,o){var a,l,c,u,h,d,f,p,g=new Np(this._pt,t,e,0,1,Tp,null,r),m=0,_=0;for(g.b=n,g.e=i,n+="",(f=~(i+="").indexOf("random("))&&(i=Rf(i)),s&&(s(p=[n,i],t,e),n=p[0],i=p[1]),l=n.match(ad)||[];a=ad.exec(i);)u=a[0],h=i.substring(m,a.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[_++]&&(d=parseFloat(l[_-1])||0,g._pt={_next:g._pt,p:h||1===_?h:",",s:d,c:"="===u.charAt(1)?kd(d,u)-d:parseFloat(u)-d,m:c&&c<4?Math.round:0},m=ad.lastIndex);return g.c=m<i.length?i.substring(m,i.length):"",g.fp=o,(ld.test(i)||f)&&(g.e=0),this._pt=g,g},up=function(t,e,n,i,r,s,o,a,l,c){$h(i)&&(i=i(r||0,t,s));var u,h=t[e],d="get"!==n?n:$h(h)?l?t[e.indexOf("set")||!$h(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():h,f=$h(h)?l?xp:yp:vp;if(Kh(i)&&(~i.indexOf("random(")&&(i=Rf(i)),"="===i.charAt(1)&&((u=kd(d,i)+(vf(d)||0))||0===u)&&(i=u)),!c||d!==i||lp)return isNaN(d*i)||""===i?cp.call(this,t,e,d,i,f,a||Uh.stringFilter,l):(u=new Np(this._pt,t,e,+d||0,i-(d||0),"boolean"==typeof h?Ep:wp,0,f),l&&(u.fp=l),o&&u.modifier(o,this,t),this._pt=u)},hp=function(t,e,n,i,r,s){var o,a,l,c;if(Ed[t]&&!1!==(o=new Ed[t]).init(r,o.rawVars?e[t]:function(t,e,n,i,r){if($h(t)&&(t=pp(t,r,e,n,i)),!Zh(t)||t.style&&t.nodeType||id(t)||nd(t))return Kh(t)?pp(t,r,e,n,i):t;var s,o={};for(s in t)o[s]=pp(t[s],r,e,n,i);return o}(e[t],i,r,s,n),n,i,s)&&(n._pt=a=new Np(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==gh))for(l=n._ptLookup[n._targets.indexOf(r)],c=o._props.length;c--;)l[o._props[c]]=a;return o},dp=function t(e,n,i){var r,s,o,a,l,c,u,h,d,f,p,g,m,_=e.vars,v=_.ease,y=_.startAt,x=_.immediateRender,b=_.lazy,S=_.onUpdate,w=_.runBackwards,E=_.yoyoEase,T=_.keyframes,M=_.autoRevert,C=e._dur,A=e._startAt,R=e._targets,P=e.parent,N=P&&"nested"===P.data?P.vars.targets:R,D="auto"===e._overwrite&&!oh,L=e.timeline;if(L&&(!T||!v)&&(v="none"),e._ease=Qf(v,zh.ease),e._yEase=E?Jf(Qf(!0===E?v:E,zh.ease)):0,E&&e._yoyo&&!e._repeat&&(E=e._yEase,e._yEase=e._ease,e._ease=E),e._from=!L&&!!_.runBackwards,!L||T&&!_.stagger){if(g=(h=R[0]?Pd(R[0]).harness:0)&&_[h.prop],r=jd(_,bd),A&&(A._zTime<0&&A.progress(1),n<0&&w&&x&&!M?A.render(-1,!0):A.revert(w&&C?yd:vd),A._lazy=0),y){if($d(e._startAt=_p.set(R,Vd({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:!A&&Qh(b),startAt:null,delay:0,onUpdate:S&&function(){return Df(e,"onUpdate")},stagger:0},y))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ah||!x&&!M)&&e._startAt.revert(yd),x&&C&&n<=0&&i<=0)return void(n&&(e._zTime=n))}else if(w&&C&&!A)if(n&&(x=!1),o=Vd({overwrite:!1,data:"isFromStart",lazy:x&&!A&&Qh(b),immediateRender:x,stagger:0,parent:P},r),g&&(o[h.prop]=g),$d(e._startAt=_p.set(R,o)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(ah?e._startAt.revert(yd):e._startAt.render(-1,!0)),e._zTime=n,x){if(!n)return}else t(e._startAt,Hh,Hh);for(e._pt=e._ptCache=0,b=C&&Qh(b)||b&&!C,s=0;s<R.length;s++){if(u=(l=R[s])._gsap||Rd(R)[s]._gsap,e._ptLookup[s]=f={},wd[u.id]&&Sd.length&&Fd(),p=N===R?s:N.indexOf(l),h&&!1!==(d=new h).init(l,g||r,e,p,N)&&(e._pt=a=new Np(e._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(t){f[t]=a}),d.priority&&(c=1)),!h||g)for(o in r)Ed[o]&&(d=hp(o,r,e,p,l,N))?d.priority&&(c=1):f[o]=a=up.call(e,l,o,"get",r[o],p,N,0,_.stringFilter);e._op&&e._op[s]&&e.kill(l,e._op[s]),D&&e._pt&&(ap=e,ch.killTweensOf(l,f,e.globalTime(n)),m=!e.parent,ap=0),e._pt&&b&&(wd[u.id]=1)}c&&Pp(e),e._onInit&&e._onInit(e)}e._onUpdate=S,e._initted=(!e._op||e._pt)&&!m,T&&n<=0&&L.render(Bh,!0,!0)},fp=function(t,e,n,i){var r,s,o=e.ease||i||"power1.inOut";if(id(e))s=n[t]||(n[t]=[]),e.forEach(function(t,n){return s.push({t:n/(e.length-1)*100,v:t,e:o})});else for(r in e)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(t),v:e[r],e:o})},pp=function(t,e,n,i,r){return $h(t)?t.call(e,n,i,r):Kh(t)&&~t.indexOf("random(")?Rf(t):t},gp=Ad+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",mp={};Dd(gp+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return mp[t]=1});var _p=function(t){function e(e,n,i,r){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var o,a,l,c,u,h,d,f,p=(s=t.call(this,r?n:Xd(n))||this).vars,g=p.duration,m=p.delay,_=p.immediateRender,v=p.stagger,y=p.overwrite,x=p.keyframes,b=p.defaults,S=p.scrollTrigger,w=p.yoyoEase,E=n.parent||ch,T=(id(e)||nd(e)?Yh(e[0]):"length"in n)?[e]:bf(e);if(s._targets=T.length?Rd(T):gd(0,!Uh.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=y,x||v||ed(g)||ed(m)){if(n=s.vars,(o=s.timeline=new op({data:"nested",defaults:b||{},targets:E&&"nested"===E.data?E.vars.targets:T})).kill(),o.parent=o._dp=rh(s),o._start=0,v||ed(g)||ed(m)){if(c=T.length,d=v&&Ef(v),Zh(v))for(u in v)~gp.indexOf(u)&&(f||(f={}),f[u]=v[u]);for(a=0;a<c;a++)(l=jd(n,mp)).stagger=0,w&&(l.yoyoEase=w),f&&Wd(l,f),h=T[a],l.duration=+pp(g,rh(s),a,h,T),l.delay=(+pp(m,rh(s),a,h,T)||0)-s._delay,!v&&1===c&&l.delay&&(s._delay=m=l.delay,s._start+=m,l.delay=0),o.to(h,l,d?d(a,h,T):0),o._ease=qf.none;o.duration()?g=m=0:s.timeline=0}else if(x){Xd(Vd(o.vars.defaults,{ease:"none"})),o._ease=Qf(x.ease||n.ease||"none");var M,C,A,R=0;if(id(x))x.forEach(function(t){return o.to(T,t,">")}),o.duration();else{for(u in l={},x)"ease"===u||"easeEach"===u||fp(u,x[u],l,x.easeEach);for(u in l)for(M=l[u].sort(function(t,e){return t.t-e.t}),R=0,a=0;a<M.length;a++)(A={ease:(C=M[a]).e,duration:(C.t-(a?M[a-1].t:0))/100*g})[u]=C.v,o.to(T,A,R),R+=A.duration;o.duration()<g&&o.to({},{duration:g-o.duration()})}}g||s.duration(g=o.duration())}else s.timeline=0;return!0!==y||oh||(ap=rh(s),ch.killTweensOf(T),ap=0),of(E,rh(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(_||!g&&!x&&s._start===Od(E._time)&&Qh(_)&&Zd(rh(s))&&"nested"!==E.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-m)||0)),S&&af(rh(s),S),s}sh(e,t);var n=e.prototype;return n.render=function(t,e,n){var i,r,s,o,a,l,c,u,h,d=this._time,f=this._tDur,p=this._dur,g=t<0,m=t>f-Hh&&!g?f:t<Hh?0:t;if(p){if(m!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(i=m,u=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*o+t,e,n);if(i=Od(m%o),m===f?(s=this._repeat,i=p):(s=~~(a=Od(m/o)))&&s===a?(i=p,s--):i>p&&(i=p),(l=this._yoyo&&1&s)&&(h=this._yEase,i=p-i),a=tf(this._tTime,o),i===d&&!n&&this._initted&&s===a)return this._tTime=m,this;s!==a&&(u&&this._yEase&&Zf(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&i!==o&&this._initted&&(this._lock=n=1,this.render(Od(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(lf(this,g?t:i,n,e,m))return this._tTime=0,this;if(!(d===this._time||n&&this.vars.repeatRefresh&&s!==a))return this;if(p!==this._dur)return this.render(t,e,n)}if(this._tTime=m,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/p),this._from&&(this.ratio=c=1-c),!d&&m&&!e&&!a&&(Df(this,"onStart"),this._tTime!==m))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(t<0?t:u._dur*u._ease(i/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(g&&Jd(this,t,0,n),Df(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&Df(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(g&&!this._onUpdate&&Jd(this,t,0,!0),(t||!p)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&$d(this,1),e||g&&!d||!(m||d||l)||(Df(this,m===f?"onComplete":"onReverseComplete",!0),this._prom&&!(m<f&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,s,o,a=t.ratio,l=e<0||!e&&(!t._start&&cf(t)&&(t._initted||!uf(t))||(t._ts<0||t._dp._ts<0)&&!uf(t))?0:1,c=t._rDelay,u=0;if(c&&t._repeat&&(u=_f(0,t._tDur,e),s=tf(u,c),t._yoyo&&1&s&&(l=1-l),s!==tf(t._tTime,c)&&(a=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==a||ah||i||t._zTime===Hh||!e&&t._zTime){if(!t._initted&&lf(t,e,i,n,u))return;for(o=t._zTime,t._zTime=e||(n?Hh:0),n||(n=e&&!o),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=u,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&Jd(t,e,0,!0),t._onUpdate&&!n&&Df(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&Df(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&$d(t,1),n||ah||(Df(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},n.resetTo=function(t,e,n,i,r){mh||jf.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||dp(this,s),function(t,e,n,i,r,s,o,a){var l,c,u,h,d=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!d)for(d=t._ptCache[e]=[],u=t._ptLookup,h=t._targets.length;h--;){if((l=u[h][e])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return lp=1,t.vars[e]="+=0",dp(t,o),lp=0,a?gd():1;d.push(l)}for(h=d.length;h--;)(l=(c=d[h])._pt||c).s=!i&&0!==i||r?l.s+(i||0)+s*l.c:i,l.c=n-l.s,c.e&&(c.e=Ld(n)+vf(c.e)),c.b&&(c.b=l.s+vf(c.b))}(this,t,e,n,i,this._ease(s/this._dur),s,r)?this.resetTo(t,e,n,i,1):(rf(this,0),this.parent||qd(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Lf(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ah),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,ap&&!0!==ap.vars.overwrite)._first||Lf(this),this.parent&&n!==this.timeline.totalDuration()&&hf(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,o,a,l,c,u=this._targets,h=t?bf(t):u,d=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(u,h))return"all"===e&&(this._pt=0),Lf(this);for(i=this._op=this._op||[],"all"!==e&&(Kh(e)&&(a={},Dd(e,function(t){return a[t]=1}),e=a),e=function(t,e){var n,i,r,s,o=t[0]?Pd(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(i in n=Wd({},e),a)if(i in n)for(r=(s=a[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(u,e)),c=u.length;c--;)if(~h.indexOf(u[c]))for(a in r=d[c],"all"===e?(i[c]=e,o=r,s={}):(s=i[c]=i[c]||{},o=e),o)(l=r&&r[a])&&("kill"in l.d&&!0!==l.d.kill(a)||Kd(this,l,"_pt"),delete r[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&f&&Lf(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return gf(1,arguments)},e.delayedCall=function(t,n,i,r){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},e.fromTo=function(t,e,n){return gf(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return ch.killTweensOf(t,e,n)},e}(sp);Vd(_p.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Dd("staggerTo,staggerFrom,staggerFromTo",function(t){_p[t]=function(){var e=new op,n=yf.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var vp=function(t,e,n){return t[e]=n},yp=function(t,e,n){return t[e](n)},xp=function(t,e,n,i){return t[e](i.fp,n)},bp=function(t,e,n){return t.setAttribute(e,n)},Sp=function(t,e){return $h(t[e])?yp:Jh(t[e])&&t.setAttribute?bp:vp},wp=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},Ep=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Tp=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Mp=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Cp=function(t,e,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(t,e,n),s=r},Ap=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?Kd(this,i,"_pt"):i.dep||(e=1),i=n;return!e},Rp=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},Pp=function(t){for(var e,n,i,r,s=t._pt;s;){for(e=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=e}t._pt=i},Np=function(){function t(t,e,n,i,r,s,o,a,l){this.t=e,this.s=i,this.c=r,this.p=n,this.r=s||wp,this.d=o||this,this.set=a||vp,this.pr=l||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=Rp,this.m=t,this.mt=n,this.tween=e},t}();Dd(Ad+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return bd[t]=1}),hd.TweenMax=hd.TweenLite=_p,hd.TimelineLite=hd.TimelineMax=op,ch=new op({sortChildren:!1,defaults:zh,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Uh.stringFilter=Gf;var Dp=[],Lp={},Op=[],kp=0,Ip=0,Fp=function(t){return(Lp[t]||Op).map(function(t){return t()})},Up=function(){var t=Date.now(),e=[];t-kp>2&&(Fp("matchMediaInit"),Dp.forEach(function(t){var n,i,r,s,o=t.queries,a=t.conditions;for(i in o)(n=uh.matchMedia(o[i]).matches)&&(r=1),n!==a[i]&&(a[i]=n,s=1);s&&(t.revert(),r&&e.push(t))}),Fp("matchMediaRevert"),e.forEach(function(t){return t.onMatch(t,function(e){return t.add(null,e)})}),kp=t,Fp("matchMedia"))},zp=function(){function t(t,e){this.selector=e&&Sf(e),this.data=[],this._r=[],this.isReverted=!1,this.id=Ip++,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){$h(t)&&(n=e,e=t,t=$h);var i=this,r=function(){var t,r=lh,s=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=Sf(n)),lh=i,t=e.apply(i,arguments),$h(t)&&i._r.push(t),lh=r,i.selector=s,i.isReverted=!1,t};return i.last=r,t===$h?r(i,function(t){return i.add(null,t)}):t?i[t]=r:r},e.ignore=function(t){var e=lh;lh=null,t(this),lh=e},e.getTweens=function(){var e=[];return this.data.forEach(function(n){return n instanceof t?e.push.apply(e,n.getTweens()):n instanceof _p&&!(n.parent&&"nested"===n.parent.data)&&e.push(n)}),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?function(){for(var e,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(e=n.data[r]).data&&(e.revert(),e.getChildren(!0,!0,!1).forEach(function(t){return i.splice(i.indexOf(t),1)}));for(i.map(function(t){return{g:t._dur||t._delay||t._sat&&!t._sat.vars.immediateRender?t.globalTime(0):-1/0,t:t}}).sort(function(t,e){return e.g-t.g||-1/0}).forEach(function(e){return e.t.revert(t)}),r=n.data.length;r--;)(e=n.data[r])instanceof op?"nested"!==e.data&&(e.scrollTrigger&&e.scrollTrigger.revert(),e.kill()):!(e instanceof _p)&&e.revert&&e.revert(t);n._r.forEach(function(e){return e(t,n)}),n.isReverted=!0}():this.data.forEach(function(t){return t.kill&&t.kill()}),this.clear(),e)for(var i=Dp.length;i--;)Dp[i].id===this.id&&Dp.splice(i,1)},e.revert=function(t){this.kill(t||{})},t}(),Bp=function(){function t(t){this.contexts=[],this.scope=t,lh&&lh.data.push(this)}var e=t.prototype;return e.add=function(t,e,n){Zh(t)||(t={matches:t});var i,r,s,o=new zp(0,n||this.scope),a=o.conditions={};for(r in lh&&!o.selector&&(o.selector=lh.selector),this.contexts.push(o),e=o.add("onMatch",e),o.queries=t,t)"all"===r?s=1:(i=uh.matchMedia(t[r]))&&(Dp.indexOf(o)<0&&Dp.push(o),(a[r]=i.matches)&&(s=1),i.addListener?i.addListener(Up):i.addEventListener("change",Up));return s&&e(o,function(t){return o.add(null,t)}),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach(function(e){return e.kill(t,!0)})},t}(),Hp={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){return kf(t)})},timeline:function(t){return new op(t)},getTweensOf:function(t,e){return ch.getTweensOf(t,e)},getProperty:function(t,e,n,i){Kh(t)&&(t=bf(t)[0]);var r=Pd(t||{}).get,s=n?Hd:Bd;return"native"===n&&(n=""),t?e?s((Ed[e]&&Ed[e].get||r)(t,e,n,i)):function(e,n,i){return s((Ed[e]&&Ed[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=bf(t)).length>1){var i=t.map(function(t){return Gp.quickSetter(t,e,n)}),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var s=Ed[e],o=Pd(t),a=o.harness&&(o.harness.aliases||{})[e]||e,l=s?function(e){var i=new s;gh._pt=0,i.init(t,n?e+n:e,gh,0,[t]),i.render(1,i),gh._pt&&Mp(1,gh)}:o.set(t,a);return s?l:function(e){return l(t,a,n?e+n:e,o,1)}},quickTo:function(t,e,n){var i,r=Gp.to(t,Vd(((i={})[e]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),s=function(t,n,i){return r.resetTo(e,t,n,i)};return s.tween=r,s},isTweening:function(t){return ch.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Qf(t.ease,zh.ease)),Gd(zh,t||{})},config:function(t){return Gd(Uh,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,s=t.extendTimeline;(i||"").split(",").forEach(function(t){return t&&!Ed[t]&&!hd[t]&&gd()}),Td[e]=function(t,e,i){return n(bf(t),Vd(e||{},r),i)},s&&(op.prototype[e]=function(t,n,i){return this.add(Td[e](t,Zh(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){qf[t]=Qf(e)},parseEase:function(t,e){return arguments.length?Qf(t,e):qf},getById:function(t){return ch.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,i,r=new op(t);for(r.smoothChildTiming=Qh(t.smoothChildTiming),ch.remove(r),r._dp=0,r._time=r._tTime=ch._time,n=ch._first;n;)i=n._next,!e&&!n._dur&&n instanceof _p&&n.vars.onComplete===n._targets[0]||of(r,n,n._start-n._delay),n=i;return of(ch,r,0),r},context:function(t,e){return t?new zp(t,e):lh},matchMedia:function(t){return new Bp(t)},matchMediaRefresh:function(){return Dp.forEach(function(t){var e,n,i=t.conditions;for(n in i)i[n]&&(i[n]=!1,e=1);e&&t.revert()})||Up()},addEventListener:function(t,e){var n=Lp[t]||(Lp[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=Lp[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},utils:{wrap:function t(e,n,i){var r=n-e;return id(e)?Af(e,t(0,e.length),n):mf(i,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,n,i){var r=n-e,s=2*r;return id(e)?Af(e,t(0,e.length-1),n):mf(i,function(t){return e+((t=(s+(t-e)%s)%s||0)>r?s-t:t)})},distribute:Ef,random:Cf,snap:Mf,normalize:function(t,e,n){return Pf(t,e,0,1,n)},getUnit:vf,clamp:function(t,e,n){return mf(n,function(n){return _f(t,e,n)})},splitColor:zf,toArray:bf,selector:Sf,mapRange:Pf,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||vf(n))}},interpolate:function t(e,n,i,r){var s=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!s){var o,a,l,c,u,h=Kh(e),d={};if(!0===i&&(r=1)&&(i=null),h)e={p:e},n={p:n};else if(id(e)&&!id(n)){for(l=[],c=e.length,u=c-2,a=1;a<c;a++)l.push(t(e[a-1],e[a]));c--,s=function(t){t*=c;var e=Math.min(u,~~t);return l[e](t-e)},i=n}else r||(e=Wd(id(e)?[]:{},e));if(!l){for(o in n)up.call(d,e,o,"get",n[o]);s=function(t){return Mp(t,d)||(h?e.p:e)}}}return mf(i,s)},shuffle:wf},install:fd,effects:Td,ticker:jf,updateRoot:op.updateRoot,plugins:Ed,globalTimeline:ch,core:{PropTween:Np,globals:md,Tween:_p,Timeline:op,Animation:sp,getCache:Pd,_removeLinkedListItem:Kd,reverting:function(){return ah},context:function(t){return t&&lh&&(lh.data.push(t),t._ctx=lh),lh},suppressOverwrites:function(t){return oh=t}}};Dd("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Hp[t]=_p[t]}),jf.add(op.updateRoot),gh=Hp.to({},{duration:0});var Vp=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Wp=function(t,e){return{name:t,headless:1,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(Kh(n)&&(i={},Dd(n,function(t){return i[t]=1}),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,s=t._targets;for(n in e)for(i=s.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=Vp(r,n)),r&&r.modifier&&r.modifier(e[n],t,s[i],n))}(t,n)}}}},Gp=Hp.registerPlugin({name:"attr",init:function(t,e,n,i,r){var s,o,a;for(s in this.tween=n,e)a=t.getAttribute(s)||"",(o=this.add(t,"setAttribute",(a||0)+"",e[s],i,r,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(t,e){for(var n=e._pt;n;)ah?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",headless:1,init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Wp("roundProps",Tf),Wp("modifiers"),Wp("snap",Mf))||Hp;_p.version=op.version=Gp.version="3.13.0",fh=1,td()&&Xf(),qf.Power0,qf.Power1,qf.Power2,qf.Power3,qf.Power4,qf.Linear,qf.Quad,qf.Cubic,qf.Quart,qf.Quint,qf.Strong,qf.Elastic,qf.Back,qf.SteppedEase,qf.Bounce,qf.Sine,qf.Expo,qf.Circ;
/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var jp,Xp,qp,Kp,$p,Yp,Jp,Zp,Qp={},tg=180/Math.PI,eg=Math.PI/180,ng=Math.atan2,ig=/([A-Z])/g,rg=/(left|right|width|margin|padding|x)/i,sg=/[\s,\(]\S/,og={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ag=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},lg=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},cg=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},ug=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},hg=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},dg=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},fg=function(t,e,n){return t.style[e]=n},pg=function(t,e,n){return t.style.setProperty(e,n)},gg=function(t,e,n){return t._gsap[e]=n},mg=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},_g=function(t,e,n,i,r){var s=t._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},vg=function(t,e,n,i,r){var s=t._gsap;s[e]=n,s.renderTransform(r,s)},yg="transform",xg=yg+"Origin",bg=function t(e,n){var i=this,r=this.target,s=r.style,o=r._gsap;if(e in Qp&&s){if(this.tfm=this.tfm||{},"transform"===e)return og.transform.split(",").forEach(function(e){return t.call(i,e,n)});if(~(e=og[e]||e).indexOf(",")?e.split(",").forEach(function(t){return i.tfm[t]=zg(r,t)}):this.tfm[e]=o.x?o[e]:zg(r,e),e===xg&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(yg)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(xg,n,"")),e=yg}(s||n)&&this.props.push(e,n,s[e])},Sg=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},wg=function(){var t,e,n=this.props,i=this.target,r=i.style,s=i._gsap;for(t=0;t<n.length;t+=3)n[t+1]?2===n[t+1]?i[n[t]](n[t+2]):i[n[t]]=n[t+2]:n[t+2]?r[n[t]]=n[t+2]:r.removeProperty("--"===n[t].substr(0,2)?n[t]:n[t].replace(ig,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)s[e]=this.tfm[e];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(t=Jp())&&t.isStart||r[yg]||(Sg(r),s.zOrigin&&r[xg]&&(r[xg]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},Eg=function(t,e){var n={target:t,props:[],revert:wg,save:bg};return t._gsap||Gp.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(t){return n.save(t)}),n},Tg=function(t,e){var n=Xp.createElementNS?Xp.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Xp.createElement(t);return n&&n.style?n:Xp.createElement(t)},Mg=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(ig,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,Ag(n)||n,1)||""},Cg="O,Moz,ms,Ms,Webkit".split(","),Ag=function(t,e,n){var i=(e||$p).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(Cg[r]+t in i););return r<0?null:(3===r?"ms":r>=0?Cg[r]:"")+t},Rg=function(){"undefined"!=typeof window&&window.document&&(jp=window,Xp=jp.document,qp=Xp.documentElement,$p=Tg("div")||{style:{}},Tg("div"),yg=Ag(yg),xg=yg+"Origin",$p.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Zp=!!Ag("perspective"),Jp=Gp.core.reverting,Kp=1)},Pg=function(t){var e,n=t.ownerSVGElement,i=Tg("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=t.cloneNode(!0);r.style.display="block",i.appendChild(r),qp.appendChild(i);try{e=r.getBBox()}catch(s){}return i.removeChild(r),qp.removeChild(i),e},Ng=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Dg=function(t){var e,n;try{e=t.getBBox()}catch(i){e=Pg(t),n=1}return e&&(e.width||e.height)||n||(e=Pg(t)),!e||e.width||e.x||e.y?e:{x:+Ng(t,["x","cx","x1"])||0,y:+Ng(t,["y","cy","y1"])||0,width:0,height:0}},Lg=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Dg(t))},Og=function(t,e){if(e){var n,i=t.style;e in Qp&&e!==xg&&(e=yg),i.removeProperty?("ms"!==(n=e.substr(0,2))&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty("--"===n?e:e.replace(ig,"-$1").toLowerCase())):i.removeAttribute(e)}},kg=function(t,e,n,i,r,s){var o=new Np(t._pt,e,n,0,1,s?dg:hg);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},Ig={deg:1,rad:1,turn:1},Fg={grid:1,flex:1},Ug=function t(e,n,i,r){var s,o,a,l,c=parseFloat(i)||0,u=(i+"").trim().substr((c+"").length)||"px",h=$p.style,d=rg.test(n),f="svg"===e.tagName.toLowerCase(),p=(f?"client":"offset")+(d?"Width":"Height"),g=100,m="px"===r,_="%"===r;if(r===u||!c||Ig[r]||Ig[u])return c;if("px"!==u&&!m&&(c=t(e,n,i,"px")),l=e.getCTM&&Lg(e),(_||"%"===u)&&(Qp[n]||~n.indexOf("adius")))return s=l?e.getBBox()[d?"width":"height"]:e[p],Ld(_?c/s*g:c/100*s);if(h[d?"width":"height"]=g+(m?u:r),o="rem"!==r&&~n.indexOf("adius")||"em"===r&&e.appendChild&&!f?e:e.parentNode,l&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Xp&&o.appendChild||(o=Xp.body),(a=o._gsap)&&_&&a.width&&d&&a.time===jf.time&&!a.uncache)return Ld(c/a.width*g);if(!_||"height"!==n&&"width"!==n)(_||"%"===u)&&!Fg[Mg(o,"display")]&&(h.position=Mg(e,"position")),o===e&&(h.position="static"),o.appendChild($p),s=$p[p],o.removeChild($p),h.position="absolute";else{var v=e.style[n];e.style[n]=g+r,s=e[p],v?e.style[n]=v:Og(e,n)}return d&&_&&((a=Pd(o)).time=jf.time,a.width=o[p]),Ld(m?s*c/g:s&&c?g/s*c:0)},zg=function(t,e,n,i){var r;return Kp||Rg(),e in og&&"transform"!==e&&~(e=og[e]).indexOf(",")&&(e=e.split(",")[0]),Qp[e]&&"transform"!==e?(r=Jg(t,i),r="transformOrigin"!==e?r[e]:r.svg?r.origin:Zg(Mg(t,xg))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=Gg[e]&&Gg[e](t,e,n)||Mg(t,e)||Nd(t,e)||("opacity"===e?1:0)),n&&!~(r+"").trim().indexOf(" ")?Ug(t,e,r,n)+n:r},Bg=function(t,e,n,i){if(!n||"none"===n){var r=Ag(e,t,1),s=r&&Mg(t,r,1);s&&s!==n?(e=r,n=s):"borderColor"===e&&(n=Mg(t,"borderTopColor"))}var o,a,l,c,u,h,d,f,p,g,m,_=new Np(this._pt,t.style,e,0,1,Tp),v=0,y=0;if(_.b=n,_.e=i,n+="","var(--"===(i+="").substring(0,6)&&(i=Mg(t,i.substring(4,i.indexOf(")")))),"auto"===i&&(h=t.style[e],t.style[e]=i,i=Mg(t,e)||i,h?t.style[e]=h:Og(t,e)),Gf(o=[n,i]),i=o[1],l=(n=o[0]).match(od)||[],(i.match(od)||[]).length){for(;a=od.exec(i);)d=a[0],p=i.substring(v,a.index),u?u=(u+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(u=1),d!==(h=l[y++]||"")&&(c=parseFloat(h)||0,m=h.substr((c+"").length),"="===d.charAt(1)&&(d=kd(c,d)+m),f=parseFloat(d),g=d.substr((f+"").length),v=od.lastIndex-g.length,g||(g=g||Uh.units[e]||m,v===i.length&&(i+=g,_.e+=g)),m!==g&&(c=Ug(t,e,h,g)||0),_._pt={_next:_._pt,p:p||1===y?p:",",s:c,c:f-c,m:u&&u<4||"zIndex"===e?Math.round:0});_.c=v<i.length?i.substring(v,i.length):""}else _.r="display"===e&&"none"===i?dg:hg;return ld.test(i)&&(_.e=0),this._pt=_,_},Hg={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Vg=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=Hg[n]||n,e[1]=Hg[i]||i,e.join(" ")},Wg=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,s=e.t,o=s.style,a=e.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",i=1;else for(r=(a=a.split(",")).length;--r>-1;)n=a[r],Qp[n]&&(i=1,n="transformOrigin"===n?xg:yg),Og(s,n);i&&(Og(s,yg),l&&(l.svg&&s.removeAttribute("transform"),o.scale=o.rotate=o.translate="none",Jg(s,1),l.uncache=1,Sg(o)))}},Gg={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var s=t._pt=new Np(t._pt,e,n,0,0,Wg);return s.u=i,s.pr=-10,s.tween=r,t._props.push(n),1}}},jg=[1,0,0,1,0,0],Xg={},qg=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},Kg=function(t){var e=Mg(t,yg);return qg(e)?jg:e.substr(7).match(sd).map(Ld)},$g=function(t,e){var n,i,r,s,o=t._gsap||Pd(t),a=t.style,l=Kg(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?jg:l:(l!==jg||t.offsetParent||t===qp||o.svg||(r=a.display,a.display="block",(n=t.parentNode)&&(t.offsetParent||t.getBoundingClientRect().width)||(s=1,i=t.nextElementSibling,qp.appendChild(t)),l=Kg(t),r?a.display=r:Og(t,"display"),s&&(i?n.insertBefore(t,i):n?n.appendChild(t):qp.removeChild(t))),e&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Yg=function(t,e,n,i,r,s){var o,a,l,c=t._gsap,u=r||$g(t,!0),h=c.xOrigin||0,d=c.yOrigin||0,f=c.xOffset||0,p=c.yOffset||0,g=u[0],m=u[1],_=u[2],v=u[3],y=u[4],x=u[5],b=e.split(" "),S=parseFloat(b[0])||0,w=parseFloat(b[1])||0;n?u!==jg&&(a=g*v-m*_)&&(l=S*(-m/a)+w*(g/a)-(g*x-m*y)/a,S=S*(v/a)+w*(-_/a)+(_*x-v*y)/a,w=l):(S=(o=Dg(t)).x+(~b[0].indexOf("%")?S/100*o.width:S),w=o.y+(~(b[1]||b[0]).indexOf("%")?w/100*o.height:w)),i||!1!==i&&c.smooth?(y=S-h,x=w-d,c.xOffset=f+(y*g+x*_)-y,c.yOffset=p+(y*m+x*v)-x):c.xOffset=c.yOffset=0,c.xOrigin=S,c.yOrigin=w,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[xg]="0px 0px",s&&(kg(s,c,"xOrigin",h,S),kg(s,c,"yOrigin",d,w),kg(s,c,"xOffset",f,c.xOffset),kg(s,c,"yOffset",p,c.yOffset)),t.setAttribute("data-svg-origin",S+" "+w)},Jg=function(t,e){var n=t._gsap||new rp(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,s,o,a,l,c,u,h,d,f,p,g,m,_,v,y,x,b,S,w,E,T,M,C,A,R,P,N,D,L,O,k=t.style,I=n.scaleX<0,F="px",U="deg",z=getComputedStyle(t),B=Mg(t,xg)||"0";return i=r=s=l=c=u=h=d=f=0,o=a=1,n.svg=!(!t.getCTM||!Lg(t)),z.translate&&("none"===z.translate&&"none"===z.scale&&"none"===z.rotate||(k[yg]=("none"!==z.translate?"translate3d("+(z.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==z.rotate?"rotate("+z.rotate+") ":"")+("none"!==z.scale?"scale("+z.scale.split(" ").join(",")+") ":"")+("none"!==z[yg]?z[yg]:"")),k.scale=k.rotate=k.translate="none"),m=$g(t,n.svg),n.svg&&(n.uncache?(C=t.getBBox(),B=n.xOrigin-C.x+"px "+(n.yOrigin-C.y)+"px",M=""):M=!e&&t.getAttribute("data-svg-origin"),Yg(t,M||B,!!M||n.originIsAbsolute,!1!==n.smooth,m)),p=n.xOrigin||0,g=n.yOrigin||0,m!==jg&&(x=m[0],b=m[1],S=m[2],w=m[3],i=E=m[4],r=T=m[5],6===m.length?(o=Math.sqrt(x*x+b*b),a=Math.sqrt(w*w+S*S),l=x||b?ng(b,x)*tg:0,(h=S||w?ng(S,w)*tg+l:0)&&(a*=Math.abs(Math.cos(h*eg))),n.svg&&(i-=p-(p*x+g*S),r-=g-(p*b+g*w))):(O=m[6],D=m[7],R=m[8],P=m[9],N=m[10],L=m[11],i=m[12],r=m[13],s=m[14],c=(_=ng(O,N))*tg,_&&(M=E*(v=Math.cos(-_))+R*(y=Math.sin(-_)),C=T*v+P*y,A=O*v+N*y,R=E*-y+R*v,P=T*-y+P*v,N=O*-y+N*v,L=D*-y+L*v,E=M,T=C,O=A),u=(_=ng(-S,N))*tg,_&&(v=Math.cos(-_),L=w*(y=Math.sin(-_))+L*v,x=M=x*v-R*y,b=C=b*v-P*y,S=A=S*v-N*y),l=(_=ng(b,x))*tg,_&&(M=x*(v=Math.cos(_))+b*(y=Math.sin(_)),C=E*v+T*y,b=b*v-x*y,T=T*v-E*y,x=M,E=C),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),o=Ld(Math.sqrt(x*x+b*b+S*S)),a=Ld(Math.sqrt(T*T+O*O)),_=ng(E,T),h=Math.abs(_)>2e-4?_*tg:0,f=L?1/(L<0?-L:L):0),n.svg&&(M=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!qg(Mg(t,yg)),M&&t.setAttribute("transform",M))),Math.abs(h)>90&&Math.abs(h)<270&&(I?(o*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,h+=h<=0?180:-180)),e=e||n.uncache,n.x=i-((n.xPercent=i&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+F,n.y=r-((n.yPercent=r&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+F,n.z=s+F,n.scaleX=Ld(o),n.scaleY=Ld(a),n.rotation=Ld(l)+U,n.rotationX=Ld(c)+U,n.rotationY=Ld(u)+U,n.skewX=h+U,n.skewY=d+U,n.transformPerspective=f+F,(n.zOrigin=parseFloat(B.split(" ")[2])||!e&&n.zOrigin||0)&&(k[xg]=Zg(B)),n.xOffset=n.yOffset=0,n.force3D=Uh.force3D,n.renderTransform=n.svg?sm:Zp?rm:tm,n.uncache=0,n},Zg=function(t){return(t=t.split(" "))[0]+" "+t[1]},Qg=function(t,e,n){var i=vf(e);return Ld(parseFloat(e)+parseFloat(Ug(t,"x",n+"px",i)))+i},tm=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,rm(t,e)},em="0deg",nm="0px",im=") ",rm=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,s=n.x,o=n.y,a=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,p=n.scaleY,g=n.transformPerspective,m=n.force3D,_=n.target,v=n.zOrigin,y="",x="auto"===m&&t&&1!==t||!0===m;if(v&&(u!==em||c!==em)){var b,S=parseFloat(c)*eg,w=Math.sin(S),E=Math.cos(S);S=parseFloat(u)*eg,b=Math.cos(S),s=Qg(_,s,w*b*-v),o=Qg(_,o,-Math.sin(S)*-v),a=Qg(_,a,E*b*-v+v)}g!==nm&&(y+="perspective("+g+im),(i||r)&&(y+="translate("+i+"%, "+r+"%) "),(x||s!==nm||o!==nm||a!==nm)&&(y+=a!==nm||x?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+im),l!==em&&(y+="rotate("+l+im),c!==em&&(y+="rotateY("+c+im),u!==em&&(y+="rotateX("+u+im),h===em&&d===em||(y+="skew("+h+", "+d+im),1===f&&1===p||(y+="scale("+f+", "+p+im),_.style[yg]=y||"translate(0, 0)"},sm=function(t,e){var n,i,r,s,o,a=e||this,l=a.xPercent,c=a.yPercent,u=a.x,h=a.y,d=a.rotation,f=a.skewX,p=a.skewY,g=a.scaleX,m=a.scaleY,_=a.target,v=a.xOrigin,y=a.yOrigin,x=a.xOffset,b=a.yOffset,S=a.forceCSS,w=parseFloat(u),E=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),d+=p),d||f?(d*=eg,f*=eg,n=Math.cos(d)*g,i=Math.sin(d)*g,r=Math.sin(d-f)*-m,s=Math.cos(d-f)*m,f&&(p*=eg,o=Math.tan(f-p),r*=o=Math.sqrt(1+o*o),s*=o,p&&(o=Math.tan(p),n*=o=Math.sqrt(1+o*o),i*=o)),n=Ld(n),i=Ld(i),r=Ld(r),s=Ld(s)):(n=g,s=m,i=r=0),(w&&!~(u+"").indexOf("px")||E&&!~(h+"").indexOf("px"))&&(w=Ug(_,"x",u,"px"),E=Ug(_,"y",h,"px")),(v||y||x||b)&&(w=Ld(w+v-(v*n+y*r)+x),E=Ld(E+y-(v*i+y*s)+b)),(l||c)&&(o=_.getBBox(),w=Ld(w+l/100*o.width),E=Ld(E+c/100*o.height)),o="matrix("+n+","+i+","+r+","+s+","+w+","+E+")",_.setAttribute("transform",o),S&&(_.style[yg]=o)},om=function(t,e,n,i,r){var s,o,a=360,l=Kh(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?tg:1)-i,u=i+c+"deg";return l&&("short"===(s=r.split("_")[1])&&(c%=a)!==c%180&&(c+=c<0?a:-360),"cw"===s&&c<0?c=(c+36e9)%a-~~(c/a)*a:"ccw"===s&&c>0&&(c=(c-36e9)%a-~~(c/a)*a)),t._pt=o=new Np(t._pt,e,n,i,c,lg),o.e=u,o.u="deg",t._props.push(n),o},am=function(t,e){for(var n in e)t[n]=e[n];return t},lm=function(t,e,n){var i,r,s,o,a,l,c,u=am({},n._gsap),h=n.style;for(r in u.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),h[yg]=e,i=Jg(n,1),Og(n,yg),n.setAttribute("transform",s)):(s=getComputedStyle(n)[yg],h[yg]=e,i=Jg(n,1),h[yg]=s),Qp)(s=u[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(a=vf(s)!==(c=vf(o))?Ug(n,r,s,c):parseFloat(s),l=parseFloat(o),t._pt=new Np(t._pt,i,r,a,l-a,ag),t._pt.u=c||0,t._props.push(r));am(i,u)};Dd("padding,margin,Width,Radius",function(t,e){var n="Top",i="Right",r="Bottom",s="Left",o=(e<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map(function(n){return e<2?t+n:"border"+n+t});Gg[e>1?"border"+t:t]=function(t,e,n,i,r){var s,a;if(arguments.length<4)return s=o.map(function(e){return zg(t,e,n)}),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(i+"").split(" "),a={},o.forEach(function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]}),t.init(e,a,r)}});var cm,um,hm,dm={name:"css",register:Rg,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var s,o,a,l,c,u,h,d,f,p,g,m,_,v,y,x,b=this._props,S=t.style,w=n.vars.startAt;for(h in Kp||Rg(),this.styles=this.styles||Eg(t),x=this.styles.props,this.tween=n,e)if("autoRound"!==h&&(o=e[h],!Ed[h]||!hp(h,e,n,i,t,r)))if(c=typeof o,u=Gg[h],"function"===c&&(c=typeof(o=o.call(n,i,t,r))),"string"===c&&~o.indexOf("random(")&&(o=Rf(o)),u)u(this,t,h,o,n)&&(y=1);else if("--"===h.substr(0,2))s=(getComputedStyle(t).getPropertyValue(h)+"").trim(),o+="",Vf.lastIndex=0,Vf.test(s)||(d=vf(s),f=vf(o)),f?d!==f&&(s=Ug(t,h,s,f)+f):d&&(o+=d),this.add(S,"setProperty",s,o,i,r,0,0,h),b.push(h),x.push(h,0,S[h]);else if("undefined"!==c){if(w&&h in w?(s="function"==typeof w[h]?w[h].call(n,i,t,r):w[h],Kh(s)&&~s.indexOf("random(")&&(s=Rf(s)),vf(s+"")||"auto"===s||(s+=Uh.units[h]||vf(zg(t,h))||""),"="===(s+"").charAt(1)&&(s=zg(t,h))):s=zg(t,h),l=parseFloat(s),(p="string"===c&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),h in og&&("autoAlpha"===h&&(1===l&&"hidden"===zg(t,"visibility")&&a&&(l=0),x.push("visibility",0,S.visibility),kg(this,S,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==h&&"transform"!==h&&~(h=og[h]).indexOf(",")&&(h=h.split(",")[0])),g=h in Qp)if(this.styles.save(h),"string"===c&&"var(--"===o.substring(0,6)&&(o=Mg(t,o.substring(4,o.indexOf(")"))),a=parseFloat(o)),m||((_=t._gsap).renderTransform&&!e.parseTransform||Jg(t,e.parseTransform),v=!1!==e.smoothOrigin&&_.smooth,(m=this._pt=new Np(this._pt,S,yg,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===h)this._pt=new Np(this._pt,_,"scaleY",_.scaleY,(p?kd(_.scaleY,p+a):a)-_.scaleY||0,ag),this._pt.u=0,b.push("scaleY",h),h+="X";else{if("transformOrigin"===h){x.push(xg,0,S[xg]),o=Vg(o),_.svg?Yg(t,o,0,v,0,this):((f=parseFloat(o.split(" ")[2])||0)!==_.zOrigin&&kg(this,_,"zOrigin",_.zOrigin,f),kg(this,S,h,Zg(s),Zg(o)));continue}if("svgOrigin"===h){Yg(t,o,1,v,0,this);continue}if(h in Xg){om(this,_,h,l,p?kd(l,p+o):o);continue}if("smoothOrigin"===h){kg(this,_,"smooth",_.smooth,o);continue}if("force3D"===h){_[h]=o;continue}if("transform"===h){lm(this,o,t);continue}}else h in S||(h=Ag(h)||h);if(g||(a||0===a)&&(l||0===l)&&!sg.test(o)&&h in S)a||(a=0),(d=(s+"").substr((l+"").length))!==(f=vf(o)||(h in Uh.units?Uh.units[h]:d))&&(l=Ug(t,h,s,f)),this._pt=new Np(this._pt,g?_:S,h,l,(p?kd(l,p+a):a)-l,g||"px"!==f&&"zIndex"!==h||!1===e.autoRound?ag:ug),this._pt.u=f||0,d!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=cg);else if(h in S)Bg.call(this,t,h,s,p?p+o:o);else if(h in t)this.add(t,h,s||t[h],p?p+o:o,i,r);else if("parseTransform"!==h){pd();continue}g||(h in S?x.push(h,0,S[h]):"function"==typeof t[h]?x.push(h,2,t[h]()):x.push(h,1,s||t[h])),b.push(h)}y&&Pp(this)},render:function(t,e){if(e.tween._time||!Jp())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:zg,aliases:og,getSetter:function(t,e,n){var i=og[e];return i&&i.indexOf(",")<0&&(e=i),e in Qp&&e!==xg&&(t._gsap.x||zg(t,"x"))?n&&Yp===n?"scale"===e?mg:gg:(Yp=n||{})&&("scale"===e?_g:vg):t.style&&!Jh(t.style[e])?fg:~e.indexOf("-")?pg:Sp(t,e)},core:{_removeProperty:Og,_getMatrix:$g}};Gp.utils.checkPrefix=Ag,Gp.core.getStyleSaver=Eg,hm=Dd((cm="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(um="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){Qp[t]=1}),Dd(um,function(t){Uh.units[t]="deg",Xg[t]=1}),og[hm[13]]=cm+","+um,Dd("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");og[e[1]]=hm[e[0]]}),Dd("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Uh.units[t]="px"}),Gp.registerPlugin(dm);var fm=Gp.registerPlugin(dm)||Gp;fm.core.Tween;const pm=t=>"string"==typeof t,gm=()=>{let t,e;const n=new Promise((n,i)=>{t=n,e=i});return n.resolve=t,n.reject=e,n},mm=t=>null==t?"":""+t,_m=/###/g,vm=t=>t&&t.indexOf("###")>-1?t.replace(_m,"."):t,ym=t=>!t||pm(t),xm=(t,e,n)=>{const i=pm(e)?e.split("."):e;let r=0;for(;r<i.length-1;){if(ym(t))return{};const e=vm(i[r]);!t[e]&&n&&(t[e]=new n),t=Object.prototype.hasOwnProperty.call(t,e)?t[e]:{},++r}return ym(t)?{}:{obj:t,k:vm(i[r])}},bm=(t,e,n)=>{const{obj:i,k:r}=xm(t,e,Object);if(void 0!==i||1===e.length)return void(i[r]=n);let s=e[e.length-1],o=e.slice(0,e.length-1),a=xm(t,o,Object);for(;void 0===a.obj&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=xm(t,o,Object),(null==a?void 0:a.obj)&&void 0!==a.obj[`${a.k}.${s}`]&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},Sm=(t,e)=>{const{obj:n,k:i}=xm(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,i))return n[i]},wm=(t,e,n)=>{for(const i in e)"__proto__"!==i&&"constructor"!==i&&(i in t?pm(t[i])||t[i]instanceof String||pm(e[i])||e[i]instanceof String?n&&(t[i]=e[i]):wm(t[i],e[i],n):t[i]=e[i]);return t},Em=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Tm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Mm=t=>pm(t)?t.replace(/[&<>"'\/]/g,t=>Tm[t]):t;const Cm=[" ",",","?","!",";"],Am=new class{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const e=this.regExpMap.get(t);if(void 0!==e)return e;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}(20),Rm=(t,e,n=".")=>{if(!t)return;if(t[e]){if(!Object.prototype.hasOwnProperty.call(t,e))return;return t[e]}const i=e.split(n);let r=t;for(let s=0;s<i.length;){if(!r||"object"!=typeof r)return;let t,e="";for(let o=s;o<i.length;++o)if(o!==s&&(e+=n),e+=i[o],t=r[e],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<i.length-1)continue;s+=o-s+1;break}r=t}return r},Pm=t=>null==t?void 0:t.replace("_","-"),Nm={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,i;null==(i=null==(n=null==console?void 0:console[t])?void 0:n.apply)||i.call(n,console,e)}};class Dm{constructor(t,e={}){this.init(t,e)}init(t,e={}){this.prefix=e.prefix||"i18next:",this.logger=t||Nm,this.options=e,this.debug=e.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,e,n,i){return i&&!this.debug?null:(pm(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[e](t))}create(t){return new Dm(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return(t=t||this.options).prefix=t.prefix||this.prefix,new Dm(this.logger,t)}}var Lm=new Dm;class Om{constructor(){this.observers={}}on(t,e){return t.split(" ").forEach(t=>{this.observers[t]||(this.observers[t]=new Map);const n=this.observers[t].get(e)||0;this.observers[t].set(e,n+1)}),this}off(t,e){this.observers[t]&&(e?this.observers[t].delete(e):delete this.observers[t])}emit(t,...e){if(this.observers[t]){Array.from(this.observers[t].entries()).forEach(([t,n])=>{for(let i=0;i<n;i++)t(...e)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let r=0;r<i;r++)n.apply(n,[t,...e])})}}}class km extends Om{constructor(t,e={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const e=this.options.ns.indexOf(t);e>-1&&this.options.ns.splice(e,1)}getResource(t,e,n,i={}){var r,s;const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,a=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,e],n&&(Array.isArray(n)?l.push(...n):pm(n)&&o?l.push(...n.split(o)):l.push(n)));const c=Sm(this.data,l);return!c&&!e&&!n&&t.indexOf(".")>-1&&(t=l[0],e=l[1],n=l.slice(2).join(".")),!c&&a&&pm(n)?Rm(null==(s=null==(r=this.data)?void 0:r[t])?void 0:s[e],n,o):c}addResource(t,e,n,i,r={silent:!1}){const s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let o=[t,e];n&&(o=o.concat(s?n.split(s):n)),t.indexOf(".")>-1&&(o=t.split("."),i=e,e=o[1]),this.addNamespaces(e),bm(this.data,o,i),r.silent||this.emit("added",t,e,n,i)}addResources(t,e,n,i={silent:!1}){for(const r in n)(pm(n[r])||Array.isArray(n[r]))&&this.addResource(t,e,r,n[r],{silent:!0});i.silent||this.emit("added",t,e,n)}addResourceBundle(t,e,n,i,r,s={silent:!1,skipCopy:!1}){let o=[t,e];t.indexOf(".")>-1&&(o=t.split("."),i=n,n=e,e=o[1]),this.addNamespaces(e);let a=Sm(this.data,o)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?wm(a,n,r):a={...a,...n},bm(this.data,o,a),s.silent||this.emit("added",t,e,n)}removeResourceBundle(t,e){this.hasResourceBundle(t,e)&&delete this.data[t][e],this.removeNamespaces(e),this.emit("removed",t,e)}hasResourceBundle(t,e){return void 0!==this.getResource(t,e)}getResourceBundle(t,e){return e||(e=this.options.defaultNS),this.getResource(t,e)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const e=this.getDataByLanguage(t);return!!(e&&Object.keys(e)||[]).find(t=>e[t]&&Object.keys(e[t]).length>0)}toJSON(){return this.data}}var Im={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,i,r){return t.forEach(t=>{var s;e=(null==(s=this.processors[t])?void 0:s.process(e,n,i,r))??e}),e}};const Fm=Symbol("i18next/PATH_KEY");function Um(t,e){const{[Fm]:n}=t(function(){const t=[],e=Object.create(null);let n;return e.get=(i,r)=>{var s;return null==(s=null==n?void 0:n.revoke)||s.call(n),r===Fm?t:(t.push(r),n=Proxy.revocable(i,e),n.proxy)},Proxy.revocable(Object.create(null),e).proxy}());return n.join((null==e?void 0:e.keySeparator)??".")}const zm={},Bm=t=>!pm(t)&&"boolean"!=typeof t&&"number"!=typeof t;class Hm extends Om{constructor(t,e={}){var n,i;super(),n=t,i=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(t=>{n[t]&&(i[t]=n[t])}),this.options=e,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Lm.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,e={interpolation:{}}){const n={...e};if(null==t)return!1;const i=this.resolve(t,n);if(void 0===(null==i?void 0:i.res))return!1;const r=Bm(i.res);return!1!==n.returnObjects||!r}extractFromKey(t,e){let n=void 0!==e.nsSeparator?e.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==e.keySeparator?e.keySeparator:this.options.keySeparator;let r=e.ns||this.options.defaultNS||[];const s=n&&t.indexOf(n)>-1,o=!(this.options.userDefinedKeySeparator||e.keySeparator||this.options.userDefinedNsSeparator||e.nsSeparator||((t,e,n)=>{e=e||"",n=n||"";const i=Cm.filter(t=>e.indexOf(t)<0&&n.indexOf(t)<0);if(0===i.length)return!0;const r=Am.getRegExp(`(${i.map(t=>"?"===t?"\\?":t).join("|")})`);let s=!r.test(t);if(!s){const e=t.indexOf(n);e>0&&!r.test(t.substring(0,e))&&(s=!0)}return s})(t,n,i));if(s&&!o){const e=t.match(this.interpolator.nestingRegexp);if(e&&e.length>0)return{key:t,namespaces:pm(r)?[r]:r};const s=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(s[0])>-1)&&(r=s.shift()),t=s.join(i)}return{key:t,namespaces:pm(r)?[r]:r}}translate(t,e,n){let i="object"==typeof e?{...e}:e;if("object"!=typeof i&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof i&&(i={...i}),i||(i={}),null==t)return"";"function"==typeof t&&(t=Um(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const r=void 0!==i.returnDetails?i.returnDetails:this.options.returnDetails,s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(t[t.length-1],i),l=a[a.length-1];let c=void 0!==i.nsSeparator?i.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=i.lng||this.language,h=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==u?void 0:u.toLowerCase()))return h?r?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${c}${o}`:r?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:o;const d=this.resolve(t,i);let f=null==d?void 0:d.res;const p=(null==d?void 0:d.usedKey)||o,g=(null==d?void 0:d.exactUsedKey)||o,m=void 0!==i.joinArrays?i.joinArrays:this.options.joinArrays,_=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==i.count&&!pm(i.count),y=Hm.hasDefaultValue(i),x=v?this.pluralResolver.getSuffix(u,i.count,i):"",b=i.ordinal&&v?this.pluralResolver.getSuffix(u,i.count,{ordinal:!1}):"",S=v&&!i.ordinal&&0===i.count,w=S&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${x}`]||i[`defaultValue${b}`]||i.defaultValue;let E=f;_&&!f&&y&&(E=w);const T=Bm(E),M=Object.prototype.toString.apply(E);if(!(_&&E&&T&&["[object Number]","[object Function]","[object RegExp]"].indexOf(M)<0)||pm(m)&&Array.isArray(E))if(_&&pm(m)&&Array.isArray(f))f=f.join(m),f&&(f=this.extendTranslation(f,t,i,n));else{let e=!1,r=!1;!this.isValidLookup(f)&&y&&(e=!0,f=w),this.isValidLookup(f)||(r=!0,f=o);const a=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&r?void 0:f,h=y&&w!==f&&this.options.updateMissing;if(r||e||h){if(this.logger.log(h?"updateKey":"missingKey",u,l,o,h?w:f),s){const t=this.resolve(o,{...i,keySeparator:!1});t&&t.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let t=[];const e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if("fallback"===this.options.saveMissingTo&&e&&e[0])for(let i=0;i<e.length;i++)t.push(e[i]);else"all"===this.options.saveMissingTo?t=this.languageUtils.toResolveHierarchy(i.lng||this.language):t.push(i.lng||this.language);const n=(t,e,n)=>{var r;const s=y&&n!==f?n:a;this.options.missingKeyHandler?this.options.missingKeyHandler(t,l,e,s,h,i):(null==(r=this.backendConnector)?void 0:r.saveMissing)&&this.backendConnector.saveMissing(t,l,e,s,h,i),this.emit("missingKey",t,l,e,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?t.forEach(t=>{const e=this.pluralResolver.getSuffixes(t,i);S&&i[`defaultValue${this.options.pluralSeparator}zero`]&&e.indexOf(`${this.options.pluralSeparator}zero`)<0&&e.push(`${this.options.pluralSeparator}zero`),e.forEach(e=>{n([t],o+e,i[`defaultValue${e}`]||w)})}):n(t,o,w))}f=this.extendTranslation(f,t,i,d,n),r&&f===o&&this.options.appendNamespaceToMissingKey&&(f=`${l}${c}${o}`),(r||e)&&this.options.parseMissingKeyHandler&&(f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,e?f:void 0,i))}else{if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const t=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,E,{...i,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return r?(d.res=t,d.usedParams=this.getUsedParamsDetails(i),d):t}if(s){const t=Array.isArray(E),e=t?[]:{},n=t?g:p;for(const r in E)if(Object.prototype.hasOwnProperty.call(E,r)){const t=`${n}${s}${r}`;e[r]=y&&!f?this.translate(t,{...i,defaultValue:Bm(w)?w[r]:void 0,joinArrays:!1,ns:a}):this.translate(t,{...i,joinArrays:!1,ns:a}),e[r]===t&&(e[r]=E[r])}f=e}}return r?(d.res=f,d.usedParams=this.getUsedParamsDetails(i),d):f}extendTranslation(t,e,n,i,r){var s,o;if(null==(s=this.i18nFormat)?void 0:s.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const s=pm(t)&&(void 0!==(null==(o=null==n?void 0:n.interpolation)?void 0:o.skipOnVariables)?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(s){const e=t.match(this.interpolator.nestingRegexp);a=e&&e.length}let l=n.replace&&!pm(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),t=this.interpolator.interpolate(t,l,n.lng||this.language||i.usedLng,n),s){const e=t.match(this.interpolator.nestingRegexp);a<(e&&e.length)&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(t=this.interpolator.nest(t,(...t)=>(null==r?void 0:r[0])!==t[0]||n.context?this.translate(...t,e):(this.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: ${e[0]}`),null),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,l=pm(a)?[a]:a;return null!=t&&(null==l?void 0:l.length)&&!1!==n.applyPostProcessor&&(t=Im.handle(l,t,e,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,e={}){let n,i,r,s,o;return pm(t)&&(t=[t]),t.forEach(t=>{if(this.isValidLookup(n))return;const a=this.extractFromKey(t,e),l=a.key;i=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==e.count&&!pm(e.count),h=u&&!e.ordinal&&0===e.count,d=void 0!==e.context&&(pm(e.context)||"number"==typeof e.context)&&""!==e.context,f=e.lngs?e.lngs:this.languageUtils.toResolveHierarchy(e.lng||this.language,e.fallbackLng);c.forEach(t=>{var a,c;this.isValidLookup(n)||(o=t,zm[`${f[0]}-${t}`]||!(null==(a=this.utils)?void 0:a.hasLoadedNamespace)||(null==(c=this.utils)?void 0:c.hasLoadedNamespace(o))||(zm[`${f[0]}-${t}`]=!0,this.logger.warn(`key "${i}" for languages "${f.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(i=>{var o;if(this.isValidLookup(n))return;s=i;const a=[l];if(null==(o=this.i18nFormat)?void 0:o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,i,t,e);else{let t;u&&(t=this.pluralResolver.getSuffix(i,e.count,e));const n=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(e.ordinal&&0===t.indexOf(r)&&a.push(l+t.replace(r,this.options.pluralSeparator)),a.push(l+t),h&&a.push(l+n)),d){const i=`${l}${this.options.contextSeparator||"_"}${e.context}`;a.push(i),u&&(e.ordinal&&0===t.indexOf(r)&&a.push(i+t.replace(r,this.options.pluralSeparator)),a.push(i+t),h&&a.push(i+n))}}let c;for(;c=a.pop();)this.isValidLookup(n)||(r=c,n=this.getResource(i,t,c,e))}))})}),{res:n,usedKey:i,exactUsedKey:r,usedLng:s,usedNS:o}}isValidLookup(t){return!(void 0===t||!this.options.returnNull&&null===t||!this.options.returnEmptyString&&""===t)}getResource(t,e,n,i={}){var r;return(null==(r=this.i18nFormat)?void 0:r.getResource)?this.i18nFormat.getResource(t,e,n,i):this.resourceStore.getResource(t,e,n,i)}getUsedParamsDetails(t={}){const e=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!pm(t.replace);let i=n?t.replace:t;if(n&&void 0!==t.count&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const t of e)delete i[t]}return i}static hasDefaultValue(t){const e="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e===n.substring(0,12)&&void 0!==t[n])return!0;return!1}}class Vm{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Lm.create("languageUtils")}getScriptPartFromCode(t){if(!(t=Pm(t))||t.indexOf("-")<0)return null;const e=t.split("-");return 2===e.length?null:(e.pop(),"x"===e[e.length-1].toLowerCase()?null:this.formatLanguageCode(e.join("-")))}getLanguagePartFromCode(t){if(!(t=Pm(t))||t.indexOf("-")<0)return t;const e=t.split("-");return this.formatLanguageCode(e[0])}formatLanguageCode(t){if(pm(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch(e){}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let e;return t.forEach(t=>{if(e)return;const n=this.formatLanguageCode(t);this.options.supportedLngs&&!this.isSupportedCode(n)||(e=n)}),!e&&this.options.supportedLngs&&t.forEach(t=>{if(e)return;const n=this.getScriptPartFromCode(t);if(this.isSupportedCode(n))return e=n;const i=this.getLanguagePartFromCode(t);if(this.isSupportedCode(i))return e=i;e=this.options.supportedLngs.find(t=>t===i?t:t.indexOf("-")<0&&i.indexOf("-")<0?void 0:t.indexOf("-")>0&&i.indexOf("-")<0&&t.substring(0,t.indexOf("-"))===i||0===t.indexOf(i)&&i.length>1?t:void 0)}),e||(e=this.getFallbackCodes(this.options.fallbackLng)[0]),e}getFallbackCodes(t,e){if(!t)return[];if("function"==typeof t&&(t=t(e)),pm(t)&&(t=[t]),Array.isArray(t))return t;if(!e)return t.default||[];let n=t[e];return n||(n=t[this.getScriptPartFromCode(e)]),n||(n=t[this.formatLanguageCode(e)]),n||(n=t[this.getLanguagePartFromCode(e)]),n||(n=t.default),n||[]}toResolveHierarchy(t,e){const n=this.getFallbackCodes((!1===e?[]:e)||this.options.fallbackLng||[],t),i=[],r=t=>{t&&(this.isSupportedCode(t)?i.push(t):this.logger.warn(`rejecting language code not found in supportedLngs: ${t}`))};return pm(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?("languageOnly"!==this.options.load&&r(this.formatLanguageCode(t)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&r(this.getScriptPartFromCode(t)),"currentOnly"!==this.options.load&&r(this.getLanguagePartFromCode(t))):pm(t)&&r(this.formatLanguageCode(t)),n.forEach(t=>{i.indexOf(t)<0&&r(this.formatLanguageCode(t))}),i}}const Wm={zero:0,one:1,two:2,few:3,many:4,other:5},Gm={select:t=>1===t?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class jm{constructor(t,e={}){this.languageUtils=t,this.options=e,this.logger=Lm.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,e){this.rules[t]=e}clearCache(){this.pluralRulesCache={}}getRule(t,e={}){const n=Pm("dev"===t?"en":t),i=e.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let s;try{s=new Intl.PluralRules(n,{type:i})}catch(o){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Gm;if(!t.match(/-|_/))return Gm;const n=this.languageUtils.getLanguagePartFromCode(t);s=this.getRule(n,e)}return this.pluralRulesCache[r]=s,s}needsPlural(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),(null==n?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,e,n={}){return this.getSuffixes(t,n).map(t=>`${e}${t}`)}getSuffixes(t,e={}){let n=this.getRule(t,e);return n||(n=this.getRule("dev",e)),n?n.resolvedOptions().pluralCategories.sort((t,e)=>Wm[t]-Wm[e]).map(t=>`${this.options.prepend}${e.ordinal?`ordinal${this.options.prepend}`:""}${t}`):[]}getSuffix(t,e,n={}){const i=this.getRule(t,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(e)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",e,n))}}const Xm=(t,e,n,i=".",r=!0)=>{let s=((t,e,n)=>{const i=Sm(t,n);return void 0!==i?i:Sm(e,n)})(t,e,n);return!s&&r&&pm(n)&&(s=Rm(t,n,i),void 0===s&&(s=Rm(e,n,i))),s},qm=t=>t.replace(/\$/g,"$$$$");class Km{constructor(t={}){var e;this.logger=Lm.create("interpolator"),this.options=t,this.format=(null==(e=null==t?void 0:t.interpolation)?void 0:e.format)||(t=>t),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:e,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:s,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:h,nestingPrefixEscaped:d,nestingSuffix:f,nestingSuffixEscaped:p,nestingOptionsSeparator:g,maxReplaces:m,alwaysFormat:_}=t.interpolation;this.escape=void 0!==e?e:Mm,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=r?Em(r):s||"{{",this.suffix=o?Em(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?Em(h):d||Em("$t("),this.nestingSuffix=f?Em(f):p||Em(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==_&&_,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(t,e)=>(null==t?void 0:t.source)===e?(t.lastIndex=0,t):new RegExp(e,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,e,n,i){var r;let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=t=>{if(t.indexOf(this.formatSeparator)<0){const r=Xm(e,l,t,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(r,void 0,n,{...i,...e,interpolationkey:t}):r}const r=t.split(this.formatSeparator),s=r.shift().trim(),o=r.join(this.formatSeparator).trim();return this.format(Xm(e,l,s,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...i,...e,interpolationkey:s})};this.resetRegExp();const u=(null==i?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,h=void 0!==(null==(r=null==i?void 0:i.interpolation)?void 0:r.skipOnVariables)?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:t=>qm(t)},{regex:this.regexp,safeValue:t=>this.escapeValue?qm(this.escape(t)):qm(t)}].forEach(e=>{for(a=0;s=e.regex.exec(t);){const n=s[1].trim();if(o=c(n),void 0===o)if("function"==typeof u){const e=u(t,s,i);o=pm(e)?e:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))o="";else{if(h){o=s[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${t}`),o=""}else pm(o)||this.useRawValueToEscape||(o=mm(o));const r=e.safeValue(o);if(t=t.replace(s[0],r),h?(e.regex.lastIndex+=o.length,e.regex.lastIndex-=s[0].length):e.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,e,n={}){let i,r,s;const o=(t,e)=>{const n=this.nestingOptionsSeparator;if(t.indexOf(n)<0)return t;const i=t.split(new RegExp(`${n}[ ]*{`));let r=`{${i[1]}`;t=i[0],r=this.interpolate(r,s);const o=r.match(/'/g),a=r.match(/"/g);(((null==o?void 0:o.length)??0)%2==0&&!a||a.length%2!=0)&&(r=r.replace(/'/g,'"'));try{s=JSON.parse(r),e&&(s={...e,...s})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${t}`,l),`${t}${n}${r}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,t};for(;i=this.nestingRegexp.exec(t);){let a=[];s={...n},s=s.replace&&!pm(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const l=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(-1!==l&&(a=i[1].slice(l).split(this.formatSeparator).map(t=>t.trim()).filter(Boolean),i[1]=i[1].slice(0,l)),r=e(o.call(this,i[1].trim(),s),s),r&&i[0]===t&&!pm(r))return r;pm(r)||(r=mm(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),r=""),a.length&&(r=a.reduce((t,e)=>this.format(t,e,n.lng,{...n,interpolationkey:i[1].trim()}),r.trim())),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t}}const $m=t=>{const e={};return(n,i,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const o=i+JSON.stringify(s);let a=e[o];return a||(a=t(Pm(i),r),e[o]=a),a(n)}},Ym=t=>(e,n,i)=>t(Pm(n),i)(e);class Jm{constructor(t={}){this.logger=Lm.create("formatter"),this.options=t,this.init(t)}init(t,e={interpolation:{}}){this.formatSeparator=e.interpolation.formatSeparator||",";const n=e.cacheInBuiltFormats?$m:Ym;this.formats={number:n((t,e)=>{const n=new Intl.NumberFormat(t,{...e});return t=>n.format(t)}),currency:n((t,e)=>{const n=new Intl.NumberFormat(t,{...e,style:"currency"});return t=>n.format(t)}),datetime:n((t,e)=>{const n=new Intl.DateTimeFormat(t,{...e});return t=>n.format(t)}),relativetime:n((t,e)=>{const n=new Intl.RelativeTimeFormat(t,{...e});return t=>n.format(t,e.range||"day")}),list:n((t,e)=>{const n=new Intl.ListFormat(t,{...e});return t=>n.format(t)})}}add(t,e){this.formats[t.toLowerCase().trim()]=e}addCached(t,e){this.formats[t.toLowerCase().trim()]=$m(e)}format(t,e,n,i={}){const r=e.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(t=>t.indexOf(")")>-1)){const t=r.findIndex(t=>t.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,t)].join(this.formatSeparator)}return r.reduce((t,e)=>{var r;const{formatName:s,formatOptions:o}=(t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const i=t.split("(");e=i[0].toLowerCase().trim();const r=i[1].substring(0,i[1].length-1);"currency"===e&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):"relativetime"===e&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(t=>{if(t){const[e,...i]=t.split(":"),r=i.join(":").trim().replace(/^'+|'+$/g,""),s=e.trim();n[s]||(n[s]=r),"false"===r&&(n[s]=!1),"true"===r&&(n[s]=!0),isNaN(r)||(n[s]=parseInt(r,10))}})}return{formatName:e,formatOptions:n}})(e);if(this.formats[s]){let e=t;try{const a=(null==(r=null==i?void 0:i.formatParams)?void 0:r[i.interpolationkey])||{},l=a.locale||a.lng||i.locale||i.lng||n;e=this.formats[s](t,l,{...o,...i,...a})}catch(a){this.logger.warn(a)}return e}return this.logger.warn(`there was no format function for ${s}`),t},t)}}class Zm extends Om{constructor(t,e,n,i={}){var r,s;super(),this.backend=t,this.store=e,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Lm.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],null==(s=null==(r=this.backend)?void 0:r.init)||s.call(r,n,i.backend,i)}queueLoad(t,e,n,i){const r={},s={},o={},a={};return t.forEach(t=>{let i=!0;e.forEach(e=>{const o=`${t}|${e}`;!n.reload&&this.store.hasResourceBundle(t,e)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===s[o]&&(s[o]=!0):(this.state[o]=1,i=!1,void 0===s[o]&&(s[o]=!0),void 0===r[o]&&(r[o]=!0),void 0===a[e]&&(a[e]=!0)))}),i||(o[t]=!0)}),(Object.keys(r).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(t,e,n){const i=t.split("|"),r=i[0],s=i[1];e&&this.emit("failedLoading",r,s,e),!e&&n&&this.store.addResourceBundle(r,s,n,void 0,void 0,{skipCopy:!0}),this.state[t]=e?-1:2,e&&n&&(this.state[t]=0);const o={};this.queue.forEach(n=>{((t,e,n)=>{const{obj:i,k:r}=xm(t,e,Object);i[r]=i[r]||[],i[r].push(n)})(n.loaded,[r],s),((t,e)=>{void 0!==t.pending[e]&&(delete t.pending[e],t.pendingCount--)})(n,t),e&&n.errors.push(e),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(t=>{o[t]||(o[t]={});const e=n.loaded[t];e.length&&e.forEach(e=>{void 0===o[t][e]&&(o[t][e]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(t=>!t.done)}read(t,e,n,i=0,r=this.retryTimeout,s){if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:t,ns:e,fcName:n,tried:i,wait:r,callback:s});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const t=this.waitingReads.shift();this.read(t.lng,t.ns,t.fcName,t.tried,t.wait,t.callback)}o&&a&&i<this.maxRetries?setTimeout(()=>{this.read.call(this,t,e,n,i+1,2*r,s)},r):s(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(t,e,o);try{const n=a(t,e);n&&"function"==typeof n.then?n.then(t=>o(null,t)).catch(o):o(null,n)}catch(l){o(l)}}prepareLoading(t,e,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();pm(t)&&(t=this.languageUtils.toResolveHierarchy(t)),pm(e)&&(e=[e]);const r=this.queueLoad(t,e,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(t=>{this.loadOne(t)})}load(t,e,n){this.prepareLoading(t,e,{},n)}reload(t,e,n){this.prepareLoading(t,e,{reload:!0},n)}loadOne(t,e=""){const n=t.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,(n,s)=>{n&&this.logger.warn(`${e}loading namespace ${r} for language ${i} failed`,n),!n&&s&&this.logger.log(`${e}loaded namespace ${r} for language ${i}`,s),this.loaded(t,n,s)})}saveMissing(t,e,n,i,r,s={},o=()=>{}){var a,l,c,u,h;if(!(null==(l=null==(a=this.services)?void 0:a.utils)?void 0:l.hasLoadedNamespace)||(null==(u=null==(c=this.services)?void 0:c.utils)?void 0:u.hasLoadedNamespace(e))){if(null!=n&&""!==n){if(null==(h=this.backend)?void 0:h.create){const a={...s,isUpdate:r},l=this.backend.create.bind(this.backend);if(l.length<6)try{let r;r=5===l.length?l(t,e,n,i,a):l(t,e,n,i),r&&"function"==typeof r.then?r.then(t=>o(null,t)).catch(o):o(null,r)}catch(d){o(d)}else l(t,e,n,i,o,a)}t&&t[0]&&this.store.addResource(t[0],e,n,i)}}else this.logger.warn(`did not save key "${n}" as the namespace "${e}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Qm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if("object"==typeof t[1]&&(e=t[1]),pm(t[1])&&(e.defaultValue=t[1]),pm(t[2])&&(e.tDescription=t[2]),"object"==typeof t[2]||"object"==typeof t[3]){const n=t[3]||t[2];Object.keys(n).forEach(t=>{e[t]=n[t]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),t_=t=>{var e,n;return pm(t.ns)&&(t.ns=[t.ns]),pm(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),pm(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),(null==(n=null==(e=t.supportedLngs)?void 0:e.indexOf)?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),"boolean"==typeof t.initImmediate&&(t.initAsync=t.initImmediate),t},e_=()=>{};class n_ extends Om{constructor(t={},e){var n;if(super(),this.options=t_(t),this.services={},this.logger=Lm,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{"function"==typeof n[t]&&(n[t]=n[t].bind(n))}),e&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,e),this;setTimeout(()=>{this.init(t,e)},0)}}init(t={},e){this.isInitializing=!0,"function"==typeof t&&(e=t,t={}),null==t.defaultNS&&t.ns&&(pm(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Qm();this.options={...n,...this.options,...t_(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=t=>t?"function"==typeof t?new t:t:null;if(!this.options.isClone){let t;this.modules.logger?Lm.init(i(this.modules.logger),this.options):Lm.init(null,this.options),t=this.modules.formatter?this.modules.formatter:Jm;const e=new Vm(this.options);this.store=new km(this.options.resources,this.options);const r=this.services;r.logger=Lm,r.resourceStore=this.store,r.languageUtils=e,r.pluralResolver=new jm(e,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!t||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(r.formatter=i(t),r.formatter.init&&r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new Km(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new Zm(i(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(t,...e)=>{this.emit(t,...e)}),this.modules.languageDetector&&(r.languageDetector=i(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=i(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new Hm(this.services,this.options),this.translator.on("*",(t,...e)=>{this.emit(t,...e)}),this.modules.external.forEach(t=>{t.init&&t.init(this)})}if(this.format=this.options.interpolation.format,e||(e=e_),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const t=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);t.length>0&&"dev"!==t[0]&&(this.options.lng=t[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=(...e)=>this.store[t](...e)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=(...e)=>(this.store[t](...e),this)});const r=gm(),s=()=>{const t=(t,n)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(n),e(t,n)};if(this.languages&&!this.isInitialized)return t(null,this.t.bind(this));this.changeLanguage(this.options.lng,t)};return this.options.resources||!this.options.initAsync?s():setTimeout(s,0),r}loadResources(t,e=e_){var n,i;let r=e;const s=pm(t)?t:this.language;if("function"==typeof t&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==s?void 0:s.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return r();const t=[],e=e=>{if(!e)return;if("cimode"===e)return;this.services.languageUtils.toResolveHierarchy(e).forEach(e=>{"cimode"!==e&&t.indexOf(e)<0&&t.push(e)})};if(s)e(s);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(t=>e(t))}null==(i=null==(n=this.options.preload)?void 0:n.forEach)||i.call(n,t=>e(t)),this.services.backendConnector.load(t,this.options.ns,t=>{t||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),r(t)})}else r(null)}reloadResources(t,e,n){const i=gm();return"function"==typeof t&&(n=t,t=void 0),"function"==typeof e&&(n=e,e=void 0),t||(t=this.languages),e||(e=this.options.ns),n||(n=e_),this.services.backendConnector.reload(t,e,t=>{i.resolve(),n(t)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===t.type&&(this.modules.backend=t),("logger"===t.type||t.log&&t.warn&&t.error)&&(this.modules.logger=t),"languageDetector"===t.type&&(this.modules.languageDetector=t),"i18nFormat"===t.type&&(this.modules.i18nFormat=t),"postProcessor"===t.type&&Im.addPostProcessor(t),"formatter"===t.type&&(this.modules.formatter=t),"3rdParty"===t.type&&this.modules.external.push(t),this}setResolvedLanguage(t){if(t&&this.languages&&!(["cimode","dev"].indexOf(t)>-1)){for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,e){this.isLanguageChangingTo=t;const n=gm();this.emit("languageChanging",t);const i=t=>{this.language=t,this.languages=this.services.languageUtils.toResolveHierarchy(t),this.resolvedLanguage=void 0,this.setResolvedLanguage(t)},r=(r,s)=>{s?this.isLanguageChangingTo===t&&(i(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,n.resolve((...t)=>this.t(...t)),e&&e(r,(...t)=>this.t(...t))},s=e=>{var n,s;t||e||!this.services.languageDetector||(e=[]);const o=pm(e)?e:e&&e[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(pm(e)?[e]:e);a&&(this.language||i(a),this.translator.language||this.translator.changeLanguage(a),null==(s=null==(n=this.services.languageDetector)?void 0:n.cacheUserLanguage)||s.call(n,a)),this.loadResources(a,t=>{r(t,a)})};return t||!this.services.languageDetector||this.services.languageDetector.async?!t&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t):s(this.services.languageDetector.detect()),n}getFixedT(t,e,n){const i=(t,e,...r)=>{let s;s="object"!=typeof e?this.options.overloadTranslationOptionHandler([t,e].concat(r)):{...e},s.lng=s.lng||i.lng,s.lngs=s.lngs||i.lngs,s.ns=s.ns||i.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||i.keyPrefix);const o=this.options.keySeparator||".";let a;return s.keyPrefix&&Array.isArray(t)?a=t.map(t=>("function"==typeof t&&(t=Um(t,{...this.options,...e})),`${s.keyPrefix}${o}${t}`)):("function"==typeof t&&(t=Um(t,{...this.options,...e})),a=s.keyPrefix?`${s.keyPrefix}${o}${t}`:t),this.t(a,s)};return pm(t)?i.lng=t:i.lngs=t,i.ns=e,i.keyPrefix=n,i}t(...t){var e;return null==(e=this.translator)?void 0:e.translate(...t)}exists(...t){var e;return null==(e=this.translator)?void 0:e.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,e={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=e.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,r=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(t,e)=>{const n=this.services.backendConnector.state[`${t}|${e}`];return-1===n||0===n||2===n};if(e.precheck){const t=e.precheck(this,s);if(void 0!==t)return t}return!!this.hasResourceBundle(n,t)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,t)||i&&!s(r,t)))}loadNamespaces(t,e){const n=gm();return this.options.ns?(pm(t)&&(t=[t]),t.forEach(t=>{this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}),this.loadResources(t=>{n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}loadLanguages(t,e){const n=gm();pm(t)&&(t=[t]);const i=this.options.preload||[],r=t.filter(t=>i.indexOf(t)<0&&this.services.languageUtils.isSupportedCode(t));return r.length?(this.options.preload=i.concat(r),this.loadResources(t=>{n.resolve(),e&&e(t)}),n):(e&&e(),Promise.resolve())}dir(t){var e,n;if(t||(t=this.resolvedLanguage||((null==(e=this.languages)?void 0:e.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const e=new Intl.Locale(t);if(e&&e.getTextInfo){const t=e.getTextInfo();if(t&&t.direction)return t.direction}}catch(r){}const i=(null==(n=this.services)?void 0:n.languageUtils)||new Vm(Qm());return t.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(i.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},e){return new n_(t,e)}cloneInstance(t={},e=e_){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},r=new n_(i);void 0===t.debug&&void 0===t.prefix||(r.logger=r.logger.clone(t));if(["store","services","language"].forEach(t=>{r[t]=this[t]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n){const t=Object.keys(this.store.data).reduce((t,e)=>(t[e]={...this.store.data[e]},t[e]=Object.keys(t[e]).reduce((n,i)=>(n[i]={...t[e][i]},n),t[e]),t),{});r.store=new km(t,i),r.services.resourceStore=r.store}return r.translator=new Hm(r.services,i),r.translator.on("*",(t,...e)=>{r.emit(t,...e)}),r.init(i,e),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const i_=n_.createInstance();i_.createInstance=n_.createInstance,i_.createInstance,i_.dir,i_.init,i_.loadResources,i_.reloadResources,i_.use,i_.changeLanguage,i_.getFixedT,i_.t,i_.exists,i_.setDefaultNamespace,i_.hasLoadedNamespace,i_.loadNamespaces,i_.loadLanguages;var r_={exports:{}},s_={},o_=Vt;var a_="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},l_=o_.useState,c_=o_.useEffect,u_=o_.useLayoutEffect,h_=o_.useDebugValue;function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!a_(t,n)}catch(i){return!0}}var f_="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),i=l_({inst:{value:n,getSnapshot:e}}),r=i[0].inst,s=i[1];return u_(function(){r.value=n,r.getSnapshot=e,d_(r)&&s({inst:r})},[t,n,e]),c_(function(){return d_(r)&&s({inst:r}),t(function(){d_(r)&&s({inst:r})})},[t]),h_(n),n};s_.useSyncExternalStore=void 0!==o_.useSyncExternalStore?o_.useSyncExternalStore:f_,r_.exports=s_;var p_=r_.exports;function g_(){}function m_(){}const __=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,v_=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,y_={};function x_(t,e){return((e||y_).jsx?v_:__).test(t)}const b_=/[ \t\n\f\r]/g;function S_(t){return""===t.replace(b_,"")}class w_{constructor(t,e,n){this.normal=e,this.property=t,n&&(this.space=n)}}function E_(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new w_(n,i,e)}function T_(t){return t.toLowerCase()}w_.prototype.normal={},w_.prototype.property={},w_.prototype.space=void 0;class M_{constructor(t,e){this.attribute=e,this.property=t}}M_.prototype.attribute="",M_.prototype.booleanish=!1,M_.prototype.boolean=!1,M_.prototype.commaOrSpaceSeparated=!1,M_.prototype.commaSeparated=!1,M_.prototype.defined=!1,M_.prototype.mustUseProperty=!1,M_.prototype.number=!1,M_.prototype.overloadedBoolean=!1,M_.prototype.property="",M_.prototype.spaceSeparated=!1,M_.prototype.space=void 0;let C_=0;const A_=k_(),R_=k_(),P_=k_(),N_=k_(),D_=k_(),L_=k_(),O_=k_();function k_(){return 2**++C_}const I_=Object.freeze(Object.defineProperty({__proto__:null,boolean:A_,booleanish:R_,commaOrSpaceSeparated:O_,commaSeparated:L_,number:N_,overloadedBoolean:P_,spaceSeparated:D_},Symbol.toStringTag,{value:"Module"})),F_=Object.keys(I_);class U_ extends M_{constructor(t,e,n,i){let r=-1;if(super(t,e),z_(this,"space",i),"number"==typeof n)for(;++r<F_.length;){const t=F_[r];z_(this,F_[r],(n&I_[t])===I_[t])}}}function z_(t,e,n){n&&(t[e]=n)}function B_(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new U_(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[T_(i)]=i,n[T_(s.attribute)]=i}return new w_(e,n,t.space)}U_.prototype.defined=!0;const H_=B_({properties:{ariaActiveDescendant:null,ariaAtomic:R_,ariaAutoComplete:null,ariaBusy:R_,ariaChecked:R_,ariaColCount:N_,ariaColIndex:N_,ariaColSpan:N_,ariaControls:D_,ariaCurrent:null,ariaDescribedBy:D_,ariaDetails:null,ariaDisabled:R_,ariaDropEffect:D_,ariaErrorMessage:null,ariaExpanded:R_,ariaFlowTo:D_,ariaGrabbed:R_,ariaHasPopup:null,ariaHidden:R_,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:D_,ariaLevel:N_,ariaLive:null,ariaModal:R_,ariaMultiLine:R_,ariaMultiSelectable:R_,ariaOrientation:null,ariaOwns:D_,ariaPlaceholder:null,ariaPosInSet:N_,ariaPressed:R_,ariaReadOnly:R_,ariaRelevant:null,ariaRequired:R_,ariaRoleDescription:D_,ariaRowCount:N_,ariaRowIndex:N_,ariaRowSpan:N_,ariaSelected:R_,ariaSetSize:N_,ariaSort:null,ariaValueMax:N_,ariaValueMin:N_,ariaValueNow:N_,ariaValueText:null,role:null},transform:(t,e)=>"role"===e?e:"aria-"+e.slice(4).toLowerCase()});function V_(t,e){return e in t?t[e]:e}function W_(t,e){return V_(t,e.toLowerCase())}const G_=B_({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:L_,acceptCharset:D_,accessKey:D_,action:null,allow:null,allowFullScreen:A_,allowPaymentRequest:A_,allowUserMedia:A_,alt:null,as:null,async:A_,autoCapitalize:null,autoComplete:D_,autoFocus:A_,autoPlay:A_,blocking:D_,capture:null,charSet:null,checked:A_,cite:null,className:D_,cols:N_,colSpan:null,content:null,contentEditable:R_,controls:A_,controlsList:D_,coords:N_|L_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:A_,defer:A_,dir:null,dirName:null,disabled:A_,download:P_,draggable:R_,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:A_,formTarget:null,headers:D_,height:N_,hidden:P_,high:N_,href:null,hrefLang:null,htmlFor:D_,httpEquiv:D_,id:null,imageSizes:null,imageSrcSet:null,inert:A_,inputMode:null,integrity:null,is:null,isMap:A_,itemId:null,itemProp:D_,itemRef:D_,itemScope:A_,itemType:D_,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:A_,low:N_,manifest:null,max:null,maxLength:N_,media:null,method:null,min:null,minLength:N_,multiple:A_,muted:A_,name:null,nonce:null,noModule:A_,noValidate:A_,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:A_,optimum:N_,pattern:null,ping:D_,placeholder:null,playsInline:A_,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:A_,referrerPolicy:null,rel:D_,required:A_,reversed:A_,rows:N_,rowSpan:N_,sandbox:D_,scope:null,scoped:A_,seamless:A_,selected:A_,shadowRootClonable:A_,shadowRootDelegatesFocus:A_,shadowRootMode:null,shape:null,size:N_,sizes:null,slot:null,span:N_,spellCheck:R_,src:null,srcDoc:null,srcLang:null,srcSet:null,start:N_,step:null,style:null,tabIndex:N_,target:null,title:null,translate:null,type:null,typeMustMatch:A_,useMap:null,value:R_,width:N_,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:D_,axis:null,background:null,bgColor:null,border:N_,borderColor:null,bottomMargin:N_,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:A_,declare:A_,event:null,face:null,frame:null,frameBorder:null,hSpace:N_,leftMargin:N_,link:null,longDesc:null,lowSrc:null,marginHeight:N_,marginWidth:N_,noResize:A_,noHref:A_,noShade:A_,noWrap:A_,object:null,profile:null,prompt:null,rev:null,rightMargin:N_,rules:null,scheme:null,scrolling:R_,standby:null,summary:null,text:null,topMargin:N_,valueType:null,version:null,vAlign:null,vLink:null,vSpace:N_,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:A_,disableRemotePlayback:A_,prefix:null,property:null,results:N_,security:null,unselectable:null},space:"html",transform:W_}),j_=B_({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:O_,accentHeight:N_,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:N_,amplitude:N_,arabicForm:null,ascent:N_,attributeName:null,attributeType:null,azimuth:N_,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:N_,by:null,calcMode:null,capHeight:N_,className:D_,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:N_,diffuseConstant:N_,direction:null,display:null,dur:null,divisor:N_,dominantBaseline:null,download:A_,dx:null,dy:null,edgeMode:null,editable:null,elevation:N_,enableBackground:null,end:null,event:null,exponent:N_,externalResourcesRequired:null,fill:null,fillOpacity:N_,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:L_,g2:L_,glyphName:L_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:N_,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:N_,horizOriginX:N_,horizOriginY:N_,id:null,ideographic:N_,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:N_,k:N_,k1:N_,k2:N_,k3:N_,k4:N_,kernelMatrix:O_,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:N_,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:N_,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:N_,overlineThickness:N_,paintOrder:null,panose1:null,path:null,pathLength:N_,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:D_,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:N_,pointsAtY:N_,pointsAtZ:N_,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:O_,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:O_,rev:O_,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:O_,requiredFeatures:O_,requiredFonts:O_,requiredFormats:O_,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:N_,specularExponent:N_,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:N_,strikethroughThickness:N_,string:null,stroke:null,strokeDashArray:O_,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:N_,strokeOpacity:N_,strokeWidth:null,style:null,surfaceScale:N_,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:O_,tabIndex:N_,tableValues:null,target:null,targetX:N_,targetY:N_,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:O_,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:N_,underlineThickness:N_,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:N_,values:null,vAlphabetic:N_,vMathematical:N_,vectorEffect:null,vHanging:N_,vIdeographic:N_,version:null,vertAdvY:N_,vertOriginX:N_,vertOriginY:N_,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:N_,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:V_}),X_=B_({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(t,e)=>"xlink:"+e.slice(5).toLowerCase()}),q_=B_({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:W_}),K_=B_({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(t,e)=>"xml:"+e.slice(3).toLowerCase()}),$_=/[A-Z]/g,Y_=/-[a-z]/g,J_=/^data[-\w.:]+$/i;function Z_(t){return"-"+t.toLowerCase()}function Q_(t){return t.charAt(1).toUpperCase()}const tv=E_([H_,G_,X_,q_,K_],"html"),ev=E_([H_,j_,X_,q_,K_],"svg");var nv={},iv=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,rv=/\n/g,sv=/^\s*/,ov=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,av=/^:\s*/,lv=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,cv=/^[;\s]*/,uv=/^\s+|\s+$/g,hv="";function dv(t){return t?t.replace(uv,hv):hv}var fv=Wt&&Wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nv,"__esModule",{value:!0}),nv.default=function(t,e){let n=null;if(!t||"string"!=typeof t)return n;const i=(0,pv.default)(t),r="function"==typeof e;return i.forEach(t=>{if("declaration"!==t.type)return;const{property:i,value:s}=t;r?e(i,s,t):s&&(n=n||{},n[i]=s)}),n};const pv=fv(function(t,e){if("string"!=typeof t)throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(t){var e=t.match(rv);e&&(n+=e.length);var r=t.lastIndexOf("\n");i=~r?t.length-r:i+t.length}function s(){var t={line:n,column:i};return function(e){return e.position=new o(t),c(),e}}function o(t){this.start=t,this.end={line:n,column:i},this.source=e.source}function a(r){var s=new Error(e.source+":"+n+":"+i+": "+r);if(s.reason=r,s.filename=e.source,s.line=n,s.column=i,s.source=t,!e.silent)throw s}function l(e){var n=e.exec(t);if(n){var i=n[0];return r(i),t=t.slice(i.length),n}}function c(){l(sv)}function u(t){var e;for(t=t||[];e=h();)!1!==e&&t.push(e);return t}function h(){var e=s();if("/"==t.charAt(0)&&"*"==t.charAt(1)){for(var n=2;hv!=t.charAt(n)&&("*"!=t.charAt(n)||"/"!=t.charAt(n+1));)++n;if(n+=2,hv===t.charAt(n-1))return a("End of comment missing");var o=t.slice(2,n-2);return i+=2,r(o),t=t.slice(n),i+=2,e({type:"comment",comment:o})}}function d(){var t=s(),e=l(ov);if(e){if(h(),!l(av))return a("property missing ':'");var n=l(lv),i=t({type:"declaration",property:dv(e[0].replace(iv,hv)),value:n?dv(n[0].replace(iv,hv)):hv});return l(cv),i}}return o.prototype.content=t,c(),function(){var t,e=[];for(u(e);t=d();)!1!==t&&(e.push(t),u(e));return e}()});var gv={};Object.defineProperty(gv,"__esModule",{value:!0}),gv.camelCase=void 0;var mv=/^--[a-zA-Z0-9_-]+$/,_v=/-([a-z])/g,vv=/^[^-]+$/,yv=/^-(webkit|moz|ms|o|khtml)-/,xv=/^-(ms)-/,bv=function(t,e){return e.toUpperCase()},Sv=function(t,e){return"".concat(e,"-")};gv.camelCase=function(t,e){return void 0===e&&(e={}),function(t){return!t||vv.test(t)||mv.test(t)}(t)?t:(t=t.toLowerCase(),(t=e.reactCompat?t.replace(xv,Sv):t.replace(yv,Sv)).replace(_v,bv))};var wv=(Wt&&Wt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}})(nv),Ev=gv;function Tv(t,e){var n={};return t&&"string"==typeof t?((0,wv.default)(t,function(t,i){t&&i&&(n[(0,Ev.camelCase)(t,e)]=i)}),n):n}Tv.default=Tv;const Mv=Gt(Tv),Cv=Rv("end"),Av=Rv("start");function Rv(t){return function(e){const n=e&&e.position&&e.position[t]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Pv(t){return t&&"object"==typeof t?"position"in t||"type"in t?Dv(t.position):"start"in t||"end"in t?Dv(t):"line"in t||"column"in t?Nv(t):"":""}function Nv(t){return Lv(t&&t.line)+":"+Lv(t&&t.column)}function Dv(t){return Nv(t&&t.start)+"-"+Nv(t&&t.end)}function Lv(t){return t&&"number"==typeof t?t:1}class Ov extends Error{constructor(t,e,n){super(),"string"==typeof e&&(n=e,e=void 0);let i="",r={},s=!1;if(e&&(r="line"in e&&"column"in e||"start"in e&&"end"in e?{place:e}:"type"in e?{ancestors:[e],place:e.position}:{...e}),"string"==typeof t?i=t:!r.cause&&t&&(s=!0,i=t.message,r.cause=t),!r.ruleId&&!r.source&&"string"==typeof n){const t=n.indexOf(":");-1===t?r.ruleId=n:(r.source=n.slice(0,t),r.ruleId=n.slice(t+1))}if(!r.place&&r.ancestors&&r.ancestors){const t=r.ancestors[r.ancestors.length-1];t&&(r.place=t.position)}const o=r.place&&"start"in r.place?r.place.start:r.place;this.ancestors=r.ancestors||void 0,this.cause=r.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=Pv(r.place)||"1:1",this.place=r.place||void 0,this.reason=this.message,this.ruleId=r.ruleId||void 0,this.source=r.source||void 0,this.stack=s&&r.cause&&"string"==typeof r.cause.stack?r.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ov.prototype.file="",Ov.prototype.name="",Ov.prototype.reason="",Ov.prototype.message="",Ov.prototype.stack="",Ov.prototype.column=void 0,Ov.prototype.line=void 0,Ov.prototype.ancestors=void 0,Ov.prototype.cause=void 0,Ov.prototype.fatal=void 0,Ov.prototype.place=void 0,Ov.prototype.ruleId=void 0,Ov.prototype.source=void 0;const kv={}.hasOwnProperty,Iv=new Map,Fv=/[A-Z]/g,Uv=new Set(["table","tbody","thead","tfoot","tr"]),zv=new Set(["td","th"]),Bv="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Hv(t,e){if(!e||void 0===e.Fragment)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if("function"!=typeof e.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=function(t,e){return n;function n(n,i,r,s){const o=Array.isArray(r.children),a=Av(n);return e(i,r,s,o,{columnNumber:a?a.column-1:void 0,fileName:t,lineNumber:a?a.line:void 0},void 0)}}(n,e.jsxDEV)}else{if("function"!=typeof e.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof e.jsxs)throw new TypeError("Expected `jsxs` in production options");i=function(t,e,n){return i;function i(t,i,r,s){const o=Array.isArray(r.children)?n:e;return s?o(i,r,s):o(i,r)}}(0,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:!1!==e.passKeys,passNode:e.passNode||!1,schema:"svg"===e.space?ev:tv,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==e.tableCellAlignToStyle},s=Vv(r,t,void 0);return s&&"string"!=typeof s?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function Vv(t,e,n){return"element"===e.type?function(t,e,n){const i=t.schema;let r=i;"svg"===e.tagName.toLowerCase()&&"html"===i.space&&(r=ev,t.schema=r);t.ancestors.push(e);const s=qv(t,e.tagName,!1),o=function(t,e){const n={};let i,r;for(r in e.properties)if("children"!==r&&kv.call(e.properties,r)){const s=Xv(t,r,e.properties[r]);if(s){const[r,o]=s;t.tableCellAlignToStyle&&"align"===r&&"string"==typeof o&&zv.has(e.tagName)?i=o:n[r]=o}}if(i){(n.style||(n.style={}))["css"===t.stylePropertyNameCase?"text-align":"textAlign"]=i}return n}(t,e);let a=jv(t,e);Uv.has(e.tagName)&&(a=a.filter(function(t){return"string"!=typeof t||!("object"==typeof(e=t)?"text"===e.type&&S_(e.value):S_(e));var e}));return Wv(t,o,s,e),Gv(o,a),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}(t,e,n):"mdxFlowExpression"===e.type||"mdxTextExpression"===e.type?function(t,e){if(e.data&&e.data.estree&&t.evaluater){const n=e.data.estree.body[0];return n.type,t.evaluater.evaluateExpression(n.expression)}Kv(t,e.position)}(t,e):"mdxJsxFlowElement"===e.type||"mdxJsxTextElement"===e.type?function(t,e,n){const i=t.schema;let r=i;"svg"===e.name&&"html"===i.space&&(r=ev,t.schema=r);t.ancestors.push(e);const s=null===e.name?t.Fragment:qv(t,e.name,!0),o=function(t,e){const n={};for(const i of e.attributes)if("mdxJsxExpressionAttribute"===i.type)if(i.data&&i.data.estree&&t.evaluater){const e=i.data.estree.body[0];g_(e.type);const r=e.expression;g_(r.type);const s=r.properties[0];g_(s.type),Object.assign(n,t.evaluater.evaluateExpression(s.argument))}else Kv(t,e.position);else{const r=i.name;let s;if(i.value&&"object"==typeof i.value)if(i.value.data&&i.value.data.estree&&t.evaluater){const e=i.value.data.estree.body[0];g_(e.type),s=t.evaluater.evaluateExpression(e.expression)}else Kv(t,e.position);else s=null===i.value||i.value;n[r]=s}return n}(t,e),a=jv(t,e);return Wv(t,o,s,e),Gv(o,a),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}(t,e,n):"mdxjsEsm"===e.type?function(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Kv(t,e.position)}(t,e):"root"===e.type?function(t,e,n){const i={};return Gv(i,jv(t,e)),t.create(e,t.Fragment,i,n)}(t,e,n):"text"===e.type?function(t,e){return e.value}(0,e):void 0}function Wv(t,e,n,i){"string"!=typeof n&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Gv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function jv(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:Iv;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const t="element"===s.type?s.tagName:"mdxJsxFlowElement"===s.type||"mdxJsxTextElement"===s.type?s.name:void 0;if(t){const e=r.get(t)||0;o=t+"-"+e,r.set(t,e+1)}}const a=Vv(t,s,o);void 0!==a&&n.push(a)}return n}function Xv(t,e,n){const i=function(t,e){const n=T_(e);let i=e,r=M_;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&J_.test(e)){if("-"===e.charAt(4)){const t=e.slice(5).replace(Y_,Q_);i="data"+t.charAt(0).toUpperCase()+t.slice(1)}else{const t=e.slice(4);if(!Y_.test(t)){let n=t.replace($_,Z_);"-"!==n.charAt(0)&&(n="-"+n),e="data"+n}}r=U_}return new r(i,e)}(t.schema,e);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?function(t,e){const n=e||{};return(""===t[t.length-1]?[...t,""]:t).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===i.property){let e="object"==typeof n?n:function(t,e){try{return Mv(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const e=n,i=new Ov("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:e,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Bv+"#cannot-parse-style-attribute",i}}(t,String(n));return"css"===t.stylePropertyNameCase&&(e=function(t){const e={};let n;for(n in t)kv.call(t,n)&&(e[$v(n)]=t[n]);return e}(e)),["style",e]}return["react"===t.elementAttributeNameCase&&i.space?jt[i.property]||i.property:i.attribute,n]}}function qv(t,e,n){let i;if(n)if(e.includes(".")){const t=e.split(".");let n,r=-1;for(;++r<t.length;){const e=x_(t[r])?{type:"Identifier",name:t[r]}:{type:"Literal",value:t[r]};n=n?{type:"MemberExpression",object:n,property:e,computed:Boolean(r&&"Literal"===e.type),optional:!1}:e}i=n}else i=x_(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};else i={type:"Literal",value:e};if("Literal"===i.type){const e=i.value;return kv.call(t.components,e)?t.components[e]:e}if(t.evaluater)return t.evaluater.evaluateExpression(i);Kv(t)}function Kv(t,e){const n=new Ov("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=Bv+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $v(t){let e=t.replace(Fv,Yv);return"ms-"===e.slice(0,3)&&(e="-"+e),e}function Yv(t){return"-"+t.toLowerCase()}const Jv={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Zv={};function Qv(t,e,n){if(function(t){return Boolean(t&&"object"==typeof t)}(t)){if("value"in t)return"html"!==t.type||n?t.value:"";if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return ty(t.children,e,n)}return Array.isArray(t)?ty(t,e,n):""}function ty(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=Qv(t[r],e,n);return i.join("")}const ey=document.createElement("i");function ny(t){const e="&"+t+";";ey.innerHTML=e;const n=ey.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===t)&&(n!==e&&n)}function iy(t,e,n,i){const r=t.length;let s,o=0;if(e=e<0?-e>r?0:r+e:e>r?r:e,n=n>0?n:0,i.length<1e4)s=Array.from(i),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);o<i.length;)s=i.slice(o,o+1e4),s.unshift(e,0),t.splice(...s),o+=1e4,e+=1e4}function ry(t,e){return t.length>0?(iy(t,t.length,0,e),t):e}const sy={}.hasOwnProperty;function oy(t,e){let n;for(n in e){const i=(sy.call(t,n)?t[n]:void 0)||(t[n]={}),r=e[n];let s;if(r)for(s in r){sy.call(i,s)||(i[s]=[]);const t=r[s];ay(i[s],Array.isArray(t)?t:t?[t]:[])}}}function ay(t,e){let n=-1;const i=[];for(;++n<e.length;)("after"===e[n].add?t:i).push(e[n]);iy(t,0,0,i)}function ly(t,e){const n=Number.parseInt(t,e);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function cy(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const uy=Sy(/[A-Za-z]/),hy=Sy(/[\dA-Za-z]/),dy=Sy(/[#-'*+\--9=?A-Z^-~]/);function fy(t){return null!==t&&(t<32||127===t)}const py=Sy(/\d/),gy=Sy(/[\dA-Fa-f]/),my=Sy(/[!-/:-@[-`{-~]/);function _y(t){return null!==t&&t<-2}function vy(t){return null!==t&&(t<0||32===t)}function yy(t){return-2===t||-1===t||32===t}const xy=Sy(/\p{P}|\p{S}/u),by=Sy(/\s/);function Sy(t){return function(e){return null!==e&&e>-1&&t.test(String.fromCharCode(e))}}function wy(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(37===s&&hy(t.charCodeAt(n+1))&&hy(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const e=t.charCodeAt(n+1);s<56320&&e>56319&&e<57344?(o=String.fromCharCode(s,e),r=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function Ey(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return function(i){if(yy(i))return t.enter(n),o(i);return e(i)};function o(i){return yy(i)&&s++<r?(t.consume(i),o):(t.exit(n),e(i))}}const Ty={tokenize:function(t){const e=t.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void t.consume(n);return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),Ey(t,e,"linePrefix")},function(e){return t.enter("paragraph"),i(e)});let n;return e;function i(e){const i=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=i),n=i,r(e)}function r(e){return null===e?(t.exit("chunkText"),t.exit("paragraph"),void t.consume(e)):_y(e)?(t.consume(e),t.exit("chunkText"),i):(t.consume(e),r)}}};const My={tokenize:function(t){const e=this,n=[];let i,r,s,o=0;return a;function a(i){if(o<n.length){const r=n[o];return e.containerState=r[1],t.attempt(r[0].continuation,l,c)(i)}return c(i)}function l(t){if(o++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&v();const n=e.events.length;let r,s=n;for(;s--;)if("exit"===e.events[s][0]&&"chunkFlow"===e.events[s][1].type){r=e.events[s][1].end;break}_(o);let a=n;for(;a<e.events.length;)e.events[a][1].end={...r},a++;return iy(e.events,s+1,0,e.events.slice(n)),e.events.length=a,c(t)}return a(t)}function c(r){if(o===n.length){if(!i)return d(r);if(i.currentConstruct&&i.currentConstruct.concrete)return p(r);e.interrupt=Boolean(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(Cy,u,h)(r)}function u(t){return i&&v(),_(o),d(t)}function h(t){return e.parser.lazy[e.now().line]=o!==n.length,s=e.now().offset,p(t)}function d(n){return e.containerState={},t.attempt(Cy,f,p)(n)}function f(t){return o++,n.push([e.currentConstruct,e.containerState]),d(t)}function p(n){return null===n?(i&&v(),_(0),void t.consume(n)):(i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:r}),g(n))}function g(n){return null===n?(m(t.exit("chunkFlow"),!0),_(0),void t.consume(n)):_y(n)?(t.consume(n),m(t.exit("chunkFlow")),o=0,e.interrupt=void 0,a):(t.consume(n),g)}function m(t,n){const a=e.sliceStream(t);if(n&&a.push(null),t.previous=r,r&&(r.next=t),r=t,i.defineSkip(t.start),i.write(a),e.parser.lazy[t.start.line]){let t=i.events.length;for(;t--;)if(i.events[t][1].start.offset<s&&(!i.events[t][1].end||i.events[t][1].end.offset>s))return;const n=e.events.length;let r,a,l=n;for(;l--;)if("exit"===e.events[l][0]&&"chunkFlow"===e.events[l][1].type){if(r){a=e.events[l][1].end;break}r=!0}for(_(o),t=n;t<e.events.length;)e.events[t][1].end={...a},t++;iy(e.events,l+1,0,e.events.slice(n)),e.events.length=t}}function _(i){let r=n.length;for(;r-- >i;){const i=n[r];e.containerState=i[1],i[0].exit.call(e,t)}n.length=i}function v(){i.write([null]),r=void 0,i=void 0,e.containerState._closeFlow=void 0}}},Cy={tokenize:function(t,e,n){return Ey(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Ay(t){return null===t||vy(t)||by(t)?1:xy(t)?2:void 0}function Ry(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const Py={name:"attention",resolveAll:function(t,e){let n,i,r,s,o,a,l,c,u=-1;for(;++u<t.length;)if("enter"===t[u][0]&&"attentionSequence"===t[u][1].type&&t[u][1]._close)for(n=u;n--;)if("exit"===t[n][0]&&"attentionSequence"===t[n][1].type&&t[n][1]._open&&e.sliceSerialize(t[n][1]).charCodeAt(0)===e.sliceSerialize(t[u][1]).charCodeAt(0)){if((t[n][1]._close||t[u][1]._open)&&(t[u][1].end.offset-t[u][1].start.offset)%3&&!((t[n][1].end.offset-t[n][1].start.offset+t[u][1].end.offset-t[u][1].start.offset)%3))continue;a=t[n][1].end.offset-t[n][1].start.offset>1&&t[u][1].end.offset-t[u][1].start.offset>1?2:1;const h={...t[n][1].end},d={...t[u][1].start};Ny(h,-a),Ny(d,a),s={type:a>1?"strongSequence":"emphasisSequence",start:h,end:{...t[n][1].end}},o={type:a>1?"strongSequence":"emphasisSequence",start:{...t[u][1].start},end:d},r={type:a>1?"strongText":"emphasisText",start:{...t[n][1].end},end:{...t[u][1].start}},i={type:a>1?"strong":"emphasis",start:{...s.start},end:{...o.end}},t[n][1].end={...s.start},t[u][1].start={...o.end},l=[],t[n][1].end.offset-t[n][1].start.offset&&(l=ry(l,[["enter",t[n][1],e],["exit",t[n][1],e]])),l=ry(l,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",r,e]]),l=ry(l,Ry(e.parser.constructs.insideSpan.null,t.slice(n+1,u),e)),l=ry(l,[["exit",r,e],["enter",o,e],["exit",o,e],["exit",i,e]]),t[u][1].end.offset-t[u][1].start.offset?(c=2,l=ry(l,[["enter",t[u][1],e],["exit",t[u][1],e]])):c=0,iy(t,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<t.length;)"attentionSequence"===t[u][1].type&&(t[u][1].type="data");return t},tokenize:function(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Ay(i);let s;return function(e){return s=e,t.enter("attentionSequence"),o(e)};function o(a){if(a===s)return t.consume(a),o;const l=t.exit("attentionSequence"),c=Ay(a),u=!c||2===c&&r||n.includes(a),h=!r||2===r&&c||n.includes(i);return l._open=Boolean(42===s?u:u&&(r||!h)),l._close=Boolean(42===s?h:h&&(c||!u)),e(a)}}};function Ny(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Dy={name:"autolink",tokenize:function(t,e,n){let i=0;return function(e){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(e),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),r};function r(e){return uy(e)?(t.consume(e),s):64===e?n(e):l(e)}function s(t){return 43===t||45===t||46===t||hy(t)?(i=1,o(t)):l(t)}function o(e){return 58===e?(t.consume(e),i=0,a):(43===e||45===e||46===e||hy(e))&&i++<32?(t.consume(e),o):(i=0,l(e))}function a(i){return 62===i?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(i),t.exit("autolinkMarker"),t.exit("autolink"),e):null===i||32===i||60===i||fy(i)?n(i):(t.consume(i),a)}function l(e){return 64===e?(t.consume(e),c):dy(e)?(t.consume(e),l):n(e)}function c(t){return hy(t)?u(t):n(t)}function u(n){return 46===n?(t.consume(n),i=0,c):62===n?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(n),t.exit("autolinkMarker"),t.exit("autolink"),e):h(n)}function h(e){if((45===e||hy(e))&&i++<63){const n=45===e?h:u;return t.consume(e),n}return n(e)}}};const Ly={partial:!0,tokenize:function(t,e,n){return function(e){return yy(e)?Ey(t,i,"linePrefix")(e):i(e)};function i(t){return null===t||_y(t)?e(t):n(t)}}};const Oy={continuation:{tokenize:function(t,e,n){const i=this;return function(e){if(yy(e))return Ey(t,r,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e);return r(e)};function r(i){return t.attempt(Oy,e,n)(i)}}},exit:function(t){t.exit("blockQuote")},name:"blockQuote",tokenize:function(t,e,n){const i=this;return function(e){if(62===e){const n=i.containerState;return n.open||(t.enter("blockQuote",{_container:!0}),n.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(e),t.exit("blockQuoteMarker"),r}return n(e)};function r(n){return yy(n)?(t.enter("blockQuotePrefixWhitespace"),t.consume(n),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(n))}}};const ky={name:"characterEscape",tokenize:function(t,e,n){return function(e){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(e),t.exit("escapeMarker"),i};function i(i){return my(i)?(t.enter("characterEscapeValue"),t.consume(i),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(i)}}};const Iy={name:"characterReference",tokenize:function(t,e,n){const i=this;let r,s,o=0;return function(e){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(e),t.exit("characterReferenceMarker"),a};function a(e){return 35===e?(t.enter("characterReferenceMarkerNumeric"),t.consume(e),t.exit("characterReferenceMarkerNumeric"),l):(t.enter("characterReferenceValue"),r=31,s=hy,c(e))}function l(e){return 88===e||120===e?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(e),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),r=6,s=gy,c):(t.enter("characterReferenceValue"),r=7,s=py,c(e))}function c(a){if(59===a&&o){const r=t.exit("characterReferenceValue");return s!==hy||ny(i.sliceSerialize(r))?(t.enter("characterReferenceMarker"),t.consume(a),t.exit("characterReferenceMarker"),t.exit("characterReference"),e):n(a)}return s(a)&&o++<r?(t.consume(a),c):n(a)}}};const Fy={partial:!0,tokenize:function(t,e,n){const i=this;return function(e){if(null===e)return n(e);return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),r};function r(t){return i.parser.lazy[i.now().line]?n(t):e(t)}}},Uy={concrete:!0,name:"codeFenced",tokenize:function(t,e,n){const i=this,r={partial:!0,tokenize:function(t,e,n){let r=0;return o;function o(e){return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),l}function l(e){return t.enter("codeFencedFence"),yy(e)?Ey(t,c,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e):c(e)}function c(e){return e===s?(t.enter("codeFencedFenceSequence"),u(e)):n(e)}function u(e){return e===s?(r++,t.consume(e),u):r>=a?(t.exit("codeFencedFenceSequence"),yy(e)?Ey(t,h,"whitespace")(e):h(e)):n(e)}function h(i){return null===i||_y(i)?(t.exit("codeFencedFence"),e(i)):n(i)}}};let s,o=0,a=0;return function(e){return function(e){const n=i.events[i.events.length-1];return o=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,s=e,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),l(e)}(e)};function l(e){return e===s?(a++,t.consume(e),l):a<3?n(e):(t.exit("codeFencedFenceSequence"),yy(e)?Ey(t,c,"whitespace")(e):c(e))}function c(n){return null===n||_y(n)?(t.exit("codeFencedFence"),i.interrupt?e(n):t.check(Fy,f,v)(n)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),u(n))}function u(e){return null===e||_y(e)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),c(e)):yy(e)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ey(t,h,"whitespace")(e)):96===e&&e===s?n(e):(t.consume(e),u)}function h(e){return null===e||_y(e)?c(e):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),d(e))}function d(e){return null===e||_y(e)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),c(e)):96===e&&e===s?n(e):(t.consume(e),d)}function f(e){return t.attempt(r,v,p)(e)}function p(e){return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),g}function g(e){return o>0&&yy(e)?Ey(t,m,"linePrefix",o+1)(e):m(e)}function m(e){return null===e||_y(e)?t.check(Fy,f,v)(e):(t.enter("codeFlowValue"),_(e))}function _(e){return null===e||_y(e)?(t.exit("codeFlowValue"),m(e)):(t.consume(e),_)}function v(n){return t.exit("codeFenced"),e(n)}}};const zy={name:"codeIndented",tokenize:function(t,e,n){const i=this;return function(e){return t.enter("codeIndented"),Ey(t,r,"linePrefix",5)(e)};function r(t){const e=i.events[i.events.length-1];return e&&"linePrefix"===e[1].type&&e[2].sliceSerialize(e[1],!0).length>=4?s(t):n(t)}function s(e){return null===e?a(e):_y(e)?t.attempt(By,s,a)(e):(t.enter("codeFlowValue"),o(e))}function o(e){return null===e||_y(e)?(t.exit("codeFlowValue"),s(e)):(t.consume(e),o)}function a(n){return t.exit("codeIndented"),e(n)}}},By={partial:!0,tokenize:function(t,e,n){const i=this;return r;function r(e){return i.parser.lazy[i.now().line]?n(e):_y(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),r):Ey(t,s,"linePrefix",5)(e)}function s(t){const s=i.events[i.events.length-1];return s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?e(t):_y(t)?r(t):n(t)}}};const Hy={name:"codeText",previous:function(t){return 96!==t||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(t){let e,n,i=t.length-4,r=3;if(!("lineEnding"!==t[r][1].type&&"space"!==t[r][1].type||"lineEnding"!==t[i][1].type&&"space"!==t[i][1].type))for(e=r;++e<i;)if("codeTextData"===t[e][1].type){t[r][1].type="codeTextPadding",t[i][1].type="codeTextPadding",r+=2,i-=2;break}e=r-1,i++;for(;++e<=i;)void 0===n?e!==i&&"lineEnding"!==t[e][1].type&&(n=e):e!==i&&"lineEnding"!==t[e][1].type||(t[n][1].type="codeTextData",e!==n+2&&(t[n][1].end=t[e-1][1].end,t.splice(n+2,e-n-2),i-=e-n-2,e=n+2),n=void 0);return t},tokenize:function(t,e,n){let i,r,s=0;return function(e){return t.enter("codeText"),t.enter("codeTextSequence"),o(e)};function o(e){return 96===e?(t.consume(e),s++,o):(t.exit("codeTextSequence"),a(e))}function a(e){return null===e?n(e):32===e?(t.enter("space"),t.consume(e),t.exit("space"),a):96===e?(r=t.enter("codeTextSequence"),i=0,c(e)):_y(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),a):(t.enter("codeTextData"),l(e))}function l(e){return null===e||32===e||96===e||_y(e)?(t.exit("codeTextData"),a(e)):(t.consume(e),l)}function c(n){return 96===n?(t.consume(n),i++,c):i===s?(t.exit("codeTextSequence"),t.exit("codeText"),e(n)):(r.type="codeTextData",l(n))}}};class Vy{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,e){const n=null==e?Number.POSITIVE_INFINITY:e;return n<this.left.length?this.left.slice(t,n):t>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(t,e,n){const i=e||0;this.setCursor(Math.trunc(t));const r=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return n&&Wy(this.left,n),r.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Wy(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Wy(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&0===this.right.length||t<0&&0===this.left.length))if(t<this.left.length){const e=this.left.splice(t,Number.POSITIVE_INFINITY);Wy(this.right,e.reverse())}else{const e=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Wy(this.left,e.reverse())}}}function Wy(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Gy(t){const e={};let n,i,r,s,o,a,l,c=-1;const u=new Vy(t);for(;++c<u.length;){for(;c in e;)c=e[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(a=n[1]._tokenizer.events,r=0,r<a.length&&"lineEndingBlank"===a[r][1].type&&(r+=2),r<a.length&&"content"===a[r][1].type))for(;++r<a.length&&"content"!==a[r][1].type;)"chunkText"===a[r][1].type&&(a[r][1]._isInFirstContentOfListItem=!0,r++);if("enter"===n[0])n[1].contentType&&(Object.assign(e,jy(u,c)),c=e[c],l=!0);else if(n[1]._container){for(r=c,i=void 0;r--;)if(s=u.get(r),"lineEnding"===s[1].type||"lineEndingBlank"===s[1].type)"enter"===s[0]&&(i&&(u.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=r);else if("linePrefix"!==s[1].type&&"listItemIndent"!==s[1].type)break;i&&(n[1].end={...u.get(i)[1].start},o=u.slice(i,c),o.unshift(n),u.splice(i,c-i+1,o))}}return iy(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function jy(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,h,d=-1,f=n,p=0,g=0;const m=[g];for(;f;){for(;t.get(++r)[1]!==f;);s.push(r),f._tokenizer||(u=i.sliceStream(f),f.next||u.push(null),h&&o.defineSkip(f.start),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),f._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=n;++d<a.length;)"exit"===a[d][0]&&"enter"===a[d-1][0]&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(g=d+1,m.push(g),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(o.events=[],f?(f._tokenizer=void 0,f.previous=void 0):m.pop(),d=m.length;d--;){const e=a.slice(m[d],m[d+1]),n=s.pop();l.push([n,n+e.length-1]),t.splice(n,2,e)}for(l.reverse(),d=-1;++d<l.length;)c[p+l[d][0]]=p+l[d][1],p+=l[d][1]-l[d][0]-1;return c}const Xy={resolve:function(t){return Gy(t),t},tokenize:function(t,e){let n;return function(e){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(e)};function i(e){return null===e?r(e):_y(e)?t.check(qy,s,r)(e):(t.consume(e),i)}function r(n){return t.exit("chunkContent"),t.exit("content"),e(n)}function s(e){return t.consume(e),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}},qy={partial:!0,tokenize:function(t,e,n){const i=this;return function(e){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),Ey(t,r,"linePrefix")};function r(r){if(null===r||_y(r))return n(r);const s=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&s&&"linePrefix"===s[1].type&&s[2].sliceSerialize(s[1],!0).length>=4?e(r):t.interrupt(i.parser.constructs.flow,n,e)(r)}}};function Ky(t,e,n,i,r,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(e){if(60===e)return t.enter(i),t.enter(r),t.enter(s),t.consume(e),t.exit(s),h;if(null===e||32===e||41===e||fy(e))return n(e);return t.enter(i),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),p(e)};function h(n){return 62===n?(t.enter(s),t.consume(n),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),d(n))}function d(e){return 62===e?(t.exit("chunkString"),t.exit(a),h(e)):null===e||60===e||_y(e)?n(e):(t.consume(e),92===e?f:d)}function f(e){return 60===e||62===e||92===e?(t.consume(e),d):d(e)}function p(r){return u||null!==r&&41!==r&&!vy(r)?u<c&&40===r?(t.consume(r),u++,p):41===r?(t.consume(r),u--,p):null===r||32===r||40===r||fy(r)?n(r):(t.consume(r),92===r?g:p):(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(i),e(r))}function g(e){return 40===e||41===e||92===e?(t.consume(e),p):p(e)}}function $y(t,e,n,i,r,s){const o=this;let a,l=0;return function(e){return t.enter(i),t.enter(r),t.consume(e),t.exit(r),t.enter(s),c};function c(h){return l>999||null===h||91===h||93===h&&!a||94===h&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):93===h?(t.exit(s),t.enter(r),t.consume(h),t.exit(r),t.exit(i),e):_y(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(e){return null===e||91===e||93===e||_y(e)||l++>999?(t.exit("chunkString"),c(e)):(t.consume(e),a||(a=!yy(e)),92===e?h:u)}function h(e){return 91===e||92===e||93===e?(t.consume(e),l++,u):u(e)}}function Yy(t,e,n,i,r,s){let o;return function(e){if(34===e||39===e||40===e)return t.enter(i),t.enter(r),t.consume(e),t.exit(r),o=40===e?41:e,a;return n(e)};function a(n){return n===o?(t.enter(r),t.consume(n),t.exit(r),t.exit(i),e):(t.enter(s),l(n))}function l(e){return e===o?(t.exit(s),a(o)):null===e?n(e):_y(e)?(t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),Ey(t,l,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(e))}function c(e){return e===o||null===e||_y(e)?(t.exit("chunkString"),l(e)):(t.consume(e),92===e?u:c)}function u(e){return e===o||92===e?(t.consume(e),c):c(e)}}function Jy(t,e){let n;return function i(r){if(_y(r))return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i;if(yy(r))return Ey(t,i,n?"linePrefix":"lineSuffix")(r);return e(r)}}const Zy={name:"definition",tokenize:function(t,e,n){const i=this;let r;return function(e){return t.enter("definition"),function(e){return $y.call(i,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(e)}(e)};function s(e){return r=cy(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),58===e?(t.enter("definitionMarker"),t.consume(e),t.exit("definitionMarker"),o):n(e)}function o(e){return vy(e)?Jy(t,a)(e):a(e)}function a(e){return Ky(t,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(e)}function l(e){return t.attempt(Qy,c,c)(e)}function c(e){return yy(e)?Ey(t,u,"whitespace")(e):u(e)}function u(s){return null===s||_y(s)?(t.exit("definition"),i.parser.defined.push(r),e(s)):n(s)}}},Qy={partial:!0,tokenize:function(t,e,n){return function(e){return vy(e)?Jy(t,i)(e):n(e)};function i(e){return Yy(t,r,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(e)}function r(e){return yy(e)?Ey(t,s,"whitespace")(e):s(e)}function s(t){return null===t||_y(t)?e(t):n(t)}}};const tx={name:"hardBreakEscape",tokenize:function(t,e,n){return function(e){return t.enter("hardBreakEscape"),t.consume(e),i};function i(i){return _y(i)?(t.exit("hardBreakEscape"),e(i)):n(i)}}};const ex={name:"headingAtx",resolve:function(t,e){let n,i,r=t.length-2,s=3;"whitespace"===t[s][1].type&&(s+=2);r-2>s&&"whitespace"===t[r][1].type&&(r-=2);"atxHeadingSequence"===t[r][1].type&&(s===r-1||r-4>s&&"whitespace"===t[r-2][1].type)&&(r-=s+1===r?2:4);r>s&&(n={type:"atxHeadingText",start:t[s][1].start,end:t[r][1].end},i={type:"chunkText",start:t[s][1].start,end:t[r][1].end,contentType:"text"},iy(t,s,r-s+1,[["enter",n,e],["enter",i,e],["exit",i,e],["exit",n,e]]));return t},tokenize:function(t,e,n){let i=0;return function(e){return t.enter("atxHeading"),function(e){return t.enter("atxHeadingSequence"),r(e)}(e)};function r(e){return 35===e&&i++<6?(t.consume(e),r):null===e||vy(e)?(t.exit("atxHeadingSequence"),s(e)):n(e)}function s(n){return 35===n?(t.enter("atxHeadingSequence"),o(n)):null===n||_y(n)?(t.exit("atxHeading"),e(n)):yy(n)?Ey(t,s,"whitespace")(n):(t.enter("atxHeadingText"),a(n))}function o(e){return 35===e?(t.consume(e),o):(t.exit("atxHeadingSequence"),s(e))}function a(e){return null===e||35===e||vy(e)?(t.exit("atxHeadingText"),s(e)):(t.consume(e),a)}}};const nx=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ix=["pre","script","style","textarea"],rx={concrete:!0,name:"htmlFlow",resolveTo:function(t){let e=t.length;for(;e--&&("enter"!==t[e][0]||"htmlFlow"!==t[e][1].type););e>1&&"linePrefix"===t[e-2][1].type&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2));return t},tokenize:function(t,e,n){const i=this;let r,s,o,a,l;return function(e){return function(e){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(e),c}(e)};function c(a){return 33===a?(t.consume(a),u):47===a?(t.consume(a),s=!0,f):63===a?(t.consume(a),r=3,i.interrupt?e:O):uy(a)?(t.consume(a),o=String.fromCharCode(a),p):n(a)}function u(s){return 45===s?(t.consume(s),r=2,h):91===s?(t.consume(s),r=5,a=0,d):uy(s)?(t.consume(s),r=4,i.interrupt?e:O):n(s)}function h(r){return 45===r?(t.consume(r),i.interrupt?e:O):n(r)}function d(r){const s="CDATA[";return r===s.charCodeAt(a++)?(t.consume(r),6===a?i.interrupt?e:M:d):n(r)}function f(e){return uy(e)?(t.consume(e),o=String.fromCharCode(e),p):n(e)}function p(a){if(null===a||47===a||62===a||vy(a)){const l=47===a,c=o.toLowerCase();return l||s||!ix.includes(c)?nx.includes(o.toLowerCase())?(r=6,l?(t.consume(a),g):i.interrupt?e(a):M(a)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(a):s?m(a):_(a)):(r=1,i.interrupt?e(a):M(a))}return 45===a||hy(a)?(t.consume(a),o+=String.fromCharCode(a),p):n(a)}function g(r){return 62===r?(t.consume(r),i.interrupt?e:M):n(r)}function m(e){return yy(e)?(t.consume(e),m):E(e)}function _(e){return 47===e?(t.consume(e),E):58===e||95===e||uy(e)?(t.consume(e),v):yy(e)?(t.consume(e),_):E(e)}function v(e){return 45===e||46===e||58===e||95===e||hy(e)?(t.consume(e),v):y(e)}function y(e){return 61===e?(t.consume(e),x):yy(e)?(t.consume(e),y):_(e)}function x(e){return null===e||60===e||61===e||62===e||96===e?n(e):34===e||39===e?(t.consume(e),l=e,b):yy(e)?(t.consume(e),x):S(e)}function b(e){return e===l?(t.consume(e),l=null,w):null===e||_y(e)?n(e):(t.consume(e),b)}function S(e){return null===e||34===e||39===e||47===e||60===e||61===e||62===e||96===e||vy(e)?y(e):(t.consume(e),S)}function w(t){return 47===t||62===t||yy(t)?_(t):n(t)}function E(e){return 62===e?(t.consume(e),T):n(e)}function T(e){return null===e||_y(e)?M(e):yy(e)?(t.consume(e),T):n(e)}function M(e){return 45===e&&2===r?(t.consume(e),P):60===e&&1===r?(t.consume(e),N):62===e&&4===r?(t.consume(e),k):63===e&&3===r?(t.consume(e),O):93===e&&5===r?(t.consume(e),L):!_y(e)||6!==r&&7!==r?null===e||_y(e)?(t.exit("htmlFlowData"),C(e)):(t.consume(e),M):(t.exit("htmlFlowData"),t.check(sx,I,C)(e))}function C(e){return t.check(ox,A,I)(e)}function A(e){return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),R}function R(e){return null===e||_y(e)?C(e):(t.enter("htmlFlowData"),M(e))}function P(e){return 45===e?(t.consume(e),O):M(e)}function N(e){return 47===e?(t.consume(e),o="",D):M(e)}function D(e){if(62===e){const n=o.toLowerCase();return ix.includes(n)?(t.consume(e),k):M(e)}return uy(e)&&o.length<8?(t.consume(e),o+=String.fromCharCode(e),D):M(e)}function L(e){return 93===e?(t.consume(e),O):M(e)}function O(e){return 62===e?(t.consume(e),k):45===e&&2===r?(t.consume(e),O):M(e)}function k(e){return null===e||_y(e)?(t.exit("htmlFlowData"),I(e)):(t.consume(e),k)}function I(n){return t.exit("htmlFlow"),e(n)}}},sx={partial:!0,tokenize:function(t,e,n){return function(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Ly,e,n)}}},ox={partial:!0,tokenize:function(t,e,n){const i=this;return function(e){if(_y(e))return t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),r;return n(e)};function r(t){return i.parser.lazy[i.now().line]?n(t):e(t)}}};const ax={name:"htmlText",tokenize:function(t,e,n){const i=this;let r,s,o;return function(e){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(e),a};function a(e){return 33===e?(t.consume(e),l):47===e?(t.consume(e),x):63===e?(t.consume(e),v):uy(e)?(t.consume(e),w):n(e)}function l(e){return 45===e?(t.consume(e),c):91===e?(t.consume(e),s=0,f):uy(e)?(t.consume(e),_):n(e)}function c(e){return 45===e?(t.consume(e),d):n(e)}function u(e){return null===e?n(e):45===e?(t.consume(e),h):_y(e)?(o=u,D(e)):(t.consume(e),u)}function h(e){return 45===e?(t.consume(e),d):u(e)}function d(t){return 62===t?N(t):45===t?h(t):u(t)}function f(e){const i="CDATA[";return e===i.charCodeAt(s++)?(t.consume(e),6===s?p:f):n(e)}function p(e){return null===e?n(e):93===e?(t.consume(e),g):_y(e)?(o=p,D(e)):(t.consume(e),p)}function g(e){return 93===e?(t.consume(e),m):p(e)}function m(e){return 62===e?N(e):93===e?(t.consume(e),m):p(e)}function _(e){return null===e||62===e?N(e):_y(e)?(o=_,D(e)):(t.consume(e),_)}function v(e){return null===e?n(e):63===e?(t.consume(e),y):_y(e)?(o=v,D(e)):(t.consume(e),v)}function y(t){return 62===t?N(t):v(t)}function x(e){return uy(e)?(t.consume(e),b):n(e)}function b(e){return 45===e||hy(e)?(t.consume(e),b):S(e)}function S(e){return _y(e)?(o=S,D(e)):yy(e)?(t.consume(e),S):N(e)}function w(e){return 45===e||hy(e)?(t.consume(e),w):47===e||62===e||vy(e)?E(e):n(e)}function E(e){return 47===e?(t.consume(e),N):58===e||95===e||uy(e)?(t.consume(e),T):_y(e)?(o=E,D(e)):yy(e)?(t.consume(e),E):N(e)}function T(e){return 45===e||46===e||58===e||95===e||hy(e)?(t.consume(e),T):M(e)}function M(e){return 61===e?(t.consume(e),C):_y(e)?(o=M,D(e)):yy(e)?(t.consume(e),M):E(e)}function C(e){return null===e||60===e||61===e||62===e||96===e?n(e):34===e||39===e?(t.consume(e),r=e,A):_y(e)?(o=C,D(e)):yy(e)?(t.consume(e),C):(t.consume(e),R)}function A(e){return e===r?(t.consume(e),r=void 0,P):null===e?n(e):_y(e)?(o=A,D(e)):(t.consume(e),A)}function R(e){return null===e||34===e||39===e||60===e||61===e||96===e?n(e):47===e||62===e||vy(e)?E(e):(t.consume(e),R)}function P(t){return 47===t||62===t||vy(t)?E(t):n(t)}function N(i){return 62===i?(t.consume(i),t.exit("htmlTextData"),t.exit("htmlText"),e):n(i)}function D(e){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(e),t.exit("lineEnding"),L}function L(e){return yy(e)?Ey(t,O,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(e):O(e)}function O(e){return t.enter("htmlTextData"),o(e)}}};const lx={name:"labelEnd",resolveAll:function(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),"labelImage"===i.type||"labelLink"===i.type||"labelEnd"===i.type){const t="labelImage"===i.type?4:2;i.type="data",e+=t}}t.length!==n.length&&iy(t,0,t.length,n);return t},resolveTo:function(t,e){let n,i,r,s,o=t.length,a=0;for(;o--;)if(n=t[o][1],i){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===t[o][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(r){if("enter"===t[o][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(i=o,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(r=o);const l={type:"labelLink"===t[i][1].type?"link":"image",start:{...t[i][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[i][1].start},end:{...t[r][1].end}},u={type:"labelText",start:{...t[i+a+2][1].end},end:{...t[r-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=ry(s,t.slice(i+1,i+a+3)),s=ry(s,[["enter",u,e]]),s=ry(s,Ry(e.parser.constructs.insideSpan.null,t.slice(i+a+4,r-3),e)),s=ry(s,[["exit",u,e],t[r-2],t[r-1],["exit",c,e]]),s=ry(s,t.slice(r+1)),s=ry(s,[["exit",l,e]]),iy(t,i,t.length,s),t},tokenize:function(t,e,n){const i=this;let r,s,o=i.events.length;for(;o--;)if(("labelImage"===i.events[o][1].type||"labelLink"===i.events[o][1].type)&&!i.events[o][1]._balanced){r=i.events[o][1];break}return function(e){if(!r)return n(e);if(r._inactive)return u(e);return s=i.parser.defined.includes(cy(i.sliceSerialize({start:r.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(e),t.exit("labelMarker"),t.exit("labelEnd"),a};function a(e){return 40===e?t.attempt(cx,c,s?c:u)(e):91===e?t.attempt(ux,c,s?l:u)(e):s?c(e):u(e)}function l(e){return t.attempt(hx,c,u)(e)}function c(t){return e(t)}function u(t){return r._balanced=!0,n(t)}}},cx={tokenize:function(t,e,n){return function(e){return t.enter("resource"),t.enter("resourceMarker"),t.consume(e),t.exit("resourceMarker"),i};function i(e){return vy(e)?Jy(t,r)(e):r(e)}function r(e){return 41===e?c(e):Ky(t,s,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(e)}function s(e){return vy(e)?Jy(t,a)(e):c(e)}function o(t){return n(t)}function a(e){return 34===e||39===e||40===e?Yy(t,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(e):c(e)}function l(e){return vy(e)?Jy(t,c)(e):c(e)}function c(i){return 41===i?(t.enter("resourceMarker"),t.consume(i),t.exit("resourceMarker"),t.exit("resource"),e):n(i)}}},ux={tokenize:function(t,e,n){const i=this;return function(e){return $y.call(i,t,r,s,"reference","referenceMarker","referenceString")(e)};function r(t){return i.parser.defined.includes(cy(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(t):n(t)}function s(t){return n(t)}}},hx={tokenize:function(t,e,n){return function(e){return t.enter("reference"),t.enter("referenceMarker"),t.consume(e),t.exit("referenceMarker"),i};function i(i){return 93===i?(t.enter("referenceMarker"),t.consume(i),t.exit("referenceMarker"),t.exit("reference"),e):n(i)}}};const dx={name:"labelStartImage",resolveAll:lx.resolveAll,tokenize:function(t,e,n){const i=this;return function(e){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(e),t.exit("labelImageMarker"),r};function r(e){return 91===e?(t.enter("labelMarker"),t.consume(e),t.exit("labelMarker"),t.exit("labelImage"),s):n(e)}function s(t){return 94===t&&"_hiddenFootnoteSupport"in i.parser.constructs?n(t):e(t)}}};const fx={name:"labelStartLink",resolveAll:lx.resolveAll,tokenize:function(t,e,n){const i=this;return function(e){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(e),t.exit("labelMarker"),t.exit("labelLink"),r};function r(t){return 94===t&&"_hiddenFootnoteSupport"in i.parser.constructs?n(t):e(t)}}};const px={name:"lineEnding",tokenize:function(t,e){return function(n){return t.enter("lineEnding"),t.consume(n),t.exit("lineEnding"),Ey(t,e,"linePrefix")}}};const gx={name:"thematicBreak",tokenize:function(t,e,n){let i,r=0;return function(e){return t.enter("thematicBreak"),function(t){return i=t,s(t)}(e)};function s(s){return s===i?(t.enter("thematicBreakSequence"),o(s)):r>=3&&(null===s||_y(s))?(t.exit("thematicBreak"),e(s)):n(s)}function o(e){return e===i?(t.consume(e),r++,o):(t.exit("thematicBreakSequence"),yy(e)?Ey(t,s,"whitespace")(e):s(e))}}};const mx={continuation:{tokenize:function(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Ly,function(n){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Ey(t,e,"listItemIndent",i.containerState.size+1)(n)},function(n){if(i.containerState.furtherBlankLines||!yy(n))return i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,r(n);return i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(vx,e,r)(n)});function r(r){return i.containerState._closeFlow=!0,i.interrupt=void 0,Ey(t,t.attempt(mx,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(r)}}},exit:function(t){t.exit(this.containerState.type)},name:"list",tokenize:function(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&"linePrefix"===r[1].type?r[2].sliceSerialize(r[1],!0).length:0,o=0;return function(e){const r=i.containerState.type||(42===e||43===e||45===e?"listUnordered":"listOrdered");if("listUnordered"===r?!i.containerState.marker||e===i.containerState.marker:py(e)){if(i.containerState.type||(i.containerState.type=r,t.enter(r,{_container:!0})),"listUnordered"===r)return t.enter("listItemPrefix"),42===e||45===e?t.check(gx,n,l)(e):l(e);if(!i.interrupt||49===e)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(e)}return n(e)};function a(e){return py(e)&&++o<10?(t.consume(e),a):(!i.interrupt||o<2)&&(i.containerState.marker?e===i.containerState.marker:41===e||46===e)?(t.exit("listItemValue"),l(e)):n(e)}function l(e){return t.enter("listItemMarker"),t.consume(e),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||e,t.check(Ly,i.interrupt?n:c,t.attempt(_x,h,u))}function c(t){return i.containerState.initialBlankLine=!0,s++,h(t)}function u(e){return yy(e)?(t.enter("listItemPrefixWhitespace"),t.consume(e),t.exit("listItemPrefixWhitespace"),h):n(e)}function h(n){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(n)}}},_x={partial:!0,tokenize:function(t,e,n){const i=this;return Ey(t,function(t){const r=i.events[i.events.length-1];return!yy(t)&&r&&"listItemPrefixWhitespace"===r[1].type?e(t):n(t)},"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},vx={partial:!0,tokenize:function(t,e,n){const i=this;return Ey(t,function(t){const r=i.events[i.events.length-1];return r&&"listItemIndent"===r[1].type&&r[2].sliceSerialize(r[1],!0).length===i.containerState.size?e(t):n(t)},"listItemIndent",i.containerState.size+1)}};const yx={name:"setextUnderline",resolveTo:function(t,e){let n,i,r,s=t.length;for(;s--;)if("enter"===t[s][0]){if("content"===t[s][1].type){n=s;break}"paragraph"===t[s][1].type&&(i=s)}else"content"===t[s][1].type&&t.splice(s,1),r||"definition"!==t[s][1].type||(r=s);const o={type:"setextHeading",start:{...t[n][1].start},end:{...t[t.length-1][1].end}};t[i][1].type="setextHeadingText",r?(t.splice(i,0,["enter",o,e]),t.splice(r+1,0,["exit",t[n][1],e]),t[n][1].end={...t[r][1].end}):t[n][1]=o;return t.push(["exit",o,e]),t},tokenize:function(t,e,n){const i=this;let r;return function(e){let o,a=i.events.length;for(;a--;)if("lineEnding"!==i.events[a][1].type&&"linePrefix"!==i.events[a][1].type&&"content"!==i.events[a][1].type){o="paragraph"===i.events[a][1].type;break}if(!i.parser.lazy[i.now().line]&&(i.interrupt||o))return t.enter("setextHeadingLine"),r=e,function(e){return t.enter("setextHeadingLineSequence"),s(e)}(e);return n(e)};function s(e){return e===r?(t.consume(e),s):(t.exit("setextHeadingLineSequence"),yy(e)?Ey(t,o,"lineSuffix")(e):o(e))}function o(i){return null===i||_y(i)?(t.exit("setextHeadingLine"),e(i)):n(i)}}};const xx={tokenize:function(t){const e=this,n=t.attempt(Ly,function(i){if(null===i)return void t.consume(i);return t.enter("lineEndingBlank"),t.consume(i),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n},t.attempt(this.parser.constructs.flowInitial,i,Ey(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Xy,i)),"linePrefix")));return n;function i(i){if(null!==i)return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),e.currentConstruct=void 0,n;t.consume(i)}}};const bx={resolveAll:Tx()},Sx=Ex("string"),wx=Ex("text");function Ex(t){return{resolveAll:Tx("text"===t?Mx:void 0),tokenize:function(e){const n=this,i=this.parser.constructs[t],r=e.attempt(i,s,o);return s;function s(t){return l(t)?r(t):o(t)}function o(t){if(null!==t)return e.enter("data"),e.consume(t),a;e.consume(t)}function a(t){return l(t)?(e.exit("data"),r(t)):(e.consume(t),a)}function l(t){if(null===t)return!0;const e=i[t];let r=-1;if(e)for(;++r<e.length;){const t=e[r];if(!t.previous||t.previous.call(n,n.previous))return!0}return!1}}}}function Tx(t){return function(e,n){let i,r=-1;for(;++r<=e.length;)void 0===i?e[r]&&"data"===e[r][1].type&&(i=r,r++):e[r]&&"data"===e[r][1].type||(r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),r=i+2),i=void 0);return t?t(e,n):e}}function Mx(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||"lineEnding"===t[n][1].type)&&"data"===t[n-1][1].type){const i=t[n-1][1],r=e.sliceStream(i);let s,o=r.length,a=-1,l=0;for(;o--;){const t=r[o];if("string"==typeof t){for(a=t.length;32===t.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===t)s=!0,l++;else if(-1!==t){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const r={type:n===t.length||s||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?a:i.start._bufferIndex+a,_index:i.start._index+o,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...r.start},i.start.offset===i.end.offset?Object.assign(i,r):(t.splice(n,0,["enter",r,e],["exit",r,e]),n+=2)}n++}return t}const Cx={42:mx,43:mx,45:mx,48:mx,49:mx,50:mx,51:mx,52:mx,53:mx,54:mx,55:mx,56:mx,57:mx,62:Oy},Ax={91:Zy},Rx={[-2]:zy,[-1]:zy,32:zy},Px={35:ex,42:gx,45:[yx,gx],60:rx,61:yx,95:gx,96:Uy,126:Uy},Nx={38:Iy,92:ky},Dx={[-5]:px,[-4]:px,[-3]:px,33:dx,38:Iy,42:Py,60:[Dy,ax],91:fx,92:[tx,ky],93:lx,95:Py,96:Hy},Lx={null:[Py,bx]},Ox=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Ax,disable:{null:[]},document:Cx,flow:Px,flowInitial:Rx,insideSpan:Lx,string:Nx,text:Dx},Symbol.toStringTag,{value:"Module"}));function kx(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],a=[];const l={attempt:m(function(t,e){_(t,e.from)}),check:m(g),consume:function(t){_y(t)?(i.line++,i.column=1,i.offset+=-3===t?2:1,v()):-1!==t&&(i.column++,i.offset++);i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++));c.previous=t},enter:function(t,e){const n=e||{};return n.type=t,n.start=d(),c.events.push(["enter",n,c]),a.push(n),n},exit:function(t){const e=a.pop();return e.end=d(),c.events.push(["exit",e,c]),e},interrupt:m(g,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(t){r[t.line]=t.column,v()},events:[],now:d,parser:t,previous:null,sliceSerialize:function(t,e){return function(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let o;if("string"==typeof s)o=s;else switch(s){case-5:o="\r";break;case-4:o="\n";break;case-3:o="\r\n";break;case-2:o=e?" ":"\t";break;case-1:if(!e&&r)continue;o=" ";break;default:o=String.fromCharCode(s)}r=-2===s,i.push(o)}return i.join("")}(h(t),e)},sliceStream:h,write:function(t){if(o=ry(o,t),f(),null!==o[o.length-1])return[];return _(e,0),c.events=Ry(s,c.events,c),c.events}};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(t){return function(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(i,s)];else{if(o=t.slice(n,r),i>-1){const t=o[0];"string"==typeof t?o[0]=t.slice(i):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}(o,t)}function d(){const{_bufferIndex:t,_index:e,line:n,column:r,offset:s}=i;return{_bufferIndex:t,_index:e,line:n,column:r,offset:s}}function f(){let t;for(;i._index<o.length;){const e=o[i._index];if("string"==typeof e)for(t=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===t&&i._bufferIndex<e.length;)p(e.charCodeAt(i._bufferIndex));else p(e)}}function p(t){u=u(t)}function g(t,e){e.restore()}function m(t,e){return function(n,r,s){let o,u,h,f;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(t){return e;function e(e){const n=null!==e&&t[e],i=null!==e&&t.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(i)?i:i?[i]:[]])(e)}}(n);function p(t){return o=t,u=0,0===t.length?s:g(t[u])}function g(t){return function(n){f=function(){const t=d(),e=c.previous,n=c.currentConstruct,r=c.events.length,s=Array.from(a);return{from:r,restore:o};function o(){i=t,c.previous=e,c.currentConstruct=n,c.events.length=r,a=s,v()}}(),h=t,t.partial||(c.currentConstruct=t);if(t.name&&c.parser.constructs.disable.null.includes(t.name))return _();return t.tokenize.call(e?Object.assign(Object.create(c),e):c,l,m,_)(n)}}function m(e){return t(h,f),r}function _(t){return f.restore(),++u<o.length?g(o[u]):s}}}function _(t,e){t.resolveAll&&!s.includes(t)&&s.push(t),t.resolve&&iy(c.events,e,c.events.length-e,t.resolve(c.events.slice(e),c)),t.resolveTo&&(c.events=t.resolveTo(c.events,c))}function v(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function Ix(t){const e=function(t){const e={};let n=-1;for(;++n<t.length;)oy(e,t[n]);return e}([Ox,...(t||{}).extensions||[]]),n={constructs:e,content:i(Ty),defined:[],document:i(My),flow:i(xx),lazy:{},string:i(Sx),text:i(wx)};return n;function i(t){return function(e){return kx(n,t,e)}}}const Fx=/[\0\t\n\r]/g;const Ux=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function zx(t,e,n){if(e)return e;if(35===n.charCodeAt(0)){const t=n.charCodeAt(1),e=120===t||88===t;return ly(n.slice(e?2:1),e?16:10)}return ny(n)||t}const Bx={}.hasOwnProperty;function Hx(t,e,n){return"string"!=typeof e&&(n=e,e=void 0),function(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(et),autolinkProtocol:T,autolinkEmail:T,atxHeading:s(J),blockQuote:s(X),characterEscape:T,characterReference:T,codeFenced:s(q),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(q,o),codeText:s(K,o),codeTextData:T,data:T,codeFlowValue:T,definition:s($),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Y),hardBreakEscape:s(Z),hardBreakTrailing:s(Z),htmlFlow:s(Q,o),htmlFlowData:T,htmlText:s(Q,o),htmlTextData:T,image:s(tt),label:o,link:s(et),listItem:s(it),listItemValue:d,listOrdered:s(nt,h),listUnordered:s(nt),paragraph:s(rt),reference:z,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(J),strong:s(st),thematicBreak:s(at)},exit:{atxHeading:l(),atxHeadingSequence:b,autolink:l(),autolinkEmail:j,autolinkProtocol:G,blockQuote:l(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:H,characterReferenceMarkerNumeric:H,characterReferenceValue:V,characterReference:W,codeFenced:l(m),codeFencedFence:g,codeFencedFenceInfo:f,codeFencedFenceMeta:p,codeFlowValue:M,codeIndented:l(_),codeText:l(N),codeTextData:M,data:M,definition:l(),definitionDestinationString:x,definitionLabelString:v,definitionTitleString:y,emphasis:l(),hardBreakEscape:l(A),hardBreakTrailing:l(A),htmlFlow:l(R),htmlFlowData:M,htmlText:l(P),htmlTextData:M,image:l(L),label:k,labelText:O,lineEnding:C,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:B,resourceDestinationString:I,resourceTitleString:F,resource:U,setextHeading:l(E),setextHeadingLineSequence:w,setextHeadingText:S,strong:l(),thematicBreak:l()}};Wx(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(t){let i={type:"root",children:[]};const s={stack:[i],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},l=[];let h=-1;for(;++h<t.length;)if("listOrdered"===t[h][1].type||"listUnordered"===t[h][1].type)if("enter"===t[h][0])l.push(h);else{h=r(t,l.pop(),h)}for(h=-1;++h<t.length;){const n=e[t[h][0]];Bx.call(n,t[h][1].type)&&n[t[h][1].type].call(Object.assign({sliceSerialize:t[h][2].sliceSerialize},s),t[h][1])}if(s.tokenStack.length>0){const t=s.tokenStack[s.tokenStack.length-1];(t[1]||jx).call(s,void 0,t[0])}for(i.position={start:Vx(t.length>0?t[0][1].start:{line:1,column:1,offset:0}),end:Vx(t.length>0?t[t.length-2][1].end:{line:1,column:1,offset:0})},h=-1;++h<e.transforms.length;)i=e.transforms[h](i)||i;return i}function r(t,e,n){let i,r,s,o,a=e-1,l=-1,c=!1;for(;++a<=n;){const e=t[a];switch(e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===e[0]?l++:l--,o=void 0;break;case"lineEndingBlank":"enter"===e[0]&&(!i||o||l||s||(s=a),o=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:o=void 0}if(!l&&"enter"===e[0]&&"listItemPrefix"===e[1].type||-1===l&&"exit"===e[0]&&("listUnordered"===e[1].type||"listOrdered"===e[1].type)){if(i){let o=a;for(r=void 0;o--;){const e=t[o];if("lineEnding"===e[1].type||"lineEndingBlank"===e[1].type){if("exit"===e[0])continue;r&&(t[r][1].type="lineEndingBlank",c=!0),e[1].type="lineEnding",r=o}else if("linePrefix"!==e[1].type&&"blockQuotePrefix"!==e[1].type&&"blockQuotePrefixWhitespace"!==e[1].type&&"blockQuoteMarker"!==e[1].type&&"listItemIndent"!==e[1].type)break}s&&(!r||s<r)&&(i._spread=!0),i.end=Object.assign({},r?t[r][1].start:e[1].end),t.splice(r||a,0,["exit",i,e[2]]),a++,n++}if("listItemPrefix"===e[1].type){const r={type:"listItem",_spread:!1,start:Object.assign({},e[1].start),end:void 0};i=r,t.splice(a,0,["enter",r,e[2]]),a++,n++,s=void 0,o=!0}}}return t[e][1]._spread=c,n}function s(t,e){return n;function n(n){a.call(this,t(n),n),e&&e.call(this,n)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(t,e,n){this.stack[this.stack.length-1].children.push(t),this.stack.push(t),this.tokenStack.push([e,n||void 0]),t.position={start:Vx(e.start),end:void 0}}function l(t){return e;function e(e){t&&t.call(this,e),c.call(this,e)}}function c(t,e){const n=this.stack.pop(),i=this.tokenStack.pop();if(!i)throw new Error("Cannot close `"+t.type+"` ("+Pv({start:t.start,end:t.end})+"): it’s not open");if(i[0].type!==t.type)if(e)e.call(this,t,i[0]);else{(i[1]||jx).call(this,t,i[0])}n.position.end=Vx(t.end)}function u(){return function(t,e){const n=e||Zv;return Qv(t,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(t){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(t),10),this.data.expectingFirstListItemValue=void 0}}function f(){const t=this.resume();this.stack[this.stack.length-1].lang=t}function p(){const t=this.resume();this.stack[this.stack.length-1].meta=t}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){const t=this.resume();this.stack[this.stack.length-1].value=t.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function _(){const t=this.resume();this.stack[this.stack.length-1].value=t.replace(/(\r?\n|\r)$/g,"")}function v(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.label=e,n.identifier=cy(this.sliceSerialize(t)).toLowerCase()}function y(){const t=this.resume();this.stack[this.stack.length-1].title=t}function x(){const t=this.resume();this.stack[this.stack.length-1].url=t}function b(t){const e=this.stack[this.stack.length-1];if(!e.depth){const n=this.sliceSerialize(t).length;e.depth=n}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function w(t){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(t).codePointAt(0)?1:2}function E(){this.data.setextHeadingSlurpLineEnding=void 0}function T(t){const e=this.stack[this.stack.length-1].children;let n=e[e.length-1];n&&"text"===n.type||(n=ot(),n.position={start:Vx(t.start),end:void 0},e.push(n)),this.stack.push(n)}function M(t){const e=this.stack.pop();e.value+=this.sliceSerialize(t),e.position.end=Vx(t.end)}function C(t){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=Vx(t.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(n.type)&&(T.call(this,t),M.call(this,t))}function A(){this.data.atHardBreak=!0}function R(){const t=this.resume();this.stack[this.stack.length-1].value=t}function P(){const t=this.resume();this.stack[this.stack.length-1].value=t}function N(){const t=this.resume();this.stack[this.stack.length-1].value=t}function D(){const t=this.stack[this.stack.length-1];if(this.data.inReference){const e=this.data.referenceType||"shortcut";t.type+="Reference",t.referenceType=e,delete t.url,delete t.title}else delete t.identifier,delete t.label;this.data.referenceType=void 0}function L(){const t=this.stack[this.stack.length-1];if(this.data.inReference){const e=this.data.referenceType||"shortcut";t.type+="Reference",t.referenceType=e,delete t.url,delete t.title}else delete t.identifier,delete t.label;this.data.referenceType=void 0}function O(t){const e=this.sliceSerialize(t),n=this.stack[this.stack.length-2];n.label=function(t){return t.replace(Ux,zx)}(e),n.identifier=cy(e).toLowerCase()}function k(){const t=this.stack[this.stack.length-1],e=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const e=t.children;n.children=e}else n.alt=e}function I(){const t=this.resume();this.stack[this.stack.length-1].url=t}function F(){const t=this.resume();this.stack[this.stack.length-1].title=t}function U(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function B(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.label=e,n.identifier=cy(this.sliceSerialize(t)).toLowerCase(),this.data.referenceType="full"}function H(t){this.data.characterReferenceType=t.type}function V(t){const e=this.sliceSerialize(t),n=this.data.characterReferenceType;let i;if(n)i=ly(e,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{i=ny(e)}this.stack[this.stack.length-1].value+=i}function W(t){this.stack.pop().position.end=Vx(t.end)}function G(t){M.call(this,t);this.stack[this.stack.length-1].url=this.sliceSerialize(t)}function j(t){M.call(this,t);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(t)}function X(){return{type:"blockquote",children:[]}}function q(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function $(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Y(){return{type:"emphasis",children:[]}}function J(){return{type:"heading",depth:0,children:[]}}function Z(){return{type:"break"}}function Q(){return{type:"html",value:""}}function tt(){return{type:"image",title:null,url:"",alt:null}}function et(){return{type:"link",title:null,url:"",children:[]}}function nt(t){return{type:"list",ordered:"listOrdered"===t.type,start:null,spread:t._spread,children:[]}}function it(t){return{type:"listItem",spread:t._spread,checked:null,children:[]}}function rt(){return{type:"paragraph",children:[]}}function st(){return{type:"strong",children:[]}}function ot(){return{type:"text",value:""}}function at(){return{type:"thematicBreak"}}}(n)(function(t){for(;!Gy(t););return t}(Ix(n).document().write(function(){let t,e=1,n="",i=!0;return function(r,s,o){const a=[];let l,c,u,h,d;for(r=n+("string"==typeof r?r.toString():new TextDecoder(s||void 0).decode(r)),u=0,n="",i&&(65279===r.charCodeAt(0)&&u++,i=void 0);u<r.length;){if(Fx.lastIndex=u,l=Fx.exec(r),h=l&&void 0!==l.index?l.index:r.length,d=r.charCodeAt(h),!l){n=r.slice(u);break}if(10===d&&u===h&&t)a.push(-3),t=void 0;else switch(t&&(a.push(-5),t=void 0),u<h&&(a.push(r.slice(u,h)),e+=h-u),d){case 0:a.push(65533),e++;break;case 9:for(c=4*Math.ceil(e/4),a.push(-2);e++<c;)a.push(-1);break;case 10:a.push(-4),e=1;break;default:t=!0,e=1}u=h+1}return o&&(t&&a.push(-5),n&&a.push(n),a.push(null)),a}}()(t,e,!0))))}function Vx(t){return{line:t.line,column:t.column,offset:t.offset}}function Wx(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Wx(t,i):Gx(t,i)}}function Gx(t,e){let n;for(n in e)if(Bx.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function jx(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Pv({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Pv({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Pv({start:e.start,end:e.end})+") is still open")}function Xx(t){const e=this;e.parser=function(n){return Hx(n,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function qx(t,e){const n=e.referenceType;let i="]";if("collapsed"===n?i+="[]":"full"===n&&(i+="["+(e.label||e.identifier)+"]"),"imageReference"===e.type)return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&"text"===s.type?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&"text"===o.type?o.value+=i:r.push({type:"text",value:i}),r}function Kx(t){const e=t.spread;return null==e?t.children.length>1:e}function $x(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(Yx(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(Yx(e.slice(r),r>0,!1)),s.join("")}function Yx(t,e,n){let i=0,r=t.length;if(e){let e=t.codePointAt(i);for(;9===e||32===e;)i++,e=t.codePointAt(i)}if(n){let e=t.codePointAt(r-1);for(;9===e||32===e;)r--,e=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}const Jx={blockquote:function(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)},break:function(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:"\n"}]},code:function(t,e){const n=e.value?e.value+"\n":"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r},delete:function(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},emphasis:function(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},footnoteReference:function(t,e){const n="string"==typeof t.options.clobberPrefix?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=wy(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,a=t.footnoteCounts.get(i);void 0===a?(a=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(i,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)},heading:function(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},html:function(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}},imageReference:function(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return qx(t,e);const r={src:wy(i.url||""),alt:e.alt};null!==i.title&&void 0!==i.title&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)},image:function(t,e){const n={src:wy(e.url)};null!==e.alt&&void 0!==e.alt&&(n.alt=e.alt),null!==e.title&&void 0!==e.title&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)},inlineCode:function(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)},linkReference:function(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return qx(t,e);const r={href:wy(i.url||"")};null!==i.title&&void 0!==i.title&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)},link:function(t,e){const n={href:wy(e.url)};null!==e.title&&void 0!==e.title&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)},listItem:function(t,e,n){const i=t.all(e),r=n?function(t){let e=!1;if("list"===t.type){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=Kx(n[i])}return e}(n):Kx(e),s={},o=[];if("boolean"==typeof e.checked){const t=i[0];let n;t&&"element"===t.type&&"p"===t.tagName?n=t:(n={type:"element",tagName:"p",properties:{},children:[]},i.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<i.length;){const t=i[a];(r||0!==a||"element"!==t.type||"p"!==t.tagName)&&o.push({type:"text",value:"\n"}),"element"!==t.type||"p"!==t.tagName||r?o.push(t):o.push(...t.children)}const l=i[i.length-1];l&&(r||"element"!==l.type||"p"!==l.tagName)&&o.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)},list:function(t,e){const n={},i=t.all(e);let r=-1;for("number"==typeof e.start&&1!==e.start&&(n.start=e.start);++r<i.length;){const t=i[r];if("element"===t.type&&"li"===t.tagName&&t.properties&&Array.isArray(t.properties.className)&&t.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)},paragraph:function(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},root:function(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)},strong:function(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},table:function(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const n={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],n),r.push(n)}if(n.length>0){const i={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},s=Av(e.children[1]),o=Cv(e.children[e.children.length-1]);s&&o&&(i.position={start:s,end:o}),r.push(i)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)},tableCell:function(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)},tableRow:function(t,e,n){const i=n?n.children:void 0,r=0===(i?i.indexOf(e):1)?"th":"td",s=n&&"table"===n.type?n.align:void 0,o=s?s.length:e.children.length;let a=-1;const l=[];for(;++a<o;){const n=e.children[a],i={},o=s?s[a]:void 0;o&&(i.align=o);let c={type:"element",tagName:r,properties:i,children:[]};n&&(c.children=t.all(n),t.patch(n,c),c=t.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(l,!0)};return t.patch(e,c),t.applyData(e,c)},text:function(t,e){const n={type:"text",value:$x(String(e.value))};return t.patch(e,n),t.applyData(e,n)},thematicBreak:function(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)},toml:Zx,yaml:Zx,definition:Zx,footnoteDefinition:Zx};function Zx(){}const Qx="object"==typeof self?self:globalThis,tb=t=>((t,e)=>{const n=(e,n)=>(t.set(n,e),e),i=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case 0:case-1:return n(o,r);case 1:{const t=n([],r);for(const e of o)t.push(i(e));return t}case 2:{const t=n({},r);for(const[e,n]of o)t[i(e)]=i(n);return t}case 3:return n(new Date(o),r);case 4:{const{source:t,flags:e}=o;return n(new RegExp(t,e),r)}case 5:{const t=n(new Map,r);for(const[e,n]of o)t.set(i(e),i(n));return t}case 6:{const t=n(new Set,r);for(const e of o)t.add(i(e));return t}case 7:{const{name:t,message:e}=o;return n(new Qx[t](e),r)}case 8:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:t}=new Uint8Array(o);return n(new DataView(t),o)}}return n(new Qx[s](o),r)};return i})(new Map,t)(0),eb="",{toString:nb}={},{keys:ib}=Object,rb=t=>{const e=typeof t;if("object"!==e||!t)return[0,e];const n=nb.call(t).slice(8,-1);switch(n){case"Array":return[1,eb];case"Object":return[2,eb];case"Date":return[3,eb];case"RegExp":return[4,eb];case"Map":return[5,eb];case"Set":return[6,eb];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},sb=([t,e])=>0===t&&("function"===e||"symbol"===e),ob=(t,{json:e,lossy:n}={})=>{const i=[];return((t,e,n,i)=>{const r=(t,e)=>{const r=i.push(t)-1;return n.set(e,r),r},s=i=>{if(n.has(i))return n.get(i);let[o,a]=rb(i);switch(o){case 0:{let e=i;switch(a){case"bigint":o=8,e=i.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+a);e=null;break;case"undefined":return r([-1],i)}return r([o,e],i)}case 1:{if(a){let t=i;return"DataView"===a?t=new Uint8Array(i.buffer):"ArrayBuffer"===a&&(t=new Uint8Array(i)),r([a,[...t]],i)}const t=[],e=r([o,t],i);for(const n of i)t.push(s(n));return e}case 2:{if(a)switch(a){case"BigInt":return r([a,i.toString()],i);case"Boolean":case"Number":case"String":return r([a,i.valueOf()],i)}if(e&&"toJSON"in i)return s(i.toJSON());const n=[],l=r([o,n],i);for(const e of ib(i))!t&&sb(rb(i[e]))||n.push([s(e),s(i[e])]);return l}case 3:return r([o,i.toISOString()],i);case 4:{const{source:t,flags:e}=i;return r([o,{source:t,flags:e}],i)}case 5:{const e=[],n=r([o,e],i);for(const[r,o]of i)(t||!sb(rb(r))&&!sb(rb(o)))&&e.push([s(r),s(o)]);return n}case 6:{const e=[],n=r([o,e],i);for(const r of i)!t&&sb(rb(r))||e.push(s(r));return n}}const{message:l}=i;return r([o,{name:a,message:l}],i)};return s})(!(e||n),!!e,new Map,i)(t),i},ab="function"==typeof structuredClone?(t,e)=>e&&("json"in e||"lossy"in e)?tb(ob(t,e)):structuredClone(t):(t,e)=>tb(ob(t,e));function lb(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function cb(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}const ub=function(t){if(null==t)return db;if("function"==typeof t)return hb(t);if("object"==typeof t)return Array.isArray(t)?function(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=ub(t[n]);return hb(i);function i(...t){let n=-1;for(;++n<e.length;)if(e[n].apply(this,t))return!0;return!1}}(t):function(t){const e=t;return hb(n);function n(n){const i=n;let r;for(r in t)if(i[r]!==e[r])return!1;return!0}}(t);if("string"==typeof t)return function(t){return hb(e);function e(e){return e&&e.type===t}}(t);throw new Error("Expected function, string, or object as test")};function hb(t){return function(e,n,i){return Boolean(function(t){return null!==t&&"object"==typeof t&&"type"in t}(e)&&t.call(this,e,"number"==typeof n?n:void 0,i||void 0))}}function db(){return!0}const fb=[],pb=!0,gb=!1;function mb(t,e,n,i){let r;"function"==typeof e&&"function"!=typeof n?(i=n,n=e):r=e;const s=ub(r),o=i?-1:1;!function t(r,a,l){const c=r&&"object"==typeof r?r:{};if("string"==typeof c.type){const t="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+r.type+(t?"<"+t+">":"")+")"})}return u;function u(){let c,u,h,d=fb;if((!e||s(r,a,l[l.length-1]||void 0))&&(d=function(t){if(Array.isArray(t))return t;if("number"==typeof t)return[pb,t];return null==t?fb:[t]}(n(r,l)),d[0]===gb))return d;if("children"in r&&r.children){const e=r;if(e.children&&"skip"!==d[0])for(u=(i?e.children.length:-1)+o,h=l.concat(e);u>-1&&u<e.children.length;){const n=e.children[u];if(c=t(n,u,h)(),c[0]===gb)return c;u="number"==typeof c[1]?c[1]:u+o}}return d}}(t,void 0,[])()}function _b(t,e,n,i){let r,s,o;"function"==typeof e&&"function"!=typeof n?(s=void 0,o=e,r=n):(s=e,o=n,r=i),mb(t,s,function(t,e){const n=e[e.length-1],i=n?n.children.indexOf(t):void 0;return o(t,i,n)},r)}const vb={}.hasOwnProperty,yb={};function xb(t,e){t.position&&(e.position=function(t){const e=Av(t),n=Cv(t);if(e&&n)return{start:e,end:n}}(t))}function bb(t,e){let n=e;if(t&&t.data){const e=t.data.hName,i=t.data.hChildren,r=t.data.hProperties;if("string"==typeof e)if("element"===n.type)n.tagName=e;else{n={type:"element",tagName:e,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&r&&Object.assign(n.properties,ab(r)),"children"in n&&n.children&&null!=i&&(n.children=i)}return n}function Sb(t,e){const n=e.data||{},i=!("value"in e)||vb.call(n,"hProperties")||vb.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:t.all(e)}:{type:"text",value:e.value};return t.patch(e,i),t.applyData(e,i)}function wb(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:"\n"});++i<t.length;)i&&n.push({type:"text",value:"\n"}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:"\n"}),n}function Eb(t){let e=0,n=t.charCodeAt(e);for(;9===n||32===n;)e++,n=t.charCodeAt(e);return t.slice(e)}function Tb(t,e){const n=function(t,e){const n=e||yb,i=new Map,r=new Map,s=new Map,o={...Jx,...n.handlers},a={all:function(t){const e=[];if("children"in t){const n=t.children;let i=-1;for(;++i<n.length;){const r=a.one(n[i],t);if(r){if(i&&"break"===n[i-1].type&&(Array.isArray(r)||"text"!==r.type||(r.value=Eb(r.value)),!Array.isArray(r)&&"element"===r.type)){const t=r.children[0];t&&"text"===t.type&&(t.value=Eb(t.value))}Array.isArray(r)?e.push(...r):e.push(r)}}}return e},applyData:bb,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:function(t,e){const n=t.type,i=a.handlers[n];if(vb.call(a.handlers,n)&&i)return i(a,t,e);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in t){const{children:e,...n}=t,i=ab(n);return i.children=a.all(t),i}return ab(t)}return(a.options.unknownHandler||Sb)(a,t,e)},options:n,patch:xb,wrap:wb};return _b(t,function(t){if("definition"===t.type||"footnoteDefinition"===t.type){const e="definition"===t.type?i:r,n=String(t.identifier).toUpperCase();e.has(n)||e.set(n,t)}}),a}(t,e),i=n.one(t,void 0),r=function(t){const e="string"==typeof t.options.clobberPrefix?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||lb,i=t.options.footnoteBackLabel||cb,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const r=t.footnoteById.get(t.footnoteOrder[l]);if(!r)continue;const s=t.all(r),o=String(r.identifier).toUpperCase(),c=wy(o.toLowerCase());let u=0;const h=[],d=t.footnoteCounts.get(o);for(;void 0!==d&&++u<=d;){h.length>0&&h.push({type:"text",value:" "});let t="string"==typeof n?n:n(l,u);"string"==typeof t&&(t={type:"text",value:t}),h.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof i?i:i(l,u),className:["data-footnote-backref"]},children:Array.isArray(t)?t:[t]})}const f=s[s.length-1];if(f&&"element"===f.type&&"p"===f.tagName){const t=f.children[f.children.length-1];t&&"text"===t.type?t.value+=" ":f.children.push({type:"text",value:" "}),f.children.push(...h)}else s.push(...h);const p={type:"element",tagName:"li",properties:{id:e+"fn-"+c},children:t.wrap(s,!0)};t.patch(r,p),a.push(p)}if(0!==a.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ab(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:"\n"}]}}(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:"\n"},r),s}function Mb(t,e){return t&&"run"in t?async function(n,i){const r=Tb(n,{file:i,...e});await t.run(r,i)}:function(n,i){return Tb(n,{file:i,...t||e})}}function Cb(t){if(t)throw t}var Ab=Object.prototype.hasOwnProperty,Rb=Object.prototype.toString,Pb=Object.defineProperty,Nb=Object.getOwnPropertyDescriptor,Db=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===Rb.call(t)},Lb=function(t){if(!t||"[object Object]"!==Rb.call(t))return!1;var e,n=Ab.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&Ab.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!i)return!1;for(e in t);return void 0===e||Ab.call(t,e)},Ob=function(t,e){Pb&&"__proto__"===e.name?Pb(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},kb=function(t,e){if("__proto__"===e){if(!Ab.call(t,e))return;if(Nb)return Nb(t,e).value}return t[e]};const Ib=Gt(function t(){var e,n,i,r,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},l=2),(null==a||"object"!=typeof a&&"function"!=typeof a)&&(a={});l<c;++l)if(null!=(e=arguments[l]))for(n in e)i=kb(a,n),a!==(r=kb(e,n))&&(u&&r&&(Lb(r)||(s=Db(r)))?(s?(s=!1,o=i&&Db(i)?i:[]):o=i&&Lb(i)?i:{},Ob(a,{name:n,newValue:t(u,o,r)})):void 0!==r&&Ob(a,{name:n,newValue:r}));return a});function Fb(t){if("object"!=typeof t||null===t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)}function Ub(){const t=[],e={run:function(...e){let n=-1;const i=e.pop();if("function"!=typeof i)throw new TypeError("Expected function as last argument, not "+i);!function r(s,...o){const a=t[++n];let l=-1;if(s)i(s);else{for(;++l<e.length;)null!==o[l]&&void 0!==o[l]||(o[l]=e[l]);e=o,a?function(t,e){let n;return i;function i(...e){const i=t.length>e.length;let a;i&&e.push(r);try{a=t.apply(this,e)}catch(s){if(i&&n)throw s;return r(s)}i||(a&&a.then&&"function"==typeof a.then?a.then(o,r):a instanceof Error?r(a):o(a))}function r(t,...i){n||(n=!0,e(t,...i))}function o(t){r(null,t)}}(a,r)(...o):i(null,...o)}}(null,...e)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return t.push(n),e}};return e}const zb={basename:function(t,e){if(void 0!==e&&"string"!=typeof e)throw new TypeError('"ext" argument must be a string');Bb(t);let n,i=0,r=-1,s=t.length;if(void 0===e||0===e.length||e.length>t.length){for(;s--;)if(47===t.codePointAt(s)){if(n){i=s+1;break}}else r<0&&(n=!0,r=s+1);return r<0?"":t.slice(i,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;s--;)if(47===t.codePointAt(s)){if(n){i=s+1;break}}else o<0&&(n=!0,o=s+1),a>-1&&(t.codePointAt(s)===e.codePointAt(a--)?a<0&&(r=s):(a=-1,r=o));i===r?r=o:r<0&&(r=t.length);return t.slice(i,r)},dirname:function(t){if(Bb(t),0===t.length)return".";let e,n=-1,i=t.length;for(;--i;)if(47===t.codePointAt(i)){if(e){n=i;break}}else e||(e=!0);return n<0?47===t.codePointAt(0)?"/":".":1===n&&47===t.codePointAt(0)?"//":t.slice(0,n)},extname:function(t){Bb(t);let e,n=t.length,i=-1,r=0,s=-1,o=0;for(;n--;){const a=t.codePointAt(n);if(47!==a)i<0&&(e=!0,i=n+1),46===a?s<0?s=n:1!==o&&(o=1):s>-1&&(o=-1);else if(e){r=n+1;break}}if(s<0||i<0||0===o||1===o&&s===i-1&&s===r+1)return"";return t.slice(s,i)},join:function(...t){let e,n=-1;for(;++n<t.length;)Bb(t[n]),t[n]&&(e=void 0===e?t[n]:e+"/"+t[n]);return void 0===e?".":function(t){Bb(t);const e=47===t.codePointAt(0);let n=function(t,e){let n,i,r="",s=0,o=-1,a=0,l=-1;for(;++l<=t.length;){if(l<t.length)n=t.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(o===l-1||1===a);else if(o!==l-1&&2===a){if(r.length<2||2!==s||46!==r.codePointAt(r.length-1)||46!==r.codePointAt(r.length-2))if(r.length>2){if(i=r.lastIndexOf("/"),i!==r.length-1){i<0?(r="",s=0):(r=r.slice(0,i),s=r.length-1-r.lastIndexOf("/")),o=l,a=0;continue}}else if(r.length>0){r="",s=0,o=l,a=0;continue}e&&(r=r.length>0?r+"/..":"..",s=2)}else r.length>0?r+="/"+t.slice(o+1,l):r=t.slice(o+1,l),s=l-o-1;o=l,a=0}else 46===n&&a>-1?a++:a=-1}return r}(t,!e);0!==n.length||e||(n=".");n.length>0&&47===t.codePointAt(t.length-1)&&(n+="/");return e?"/"+n:n}(e)},sep:"/"};function Bb(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Hb={cwd:function(){return"/"}};function Vb(t){return Boolean(null!==t&&"object"==typeof t&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&void 0===t.auth)}function Wb(t){if("string"==typeof t)t=new URL(t);else if(!Vb(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if("file:"!==t.protocol){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return function(t){if(""!==t.hostname){const t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}const e=t.pathname;let n=-1;for(;++n<e.length;)if(37===e.codePointAt(n)&&50===e.codePointAt(n+1)){const t=e.codePointAt(n+2);if(70===t||102===t){const t=new TypeError("File URL path must not include encoded / characters");throw t.code="ERR_INVALID_FILE_URL_PATH",t}}return decodeURIComponent(e)}(t)}const Gb=["history","path","basename","stem","extname","dirname"];class jb{constructor(t){let e;e=t?Vb(t)?{path:t}:"string"==typeof t||function(t){return Boolean(t&&"object"==typeof t&&"byteLength"in t&&"byteOffset"in t)}(t)?{value:t}:t:{},this.cwd="cwd"in e?"":Hb.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,i=-1;for(;++i<Gb.length;){const t=Gb[i];t in e&&void 0!==e[t]&&null!==e[t]&&(this[t]="history"===t?[...e[t]]:e[t])}for(n in e)Gb.includes(n)||(this[n]=e[n])}get basename(){return"string"==typeof this.path?zb.basename(this.path):void 0}set basename(t){qb(t,"basename"),Xb(t,"basename"),this.path=zb.join(this.dirname||"",t)}get dirname(){return"string"==typeof this.path?zb.dirname(this.path):void 0}set dirname(t){Kb(this.basename,"dirname"),this.path=zb.join(t||"",this.basename)}get extname(){return"string"==typeof this.path?zb.extname(this.path):void 0}set extname(t){if(Xb(t,"extname"),Kb(this.dirname,"extname"),t){if(46!==t.codePointAt(0))throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=zb.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Vb(t)&&(t=Wb(t)),qb(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return"string"==typeof this.path?zb.basename(this.path,this.extname):void 0}set stem(t){qb(t,"stem"),Xb(t,"stem"),this.path=zb.join(this.dirname||"",t+(this.extname||""))}fail(t,e,n){const i=this.message(t,e,n);throw i.fatal=!0,i}info(t,e,n){const i=this.message(t,e,n);return i.fatal=void 0,i}message(t,e,n){const i=new Ov(t,e,n);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(t||void 0).decode(this.value)}}function Xb(t,e){if(t&&t.includes(zb.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+zb.sep+"`")}function qb(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Kb(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}const $b=function(t){const e=this.constructor.prototype,n=e[t],i=function(){return n.apply(i,arguments)};return Object.setPrototypeOf(i,e),i},Yb={}.hasOwnProperty;class Jb extends $b{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ub()}copy(){const t=new Jb;let e=-1;for(;++e<this.attachers.length;){const n=this.attachers[e];t.use(...n)}return t.data(Ib(!0,{},this.namespace)),t}data(t,e){return"string"==typeof t?2===arguments.length?(eS("data",this.frozen),this.namespace[t]=e,this):Yb.call(this.namespace,t)&&this.namespace[t]||void 0:t?(eS("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[e,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const i=e.call(t,...n);"function"==typeof i&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const e=rS(t),n=this.parser||this.Parser;return Qb("parse",n),n(String(e),e)}process(t,e){const n=this;return this.freeze(),Qb("process",this.parser||this.Parser),tS("process",this.compiler||this.Compiler),e?i(void 0,e):new Promise(i);function i(i,r){const s=rS(t),o=n.parse(s);function a(t,n){t||!n?r(t):i?i(n):e(void 0,n)}n.run(o,s,function(t,e,i){if(t||!e||!i)return a(t);const r=e,s=n.stringify(r,i);var o;"string"==typeof(o=s)||function(t){return Boolean(t&&"object"==typeof t&&"byteLength"in t&&"byteOffset"in t)}(o)?i.value=s:i.result=s,a(t,i)})}}processSync(t){let e,n=!1;return this.freeze(),Qb("processSync",this.parser||this.Parser),tS("processSync",this.compiler||this.Compiler),this.process(t,function(t,i){n=!0,Cb(t),e=i}),iS("processSync","process",n),e}run(t,e,n){nS(t),this.freeze();const i=this.transformers;return n||"function"!=typeof e||(n=e,e=void 0),n?r(void 0,n):new Promise(r);function r(r,s){const o=rS(e);i.run(t,o,function(e,i,o){const a=i||t;e?s(e):r?r(a):n(void 0,a,o)})}}runSync(t,e){let n,i=!1;return this.run(t,e,function(t,e){Cb(t),n=e,i=!0}),iS("runSync","run",i),n}stringify(t,e){this.freeze();const n=rS(e),i=this.compiler||this.Compiler;return tS("stringify",i),nS(t),i(t,n)}use(t,...e){const n=this.attachers,i=this.namespace;if(eS("use",this.frozen),null==t);else if("function"==typeof t)a(t,e);else{if("object"!=typeof t)throw new TypeError("Expected usable value, not `"+t+"`");Array.isArray(t)?o(t):s(t)}return this;function r(t){if("function"==typeof t)a(t,[]);else{if("object"!=typeof t)throw new TypeError("Expected usable value, not `"+t+"`");if(Array.isArray(t)){const[e,...n]=t;a(e,n)}else s(t)}}function s(t){if(!("plugins"in t)&&!("settings"in t))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(t.plugins),t.settings&&(i.settings=Ib(!0,i.settings,t.settings))}function o(t){let e=-1;if(null==t);else{if(!Array.isArray(t))throw new TypeError("Expected a list of plugins, not `"+t+"`");for(;++e<t.length;){r(t[e])}}}function a(t,e){let i=-1,r=-1;for(;++i<n.length;)if(n[i][0]===t){r=i;break}if(-1===r)n.push([t,...e]);else if(e.length>0){let[i,...s]=e;const o=n[r][1];Fb(o)&&Fb(i)&&(i=Ib(!0,o,i)),n[r]=[t,i,...s]}}}}const Zb=(new Jb).freeze();function Qb(t,e){if("function"!=typeof e)throw new TypeError("Cannot `"+t+"` without `parser`")}function tS(t,e){if("function"!=typeof e)throw new TypeError("Cannot `"+t+"` without `compiler`")}function eS(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function nS(t){if(!Fb(t)||"string"!=typeof t.type)throw new TypeError("Expected node, got `"+t+"`")}function iS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function rS(t){return function(t){return Boolean(t&&"object"==typeof t&&"message"in t&&"messages"in t)}(t)?t:new jb(t)}function sS(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function oS(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);n.search=i.toString()}const aS="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,lS=aS&&"documentMode"in document?document.documentMode:null,cS=aS&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),uS=aS&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),hS=!(!aS||!("InputEvent"in window)||lS)&&"getTargetRanges"in new window.InputEvent("input"),dS=aS&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),fS=aS&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,pS=aS&&/Android/.test(navigator.userAgent),gS=aS&&/^(?=.*Chrome).*/i.test(navigator.userAgent),mS=aS&&pS&&gS,_S=aS&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&cS&&!gS;function vS(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}const yS=0,xS=1,bS=2,SS=1,wS=2,ES=3,TS=4,MS=5,CS=6,AS=dS||fS||_S?" ":"​",RS="\n\n",PS=uS?" ":AS,NS={bold:1,capitalize:1024,code:16,highlight:128,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},DS={directionless:1,unmergeable:2},LS={center:2,end:6,justify:4,left:1,right:3,start:5},OS={[wS]:"center",[CS]:"end",[TS]:"justify",[SS]:"left",[ES]:"right",[MS]:"start"},kS={normal:0,segmented:2,token:1},IS={[yS]:"normal",[bS]:"segmented",[xS]:"token"},FS="$config";function US(t,e,n,i,r,s){let o=t.getFirstChild();for(;null!==o;){const t=o.__key;o.__parent===e&&(XM(o)&&US(o,t,n,i,r,s),n.has(t)||s.delete(t),r.push(t)),o=o.getNextSibling()}}let zS=!1,BS=0;function HS(t){BS=t.timeStamp}function VS(t,e,n){const i="BR"===t.nodeName,r=e.__lexicalLineBreak;return r&&(t===r||i&&t.previousSibling===r)||i&&void 0!==IC(t,n)}function WS(t,e,n){const i=SA(gA(n));let r=null,s=null;null!==i&&i.anchorNode===t&&(r=i.anchorOffset,s=i.focusOffset);const o=t.nodeValue;null!==o&&$C(e,o,r,s,!1)}function GS(t,e,n){if(XT(t)){const e=t.anchor.getNode();if(e.is(n)&&t.format!==e.getFormat())return!1}return TC(e)&&n.isAttached()}function jS(t,e,n,i){for(let r=t;r&&!IA(r);r=hA(r)){const t=IC(r,e);if(void 0!==t){const e=OC(t,n);if(e)return $M(e)||!EA(r)?void 0:[r,e]}else if(r===i)return[i,HC(n)]}}function XS(t,e,n){zS=!0;const i=performance.now()-BS>100;try{VM(t,()=>{const r=cM()||t.getEditorState().read(()=>{const t=cM();return null!==t?t.clone():null}),s=new Map,o=t.getRootElement(),a=t._editorState,l=t._blockCursorElement;let c=!1,u="";for(let n=0;n<e.length;n++){const h=e[n],d=h.type,f=h.target,p=jS(f,t,a,o);if(!p)continue;const[g,m]=p;if("characterData"===d)i&&IT(m)&&TC(f)&&GS(r,f,m)&&WS(f,m,t);else if("childList"===d){c=!0;const e=h.addedNodes;for(let r=0;r<e.length;r++){const n=e[r],i=kC(n),s=n.parentNode;if(null!=s&&n!==l&&null===i&&!VS(n,s,t)){if(uS){const t=(EA(n)?n.innerText:null)||n.nodeValue;t&&(u+=t)}s.removeChild(n)}}const n=h.removedNodes,i=n.length;if(i>0){let e=0;for(let r=0;r<i;r++){const i=n[r];(VS(i,f,t)||l===i)&&(f.appendChild(i),e++)}i!==e&&s.set(g,m)}}}if(s.size>0)for(const[e,n]of s)n.reconcileObservedMutation(e,t);const h=n.takeRecords();if(h.length>0){for(let e=0;e<h.length;e++){const n=h[e],i=n.addedNodes,r=n.target;for(let e=0;e<i.length;e++){const n=i[e],s=n.parentNode;null==s||"BR"!==n.nodeName||VS(n,r,t)||s.removeChild(n)}}n.takeRecords()}null!==r&&(c&&VC(r),uS&&aA(t)&&r.insertRawText(u))})}finally{zS=!1}}function qS(t){const e=t._observer;null!==e&&XS(t,e.takeRecords(),e)}function KS(t){var e;e=t,0===BS&&gA(e).addEventListener("textInput",HS,!0),t._observer=new MutationObserver((e,n)=>{XS(t,e,n)})}function $S(t){const e=new Map,n=new Set;for(let i="function"==typeof t?t:t.replace;i.prototype&&void 0!==i.prototype.getType;i=Object.getPrototypeOf(i)){const{ownNodeConfig:t}=UA(i);if(t&&t.stateConfigs)for(const i of t.stateConfigs){let t;"stateConfig"in i?(t=i.stateConfig,i.flat&&n.add(t.key)):t=i,e.set(t.key,t)}}return{flatKeys:n,sharedConfigMap:e}}let YS=class t{constructor(t,e,n=void 0,i=new Map,r=void 0){kt(this,"node"),kt(this,"knownState"),kt(this,"unknownState"),kt(this,"sharedNodeState"),kt(this,"size"),this.node=t,this.sharedNodeState=e,this.unknownState=n,this.knownState=i;const{sharedConfigMap:s}=this.sharedNodeState,o=void 0!==r?r:function(t,e,n){let i=n.size;if(e)for(const r in e){const e=t.get(r);e&&n.has(e)||i++}return i}(s,n,i);this.size=o}getValue(t){const e=this.knownState.get(t);if(void 0!==e)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const e=this.unknownState[t.key];void 0!==e&&(n=t.parse(e)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},e={};for(const[n,i]of this.knownState)n.isEqual(i,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(i);for(const n of this.sharedNodeState.flatKeys)n in t&&(e[n]=t[n],delete t[n]);return ZS(t)&&(e.$=t),e}getWritable(e){if(this.node===e)return this;const{sharedNodeState:n,unknownState:i}=this,r=new Map(this.knownState);return new t(e,n,function(t,e,n){let i;if(n)for(const[r,s]of Object.entries(n)){const n=t.get(r);n?e.has(n)||e.set(n,n.parse(s)):(i=i||{},i[r]=s)}return i}(n.sharedConfigMap,r,i),r,this.size)}updateFromKnown(t,e){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:i,unknownState:r}=this;i.has(t)||r&&n in r||(r&&(delete r[n],this.unknownState=ZS(r)),this.size++),i.set(t,e)}updateFromUnknown(t,e){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e)}updateFromJSON(t){const{knownState:e}=this;for(const n of e.keys())e.set(n,n.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(const[n,i]of Object.entries(t))this.updateFromUnknown(n,i)}};function JS(t){return t.__state?t.__state.sharedNodeState:pC(PA(),t.getType()).sharedNodeState}function ZS(t){if(t)for(const e in t)return t}function QS(t,e,n){for(const[i,r]of e.knownState){if(t.has(i.key))continue;t.add(i.key);const e=n?n.getValue(i):i.defaultValue;if(e!==r&&!i.isEqual(e,r))return!0}return!1}function tw(t,e,n){const{unknownState:i}=e,r=n?n.unknownState:void 0;if(i)for(const[s,o]of Object.entries(i))if(!t.has(s)&&(t.add(s),o!==(r?r[s]:void 0)))return!0;return!1}function ew(t,e){const n=t.__state;return n&&n.node===t?n.getWritable(e):n}function nw(t,e){const n=t.__mode,i=t.__format,r=t.__style,s=e.__mode,o=e.__format,a=e.__style,l=t.__state,c=e.__state;return(null===n||n===s)&&(null===i||i===o)&&(null===r||r===a)&&(null===t.__state||l===c||function(t,e){if(t===e)return!0;if(t&&e&&t.size!==e.size)return!1;const n=new Set;return!(t&&QS(n,t,e)||e&&QS(n,e,t)||t&&tw(n,t,e)||e&&tw(n,e,t))}(l,c))}function iw(t,e){const n=t.mergeWithSibling(e),i=PM()._normalizedNodes;return i.add(t.__key),i.add(e.__key),n}function rw(t){let e,n,i=t;if(""!==i.__text||!i.isSimpleText()||i.isUnmergeable()){for(;null!==(e=i.getPreviousSibling())&&IT(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(""!==e.__text){if(nw(e,i)){i=iw(e,i);break}break}e.remove()}for(;null!==(n=i.getNextSibling())&&IT(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(nw(i,n)){i=iw(i,n);break}break}n.remove()}}else i.remove()}function sw(t){return ow(t.anchor),ow(t.focus),t}function ow(t){for(;"element"===t.type;){const e=t.getNode(),n=t.offset;let i,r;if(n===e.getChildrenSize()?(i=e.getChildAtIndex(n-1),r=!0):(i=e.getChildAtIndex(n),r=!1),IT(i)){t.set(i.__key,r?i.getTextContentSize():0,"text",!0);break}if(!XM(i))break;t.set(i.__key,r?i.getChildrenSize():0,"element",!0)}}let aw,lw,cw,uw,hw,dw,fw,pw,gw,mw,_w="",vw=null,yw="",xw="",bw=!1,Sw=!1;function ww(t,e){const n=fw.get(t);if(null!==e){const n=Uw(t);n.parentNode===e&&e.removeChild(n)}if(pw.has(t)||lw._keyToDOMMap.delete(t),XM(n)){const t=Ow(n,fw);Ew(t,0,t.length-1,null)}void 0!==n&&rA(mw,cw,uw,n,"destroyed")}function Ew(t,e,n,i){let r=e;for(;r<=n;++r){const e=t[r];void 0!==e&&ww(e,i)}}function Tw(t,e){t.setProperty("text-align",e)}const Mw="40px";function Cw(t,e){const n=aw.theme.indent;if("string"==typeof n){const i=t.classList.contains(n);e>0&&!i?t.classList.add(n):e<1&&i&&t.classList.remove(n)}const i=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||Mw;t.style.setProperty("padding-inline-start",0===e?"":`calc(${e} * ${i})`)}function Aw(t,e){const n=t.style;0===e?Tw(n,""):1===e?Tw(n,"left"):2===e?Tw(n,"center"):3===e?Tw(n,"right"):4===e?Tw(n,"justify"):5===e?Tw(n,"start"):6===e&&Tw(n,"end")}function Rw(t,e){const n=function(t){const e=t.__dir;if(null!==e)return e;if(JM(t))return null;const n=t.getParentOrThrow();return JM(n)&&null===n.__dir?"auto":null}(e);null!==n?t.dir=n:t.removeAttribute("dir")}function Pw(t,e){const n=pw.get(t);void 0===n&&sS(60);const i=n.createDOM(aw,lw);if(function(t,e,n){const i=n._keyToDOMMap;var r;r=t,e[`__lexicalKey_${n._key}`]=r,i.set(t,e)}(t,i,lw),IT(n)?i.setAttribute("data-lexical-text","true"):$M(n)&&i.setAttribute("data-lexical-decorator","true"),XM(n)){const t=n.__indent,e=n.__size;if(Rw(i,n),0!==t&&Cw(i,t),0!==e){const t=e-1;Nw(Ow(n,pw),n,0,t,n.getDOMSlot(i))}const r=n.__format;0!==r&&Aw(i,r),n.isInline()||Lw(null,n,i),cA(n)&&(_w+=RS,xw+=RS)}else{const e=n.getTextContent();if($M(n)){const e=n.decorate(lw,aw);null!==e&&Iw(t,e),i.contentEditable="false"}_w+=e,xw+=e}return null!==e&&e.insertChild(i),rA(mw,cw,uw,n,"created"),i}function Nw(t,e,n,i,r){const s=_w;_w="";let o=n;for(;o<=i;++o){Pw(t[o],r);const e=pw.get(t[o]);null!==e&&IT(e)&&(null===vw&&(vw=e.getFormat()),""===yw&&(yw=e.getStyle()))}cA(e)&&(_w+=RS),r.element.__lexicalTextContent=_w,_w=s+_w}function Dw(t,e){if(t){const n=t.__last;if(n){const t=e.get(n);if(t)return vT(t)?"line-break":$M(t)&&t.isInline()?"decorator":null}return"empty"}return null}function Lw(t,e,n){const i=Dw(t,fw),r=Dw(e,pw);i!==r&&e.getDOMSlot(n).setManagedLineBreak(r)}function Ow(t,e){const n=[];let i=t.__first;for(;null!==i;){const t=e.get(i);void 0===t&&sS(101),n.push(i),i=t.__next}return n}function kw(t,e){const n=fw.get(t);let i=pw.get(t);void 0!==n&&void 0!==i||sS(61);const r=bw||dw.has(t)||hw.has(t),s=uA(lw,t);if(n===i&&!r){if(XM(n)){const t=s.__lexicalTextContent;void 0!==t&&(_w+=t,xw+=t)}else{const t=n.getTextContent();xw+=t,_w+=t}return s}if(n!==i&&r&&rA(mw,cw,uw,i,"updated"),i.updateDOM(n,s,aw)){const n=Pw(t,null);return null===e&&sS(62),e.replaceChild(n,s),ww(t,null),n}if(XM(n)&&XM(i)){const t=i.__indent;(bw||t!==n.__indent)&&Cw(s,t);const e=i.__format;if((bw||e!==n.__format)&&Aw(s,e),r&&(function(t,e,n){var i,r;vw=null,yw="",function(t,e,n){const i=_w,r=t.__size,s=e.__size;_w="";const o=n.element;if(1===r&&1===s){const n=t.__first,i=e.__first;if(n===i)kw(n,o);else{const t=Uw(n),e=Pw(i,null);try{o.replaceChild(e,t)}catch(a){if("object"==typeof a&&null!=a){const r=`${a.toString()} Parent: ${o.tagName}, new child: {tag: ${e.tagName} key: ${i}}, old child: {tag: ${t.tagName}, key: ${n}}.`;throw new Error(r)}throw a}ww(n,null)}const r=pw.get(i);IT(r)&&(null===vw&&(vw=r.getFormat()),""===yw&&(yw=r.getStyle()))}else{const i=Ow(t,fw),a=Ow(e,pw);if(i.length!==r&&sS(227),a.length!==s&&sS(228),0===r)0!==s&&Nw(a,e,0,s-1,n);else if(0===s){if(0!==r){const t=null==n.after&&null==n.before&&null==n.element.__lexicalLineBreak;Ew(i,0,r-1,t?null:o),t&&(o.textContent="")}}else!function(t,e,n,i,r,s){const o=i-1,a=r-1;let l,c,u=s.getFirstChild(),h=0,d=0;for(;h<=o&&d<=a;){const t=e[h],i=n[d];if(t===i)u=Fw(kw(i,s.element)),h++,d++;else{void 0===l&&(l=new Set(e)),void 0===c&&(c=new Set(n));const r=c.has(t),o=l.has(i);if(r)if(o){const t=uA(lw,i);t===u?u=Fw(kw(i,s.element)):(s.withBefore(u).insertChild(t),kw(i,s.element)),h++,d++}else Pw(i,s.withBefore(u)),d++;else u=Fw(Uw(t)),ww(t,s.element),h++}const r=pw.get(i);null!==r&&IT(r)&&(null===vw&&(vw=r.getFormat()),""===yw&&(yw=r.getStyle()))}const f=h>o,p=d>a;if(f&&!p){const e=n[a+1],i=void 0===e?null:lw.getElementByKey(e);Nw(n,t,d,a,s.withBefore(i))}else p&&!f&&Ew(e,h,o,s.element)}(e,i,a,r,s,n)}cA(e)&&(_w+=RS),o.__lexicalTextContent=_w,_w=i+_w}(t,e,e.getDOMSlot(n)),i=e,null==vw||vw===i.__textFormat||Sw||i.setTextFormat(vw),r=e,""===yw||yw===r.__textStyle||Sw||r.setTextStyle(yw)}(n,i,s),JM(i)||i.isInline()||Lw(n,i,s)),cA(i)&&(_w+=RS,xw+=RS),(bw||i.__dir!==n.__dir)&&(Rw(s,i),JM(i)&&!bw))for(const n of i.getChildren())XM(n)&&Rw(uA(lw,n.getKey()),n)}else{const e=i.getTextContent();if($M(i)){const e=i.decorate(lw,aw);null!==e&&Iw(t,e)}_w+=e,xw+=e}if(!Sw&&JM(i)&&i.__cachedText!==xw){const t=i.getWritable();t.__cachedText=xw,i=t}return s}function Iw(t,e){let n=lw._pendingDecorators;const i=lw._decorators;if(null===n){if(i[t]===e)return;n=UC(lw)}n[t]=e}function Fw(t){let e=t.nextSibling;return null!==e&&e===lw._blockCursorElement&&(e=e.nextSibling),e}function Uw(t){const e=gw.get(t);return void 0===e&&sS(75,t),e}function zw(t){return{type:t}}const Bw=zw("SELECTION_CHANGE_COMMAND"),Hw=zw("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Vw=zw("CLICK_COMMAND"),Ww=zw("DELETE_CHARACTER_COMMAND"),Gw=zw("INSERT_LINE_BREAK_COMMAND"),jw=zw("INSERT_PARAGRAPH_COMMAND"),Xw=zw("CONTROLLED_TEXT_INSERTION_COMMAND"),qw=zw("PASTE_COMMAND"),Kw=zw("REMOVE_TEXT_COMMAND"),$w=zw("DELETE_WORD_COMMAND"),Yw=zw("DELETE_LINE_COMMAND"),Jw=zw("FORMAT_TEXT_COMMAND"),Zw=zw("UNDO_COMMAND"),Qw=zw("REDO_COMMAND"),tE=zw("KEYDOWN_COMMAND"),eE=zw("KEY_ARROW_RIGHT_COMMAND"),nE=zw("MOVE_TO_END"),iE=zw("KEY_ARROW_LEFT_COMMAND"),rE=zw("MOVE_TO_START"),sE=zw("KEY_ARROW_UP_COMMAND"),oE=zw("KEY_ARROW_DOWN_COMMAND"),aE=zw("KEY_ENTER_COMMAND"),lE=zw("KEY_SPACE_COMMAND"),cE=zw("KEY_BACKSPACE_COMMAND"),uE=zw("KEY_ESCAPE_COMMAND"),hE=zw("KEY_DELETE_COMMAND"),dE=zw("KEY_TAB_COMMAND"),fE=zw("INSERT_TAB_COMMAND"),pE=zw("INDENT_CONTENT_COMMAND"),gE=zw("OUTDENT_CONTENT_COMMAND"),mE=zw("DROP_COMMAND"),_E=zw("FORMAT_ELEMENT_COMMAND"),vE=zw("DRAGSTART_COMMAND"),yE=zw("DRAGOVER_COMMAND"),xE=zw("DRAGEND_COMMAND"),bE=zw("COPY_COMMAND"),SE=zw("CUT_COMMAND"),wE=zw("SELECT_ALL_COMMAND"),EE=zw("CLEAR_EDITOR_COMMAND"),TE=zw("CLEAR_HISTORY_COMMAND"),ME=zw("CAN_REDO_COMMAND"),CE=zw("CAN_UNDO_COMMAND"),AE=zw("FOCUS_COMMAND"),RE=zw("BLUR_COMMAND"),PE=zw("KEY_MODIFIER_COMMAND"),NE=Object.freeze({}),DE=[["keydown",function(t,e){if(!(LE=t.timeStamp,OE=t.key,e.isComposing()||lA(e,tE,t)||null==t.key)){if(WE&&eA(t))return VM(e,()=>{QE(e,GE)}),WE=!1,void(GE="");if(ZC(t,"ArrowRight",{shiftKey:"any"}))lA(e,eE,t);else if(function(t){return ZC(t,"ArrowRight",QC)}(t))lA(e,nE,t);else if(function(t){return ZC(t,"ArrowLeft",{shiftKey:"any"})}(t))lA(e,iE,t);else if(function(t){return ZC(t,"ArrowLeft",QC)}(t))lA(e,rE,t);else if(function(t){return ZC(t,"ArrowUp",{altKey:"any",shiftKey:"any"})}(t))lA(e,sE,t);else if(function(t){return ZC(t,"ArrowDown",{altKey:"any",shiftKey:"any"})}(t))lA(e,oE,t);else if(function(t){return ZC(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(t))HE=!0,lA(e,aE,t);else if(function(t){return" "===t.key}(t))lA(e,lE,t);else if(function(t){return cS&&ZC(t,"o",{ctrlKey:!0})}(t))t.preventDefault(),HE=!0,lA(e,Gw,!0);else if(function(t){return ZC(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(t))HE=!1,lA(e,aE,t);else if(function(t){return ZC(t,"Backspace",{shiftKey:"any"})||cS&&ZC(t,"h",{ctrlKey:!0})}(t))eA(t)?lA(e,cE,t):(t.preventDefault(),lA(e,Ww,!0));else if(function(t){return"Escape"===t.key}(t))lA(e,uE,t);else if(function(t){return ZC(t,"Delete",{})||cS&&ZC(t,"d",{ctrlKey:!0})}(t))!function(t){return"Delete"===t.key}(t)?(t.preventDefault(),lA(e,Ww,!1)):lA(e,hE,t);else if(function(t){return ZC(t,"Backspace",tA)}(t))t.preventDefault(),lA(e,$w,!0);else if(function(t){return ZC(t,"Delete",tA)}(t))t.preventDefault(),lA(e,$w,!1);else if(function(t){return cS&&ZC(t,"Backspace",{metaKey:!0})}(t))t.preventDefault(),lA(e,Yw,!0);else if(function(t){return cS&&(ZC(t,"Delete",{metaKey:!0})||ZC(t,"k",{ctrlKey:!0}))}(t))t.preventDefault(),lA(e,Yw,!1);else if(function(t){return ZC(t,"b",QC)}(t))t.preventDefault(),lA(e,Jw,"bold");else if(function(t){return ZC(t,"u",QC)}(t))t.preventDefault(),lA(e,Jw,"underline");else if(function(t){return ZC(t,"i",QC)}(t))t.preventDefault(),lA(e,Jw,"italic");else if(function(t){return ZC(t,"Tab",{shiftKey:"any"})}(t))lA(e,dE,t);else if(function(t){return ZC(t,"z",QC)}(t))t.preventDefault(),lA(e,Zw,void 0);else if(function(t){return cS?ZC(t,"z",{metaKey:!0,shiftKey:!0}):ZC(t,"y",{ctrlKey:!0})||ZC(t,"z",{ctrlKey:!0,shiftKey:!0})}(t))t.preventDefault(),lA(e,Qw,void 0);else{const n=e._editorState._selection;null===n||XT(n)?nA(t)&&(t.preventDefault(),lA(e,wE,t)):function(t){return ZC(t,"c",QC)}(t)?(t.preventDefault(),lA(e,bE,t)):function(t){return ZC(t,"x",QC)}(t)?(t.preventDefault(),lA(e,SE,t)):nA(t)&&(t.preventDefault(),lA(e,wE,t))}(function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey})(t)&&lA(e,PE,t)}}],["pointerdown",function(t,e){const n=t.target,i=t.pointerType;TA(n)&&"touch"!==i&&"pen"!==i&&0===t.button&&VM(e,()=>{_C(n)||(BE=!0)})}],["compositionstart",function(t,e){VM(e,()=>{const n=cM();if(XT(n)&&!e.isComposing()){const i=n.anchor,r=n.anchor.getNode();DC(i.key),(t.timeStamp<LE+30||"element"===i.type||!n.isCollapsed()||r.getFormat()!==n.format||IT(r)&&r.getStyle()!==n.style)&&lA(e,Xw,PS)}})}],["compositionend",function(t,e){uS?VE=!0:fS||!dS&&!_S?VM(e,()=>{QE(e,t.data)}):(WE=!0,GE=t.data)}],["input",function(t,e){t.stopPropagation(),VM(e,()=>{if(EA(t.target)&&_C(t.target))return;const n=cM(),i=t.data,r=ZE(t);if(null!=i&&XT(n)&&qE(n,r,i,t.timeStamp,!1)){VE&&(QE(e,i),VE=!1);const r=n.anchor.getNode(),s=SA(gA(e));if(null===s)return;const o=n.isBackward(),a=o?n.anchor.offset:n.focus.offset,l=o?n.focus.offset:n.anchor.offset;hS&&!n.isCollapsed()&&IT(r)&&null!==s.anchorNode&&r.getTextContent().slice(0,a)+i+r.getTextContent().slice(a+l)===qC(s.anchorNode)||lA(e,Xw,i);const c=i.length;uS&&c>1&&"insertCompositionText"===t.inputType&&!e.isComposing()&&(n.anchor.offset-=c),dS||fS||_S||!e.isComposing()||(LE=0,DC(null))}else KC(!1,e,null!==i?i:void 0),VE&&(QE(e,i||void 0),VE=!1);!function(){CM();qS(PM())}()},{event:t}),IE=null}],["click",function(t,e){VM(e,()=>{const n=cM(),i=SA(gA(e)),r=uM();if(i)if(XT(n)){const e=n.anchor,s=e.getNode();if("element"===e.type&&0===e.offset&&n.isCollapsed()&&!JM(s)&&1===BC().getChildrenSize()&&s.getTopLevelElementOrThrow().isEmpty()&&null!==r&&n.is(r))i.removeAllRanges(),n.dirty=!0;else if(3===t.detail&&!n.isCollapsed()&&s!==n.focus.getNode()){const t=zA(s,t=>XM(t)&&!t.isInline());XM(t)&&t.select(0)}}else if("touch"===t.pointerType||"pen"===t.pointerType){const n=i.anchorNode;(EA(n)||TC(n))&&VC(lM(r,i,e,t))}lA(e,Vw,t)})}],["cut",NE],["copy",NE],["dragstart",NE],["dragover",NE],["dragend",NE],["paste",NE],["focus",NE],["blur",NE],["drop",NE]];hS&&DE.push(["beforeinput",(t,e)=>function(t,e){const n=t.inputType,i=ZE(t);"deleteCompositionText"===n||uS&&aA(e)||"insertCompositionText"!==n&&VM(e,()=>{const r=cM();if("deleteContentBackward"===n){if(null===r){const t=uM();if(!XT(t))return;VC(t.clone())}if(XT(r)){const n=r.anchor.key===r.focus.key;if(s=t.timeStamp,"MediaLast"===OE&&s<LE+30&&e.isComposing()&&n){if(DC(null),LE=0,setTimeout(()=>{VM(e,()=>{DC(null)})},30),XT(r)){const t=r.anchor.getNode();t.markDirty(),IT(t)||sS(142),JE(r,t)}}else{DC(null),t.preventDefault();const i=r.anchor.getNode(),s=i.getTextContent(),o=i.canInsertTextAfter(),a=0===r.anchor.offset&&r.focus.offset===s.length;let l=mS&&n&&!a&&o;if(l&&r.isCollapsed()&&(l=!$M(oA(r.anchor,!0))),!l){lA(e,Ww,!0);const t=cM();mS&&XT(t)&&t.isCollapsed()&&(jE=t,setTimeout(()=>jE=null))}}return}}var s;if(!XT(r))return;const o=t.data;null!==IE&&KC(!1,e,IE),r.dirty&&null===IE||!r.isCollapsed()||JM(r.anchor.getNode())||null===i||r.applyDOMRange(i),IE=null;const a=r.anchor,l=r.focus,c=a.getNode(),u=l.getNode();if("insertText"!==n&&"insertTranspose"!==n)switch(t.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":lA(e,Xw,t);break;case"insertFromComposition":DC(null),lA(e,Xw,t);break;case"insertLineBreak":DC(null),lA(e,Gw,!1);break;case"insertParagraph":DC(null),HE&&!fS?(HE=!1,lA(e,Gw,!1)):lA(e,jw,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":lA(e,qw,t);break;case"deleteByComposition":((h=c)!==(d=u)||XM(h)||XM(d)||!wC(h)||!wC(d))&&lA(e,Kw,t);break;case"deleteByDrag":case"deleteByCut":lA(e,Kw,t);break;case"deleteContent":lA(e,Ww,!1);break;case"deleteWordBackward":lA(e,$w,!0);break;case"deleteWordForward":lA(e,$w,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":lA(e,Yw,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":lA(e,Yw,!1);break;case"formatStrikeThrough":lA(e,Jw,"strikethrough");break;case"formatBold":lA(e,Jw,"bold");break;case"formatItalic":lA(e,Jw,"italic");break;case"formatUnderline":lA(e,Jw,"underline");break;case"historyUndo":lA(e,Zw,void 0);break;case"historyRedo":lA(e,Qw,void 0)}else{if("\n"===o)t.preventDefault(),lA(e,Gw,!1);else if(o===RS)t.preventDefault(),lA(e,jw,void 0);else if(null==o&&t.dataTransfer){const e=t.dataTransfer.getData("text/plain");t.preventDefault(),r.insertRawText(e)}else null!=o&&qE(r,i,o,t.timeStamp,!0)?(t.preventDefault(),lA(e,Xw,o)):IE=o;kE=t.timeStamp}var h,d})}(t,e)]);let LE=0,OE=null,kE=0,IE=null;const FE=new WeakMap,UE=new WeakMap;let zE=!1,BE=!1,HE=!1,VE=!1,WE=!1,GE="",jE=null,XE=[0,"",0,"root",0];function qE(t,e,n,i,r){const s=t.anchor,o=t.focus,a=s.getNode(),l=PM(),c=SA(gA(l)),u=null!==c?c.anchorNode:null,h=s.key,d=l.getElementByKey(h),f=n.length;return h!==o.key||!IT(a)||(!r&&(!hS||kE<i+50)||a.isDirty()&&f<2||GC(n))&&s.offset!==o.offset&&!a.isComposing()||EC(a)||a.isDirty()&&f>1||(r||!hS)&&null!==d&&!a.isComposing()&&u!==CC(d)||null!==c&&null!==e&&(!e.collapsed||e.startContainer!==c.anchorNode||e.startOffset!==c.anchorOffset)||a.getFormat()!==t.format||a.getStyle()!==t.style||function(t,e){if(e.isSegmented())return!0;if(!t.isCollapsed())return!1;const n=t.anchor.offset,i=e.getParentOrThrow(),r=wC(e);return 0===n?!e.canInsertTextBefore()||!i.canInsertTextBefore()&&!e.isComposing()||r||function(t){const e=t.getPreviousSibling();return(IT(e)||XM(e)&&e.isInline())&&!e.canInsertTextAfter()}(e):n===e.getTextContentSize()&&(!e.canInsertTextAfter()||!i.canInsertTextAfter()&&!e.isComposing()||r)}(t,a)}function KE(t,e){return TC(t)&&null!==t.nodeValue&&0!==e&&e!==t.nodeValue.length}function $E(t,e,n){const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}=t;zE&&(zE=!1,KE(i,r)&&KE(s,o)&&!jE)||VM(e,()=>{if(!n)return void VC(null);if(!yC(e,i,s))return;let a=cM();if(jE&&XT(a)&&a.isCollapsed()){const t=a.anchor,e=jE.anchor;(t.key===e.key&&t.offset===e.offset+1||1===t.offset&&e.getNode().is(t.getNode().getPreviousSibling()))&&(a=jE.clone(),VC(a))}if(jE=null,XT(a)){const n=a.anchor,i=n.getNode();if(a.isCollapsed()){"Range"===t.type&&t.anchorNode===t.focusNode&&(a.dirty=!0);const r=gA(e).event,s=r?r.timeStamp:performance.now(),[o,c,u,h,d]=XE,f=BC(),p=!1===e.isComposing()&&""===f.getTextContent();if(s<d+200&&n.offset===u&&n.key===h)YE(a,o,c);else if("text"===n.type)IT(i)||sS(141),JE(a,i);else if("element"===n.type&&!p){XM(i)||sS(259);const t=n.getNode();t.isEmpty()?YE(a,(l=t).getTextFormat(),l.getTextStyle()):YE(a,0,"")}}else{const t=n.key,e=a.focus.key,i=a.getNodes(),s=i.length,l=a.isBackward(),c=l?o:r,u=l?r:o,h=l?e:t,d=l?t:e;let f=2047,p=!1;for(let n=0;n<s;n++){const t=i[n],e=t.getTextContentSize();if(IT(t)&&0!==e&&!(0===n&&t.__key===h&&c===e||n===s-1&&t.__key===d&&0===u)&&(p=!0,f&=t.getFormat(),0===f))break}a.format=p?f:0}}var l;lA(e,Bw,void 0)})}function YE(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0)}function JE(t,e){YE(t,e.getFormat(),e.getStyle())}function ZE(t){if(!t.getTargetRanges)return null;const e=t.getTargetRanges();return 0===e.length?null:e[0]}function QE(t,e){const n=t._compositionKey;if(DC(null),null!==n&&null!=e){if(""===e){const e=OC(n),i=CC(t.getElementByKey(n));return void(null!==i&&null!==i.nodeValue&&IT(e)&&$C(e,i.nodeValue,null,null,!0))}if("\n"===e[e.length-1]){const e=cM();if(XT(e)){const n=e.focus;return e.anchor.set(n.key,n.offset,n.type),void lA(t,aE,null)}}}KC(!0,t,e)}function tT(t){let e=t.__lexicalEventHandles;return void 0===e&&(e=[],t.__lexicalEventHandles=e),e}const eT=new Map;function nT(t){const e=function(t){const e=pA(t);return e?e.getSelection():null}(t.target);if(null===e)return;const n=bC(e.anchorNode);if(null===n)return;BE&&(BE=!1,VM(n,()=>{const i=uM(),r=e.anchorNode;(EA(r)||TC(r))&&VC(lM(i,e,n,t))}));const i=jC(n),r=i[i.length-1],s=r._key,o=eT.get(s),a=o||r;a!==n&&$E(e,a,!1),$E(e,n,!0),n!==r?eT.set(s,n):o&&eT.delete(s)}function iT(t){t._lexicalHandled=!0}function rT(t){return!0===t._lexicalHandled}function sT(t,e,n){CM();const i=t.__key,r=t.getParent();if(null===r)return;const s=function(t){const e=cM();if(!XT(e)||!XM(t))return e;const{anchor:n,focus:i}=e,r=n.getNode(),s=i.getNode();return fA(r,t)&&n.set(t.__key,0,"element"),fA(s,t)&&i.set(t.__key,0,"element"),e}(t);let o=!1;if(XT(s)&&e){const e=s.anchor,n=s.focus;e.key===i&&(fM(e,t,r,t.getPreviousSibling(),t.getNextSibling()),o=!0),n.key===i&&(fM(n,t,r,t.getPreviousSibling(),t.getNextSibling()),o=!0)}else KT(s)&&e&&t.isSelected()&&t.selectPrevious();if(XT(s)&&e&&!o){const e=t.getIndexWithinParent();PC(t),hM(s,r,e,-1)}else PC(t);n||_A(r)||r.canBeEmpty()||!r.isEmpty()||sT(r,e),e&&s&&JM(r)&&r.isEmpty()&&r.selectEnd()}const oT=Symbol.for("ephemeral");function aT(t){return t[oT]||!1}class lT{constructor(t){kt(this,"__type"),kt(this,"__key"),kt(this,"__parent"),kt(this,"__prev"),kt(this,"__next"),kt(this,"__state"),this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),function(t,e){const n=function(){const t=hC;return hC=null,t}();if(null!=(e=e||n&&n.__key))return void(t.__key=e);CM(),AM();const i=PM(),r=RM(),s=""+fC++;r._nodeMap.set(s,t),XM(t)?i._dirtyElements.set(s,!0):i._dirtyLeaves.add(s),i._cloneNotNeeded.add(s),i._dirtyType=1,t.__key=s}(this,t)}static getType(){const{ownNodeType:t}=UA(this);return void 0===t&&sS(64,this.name),t}static clone(t){sS(65,this.name)}$config(){return{}}config(t,e){const n=e.extends||Object.getPrototypeOf(this.constructor);return Object.assign(e,{extends:n,type:t}),{[t]:e}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}getType(){return this.__type}isInline(){sS(137,this.constructor.name)}isAttached(){let t=this.__key;for(;null!==t;){if("root"===t)return!0;const e=OC(t);if(null===e)break;t=e.__parent}return!1}isSelected(t){const e=t||cM();if(null==e)return!1;const n=e.getNodes().some(t=>t.__key===this.__key);if(IT(this))return n;if(XT(e)&&"element"===e.anchor.type&&"element"===e.focus.type){if(e.isCollapsed())return!1;const t=this.getParent();if($M(this)&&this.isInline()&&t){const n=e.isBackward()?e.focus:e.anchor;if(t.is(n.getNode())&&n.offset===t.getChildrenSize()&&this.is(t.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(null===t)return-1;let e=t.getFirstChild(),n=0;for(;null!==e;){if(this.is(e))return n;n++,e=e.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return null===t?null:OC(t)}getParentOrThrow(){const t=this.getParent();return null===t&&sS(66,this.__key),t}getTopLevelElement(){let t=this;for(;null!==t;){const e=t.getParent();if(_A(e))return XM(t)||t===this&&$M(t)||sS(194),t;t=e}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return null===t&&sS(67,this.__key),t}getParents(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e),e=e.getParent();return t}getParentKeys(){const t=[];let e=this.getParent();for(;null!==e;)t.push(e.__key),e=e.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return null===t?null:OC(t)}getPreviousSiblings(){const t=[],e=this.getParent();if(null===e)return t;let n=e.getFirstChild();for(;null!==n&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return null===t?null:OC(t)}getNextSiblings(){const t=[];let e=this.getNextSibling();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getCommonAncestor(t){const e=XM(this)?this:this.getParent(),n=XM(t)?t:t.getParent(),i=e&&n?gR(e,n):null;return i?i.commonAncestor:null}is(t){return null!=t&&this.__key===t.__key}isBefore(t){const e=gR(this,t);return null!==e&&("descendant"===e.type||("branch"===e.type?-1===dR(e):("same"!==e.type&&"ancestor"!==e.type&&sS(279),!1)))}isParentOf(t){const e=gR(this,t);return null!==e&&"ancestor"===e.type}getNodesBetween(t){const e=this.isBefore(t),n=[],i=new Set;let r=this;for(;null!==r;){const s=r.__key;if(i.has(s)||(i.add(s),n.push(r)),r===t)break;const o=XM(r)?e?r.getFirstChild():r.getLastChild():null;if(null!==o){r=o;continue}const a=e?r.getNextSibling():r.getPreviousSibling();if(null!==a){r=a;continue}const l=r.getParentOrThrow();if(i.has(l.__key)||n.push(l),l===t)break;let c=null,u=l;do{if(null===u&&sS(68),c=e?u.getNextSibling():u.getPreviousSibling(),u=u.getParent(),null===u)break;null!==c||i.has(u.__key)||n.push(u)}while(null===c);r=c}return e||n.reverse(),n}isDirty(){const t=PM()._dirtyLeaves;return null!==t&&t.has(this.__key)}getLatest(){if(aT(this))return this;const t=OC(this.__key);return null===t&&sS(113),t}getWritable(){if(aT(this))return this;CM();const t=RM(),e=PM(),n=t._nodeMap,i=this.__key,r=this.getLatest(),s=e._cloneNotNeeded,o=cM();if(null!==o&&o.setCachedNodes(null),s.has(i))return NC(r),r;const a=OA(r);return s.add(i),NC(a),n.set(i,a),a}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,e){sS(70)}updateDOM(t,e,n){sS(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){sS(18,this.name)}updateFromJSON(t){return function(t,e){const n=t.getWritable(),i=e.$;let r=i;for(const s of JS(n).flatKeys)s in e&&(void 0!==r&&r!==i||(r={...i}),r[s]=e[s]);return(n.__state||r)&&function(t){const e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new YS(e,JS(e));return e.__state=n,n}(t).updateFromJSON(r),n}(this,t)}static transform(){return null}remove(t){sT(this,!0,t)}replace(t,e){CM();let n=cM();null!==n&&(n=n.clone()),yA(this,t);const i=this.getLatest(),r=this.__key,s=t.__key,o=t.getWritable(),a=this.getParentOrThrow().getWritable(),l=a.__size;PC(o);const c=i.getPreviousSibling(),u=i.getNextSibling(),h=i.__prev,d=i.__next,f=i.__parent;if(sT(i,!1,!0),null===c?a.__first=s:c.getWritable().__next=s,o.__prev=h,null===u?a.__last=s:u.getWritable().__prev=s,o.__next=d,o.__parent=f,a.__size=l,e&&(XM(this)&&XM(o)||sS(139),this.getChildren().forEach(t=>{o.append(t)})),XT(n)){VC(n);const t=n.anchor,e=n.focus;t.key===r&&GT(t,o),e.key===r&&GT(e,o)}return LC()===r&&DC(s),o}insertAfter(t,e=!0){CM(),yA(this,t);const n=this.getWritable(),i=t.getWritable(),r=i.getParent(),s=cM();let o=!1,a=!1;if(null!==r){const e=t.getIndexWithinParent();if(PC(i),XT(s)){const t=r.__key,n=s.anchor,i=s.focus;o="element"===n.type&&n.key===t&&n.offset===e+1,a="element"===i.type&&i.key===t&&i.offset===e+1}}const l=this.getNextSibling(),c=this.getParentOrThrow().getWritable(),u=i.__key,h=n.__next;if(null===l?c.__last=u:l.getWritable().__prev=u,c.__size++,n.__next=u,i.__next=h,i.__prev=n.__key,i.__parent=n.__parent,e&&XT(s)){const t=this.getIndexWithinParent();hM(s,c,t+1);const e=c.__key;o&&s.anchor.set(e,t+2,"element"),a&&s.focus.set(e,t+2,"element")}return t}insertBefore(t,e=!0){CM(),yA(this,t);const n=this.getWritable(),i=t.getWritable(),r=i.__key;PC(i);const s=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),a=n.__prev,l=this.getIndexWithinParent();null===s?o.__first=r:s.getWritable().__next=r,o.__size++,n.__prev=r,i.__prev=a,i.__next=n.__key,i.__parent=n.__parent;const c=cM();return e&&XT(c)&&hM(c,this.getParentOrThrow(),l),t}isParentRequired(){return!1}createParentElementNode(){return sC()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,e){CM();const n=this.getPreviousSibling(),i=this.getParentOrThrow();if(null===n)return i.select(0,0);if(XM(n))return n.select();if(!IT(n)){const t=n.getIndexWithinParent()+1;return i.select(t,t)}return n.select(t,e)}selectNext(t,e){CM();const n=this.getNextSibling(),i=this.getParentOrThrow();if(null===n)return i.select();if(XM(n))return n.select(0,0);if(!IT(n)){const t=n.getIndexWithinParent();return i.select(t,t)}return n.select(t,e)}markDirty(){this.getWritable()}reconcileObservedMutation(t,e){this.markDirty()}}kt(lT,"importDOM");const cT="historic",uT="history-merge",hT="collaboration",dT="skip-scroll-into-view",fT="skip-dom-selection",pT="skip-selection-focus";class gT extends lT{static getType(){return"linebreak"}static clone(t){return new gT(t.__key)}constructor(t){super(t)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(t){const e=t.parentElement;if(null!==e&&AA(e)){const n=e.firstChild;if(n===t||n.nextSibling===t&&yT(n)){const n=e.lastChild;if(n===t||n.previousSibling===t&&yT(n))return!0}}return!1}(t)||function(t){const e=t.parentElement;if(null!==e&&AA(e)){const n=e.firstChild;if(n===t||n.nextSibling===t&&yT(n))return!1;const i=e.lastChild;if(i===t||i.previousSibling===t&&yT(i))return!0}return!1}(t)?null:{conversion:mT,priority:0}}}static importJSON(t){return _T().updateFromJSON(t)}}function mT(t){return{node:_T()}}function _T(){return vA(new gT)}function vT(t){return t instanceof gT}function yT(t){return TC(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"")}function xT(t,e){return 16&e?"code":128&e?"mark":32&e?"sub":64&e?"sup":null}function bT(t,e){return 1&e?"strong":2&e?"em":"span"}function ST(t,e,n,i,r){const s=i.classList;let o=iA(r,"base");void 0!==o&&s.add(...o),o=iA(r,"underlineStrikethrough");let a=!1;const l=8&e&&4&e;void 0!==o&&(8&n&&4&n?(a=!0,l||s.add(...o)):l&&s.remove(...o));for(const c in NS){const t=NS[c];if(o=iA(r,c),void 0!==o)if(n&t){if(a&&("underline"===c||"strikethrough"===c)){e&t&&s.remove(...o);continue}(0===(e&t)||l&&"underline"===c||"strikethrough"===c)&&s.add(...o)}else e&t&&s.remove(...o)}}function wT(t,e,n){const i=e.firstChild,r=n.isComposing(),s=t+(r?AS:"");if(null==i)e.textContent=s;else{const t=i.nodeValue;if(t!==s)if(r||uS){const[e,n,r]=function(t,e){const n=t.length,i=e.length;let r=0,s=0;for(;r<n&&r<i&&t[r]===e[r];)r++;for(;s+r<n&&s+r<i&&t[n-s-1]===e[i-s-1];)s++;return[r,n-r-s,e.slice(r,i-s)]}(t,s);0!==n&&i.deleteData(e,n),i.insertData(e,r)}else i.nodeValue=s}}function ET(t,e,n,i,r,s){wT(r,t,e);const o=s.theme.text;void 0!==o&&ST(0,0,i,t,o)}function TT(t,e){const n=document.createElement(e);return n.appendChild(t),n}class MT extends lT{constructor(t="",e){super(e),kt(this,"__text"),kt(this,"__format"),kt(this,"__style"),kt(this,"__mode"),kt(this,"__detail"),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}static getType(){return"text"}static clone(t){return new MT(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return IS[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===LC()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const e=NS[t];return 0!==(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(t,e){return AC(this.getLatest().__format,t,e)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,e){const n=this.__format,i=xT(0,n),r=bT(0,n),s=null===i?r:i,o=document.createElement(s);let a=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),null!==i&&(a=document.createElement(r),o.appendChild(a)),ET(a,this,0,n,this.__text,t);const l=this.__style;return""!==l&&(o.style.cssText=l),o}updateDOM(t,e,n){const i=this.__text,r=t.__format,s=this.__format,o=xT(0,r),a=xT(0,s),l=bT(0,r),c=bT(0,s);if((null===o?l:o)!==(null===a?c:a))return!0;if(o===a&&l!==c){const t=e.firstChild;null==t&&sS(48);const r=document.createElement(c);return ET(r,this,0,s,i,n),e.replaceChild(r,t),!1}let u=e;null!==a&&null!==o&&(u=e.firstChild,null==u&&sS(49)),wT(i,u,this);const h=n.theme.text;void 0!==h&&r!==s&&ST(0,r,s,u,h);const d=t.__style,f=this.__style;return d!==f&&(e.style.cssText=f),!1}static importDOM(){return{"#text":()=>({conversion:NT,priority:0}),b:()=>({conversion:AT,priority:0}),code:()=>({conversion:OT,priority:0}),em:()=>({conversion:OT,priority:0}),i:()=>({conversion:OT,priority:0}),mark:()=>({conversion:OT,priority:0}),s:()=>({conversion:OT,priority:0}),span:()=>({conversion:CT,priority:0}),strong:()=>({conversion:OT,priority:0}),sub:()=>({conversion:OT,priority:0}),sup:()=>({conversion:OT,priority:0}),u:()=>({conversion:OT,priority:0})}}static importJSON(t){return kT().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:e}=super.exportDOM(t);return EA(e)||sS(132),e.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?e.style.textTransform="lowercase":this.hasFormat("uppercase")?e.style.textTransform="uppercase":this.hasFormat("capitalize")&&(e.style.textTransform="capitalize"),this.hasFormat("bold")&&(e=TT(e,"b")),this.hasFormat("italic")&&(e=TT(e,"i")),this.hasFormat("strikethrough")&&(e=TT(e,"s")),this.hasFormat("underline")&&(e=TT(e,"u")),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,e){}setFormat(t){const e=this.getWritable();return e.__format="string"==typeof t?NS[t]:t,e}setDetail(t){const e=this.getWritable();return e.__detail="string"==typeof t?DS[t]:t,e}setStyle(t){const e=this.getWritable();return e.__style=t,e}toggleFormat(t){const e=AC(this.getFormat(),t,null);return this.setFormat(e)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const e=kS[t];if(this.__mode===e)return this;const n=this.getWritable();return n.__mode=e,n}setTextContent(t){if(this.__text===t)return this;const e=this.getWritable();return e.__text=t,e}select(t,e){CM();let n=t,i=e;const r=cM(),s=this.getTextContent(),o=this.__key;if("string"==typeof s){const t=s.length;void 0===n&&(n=t),void 0===i&&(i=t)}else n=0,i=0;if(!XT(r))return sM(o,n,o,i,"text","text");{const t=LC();t!==r.anchor.key&&t!==r.focus.key||DC(o),r.setTextNodeRange(this,n,this,i)}return r}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,e,n,i){const r=this.getWritable(),s=r.__text,o=n.length;let a=t;a<0&&(a=o+a,a<0&&(a=0));const l=cM();if(i&&XT(l)){const e=t+o;l.setTextNodeRange(r,e,r,e)}const c=s.slice(0,a)+n+s.slice(a+e);return r.__text=c,r}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){CM();const e=this.getLatest(),n=e.getTextContent();if(""===n)return[];const i=e.__key,r=LC(),s=n.length;t.sort((t,e)=>t-e),t.push(s);const o=[],a=t.length;for(let w=0,E=0;w<s&&E<=a;E++){const e=t[E];e>w&&(o.push(n.slice(w,e)),w=e)}const l=o.length;if(1===l)return[e];const c=o[0],u=e.getParent();let h;const d=e.getFormat(),f=e.getStyle(),p=e.__detail;let g=!1,m=null,_=null;const v=cM();if(XT(v)){const[t,e]=v.isBackward()?[v.focus,v.anchor]:[v.anchor,v.focus];"text"===t.type&&t.key===i&&(m=t),"text"===e.type&&e.key===i&&(_=e)}e.isSegmented()?(h=kT(c),h.__format=d,h.__style=f,h.__detail=p,h.__state=ew(e,h),g=!0):h=e.setTextContent(c);const y=[h];for(let w=1;w<l;w++){const t=kT(o[w]);t.__format=d,t.__style=f,t.__detail=p,t.__state=ew(e,t);const n=t.__key;r===i&&DC(n),y.push(t)}const x=m?m.offset:null,b=_?_.offset:null;let S=0;for(const w of y){if(!m&&!_)break;const t=S+w.getTextContentSize();if(null!==m&&null!==x&&x<=t&&x>=S&&(m.set(w.getKey(),x-S,"text"),x<t&&(m=null)),null!==_&&null!==b&&b<=t&&b>=S){_.set(w.getKey(),b-S,"text");break}S=t}if(null!==u){!function(t){const e=t.getPreviousSibling(),n=t.getNextSibling();null!==e&&NC(e),null!==n&&NC(n)}(this);const t=u.getWritable(),e=this.getIndexWithinParent();g?(t.splice(e,0,y),this.remove()):t.splice(e,1,y),XT(v)&&hM(v,u,e,l-1)}return y}mergeWithSibling(t){const e=t===this.getPreviousSibling();e||t===this.getNextSibling()||sS(50);const n=this.__key,i=t.__key,r=this.__text,s=r.length;LC()===i&&DC(n);const o=cM();if(XT(o)){const r=o.anchor,a=o.focus;null!==r&&r.key===i&&pM(r,e,n,t,s),null!==a&&a.key===i&&pM(a,e,n,t,s)}const a=t.__text,l=e?a+r:r+a;this.setTextContent(l);const c=this.getWritable();return t.remove(),c}isTextEntity(){return!1}}function CT(t){return{forChild:FT(t.style),node:null}}function AT(t){const e=t,n="normal"===e.style.fontWeight;return{forChild:FT(e.style,n?void 0:"bold"),node:null}}const RT=new WeakMap;function PT(t){if(!EA(t))return!1;if("PRE"===t.nodeName)return!0;const e=t.style.whiteSpace;return"string"==typeof e&&e.startsWith("pre")}function NT(t){const e=t;null===t.parentElement&&sS(129);let n=e.textContent||"";if(null!==function(t){let e,n=t.parentNode;const i=[t];for(;null!==n&&void 0===(e=RT.get(n))&&!PT(n);)i.push(n),n=n.parentNode;const r=void 0===e?n:e;for(let s=0;s<i.length;s++)RT.set(i[s],r);return r}(e)){const t=n.split(/(\r?\n|\t)/),e=[],i=t.length;for(let n=0;n<i;n++){const i=t[n];"\n"===i||"\r\n"===i?e.push(_T()):"\t"===i?e.push(zT()):""!==i&&e.push(kT(i))}return{node:e}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===n)return{node:null};if(" "===n[0]){let t=e,i=!0;for(;null!==t&&null!==(t=DT(t,!1));){const e=t.textContent||"";if(e.length>0){/[ \t\n]$/.test(e)&&(n=n.slice(1)),i=!1;break}}i&&(n=n.slice(1))}if(" "===n[n.length-1]){let t=e,i=!0;for(;null!==t&&null!==(t=DT(t,!0));)if((t.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){i=!1;break}i&&(n=n.slice(0,n.length-1))}return""===n?{node:null}:{node:kT(n)}}function DT(t,e){let n=t;for(;;){let t;for(;null===(t=e?n.nextSibling:n.previousSibling);){const t=n.parentElement;if(null===t)return null;n=t}if(n=t,EA(n)){const t=n.style.display;if(""===t&&!CA(n)||""!==t&&!t.startsWith("inline"))return null}let i=n;for(;null!==(i=e?n.firstChild:n.lastChild);)n=i;if(TC(n))return n;if("BR"===n.nodeName)return null}}const LT={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function OT(t){const e=LT[t.nodeName.toLowerCase()];return void 0===e?{node:null}:{forChild:FT(t.style,e),node:null}}function kT(t=""){return vA(new MT(t))}function IT(t){return t instanceof MT}function FT(t,e){const n=t.fontWeight,i=t.textDecoration.split(" "),r="700"===n||"bold"===n,s=i.includes("line-through"),o="italic"===t.fontStyle,a=i.includes("underline"),l=t.verticalAlign;return t=>IT(t)?(r&&!t.hasFormat("bold")&&t.toggleFormat("bold"),s&&!t.hasFormat("strikethrough")&&t.toggleFormat("strikethrough"),o&&!t.hasFormat("italic")&&t.toggleFormat("italic"),a&&!t.hasFormat("underline")&&t.toggleFormat("underline"),"sub"!==l||t.hasFormat("subscript")||t.toggleFormat("subscript"),"super"!==l||t.hasFormat("superscript")||t.toggleFormat("superscript"),e&&!t.hasFormat(e)&&t.toggleFormat(e),t):t}class UT extends MT{static getType(){return"tab"}static clone(t){return new UT(t.__key)}constructor(t){super("\t",t),this.__detail=2}static importDOM(){return null}createDOM(t){const e=super.createDOM(t),n=iA(t.theme,"tab");return void 0!==n&&e.classList.add(...n),e}static importJSON(t){return zT().updateFromJSON(t)}setTextContent(t){return"\t"!==t&&""!==t&&oS(126),super.setTextContent("\t")}spliceText(t,e,n,i){return""===n&&0===e||"\t"===n&&1===e||sS(286),this}setDetail(t){return 2!==t&&sS(127),this}setMode(t){return"normal"!==t&&sS(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function zT(){return vA(new UT)}function BT(t){return t instanceof UT}class HT{constructor(t,e,n){kt(this,"key"),kt(this,"offset"),kt(this,"type"),kt(this,"_selection"),this._selection=null,this.key=t,this.offset=e,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:hR(wR(mR(this,"next")),wR(mR(t,"next")))<0}getNode(){const t=OC(this.key);return null===t&&sS(20),t}set(t,e,n,i){const r=this._selection,s=this.key;i&&this.key===t&&this.offset===e&&this.type===n||(this.key=t,this.offset=e,this.type=n,MM()||(LC()===s&&DC(t),null!==r&&(r.setCachedNodes(null),r.dirty=!0)))}}function VT(t,e,n){return new HT(t,e,n)}function WT(t,e){let n=e.__key,i=t.offset,r="element";if(IT(e)){r="text";const t=e.getTextContentSize();i>t&&(i=t)}else if(!XM(e)){const t=e.getNextSibling();if(IT(t))n=t.__key,i=0,r="text";else{const t=e.getParent();t&&(n=t.__key,i=e.getIndexWithinParent()+1)}}t.set(n,i,r)}function GT(t,e){if(XM(e)){const n=e.getLastDescendant();XM(n)||IT(n)?WT(t,n):WT(t,e)}else WT(t,e)}class jT{constructor(t){kt(this,"_nodes"),kt(this,"_cachedNodes"),kt(this,"dirty"),this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!KT(t))return!1;const e=this._nodes,n=t._nodes;return e.size===n.size&&Array.from(e).every(t=>n.has(t))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new jT(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const e=this.getNodes(),n=e.length,i=e[n-1];let r;if(IT(i))r=i.select();else{const t=i.getIndexWithinParent()+1;r=i.getParentOrThrow().select(t,t)}r.insertNodes(t);for(let s=0;s<n;s++)e[s].remove()}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=this._nodes,n=[];for(const i of e){const t=OC(i);null!==t&&n.push(t)}return MM()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let e="";for(let n=0;n<t.length;n++)e+=t[n].getTextContent();return e}deleteNodes(){const t=this.getNodes();if((cM()||uM())===this&&t[0]){const e=tR(t[0],"next");!function(t){const e=cM(),n=XT(e)?e:oM();vR(n,t),VC(n)}(cR(e,e))}for(const e of t)e.remove()}}function XT(t){return t instanceof qT}class qT{constructor(t,e,n,i){kt(this,"format"),kt(this,"style"),kt(this,"anchor"),kt(this,"focus"),kt(this,"_cachedNodes"),kt(this,"dirty"),this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=n,this.style=i,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!XT(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(null!==t)return t;const e=function(t){const e=[],[n,i]=t.getTextSlices();n&&e.push(n.caret.origin);const r=new Set,s=new Set;for(const o of t)if(YA(o)){const{origin:t}=o;0===e.length?r.add(t):(s.add(t),e.push(t))}else{const{origin:t}=o;XM(t)&&s.has(t)||e.push(t)}if(i&&e.push(i.caret.origin),$A(t.focus)&&XM(t.focus.origin)&&null===t.focus.getNodeAtCaret())for(let o=rR(t.focus.origin,"previous");YA(o)&&r.has(o.origin)&&!o.origin.isEmpty()&&o.origin.is(e[e.length-1]);o=sR(o))r.delete(o.origin),e.pop();for(;e.length>1;){const t=e[e.length-1];if(!XM(t)||s.has(t)||t.isEmpty()||r.has(t))break;e.pop()}if(0===e.length&&t.isCollapsed()){const n=wR(t.anchor),i=wR(t.anchor.getFlipped()),r=t=>KA(t)?t.origin:t.getNodeAtCaret(),s=r(n)||r(i)||(t.anchor.getNodeAtCaret()?n.origin:i.origin);e.push(s)}return e}(MR(yR(this),"next"));return MM()||(this._cachedNodes=e),e}setTextNodeRange(t,e,n,i){this.anchor.set(t.__key,e,"text"),this.focus.set(n.__key,i,"text")}getTextContent(){const t=this.getNodes();if(0===t.length)return"";const e=t[0],n=t[t.length-1],i=this.anchor,r=this.focus,s=i.isBefore(r),[o,a]=YT(this);let l="",c=!0;for(let u=0;u<t.length;u++){const h=t[u];if(XM(h)&&!h.isInline())c||(l+="\n"),c=!h.isEmpty();else if(c=!1,IT(h)){let t=h.getTextContent();h===e?h===n?"element"===i.type&&"element"===r.type&&r.offset!==i.offset||(t=o<a?t.slice(o,a):t.slice(a,o)):t=s?t.slice(o):t.slice(a):h===n&&(t=s?t.slice(0,a):t.slice(0,o)),l+=t}else!$M(h)&&!vT(h)||h===n&&this.isCollapsed()||(l+=h.getTextContent())}return l}applyDOMRange(t){const e=PM(),n=e.getEditorState()._selection,i=iM(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,n);if(null===i)return;const[r,s]=i;this.anchor.set(r.key,r.offset,r.type,!0),this.focus.set(s.key,s.offset,s.type,!0),sw(this)}clone(){const t=this.anchor,e=this.focus;return new qT(VT(t.key,t.offset,t.type),VT(e.key,e.offset,e.type),this.format,this.style)}toggleFormat(t){this.format=AC(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const e=NS[t];return 0!==(this.format&e)}insertRawText(t){const e=t.split(/(\r?\n|\t)/),n=[],i=e.length;for(let r=0;r<i;r++){const t=e[r];"\n"===t||"\r\n"===t?n.push(_T()):"\t"===t?n.push(zT()):n.push(kT(t))}this.insertNodes(n)}insertText(t){const e=this.anchor,n=this.focus,i=this.format,r=this.style;let s=e,o=n;!this.isCollapsed()&&n.isBefore(e)&&(s=n,o=e),"element"===s.type&&function(t,e,n,i){const r=t.getNode(),s=r.getChildAtIndex(t.offset),o=kT();if(o.setFormat(n),o.setStyle(i),oC(s))s.splice(0,0,[o]);else{const t=JM(r)?sC().append(o):o;null===s?r.append(t):s.insertBefore(t)}t.is(e)&&e.set(o.__key,0,"text"),t.set(o.__key,0,"text")}(s,o,i,r),"element"===o.type&&_R(o,wR(mR(o,"next")));const a=s.offset;let l=o.offset;const c=this.getNodes(),u=c.length;let h=c[0];IT(h)||sS(26);const d=h.getTextContent().length,f=h.getParentOrThrow();let p=c[u-1];if(1===u&&"element"===o.type&&(l=d,o.set(s.key,l,"text")),this.isCollapsed()&&a===d&&(EC(h)||!h.canInsertTextAfter()||!f.canInsertTextAfter()&&null===h.getNextSibling())){let e=h.getNextSibling();if(IT(e)&&e.canInsertTextBefore()&&!EC(e)||(e=kT(),e.setFormat(i),e.setStyle(r),f.canInsertTextAfter()?h.insertAfter(e):f.insertAfter(e)),e.select(0,0),h=e,""!==t)return void this.insertText(t)}else if(this.isCollapsed()&&0===a&&(EC(h)||!h.canInsertTextBefore()||!f.canInsertTextBefore()&&null===h.getPreviousSibling())){let e=h.getPreviousSibling();if(IT(e)&&!EC(e)||(e=kT(),e.setFormat(i),f.canInsertTextBefore()?h.insertBefore(e):f.insertBefore(e)),e.select(),h=e,""!==t)return void this.insertText(t)}else if(h.isSegmented()&&a!==d){const t=kT(h.getTextContent());t.setFormat(i),h.replace(t),h=t}else if(!this.isCollapsed()&&""!==t){const e=p.getParent();if(!f.canInsertTextBefore()||!f.canInsertTextAfter()||XM(e)&&(!e.canInsertTextBefore()||!e.canInsertTextAfter()))return this.insertText(""),nM(this.anchor,this.focus,null),void this.insertText(t)}if(1===u){if(wC(h)){const e=kT(t);return e.select(),void h.replace(e)}const e=h.getFormat(),n=h.getStyle();if(a!==l||e===i&&n===r){if(BT(h)){const e=kT(t);return e.setFormat(i),e.setStyle(r),e.select(),void h.replace(e)}}else{if(""!==h.getTextContent()){const e=kT(t);if(e.setFormat(i),e.setStyle(r),e.select(),0===a)h.insertBefore(e,!1);else{const[t]=h.splitText(a);t.insertAfter(e,!1)}return void(e.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length))}h.setFormat(i),h.setStyle(r)}const s=l-a;h=h.spliceText(a,s,t,!0),""===h.getTextContent()?h.remove():"text"===this.anchor.type&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=e,this.style=n))}else{const e=new Set([...h.getParentKeys(),...p.getParentKeys()]),n=XM(h)?h:h.getParentOrThrow();let i=XM(p)?p:p.getParentOrThrow(),r=p;if(!n.is(i)&&i.isInline())do{r=i,i=i.getParentOrThrow()}while(i.isInline());if("text"===o.type&&(0!==l||""===p.getTextContent())||"element"===o.type&&p.getIndexWithinParent()<l)if(IT(p)&&!wC(p)&&l!==p.getTextContentSize()){if(p.isSegmented()){const t=kT(p.getTextContent());p.replace(t),p=t}JM(o.getNode())||"text"!==o.type||(p=p.spliceText(0,l,"")),e.add(p.__key)}else{const t=p.getParentOrThrow();t.canBeEmpty()||1!==t.getChildrenSize()?p.remove():t.remove()}else e.add(p.__key);const s=i.getChildren(),f=new Set(c),g=n.is(i),m=n.isInline()&&null===h.getNextSibling()?n:h;for(let t=s.length-1;t>=0;t--){const e=s[t];if(e.is(h)||XM(e)&&e.isParentOf(h))break;e.isAttached()&&(!f.has(e)||e.is(r)?g||m.insertAfter(e,!1):e.remove())}if(!g){let t=i,n=null;for(;null!==t;){const i=t.getChildren(),r=i.length;(0===r||i[r-1].is(n))&&(e.delete(t.__key),n=t),t=t.getParent()}}if(wC(h))if(a===d)h.select();else{const e=kT(t);e.select(),h.replace(e)}else h=h.spliceText(a,d-a,t,!0),""===h.getTextContent()?h.remove():h.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=t.length);for(let t=1;t<u;t++){const n=c[t],i=n.__key;e.has(i)||n.remove()}}}removeText(){const t=cM()===this;vR(this,function(t,e="removeEmptySlices"){if(t.isCollapsed())return t;const n="root",i="next";let r=e;const s=MR(t,i),o=bR(s.anchor,n),a=bR(s.focus.getFlipped(),n),l=new Set,c=[];for(const p of s.iterNodeCarets(n))if(YA(p))l.add(p.origin.getKey());else if($A(p)){const{origin:t}=p;XM(t)&&!l.has(t.getKey())||c.push(t)}for(const p of c)p.remove();for(const p of s.getTextSlices()){if(!p)continue;const{origin:t}=p.caret,e=t.getTextContentSize(),n=xR(tR(t,i)),s=t.getMode();if(Math.abs(p.distance)===e&&"removeEmptySlices"===r||"token"===s&&0!==p.distance)n.remove();else if(0!==p.distance){r="removeEmptySlices";let t=p.removeTextSlice();const e=p.caret.origin;if("segmented"===s){const e=t.origin,r=kT(e.getTextContent()).setStyle(e.getStyle()).setFormat(e.getFormat());n.replaceOrInsert(r),t=eR(r,i,t.offset)}e.is(o[0].origin)&&(o[0]=t),e.is(a[0].origin)&&(a[0]=t.getFlipped())}}let u,h;for(const p of o)if(SR(p)){u=wR(p);break}for(const p of a)if(SR(p)){h=wR(p);break}const d=function(t,e,n){if(!t||!e)return null;const i=t.getParentAtCaret(),r=e.getParentAtCaret();if(!i||!r)return null;const s=i.getParents().reverse();s.push(i);const o=r.getParents().reverse();o.push(r);const a=Math.min(s.length,o.length);let l;for(l=0;l<a&&s[l]===o[l];l++);const c=(t,e)=>{let n;for(let i=l;i<t.length;i++){const r=t[i];if(_A(r))return;!n&&e(r)&&(n=r)}return n},u=c(s,RA),h=u&&c(o,t=>n.has(t.getKey())&&RA(t));return u&&h?[u,h]:null}(u,h,l);if(d){const[t,e]=d;rR(t,"previous").splice(0,e.getChildren()),e.remove()}const f=[u,h,...o,...a].find(SR);if(f)return function(t){return cR(t,t)}(TR(wR(f),t.direction));sS(269,JSON.stringify(o.map(t=>t.origin.__key)))}(yR(this))),t&&cM()!==this&&VC(this)}formatText(t,e=null){if(this.isCollapsed())return this.toggleFormat(t),void DC(null);const n=this.getNodes(),i=[];for(const y of n)IT(y)&&i.push(y);const r=e=>{n.forEach(n=>{if(XM(n)){const i=n.getFormatFlags(t,e);n.setTextFormat(i)}})},s=i.length;if(0===s)return this.toggleFormat(t),DC(null),void r(e);const o=this.anchor,a=this.focus,l=this.isBackward(),c=l?a:o,u=l?o:a;let h=0,d=i[0],f="element"===c.type?0:c.offset;if("text"===c.type&&f===d.getTextContentSize()&&(h=1,d=i[1],f=0),null==d)return;const p=d.getFormatFlags(t,e);r(p);const g=s-1;let m=i[g];const _="text"===u.type?u.offset:m.getTextContentSize();if(d.is(m)){if(f===_)return;if(EC(d)||0===f&&_===d.getTextContentSize())d.setFormat(p);else{const t=d.splitText(f,_),e=0===f?t[0]:t[1];e.setFormat(p),"text"===c.type&&c.set(e.__key,0,"text"),"text"===u.type&&u.set(e.__key,_-f,"text")}return void(this.format=p)}0===f||EC(d)||([,d]=d.splitText(f),f=0),d.setFormat(p);const v=m.getFormatFlags(t,p);_>0&&(_===m.getTextContentSize()||EC(m)||([m]=m.splitText(_)),m.setFormat(v));for(let y=h+1;y<g;y++){const e=i[y],n=e.getFormatFlags(t,v);e.setFormat(n)}"text"===c.type&&c.set(d.__key,f,"text"),"text"===u.type&&u.set(m.__key,_,"text"),this.format=p|v}insertNodes(t){if(0===t.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();const e=cM();return XT(e)||sS(134),e.insertNodes(t)}const e=(this.isBackward()?this.focus:this.anchor).getNode(),n=zA(e,RA),i=t[t.length-1];if(XM(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const e=_M(this);n.splice(e,0,t),i.selectEnd()}return}if(!t.some(t=>(XM(t)||$M(t))&&!t.isInline())){XM(n)||sS(211,e.constructor.name,e.getType());const r=_M(this);return n.splice(r,0,t),void i.selectEnd()}const r=function(t){const e=sC();let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=vT(r);if(s||$M(r)&&r.isInline()||XM(r)&&r.isInline()||IT(r)||r.isParentRequired()){if(null===n&&(n=r.createParentElementNode(),e.append(n),s))continue;null!==n&&n.append(r)}else e.append(r),n=null}return e}(t),s=r.getLastDescendant(),o=r.getChildren(),a=XM(n)&&n.isEmpty()?null:this.insertParagraph(),l=o[o.length-1];let c=o[0];var u;XM(u=c)&&RA(u)&&!u.isEmpty()&&XM(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(XM(n)||sS(211,e.constructor.name,e.getType()),n.append(...c.getChildren()),c=o[1]),c&&(null===n&&sS(212,e.constructor.name,e.getType()),function(t,e){const n=e.getParentOrThrow().getLastChild();let i=e;const r=[e];for(;i!==n;)i.getNextSibling()||sS(140),i=i.getNextSibling(),r.push(i);let s=t;for(const o of r)s=s.insertAfter(o)}(n,c));const h=zA(s,RA);a&&XM(h)&&(a.canMergeWhenEmpty()||RA(l))&&(h.append(...a.getChildren()),a.remove()),XM(n)&&n.isEmpty()&&n.remove(),s.selectEnd();const d=XM(n)?n.getLastChild():null;vT(d)&&h!==n&&d.remove()}insertParagraph(){if("root"===this.anchor.key){const t=sC();return BC().splice(this.anchor.offset,0,[t]),t.select(),t}const t=_M(this),e=zA(this.anchor.getNode(),RA);XM(e)||sS(213);const n=e.getChildAtIndex(t),i=n?[n,...n.getNextSiblings()]:[],r=e.insertNewAfter(this,!1);return r?(r.append(...i),r.selectStart(),r):null}insertLineBreak(t){const e=_T();if(this.insertNodes([e]),t){const t=e.getParentOrThrow(),n=e.getIndexWithinParent();t.select(n,n)}}extract(){const t=[...this.getNodes()],e=t.length;let n=t[0],i=t[e-1];const[r,s]=YT(this),o=this.isBackward(),[a,l]=o?[this.focus,this.anchor]:[this.anchor,this.focus],[c,u]=o?[s,r]:[r,s];if(0===e)return[];if(1===e){if(IT(n)&&!this.isCollapsed()){const t=n.splitText(c,u),e=0===c?t[0]:t[1];return e?(a.set(e.getKey(),0,"text"),l.set(e.getKey(),e.getTextContentSize(),"text"),[e]):[]}return[n]}if(IT(n)&&(c===n.getTextContentSize()?t.shift():0!==c&&([,n]=n.splitText(c),t[0]=n,a.set(n.getKey(),0,"text"))),IT(i)){const e=i.getTextContent().length;0===u?t.pop():u!==e&&([i]=i.splitText(u),t[t.length-1]=i,l.set(i.getKey(),i.getTextContentSize(),"text"))}return t}modify(t,e,n){if(yM(this,t,e,n))return;const i="move"===t,r=PM(),s=SA(gA(r));if(!s)return;const o=r._blockCursorElement,a=r._rootElement,l=this.focus.getNode();if(null===a||null===o||!XM(l)||l.isInline()||l.canBeEmpty()||bA(o,r,a),this.dirty){let t=uA(r,this.anchor.key),e=uA(r,this.focus.key);"text"===this.anchor.type&&(t=CC(t)),"text"===this.focus.type&&(e=CC(e)),t&&e&&gM(s,t,this.anchor.offset,e,this.focus.offset)}if(function(t,e,n,i){t.modify(e,n,i)}(s,t,e?"backward":"forward",n),s.rangeCount>0){const t=s.getRangeAt(0),n=this.anchor.getNode(),r=JM(n)?n:function(t){let e=t.getParentOrThrow();for(;null!==e;){if(_A(e))return e;e=e.getParentOrThrow()}return e}(n);if(this.applyDOMRange(t),this.dirty=!0,!i){const n=this.getNodes(),i=[];let o=!1;for(let t=0;t<n.length;t++){const e=n[t];fA(e,r)?i.push(e):o=!0}if(o&&i.length>0)if(e){const t=i[0];XM(t)?t.selectStart():t.getParentOrThrow().selectStart()}else{const t=i[i.length-1];XM(t)?t.selectEnd():t.getParentOrThrow().selectEnd()}s.anchorNode===t.startContainer&&s.anchorOffset===t.startOffset||function(t){const e=t.focus,n=t.anchor,i=n.key,r=n.offset,s=n.type;n.set(e.key,e.offset,e.type,!0),e.set(i,r,s,!0)}(this)}}"lineboundary"===n&&yM(this,t,e,n,"decorators")}forwardDeletion(t,e,n){if(!n&&("element"===t.type&&XM(e)&&t.offset===e.getChildrenSize()||"text"===t.type&&t.offset===e.getTextContentSize())){const t=e.getParent(),n=e.getNextSibling()||(null===t?null:t.getNextSibling());if(XM(n)&&n.isShadowRoot())return!0}return!1}deleteCharacter(t){const e=this.isCollapsed();if(this.isCollapsed()){const e=this.anchor;let n=e.getNode();if(this.forwardDeletion(e,n,t))return;const i=lR(mR(e,t?"previous":"next"));if(i.getTextSlices().every(t=>null===t||0===t.distance)){let t={type:"initial"};for(const e of i.iterNodeCarets("shadowRoot"))if(YA(e))if(e.origin.isInline());else{if(e.origin.isShadowRoot()){if("merge-block"===t.type)break;if(XM(i.anchor.origin)&&i.anchor.origin.isEmpty()){const t=wR(e);vR(this,cR(t,t)),i.anchor.origin.remove()}return}"merge-next-block"!==t.type&&"merge-block"!==t.type||(t={block:t.block,caret:e,type:"merge-block"})}else{if("merge-block"===t.type)break;if($A(e)){if(XM(e.origin)){if(e.origin.isInline()){if(!e.origin.isParentOf(i.anchor.origin))break}else t={block:e.origin,type:"merge-next-block"};continue}if($M(e.origin)){if(e.origin.isIsolated());else if("merge-next-block"===t.type&&(e.origin.isKeyboardSelectable()||!e.origin.isInline())&&XM(i.anchor.origin)&&i.anchor.origin.isEmpty()){i.anchor.origin.remove();const t=aM();t.add(e.origin.getKey()),VC(t)}else e.origin.remove();return}break}}if("merge-block"===t.type){const{caret:e,block:n}=t;return vR(this,cR(!e.origin.isEmpty()&&n.isEmpty()?xR(tR(n,e.direction)):i.anchor,e)),this.removeText()}}const r=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&0===e.offset&&JT(this,e.getNode()))return}else{const i="text"===r.type?r.getNode():null;if(n="text"===e.type?e.getNode():null,null!==i&&i.isSegmented()){const e=r.offset,s=i.getTextContentSize();if(i.is(n)||t&&e!==s||!t&&0!==e)return void QT(i,t,e)}else if(null!==n&&n.isSegmented()){const r=e.offset,s=n.getTextContentSize();if(n.is(i)||t&&0!==r||!t&&r!==s)return void QT(n,t,r)}!function(t,e){const n=t.anchor,i=t.focus,r=n.getNode();if(r===i.getNode()&&"text"===n.type&&"text"===i.type){const t=n.offset,o=i.offset,a=t<o,l=a?t:o,c=a?o:t,u=c-1;l!==u&&!GC(s=r.getTextContent().slice(l,c))&&!ZT(s)&&(e?i.set(i.key,u,i.type):n.set(n.key,u,n.type))}var s}(this,t)}}if(this.removeText(),t&&!e&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){const t=this.anchor.getNode();t.isEmpty()&&JM(t.getParent())&&null===t.getPreviousSibling()&&JT(this,t)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const e=this.anchor,n=e.getNode();if(this.forwardDeletion(e,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function KT(t){return t instanceof jT}function $T(t){const e=t.offset;if("text"===t.type)return e;const n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0}function YT(t){const e=t.getStartEndPoints();if(null===e)return[0,0];const[n,i]=e;return"element"===n.type&&"element"===i.type&&n.key===i.key&&n.offset===i.offset?[0,0]:[$T(n),$T(i)]}function JT(t,e){for(let n=e;n;n=n.getParent()){if(XM(n)){if(n.collapseAtStart(t))return!0;if(_A(n))break}if(n.getPreviousSibling())break}return!1}const ZT=(()=>{try{const t=new RegExp("\\p{Emoji}","u"),e=t.test.bind(t);if(e("❤️")&&e("#️⃣")&&e("👍"))return e}catch(t){}return()=>!1})();function QT(t,e,n){const i=t,r=i.getTextContent().split(/(?=\s)/g),s=r.length;let o=0,a=0;for(let c=0;c<s;c++){const t=c===s-1;if(a=o,o+=r[c].length,e&&o===n||o>n||t){r.splice(c,1),t&&(a=void 0);break}}const l=r.join("").trim();""===l?i.remove():(i.setTextContent(l),i.select(a,a))}function tM(t,e,n,i){let r,s=e;if(EA(t)){let o=!1;const a=t.childNodes,l=a.length,c=i._blockCursorElement;s===l&&(o=!0,s=l-1);let u=a[s],h=!1;if(u===c)u=a[s+1],h=!0;else if(null!==c){const n=c.parentNode;t===n&&e>Array.prototype.indexOf.call(n.children,c)&&s--}if(r=WC(u),IT(r))s=nR(r,o?"next":"previous");else{let a=WC(t);if(null===a)return null;if(XM(a)){const l=i.getElementByKey(a.getKey());null===l&&sS(214);const c=a.getDOMSlot(l);[a,s]=c.resolveChildIndex(a,l,t,e),XM(a)||sS(215),o&&s>=a.getChildrenSize()&&(s=Math.max(0,a.getChildrenSize()-1));let u=a.getChildAtIndex(s);if(XM(u)&&function(t,e,n){const i=t.getParent();return null===n||null===i||!i.canBeEmpty()||i!==n.getNode()}(u,0,n)){const t=o?u.getLastDescendant():u.getFirstDescendant();null===t?a=u:(u=t,a=XM(u)?u:u.getParentOrThrow()),s=0}IT(u)?(r=u,a=null,s=nR(u,o?"next":"previous")):u!==a&&o&&!h&&(XM(a)||sS(216),s=Math.min(a.getChildrenSize(),s+1))}else{const n=a.getIndexWithinParent();s=0===e&&$M(a)&&WC(t)===a?n:n+1,a=a.getParentOrThrow()}if(XM(a))return VT(a.__key,s,"element")}}else r=WC(t);return IT(r)?VT(r.__key,nR(r,s,"clamp"),"text"):null}function eM(t,e,n){const i=t.offset,r=t.getNode();if(0===i){const i=r.getPreviousSibling(),s=r.getParent();if(e){if((n||!e)&&null===i&&XM(s)&&s.isInline()){const e=s.getPreviousSibling();IT(e)&&t.set(e.__key,e.getTextContent().length,"text")}}else XM(i)&&!n&&i.isInline()?t.set(i.__key,i.getChildrenSize(),"element"):IT(i)&&t.set(i.__key,i.getTextContent().length,"text")}else if(i===r.getTextContent().length){const i=r.getNextSibling(),s=r.getParent();if(e&&XM(i)&&i.isInline())t.set(i.__key,0,"element");else if((n||e)&&null===i&&XM(s)&&s.isInline()&&!s.canInsertTextAfter()){const e=s.getNextSibling();IT(e)&&t.set(e.__key,0,"text")}}}function nM(t,e,n){if("text"===t.type&&"text"===e.type){const i=t.isBefore(e),r=t.is(e);eM(t,i,r),eM(e,!i,r),r&&e.set(t.key,t.offset,t.type);const s=PM();if(s.isComposing()&&s._compositionKey!==t.key&&XT(n)){const i=n.anchor,r=n.focus;t.set(i.key,i.offset,i.type,!0),e.set(r.key,r.offset,r.type,!0)}}}function iM(t,e,n,i,r,s){if(null===t||null===n||!yC(r,t,n))return null;const o=tM(t,e,XT(s)?s.anchor:null,r);if(null===o)return null;const a=tM(n,i,XT(s)?s.focus:null,r);if(null===a)return null;if("element"===o.type&&"element"===a.type){const e=WC(t),i=WC(n);if($M(e)&&$M(i))return null}return nM(o,a,s),[o,a]}function rM(t){return XM(t)&&!t.isInline()}function sM(t,e,n,i,r,s){const o=RM(),a=new qT(VT(t,e,r),VT(n,i,s),0,"");return a.dirty=!0,o._selection=a,a}function oM(){const t=VT("root",0,"element"),e=VT("root",0,"element");return new qT(t,e,0,"")}function aM(){return new jT(new Set)}function lM(t,e,n,i){const r=n._window;if(null===r)return null;const s=i||r.event,o=s?s.type:void 0,a="selectionchange"===o,l=!zS&&(a||"beforeinput"===o||"compositionstart"===o||"compositionend"===o||"click"===o&&s&&3===s.detail||"drop"===o||void 0===o);let c,u,h,d;if(XT(t)&&!l)return t.clone();if(null===e)return null;if(c=e.anchorNode,u=e.focusNode,h=e.anchorOffset,d=e.focusOffset,a&&XT(t)&&!yC(n,c,u))return t.clone();const f=iM(c,h,u,d,n,t);if(null===f)return null;const[p,g]=f;return new qT(p,g,XT(t)?t.format:0,XT(t)?t.style:"")}function cM(){return RM()._selection}function uM(){return PM()._editorState._selection}function hM(t,e,n,i=1){const r=t.anchor,s=t.focus,o=r.getNode(),a=s.getNode();if(!e.is(o)&&!e.is(a))return;const l=e.__key;if(t.isCollapsed()){const e=r.offset;if(n<=e&&i>0||n<e&&i<0){const n=Math.max(0,e+i);r.set(l,n,"element"),s.set(l,n,"element"),dM(t)}}else{const o=t.isBackward(),a=o?s:r,c=a.getNode(),u=o?r:s,h=u.getNode();if(e.is(c)){const t=a.offset;(n<=t&&i>0||n<t&&i<0)&&a.set(l,Math.max(0,t+i),"element")}if(e.is(h)){const t=u.offset;(n<=t&&i>0||n<t&&i<0)&&u.set(l,Math.max(0,t+i),"element")}}dM(t)}function dM(t){const e=t.anchor,n=e.offset,i=t.focus,r=i.offset,s=e.getNode(),o=i.getNode();if(t.isCollapsed()){if(!XM(s))return;const t=s.getChildrenSize(),r=n>=t,o=r?s.getChildAtIndex(t-1):s.getChildAtIndex(n);if(IT(o)){let t=0;r&&(t=o.getTextContentSize()),e.set(o.__key,t,"text"),i.set(o.__key,t,"text")}return}if(XM(s)){const t=s.getChildrenSize(),i=n>=t,r=i?s.getChildAtIndex(t-1):s.getChildAtIndex(n);if(IT(r)){let t=0;i&&(t=r.getTextContentSize()),e.set(r.__key,t,"text")}}if(XM(o)){const t=o.getChildrenSize(),e=r>=t,n=e?o.getChildAtIndex(t-1):o.getChildAtIndex(r);if(IT(n)){let t=0;e&&(t=n.getTextContentSize()),i.set(n.__key,t,"text")}}}function fM(t,e,n,i,r){let s=null,o=0,a=null;null!==i?(s=i.__key,IT(i)?(o=i.getTextContentSize(),a="text"):XM(i)&&(o=i.getChildrenSize(),a="element")):null!==r&&(s=r.__key,IT(r)?a="text":XM(r)&&(a="element")),null!==s&&null!==a?t.set(s,o,a):(o=e.getIndexWithinParent(),-1===o&&(o=n.getChildrenSize()),t.set(n.__key,o,"element"))}function pM(t,e,n,i,r){"text"===t.type?t.set(n,t.offset+(e?0:r),"text"):t.offset>i.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element")}function gM(t,e,n,i,r){try{t.setBaseAndExtent(e,n,i,r)}catch(s){}}function mM(t){let e=cM()||uM();null===e&&(e=BC().selectEnd()),e.insertNodes(t)}function _M(t){let e=t;t.isCollapsed()||e.removeText();const n=cM();XT(n)&&(e=n),XT(e)||sS(161);const i=e.anchor;let r=i.getNode(),s=i.offset;for(;!RA(r);){const t=r;if([r,s]=vM(r,s),t.is(r))break}return s}function vM(t,e){const n=t.getParent();if(!n){const t=sC();return BC().append(t),t.select(),[BC(),0]}if(IT(t)){const i=t.splitText(e);if(0===i.length)return[n,t.getIndexWithinParent()];const r=0===e?0:1;return[n,i[0].getIndexWithinParent()+r]}if(!XM(t)||0===e)return[n,t.getIndexWithinParent()];const i=t.getChildAtIndex(e);if(i){const n=new qT(VT(t.__key,e,"element"),VT(t.__key,e,"element"),0,""),r=t.insertNewAfter(n);r&&r.append(i,...i.getNextSiblings())}return[n,t.getIndexWithinParent()+1]}function yM(t,e,n,i,r="decorators-and-blocks"){if("move"===e&&"character"===i&&!t.isCollapsed()){const[e,i]=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus];return i.set(e.key,e.offset,e.type),!0}const s=mR(t.focus,n?"previous":"next"),o="lineboundary"===i,a="move"===e;let l=s,c="decorators-and-blocks"===r;if(!ER(l)){for(const t of l){c=!1;const{origin:e}=t;if(!$M(e)||e.isIsolated()||(l=t,!o||!e.isInline()))break}if(c)for(const t of lR(s).iterNodeCarets("extend"===e?"shadowRoot":"root")){if(YA(t))t.origin.isInline()||(l=t);else{if(XM(t.origin))continue;$M(t.origin)&&!t.origin.isInline()&&(l=t)}break}}if(l===s)return!1;if(a&&!o&&$M(l.origin)&&l.origin.isKeyboardSelectable()){const t=aM();return t.add(l.origin.getKey()),VC(t),!0}return l=wR(l),a&&_R(t.anchor,l),_R(t.focus,l),c||!o}let xM=null,bM=null,SM=!1,wM=!1,EM=0;const TM={characterData:!0,childList:!0,subtree:!0};function MM(){return SM||null!==xM&&xM._readOnly}function CM(){SM&&sS(13)}function AM(){EM>99&&sS(14)}function RM(){return null===xM&&sS(195,NM()),xM}function PM(){return null===bM&&sS(196,NM()),bM}function NM(){let t=0;const e=new Set,n=uC.version;if("undefined"!=typeof window)for(const r of document.querySelectorAll("[contenteditable]")){const i=SC(r);if(xC(i))t++;else if(i){let t=String(i.constructor.version||"<0.17.1");t===n&&(t+=" (separately built, likely a bundler configuration issue)"),e.add(t)}}let i=` Detected on the page: ${t} compatible editor(s) with version ${n}`;return e.size&&(i+=` and incompatible editors with versions ${Array.from(e).join(", ")}`),i}function DM(t,e,n){const i=e.__type,r=pC(t,i);let s=n.get(i);void 0===s&&(s=Array.from(r.transforms),n.set(i,s));const o=s.length;for(let a=0;a<o&&(s[a](e),e.isAttached());a++);}function LM(t,e){return void 0!==t&&t.__key!==e&&t.isAttached()}function OM(t,e){if(!e)return;const n=t._updateTags;let i=e;Array.isArray(e)||(i=[e]);for(const r of i)n.add(r)}function kM(t){return IM(t,PM()._nodes)}function IM(t,e){const n=t.type,i=e.get(n);void 0===i&&sS(17,n);const r=i.klass;t.type!==r.getType()&&sS(18,r.name);const s=r.importJSON(t),o=t.children;if(XM(s)&&Array.isArray(o))for(let a=0;a<o.length;a++){const t=IM(o[a],e);s.append(t)}return s}function FM(t,e,n){const i=xM,r=SM,s=bM;xM=e,SM=!0,bM=t;try{return n()}finally{xM=i,SM=r,bM=s}}function UM(t,e){const n=t._pendingEditorState,i=t._rootElement,r=t._headless||null===i;if(null===n)return;const s=t._editorState,o=s._selection,a=n._selection,l=0!==t._dirtyType,c=xM,u=SM,h=bM,d=t._updating,f=t._observer;let p=null;if(t._pendingEditorState=null,t._editorState=n,!r&&l&&null!==f){bM=t,xM=n,SM=!1,t._updating=!0;try{const e=t._dirtyType,i=t._dirtyElements,r=t._dirtyLeaves;f.disconnect(),p=function(t,e,n,i,r,s){_w="",xw="",bw=2===i,lw=n,aw=n._config,cw=n._nodes,uw=lw._listeners.mutation,hw=r,dw=s,fw=t._nodeMap,pw=e._nodeMap,Sw=e._readOnly,gw=new Map(n._keyToDOMMap);const o=new Map;return mw=o,kw("root",null),lw=void 0,cw=void 0,hw=void 0,dw=void 0,fw=void 0,pw=void 0,aw=void 0,gw=void 0,mw=void 0,o}(s,n,t,e,i,r)}catch(S){if(S instanceof Error&&t._onError(S),wM)throw S;return lC(t,null,i,n),KS(t),t._dirtyType=2,wM=!0,UM(t,s),void(wM=!1)}finally{f.observe(i,TM),t._updating=d,xM=c,SM=u,bM=h}}n._readOnly||(n._readOnly=!0);const g=t._dirtyLeaves,m=t._dirtyElements,_=t._normalizedNodes,v=t._updateTags,y=t._deferred;l&&(t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),function(t,e){const n=t._decorators;let i=t._pendingDecorators||n;const r=e._nodeMap;let s;for(s in i)r.has(s)||(i===n&&(i=UC(t)),delete i[s])}(t,n);const x=r?null:SA(gA(t));if(t._editable&&null!==x&&(l||null===a||a.dirty)&&null!==i&&!v.has(fT)){bM=t,xM=n;try{if(null!==f&&f.disconnect(),l||null===a||a.dirty){const e=t._blockCursorElement;null!==e&&bA(e,t,i),function(t,e,n,i,r,s){const o=i.anchorNode,a=i.focusNode,l=i.anchorOffset,c=i.focusOffset,u=document.activeElement;if(r.has(hT)&&u!==s||null!==u&&vC(u))return;if(!XT(e))return void(null!==t&&yC(n,o,a)&&i.removeAllRanges());const h=e.anchor,d=e.focus,f=h.key,p=d.key,g=uA(n,f),m=uA(n,p),_=h.offset,v=d.offset,y=e.format,x=e.style,b=e.isCollapsed();let S=g,w=m,E=!1;if("text"===h.type){S=CC(g);const t=h.getNode();E=t.getFormat()!==y||t.getStyle()!==x}else XT(t)&&"text"===t.anchor.type&&(E=!0);var T,M,C,A,R;if("text"===d.type&&(w=CC(m)),null!==S&&null!==w&&(b&&(null===t||E||XT(t)&&(t.format!==y||t.style!==x))&&(T=y,M=x,C=_,A=f,R=performance.now(),XE=[T,M,C,A,R]),l!==_||c!==v||o!==S||a!==w||"Range"===i.type&&b||(null!==u&&s.contains(u)||r.has(pT)||s.focus({preventScroll:!0}),"element"===h.type))){if(gM(i,S,_,w,v),!r.has(dT)&&e.isCollapsed()&&null!==s&&s===document.activeElement){const t=XT(e)&&"element"===e.anchor.type?S.childNodes[_]||null:i.rangeCount>0?i.getRangeAt(0):null;if(null!==t){let e;if(t instanceof Text){const n=document.createRange();n.selectNode(t),e=n.getBoundingClientRect()}else e=t.getBoundingClientRect();!function(t,e,n){const i=dA(n),r=pA(i);if(null===i||null===r)return;let{top:s,bottom:o}=e,a=0,l=0,c=n;for(;null!==c;){const e=c===i.body;if(e)a=0,l=gA(t).innerHeight;else{const t=c.getBoundingClientRect();a=t.top,l=t.bottom}let n=0;if(s<a?n=-(a-s):o>l&&(n=o-l),0!==n)if(e)r.scrollBy(0,n);else{const t=c.scrollTop;c.scrollTop+=n;const e=c.scrollTop-t;s-=e,o-=e}if(e)break;c=hA(c)}}(n,e,s)}}zE=!0}}(o,a,t,x,v,i)}!function(t,e,n){let i=t._blockCursorElement;if(XT(n)&&n.isCollapsed()&&"element"===n.anchor.type&&e.contains(document.activeElement)){const r=n.anchor,s=r.getNode(),o=r.offset;let a=!1,l=null;if(o===s.getChildrenSize())xA(s.getChildAtIndex(o-1))&&(a=!0);else{const e=s.getChildAtIndex(o);if(null!==e&&xA(e)){const n=e.getPreviousSibling();(null===n||xA(n))&&(a=!0,l=t.getElementByKey(e.__key))}}if(a){const n=t.getElementByKey(s.__key);return null===i&&(t._blockCursorElement=i=function(t){const e=t.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");let i=e.blockCursor;if(void 0!==i){if("string"==typeof i){const t=vS(i);i=e.blockCursor=t}void 0!==i&&n.classList.add(...i)}return n}(t._config)),e.style.caretColor="transparent",void(null===l?n.appendChild(i):n.insertBefore(i,l))}}null!==i&&bA(i,t,e)}(t,i,a)}finally{null!==f&&f.observe(i,TM),bM=h,xM=c}}null!==p&&function(t,e,n,i,r){const s=Array.from(t._listeners.mutation),o=s.length;for(let a=0;a<o;a++){const[t,o]=s[a];for(const s of o){const o=e.get(s);void 0!==o&&t(o,{dirtyLeaves:i,prevEditorState:r,updateTags:n})}}}(t,p,v,g,s),XT(a)||null===a||null!==o&&o.is(a)||t.dispatchCommand(Bw,void 0);const b=t._pendingDecorators;null!==b&&(t._decorators=b,t._pendingDecorators=null,zM("decorator",t,!0,b)),function(t,e,n){const i=zC(e),r=zC(n);i!==r&&zM("textcontent",t,!0,r)}(t,e||s,n),zM("update",t,!0,{dirtyElements:m,dirtyLeaves:g,editorState:n,mutatedNodes:p,normalizedNodes:_,prevEditorState:e||s,tags:v}),function(t,e){if(t._deferred=[],0!==e.length){const n=t._updating;t._updating=!0;try{for(let t=0;t<e.length;t++)e[t]()}finally{t._updating=n}}}(t,y),function(t){const e=t._updates;if(0!==e.length){const n=e.shift();if(n){const[e,i]=n;HM(t,e,i)}}}(t)}function zM(t,e,n,...i){const r=e._updating;e._updating=n;try{const n=Array.from(e._listeners[t]);for(let t=0;t<n.length;t++)n[t].apply(null,i)}finally{e._updating=r}}function BM(t,e){const n=t._updates;let i=e||!1;for(;0!==n.length;){const e=n.shift();if(e){const[n,r]=e,s=t._pendingEditorState;let o;void 0!==r&&(o=r.onUpdate,r.skipTransforms&&(i=!0),r.discrete&&(null===s&&sS(191),s._flushSync=!0),o&&t._deferred.push(o),OM(t,r.tag)),null==s?HM(t,n,r):n()}}return i}function HM(t,e,n){const i=t._updateTags;let r,s=!1,o=!1;void 0!==n&&(r=n.onUpdate,OM(t,n.tag),s=n.skipTransforms||!1,o=n.discrete||!1),r&&t._deferred.push(r);const a=t._editorState;let l=t._pendingEditorState,c=!1;(null===l||l._readOnly)&&(l=t._pendingEditorState=ZM(l||a),c=!0),l._flushSync=o;const u=xM,h=SM,d=bM,f=t._updating;xM=l,SM=!1,t._updating=!0,bM=t;const p=t._headless||null===t.getRootElement();dC(null);try{c&&(p?null!==a._selection&&(l._selection=a._selection.clone()):l._selection=function(t,e){const n=t.getEditorState()._selection,i=SA(gA(t));return XT(n)||null==n?lM(n,i,t,e):n.clone()}(t,n&&n.event||null));const i=t._compositionKey;e(),s=BM(t,s),function(t,e){const n=e.getEditorState()._selection,i=t._selection;if(XT(i)){const t=i.anchor,e=i.focus;let r;if("text"===t.type&&(r=t.getNode(),r.selectionTransform(n,i)),"text"===e.type){const t=e.getNode();r!==t&&t.selectionTransform(n,i)}}}(l,t),0!==t._dirtyType&&(s?function(t,e){const n=e._dirtyLeaves,i=t._nodeMap;for(const r of n){const t=i.get(r);IT(t)&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&rw(t)}}(l,t):function(t,e){const n=e._dirtyLeaves,i=e._dirtyElements,r=t._nodeMap,s=LC(),o=new Map;let a=n,l=a.size,c=i,u=c.size;for(;l>0||u>0;){if(l>0){e._dirtyLeaves=new Set;for(const t of a){const i=r.get(t);IT(i)&&i.isAttached()&&i.isSimpleText()&&!i.isUnmergeable()&&rw(i),void 0!==i&&LM(i,s)&&DM(e,i,o),n.add(t)}if(a=e._dirtyLeaves,l=a.size,l>0){EM++;continue}}e._dirtyLeaves=new Set,e._dirtyElements=new Map,c.delete("root")&&c.set("root",!0);for(const t of c){const n=t[0],a=t[1];if(i.set(n,a),!a)continue;const l=r.get(n);void 0!==l&&LM(l,s)&&DM(e,l,o)}a=e._dirtyLeaves,l=a.size,c=e._dirtyElements,u=c.size,EM++}e._dirtyLeaves=n,e._dirtyElements=i}(l,t),BM(t),function(t,e,n,i){const r=t._nodeMap,s=e._nodeMap,o=[];for(const[a]of i){const t=s.get(a);void 0!==t&&(t.isAttached()||(XM(t)&&US(t,a,r,s,o,i),r.has(a)||i.delete(a),o.push(a)))}for(const a of o)s.delete(a);for(const a of n){const t=s.get(a);void 0===t||t.isAttached()||(r.has(a)||n.delete(a),s.delete(a))}}(a,l,t._dirtyLeaves,t._dirtyElements)),i!==t._compositionKey&&(l._flushSync=!0);const r=l._selection;if(XT(r)){const t=l._nodeMap,e=r.anchor.key,n=r.focus.key;void 0!==t.get(e)&&void 0!==t.get(n)||sS(19)}else KT(r)&&0===r._nodes.size&&(l._selection=null)}catch(m){return m instanceof Error&&t._onError(m),t._pendingEditorState=a,t._dirtyType=2,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),void UM(t)}finally{xM=u,SM=h,bM=d,t._updating=f,EM=0}const g=0!==t._dirtyType||t._deferred.length>0||function(t,e){const n=e.getEditorState()._selection,i=t._selection;if(null!==i){if(i.dirty||!i.is(n))return!0}else if(null!==n)return!0;return!1}(l,t);g?l._flushSync?(l._flushSync=!1,UM(t)):c&&mC(()=>{UM(t)}):(l._flushSync=!1,c&&(i.clear(),t._deferred=[],t._pendingEditorState=null))}function VM(t,e,n){bM===t&&void 0===n?e():HM(t,e,n)}class WM{constructor(t,e,n){kt(this,"element"),kt(this,"before"),kt(this,"after"),this.element=t,this.before=e||null,this.after=n||null}withBefore(t){return new WM(this.element,t,this.after)}withAfter(t){return new WM(this.element,this.before,t)}withElement(t){return this.element===t?this:new WM(t,this.before,this.after)}insertChild(t){const e=this.before||this.getManagedLineBreak();return null!==e&&e.parentElement!==this.element&&sS(222),this.element.insertBefore(t,e),this}removeChild(t){return t.parentElement!==this.element&&sS(223),this.element.removeChild(t),this}replaceChild(t,e){return e.parentElement!==this.element&&sS(224),this.element.replaceChild(t,e),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(null===t)this.removeManagedLineBreak();else{const e="decorator"===t&&(_S||fS||dS);this.insertManagedLineBreak(e)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const e=this.element,n="IMG"===t.nodeName?t.nextSibling:null;n&&e.removeChild(n),e.removeChild(t),e.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const e=this.getManagedLineBreak();if(e){if(t===("IMG"===e.nodeName))return;this.removeManagedLineBreak()}const n=this.element,i=this.before,r=document.createElement("br");if(n.insertBefore(r,i),t){const t=document.createElement("img");t.setAttribute("data-lexical-linebreak","true"),t.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",t.alt="",n.insertBefore(t,r),n.__lexicalLineBreak=t}else n.__lexicalLineBreak=r}getFirstChildOffset(){let t=0;for(let e=this.after;null!==e;e=e.previousSibling)t++;return t}resolveChildIndex(t,e,n,i){if(n===this.element){const e=this.getFirstChildOffset();return[t,Math.min(e+t.getChildrenSize(),Math.max(e,i))]}const r=GM(e,n);r.push(i);const s=GM(e,this.element);let o=t.getIndexWithinParent();for(let a=0;a<s.length;a++){const t=r[a],e=s[a];if(void 0===t||t<e)break;if(t>e){o+=1;break}}return[t.getParentOrThrow(),o]}}function GM(t,e){const n=[];let i=e;for(;i!==t&&null!==i;i=i.parentNode){let t=0;for(let e=i.previousSibling;null!==e;e=e.previousSibling)t++;n.push(t)}return i!==t&&sS(225),n.reverse()}class jM extends lT{constructor(t){super(t),kt(this,"__first"),kt(this,"__last"),kt(this,"__size"),kt(this,"__format"),kt(this,"__style"),kt(this,"__indent"),kt(this,"__dir"),kt(this,"__textFormat"),kt(this,"__textStyle"),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return OS[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e),e=e.getNextSibling();return t}getChildrenKeys(){const t=[];let e=this.getFirstChild();for(;null!==e;)t.push(e.__key),e=e.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){const t=PM()._dirtyElements;return null!==t&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return null!==e&&e.is(t)}getAllTextNodes(){const t=[];let e=this.getFirstChild();for(;null!==e;){if(IT(e)&&t.push(e),XM(e)){const n=e.getAllTextNodes();t.push(...n)}e=e.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;XM(t);){const e=t.getFirstChild();if(null===e)break;t=e}return t}getLastDescendant(){let t=this.getLastChild();for(;XM(t);){const e=t.getLastChild();if(null===e)break;t=e}return t}getDescendantByIndex(t){const e=this.getChildren(),n=e.length;if(t>=n){const t=e[n-1];return XM(t)&&t.getLastDescendant()||t||null}const i=e[t];return XM(i)&&i.getFirstDescendant()||i||null}getFirstChild(){const t=this.getLatest().__first;return null===t?null:OC(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return null===t&&sS(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return null===t?null:OC(t)}getLastChildOrThrow(){const t=this.getLastChild();return null===t&&sS(96,this.__key),t}getChildAtIndex(t){const e=this.getChildrenSize();let n,i;if(t<e/2){for(n=this.getFirstChild(),i=0;null!==n&&i<=t;){if(i===t)return n;n=n.getNextSibling(),i++}return null}for(n=this.getLastChild(),i=e-1;null!==n&&i>=t;){if(i===t)return n;n=n.getPreviousSibling(),i--}return null}getTextContent(){let t="";const e=this.getChildren(),n=e.length;for(let i=0;i<n;i++){const r=e[i];t+=r.getTextContent(),XM(r)&&i!==n-1&&!r.isInline()&&(t+=RS)}return t}getTextContentSize(){let t=0;const e=this.getChildren(),n=e.length;for(let i=0;i<n;i++){const r=e[i];t+=r.getTextContentSize(),XM(r)&&i!==n-1&&!r.isInline()&&(t+=2)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(""!==t){const e=LS[t];return 0!==(this.getFormat()&e)}return!1}hasTextFormat(t){const e=NS[t];return 0!==(this.getTextFormat()&e)}getFormatFlags(t,e){return AC(this.getLatest().__textFormat,t,e)}getTextStyle(){return this.getLatest().__textStyle}select(t,e){CM();const n=cM();let i=t,r=e;const s=this.getChildrenSize();if(!this.canBeEmpty())if(0===t&&0===e){const t=this.getFirstChild();if(IT(t)||XM(t))return t.select(0,0)}else if(!(void 0!==t&&t!==s||void 0!==e&&e!==s)){const t=this.getLastChild();if(IT(t)||XM(t))return t.select()}void 0===i&&(i=s),void 0===r&&(r=s);const o=this.__key;return XT(n)?(n.anchor.set(o,i,"element"),n.focus.set(o,r,"element"),n.dirty=!0,n):sM(o,i,o,r,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(t=>t.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const e=this.getWritable();return e.__dir=t,e}setFormat(t){return this.getWritable().__format=""!==t?LS[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const e=this.getWritable();return e.__textFormat=t,e}setTextStyle(t){const e=this.getWritable();return e.__textStyle=t,e}setIndent(t){return this.getWritable().__indent=t,this}splice(t,e,n){aT(this)&&sS(324,this.__key,this.__type);const i=this.getChildrenSize(),r=this.getWritable();t+e<=i||sS(226,String(t),String(e),String(i));const s=r.__key,o=[],a=[],l=this.getChildAtIndex(t+e);let c=null,u=i-e+n.length;if(0!==t)if(t===i)c=this.getLastChild();else{const e=this.getChildAtIndex(t);null!==e&&(c=e.getPreviousSibling())}if(e>0){let t=null===c?this.getFirstChild():c.getNextSibling();for(let n=0;n<e;n++){null===t&&sS(100);const e=t.getNextSibling(),n=t.__key;PC(t.getWritable()),a.push(n),t=e}}let h=c;for(const d of n){null!==h&&d.is(h)&&(c=h=h.getPreviousSibling());const t=d.getWritable();t.__parent===s&&u--,PC(t);const e=d.__key;if(null===h)r.__first=e,t.__prev=null;else{const n=h.getWritable();n.__next=e,t.__prev=n.__key}d.__key===s&&sS(76),t.__parent=s,o.push(e),h=d}if(t+e===i)null!==h&&(h.getWritable().__next=null,r.__last=h.__key);else if(null!==l){const t=l.getWritable();if(null!==h){const e=h.getWritable();t.__prev=h.__key,e.__next=l.__key}else t.__prev=null}if(r.__size=u,a.length){const t=cM();if(XT(t)){const e=new Set(a),n=new Set(o),{anchor:i,focus:r}=t;qM(i,e,n)&&fM(i,i.getNode(),this,c,l),qM(r,e,n)&&fM(r,r.getNode(),this,c,l),0!==u||this.canBeEmpty()||_A(this)||this.remove()}}return r}getDOMSlot(t){return new WM(t)}exportDOM(t){const{element:e}=super.exportDOM(t);if(EA(e)){const t=this.getIndent();t>0&&(e.style.paddingInlineStart=40*t+"px");const n=this.getDirection();n&&(e.dir=n)}return{element:e}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},e=this.getTextFormat(),n=this.getTextStyle();return 0!==e&&(t.textFormat=e),""!==n&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,e){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,e,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,e){const n=this.getDOMSlot(t);let i=n.getFirstChild();for(let r=this.getFirstChild();r;r=r.getNextSibling()){const t=e.getElementByKey(r.getKey());null!==t&&(null==i?(n.insertChild(t),i=t):i!==t&&n.replaceChild(t,i),i=i.nextSibling)}}}function XM(t){return t instanceof jM}function qM(t,e,n){let i=t.getNode();for(;i;){const t=i.__key;if(e.has(t)&&!n.has(t))return!0;i=i.getParent()}return!1}class KM extends lT{decorate(t,e){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function $M(t){return t instanceof KM}class YM extends jM{constructor(){super("root"),kt(this,"__cachedText"),this.__cachedText=null}static getType(){return"root"}static clone(){return new YM}getTopLevelElementOrThrow(){sS(51)}getTextContent(){const t=this.__cachedText;return!MM()&&0!==PM()._dirtyType||null===t?super.getTextContent():t}remove(){sS(52)}replace(t){sS(53)}insertBefore(t){sS(54)}insertAfter(t){sS(55)}updateDOM(t,e){return!1}splice(t,e,n){for(const i of n)XM(i)||$M(i)||sS(282);return super.splice(t,e,n)}static importJSON(t){return BC().updateFromJSON(t)}collapseAtStart(){return!0}}function JM(t){return t instanceof YM}function ZM(t){return new eC(new Map(t._nodeMap))}function QM(){return new eC(new Map([["root",new YM]]))}function tC(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&sS(130,n.name),XM(t)){const i=e.children;Array.isArray(i)||sS(59,n.name);const r=t.getChildren();for(let t=0;t<r.length;t++){const e=tC(r[t]);i.push(e)}}return e}class eC{constructor(t,e){kt(this,"_nodeMap"),kt(this,"_selection"),kt(this,"_flushSync"),kt(this,"_readOnly"),this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(t,e){return FM(e&&e.editor||null,this,t)}clone(t){const e=new eC(this._nodeMap,void 0===t?this._selection:t);return e._readOnly=!0,e}toJSON(){return FM(null,this,()=>({root:tC(BC())}))}}class nC extends jM{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class iC extends jM{static getType(){return"paragraph"}static clone(t){return new iC(t.__key)}createDOM(t){const e=document.createElement("p"),n=iA(t.theme,"paragraph");return void 0!==n&&e.classList.add(...n),e}updateDOM(t,e,n){return!1}static importDOM(){return{p:t=>({conversion:rC,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if(EA(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();t&&(e.style.textAlign=t)}return{element:e}}static importJSON(t){return sC().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,e){const n=sC();n.setTextFormat(t.format),n.setTextStyle(t.style);const i=this.getDirection();return n.setDirection(i),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,e),n}collapseAtStart(){const t=this.getChildren();if(0===t.length||IT(t[0])&&""===t[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function rC(t){const e=sC();return t.style&&(e.setFormat(t.style.textAlign),kA(t,e)),{node:e}}function sC(){return vA(new iC)}function oC(t){return t instanceof iC}const aC=0;function lC(t,e,n,i){const r=t._keyToDOMMap;r.clear(),t._editorState=QM(),t._pendingEditorState=i,t._compositionKey=null,t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],t._blockCursorElement=null;const s=t._observer;null!==s&&(s.disconnect(),t._observer=null),null!==e&&(e.textContent=""),null!==n&&(n.textContent="",r.set("root",n))}function cC(t){const e=t||{},n=bM,i=e.theme||{},r=void 0===t?n:e.parentEditor||null,s=e.disableEvents||!1,o=QM(),a=e.namespace||(null!==r?r._config.namespace:XC()),l=e.editorState,c=[YM,MT,gT,UT,iC,nC,...e.nodes||[]],{onError:u,html:h}=e,d=void 0===e.editable||e.editable;let f;if(void 0===t&&null!==n)f=n._nodes;else{f=new Map;for(let t=0;t<c.length;t++){let e=c[t],n=null,i=null;if("function"!=typeof e){const t=e;e=t.replace,n=t.with,i=t.withKlass||null}const{ownNodeConfig:r}=UA(e),s=e.getType(),o=e.transform(),a=new Set;r&&r.$transform&&a.add(r.$transform),null!==o&&a.add(o),f.set(s,{exportDOM:h&&h.export?h.export.get(e):void 0,klass:e,replace:n,replaceWithKlass:i,sharedNodeState:$S(c[t]),transforms:a})}}const p=new uC(o,r,f,{disableEvents:s,namespace:a,theme:i},u||console.error,function(t,e){const n=new Map,i=new Set,r=t=>{Object.keys(t).forEach(e=>{let i=n.get(e);void 0===i&&(i=[],n.set(e,i)),i.push(t[e])})};return t.forEach(t=>{const e=t.klass.importDOM;if(null==e||i.has(e))return;i.add(e);const n=e.call(t.klass);null!==n&&r(n)}),e&&r(e),n}(f,h?h.import:void 0),d,t);return void 0!==l&&(p._pendingEditorState=l,p._dirtyType=2),p}class uC{constructor(t,e,n,i,r,s,o,a){kt(this,"_headless"),kt(this,"_parentEditor"),kt(this,"_rootElement"),kt(this,"_editorState"),kt(this,"_pendingEditorState"),kt(this,"_compositionKey"),kt(this,"_deferred"),kt(this,"_keyToDOMMap"),kt(this,"_updates"),kt(this,"_updating"),kt(this,"_listeners"),kt(this,"_commands"),kt(this,"_nodes"),kt(this,"_decorators"),kt(this,"_pendingDecorators"),kt(this,"_config"),kt(this,"_dirtyType"),kt(this,"_cloneNotNeeded"),kt(this,"_dirtyLeaves"),kt(this,"_dirtyElements"),kt(this,"_normalizedNodes"),kt(this,"_updateTags"),kt(this,"_observer"),kt(this,"_key"),kt(this,"_onError"),kt(this,"_htmlConversions"),kt(this,"_window"),kt(this,"_editable"),kt(this,"_blockCursorElement"),kt(this,"_createEditorArgs"),this._createEditorArgs=a,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=XC(),this._onError=r,this._htmlConversions=s,this._editable=o,this._headless=null!==e&&e._headless,this._window=null,this._blockCursorElement=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(t){const e=this._listeners.update;return e.add(t),()=>{e.delete(t)}}registerEditableListener(t){const e=this._listeners.editable;return e.add(t),()=>{e.delete(t)}}registerDecoratorListener(t){const e=this._listeners.decorator;return e.add(t),()=>{e.delete(t)}}registerTextContentListener(t){const e=this._listeners.textcontent;return e.add(t),()=>{e.delete(t)}}registerRootListener(t){const e=this._listeners.root;return t(this._rootElement,null),e.add(t),()=>{t(null,this._rootElement),e.delete(t)}}registerCommand(t,e,n){void 0===n&&sS(35);const i=this._commands;i.has(t)||i.set(t,[new Set,new Set,new Set,new Set,new Set]);const r=i.get(t);void 0===r&&sS(36,String(t));const s=r[n];return s.add(e),()=>{s.delete(e),r.every(t=>0===t.size)&&i.delete(t)}}registerMutationListener(t,e,n){const i=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,r=this._listeners.mutation;let s=r.get(e);void 0===s&&(s=new Set,r.set(e,s)),s.add(i);const o=n&&n.skipInitialization;return void 0!==o&&o||this.initializeMutationListener(e,i),()=>{s.delete(i),0===s.size&&r.delete(e)}}getRegisteredNode(t){const e=this._nodes.get(t.getType());return void 0===e&&sS(37,t.name),e}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,e){const n=this._editorState,i=LA(n).get(e.getType());if(!i)return;const r=new Map;for(const s of i.keys())r.set(s,"created");r.size>0&&t(r,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,e){const n=this.getRegisteredNode(t);return n.transforms.add(e),n}registerNodeTransform(t,e){const n=this.registerNodeTransformToKlass(t,e),i=[n],r=n.replaceWithKlass;if(null!=r){const t=this.registerNodeTransformToKlass(r,e);i.push(t)}return function(t,e){const n=LA(t.getEditorState()),i=[];for(const r of e){const t=n.get(r);t&&i.push(t)}0!==i.length&&t.update(()=>{for(const t of i)for(const e of t.keys()){const t=OC(e);t&&t.markDirty()}},null===t._pendingEditorState?{tag:uT}:void 0)}(this,i.map(t=>t.klass.getType())),()=>{i.forEach(t=>t.transforms.delete(e))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,e){return lA(this,t,e)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const e=this._rootElement;if(t!==e){const n=iA(this._config.theme,"root"),i=this._pendingEditorState||this._editorState;if(this._rootElement=t,lC(this,e,t,i),null!==e&&(this._config.disableEvents||function(t){const e=FE.get(t);if(void 0===e)return;const n=UE.get(e);if(void 0===n)return;const i=n-1;i>=0||sS(164),FE.delete(t),UE.set(e,i),0===i&&e.removeEventListener("selectionchange",nT);const r=SC(t);xC(r)?(function(t){if(null!==t._parentEditor){const e=jC(t),n=e[e.length-1]._key;eT.get(n)===t&&eT.delete(n)}else eT.delete(t._key)}(r),t.__lexicalEditor=null):r&&sS(198);const s=tT(t);for(let o=0;o<s.length;o++)s[o]();t.__lexicalEventHandles=[]}(e),null!=n&&e.classList.remove(...n)),null!==t){const e=pA(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=e,this._dirtyType=2,KS(this),this._updateTags.add(uT),UM(this),this._config.disableEvents||function(t,e){const n=t.ownerDocument;FE.set(t,n);const i=UE.get(n)??0;i<1&&n.addEventListener("selectionchange",nT),UE.set(n,i+1),t.__lexicalEditor=e;const r=tT(t);for(let s=0;s<DE.length;s++){const[n,i]=DE[s],o="function"==typeof i?t=>{rT(t)||(iT(t),(e.isEditable()||"click"===n)&&i(t,e))}:t=>{if(rT(t))return;iT(t);const i=e.isEditable();switch(n){case"cut":return i&&lA(e,SE,t);case"copy":return lA(e,bE,t);case"paste":return i&&lA(e,qw,t);case"dragstart":return i&&lA(e,vE,t);case"dragover":return i&&lA(e,yE,t);case"dragend":return i&&lA(e,xE,t);case"focus":return i&&lA(e,AE,t);case"blur":return i&&lA(e,RE,t);case"drop":return i&&lA(e,mE,t)}};t.addEventListener(n,o),r.push(()=>{t.removeEventListener(n,o)})}}(t,this),null!=n&&t.classList.add(...n)}else this._window=null,this._updateTags.add(uT),UM(this);zM("root",this,!1,t,e)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,e){t.isEmpty()&&sS(38);let n=t;n._readOnly&&(n=ZM(t),n._selection=t._selection?t._selection.clone():null),qS(this);const i=this._pendingEditorState,r=this._updateTags,s=void 0!==e?e.tag:null;null===i||i.isEmpty()||(null!=s&&r.add(s),UM(this)),this._pendingEditorState=n,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&r.add(s),this._updating||UM(this)}parseEditorState(t,e){return function(t,e,n){const i=QM(),r=xM,s=SM,o=bM,a=e._dirtyElements,l=e._dirtyLeaves,c=e._cloneNotNeeded,u=e._dirtyType;e._dirtyElements=new Map,e._dirtyLeaves=new Set,e._cloneNotNeeded=new Set,e._dirtyType=0,xM=i,SM=!1,bM=e,dC(null);try{const r=e._nodes;IM(t.root,r),n&&n(),i._readOnly=!0}catch(h){h instanceof Error&&e._onError(h)}finally{e._dirtyElements=a,e._dirtyLeaves=l,e._cloneNotNeeded=c,e._dirtyType=u,xM=r,SM=s,bM=o}return i}("string"==typeof t?JSON.parse(t):t,this,e)}read(t){return UM(this),this.getEditorState().read(t,{editor:this})}update(t,e){!function(t,e,n){t._updating?t._updates.push([e,n]):HM(t,e,n)}(this,t,e)}focus(t,e={}){const n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),VM(this,()=>{const i=cM(),r=BC();null!==i?i.dirty||VC(i.clone()):0!==r.getChildrenSize()&&("rootStart"===e.defaultSelection?r.selectStart():r.selectEnd()),function(t){CM(),PM()._updateTags.add(t)}("focus"),function(t){CM(),PM()._deferred.push(t)}(()=>{n.removeAttribute("autocapitalize"),t&&t()})}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;null!==t&&t.blur();const e=SA(this._window);null!==e&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,zM("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}kt(uC,"version"),uC.version="0.37.0+prod.esm";let hC=null;function dC(t){hC=t}let fC=1;function pC(t,e){const n=gC(t,e);return void 0===n&&sS(30,e),n}function gC(t,e){return t._nodes.get(e)}const mC="function"==typeof queueMicrotask?queueMicrotask:t=>{Promise.resolve().then(t)};function _C(t){return $M(FC(t))}function vC(t){const e=document.activeElement;if(!EA(e))return!1;const n=e.nodeName;return $M(FC(t))&&("INPUT"===n||"TEXTAREA"===n||"true"===e.contentEditable&&null==SC(e))}function yC(t,e,n){const i=t.getRootElement();try{return null!==i&&i.contains(e)&&i.contains(n)&&null!==e&&!vC(e)&&bC(e)===t}catch(r){return!1}}function xC(t){return t instanceof uC}function bC(t){let e=t;for(;null!=e;){const t=SC(e);if(xC(t))return t;e=hA(e)}return null}function SC(t){return t?t.__lexicalEditor:null}function wC(t){return BT(t)||t.isToken()}function EC(t){return wC(t)||t.isSegmented()}function TC(t){return TA(t)&&3===t.nodeType}function MC(t){return TA(t)&&9===t.nodeType}function CC(t){let e=t;for(;null!=e;){if(TC(e))return e;e=e.firstChild}return null}function AC(t,e,n){const i=NS[e];if(null!==n&&(t&i)===(n&i))return t;let r=t^i;return"subscript"===e?r&=~NS.superscript:"superscript"===e?r&=~NS.subscript:"lowercase"===e?(r&=~NS.uppercase,r&=~NS.capitalize):"uppercase"===e?(r&=~NS.lowercase,r&=~NS.capitalize):"capitalize"===e&&(r&=~NS.lowercase,r&=~NS.uppercase),r}function RC(t){return IT(t)||vT(t)||$M(t)}function PC(t){const e=t.getParent();if(null!==e){const n=t.getWritable(),i=e.getWritable(),r=t.getPreviousSibling(),s=t.getNextSibling(),o=null!==s?s.__key:null,a=null!==r?r.__key:null,l=null!==r?r.getWritable():null,c=null!==s?s.getWritable():null;null===r&&(i.__first=o),null===s&&(i.__last=a),null!==l&&(l.__next=o),null!==c&&(c.__prev=a),n.__prev=null,n.__next=null,n.__parent=null,i.__size--}}function NC(t){AM(),aT(t)&&sS(323,t.__key,t.__type);const e=t.getLatest(),n=e.__parent,i=RM(),r=PM(),s=i._nodeMap,o=r._dirtyElements;null!==n&&function(t,e,n){let i=t;for(;null!==i;){if(n.has(i))return;const t=e.get(i);if(void 0===t)break;n.set(i,!1),i=t.__parent}}(n,s,o);const a=e.__key;r._dirtyType=1,XM(t)?o.set(a,!0):r._dirtyLeaves.add(a)}function DC(t){CM();const e=PM(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,null!==n){const t=OC(n);null!==t&&t.getWritable()}if(null!==t){const e=OC(t);null!==e&&e.getWritable()}}}function LC(){return MM()?null:PM()._compositionKey}function OC(t,e){const n=(e||RM())._nodeMap.get(t);return void 0===n?null:n}function kC(t,e){const n=IC(t,PM());return void 0!==n?OC(n,e):null}function IC(t,e){return t[`__lexicalKey_${e._key}`]}function FC(t,e){let n=t;for(;null!=n;){const t=kC(n,e);if(null!==t)return t;n=hA(n)}return null}function UC(t){const e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n}function zC(t){return t.read(()=>BC().getTextContent())}function BC(){return HC(RM())}function HC(t){return t._nodeMap.get("root")}function VC(t){CM();const e=RM();null!==t&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t}function WC(t){const e=PM(),n=function(t,e){let n=t;for(;null!=n;){const t=IC(n,e);if(void 0!==t)return t;n=hA(n)}return null}(t,e);return null===n?t===e.getRootElement()?OC("root"):null:OC(n)}function GC(t){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t)}function jC(t){const e=[];let n=t;for(;null!==n;)e.push(n),n=n._parentEditor;return e}function XC(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function qC(t){return TC(t)?t.nodeValue:null}function KC(t,e,n){const i=SA(gA(e));if(null===i)return;const r=i.anchorNode;let{anchorOffset:s,focusOffset:o}=i;if(null!==r){let e=qC(r);const i=FC(r);if(null!==e&&IT(i)){if(e===AS&&n){const t=n.length;e=n,s=t,o=t}null!==e&&$C(i,e,s,o,t)}}}function $C(t,e,n,i,r){let s=t;if(s.isAttached()&&(r||!s.isDirty())){const o=s.isComposing();let a=e;(o||r)&&e[e.length-1]===AS&&(a=e.slice(0,-1));const l=s.getTextContent();if(r||a!==l){if(""===a){if(DC(null),dS||fS||_S)s.remove();else{const t=PM();setTimeout(()=>{t.update(()=>{s.isAttached()&&s.remove()})},20)}return}const e=s.getParent(),r=uM(),l=s.getTextContentSize(),c=LC(),u=s.getKey();if(s.isToken()||null!==c&&u===c&&!o||XT(r)&&(null!==e&&!e.canInsertTextBefore()&&0===r.anchor.offset||r.anchor.key===t.__key&&0===r.anchor.offset&&!s.canInsertTextBefore()&&!o||r.focus.key===t.__key&&r.focus.offset===l&&!s.canInsertTextAfter()&&!o))return void s.markDirty();const h=cM();if(!XT(h)||null===n||null===i)return void YC(s,a,h);if(h.setTextNodeRange(s,n,s,i),s.isSegmented()){const t=kT(s.getTextContent());s.replace(t),s=t}YC(s,a,h)}}}function YC(t,e,n){if(t.setTextContent(e),XT(n)){const e=t.getKey();for(const i of["anchor","focus"]){const r=n[i];"text"===r.type&&r.key===e&&(r.offset=nR(t,r.offset,"clamp"))}}}function JC(t,e,n){const i=e[n]||!1;return"any"===i||i===t[n]}function ZC(t,e,n){return function(t,e){return JC(t,e,"altKey")&&JC(t,e,"ctrlKey")&&JC(t,e,"shiftKey")&&JC(t,e,"metaKey")}(t,n)&&t.key.toLowerCase()===e.toLowerCase()}const QC={ctrlKey:!cS,metaKey:cS},tA={altKey:cS,ctrlKey:!cS};function eA(t){return"Backspace"===t.key}function nA(t){return ZC(t,"a",QC)}function iA(t,e){void 0===t.__lexicalClassNameCache&&(t.__lexicalClassNameCache={});const n=t.__lexicalClassNameCache,i=n[e];if(void 0!==i)return i;const r=t[e];if("string"==typeof r){const t=vS(r);return n[e]=t,t}return r}function rA(t,e,n,i,r){if(0===n.size)return;const s=i.__type,o=i.__key,a=e.get(s);void 0===a&&sS(33,s);const l=a.klass;let c=t.get(l);void 0===c&&(c=new Map,t.set(l,c));const u=c.get(o),h="destroyed"===u&&"created"===r;(void 0===u||h)&&c.set(o,h?"updated":r)}function sA(t,e,n){const i=t.getParent();let r=n,s=t;return null!==i&&(e&&0===n?(r=s.getIndexWithinParent(),s=i):e||n!==s.getChildrenSize()||(r=s.getIndexWithinParent()+1,s=i)),s.getChildAtIndex(e?r-1:r)}function oA(t,e){const n=t.offset;if("element"===t.type)return sA(t.getNode(),e,n);{const i=t.getNode();if(e&&0===n||!e&&n===i.getTextContentSize()){const t=e?i.getPreviousSibling():i.getNextSibling();return null===t?sA(i.getParentOrThrow(),e,i.getIndexWithinParent()+(e?0:1)):t}}return null}function aA(t){const e=gA(t).event,n=e&&e.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n}function lA(t,e,n){return function(t,e,n){const i=jC(t);for(let r=4;r>=0;r--)for(let s=0;s<i.length;s++){const o=i[s],a=o._commands.get(e);if(void 0!==a){const e=a[r];if(void 0!==e){const i=Array.from(e),r=i.length;let s=!1;if(VM(o,()=>{for(let e=0;e<r;e++)if(i[e](n,t))return void(s=!0)}),s)return s}}}return!1}(t,e,n)}function cA(t){return!JM(t)&&!t.isLastChild()&&!t.isInline()}function uA(t,e){const n=t._keyToDOMMap.get(e);return void 0===n&&sS(75,e),n}function hA(t){const e=t.assignedSlot||t.parentElement;return MA(e)?e.host:e}function dA(t){return MC(t)?t:EA(t)?t.ownerDocument:null}function fA(t,e){let n=t.getParent();for(;null!==n;){if(n.is(e))return!0;n=n.getParent()}return!1}function pA(t){const e=dA(t);return e?e.defaultView:null}function gA(t){const e=t._window;return null===e&&sS(78),e}function mA(t){return XM(t)&&t.isInline()||$M(t)&&t.isInline()}function _A(t){return JM(t)||XM(t)&&t.isShadowRoot()}function vA(t){const e=PM(),n=t.getType(),i=gC(e,n);void 0===i&&sS(200,t.constructor.name,n);const{replace:r,replaceWithKlass:s}=i;if(null!==r){const e=r(t),i=e.constructor;return null!==s?e instanceof s||sS(201,s.name,s.getType(),i.name,i.getType(),t.constructor.name,n):e instanceof t.constructor&&i!==t.constructor||sS(202,i.name,i.getType(),t.constructor.name,n),e.__key===t.__key&&sS(203,t.constructor.name,n,i.name,i.getType()),e}return t}function yA(t,e){!JM(t.getParent())||XM(e)||$M(e)||sS(99)}function xA(t){return($M(t)||XM(t)&&!t.canBeEmpty())&&!t.isInline()}function bA(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;const i=t.parentElement;null!==i&&i.removeChild(t)}function SA(t){return aS?(t||window).getSelection():null}function wA(t){return EA(t)&&"A"===t.tagName}function EA(t){return TA(t)&&1===t.nodeType}function TA(t){return"object"==typeof t&&null!==t&&"nodeType"in t&&"number"==typeof t.nodeType}function MA(t){return TA(t)&&11===t.nodeType}function CA(t){const e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==t.nodeName.match(e)}function AA(t){const e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==t.nodeName.match(e)}function RA(t){if($M(t)&&!t.isInline())return!0;if(!XM(t)||_A(t))return!1;const e=t.getFirstChild(),n=null===e||vT(e)||IT(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n}function PA(){return PM()}const NA=new WeakMap,DA=new Map;function LA(t){if(!t._readOnly&&t.isEmpty())return DA;t._readOnly||sS(192);let e=NA.get(t);return e||(e=function(t){const e=new Map;for(const[n,i]of t._nodeMap){const t=i.__type;let r=e.get(t);r||(r=new Map,e.set(t,r)),r.set(n,i)}return e}(t),NA.set(t,e)),e}function OA(t){const e=t.constructor.clone(t);return e.afterCloneFrom(t),e}function kA(t,e){const n=parseInt(t.style.paddingInlineStart,10)||0,i=Math.round(n/40);e.setIndent(i)}function IA(t){return!0===t.__lexicalUnmanaged}function FA(t,e){return n=t,i=e,Object.prototype.hasOwnProperty.call(n,i)&&t[e]!==lT[e];var n,i}function UA(t){const e=FS in t.prototype?t.prototype[FS]():void 0,n=function(t){if(!(t===lT||t.prototype instanceof lT)){let n="<unknown>",i="<unknown>";try{n=t.getType()}catch(e){}try{uC.version&&(i=JSON.parse(uC.version))}catch(e){}sS(290,t.name,n,i)}return t===KM||t===jM||t===lT}(t),i=!n&&FA(t,"getType")?t.getType():void 0;let r,s=i;if(e)if(i)r=e[i];else for(const[o,a]of Object.entries(e))s=o,r=a;if(!n&&s&&(FA(t,"getType")||(t.getType=()=>s),FA(t,"clone")||(t.clone=e=>(dC(e),new t)),FA(t,"importJSON")||(t.importJSON=r&&r.$importJSON||(e=>(new t).updateFromJSON(e))),!FA(t,"importDOM")&&r)){const{importDOM:e}=r;e&&(t.importDOM=()=>e)}return{ownNodeConfig:r,ownNodeType:s}}const zA=(t,e)=>{let n=t;for(;null!=n&&!JM(n);){if(e(n))return n;n=n.getParent()}return null},BA={next:"previous",previous:"next"};class HA{constructor(t){kt(this,"origin"),this.origin=t}[Symbol.iterator](){return uR({hasNext:$A,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return tR(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return tR(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,e){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(null===n?this.insert(t):n.replace(t,e)),this}splice(t,e,n="next"){const i=n===this.direction?e:Array.from(e).reverse();let r=this;const s=this.getParentAtCaret(),o=new Map;for(let a=r.getAdjacentCaret();null!==a&&o.size<t;a=a.getAdjacentCaret()){const t=a.origin.getWritable();o.set(t.getKey(),t)}for(const a of i){if(o.size>0){const t=r.getNodeAtCaret();if(t)if(o.delete(t.getKey()),o.delete(a.getKey()),t.is(a)||r.origin.is(a));else{const e=a.getParent();e&&e.is(s)&&a.remove(),t.replace(a)}else null===t&&sS(263,Array.from(o).join(" "))}else r.insert(a);r=tR(a,this.direction)}for(const a of o.values())a.remove();return this}}class VA extends HA{constructor(){super(...arguments),kt(this,"type","child")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:rR(t,this.direction)}getParentCaret(t="root"){return tR(jA(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=GA(this.direction);return tR(this.getNodeAtCaret(),t)||rR(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof VA&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const WA={root:JM,shadowRoot:_A};function GA(t){return BA[t]}function jA(t,e="root"){return WA[e](t)?null:t}class XA extends HA{constructor(){super(...arguments),kt(this,"type","sibling")}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:tR(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return XM(this.origin)?rR(this.origin,this.direction):null}getParentCaret(t="root"){return tR(jA(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=GA(this.direction);return tR(this.getNodeAtCaret(),t)||rR(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof XA&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof XA||t instanceof qA)&&this.direction===t.direction&&this.origin.is(t.origin)}}class qA extends HA{constructor(t,e){super(t),kt(this,"type","text"),kt(this,"offset"),this.offset=e}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:eR(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return tR(jA(this.getParentAtCaret(),t),this.direction)}getFlipped(){return eR(this.origin,GA(this.direction),this.offset)}isSamePointCaret(t){return t instanceof qA&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof XA||t instanceof qA)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return tR(this.origin,this.direction)}}function KA(t){return t instanceof qA}function $A(t){return t instanceof XA}function YA(t){return t instanceof VA}const JA={next:class extends qA{constructor(){super(...arguments),kt(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends qA{constructor(){super(...arguments),kt(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},ZA={next:class extends XA{constructor(){super(...arguments),kt(this,"direction","next")}getNodeAtCaret(){return this.origin.getNextSibling()}insert(t){return this.origin.insertAfter(t),this}},previous:class extends XA{constructor(){super(...arguments),kt(this,"direction","previous")}getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(t){return this.origin.insertBefore(t),this}}},QA={next:class extends VA{constructor(){super(...arguments),kt(this,"direction","next")}getNodeAtCaret(){return this.origin.getFirstChild()}insert(t){return this.origin.splice(0,0,[t]),this}},previous:class extends VA{constructor(){super(...arguments),kt(this,"direction","previous")}getNodeAtCaret(){return this.origin.getLastChild()}insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this}}};function tR(t,e){return t?new ZA[e](t):null}function eR(t,e,n){return t?new JA[e](t,nR(t,n)):null}function nR(t,e,n="error"){const i=t.getTextContentSize();let r="next"===e?i:"previous"===e?0:e;return(r<0||r>i)&&("clamp"!==n&&oS(284,String(e),String(i),t.getKey()),r=r<0?0:i),r}function iR(t,e){return new aR(t,e)}function rR(t,e){return XM(t)?new QA[e](t):null}function sR(t){return t&&function(t){return t&&t.getChildCaret()||t}(t.getAdjacentCaret())}class oR{constructor(t,e,n){kt(this,"type","node-caret-range"),kt(this,"direction"),kt(this,"anchor"),kt(this,"focus"),this.anchor=t,this.focus=e,this.direction=n}getLatest(){const t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new oR(t,e,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=t=>{const e=this[t].getLatest();return KA(e)?function(t,e){const{direction:n,origin:i}=t;return iR(t,nR(i,"focus"===e?GA(n):n)-t.offset)}(e,t):null},e=t("anchor"),n=t("focus");if(e&&n){const{caret:t}=e,{caret:i}=n;if(t.isSameNodeCaret(i))return[iR(t,i.offset-t.offset),null]}return[e,n]}iterNodeCarets(t="root"){const e=KA(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),i=KA(n),r=e=>e.isSameNodeCaret(n)?null:sR(e)||e.getParentCaret(t);return uR({hasNext:t=>null!==t&&!(i&&n.isSameNodeCaret(t)),initial:e.isSameNodeCaret(n)?null:r(e),map:t=>t,step:r})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class aR{constructor(t,e){kt(this,"type","slice"),kt(this,"caret"),kt(this,"distance"),this.caret=t,this.distance=e}getSliceIndices(){const{distance:t,caret:{offset:e}}=this,n=e+t;return n<e?[n,e]:[e,n]}getTextContent(){const[t,e]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,e)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:e}}=this,[n,i]=this.getSliceIndices(),r=t.getTextContent();return eR(t.setTextContent(r.slice(0,n)+r.slice(i)),e,n)}}function lR(t){return cR(t,tR(BC(),t.direction))}function cR(t,e){return t.direction!==e.direction&&sS(265),new oR(t,e,t.direction)}function uR(t){const{initial:e,hasNext:n,step:i,map:r}=t;let s=e;return{[Symbol.iterator](){return this},next(){if(!n(s))return{done:!0,value:void 0};const t={done:!1,value:r(s)};return s=i(s),t}}}function hR(t,e){const n=gR(t.origin,e.origin);switch(null===n&&sS(275,t.origin.getKey(),e.origin.getKey()),n.type){case"same":{const n="text"===t.type,s="text"===e.type;return n&&s?(i=t.offset,r=e.offset,Math.sign(i-r)):t.type===e.type?0:n?-1:s?1:"child"===t.type?-1:1}case"ancestor":return"child"===t.type?-1:1;case"descendant":return"child"===e.type?1:-1;case"branch":return dR(n)}var i,r}function dR(t){const{a:e,b:n}=t,i=e.__key,r=n.__key;let s=e,o=n;for(;s&&o;s=s.getNextSibling(),o=o.getNextSibling()){if(s.__key===r)return-1;if(o.__key===i)return 1}return null===s?1:-1}function fR(t,e){return e.is(t)}function pR(t){return XM(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()]}function gR(t,e){if(t.is(e))return{commonAncestor:t,type:"same"};const n=new Map;for(let[i,r]=pR(t);i;r=i,i=i.getParent())n.set(i,r);for(let[i,r]=pR(e);i;r=i,i=i.getParent()){const s=n.get(i);if(void 0!==s)return null===s?(fR(t,i)||sS(276),{commonAncestor:i,type:"ancestor"}):null===r?(fR(e,i)||sS(277),{commonAncestor:i,type:"descendant"}):((XM(s)||fR(t,s))&&(XM(r)||fR(e,r))&&i.is(s.getParent())&&i.is(r.getParent())||sS(278),{a:s,b:r,commonAncestor:i,type:"branch"})}return null}function mR(t,e){const{type:n,key:i,offset:r}=t,s=function(t){const e=OC(t);return null===e&&sS(63,t),e}(t.key);return"text"===n?(IT(s)||sS(266,s.getType(),i),eR(s,e,r)):(XM(s)||sS(267,s.getType(),i),function(t,e,n){let i=rR(t,"next");for(let r=0;r<e;r++){const t=i.getAdjacentCaret();if(null===t)break;i=t}return TR(i,n)}(s,t.offset,e))}function _R(t,e){const{origin:n,direction:i}=e,r="next"===i;KA(e)?t.set(n.getKey(),e.offset,"text"):$A(e)?IT(n)?t.set(n.getKey(),nR(n,i),"text"):t.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(r?1:0),"element"):(YA(e)&&XM(n)||sS(268),t.set(n.getKey(),r?0:n.getChildrenSize(),"element"))}function vR(t,e){_R(t.anchor,e.anchor),_R(t.focus,e.focus)}function yR(t){const{anchor:e,focus:n}=t,i=mR(e,"next"),r=mR(n,"next"),s=hR(i,r)<=0?"next":"previous";return cR(TR(i,s),TR(r,s))}function xR(t){const{direction:e,origin:n}=t,i=tR(n,GA(e)).getNodeAtCaret();return i?tR(i,e):rR(n.getParentOrThrow(),e)}function bR(t,e="root"){const n=[t];for(let i=YA(t)?t.getParentCaret(e):t.getSiblingCaret();null!==i;i=i.getParentCaret(e))n.push(xR(i));return n}function SR(t){return!!t&&t.origin.isAttached()}function wR(t){const e=function(t){let e=t;for(;YA(e);){const t=sR(e);if(!YA(t))break;e=t}return e}(t.getLatest()),{direction:n}=e;if(IT(e.origin))return KA(e)?e:eR(e.origin,n,n);const i=e.getAdjacentCaret();return $A(i)&&IT(i.origin)?eR(i.origin,n,GA(n)):e}function ER(t){return KA(t)&&t.offset!==nR(t.origin,t.direction)}function TR(t,e){return t.direction===e?t:t.getFlipped()}function MR(t,e){return t.direction===e?t:cR(TR(t.focus,e),TR(t.anchor,e))}function CR(t){return t}function AR(t,e){if(!e||t===e)return t;for(const n in e)if(t[n]!==e[n])return{...t,...e};return t}const RR=new Map;function PR(t){const e={};if(!t)return e;const n=t.split(";");for(const i of n)if(""!==i){const[t,n]=i.split(/:([^]+)/);t&&n&&(e[t.trim()]=n.trim())}return e}function NR(t){let e=RR.get(t);return void 0===e&&(e=PR(t),RR.set(t,e)),e}function DR(t){const e=PA().getElementByKey(t.getKey());if(null===e)return null;const n=e.ownerDocument.defaultView;return null===n?null:n.getComputedStyle(e)}function LR(t){return DR(JM(t)?t:t.getParentOrThrow())}function OR(t){const e=LR(t);return null!==e&&"rtl"===e.direction}function kR(t,e,n="self"){const i=t.getStartEndPoints();if(e.isSelected(t)&&!EC(e)&&null!==i){const[r,s]=i,o=t.isBackward(),a=r.getNode(),l=s.getNode(),c=e.is(a),u=e.is(l);if(c||u){const[i,r]=YT(t),s=a.is(l),c=e.is(o?l:a),u=e.is(o?a:l);let h,d=0;s?(d=i>r?r:i,h=i>r?i:r):c?(d=o?r:i,h=void 0):u&&(d=0,h=o?i:r);const f=e.__text.slice(d,h);f!==e.__text&&("clone"===n&&(e=function(t){return(e=OA(t))[oT]=!0,e;var e}(e)),e.__text=f)}}return e}function IR(t){const e=t.getStyle(),n=PR(e);RR.set(e,n)}function FR(t){const e=UR(t);return null!==e&&"vertical-rl"===e.writingMode}function UR(t){const e=t.anchor.getNode();return XM(e)?DR(e):LR(e)}function zR(t,e){let n=FR(t)?!e:e;BR(t)&&(n=!n);const i=mR(t.focus,n?"previous":"next");if(ER(i))return!1;for(const r of lR(i)){if(YA(r))return!r.origin.isInline();if(!XM(r.origin)){if($M(r.origin))return!0;break}}return!1}function BR(t){const e=UR(t);return null!==e&&"rtl"===e.direction}function HR(t,e,n){const i=BR(t);let r;r=FR(t)||i?!n:n,function(t,e,n,i){t.modify(e?"extend":"move",n,i)}(t,e,r,"character")}const VR="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,WR=VR&&"documentMode"in document?document.documentMode:null;function GR(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}function jR(...t){return()=>{for(let e=t.length-1;e>=0;e--)t[e]();t.length=0}}function XR(t,...e){const n=GR(...e);n.length>0&&t.classList.add(...n)}function qR(t,...e){const n=GR(...e);n.length>0&&t.classList.remove(...n)}function KR(t){return t?t.getAdjacentCaret():null}function $R(t,e){let n=t;for(;null!=n;){if(n instanceof e)return n;n=n.getParent()}return null}function YR(t){const e=zA(t,t=>XM(t)&&!t.isInline());return XM(e)||function(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,t.__key),e}function JR(t,e){return null!==t&&Object.getPrototypeOf(t).constructor.name===e.name}function ZR(t,e){const n=[],i=Array.from(t).reverse();for(let r=i.pop();void 0!==r;r=i.pop())if(e(r))n.push(r);else if(XM(r))for(const t of QR(r))i.push(t);return n}function QR(t){return function(t){return uR({hasNext:$A,initial:t.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}(rR(t,"previous"))}VR&&"InputEvent"in window&&!WR&&new window.InputEvent("input");const tP=Symbol.for("preact-signals");function eP(){if(sP>1)return void sP--;let t,e=!1;for(;void 0!==iP;){let n=iP;for(iP=void 0,oP++;void 0!==n;){const i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&hP(n))try{n.c()}catch(Ih){e||(t=Ih,e=!0)}n=i}}if(oP=0,sP--,e)throw t}let nP,iP;function rP(t){const e=nP;nP=void 0;try{return t()}finally{nP=e}}let sP=0,oP=0,aP=0;function lP(t){if(void 0===nP)return;let e=t.n;return void 0===e||e.t!==nP?(e={i:0,S:t,p:nP.s,n:void 0,t:nP,e:void 0,x:void 0,r:e},void 0!==nP.s&&(nP.s.n=e),nP.s=e,t.n=e,32&nP.f&&t.S(e),e):-1===e.i?(e.i=0,void 0!==e.n&&(e.n.p=e.p,void 0!==e.p&&(e.p.n=e.n),e.p=nP.s,e.n=void 0,nP.s.n=e,nP.s=e),e):void 0}function cP(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name}function uP(t,e){return new cP(t,e)}function hP(t){for(let e=t.s;void 0!==e;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function dP(t){for(let e=t.s;void 0!==e;e=e.n){const n=e.S.n;if(void 0!==n&&(e.r=n),e.S.n=e,e.i=-1,void 0===e.n){t.s=e;break}}}function fP(t){let e,n=t.s;for(;void 0!==n;){const t=n.p;-1===n.i?(n.S.U(n),void 0!==t&&(t.n=n.n),void 0!==n.n&&(n.n.p=t)):e=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=t}t.s=e}function pP(t,e){cP.call(this,void 0),this.x=t,this.s=void 0,this.g=aP-1,this.f=4,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name}function gP(t){const e=t.u;if(t.u=void 0,"function"==typeof e){sP++;const i=nP;nP=void 0;try{e()}catch(n){throw t.f&=-2,t.f|=8,mP(t),n}finally{nP=i,eP()}}}function mP(t){for(let e=t.s;void 0!==e;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,gP(t)}function _P(t){if(nP!==this)throw new Error("Out-of-order effect");fP(this),nP=t,this.f&=-2,8&this.f&&mP(this),eP()}function vP(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==e?void 0:e.name}function yP(t,e){const n=new vP(t,e);try{n.c()}catch(r){throw n.d(),r}const i=n.d.bind(n);return i[Symbol.dispose]=i,i}function xP(t,e={}){const n={};for(const i in t){const r=e[i],s=uP(void 0===r?t[i]:r);n[i]=s}return n}function bP(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function SP(t,e){if(t&&e&&!Array.isArray(e)&&"object"==typeof t&&"object"==typeof e){const n=t,i=e;for(const t in i)n[t]=SP(n[t],i[t]);return t}return e}cP.prototype.brand=tP,cP.prototype.h=function(){return!0},cP.prototype.S=function(t){const e=this.t;e!==t&&void 0===t.e&&(t.x=e,this.t=t,void 0!==e?e.e=t:rP(()=>{var t;null==(t=this.W)||t.call(this)}))},cP.prototype.U=function(t){if(void 0!==this.t){const e=t.e,n=t.x;void 0!==e&&(e.x=n,t.e=void 0),void 0!==n&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n,void 0===n&&rP(()=>{var t;null==(t=this.Z)||t.call(this)}))}},cP.prototype.subscribe=function(t){return yP(()=>{const e=this.value,n=nP;nP=void 0;try{t(e)}finally{nP=n}},{name:"sub"})},cP.prototype.valueOf=function(){return this.value},cP.prototype.toString=function(){return this.value+""},cP.prototype.toJSON=function(){return this.value},cP.prototype.peek=function(){const t=nP;nP=void 0;try{return this.value}finally{nP=t}},Object.defineProperty(cP.prototype,"value",{get(){const t=lP(this);return void 0!==t&&(t.i=this.i),this.v},set(t){if(t!==this.v){if(oP>100)throw new Error("Cycle detected");this.v=t,this.i++,aP++,sP++;try{for(let t=this.t;void 0!==t;t=t.x)t.t.N()}finally{eP()}}}}),pP.prototype=new cP,pP.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===aP)return!0;if(this.g=aP,this.f|=1,this.i>0&&!hP(this))return this.f&=-2,!0;const t=nP;try{dP(this),nP=this;const t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return nP=t,fP(this),this.f&=-2,!0},pP.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(let t=this.s;void 0!==t;t=t.n)t.S.S(t)}cP.prototype.S.call(this,t)},pP.prototype.U=function(t){if(void 0!==this.t&&(cP.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(let t=this.s;void 0!==t;t=t.n)t.S.U(t)}},pP.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let t=this.t;void 0!==t;t=t.x)t.t.N()}},Object.defineProperty(pP.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const t=lP(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v}}),vP.prototype.c=function(){const t=this.S();try{if(8&this.f)return;if(void 0===this.x)return;const t=this.x();"function"==typeof t&&(this.u=t)}finally{t()}},vP.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,gP(this),dP(this),sP++;const t=nP;return nP=this,_P.bind(this,t)},vP.prototype.N=function(){2&this.f||(this.f|=2,this.o=iP,iP=this)},vP.prototype.d=function(){this.f|=8,1&this.f||mP(this)},vP.prototype.dispose=function(){this.d()};function wP(t){return 0===t.id}function EP(t){return 2===t.id}const TP=new Set;class MP{constructor(t,e){kt(this,"builder"),kt(this,"configs"),kt(this,"_dependency"),kt(this,"_peerNameSet"),kt(this,"extension"),kt(this,"state"),kt(this,"_signal"),this.builder=t,this.extension=e,this.configs=new Set,this.state={id:0}}mergeConfigs(){let t=this.extension.config||{};const e=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):AR;for(const n of this.configs)t=e(t,n);return t}init(t){const e=this.state;EP(e)||bP(306,String(e.id));const n={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},i={...n,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},r=function(t,e,n){return Object.assign(t,{config:e,id:3,registerState:n})}(e,this.mergeConfigs(),n);let s;this.state=r,this.extension.init&&(s=this.extension.init(t,r.config,n)),this.state=function(t,e,n){return Object.assign(t,{id:4,initResult:e,registerState:n})}(r,s,i)}build(t){const e=this.state;let n;4!==e.id&&bP(307,String(e.id),String(5)),this.extension.build&&(n=this.extension.build(t,e.config,e.registerState));const i={...e.registerState,getOutput:()=>n,getSignal:this.getSignal.bind(this)};this.state=function(t,e,n){return Object.assign(t,{id:5,output:e,registerState:n})}(e,n,i)}register(t,e){this._signal=e;const n=this.state;5!==n.id&&bP(308,String(n.id),String(5));const i=this.extension.register&&this.extension.register(t,n.config,n.registerState);return this.state=(r=n,Object.assign(r,{id:6})),()=>{const t=this.state;var e;7!==t.id&&bP(309,String(n.id),String(7)),this.state=(e=t,Object.assign(e,{id:5})),i&&i()};var r}afterRegistration(t){const e=this.state;let n;return 6!==e.id&&bP(310,String(e.id),String(6)),this.extension.afterRegistration&&(n=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=(i=e,Object.assign(i,{id:7})),n;var i}getSignal(){return void 0===this._signal&&bP(311),this._signal}getInitResult(){void 0===this.extension.init&&bP(312,this.extension.name);const t=this.state;return t.id>=4||bP(313,String(t.id),String(4)),t.initResult}getInitPeer(t){const e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0}getExtensionInitDependency(){const t=this.state;return t.id>=3||bP(314,String(t.id),String(3)),{config:t.config}}getPeer(t){const e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0}getInitDependency(t){const e=this.builder.getExtensionRep(t);return void 0===e&&bP(315,this.extension.name,t.name),e.getExtensionInitDependency()}getDependency(t){const e=this.builder.getExtensionRep(t);return void 0===e&&bP(315,this.extension.name,t.name),e.getExtensionDependency()}getState(){const t=this.state;return t.id>=7||bP(316,String(t.id),String(7)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||TP}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([t])=>t)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){const t=this.state;t.id>=5||bP(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}}const CP={tag:uT};function AP(){const t=BC();t.isEmpty()&&t.append(sC())}const RP={config:{setOptions:CP,updateOptions:CP},init:({$initialEditorState:t=AP})=>({$initialEditorState:t,initialized:!1}),afterRegistration(t,{updateOptions:e,setOptions:n},i){const r=i.getInitResult();if(!r.initialized){r.initialized=!0;const{$initialEditorState:i}=r;if(function(t){return t instanceof eC}(i))t.setEditorState(i,n);else if("function"==typeof i)t.update(()=>{i(t)},e);else if(i&&("string"==typeof i||"object"==typeof i)){const e=t.parseEditorState(i);t.setEditorState(e,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[YM,MT,gT,UT,iC]},PP=Symbol.for("@lexical/extension/LexicalBuilder");function NP(){}function DP(t){throw t}function LP(t){return Array.isArray(t)?t:[t]}const OP="0.37.0+prod.esm";let kP=class t{constructor(t){kt(this,"roots"),kt(this,"extensionNameMap"),kt(this,"outgoingConfigEdges"),kt(this,"incomingEdges"),kt(this,"conflicts"),kt(this,"_sortedExtensionReps"),kt(this,"PACKAGE_VERSION"),this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=OP,this.roots=t;for(const e of t)this.addExtension(e)}static fromExtensions(e){const n=[LP(RP)];for(const t of e)n.push(LP(t));return new t(n)}static maybeFromEditor(e){const n=e[PP];return n&&(n.PACKAGE_VERSION!==OP&&bP(292,n.PACKAGE_VERSION,OP),n instanceof t||bP(293)),n}static fromEditor(e){const n=t.maybeFromEditor(e);return void 0===n&&bP(294),n}constructEditor(){const{$initialEditorState:t,onError:e,...n}=this.buildCreateEditorArgs(),i=Object.assign(cC({...n,...e?{onError:t=>{e(t,i)}}:{}}),{[PP]:this});for(const r of this.sortedExtensionReps())r.build(i);return i}buildEditor(){let t=NP;function e(){try{t()}finally{t=NP}}const n=Object.assign(this.constructEditor(),{dispose:e,[Symbol.dispose]:e});return t=jR(this.registerEditor(n),()=>n.setRootElement(null)),n}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){const e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&bP(295,t.name),e}addEdge(t,e,n){const i=this.outgoingConfigEdges.get(t);i?i.set(e,n):this.outgoingConfigEdges.set(t,new Map([[e,n]]));const r=this.incomingEdges.get(e);r?r.add(t):this.incomingEdges.set(e,new Set([t]))}addExtension(t){void 0!==this._sortedExtensionReps&&bP(296);const e=LP(t),[n]=e;"string"!=typeof n.name&&bP(297,typeof n.name);let i=this.extensionNameMap.get(n.name);if(void 0!==i&&i.extension!==n&&bP(298,n.name),!i){i=new MP(this,n),this.extensionNameMap.set(n.name,i);const t=this.conflicts.get(n.name);"string"==typeof t&&bP(299,n.name,t);for(const e of n.conflictsWith||[])this.extensionNameMap.has(e)&&bP(299,n.name,e),this.conflicts.set(e,n.name);for(const e of n.dependencies||[]){const t=LP(e);this.addEdge(n.name,t[0].name,t.slice(1)),this.addExtension(t)}for(const[e,i]of n.peerDependencies||[])this.addEdge(n.name,e,i?[i]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const t=[],e=(n,i)=>{let r=n.state;if(EP(r))return;const s=n.extension.name;var o;wP(r)||bP(300,s,i||"[unknown]"),wP(o=r)||bP(304,String(o.id),String(0)),r=Object.assign(o,{id:1}),n.state=r;const a=this.outgoingConfigEdges.get(s);if(a)for(const t of a.keys()){const n=this.extensionNameMap.get(t);n&&e(n,s)}r=function(t){return 1===t.id||bP(305,String(t.id),String(1)),Object.assign(t,{id:2})}(r),n.state=r,t.push(n)};for(const n of this.extensionNameMap.values())wP(n.state)&&e(n);for(const n of t)for(const[t,e]of this.outgoingConfigEdges.get(n.extension.name)||[])if(e.length>0){const n=this.extensionNameMap.get(t);if(n)for(const t of e)n.configs.add(t)}for(const[n,...i]of this.roots)if(i.length>0){const t=this.extensionNameMap.get(n.name);void 0===t&&bP(301,n.name);for(const e of i)t.configs.add(e)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){const e=this.sortedExtensionReps(),n=new AbortController,i=[()=>n.abort()],r=n.signal;for(const s of e){const e=s.register(t,r);e&&i.push(e)}for(const s of e){const e=s.afterRegistration(t);e&&i.push(e)}return jR(...i)}buildCreateEditorArgs(){const t={},e=new Set,n=new Map,i=new Map,r={},s={},o=this.sortedExtensionReps();for(const c of o){const{extension:o}=c;if(void 0!==o.onError&&(t.onError=o.onError),void 0!==o.disableEvents&&(t.disableEvents=o.disableEvents),void 0!==o.parentEditor&&(t.parentEditor=o.parentEditor),void 0!==o.editable&&(t.editable=o.editable),void 0!==o.namespace&&(t.namespace=o.namespace),void 0!==o.$initialEditorState&&(t.$initialEditorState=o.$initialEditorState),o.nodes)for(const t of o.nodes){if("function"!=typeof t){const e=n.get(t.replace);e&&bP(302,o.name,t.replace.name,e.extension.name),n.set(t.replace,c)}e.add(t)}if(o.html){if(o.html.export)for(const[t,e]of o.html.export.entries())i.set(t,e);o.html.import&&Object.assign(r,o.html.import)}o.theme&&SP(s,o.theme)}Object.keys(s).length>0&&(t.theme=s),e.size&&(t.nodes=[...e]);const a=Object.keys(r).length>0,l=i.size>0;(a||l)&&(t.html={},a&&(t.html.import=r),l&&(t.html.export=i));for(const c of o)c.init(t);return t.onError||(t.onError=DP),t}};function IP(t,e=!0){if(t)return!1;let n=BC().getTextContent();return e&&(n=n.trim()),""===n}function FP(t){return()=>function(t){if(!IP(t,!1))return!1;const e=BC().getChildren(),n=e.length;if(n>1)return!1;for(let i=0;i<n;i++){const t=e[i];if($M(t))return!1;if(XM(t)){if(!oC(t))return!1;if(0!==t.__indent)return!1;const e=t.getChildren(),n=e.length;for(let t=0;t<n;t++)if(!IT(e[i]))return!1}}return!0}(t)}function UP(t){const e=window.location.origin,n=n=>{if(n.origin!==e)return;const i=t.getRootElement();if(document.activeElement!==i)return;const r=n.data;if("string"==typeof r){let e;try{e=JSON.parse(r)}catch(s){return}if(e&&"nuanria_messaging"===e.protocol&&"request"===e.type){const i=e.payload;if(i&&"makeChanges"===i.functionId){const e=i.args;if(e){const[i,r,s,o,a]=e;t.update(()=>{const t=cM();if(XT(t)){const e=t.anchor;let l=e.getNode(),c=0,u=0;if(IT(l)&&i>=0&&r>=0&&(c=i,u=i+r,t.setTextNodeRange(l,c,l,u)),c===u&&""===s||(t.insertRawText(s),l=e.getNode()),IT(l)){c=o,u=o+a;const e=l.getTextContentSize();c=c>e?e:c,u=u>e?e:u,t.setTextNodeRange(l,c,l,u)}n.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}function zP(t,e,n,i=null){let r=null===i||e.isSelected(i);const s=XM(e)&&e.excludeFromCopy("html");let o=e;null!==i&&IT(e)&&(o=kR(i,e,"clone"));const a=XM(o)?o.getChildren():[],l=gC(t,o.getType());let c;c=l&&void 0!==l.exportDOM?l.exportDOM(t,o):o.exportDOM(t);const{element:u,after:h}=c;if(!u)return!1;const d=document.createDocumentFragment();for(let f=0;f<a.length;f++){const n=a[f],s=zP(t,n,d,i);!r&&XM(e)&&s&&e.extractWithChild(n,i,"html")&&(r=!0)}if(r&&!s){if((EA(u)||MA(u))&&u.append(d),n.append(u),h){const t=h.call(o,u);t&&(MA(u)?u.replaceChildren(t):u.replaceWith(t))}}else n.append(d);return r}const BP=new Set(["STYLE","SCRIPT"]);function HP(t,e,n,i,r=new Map,s){let o=[];if(BP.has(t.nodeName))return o;let a=null;const l=function(t,e){const{nodeName:n}=t,i=e._htmlConversions.get(n.toLowerCase());let r=null;if(void 0!==i)for(const s of i){const e=s(t);null!==e&&(null===r||(r.priority||0)<=(e.priority||0))&&(r=e)}return null!==r?r.conversion:null}(t,e),c=l?l(t):null;let u=null;if(null!==c){u=c.after;const e=c.node;if(a=Array.isArray(e)?e[e.length-1]:e,null!==a){for(const[,t]of r)if(a=t(a,s),!a)break;a&&o.push(...Array.isArray(e)?e:[a])}null!=c.forChild&&r.set(t.nodeName,c.forChild)}const h=t.childNodes;let d=[];const f=(null==a||!_A(a))&&(null!=a&&rM(a)||i);for(let g=0;g<h.length;g++)d.push(...HP(h[g],e,n,f,new Map(r),a));return null!=u&&(d=u(d)),AA(t)&&(d=function(t,e,n){const i=t.style.textAlign,r=[];let s=[];for(let o=0;o<e.length;o++){const t=e[o];if(rM(t))i&&!t.getFormat()&&t.setFormat(i),r.push(t);else if(s.push(t),o===e.length-1||o<e.length-1&&rM(e[o+1])){const t=n();t.setFormat(i),t.append(...s),r.push(t),s=[]}}return r}(t,d,f?()=>{const t=new nC;return n.push(t),t}:sC)),null==a?d.length>0?o=o.concat(d):AA(t)&&(null!=(p=t).nextSibling&&null!=p.previousSibling&&CA(p.nextSibling)&&CA(p.previousSibling))&&(o=o.concat(_T())):XM(a)&&a.append(...d),o;var p}function VP(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function WP(t,e,n){const i=t.getData("application/x-lexical-editor");if(i)try{const t=JSON.parse(i);if(t.namespace===n._config.namespace&&Array.isArray(t.nodes))return GP(n,function(t){const e=[];for(let n=0;n<t.length;n++){const i=kM(t[n]);IT(i)&&IR(i),e.push(i)}return e}(t.nodes),e)}catch(l){}const r=t.getData("text/html"),s=t.getData("text/plain");if(r&&s!==r)try{return GP(n,function(t,e){const n=MC(e)?e.body.childNodes:e.childNodes;let i=[];const r=[];for(const s of n)if(!BP.has(s.nodeName)){const e=HP(s,t,r,!1);null!==e&&(i=i.concat(e))}return function(t){for(const e of t)e.getNextSibling()instanceof nC&&e.insertAfter(_T());for(const e of t){const t=e.getChildren();for(const n of t)e.insertBefore(n);e.remove()}}(r),i}(n,(new DOMParser).parseFromString((o=r,window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:t=>t}).createHTML(o):o),"text/html")),e)}catch(l){}var o;const a=s||t.getData("text/uri-list");if(null!=a)if(XT(e)){const t=a.split(/(\r?\n|\t)/);""===t[t.length-1]&&t.pop();for(let e=0;e<t.length;e++){const n=cM();if(XT(n)){const i=t[e];"\n"===i||"\r\n"===i?n.insertParagraph():"\t"===i?n.insertNodes([zT()]):n.insertText(i)}}}else e.insertRawText(a)}function GP(t,e,n){t.dispatchCommand(Hw,{nodes:e,selection:n})||(n.insertNodes(e),function(t){if(XT(t)&&t.isCollapsed()){let e=null;const n=mR(t.anchor,"previous");if(n)if(KA(n))e=n.origin;else{const t=cR(n,rR(BC(),"next").getFlipped());for(const n of t){if(IT(n.origin)){e=n.origin;break}if(XM(n.origin)&&!n.origin.isInline())break}}if(e&&IT(e)){const n=e.getFormat(),i=e.getStyle();t.format===n&&t.style===i||(t.format=n,t.style=i,t.dirty=!0)}}}(n))}function jP(t,e,n,i=[]){let r=null===e||n.isSelected(e);const s=XM(n)&&n.excludeFromCopy("html");let o=n;null!==e&&IT(o)&&(o=kR(e,o,"clone"));const a=XM(o)?o.getChildren():[],l=function(t){const e=t.exportJSON(),n=t.constructor;if(e.type!==n.getType()&&VP(58,n.name),XM(t)){const t=e.children;Array.isArray(t)||VP(59,n.name)}return e}(o);IT(o)&&0===o.getTextContentSize()&&(r=!1);for(let c=0;c<a.length;c++){const i=a[c],s=jP(t,e,i,l.children);!r&&XM(n)&&s&&n.extractWithChild(i,e,"clone")&&(r=!0)}if(r&&!s)i.push(l);else if(Array.isArray(l.children))for(let c=0;c<l.children.length;c++){const t=l.children[c];i.push(t)}return r}let XP=null;async function qP(t,e,n){if(null!==XP)return!1;if(null!==e)return new Promise((i,r)=>{t.update(()=>{i(KP(t,e,n))})});const i=t.getRootElement(),r=t._window||window,s=r.document,o=SA(r);if(null===i||null===o)return!1;const a=s.createElement("span");a.style.cssText="position: fixed; top: -1000px;",a.append(s.createTextNode("#")),i.append(a);const l=new Range;return l.setStart(a,0),l.setEnd(a,1),o.removeAllRanges(),o.addRange(l),new Promise((e,i)=>{const o=t.registerCommand(bE,i=>(JR(i,ClipboardEvent)&&(o(),null!==XP&&(r.clearTimeout(XP),XP=null),e(KP(t,i,n))),!0),4);XP=r.setTimeout(()=>{o(),XP=null,e(!1)},50),s.execCommand("copy"),a.remove()})}function KP(t,e,n){if(void 0===n){const e=SA(t._window),i=cM();if(!i||i.isCollapsed())return!1;if(!e)return!1;const r=e.anchorNode,s=e.focusNode;if(null!==r&&null!==s&&!yC(t,r,s))return!1;n=function(t=cM()){const e={"text/plain":t?t.getTextContent():""};if(t){const n=PA();for(const[i,r]of $P){const s=r(n,t);null!==s&&(e[i]=s)}}return e}(i)}e.preventDefault();const i=e.clipboardData;return null!==i&&(function(t,e){for(const[n]of $P)void 0===e[n]&&t.setData(n,"");for(const n in e){const i=e[n];void 0!==i&&t.setData(n,i)}}(i,n),!0)}const $P=[["text/html",function(t,e=cM()){return null==e&&VP(166),XT(e)&&e.isCollapsed()||0===e.getNodes().length?"":function(t,e){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),i=BC().getChildren();for(let r=0;r<i.length;r++)zP(t,i[r],n,e);return n.innerHTML}(t,e)}],["application/x-lexical-editor",function(t,e=cM()){return null==e&&VP(166),XT(e)&&e.isCollapsed()||0===e.getNodes().length?null:JSON.stringify(function(t,e){const n=[],i=BC().getChildren();for(let r=0;r<i.length;r++)jP(t,e,i[r],n);return{namespace:t._config.namespace,nodes:n}}(t,e))}]];function YP(t,e){if(void 0!==document.caretRangeFromPoint){const n=document.caretRangeFromPoint(t,e);return null===n?null:{node:n.startContainer,offset:n.startOffset}}if("undefined"!==document.caretPositionFromPoint){const n=document.caretPositionFromPoint(t,e);return null===n?null:{node:n.offsetNode,offset:n.offset}}return null}const JP="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ZP=JP&&"documentMode"in document?document.documentMode:null,QP=JP&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),tN=!(!JP||!("InputEvent"in window)||ZP)&&"getTargetRanges"in new window.InputEvent("input"),eN=JP&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),nN=JP&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,iN=JP&&/^(?=.*Chrome).*/i.test(navigator.userAgent),rN=JP&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&QP&&!iN,sN=zw("DRAG_DROP_PASTE_FILE");class oN extends jM{static getType(){return"quote"}static clone(t){return new oN(t.__key)}createDOM(t){const e=document.createElement("blockquote");return XR(e,t.theme.quote),e}updateDOM(t,e){return!1}static importDOM(){return{blockquote:t=>({conversion:hN,priority:0})}}exportDOM(t){const{element:e}=super.exportDOM(t);if(EA(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();t&&(e.style.textAlign=t);const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){return aN().updateFromJSON(t)}insertNewAfter(t,e){const n=sC(),i=this.getDirection();return n.setDirection(i),this.insertAfter(n,e),n}collapseAtStart(){const t=sC();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}canMergeWhenEmpty(){return!0}}function aN(){return vA(new oN)}class lN extends jM{constructor(t,e){super(e),kt(this,"__tag"),this.__tag=t}static getType(){return"heading"}static clone(t){return new lN(t.__tag,t.__key)}getTag(){return this.__tag}setTag(t){const e=this.getWritable();return this.__tag=t,e}createDOM(t){const e=this.__tag,n=document.createElement(e),i=t.theme.heading;if(void 0!==i){XR(n,i[e])}return n}updateDOM(t,e,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:uN,priority:0}),h2:t=>({conversion:uN,priority:0}),h3:t=>({conversion:uN,priority:0}),h4:t=>({conversion:uN,priority:0}),h5:t=>({conversion:uN,priority:0}),h6:t=>({conversion:uN,priority:0}),p:t=>{const e=t.firstChild;return null!==e&&cN(e)?{conversion:()=>({node:null}),priority:3}:null},span:t=>cN(t)?{conversion:t=>({node:dN("h1")}),priority:3}:null}}exportDOM(t){const{element:e}=super.exportDOM(t);if(EA(e)){this.isEmpty()&&e.append(document.createElement("br"));const t=this.getFormatType();t&&(e.style.textAlign=t);const n=this.getDirection();n&&(e.dir=n)}return{element:e}}static importJSON(t){return dN(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,e=!0){const n=t?t.anchor.offset:0,i=this.getLastDescendant(),r=!i||t&&t.anchor.key===i.getKey()&&n===i.getTextContentSize()||!t?sC():dN(this.getTag()),s=this.getDirection();if(r.setDirection(s),this.insertAfter(r,e),0===n&&!this.isEmpty()&&t){const t=sC();t.select(),this.replace(t,!0)}return r}collapseAtStart(){const t=this.isEmpty()?sC():dN(this.getTag());return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}extractWithChild(){return!0}}function cN(t){return"span"===t.nodeName.toLowerCase()&&"26pt"===t.style.fontSize}function uN(t){const e=t.nodeName.toLowerCase();let n=null;return"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e||(n=dN(e),null!==t.style&&(kA(t,n),n.setFormat(t.style.textAlign))),{node:n}}function hN(t){const e=aN();return null!==t.style&&(e.setFormat(t.style.textAlign),kA(t,e)),{node:e}}function dN(t="h1"){return vA(new lN(t))}function fN(t){let e=null;if(JR(t,DragEvent)?e=t.dataTransfer:JR(t,ClipboardEvent)&&(e=t.clipboardData),null===e)return[!1,[],!1];const n=e.types,i=n.includes("Files"),r=n.includes("text/html")||n.includes("text/plain");return[i,Array.from(e.files),r]}function pN(t){const e=cM();if(!XT(e))return!1;const n=new Set,i=e.getNodes();for(let r=0;r<i.length;r++){const e=i[r],s=e.getKey();if(n.has(s))continue;const o=zA(e,t=>XM(t)&&!t.isInline());if(null===o)continue;const a=o.getKey();o.canIndent()&&!n.has(a)&&(n.add(a),t(o))}return n.size>0}function gN(t){return $M(FC(t))}function mN(t){for(const e of["lowercase","uppercase","capitalize"])t.hasFormat(e)&&t.toggleFormat(e)}function _N(t){return jR(t.registerCommand(Vw,t=>{const e=cM();return!!KT(e)&&(e.clear(),!0)},0),t.registerCommand(Ww,t=>{const e=cM();return XT(e)?(e.deleteCharacter(t),!0):!!KT(e)&&(e.deleteNodes(),!0)},0),t.registerCommand($w,t=>{const e=cM();return!!XT(e)&&(e.deleteWord(t),!0)},0),t.registerCommand(Yw,t=>{const e=cM();return!!XT(e)&&(e.deleteLine(t),!0)},0),t.registerCommand(Xw,e=>{const n=cM();if("string"==typeof e)null!==n&&n.insertText(e);else{if(null===n)return!1;const i=e.dataTransfer;if(null!=i)WP(i,n,t);else if(XT(n)){const t=e.data;return t&&n.insertText(t),!0}}return!0},0),t.registerCommand(Kw,()=>{const t=cM();return!!XT(t)&&(t.removeText(),!0)},0),t.registerCommand(Jw,t=>{const e=cM();return!!XT(e)&&(e.formatText(t),!0)},0),t.registerCommand(_E,t=>{const e=cM();if(!XT(e)&&!KT(e))return!1;const n=e.getNodes();for(const i of n){const e=zA(i,t=>XM(t)&&!t.isInline());null!==e&&e.setFormat(t)}return!0},0),t.registerCommand(Gw,t=>{const e=cM();return!!XT(e)&&(e.insertLineBreak(t),!0)},0),t.registerCommand(jw,()=>{const t=cM();return!!XT(t)&&(t.insertParagraph(),!0)},0),t.registerCommand(fE,()=>(mM([zT()]),!0),0),t.registerCommand(pE,()=>pN(t=>{const e=t.getIndent();t.setIndent(e+1)}),0),t.registerCommand(gE,()=>pN(t=>{const e=t.getIndent();e>0&&t.setIndent(Math.max(0,e-1))}),0),t.registerCommand(sE,t=>{const e=cM();if(KT(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectPrevious(),!0}else if(XT(e)){const n=oA(e.focus,!0);if(!t.shiftKey&&$M(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1},0),t.registerCommand(oE,t=>{const e=cM();if(KT(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),n[0].selectNext(0,0),!0}else if(XT(e)){if(function(t){const e=t.focus;return"root"===e.key&&e.offset===BC().getChildrenSize()}(e))return t.preventDefault(),!0;const n=oA(e.focus,!1);if(!t.shiftKey&&$M(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1},0),t.registerCommand(iE,t=>{const e=cM();if(KT(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),OR(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!XT(e))return!1;if(zR(e,!0)){const n=t.shiftKey;return t.preventDefault(),HR(e,n,!0),!0}return!1},0),t.registerCommand(eE,t=>{const e=cM();if(KT(e)){const n=e.getNodes();if(n.length>0)return t.preventDefault(),OR(n[0])?n[0].selectPrevious():n[0].selectNext(0,0),!0}if(!XT(e))return!1;const n=t.shiftKey;return!!zR(e,!1)&&(t.preventDefault(),HR(e,n,!1),!0)},0),t.registerCommand(cE,e=>{if(gN(e.target))return!1;const n=cM();if(XT(n)){if(function(t){if(!t.isCollapsed())return!1;const{anchor:e}=t;if(0!==e.offset)return!1;const n=e.getNode();if(JM(n))return!1;const i=YR(n);return i.getIndent()>0&&(i.is(n)||n.is(i.getFirstDescendant()))}(n))return e.preventDefault(),t.dispatchCommand(gE,void 0);if(nN&&"ko-KR"===navigator.language)return!1}else if(!KT(n))return!1;return e.preventDefault(),t.dispatchCommand(Ww,!0)},0),t.registerCommand(hE,e=>{if(gN(e.target))return!1;const n=cM();return!(!XT(n)&&!KT(n))&&(e.preventDefault(),t.dispatchCommand(Ww,!1))},0),t.registerCommand(aE,e=>{const n=cM();if(!XT(n))return!1;if(mN(n),null!==e){if((nN||eN||rN)&&tN)return!1;if(e.preventDefault(),e.shiftKey)return t.dispatchCommand(Gw,!1)}return t.dispatchCommand(jw,void 0)},0),t.registerCommand(uE,()=>!!XT(cM())&&(t.blur(),!0),0),t.registerCommand(mE,e=>{const[,n]=fN(e);if(n.length>0){const i=YP(e.clientX,e.clientY);if(null!==i){const{offset:e,node:r}=i,s=FC(r);if(null!==s){const t=oM();if(IT(s))t.anchor.set(s.getKey(),e,"text"),t.focus.set(s.getKey(),e,"text");else{const e=s.getParentOrThrow().getKey(),n=s.getIndexWithinParent()+1;t.anchor.set(e,n,"element"),t.focus.set(e,n,"element")}VC(sw(t))}t.dispatchCommand(sN,n)}return e.preventDefault(),!0}return!!XT(cM())},0),t.registerCommand(vE,t=>{const[e]=fN(t),n=cM();return!(e&&!XT(n))},0),t.registerCommand(yE,t=>{const[e]=fN(t),n=cM();if(e&&!XT(n))return!1;const i=YP(t.clientX,t.clientY);if(null!==i){$M(FC(i.node))&&t.preventDefault()}return!0},0),t.registerCommand(wE,()=>(function(t){const e=BC();if(XT(t)){const e=t.anchor,n=t.focus,i=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();return e.set(i.getKey(),0,"element"),n.set(i.getKey(),i.getChildrenSize(),"element"),sw(t),t}{const t=e.select(0,e.getChildrenSize());VC(sw(t))}}(),!0),0),t.registerCommand(bE,e=>(qP(t,JR(e,ClipboardEvent)?e:null),!0),0),t.registerCommand(SE,e=>(async function(t,e){await qP(e,JR(t,ClipboardEvent)?t:null),e.update(()=>{const t=cM();XT(t)?t.removeText():KT(t)&&t.getNodes().forEach(t=>t.remove())})}(e,t),!0),0),t.registerCommand(qw,e=>{const[,n,i]=fN(e);return n.length>0&&!i?(t.dispatchCommand(sN,n),!0):(!TA(e.target)||!vC(e.target))&&(null!==cM()&&(function(t,e){t.preventDefault(),e.update(()=>{const n=cM(),i=JR(t,InputEvent)||JR(t,KeyboardEvent)?null:t.clipboardData;null!=i&&null!==n&&WP(i,n,e)},{tag:"paste"})}(e,t),!0))},0),t.registerCommand(lE,t=>{const e=cM();return XT(e)&&mN(e),!1},0),t.registerCommand(dE,t=>{const e=cM();return XT(e)&&mN(e),!1},0))}function vN(t,e){let n=Date.now(),i=0;return(r,s,o,a,l,c)=>{const u=Date.now();if(c.has(cT))return i=0,n=u,2;const h=function(t,e,n,i,r){if(null===t||0===n.size&&0===i.size&&!r)return 0;const s=e._selection,o=t._selection;if(r)return 1;if(!(XT(s)&&XT(o)&&o.isCollapsed()&&s.isCollapsed()))return 0;const a=function(t,e,n){const i=t._nodeMap,r=[];for(const s of e){const t=i.get(s);void 0!==t&&r.push(t)}for(const[s,o]of n){if(!o)continue;const t=i.get(s);void 0===t||JM(t)||r.push(t)}return r}(e,n,i);if(0===a.length)return 0;if(a.length>1){const n=e._nodeMap,i=n.get(s.anchor.key),r=n.get(o.anchor.key);return i&&r&&!t._nodeMap.has(i.__key)&&IT(i)&&1===i.__text.length&&1===s.anchor.offset?2:0}const l=a[0],c=t._nodeMap.get(l.__key);if(!IT(c)||!IT(l)||c.__mode!==l.__mode)return 0;const u=c.__text,h=l.__text;if(u===h)return 0;const d=s.anchor,f=o.anchor;if(d.key!==f.key||"text"!==d.type)return 0;const p=d.offset,g=f.offset,m=h.length-u.length;return 1===m&&g===p-1?2:-1===m&&g===p+1?3:-1===m&&g===p?4:0}(r,s,a,l,t.isComposing()),d=(()=>{const d=null===o||o.editor===t,f=c.has("history-push");if(!f&&d&&c.has(uT))return 0;if(null===r)return 1;const p=s._selection;if(!(a.size>0||l.size>0))return null!==p?0:2;const g="number"==typeof e?e:e.peek();return!1===f&&0!==h&&h===i&&u<n+g&&d||1===a.size&&function(t,e,n){const i=e._nodeMap.get(t),r=n._nodeMap.get(t),s=e._selection,o=n._selection;return!(XT(s)&&XT(o)&&"element"===s.anchor.type&&"element"===s.focus.type&&"text"===o.anchor.type&&"text"===o.focus.type||!IT(i)||!IT(r)||i.__parent!==r.__parent)&&JSON.stringify(e.read(()=>i.exportJSON()))===JSON.stringify(n.read(()=>r.exportJSON()))}(Array.from(a)[0],r,s)?0:1})();return n=u,i=h,d}}function yN(t){t.undoStack=[],t.redoStack=[],t.current=null}function xN(t,e,n){const i=vN(t,n),r=jR(t.registerCommand(Zw,()=>(function(t,e){const n=e.redoStack,i=e.undoStack;if(0!==i.length){const r=e.current,s=i.pop();null!==r&&(n.push(r),t.dispatchCommand(ME,!0)),0===i.length&&t.dispatchCommand(CE,!1),e.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:cT})}}(t,e),!0),0),t.registerCommand(Qw,()=>(function(t,e){const n=e.redoStack,i=e.undoStack;if(0!==n.length){const r=e.current;null!==r&&(i.push(r),t.dispatchCommand(CE,!0));const s=n.pop();0===n.length&&t.dispatchCommand(ME,!1),e.current=s||null,s&&s.editor.setEditorState(s.editorState,{tag:cT})}}(t,e),!0),0),t.registerCommand(EE,()=>(yN(e),!1),0),t.registerCommand(TE,()=>(yN(e),t.dispatchCommand(ME,!1),t.dispatchCommand(CE,!1),!0),0),t.registerUpdateListener(({editorState:n,prevEditorState:r,dirtyLeaves:s,dirtyElements:o,tags:a})=>{const l=e.current,c=e.redoStack,u=e.undoStack,h=null===l?null:l.editorState;if(null!==l&&n===h)return;const d=i(r,n,l,s,o,a);if(1===d)0!==c.length&&(e.redoStack=[],t.dispatchCommand(ME,!1)),null!==l&&(u.push({...l}),t.dispatchCommand(CE,!0));else if(2===d)return;e.current={editor:t,editorState:n}}));return r}function bN(){return{current:null,redoStack:[],undoStack:[]}}function SN(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function wN(t){let e=1,n=t.getParent();for(;null!=n;){if(HN(n)){const t=n.getParent();if(KN(t)){e++,n=t.getParent();continue}SN(40)}return e}return e}function EN(t){let e=t.getParent();KN(e)||SN(40);let n=e;for(;null!==n;)n=n.getParent(),KN(n)&&(e=n);return e}function TN(t){let e=[];const n=t.getChildren().filter(HN);for(let i=0;i<n.length;i++){const t=n[i],r=t.getFirstChild();KN(r)?e=e.concat(TN(r)):e.push(t)}return e}function MN(t){return HN(t)&&KN(t.getFirstChild())}function CN(t){return BN().append(t)}function AN(t,e){return HN(t)&&(0===e.length||1===e.length&&t.is(e[0])&&0===t.getChildrenSize())}function RN(t){const e=cM();if(null!==e){let n=e.getNodes();if(XT(e)){const i=e.getStartEndPoints();null===i&&SN(143);const[r]=i,s=r.getNode(),o=s.getParent();if(_A(s)){const t=s.getFirstChild();if(t)n=t.selectStart().getNodes();else{const t=sC();s.append(t),n=t.select().getNodes()}}else if(AN(s,n)){const e=qN(t);if(_A(o)){s.replace(e);const t=BN();XM(s)&&(t.setFormat(s.getFormatType()),t.setIndent(s.getIndent())),e.append(t)}else if(HN(s)){const t=s.getParentOrThrow();PN(e,t.getChildren()),t.replace(e)}return}}const i=new Set;for(let e=0;e<n.length;e++){const r=n[e];if(XM(r)&&r.isEmpty()&&!HN(r)&&!i.has(r.getKey())){NN(r,t);continue}let s=RC(r)?r.getParent():HN(r)&&r.isEmpty()?r:null;for(;null!=s;){const e=s.getKey();if(KN(s)){if(!i.has(e)){const n=qN(t);PN(n,s.getChildren()),s.replace(n),i.add(e)}break}{const n=s.getParent();if(_A(n)&&!i.has(e)){i.add(e),NN(s,t);break}s=n}}}}}function PN(t,e){t.splice(t.getChildrenSize(),0,e)}function NN(t,e){if(KN(t))return t;const n=t.getPreviousSibling(),i=t.getNextSibling(),r=BN();let s;if(PN(r,t.getChildren()),KN(n)&&e===n.getListType())n.append(r),KN(i)&&e===i.getListType()&&(PN(n,i.getChildren()),i.remove()),s=n;else if(KN(i)&&e===i.getListType())i.getFirstChildOrThrow().insertBefore(r),s=i;else{const n=qN(e);n.append(r),t.replace(n),s=n}return r.setFormat(t.getFormatType()),r.setIndent(t.getIndent()),t.remove(),s}function DN(t,e){const n=t.getLastChild(),i=e.getFirstChild();n&&i&&MN(n)&&MN(i)&&(DN(n.getFirstChild(),i.getFirstChild()),i.remove());const r=e.getChildren();r.length>0&&t.append(...r),e.remove()}function LN(t){const e="check"!==t.getListType();let n=t.getStart();for(const i of t.getChildren())HN(i)&&(i.getValue()!==n&&i.setValue(n),e&&null!=i.getLatest().__checked&&i.setChecked(void 0),KN(i.getFirstChild())||n++)}function ON(t){const e=new Set;if(MN(t)||e.has(t.getKey()))return;const n=t.getParent(),i=t.getNextSibling(),r=t.getPreviousSibling();if(MN(i)&&MN(r)){const n=r.getFirstChild();if(KN(n)){n.append(t);const r=i.getFirstChild();KN(r)&&(PN(n,r.getChildren()),i.remove(),e.add(i.getKey()))}}else if(MN(i)){const e=i.getFirstChild();if(KN(e)){const n=e.getFirstChild();null!==n&&n.insertBefore(t)}}else if(MN(r)){const e=r.getFirstChild();KN(e)&&e.append(t)}else if(KN(n)){const e=BN().setTextFormat(t.getTextFormat()).setTextStyle(t.getTextStyle()),s=qN(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());e.append(s),s.append(t),r?r.insertAfter(e):i?i.insertBefore(e):n.append(e)}}function kN(t){if(MN(t))return;const e=t.getParent(),n=e?e.getParent():void 0;if(KN(n?n.getParent():void 0)&&HN(n)&&KN(e)){const i=e?e.getFirstChild():void 0,r=e?e.getLastChild():void 0;if(t.is(i))n.insertBefore(t),e.isEmpty()&&n.remove();else if(t.is(r))n.insertAfter(t),e.isEmpty()&&n.remove();else{const i=e.getListType(),r=BN(),s=qN(i);r.append(s),t.getPreviousSiblings().forEach(t=>s.append(t));const o=BN(),a=qN(i);o.append(a),PN(a,t.getNextSiblings()),n.insertBefore(r),n.insertAfter(o),n.replace(t)}}}function IN(...t){const e=[];for(const n of t)if(n&&"string"==typeof n)for(const[t]of n.matchAll(/\S+/g))e.push(t);return e}let FN=class extends jM{constructor(t=1,e=void 0,n){super(n),kt(this,"__value"),kt(this,"__checked"),this.__value=void 0===t?1:t,this.__checked=e}$config(){return this.config("listitem",{$transform:t=>{if(null==t.__checked)return;const e=t.getParent();KN(e)&&"check"!==e.getListType()&&null!=t.getChecked()&&t.setChecked(void 0)},extends:jM,importDOM:{li:()=>({conversion:UN,priority:0})}})}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const e=document.createElement("li");return this.updateListItemDOM(null,e,t),e}updateListItemDOM(t,e,n){!function(t,e,n){const i=e.getParent();!KN(i)||"check"!==i.getListType()||KN(e.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),n&&e.__checked===n.__checked||t.setAttribute("aria-checked",e.getChecked()?"true":"false"))}(e,this,t),e.value=this.__value,function(t,e,n){const i=[],r=[],s=e.list,o=s?s.listitem:void 0;let a;if(s&&s.nested&&(a=s.nested.listitem),void 0!==o&&i.push(...IN(o)),s){const t=n.getParent(),e=KN(t)&&"check"===t.getListType(),o=n.getChecked();e&&!o||r.push(s.listitemUnchecked),e&&o||r.push(s.listitemChecked),e&&i.push(o?s.listitemChecked:s.listitemUnchecked)}if(void 0!==a){const t=IN(a);n.getChildren().some(t=>KN(t))?i.push(...t):r.push(...t)}r.length>0&&qR(t,...r),i.length>0&&XR(t,...i)}(e,n.theme,this);const i=t?t.__style:"",r=this.__style;i!==r&&(""===r?e.removeAttribute("style"):e.style.cssText=r),function(t,e,n){const i=NR(e.__textStyle);for(const r in i)t.style.setProperty(`--listitem-marker-${r}`,i[r]);if(n)for(const r in NR(n.__textStyle))r in i||t.style.removeProperty(`--listitem-marker-${r}`)}(e,this,t)}updateDOM(t,e,n){const i=e;return this.updateListItemDOM(t,i,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const e=this.createDOM(t._config),n=this.getFormatType();n&&(e.style.textAlign=n);const i=this.getDirection();return i&&(e.dir=i),{element:e}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let e=0;e<t.length;e++){const n=t[e];if(XM(n)&&this.canMergeWith(n)){const t=n.getChildren();this.append(...t),n.remove()}else super.append(n)}return this}replace(t,e){if(HN(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!KN(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const e=qN(n.getListType());let i=this.getNextSibling();for(;i;){const t=i;i=i.getNextSibling(),e.append(t)}n.insertAfter(t),t.insertAfter(e)}return e&&(XM(t)||SN(139),this.getChildren().forEach(e=>{t.append(e)})),this.remove(),0===n.getChildrenSize()&&n.remove(),t}insertAfter(t,e=!0){const n=this.getParentOrThrow();if(KN(n)||SN(39),HN(t))return super.insertAfter(t,e);const i=this.getNextSiblings();if(n.insertAfter(t,e),0!==i.length){const r=qN(n.getListType());i.forEach(t=>r.append(t)),t.insertAfter(r,e)}return t}remove(t){const e=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),e&&n&&MN(e)&&MN(n)&&(DN(e.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,e=!0){const n=BN().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,e),n}collapseAtStart(t){const e=sC();this.getChildren().forEach(t=>e.append(t));const n=this.getParentOrThrow(),i=n.getParentOrThrow(),r=HN(i);if(1===n.getChildrenSize())if(r)n.remove(),i.select();else{n.insertBefore(e),n.remove();const i=t.anchor,r=t.focus,s=e.getKey();"element"===i.type&&i.getNode().is(this)&&i.set(s,i.offset,"element"),"element"===r.type&&r.getNode().is(this)&&r.set(s,r.offset,"element")}else n.insertBefore(e),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const e=this.getWritable();return e.__value=t,e}getChecked(){const t=this.getLatest();let e;const n=this.getParent();return KN(n)&&(e=n.getListType()),"check"===e?Boolean(t.__checked):void 0}setChecked(t){const e=this.getWritable();return e.__checked=t,e}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(null===t||!this.isAttached())return this.getLatest().__indent;let e=t.getParentOrThrow(),n=0;for(;HN(e);)e=e.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){"number"!=typeof t&&SN(117),(t=Math.floor(t))>=0||SN(199);let e=this.getIndent();for(;e!==t;)e<t?(ON(this),e++):(kN(this),e--);return this}canInsertAfter(t){return HN(t)}canReplaceWith(t){return HN(t)}canMergeWith(t){return HN(t)||oC(t)}extractWithChild(t,e){if(!XT(e))return!1;const n=e.anchor.getNode(),i=e.focus.getNode();return this.isParentOf(n)&&this.isParentOf(i)&&this.getTextContent().length===e.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return qN("bullet")}canMergeWhenEmpty(){return!0}};function UN(t){if(t.classList.contains("task-list-item"))for(const n of t.children)if("INPUT"===n.tagName)return zN(n);const e=t.getAttribute("aria-checked");return{node:BN("true"===e||"false"!==e&&void 0)}}function zN(t){return"checkbox"!==t.getAttribute("type")?{node:null}:{node:BN(t.hasAttribute("checked"))}}function BN(t){return vA(new FN(void 0,t))}function HN(t){return t instanceof FN}class VN extends jM{constructor(t="number",e=1,n){super(n),kt(this,"__tag"),kt(this,"__start"),kt(this,"__listType");const i=XN[t]||t;this.__listType=i,this.__tag="number"===i?"ol":"ul",this.__start=e}$config(){return this.config("list",{$transform:t=>{!function(t){const e=t.getNextSibling();KN(e)&&t.getListType()===e.getListType()&&DN(t,e)}(t),LN(t)},extends:jM,importDOM:{ol:()=>({conversion:jN,priority:0}),ul:()=>({conversion:jN,priority:0})}})}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const e=this.getWritable();return e.__listType=t,e.__tag="number"===t?"ol":"ul",e}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const e=this.getWritable();return e.__start=t,e}createDOM(t,e){const n=this.__tag,i=document.createElement(n);return 1!==this.__start&&i.setAttribute("start",String(this.__start)),i.__lexicalListType=this.__listType,WN(i,t.theme,this),i}updateDOM(t,e,n){return t.__tag!==this.__tag||t.__listType!==this.__listType||(WN(e,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const e=this.createDOM(t._config,t);return EA(e)&&(1!==this.__start&&e.setAttribute("start",String(this.__start)),"check"===this.__listType&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,e,n){let i=n;for(let r=0;r<n.length;r++){const t=n[r];HN(t)||(i===n&&(i=[...n]),i[r]=BN().append(!XM(t)||KN(t)||t.isInline()?t:kT(t.getTextContent())))}return super.splice(t,e,i)}extractWithChild(t){return HN(t)}}function WN(t,e,n){const i=[],r=[],s=e.list;if(void 0!==s){const t=s[`${n.__tag}Depth`]||[],e=wN(n)-1,o=e%t.length,a=t[o],l=s[n.__tag];let c;const u=s.nested,h=s.checklist;if(void 0!==u&&u.list&&(c=u.list),void 0!==l&&i.push(l),void 0!==h&&"check"===n.__listType&&i.push(h),void 0!==a){i.push(...IN(a));for(let e=0;e<t.length;e++)e!==o&&r.push(n.__tag+e)}if(void 0!==c){const t=IN(c);e>1?i.push(...t):r.push(...t)}}r.length>0&&qR(t,...r),i.length>0&&XR(t,...i)}function GN(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n];if(HN(i)){e.push(i);const t=i.getChildren();t.length>1&&t.forEach(t=>{KN(t)&&e.push(CN(t))})}else e.push(CN(i))}return e}function jN(t){const e=t.nodeName.toLowerCase();let n=null;return"ol"===e?n=qN("number",t.start):"ul"===e&&(n=function(t){if("check"===t.getAttribute("__lexicallisttype")||t.classList.contains("contains-task-list"))return!0;for(const e of t.childNodes)if(EA(e)&&e.hasAttribute("aria-checked"))return!0;return!1}(t)?qN("check"):qN("bullet")),{after:GN,node:n}}const XN={ol:"number",ul:"bullet"};function qN(t="number",e=1){return vA(new VN(t,e))}function KN(t){return t instanceof VN}const $N=zw("UPDATE_LIST_START_COMMAND"),YN=zw("INSERT_UNORDERED_LIST_COMMAND"),JN=zw("INSERT_ORDERED_LIST_COMMAND"),ZN=zw("REMOVE_LIST_COMMAND");function QN(t){return jR(t.registerCommand(JN,()=>(RN("number"),!0),1),t.registerCommand($N,t=>{const{listNodeKey:e,newStart:n}=t,i=OC(e);return!!KN(i)&&("number"===i.getListType()&&(i.setStart(n),LN(i)),!0)},1),t.registerCommand(YN,()=>(RN("bullet"),!0),1),t.registerCommand(ZN,()=>(function(){const t=cM();if(XT(t)){const e=new Set,n=t.getNodes(),i=t.anchor.getNode();if(AN(i,n))e.add(EN(i));else for(let t=0;t<n.length;t++){const i=n[t];if(RC(i)){const t=$R(i,FN);null!=t&&e.add(EN(t))}}for(const r of e){let e=r;const n=TN(r);for(const i of n){const n=sC().setTextStyle(t.style).setTextFormat(t.format);PN(n,i.getChildren()),e.insertAfter(n),e=n,i.__key===t.anchor.key&&_R(t.anchor,wR(rR(n,"next"))),i.__key===t.focus.key&&_R(t.focus,wR(rR(n,"next"))),i.remove()}r.remove()}}}(),!0),1),t.registerCommand(jw,()=>function(){const t=cM();if(!XT(t)||!t.isCollapsed())return!1;const e=t.anchor.getNode();if(!HN(e)||0!==e.getChildrenSize())return!1;const n=EN(e),i=e.getParent();KN(i)||SN(40);const r=i.getParent();let s;if(_A(r))s=sC(),n.insertAfter(s);else{if(!HN(r))return!1;s=BN(),r.insertAfter(s)}s.setTextStyle(t.style).setTextFormat(t.format).select();const o=e.getNextSiblings();if(o.length>0){const t=qN(i.getListType());if(HN(s)){const e=BN();e.append(t),s.insertAfter(e)}else s.insertAfter(t);t.append(...o)}return function(t){let e=t;for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){const t=e.getParent();if(null==t||!HN(t)&&!KN(t))break;e=t}e.remove()}(e),!0}(),1),t.registerNodeTransform(FN,t=>{const e=t.getFirstChild();if(e){if(IT(e)){const n=e.getStyle(),i=e.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==i&&t.setTextFormat(i)}}else{const e=cM();XT(e)&&(e.style!==t.getTextStyle()||e.format!==t.getTextFormat())&&e.isCollapsed()&&t.is(e.anchor.getNode())&&t.setTextStyle(e.style).setTextFormat(e.format)}}),t.registerNodeTransform(MT,t=>{const e=t.getParent();if(HN(e)&&t.is(e.getFirstChild())){const n=t.getStyle(),i=t.getFormat();n===e.getTextStyle()&&i===e.getTextFormat()||e.setTextStyle(n).setTextFormat(i)}}))}function tD(t){const e=t=>{const e=t.getParent();if(KN(t.getFirstChild())||!KN(e))return;const n=zA(t,t=>HN(t)&&KN(t.getParent())&&HN(t.getPreviousSibling()));if(null===n&&t.getIndent()>0)t.setIndent(0);else if(HN(n)){const i=n.getPreviousSibling();if(HN(i)){const n=function(t){let e=t,n=e.getFirstChild();for(;KN(n);){const t=n.getLastChild();if(!HN(t))break;e=t,n=e.getFirstChild()}return e}(i).getParent();if(KN(n)){const i=wN(n);i+1<wN(e)&&t.setIndent(i)}}}};return t.registerNodeTransform(VN,t=>{const n=[t];for(;n.length>0;){const t=n.shift();if(KN(t))for(const i of t.getChildren())if(HN(i)){e(i);const t=i.getFirstChild();KN(t)&&n.push(t)}}})}const eD=new Set(["http:","https:","mailto:","sms:","tel:"]);let nD=class t extends jM{constructor(t="",e={},n){super(n),kt(this,"__url"),kt(this,"__target"),kt(this,"__rel"),kt(this,"__title");const{target:i=null,rel:r=null,title:s=null}=e;this.__url=t,this.__target=i,this.__rel=r,this.__title=s}static getType(){return"link"}static clone(e){return new t(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}createDOM(t){const e=document.createElement("a");return this.updateLinkDOM(null,e,t),XR(e,t.theme.link),e}updateLinkDOM(t,e,n){if(wA(e)){t&&t.__url===this.__url||(e.href=this.sanitizeUrl(this.__url));for(const n of["target","rel","title"]){const i=`__${n}`,r=this[i];t&&t[i]===r||(r?e[n]=r:e.removeAttribute(n))}}}updateDOM(t,e,n){return this.updateLinkDOM(t,e,n),!1}static importDOM(){return{a:t=>({conversion:iD,priority:1})}}static importJSON(t){return rD().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=fD(t);try{const e=new URL(fD(t));if(!eD.has(e.protocol))return"about:blank"}catch(e){return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const e=this.getWritable();return e.__url=t,e}getTarget(){return this.getLatest().__target}setTarget(t){const e=this.getWritable();return e.__target=t,e}getRel(){return this.getLatest().__rel}setRel(t){const e=this.getWritable();return e.__rel=t,e}getTitle(){return this.getLatest().__title}setTitle(t){const e=this.getWritable();return e.__title=t,e}insertNewAfter(t,e=!0){const n=rD(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,e),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,e,n){if(!XT(e))return!1;const i=e.anchor.getNode(),r=e.focus.getNode();return this.isParentOf(i)&&this.isParentOf(r)&&e.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function iD(t){let e=null;if(wA(t)){const n=t.textContent;(null!==n&&""!==n||t.children.length>0)&&(e=rD(t.getAttribute("href")||"",{rel:t.getAttribute("rel"),target:t.getAttribute("target"),title:t.getAttribute("title")}))}return{node:e}}function rD(t="",e){return vA(new nD(t,e))}function sD(t){return t instanceof nD}class oD extends nD{constructor(t="",e={},n){super(t,e,n),kt(this,"__isUnlinked"),this.__isUnlinked=void 0!==e.isUnlinked&&null!==e.isUnlinked&&e.isUnlinked}static getType(){return"autolink"}static clone(t){return new oD(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const e=this.getWritable();return e.__isUnlinked=t,e}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,e,n){return super.updateDOM(t,e,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return aD().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,e=!0){const n=this.getParentOrThrow().insertNewAfter(t,e);if(XM(n)){const t=aD(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(t),t}return null}}function aD(t="",e){return vA(new oD(t,e))}function lD(t){return t instanceof oD}const cD=zw("TOGGLE_LINK_COMMAND");function uD(t,e){if("element"===t.type){const n=t.getNode();return XM(n)||function(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[t.offset+e]||null}return null}function hD(t,e={}){let n;if(t&&"object"==typeof t){const{url:i,...r}=t;n=i,e={...r,...e}}else n=t;const{target:i,title:r}=e,s=void 0===e.rel?"noreferrer":e.rel,o=cM();if(null===o||!XT(o)&&!KT(o))return;if(KT(o)){const t=o.getNodes();if(0===t.length)return;return void t.forEach(t=>{if(null===n){const e=zA(t,t=>!lD(t)&&sD(t));e&&(e.insertBefore(t),0===e.getChildren().length&&e.remove())}else{const e=zA(t,t=>!lD(t)&&sD(t));if(e)e.setURL(n),void 0!==i&&e.setTarget(i),void 0!==s&&e.setRel(s);else{const e=rD(n,{rel:s,target:i});t.insertBefore(e),e.append(t)}}})}const a=o.extract();if(null===n)return void a.forEach(t=>{const e=zA(t,t=>!lD(t)&&sD(t));if(e){const t=e.getChildren();for(let n=0;n<t.length;n++)e.insertBefore(t[n]);e.remove()}});const l=new Set,c=t=>{l.has(t.getKey())||(l.add(t.getKey()),t.setURL(n),void 0!==i&&t.setTarget(i),void 0!==s&&t.setRel(s),void 0!==r&&t.setTitle(r))};if(1===a.length){const t=a[0],e=zA(t,sD);if(null!==e)return c(e)}!function(t){const e=cM();if(!XT(e))return t();const n=sw(e),i=n.isBackward(),r=uD(n.anchor,i?-1:0),s=uD(n.focus,i?0:-1);if(t(),r||s){const t=cM();if(XT(t)){const e=t.clone();if(r){const t=r.getParent();t&&e.anchor.set(t.getKey(),r.getIndexWithinParent()+(i?1:0),"element")}if(s){const t=s.getParent();t&&e.focus.set(t.getKey(),s.getIndexWithinParent()+(i?0:1),"element")}VC(sw(e))}}}(()=>{let t=null;for(const e of a){if(!e.isAttached())continue;const o=zA(e,sD);if(o){c(o);continue}if(XM(e)){if(!e.isInline())continue;if(sD(e)){if(!(lD(e)||null!==t&&t.getParentOrThrow().isParentOf(e))){c(e),t=e;continue}for(const t of e.getChildren())e.insertBefore(t);e.remove();continue}}const a=e.getPreviousSibling();sD(a)&&a.is(t)?a.append(e):(t=rD(n,{rel:s,target:i,title:r}),e.insertAfter(t),t.append(e))}})}const dD=/^\+?[0-9\s()-]{5,}$/;function fD(t){return t.match(/^[a-z][a-z0-9+.-]*:/i)||t.match(/^[/#.]/)?t:t.includes("@")?`mailto:${t}`:dD.test(t)?`tel:${t}`:`https://${t}`}function pD(t,e){return jR(yP(()=>t.registerCommand(cD,t=>{const n=e.validateUrl.peek(),i=e.attributes.peek();if(null===t)return hD(null),!0;if("string"==typeof t)return!(void 0!==n&&!n(t)||(hD(t,i),0));{const{url:e,target:n,rel:r,title:s}=t;return hD(e,{...i,rel:r,target:n,title:s}),!0}},1)),yP(()=>{const n=e.validateUrl.value;if(!n)return;const i=e.attributes.value;return t.registerCommand(qw,e=>{const r=cM();if(!XT(r)||r.isCollapsed()||!JR(e,ClipboardEvent))return!1;if(null===e.clipboardData)return!1;const s=e.clipboardData.getData("text");return!!n(s)&&!r.getNodes().some(t=>XM(t))&&(t.dispatchCommand(cD,{...i,url:s}),e.preventDefault(),!0)},1)}))}const gD=/^(\d+(?:\.\d+)?)px$/,mD=3,_D=0,vD=1;class yD extends jM{constructor(t=_D,e=1,n,i){super(i),kt(this,"__colSpan"),kt(this,"__rowSpan"),kt(this,"__headerState"),kt(this,"__width"),kt(this,"__backgroundColor"),kt(this,"__verticalAlign"),this.__colSpan=e,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}static getType(){return"tablecell"}static clone(t){return new yD(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:bD,priority:0}),th:t=>({conversion:bD,priority:0})}}static importJSON(t){return SD().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}createDOM(t){const e=document.createElement(this.getTag());return this.__width&&(e.style.width=`${this.__width}px`),this.__colSpan>1&&(e.colSpan=this.__colSpan),this.__rowSpan>1&&(e.rowSpan=this.__rowSpan),null!==this.__backgroundColor&&(e.style.backgroundColor=this.__backgroundColor),xD(this.__verticalAlign)&&(e.style.verticalAlign=this.__verticalAlign),XR(e,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),e}exportDOM(t){const e=super.exportDOM(t);if(EA(e.element)){const t=e.element;t.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),t.style.border="1px solid black",this.__colSpan>1&&(t.colSpan=this.__colSpan),this.__rowSpan>1&&(t.rowSpan=this.__rowSpan),t.style.width=`${this.getWidth()||75}px`,t.style.verticalAlign=this.getVerticalAlign()||"top",t.style.textAlign="start",null===this.__backgroundColor&&this.hasHeader()&&(t.style.backgroundColor="#f2f3f5")}return e}exportJSON(){return{...super.exportJSON(),...xD(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const e=this.getWritable();return e.__colSpan=t,e}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const e=this.getWritable();return e.__rowSpan=t,e}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,e=mD){const n=this.getWritable();return n.__headerState=t&e|n.__headerState&~e,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const e=this.getWritable();return e.__width=t,e}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const e=this.getWritable();return e.__backgroundColor=t,e}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const e=this.getWritable();return e.__verticalAlign=t||void 0,e}toggleHeaderStyle(t){const e=this.getWritable();return(e.__headerState&t)===t?e.__headerState-=t:e.__headerState+=t,e}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==_D}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function xD(t){return"middle"===t||"bottom"===t}function bD(t){const e=t,n=t.nodeName.toLowerCase();let i;gD.test(e.style.width)&&(i=parseFloat(e.style.width));const r=SD("th"===n?vD:_D,e.colSpan,i);r.__rowSpan=e.rowSpan;const s=e.style.backgroundColor;""!==s&&(r.__backgroundColor=s);const o=e.style.verticalAlign;xD(o)&&(r.__verticalAlign=o);const a=e.style,l=(a&&a.textDecoration||"").split(" "),c="700"===a.fontWeight||"bold"===a.fontWeight,u=l.includes("line-through"),h="italic"===a.fontStyle,d=l.includes("underline");return{after:t=>{const e=[];let n=null;const i=()=>{if(n){const t=n.getFirstChild();vT(t)&&1===n.getChildrenSize()&&t.remove()}};for(const r of t)mA(r)||IT(r)||vT(r)?(IT(r)&&(c&&r.toggleFormat("bold"),u&&r.toggleFormat("strikethrough"),h&&r.toggleFormat("italic"),d&&r.toggleFormat("underline")),n?n.append(r):(n=sC().append(r),e.push(n))):(e.push(r),i(),n=null);return i(),0===e.length&&e.push(sC()),e},node:r}}function SD(t=_D,e=1,n){return vA(new yD(t,e,n))}function wD(t){return t instanceof yD}function ED(t,...e){const n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",t);for(const r of e)i.append("v",r);throw n.search=i.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class TD extends jM{constructor(t,e){super(e),kt(this,"__height"),this.__height=t}static getType(){return"tablerow"}static clone(t){return new TD(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:MD,priority:0})}}static importJSON(t){return CD().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...void 0===t?void 0:{height:t}}}createDOM(t){const e=document.createElement("tr");return this.__height&&(e.style.height=`${this.__height}px`),XR(e,t.theme.tableRow),e}extractWithChild(t,e,n){return"html"===n}isShadowRoot(){return!0}setHeight(t){const e=this.getWritable();return e.__height=t,e}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function MD(t){const e=t;let n;return gD.test(e.style.height)&&(n=parseFloat(e.style.height)),{after:t=>ZR(t,wD),node:CD(n)}}function CD(t){return vA(new TD(t))}function AD(t){return t instanceof TD}const RD="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,PD=RD&&"documentMode"in document?document.documentMode:null;function ND(t){return EA(t)&&"TABLE"===t.nodeName}function DD(t,e,n){return function(t,e){for(let n=e,i=null;null!==n;n=n.getParent()){if(t.is(n))return i;wD(n)&&(i=n)}return null}(t,FC(e,n))}function LD(t,e,n){if(!e.theme.tableAlignment)return;const i=[],r=[];for(const s of["center","right"]){const t=e.theme.tableAlignment[s];t&&(s===n?r:i).push(t)}qR(t,...i),XR(t,...r)}RD&&"InputEvent"in window&&!PD&&new window.InputEvent("input");const OD=new WeakSet;function kD(t=PA()){return OD.has(t)}class ID extends jM{constructor(t){super(t),kt(this,"__rowStriping"),kt(this,"__frozenColumnCount"),kt(this,"__frozenRowCount"),kt(this,"__colWidths"),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0,this.__colWidths=void 0}static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const e=this.getWritable();return e.__colWidths=t,e}static clone(t){return new ID(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:FD,priority:1})}}static importJSON(t){return UD().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,e,n){return"html"===n}getDOMSlot(t){const e=ND(t)?t:t.querySelector("table");return ND(e)||ED(229),super.getDOMSlot(t).withElement(e).withAfter(e.querySelector("colgroup"))}createDOM(t,e){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const i=document.createElement("colgroup");if(n.appendChild(i),function(t){t.__lexicalUnmanaged=!0}(i),XR(n,t.theme.table),this.updateTableElement(null,n,t),kD(e)){const e=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?XR(e,i):e.style.cssText="overflow-x: auto;",e.appendChild(n),this.updateTableWrapper(null,e,n,t),e}return n}updateTableWrapper(t,e,n,i){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&function(t,e,n,i){i>0?(XR(t,n.theme.tableFrozenColumn),e.setAttribute("data-lexical-frozen-column","true")):(qR(t,n.theme.tableFrozenColumn),e.removeAttribute("data-lexical-frozen-column"))}(e,n,i,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&function(t,e,n,i){i>0?(XR(t,n.theme.tableFrozenRow),e.setAttribute("data-lexical-frozen-row","true")):(qR(t,n.theme.tableFrozenRow),e.removeAttribute("data-lexical-frozen-row"))}(e,n,i,this.__frozenRowCount)}updateTableElement(t,e,n){this.__style!==(t?t.__style:"")&&(e.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&function(t,e,n){n?(XR(t,e.theme.tableRowStriping),t.setAttribute("data-lexical-row-striping","true")):(qR(t,e.theme.tableRowStriping),t.removeAttribute("data-lexical-row-striping"))}(e,n,this.__rowStriping),function(t,e,n,i){const r=t.querySelector("colgroup");if(!r)return;const s=[];for(let o=0;o<n;o++){const t=document.createElement("col"),e=i&&i[o];e&&(t.style.width=`${e}px`),s.push(t)}r.replaceChildren(...s)}(e,0,this.getColumnCount(),this.getColWidths()),LD(e,n,this.getFormatType())}updateDOM(t,e,n){const i=this.getDOMSlot(e).element;return e===i===kD()||(EA(r=e)&&"DIV"===r.nodeName&&this.updateTableWrapper(t,e,i,n),this.updateTableElement(t,i,n),!1);var r}exportDOM(t){const e=super.exportDOM(t),{element:n}=e;return{after:n=>{if(e.after&&(n=e.after(n)),!ND(n)&&EA(n)&&(n=n.querySelector("table")),!ND(n))return null;LD(n,t._config,this.getFormatType());const[i]=function(t,e,n){const i=[];let r=null,s=null;function o(t){let e=i[t];return void 0===e&&(i[t]=e=[]),e}const a=t.getChildren();for(let l=0;l<a.length;l++){const t=a[l];AD(t)||ED(209);const i=o(l);for(let c=t.getFirstChild(),u=0;null!=c;c=c.getNextSibling()){for(wD(c)||ED(147);void 0!==i[u];)u++;const t={cell:c,startColumn:u,startRow:l},{__rowSpan:h,__colSpan:d}=c;for(let e=0;e<h&&!(l+e>=a.length);e++){const n=o(l+e);for(let e=0;e<d;e++)n[u+e]=t}null!==e&&null===r&&e.is(c)&&(r=t),null!==n&&null===s&&n.is(c)&&(s=t)}}return[i,r,s]}(this,null,null),r=new Map;for(const t of i)for(const e of t){const t=e.cell.getKey();r.has(t)||r.set(t,{colSpan:e.cell.getColSpan(),startColumn:e.startColumn})}const s=new Set;for(const t of n.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const e=t.getAttribute("data-temporary-table-cell-lexical-key");if(e){const n=r.get(e);if(t.removeAttribute("data-temporary-table-cell-lexical-key"),n){r.delete(e);for(let t=0;t<n.colSpan;t++)s.add(t+n.startColumn)}}}const o=n.querySelector(":scope > colgroup");if(o){const t=Array.from(n.querySelectorAll(":scope > colgroup > col")).filter((t,e)=>s.has(e));o.replaceChildren(...t)}const a=n.querySelectorAll(":scope > tr");if(a.length>0){const t=document.createElement("tbody");for(const e of a)t.appendChild(e);n.append(t)}return n},element:!ND(n)&&EA(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,e){const{rows:n,domRows:i}=e;for(let r=0;r<n;r++){const e=i[r];if(null!=e)for(let n=0;n<e.length;n++){const i=e[n];if(null==i)continue;const{elem:s}=i,o=DD(this,s);if(null!==o&&t.is(o))return{x:n,y:r}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,e,n){const{domRows:i}=n,r=i[e];if(null==r)return null;const s=r[t<r.length?t:r.length-1];return null==s?null:s}getDOMCellFromCordsOrThrow(t,e,n){const i=this.getDOMCellFromCords(t,e,n);if(!i)throw new Error("Cell not found at cords.");return i}getCellNodeFromCords(t,e,n){const i=this.getDOMCellFromCords(t,e,n);if(null==i)return null;const r=FC(i.elem);return wD(r)?r:null}getCellNodeFromCordsOrThrow(t,e,n){const i=this.getCellNodeFromCords(t,e,n);if(!i)throw new Error("Node at cords not TableCellNode.");return i}getRowStriping(){return Boolean(this.getLatest().__rowStriping)}setRowStriping(t){const e=this.getWritable();return e.__rowStriping=t,e}setFrozenColumns(t){const e=this.getWritable();return e.__frozenColumnCount=t,e}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const e=this.getWritable();return e.__frozenRowCount=t,e}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let e=0;return t.getChildren().forEach(t=>{wD(t)&&(e+=t.getColSpan())}),e}}function FD(t){const e=UD();t.hasAttribute("data-lexical-row-striping")&&e.setRowStriping(!0),t.hasAttribute("data-lexical-frozen-column")&&e.setFrozenColumns(1),t.hasAttribute("data-lexical-frozen-row")&&e.setFrozenRows(1);const n=t.querySelector(":scope > colgroup");if(n){let t=[];for(const e of n.querySelectorAll(":scope > col")){let n=e.style.width||"";if(!gD.test(n)&&(n=e.getAttribute("width")||"",!/^\d+$/.test(n))){t=void 0;break}t.push(parseFloat(n))}t&&e.setColWidths(t)}return{after:t=>ZR(t,AD),node:e}}function UD(){return vA(new ID)}var zD,BD,HD;function VD(t,e){for(const n of t.childNodes){if(EA(n)&&n.tagName===e)return!0;VD(n,e)}return!1}zD={exports:{}},BD=function(t){var e=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,n=0,i={},r={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function t(e){return e instanceof s?new s(e.type,t(e.content),e.alias):Array.isArray(e)?e.map(t):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++n}),t.__id},clone:function t(e,n){var i,s;switch(n=n||{},r.util.type(e)){case"Object":if(s=r.util.objId(e),n[s])return n[s];for(var o in i={},n[s]=i,e)e.hasOwnProperty(o)&&(i[o]=t(e[o],n));return i;case"Array":return s=r.util.objId(e),n[s]?n[s]:(i=[],n[s]=i,e.forEach(function(e,r){i[r]=t(e,n)}),i);default:return e}},getLanguage:function(t){for(;t;){var n=e.exec(t.className);if(n)return n[1].toLowerCase();t=t.parentElement}return"none"},setLanguage:function(t,n){t.className=t.className.replace(RegExp(e,"gi"),""),t.classList.add("language-"+n)},currentScript:function(){if("undefined"==typeof document)return null;if(document.currentScript&&"SCRIPT"===document.currentScript.tagName)return document.currentScript;try{throw new Error}catch(i){var t=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(i.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var n in e)if(e[n].src==t)return e[n]}return null}},isActive:function(t,e,n){for(var i="no-"+e;t;){var r=t.classList;if(r.contains(e))return!0;if(r.contains(i))return!1;t=t.parentElement}return!!n}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(t,e){var n=r.util.clone(r.languages[t]);for(var i in e)n[i]=e[i];return n},insertBefore:function(t,e,n,i){var s=(i=i||r.languages)[t],o={};for(var a in s)if(s.hasOwnProperty(a)){if(a==e)for(var l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);n.hasOwnProperty(a)||(o[a]=s[a])}var c=i[t];return i[t]=o,r.languages.DFS(r.languages,function(e,n){n===c&&e!=t&&(this[e]=o)}),o},DFS:function t(e,n,i,s){s=s||{};var o=r.util.objId;for(var a in e)if(e.hasOwnProperty(a)){n.call(e,a,e[a],i||a);var l=e[a],c=r.util.type(l);"Object"!==c||s[o(l)]?"Array"!==c||s[o(l)]||(s[o(l)]=!0,t(l,n,a,s)):(s[o(l)]=!0,t(l,n,null,s))}}},plugins:{},highlightAll:function(t,e){r.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,n){var i={callback:n,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",i),i.elements=Array.prototype.slice.apply(i.container.querySelectorAll(i.selector)),r.hooks.run("before-all-elements-highlight",i);for(var s,o=0;s=i.elements[o++];)r.highlightElement(s,!0===e,i.callback)},highlightElement:function(e,n,i){var s=r.util.getLanguage(e),o=r.languages[s];r.util.setLanguage(e,s);var a=e.parentElement;a&&"pre"===a.nodeName.toLowerCase()&&r.util.setLanguage(a,s);var l={element:e,language:s,grammar:o,code:e.textContent};function c(t){l.highlightedCode=t,r.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,r.hooks.run("after-highlight",l),r.hooks.run("complete",l),i&&i.call(l.element)}if(r.hooks.run("before-sanity-check",l),(a=l.element.parentElement)&&"pre"===a.nodeName.toLowerCase()&&!a.hasAttribute("tabindex")&&a.setAttribute("tabindex","0"),!l.code)return r.hooks.run("complete",l),void(i&&i.call(l.element));if(r.hooks.run("before-highlight",l),l.grammar)if(n&&t.Worker){var u=new Worker(r.filename);u.onmessage=function(t){c(t.data)},u.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else c(r.highlight(l.code,l.grammar,l.language));else c(r.util.encode(l.code))},highlight:function(t,e,n){var i={code:t,grammar:e,language:n};if(r.hooks.run("before-tokenize",i),!i.grammar)throw new Error('The language "'+i.language+'" has no grammar.');return i.tokens=r.tokenize(i.code,i.grammar),r.hooks.run("after-tokenize",i),s.stringify(r.util.encode(i.tokens),i.language)},tokenize:function(t,e){var n=e.rest;if(n){for(var i in n)e[i]=n[i];delete e.rest}var r=new l;return c(r,r.head,t),a(t,r,e,r.head,0),function(t){for(var e=[],n=t.head.next;n!==t.tail;)e.push(n.value),n=n.next;return e}(r)},hooks:{all:{},add:function(t,e){var n=r.hooks.all;n[t]=n[t]||[],n[t].push(e)},run:function(t,e){var n=r.hooks.all[t];if(n&&n.length)for(var i,s=0;i=n[s++];)i(e)}},Token:s};function s(t,e,n,i){this.type=t,this.content=e,this.alias=n,this.length=0|(i||"").length}function o(t,e,n,i){t.lastIndex=e;var r=t.exec(n);if(r&&i&&r[1]){var s=r[1].length;r.index+=s,r[0]=r[0].slice(s)}return r}function a(t,e,n,i,l,h){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var f=n[d];f=Array.isArray(f)?f:[f];for(var p=0;p<f.length;++p){if(h&&h.cause==d+","+p)return;var g=f[p],m=g.inside,_=!!g.lookbehind,v=!!g.greedy,y=g.alias;if(v&&!g.pattern.global){var x=g.pattern.toString().match(/[imsuy]*$/)[0];g.pattern=RegExp(g.pattern.source,x+"g")}for(var b=g.pattern||g,S=i.next,w=l;S!==e.tail&&!(h&&w>=h.reach);w+=S.value.length,S=S.next){var E=S.value;if(e.length>t.length)return;if(!(E instanceof s)){var T,M=1;if(v){if(!(T=o(b,w,t,_))||T.index>=t.length)break;var C=T.index,A=T.index+T[0].length,R=w;for(R+=S.value.length;C>=R;)R+=(S=S.next).value.length;if(w=R-=S.value.length,S.value instanceof s)continue;for(var P=S;P!==e.tail&&(R<A||"string"==typeof P.value);P=P.next)M++,R+=P.value.length;M--,E=t.slice(w,R),T.index-=w}else if(!(T=o(b,0,E,_)))continue;C=T.index;var N=T[0],D=E.slice(0,C),L=E.slice(C+N.length),O=w+E.length;h&&O>h.reach&&(h.reach=O);var k=S.prev;if(D&&(k=c(e,k,D),w+=D.length),u(e,k,M),S=c(e,k,new s(d,m?r.tokenize(N,m):N,y,N)),L&&c(e,S,L),M>1){var I={cause:d+","+p,reach:O};a(t,e,n,S.prev,w,I),h&&I.reach>h.reach&&(h.reach=I.reach)}}}}}}function l(){var t={value:null,prev:null,next:null},e={value:null,prev:t,next:null};t.next=e,this.head=t,this.tail=e,this.length=0}function c(t,e,n){var i=e.next,r={value:n,prev:e,next:i};return e.next=r,i.prev=r,t.length++,r}function u(t,e,n){for(var i=e.next,r=0;r<n&&i!==t.tail;r++)i=i.next;e.next=i,i.prev=e,t.length-=r}if(t.Prism=r,s.stringify=function t(e,n){if("string"==typeof e)return e;if(Array.isArray(e)){var i="";return e.forEach(function(e){i+=t(e,n)}),i}var s={type:e.type,content:t(e.content,n),tag:"span",classes:["token",e.type],attributes:{},language:n},o=e.alias;o&&(Array.isArray(o)?Array.prototype.push.apply(s.classes,o):s.classes.push(o)),r.hooks.run("wrap",s);var a="";for(var l in s.attributes)a+=" "+l+'="'+(s.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'"'+a+">"+s.content+"</"+s.tag+">"},!t.document)return t.addEventListener?(r.disableWorkerMessageHandler||t.addEventListener("message",function(e){var n=JSON.parse(e.data),i=n.language,s=n.code,o=n.immediateClose;t.postMessage(r.highlight(s,r.languages[i],i)),o&&t.close()},!1),r):r;var h=r.util.currentScript();function d(){r.manual||r.highlightAll()}if(h&&(r.filename=h.src,h.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){var f=document.readyState;"loading"===f||"interactive"===f&&h&&h.defer?document.addEventListener("DOMContentLoaded",d):window.requestAnimationFrame?window.requestAnimationFrame(d):window.setTimeout(d,16)}return r}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{}),zD.exports&&(zD.exports=BD),void 0!==Wt&&(Wt.Prism=BD),BD.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},BD.languages.markup.tag.inside["attr-value"].inside.entity=BD.languages.markup.entity,BD.languages.markup.doctype.inside["internal-subset"].inside=BD.languages.markup,BD.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),Object.defineProperty(BD.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:BD.languages[e]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+e]={pattern:/[\s\S]+/,inside:BD.languages[e]};var r={};r[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:i},BD.languages.insertBefore("markup","cdata",r)}}),Object.defineProperty(BD.languages.markup.tag,"addAttribute",{value:function(t,e){BD.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:BD.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),BD.languages.html=BD.languages.markup,BD.languages.mathml=BD.languages.markup,BD.languages.svg=BD.languages.markup,BD.languages.xml=BD.languages.extend("markup",{}),BD.languages.ssml=BD.languages.xml,BD.languages.atom=BD.languages.xml,BD.languages.rss=BD.languages.xml,function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(BD),BD.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},BD.languages.javascript=BD.languages.extend("clike",{"class-name":[BD.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),BD.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,BD.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:BD.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:BD.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:BD.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:BD.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:BD.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),BD.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:BD.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),BD.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),BD.languages.markup&&(BD.languages.markup.tag.addInlined("script","javascript"),BD.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),BD.languages.js=BD.languages.javascript,function(){if(void 0!==BD&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var t={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},e="data-src-status",n="loading",i="loaded",r="pre[data-src]:not(["+e+'="'+i+'"]):not(['+e+'="'+n+'"])';BD.hooks.add("before-highlightall",function(t){t.selector+=", "+r}),BD.hooks.add("before-sanity-check",function(s){var o=s.element;if(o.matches(r)){s.code="",o.setAttribute(e,n);var a=o.appendChild(document.createElement("CODE"));a.textContent="Loading…";var l=o.getAttribute("data-src"),c=s.language;if("none"===c){var u=(/\.(\w+)$/.exec(l)||[,"none"])[1];c=t[u]||u}BD.util.setLanguage(a,c),BD.util.setLanguage(o,c);var h=BD.plugins.autoloader;h&&h.loadLanguages(c),function(t,e,n){var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status<400&&i.responseText?e(i.responseText):i.status>=400?n("✖ Error "+i.status+" while fetching file: "+i.statusText):n("✖ Error: File does not exist or is empty"))},i.send(null)}(l,function(t){o.setAttribute(e,i);var n=function(t){var e=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(t||"");if(e){var n=Number(e[1]),i=e[2],r=e[3];return i?r?[n,Number(r)]:[n,void 0]:[n,n]}}(o.getAttribute("data-range"));if(n){var r=t.split(/\r\n?|\n/g),s=n[0],l=null==n[1]?r.length:n[1];s<0&&(s+=r.length),s=Math.max(0,Math.min(s-1,r.length)),l<0&&(l+=r.length),l=Math.max(0,Math.min(l,r.length)),t=r.slice(s,l).join("\n"),o.hasAttribute("data-start")||o.setAttribute("data-start",String(s+1))}a.textContent=t,BD.highlightElement(a)},function(t){o.setAttribute(e,"failed"),a.textContent=t})}}),BD.plugins.fileHighlight={highlight:function(t){for(var e,n=(t||document).querySelectorAll(r),i=0;e=n[i++];)BD.highlightElement(e)}};var s=!1;BD.fileHighlight=function(){s||(s=!0),BD.plugins.fileHighlight.highlight.apply(this,arguments)}}}(),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript,Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var i={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};i["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var r={};r[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:i},Prism.languages.insertBefore("markup","cdata",r)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(t,e){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+t+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[e,"language-"+e],inside:Prism.languages[e]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml,function(t){var e=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(t){return t=t.replace(/<inner>/g,function(){return e}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+t+")")}var i=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,r=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return i}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;t.languages.markdown=t.languages.extend("markup",{}),t.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:t.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+r+s+"(?:"+r+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+r+s+")(?:"+r+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(i),inside:t.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+r+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+r+"$"),inside:{"table-header":{pattern:RegExp(i),alias:"important",inside:t.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(e){["url","bold","italic","strike","code-snippet"].forEach(function(n){e!==n&&(t.languages.markdown[e].inside.content.inside[n]=t.languages.markdown[n])})}),t.hooks.add("after-tokenize",function(t){"markdown"!==t.language&&"md"!==t.language||function t(e){if(e&&"string"!=typeof e)for(var n=0,i=e.length;n<i;n++){var r=e[n];if("code"===r.type){var s=r.content[1],o=r.content[3];if(s&&o&&"code-language"===s.type&&"code-block"===o.type&&"string"==typeof s.content){var a=s.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(a=(/[a-z][\w-]*/i.exec(a)||[""])[0].toLowerCase());o.alias?"string"==typeof o.alias?o.alias=[o.alias,l]:o.alias.push(l):o.alias=[l]}}else t(r.content)}}(t.tokens)}),t.hooks.add("wrap",function(e){if("code-block"===e.type){for(var n="",i=0,r=e.classes.length;i<r;i++){var s=e.classes[i],c=/language-(.+)/.exec(s);if(c){n=c[1];break}}var u,h=t.languages[n];if(h)e.content=t.highlight((u=e.content,u.replace(o,"").replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(t,e){var n;if("#"===(e=e.toLowerCase())[0])return n="x"===e[1]?parseInt(e.slice(2),16):Number(e.slice(1)),l(n);var i=a[e];return i||t})),h,n);else if(n&&"none"!==n&&t.plugins.autoloader){var d="md-"+(new Date).valueOf()+"-"+Math.floor(1e16*Math.random());e.attributes.id=d,t.plugins.autoloader.loadLanguages(n,function(){var e=document.getElementById(d);e&&(e.innerHTML=t.highlight(e.textContent,t.languages[n],n))})}}});var o=RegExp(t.languages.markup.tag.pattern.source,"gi"),a={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;t.languages.md=t.languages.markdown}(Prism),Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean,function(t){var e=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+e.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+e.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+e.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+e.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:e,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))}(Prism),Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete Prism.languages.objectivec["class-name"],Prism.languages.objc=Prism.languages.objectivec,Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/},(HD=Prism.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/}).string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:HD},boolean:HD.boolean,variable:HD.variable},Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python,function(t){for(var e=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)e=e.replace(/<self>/g,function(){return e});e=e.replace(/<self>/g,function(){return/[^\s\S]/.source}),t.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+e),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},t.languages.rust["closure-params"].inside.rest=t.languages.rust,t.languages.rust.attribute.inside.string=t.languages.rust.string}(Prism),Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+/(?:elseif|if)\b/.source+"(?:[ \t]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},Prism.languages.swift["string-literal"].forEach(function(t){t.inside.interpolation.inside=Prism.languages.swift}),function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript}(Prism),function(t){var e=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,i={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};t.languages.java=t.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[i,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:i.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:i.inside}],keyword:e,function:[t.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),t.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),t.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":i,keyword:e,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:i.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:i.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism),function(t){var e=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return e.source});t.languages.cpp=t.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return e.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:e,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),t.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),t.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t.languages.cpp}}}}),t.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),t.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:t.languages.extend("cpp",{})}}),t.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},t.languages.cpp["base-clause"])}(Prism);const WD="data-language",GD="data-highlight-language",jD="data-theme";class XD extends jM{constructor(t,e){super(e),kt(this,"__language"),kt(this,"__theme"),kt(this,"__isSyntaxHighlightSupported"),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}static getType(){return"code"}static clone(t){return new XD(t.__language,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const e=document.createElement("code");XR(e,t.theme.code),e.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(e.setAttribute(WD,n),this.getIsSyntaxHighlightSupported()&&e.setAttribute(GD,n));const i=this.getTheme();i&&e.setAttribute(jD,i);const r=this.getStyle();return r&&e.setAttribute("style",r),e}updateDOM(t,e,n){const i=this.__language,r=t.__language;i?i!==r&&e.setAttribute(WD,i):r&&e.removeAttribute(WD);const s=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&r?s&&i?i!==r&&e.setAttribute(GD,i):e.removeAttribute(GD):s&&i&&e.setAttribute(GD,i);const o=this.__theme,a=t.__theme;o?o!==a&&e.setAttribute(jD,o):a&&e.removeAttribute(jD);const l=this.__style,c=t.__style;return l?l!==c&&e.setAttribute("style",l):c&&e.removeAttribute("style"),!1}exportDOM(t){const e=document.createElement("pre");XR(e,t._config.theme.code),e.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(e.setAttribute(WD,n),this.getIsSyntaxHighlightSupported()&&e.setAttribute(GD,n));const i=this.getTheme();i&&e.setAttribute(jD,i);const r=this.getStyle();return r&&e.setAttribute("style",r),{element:e}}static importDOM(){return{code:t=>null!=t.textContent&&(/\r?\n/.test(t.textContent)||VD(t,"BR"))?{conversion:KD,priority:1}:null,div:()=>({conversion:$D,priority:1}),pre:()=>({conversion:KD,priority:0}),table:t=>QD(t)?{conversion:YD,priority:3}:null,td:t=>{const e=t,n=e.closest("table");return e.classList.contains("js-file-line")||n&&QD(n)?{conversion:JD,priority:3}:null},tr:t=>{const e=t.closest("table");return e&&QD(e)?{conversion:JD,priority:3}:null}}}static importJSON(t){return qD().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,e=!0){const n=this.getChildren(),i=n.length;if(i>=2&&"\n"===n[i-1].getTextContent()&&"\n"===n[i-2].getTextContent()&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===i){n[i-1].remove(),n[i-2].remove();const t=sC();return this.insertAfter(t,e),t}const{anchor:r,focus:s}=t,o=(r.isBefore(s)?r:s).getNode();if(IT(o)){let t=function(t){return function(t,e){let n=t;for(let i=tR(t,e);i&&(iL(i.origin)||BT(i.origin));i=KR(i))n=i.origin;return n}(t,"previous")}(o);const e=[];for(;;)if(BT(t))e.push(zT()),t=t.getNextSibling();else{if(!iL(t))break;{let n=0;const i=t.getTextContent(),r=t.getTextContentSize();for(;n<r&&" "===i[n];)n++;if(0!==n&&e.push(nL(" ".repeat(n))),n!==r)break;t=t.getNextSibling()}}const n=o.splitText(r.offset)[0],i=0===r.offset?0:1,s=n.getIndexWithinParent()+i,a=o.getParentOrThrow(),l=[_T(),...e];a.splice(s,0,l);const c=e[e.length-1];c?c.select():0===r.offset?n.selectPrevious():n.getNextSibling().selectNext(0,0)}if(function(t){return t instanceof XD}(o)){const{offset:e}=t.anchor;o.splice(e,0,[_T()]),o.select(e+1,e+1)}return null}canIndent(){return!1}collapseAtStart(){const t=sC();return this.getChildren().forEach(e=>t.append(e)),this.replace(t),!0}setLanguage(t){const e=this.getWritable();return e.__language=t||void 0,e}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const e=this.getWritable();return e.__isSyntaxHighlightSupported=t,e}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const e=this.getWritable();return e.__theme=t||void 0,e}getTheme(){return this.getLatest().__theme}}function qD(t,e){return function(t){const e=PA();return CM(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(t)).klass)}(XD).setLanguage(t).setTheme(e)}function KD(t){return{node:qD(t.getAttribute(WD))}}function $D(t){const e=t,n=ZD(e);return n||function(t){let e=t.parentElement;for(;null!==e;){if(ZD(e))return!0;e=e.parentElement}return!1}(e)?{node:n?qD():null}:{node:null}}function YD(){return{node:qD()}}function JD(){return{node:null}}function ZD(t){return null!==t.style.fontFamily.match("monospace")}function QD(t){return t.classList.contains("js-file-line-container")}class tL extends MT{constructor(t="",e,n){super(t,n),kt(this,"__highlightType"),this.__highlightType=e}static getType(){return"code-highlight"}static clone(t){return new tL(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const e=this.getWritable();return e.__highlightType=t||void 0,e}canHaveFormat(){return!1}createDOM(t){const e=super.createDOM(t);return XR(e,eL(t.theme,this.__highlightType)),e}updateDOM(t,e,n){const i=super.updateDOM(t,e,n),r=eL(n.theme,t.__highlightType),s=eL(n.theme,this.__highlightType);return r!==s&&(r&&qR(e,r),s&&XR(e,s)),i}static importJSON(t){return nL().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return qD()}}function eL(t,e){return e&&t&&t.codeHighlight&&t.codeHighlight[e]}function nL(t="",e){return vA(new tL(t,e))}function iL(t){return t instanceof tL}!function(t){t.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var e={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(e).forEach(function(n){var i=e[n],r=[];/^\w+$/.test(n)||r.push(/\w+/.exec(n)[0]),"diff"===n&&r.push("bold"),t.languages.diff[n]={pattern:RegExp("^(?:["+i+"].*(?:\r\n?|\n|(?![\\s\\S])))+","m"),alias:r,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(t.languages.diff,"PREFIXES",{value:e})}(Prism);const rL=Math.min,sL=Math.max,oL=Math.round,aL=Math.floor,lL=t=>({x:t,y:t}),cL={left:"right",right:"left",bottom:"top",top:"bottom"},uL={start:"end",end:"start"};function hL(t,e,n){return sL(t,rL(e,n))}function dL(t,e){return"function"==typeof t?t(e):t}function fL(t){return t.split("-")[0]}function pL(t){return t.split("-")[1]}function gL(t){return"x"===t?"y":"x"}function mL(t){return"y"===t?"height":"width"}const _L=new Set(["top","bottom"]);function vL(t){return _L.has(fL(t))?"y":"x"}function yL(t){return gL(vL(t))}function xL(t){return t.replace(/start|end/g,t=>uL[t])}const bL=["left","right"],SL=["right","left"],wL=["top","bottom"],EL=["bottom","top"];function TL(t,e,n,i){const r=pL(t);let s=function(t,e,n){switch(t){case"top":case"bottom":return n?e?SL:bL:e?bL:SL;case"left":case"right":return e?wL:EL;default:return[]}}(fL(t),"start"===n,i);return r&&(s=s.map(t=>t+"-"+r),e&&(s=s.concat(s.map(xL)))),s}function ML(t){return t.replace(/left|right|bottom|top/g,t=>cL[t])}function CL(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function AL(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function RL(t,e,n){let{reference:i,floating:r}=t;const s=vL(e),o=yL(e),a=mL(o),l=fL(e),c="y"===s,u=i.x+i.width/2-r.width/2,h=i.y+i.height/2-r.height/2,d=i[a]/2-r[a]/2;let f;switch(l){case"top":f={x:u,y:i.y-r.height};break;case"bottom":f={x:u,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:h};break;case"left":f={x:i.x-r.width,y:h};break;default:f={x:i.x,y:i.y}}switch(pL(e)){case"start":f[o]-=d*(n&&c?-1:1);break;case"end":f[o]+=d*(n&&c?-1:1)}return f}async function PL(t,e){var n;void 0===e&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:d=!1,padding:f=0}=dL(e,t),p=CL(f),g=a[d?"floating"===h?"reference":"floating":h],m=AL(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(g)))||n?g:g.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),_="floating"===h?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,v=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),y=await(null==s.isElement?void 0:s.isElement(v))&&await(null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},x=AL(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:v,strategy:l}):_);return{top:(m.top-x.top+p.top)/y.y,bottom:(x.bottom-m.bottom+p.bottom)/y.y,left:(m.left-x.left+p.left)/y.x,right:(x.right-m.right+p.right)/y.x}}const NL=new Set(["left","top"]);function DL(){return"undefined"!=typeof window}function LL(t){return IL(t)?(t.nodeName||"").toLowerCase():"#document"}function OL(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function kL(t){var e;return null==(e=(IL(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function IL(t){return!!DL()&&(t instanceof Node||t instanceof OL(t).Node)}function FL(t){return!!DL()&&(t instanceof Element||t instanceof OL(t).Element)}function UL(t){return!!DL()&&(t instanceof HTMLElement||t instanceof OL(t).HTMLElement)}function zL(t){return!(!DL()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof OL(t).ShadowRoot)}const BL=new Set(["inline","contents"]);function HL(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=QL(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!BL.has(r)}const VL=new Set(["table","td","th"]);function WL(t){return VL.has(LL(t))}const GL=[":popover-open",":modal"];function jL(t){return GL.some(e=>{try{return t.matches(e)}catch(n){return!1}})}const XL=["transform","translate","scale","rotate","perspective"],qL=["transform","translate","scale","rotate","perspective","filter"],KL=["paint","layout","strict","content"];function $L(t){const e=YL(),n=FL(t)?QL(t):t;return XL.some(t=>!!n[t]&&"none"!==n[t])||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||qL.some(t=>(n.willChange||"").includes(t))||KL.some(t=>(n.contain||"").includes(t))}function YL(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const JL=new Set(["html","body","#document"]);function ZL(t){return JL.has(LL(t))}function QL(t){return OL(t).getComputedStyle(t)}function tO(t){return FL(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function eO(t){if("html"===LL(t))return t;const e=t.assignedSlot||t.parentNode||zL(t)&&t.host||kL(t);return zL(e)?e.host:e}function nO(t){const e=eO(t);return ZL(e)?t.ownerDocument?t.ownerDocument.body:t.body:UL(e)&&HL(e)?e:nO(e)}function iO(t,e,n){var i;void 0===e&&(e=[]),void 0===n&&(n=!0);const r=nO(t),s=r===(null==(i=t.ownerDocument)?void 0:i.body),o=OL(r);if(s){const t=rO(o);return e.concat(o,o.visualViewport||[],HL(r)?r:[],t&&n?iO(t):[])}return e.concat(r,iO(r,[],n))}function rO(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function sO(t){const e=QL(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=UL(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=oL(n)!==s||oL(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function oO(t){return FL(t)?t:t.contextElement}function aO(t){const e=oO(t);if(!UL(e))return lL(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=sO(e);let o=(s?oL(n.width):n.width)/i,a=(s?oL(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const lO=lL(0);function cO(t){const e=OL(t);return YL()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:lO}function uO(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1);const r=t.getBoundingClientRect(),s=oO(t);let o=lL(1);e&&(i?FL(i)&&(o=aO(i)):o=aO(t));const a=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==OL(t))&&e}(s,n,i)?cO(s):lL(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,h=r.height/o.y;if(s){const t=OL(s),e=i&&FL(i)?OL(i):i;let n=t,r=rO(n);for(;r&&i&&e!==n;){const t=aO(r),e=r.getBoundingClientRect(),i=QL(r),s=e.left+(r.clientLeft+parseFloat(i.paddingLeft))*t.x,o=e.top+(r.clientTop+parseFloat(i.paddingTop))*t.y;l*=t.x,c*=t.y,u*=t.x,h*=t.y,l+=s,c+=o,n=OL(r),r=rO(n)}}return AL({width:u,height:h,x:l,y:c})}function hO(t,e){const n=tO(t).scrollLeft;return e?e.left+n:uO(kL(t)).left+n}function dO(t,e){const n=t.getBoundingClientRect();return{x:n.left+e.scrollLeft-hO(t,n),y:n.top+e.scrollTop}}const fO=new Set(["absolute","fixed"]);function pO(t,e,n){let i;if("viewport"===e)i=function(t,e){const n=OL(t),i=kL(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const t=YL();(!t||t&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}const c=hO(i);if(c<=0){const t=i.ownerDocument,e=t.body,n=getComputedStyle(e),r="CSS1Compat"===t.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,o=Math.abs(i.clientWidth-e.clientWidth-r);o<=25&&(s-=o)}else c<=25&&(s+=c);return{width:s,height:o,x:a,y:l}}(t,n);else if("document"===e)i=function(t){const e=kL(t),n=tO(t),i=t.ownerDocument.body,r=sL(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=sL(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+hO(t);const a=-n.scrollTop;return"rtl"===QL(i).direction&&(o+=sL(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}(kL(t));else if(FL(e))i=function(t,e){const n=uO(t,!0,"fixed"===e),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=UL(t)?aO(t):lL(1);return{width:t.clientWidth*s.x,height:t.clientHeight*s.y,x:r*s.x,y:i*s.y}}(e,n);else{const n=cO(t);i={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return AL(i)}function gO(t,e){const n=eO(t);return!(n===e||!FL(n)||ZL(n))&&("fixed"===QL(n).position||gO(n,e))}function mO(t,e,n){const i=UL(e),r=kL(e),s="fixed"===n,o=uO(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=lL(0);function c(){l.x=hO(r)}if(i||!i&&!s)if(("body"!==LL(e)||HL(r))&&(a=tO(e)),i){const t=uO(e,!0,s,e);l.x=t.x+e.clientLeft,l.y=t.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=!r||i||s?lL(0):dO(r,a);return{x:o.left+a.scrollLeft-l.x-u.x,y:o.top+a.scrollTop-l.y-u.y,width:o.width,height:o.height}}function _O(t){return"static"===QL(t).position}function vO(t,e){if(!UL(t)||"fixed"===QL(t).position)return null;if(e)return e(t);let n=t.offsetParent;return kL(t)===n&&(n=n.ownerDocument.body),n}function yO(t,e){const n=OL(t);if(jL(t))return n;if(!UL(t)){let e=eO(t);for(;e&&!ZL(e);){if(FL(e)&&!_O(e))return e;e=eO(e)}return n}let i=vO(t,e);for(;i&&WL(i)&&_O(i);)i=vO(i,e);return i&&ZL(i)&&_O(i)&&!$L(i)?n:i||function(t){let e=eO(t);for(;UL(e)&&!ZL(e);){if($L(e))return e;if(jL(e))return null;e=eO(e)}return null}(t)||n}const xO={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s="fixed"===r,o=kL(i),a=!!e&&jL(e.floating);if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=lL(1);const u=lL(0),h=UL(i);if((h||!h&&!s)&&(("body"!==LL(i)||HL(o))&&(l=tO(i)),UL(i))){const t=uO(i);c=aO(i),u.x=t.x+i.clientLeft,u.y=t.y+i.clientTop}const d=!o||h||s?lL(0):dO(o,l);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+d.x,y:n.y*c.y-l.scrollTop*c.y+u.y+d.y}},getDocumentElement:kL,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const s=[..."clippingAncestors"===n?jL(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let i=iO(t,[],!1).filter(t=>FL(t)&&"body"!==LL(t)),r=null;const s="fixed"===QL(t).position;let o=s?eO(t):t;for(;FL(o)&&!ZL(o);){const e=QL(o),n=$L(o);n||"fixed"!==e.position||(r=null),(s?!n&&!r:!n&&"static"===e.position&&r&&fO.has(r.position)||HL(o)&&!n&&gO(t,o))?i=i.filter(t=>t!==o):r=e,o=eO(o)}return e.set(t,i),i}(e,this._c):[].concat(n),i],o=s[0],a=s.reduce((t,n)=>{const i=pO(e,n,r);return t.top=sL(i.top,t.top),t.right=rL(i.right,t.right),t.bottom=rL(i.bottom,t.bottom),t.left=sL(i.left,t.left),t},pO(e,o,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:yO,getElementRects:async function(t){const e=this.getOffsetParent||yO,n=this.getDimensions,i=await n(t.floating);return{reference:mO(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=sO(t);return{width:e,height:n}},getScale:aO,isElement:FL,isRTL:function(t){return"rtl"===QL(t).direction}};function bO(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function SO(t,e,n,i){void 0===i&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=i,c=oO(t),u=r||s?[...c?iO(c):[],...iO(e)]:[];u.forEach(t=>{r&&t.addEventListener("scroll",n,{passive:!0}),s&&t.addEventListener("resize",n)});const h=c&&a?function(t,e){let n,i=null;const r=kL(t);function s(){var t;clearTimeout(n),null==(t=i)||t.disconnect(),i=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:d,height:f}=c;if(a||e(),!d||!f)return;const p={rootMargin:-aL(h)+"px "+-aL(r.clientWidth-(u+d))+"px "+-aL(r.clientHeight-(h+f))+"px "+-aL(u)+"px",threshold:sL(0,rL(1,l))||1};let g=!0;function m(e){const i=e[0].intersectionRatio;if(i!==l){if(!g)return o();i?o(!1,i):n=setTimeout(()=>{o(!1,1e-7)},1e3)}1!==i||bO(c,t.getBoundingClientRect())||o(),g=!1}try{i=new IntersectionObserver(m,{...p,root:r.ownerDocument})}catch(_){i=new IntersectionObserver(m,p)}i.observe(t)}(!0),s}(c,n):null;let d,f=-1,p=null;o&&(p=new ResizeObserver(t=>{let[i]=t;i&&i.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var t;null==(t=p)||t.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let g=l?uO(t):null;return l&&function e(){const i=uO(t);g&&!bO(g,i)&&n();g=i,d=requestAnimationFrame(e)}(),n(),()=>{var t;u.forEach(t=>{r&&t.removeEventListener("scroll",n),s&&t.removeEventListener("resize",n)}),null==h||h(),null==(t=p)||t.disconnect(),p=null,l&&cancelAnimationFrame(d)}}const wO=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await async function(t,e){const{placement:n,platform:i,elements:r}=t,s=await(null==i.isRTL?void 0:i.isRTL(r.floating)),o=fL(n),a=pL(n),l="y"===vL(n),c=NL.has(o)?-1:1,u=s&&l?-1:1,h=dL(e,t);let{mainAxis:d,crossAxis:f,alignmentAxis:p}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&"number"==typeof p&&(f="end"===a?-1*p:p),l?{x:f*u,y:d*c}:{x:d*c,y:f*u}}(e,t);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(i=a.arrow)&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},EO=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...l}=dL(t,e),c={x:n,y:i},u=await PL(e,l),h=vL(fL(r)),d=gL(h);let f=c[d],p=c[h];if(s){const t="y"===d?"bottom":"right";f=hL(f+u["y"===d?"top":"left"],f,f-u[t])}if(o){const t="y"===h?"bottom":"right";p=hL(p+u["y"===h?"top":"left"],p,p-u[t])}const g=a.fn({...e,[d]:f,[h]:p});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[d]:s,[h]:o}}}}}},TO=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...m}=dL(t,e);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const _=fL(r),v=vL(a),y=fL(a)===a,x=await(null==l.isRTL?void 0:l.isRTL(c.floating)),b=d||(y||!g?[ML(a)]:function(t){const e=ML(t);return[xL(t),e,xL(e)]}(a)),S="none"!==p;!d&&S&&b.push(...TL(a,g,p,x));const w=[a,...b],E=await PL(e,m),T=[];let M=(null==(i=s.flip)?void 0:i.overflows)||[];if(u&&T.push(E[_]),h){const t=function(t,e,n){void 0===n&&(n=!1);const i=pL(t),r=yL(t),s=mL(r);let o="x"===r?i===(n?"end":"start")?"right":"left":"start"===i?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=ML(o)),[o,ML(o)]}(r,o,x);T.push(E[t[0]],E[t[1]])}if(M=[...M,{placement:r,overflows:T}],!T.every(t=>t<=0)){var C,A;const t=((null==(C=s.flip)?void 0:C.index)||0)+1,e=w[t];if(e){if(!("alignment"===h&&v!==vL(e))||M.every(t=>vL(t.placement)!==v||t.overflows[0]>0))return{data:{index:t,overflows:M},reset:{placement:e}}}let n=null==(A=M.filter(t=>t.overflows[0]<=0).sort((t,e)=>t.overflows[1]-e.overflows[1])[0])?void 0:A.placement;if(!n)switch(f){case"bestFit":{var R;const t=null==(R=M.filter(t=>{if(S){const e=vL(t.placement);return e===v||"y"===e}return!0}).map(t=>[t.placement,t.overflows.filter(t=>t>0).reduce((t,e)=>t+e,0)]).sort((t,e)=>t[1]-e[1])[0])?void 0:R[0];t&&(n=t);break}case"initialPlacement":n=a}if(r!==n)return{reset:{placement:n}}}return{}}}},MO=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=dL(t,e)||{};if(null==c)return{};const h=CL(u),d={x:n,y:i},f=yL(r),p=mL(f),g=await o.getDimensions(c),m="y"===f,_=m?"top":"left",v=m?"bottom":"right",y=m?"clientHeight":"clientWidth",x=s.reference[p]+s.reference[f]-d[f]-s.floating[p],b=d[f]-s.reference[f],S=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c));let w=S?S[y]:0;w&&await(null==o.isElement?void 0:o.isElement(S))||(w=a.floating[y]||s.floating[p]);const E=x/2-b/2,T=w/2-g[p]/2-1,M=rL(h[_],T),C=rL(h[v],T),A=M,R=w-g[p]-C,P=w/2-g[p]/2+E,N=hL(A,P,R),D=!l.arrow&&null!=pL(r)&&P!==N&&s.reference[p]/2-(P<A?M:C)-g[p]/2<0,L=D?P<A?P-A:P-R:0;return{[f]:d[f]+L,data:{[f]:N,centerOffset:P-N-L,...D&&{alignmentOffset:L}},reset:D}}}),CO=(t,e,n)=>{const i=new Map,r={platform:xO,...n},s={...r.platform,_c:i};return(async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:h}=RL(c,i,l),d=i,f={},p=0;for(let g=0;g<a.length;g++){const{name:n,fn:s}=a[g],{x:m,y:_,data:v,reset:y}=await s({x:u,y:h,initialPlacement:i,placement:d,strategy:r,middlewareData:f,rects:c,platform:o,elements:{reference:t,floating:e}});u=null!=m?m:u,h=null!=_?_:h,f={...f,[n]:{...f[n],...v}},y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(d=y.placement),y.rects&&(c=!0===y.rects?await o.getElementRects({reference:t,floating:e,strategy:r}):y.rects),({x:u,y:h}=RL(c,d,l))),g=-1)}return{x:u,y:h,placement:d,strategy:r,middlewareData:f}})(t,e,{...r,platform:s})};var AO={exports:{}};
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(t){!function(){var e={}.hasOwnProperty;function n(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];n&&(t=r(t,i(n)))}return t}function i(t){if("string"==typeof t||"number"==typeof t)return t;if("object"!=typeof t)return"";if(Array.isArray(t))return n.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var i="";for(var s in t)e.call(t,s)&&t[s]&&(i=r(i,s));return i}function r(t,e){return e?t?t+" "+e:t+e:t}t.exports?(n.default=n,t.exports=n):window.classNames=n}()}(AO);const RO=Gt(AO.exports);const PO="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function NO(t){const e=Object.prototype.toString.call(t);return"[object Window]"===e||"[object global]"===e}function DO(t){return"nodeType"in t}function LO(t){var e,n;return t?NO(t)?t:DO(t)&&null!=(e=null==(n=t.ownerDocument)?void 0:n.defaultView)?e:window:window}function OO(t){const{Document:e}=LO(t);return t instanceof e}function kO(t){return!NO(t)&&t instanceof LO(t).HTMLElement}function IO(t){return t instanceof LO(t).SVGElement}function FO(t){return t?NO(t)?t.document:DO(t)?OO(t)?t:kO(t)||IO(t)?t.ownerDocument:document:document:document}const UO=PO?Vt.useLayoutEffect:Vt.useEffect;function zO(t){const e=Vt.useRef(t);return UO(()=>{e.current=t}),Vt.useCallback(function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return null==e.current?void 0:e.current(...n)},[])}function BO(t,e){void 0===e&&(e=[t]);const n=Vt.useRef(t);return UO(()=>{n.current!==t&&(n.current=t)},e),n}function HO(t,e){const n=Vt.useRef();return Vt.useMemo(()=>{const e=t(n.current);return n.current=e,e},[...e])}function VO(t){const e=zO(t),n=Vt.useRef(null),i=Vt.useCallback(t=>{t!==n.current&&(null==e||e(t,n.current)),n.current=t},[]);return[n,i]}function WO(t){const e=Vt.useRef();return Vt.useEffect(()=>{e.current=t},[t]),e.current}let GO={};function jO(t,e){return Vt.useMemo(()=>{if(e)return e;const n=null==GO[t]?0:GO[t]+1;return GO[t]=n,t+"-"+n},[t,e])}function XO(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((e,n)=>{const i=Object.entries(n);for(const[r,s]of i){const n=e[r];null!=n&&(e[r]=n+t*s)}return e},{...e})}}const qO=XO(1),KO=XO(-1);function $O(t){if(!t)return!1;const{KeyboardEvent:e}=LO(t.target);return e&&t instanceof e}function YO(t){if(function(t){if(!t)return!1;const{TouchEvent:e}=LO(t.target);return e&&t instanceof e}(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return function(t){return"clientX"in t&&"clientY"in t}(t)?{x:t.clientX,y:t.clientY}:null}const JO=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[JO.Translate.toString(t),JO.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:i}=t;return e+" "+n+"ms "+i}}}),ZO="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function QO(t){return t.matches(ZO)?t:t.querySelector(ZO)}const tk={display:"none"};function ek(t){let{id:e,value:n}=t;return Xt.createElement("div",{id:e,style:tk},n)}function nk(t){let{id:e,announcement:n,ariaLiveType:i="assertive"}=t;return Xt.createElement("div",{id:e,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":i,"aria-atomic":!0},n)}const ik=Vt.createContext(null);const rk={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},sk={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ok(t){let{announcements:e=sk,container:n,hiddenTextDescribedById:i,screenReaderInstructions:r=rk}=t;const{announce:s,announcement:o}=function(){const[t,e]=Vt.useState("");return{announce:Vt.useCallback(t=>{null!=t&&e(t)},[]),announcement:t}}(),a=jO("DndLiveRegion"),[l,c]=Vt.useState(!1);if(Vt.useEffect(()=>{c(!0)},[]),function(t){const e=Vt.useContext(ik);Vt.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}(Vt.useMemo(()=>({onDragStart(t){let{active:n}=t;s(e.onDragStart({active:n}))},onDragMove(t){let{active:n,over:i}=t;e.onDragMove&&s(e.onDragMove({active:n,over:i}))},onDragOver(t){let{active:n,over:i}=t;s(e.onDragOver({active:n,over:i}))},onDragEnd(t){let{active:n,over:i}=t;s(e.onDragEnd({active:n,over:i}))},onDragCancel(t){let{active:n,over:i}=t;s(e.onDragCancel({active:n,over:i}))}}),[s,e])),!l)return null;const u=Xt.createElement(Xt.Fragment,null,Xt.createElement(ek,{id:i,value:r.draggable}),Xt.createElement(nk,{id:a,announcement:o}));return n?qt.createPortal(u,n):u}var ak;function lk(){}!function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"}(ak||(ak={}));const ck=Object.freeze({x:0,y:0});function uk(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function hk(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return n-i}function dk(t,e){let{data:{value:n}}=t,{data:{value:i}}=e;return i-n}function fk(t,e,n){return void 0===e&&(e=t.left),void 0===n&&(n=t.top),{x:e+.5*t.width,y:n+.5*t.height}}const pk=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const r=fk(e,e.left,e.top),s=[];for(const o of i){const{id:t}=o,e=n.get(t);if(e){const n=uk(fk(e),r);s.push({id:t,data:{droppableContainer:o,value:n}})}}return s.sort(hk)};function gk(t,e){const n=Math.max(e.top,t.top),i=Math.max(e.left,t.left),r=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=r-i,a=s-n;if(i<r&&n<s){const n=e.width*e.height,i=t.width*t.height,r=o*a;return Number((r/(n+i-r)).toFixed(4))}return 0}const mk=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:i}=t;const r=[];for(const s of i){const{id:t}=s,i=n.get(t);if(i){const n=gk(i,e);n>0&&r.push({id:t,data:{droppableContainer:s,value:n}})}}return r.sort(dk)};function _k(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ck}function vk(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((e,n)=>({...e,top:e.top+t*n.y,bottom:e.bottom+t*n.y,left:e.left+t*n.x,right:e.right+t*n.x}),{...e})}}const yk=vk(1);const xk={ignoreTransform:!1};function bk(t,e){void 0===e&&(e=xk);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:e,transformOrigin:i}=LO(t).getComputedStyle(t);e&&(n=function(t,e,n){const i=function(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}(e);if(!i)return t;const{scaleX:r,scaleY:s,x:o,y:a}=i,l=t.left-o-(1-r)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=r?t.width/r:t.width,h=s?t.height/s:t.height;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l}}(n,e,i))}const{top:i,left:r,width:s,height:o,bottom:a,right:l}=n;return{top:i,left:r,width:s,height:o,bottom:a,right:l}}function Sk(t){return bk(t,{ignoreTransform:!0})}function wk(t,e){const n=[];return t?function i(r){if(null!=e&&n.length>=e)return n;if(!r)return n;if(OO(r)&&null!=r.scrollingElement&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!kO(r)||IO(r))return n;if(n.includes(r))return n;const s=LO(t).getComputedStyle(r);return r!==t&&function(t,e){void 0===e&&(e=LO(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(t=>{const i=e[t];return"string"==typeof i&&n.test(i)})}(r,s)&&n.push(r),function(t,e){return void 0===e&&(e=LO(t).getComputedStyle(t)),"fixed"===e.position}(r,s)?n:i(r.parentNode)}(t):n}function Ek(t){const[e]=wk(t,1);return null!=e?e:null}function Tk(t){return PO&&t?NO(t)?t:DO(t)?OO(t)||t===FO(t).scrollingElement?window:kO(t)?t:null:null:null}function Mk(t){return NO(t)?t.scrollX:t.scrollLeft}function Ck(t){return NO(t)?t.scrollY:t.scrollTop}function Ak(t){return{x:Mk(t),y:Ck(t)}}var Rk,Pk;function Nk(t){return!(!PO||!t)&&t===document.scrollingElement}function Dk(t){const e={x:0,y:0},n=Nk(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},i={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height};return{isTop:t.scrollTop<=e.y,isLeft:t.scrollLeft<=e.x,isBottom:t.scrollTop>=i.y,isRight:t.scrollLeft>=i.x,maxScroll:i,minScroll:e}}(Pk=Rk||(Rk={}))[Pk.Forward=1]="Forward",Pk[Pk.Backward=-1]="Backward";const Lk={x:.2,y:.2};function Ok(t,e,n,i,r){let{top:s,left:o,right:a,bottom:l}=n;void 0===i&&(i=10),void 0===r&&(r=Lk);const{isTop:c,isBottom:u,isLeft:h,isRight:d}=Dk(t),f={x:0,y:0},p={x:0,y:0},g=e.height*r.y,m=e.width*r.x;return!c&&s<=e.top+g?(f.y=Rk.Backward,p.y=i*Math.abs((e.top+g-s)/g)):!u&&l>=e.bottom-g&&(f.y=Rk.Forward,p.y=i*Math.abs((e.bottom-g-l)/g)),!d&&a>=e.right-m?(f.x=Rk.Forward,p.x=i*Math.abs((e.right-m-a)/m)):!h&&o<=e.left+m&&(f.x=Rk.Backward,p.x=i*Math.abs((e.left+m-o)/m)),{direction:f,speed:p}}function kk(t){if(t===document.scrollingElement){const{innerWidth:t,innerHeight:e}=window;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}const{top:e,left:n,right:i,bottom:r}=t.getBoundingClientRect();return{top:e,left:n,right:i,bottom:r,width:t.clientWidth,height:t.clientHeight}}function Ik(t){return t.reduce((t,e)=>qO(t,Ak(e)),ck)}const Fk=[["x",["left","right"],function(t){return t.reduce((t,e)=>t+Mk(e),0)}],["y",["top","bottom"],function(t){return t.reduce((t,e)=>t+Ck(e),0)}]];class Uk{constructor(t,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=wk(e),i=Ik(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[r,s,o]of Fk)for(const t of s)Object.defineProperty(this,t,{get:()=>{const e=o(n),s=i[r]-e;return this.rect[t]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class zk{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var e;return null==(e=this.target)?void 0:e.removeEventListener(...t)})},this.target=t}add(t,e,n){var i;null==(i=this.target)||i.addEventListener(t,e,n),this.listeners.push([t,e,n])}}function Bk(t,e){const n=Math.abs(t.x),i=Math.abs(t.y);return"number"==typeof e?Math.sqrt(n**2+i**2)>e:"x"in e&&"y"in e?n>e.x&&i>e.y:"x"in e?n>e.x:"y"in e&&i>e.y}var Hk,Vk,Wk,Gk;function jk(t){t.preventDefault()}function Xk(t){t.stopPropagation()}(Vk=Hk||(Hk={})).Click="click",Vk.DragStart="dragstart",Vk.Keydown="keydown",Vk.ContextMenu="contextmenu",Vk.Resize="resize",Vk.SelectionChange="selectionchange",Vk.VisibilityChange="visibilitychange",(Gk=Wk||(Wk={})).Space="Space",Gk.Down="ArrowDown",Gk.Right="ArrowRight",Gk.Left="ArrowLeft",Gk.Up="ArrowUp",Gk.Esc="Escape",Gk.Enter="Enter",Gk.Tab="Tab";const qk={start:[Wk.Space,Wk.Enter],cancel:[Wk.Esc],end:[Wk.Space,Wk.Enter,Wk.Tab]},Kk=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Wk.Right:return{...n,x:n.x+25};case Wk.Left:return{...n,x:n.x-25};case Wk.Down:return{...n,y:n.y+25};case Wk.Up:return{...n,y:n.y-25}}};class $k{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:e}}=t;this.props=t,this.listeners=new zk(FO(e)),this.windowListeners=new zk(LO(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Hk.Resize,this.handleCancel),this.windowListeners.add(Hk.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Hk.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:e}=this.props,n=t.node.current;n&&function(t,e){if(void 0===e&&(e=bk),!t)return;const{top:n,left:i,bottom:r,right:s}=e(t);Ek(t)&&(r<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}(n),e(ck)}handleKeyDown(t){if($O(t)){const{active:e,context:n,options:i}=this.props,{keyboardCodes:r=qk,coordinateGetter:s=Kk,scrollBehavior:o="smooth"}=i,{code:a}=t;if(r.end.includes(a))return void this.handleEnd(t);if(r.cancel.includes(a))return void this.handleCancel(t);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:ck;this.referenceCoordinates||(this.referenceCoordinates=c);const u=s(t,{active:e,context:n.current,currentCoordinates:c});if(u){const e=KO(u,c),i={x:0,y:0},{scrollableAncestors:r}=n.current;for(const n of r){const r=t.code,{isTop:s,isRight:a,isLeft:l,isBottom:c,maxScroll:h,minScroll:d}=Dk(n),f=kk(n),p={x:Math.min(r===Wk.Right?f.right-f.width/2:f.right,Math.max(r===Wk.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(r===Wk.Down?f.bottom-f.height/2:f.bottom,Math.max(r===Wk.Down?f.top:f.top+f.height/2,u.y))},g=r===Wk.Right&&!a||r===Wk.Left&&!l,m=r===Wk.Down&&!c||r===Wk.Up&&!s;if(g&&p.x!==u.x){const t=n.scrollLeft+e.x,s=r===Wk.Right&&t<=h.x||r===Wk.Left&&t>=d.x;if(s&&!e.y)return void n.scrollTo({left:t,behavior:o});i.x=s?n.scrollLeft-t:r===Wk.Right?n.scrollLeft-h.x:n.scrollLeft-d.x,i.x&&n.scrollBy({left:-i.x,behavior:o});break}if(m&&p.y!==u.y){const t=n.scrollTop+e.y,s=r===Wk.Down&&t<=h.y||r===Wk.Up&&t>=d.y;if(s&&!e.x)return void n.scrollTo({top:t,behavior:o});i.y=s?n.scrollTop-t:r===Wk.Down?n.scrollTop-h.y:n.scrollTop-d.y,i.y&&n.scrollBy({top:-i.y,behavior:o});break}}this.handleMove(t,qO(KO(u,this.referenceCoordinates),i))}}}handleMove(t,e){const{onMove:n}=this.props;t.preventDefault(),n(e)}handleEnd(t){const{onEnd:e}=this.props;t.preventDefault(),this.detach(),e()}handleCancel(t){const{onCancel:e}=this.props;t.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Yk(t){return Boolean(t&&"distance"in t)}function Jk(t){return Boolean(t&&"delay"in t)}$k.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:i=qk,onActivation:r}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(i.start.includes(o)){const e=s.activatorNode.current;return(!e||t.target===e)&&(t.preventDefault(),null==r||r({event:t.nativeEvent}),!0)}return!1}}];class Zk{constructor(t,e,n){var i;void 0===n&&(n=function(t){const{EventTarget:e}=LO(t);return t instanceof e?t:FO(t)}(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=e;const{event:r}=t,{target:s}=r;this.props=t,this.events=e,this.document=FO(s),this.documentListeners=new zk(this.document),this.listeners=new zk(n),this.windowListeners=new zk(LO(s)),this.initialCoordinates=null!=(i=YO(r))?i:ck,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:e,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Hk.Resize,this.handleCancel),this.windowListeners.add(Hk.DragStart,jk),this.windowListeners.add(Hk.VisibilityChange,this.handleCancel),this.windowListeners.add(Hk.ContextMenu,jk),this.documentListeners.add(Hk.Keydown,this.handleKeydown),e){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Jk(e))return this.timeoutId=setTimeout(this.handleStart,e.delay),void this.handlePending(e);if(Yk(e))return void this.handlePending(e)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,e){const{active:n,onPending:i}=this.props;i(n,t,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:t}=this,{onStart:e}=this.props;t&&(this.activated=!0,this.documentListeners.add(Hk.Click,Xk,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Hk.SelectionChange,this.removeTextSelection),e(t))}handleMove(t){var e;const{activated:n,initialCoordinates:i,props:r}=this,{onMove:s,options:{activationConstraint:o}}=r;if(!i)return;const a=null!=(e=YO(t))?e:ck,l=KO(i,a);if(!n&&o){if(Yk(o)){if(null!=o.tolerance&&Bk(l,o.tolerance))return this.handleCancel();if(Bk(l,o.distance))return this.handleStart()}return Jk(o)&&Bk(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}t.cancelable&&t.preventDefault(),s(a)}handleEnd(){const{onAbort:t,onEnd:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleCancel(){const{onAbort:t,onCancel:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleKeydown(t){t.code===Wk.Esc&&this.handleCancel()}removeTextSelection(){var t;null==(t=this.document.getSelection())||t.removeAllRanges()}}const Qk={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class tI extends Zk{constructor(t){const{event:e}=t,n=FO(e.target);super(t,Qk,n)}}tI.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return!(!n.isPrimary||0!==n.button)&&(null==i||i({event:n}),!0)}}];const eI={move:{name:"mousemove"},end:{name:"mouseup"}};var nI,iI;(iI=nI||(nI={}))[iI.RightClick=2]="RightClick";(class extends Zk{constructor(t){super(t,eI,FO(t.event.target))}}).activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;return n.button!==nI.RightClick&&(null==i||i({event:n}),!0)}}];const rI={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var sI,oI,aI,lI;function cI(t){let{acceleration:e,activator:n=sI.Pointer,canScroll:i,draggingRect:r,enabled:s,interval:o=5,order:a=aI.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:h,threshold:d}=t;const f=function(t){let{delta:e,disabled:n}=t;const i=WO(e);return HO(t=>{if(n||!i||!t)return uI;const r={x:Math.sign(e.x-i.x),y:Math.sign(e.y-i.y)};return{x:{[Rk.Backward]:t.x[Rk.Backward]||-1===r.x,[Rk.Forward]:t.x[Rk.Forward]||1===r.x},y:{[Rk.Backward]:t.y[Rk.Backward]||-1===r.y,[Rk.Forward]:t.y[Rk.Forward]||1===r.y}}},[n,e,i])}({delta:h,disabled:!s}),[p,g]=function(){const t=Vt.useRef(null);return[Vt.useCallback((e,n)=>{t.current=setInterval(e,n)},[]),Vt.useCallback(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]}(),m=Vt.useRef({x:0,y:0}),_=Vt.useRef({x:0,y:0}),v=Vt.useMemo(()=>{switch(n){case sI.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case sI.DraggableRect:return r}},[n,r,l]),y=Vt.useRef(null),x=Vt.useCallback(()=>{const t=y.current;if(!t)return;const e=m.current.x*_.current.x,n=m.current.y*_.current.y;t.scrollBy(e,n)},[]),b=Vt.useMemo(()=>a===aI.TreeOrder?[...c].reverse():c,[a,c]);Vt.useEffect(()=>{if(s&&c.length&&v){for(const t of b){if(!1===(null==i?void 0:i(t)))continue;const n=c.indexOf(t),r=u[n];if(!r)continue;const{direction:s,speed:a}=Ok(t,r,v,e,d);for(const t of["x","y"])f[t][s[t]]||(a[t]=0,s[t]=0);if(a.x>0||a.y>0)return g(),y.current=t,p(x,o),m.current=a,void(_.current=s)}m.current={x:0,y:0},_.current={x:0,y:0},g()}else g()},[e,x,i,g,s,o,JSON.stringify(v),JSON.stringify(f),p,c,b,u,JSON.stringify(d)])}(class extends Zk{constructor(t){super(t,rI)}static setup(){return window.addEventListener(rI.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(rI.move.name,t)};function t(){}}}).activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:i}=e;const{touches:r}=n;return!(r.length>1)&&(null==i||i({event:n}),!0)}}],(oI=sI||(sI={}))[oI.Pointer=0]="Pointer",oI[oI.DraggableRect=1]="DraggableRect",(lI=aI||(aI={}))[lI.TreeOrder=0]="TreeOrder",lI[lI.ReversedTreeOrder=1]="ReversedTreeOrder";const uI={x:{[Rk.Backward]:!1,[Rk.Forward]:!1},y:{[Rk.Backward]:!1,[Rk.Forward]:!1}};var hI,dI,fI;(dI=hI||(hI={}))[dI.Always=0]="Always",dI[dI.BeforeDragging=1]="BeforeDragging",dI[dI.WhileDragging=2]="WhileDragging",(fI||(fI={})).Optimized="optimized";const pI=new Map;function gI(t,e){return HO(n=>t?n||("function"==typeof e?e(t):t):null,[e,t])}function mI(t){let{callback:e,disabled:n}=t;const i=zO(e),r=Vt.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:t}=window;return new t(i)},[n]);return Vt.useEffect(()=>()=>null==r?void 0:r.disconnect(),[r]),r}function _I(t){return new Uk(bk(t),t)}function vI(t,e,n){void 0===e&&(e=_I);const[i,r]=Vt.useState(null);function s(){r(i=>{if(!t)return null;var r;if(!1===t.isConnected)return null!=(r=null!=i?i:n)?r:null;const s=e(t);return JSON.stringify(i)===JSON.stringify(s)?i:s})}const o=function(t){let{callback:e,disabled:n}=t;const i=zO(e),r=Vt.useMemo(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:t}=window;return new t(i)},[i,n]);return Vt.useEffect(()=>()=>null==r?void 0:r.disconnect(),[r]),r}({callback(e){if(t)for(const n of e){const{type:e,target:i}=n;if("childList"===e&&i instanceof HTMLElement&&i.contains(t)){s();break}}}}),a=mI({callback:s});return UO(()=>{s(),t?(null==a||a.observe(t),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==a||a.disconnect(),null==o||o.disconnect())},[t]),i}const yI=[];function xI(t,e){void 0===e&&(e=[]);const n=Vt.useRef(null);return Vt.useEffect(()=>{n.current=null},e),Vt.useEffect(()=>{const e=t!==ck;e&&!n.current&&(n.current=t),!e&&n.current&&(n.current=null)},[t]),n.current?KO(t,n.current):ck}function bI(t){return Vt.useMemo(()=>t?function(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}(t):null,[t])}const SI=[];function wI(t){let{measure:e}=t;const[n,i]=Vt.useState(null),r=mI({callback:Vt.useCallback(t=>{for(const{target:n}of t)if(kO(n)){i(t=>{const i=e(n);return t?{...t,width:i.width,height:i.height}:i});break}},[e])}),s=Vt.useCallback(t=>{const n=function(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return kO(e)?e:t}(t);null==r||r.disconnect(),n&&(null==r||r.observe(n)),i(n?e(n):null)},[e,r]),[o,a]=VO(s);return Vt.useMemo(()=>({nodeRef:o,rect:n,setRef:a}),[n,o,a])}const EI=[{sensor:tI,options:{}},{sensor:$k,options:{}}],TI={current:{}},MI={draggable:{measure:Sk},droppable:{measure:Sk,strategy:hI.WhileDragging,frequency:fI.Optimized},dragOverlay:{measure:bk}};class CI extends Map{get(t){var e;return null!=t&&null!=(e=super.get(t))?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:e}=t;return!e})}getNodeFor(t){var e,n;return null!=(e=null==(n=this.get(t))?void 0:n.node.current)?e:void 0}}const AI={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new CI,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lk},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:MI,measureDroppableContainers:lk,windowRect:null,measuringScheduled:!1},RI={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lk,draggableNodes:new Map,over:null,measureDroppableContainers:lk},PI=Vt.createContext(RI),NI=Vt.createContext(AI);function DI(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new CI}}}function LI(t,e){switch(e.type){case ak.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ak.DragMove:return null==t.draggable.active?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case ak.DragEnd:case ak.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ak.RegisterDroppable:{const{element:n}=e,{id:i}=n,r=new CI(t.droppable.containers);return r.set(i,n),{...t,droppable:{...t.droppable,containers:r}}}case ak.SetDroppableDisabled:{const{id:n,key:i,disabled:r}=e,s=t.droppable.containers.get(n);if(!s||i!==s.key)return t;const o=new CI(t.droppable.containers);return o.set(n,{...s,disabled:r}),{...t,droppable:{...t.droppable,containers:o}}}case ak.UnregisterDroppable:{const{id:n,key:i}=e,r=t.droppable.containers.get(n);if(!r||i!==r.key)return t;const s=new CI(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function OI(t){let{disabled:e}=t;const{active:n,activatorEvent:i,draggableNodes:r}=Vt.useContext(PI),s=WO(i),o=WO(null==n?void 0:n.id);return Vt.useEffect(()=>{if(!e&&!i&&s&&null!=o){if(!$O(s))return;if(document.activeElement===s.target)return;const t=r.get(o);if(!t)return;const{activatorNode:e,node:n}=t;if(!e.current&&!n.current)return;requestAnimationFrame(()=>{for(const t of[e.current,n.current]){if(!t)continue;const e=QO(t);if(e){e.focus();break}}})}},[i,e,r,o,s]),null}const kI=Vt.createContext({...ck,scaleX:1,scaleY:1});var II,FI;(FI=II||(II={}))[FI.Uninitialized=0]="Uninitialized",FI[FI.Initializing=1]="Initializing",FI[FI.Initialized=2]="Initialized";const UI=Vt.memo(function(t){var e,n,i,r;let{id:s,accessibility:o,autoScroll:a=!0,children:l,sensors:c=EI,collisionDetection:u=mk,measuring:h,modifiers:d,...f}=t;const p=Vt.useReducer(LI,void 0,DI),[g,m]=p,[_,v]=function(){const[t]=Vt.useState(()=>new Set),e=Vt.useCallback(e=>(t.add(e),()=>t.delete(e)),[t]);return[Vt.useCallback(e=>{let{type:n,event:i}=e;t.forEach(t=>{var e;return null==(e=t[n])?void 0:e.call(t,i)})},[t]),e]}(),[y,x]=Vt.useState(II.Uninitialized),b=y===II.Initialized,{draggable:{active:S,nodes:w,translate:E},droppable:{containers:T}}=g,M=null!=S?w.get(S):null,C=Vt.useRef({initial:null,translated:null}),A=Vt.useMemo(()=>{var t;return null!=S?{id:S,data:null!=(t=null==M?void 0:M.data)?t:TI,rect:C}:null},[S,M]),R=Vt.useRef(null),[P,N]=Vt.useState(null),[D,L]=Vt.useState(null),O=BO(f,Object.values(f)),k=jO("DndDescribedBy",s),I=Vt.useMemo(()=>T.getEnabled(),[T]),F=(U=h,Vt.useMemo(()=>({draggable:{...MI.draggable,...null==U?void 0:U.draggable},droppable:{...MI.droppable,...null==U?void 0:U.droppable},dragOverlay:{...MI.dragOverlay,...null==U?void 0:U.dragOverlay}}),[null==U?void 0:U.draggable,null==U?void 0:U.droppable,null==U?void 0:U.dragOverlay]));var U;const{droppableRects:z,measureDroppableContainers:B,measuringScheduled:H}=function(t,e){let{dragging:n,dependencies:i,config:r}=e;const[s,o]=Vt.useState(null),{frequency:a,measure:l,strategy:c}=r,u=Vt.useRef(t),h=function(){switch(c){case hI.Always:return!1;case hI.BeforeDragging:return n;default:return!n}}(),d=BO(h),f=Vt.useCallback(function(t){void 0===t&&(t=[]),d.current||o(e=>null===e?t:e.concat(t.filter(t=>!e.includes(t))))},[d]),p=Vt.useRef(null),g=HO(e=>{if(h&&!n)return pI;if(!e||e===pI||u.current!==t||null!=s){const e=new Map;for(let n of t){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){e.set(n.id,n.rect.current);continue}const t=n.node.current,i=t?new Uk(l(t),t):null;n.rect.current=i,i&&e.set(n.id,i)}return e}return e},[t,s,n,h,l]);return Vt.useEffect(()=>{u.current=t},[t]),Vt.useEffect(()=>{h||f()},[n,h]),Vt.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),Vt.useEffect(()=>{h||"number"!=typeof a||null!==p.current||(p.current=setTimeout(()=>{f(),p.current=null},a))},[a,h,f,...i]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=s}}(I,{dragging:b,dependencies:[E.x,E.y],config:F.droppable}),V=function(t,e){const n=null!=e?t.get(e):void 0,i=n?n.node.current:null;return HO(t=>{var n;return null==e?null:null!=(n=null!=i?i:t)?n:null},[i,e])}(w,S),W=Vt.useMemo(()=>D?YO(D):null,[D]),G=function(){const t=!1===(null==P?void 0:P.autoScrollEnabled),e="object"==typeof a?!1===a.enabled:!1===a,n=b&&!t&&!e;if("object"==typeof a)return{...a,enabled:n};return{enabled:n}}(),j=function(t,e){return gI(t,e)}(V,F.draggable.measure);!function(t){let{activeNode:e,measure:n,initialRect:i,config:r=!0}=t;const s=Vt.useRef(!1),{x:o,y:a}="boolean"==typeof r?{x:r,y:r}:r;UO(()=>{if(!o&&!a||!e)return void(s.current=!1);if(s.current||!i)return;const t=null==e?void 0:e.node.current;if(!t||!1===t.isConnected)return;const r=_k(n(t),i);if(o||(r.x=0),a||(r.y=0),s.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const e=Ek(t);e&&e.scrollBy({top:r.y,left:r.x})}},[e,o,a,i,n])}({activeNode:null!=S?w.get(S):null,config:G.layoutShiftCompensation,initialRect:j,measure:F.draggable.measure});const X=vI(V,F.draggable.measure,j),q=vI(V?V.parentElement:null),K=Vt.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),$=T.getNodeFor(null==(e=K.current.over)?void 0:e.id),Y=wI({measure:F.dragOverlay.measure}),J=null!=(n=Y.nodeRef.current)?n:V,Z=b?null!=(i=Y.rect)?i:X:null,Q=Boolean(Y.nodeRef.current&&Y.rect),tt=_k(et=Q?null:X,gI(et));var et;const nt=bI(J?LO(J):null),it=function(t){const e=Vt.useRef(t),n=HO(n=>t?n&&n!==yI&&t&&e.current&&t.parentNode===e.current.parentNode?n:wk(t):yI,[t]);return Vt.useEffect(()=>{e.current=t},[t]),n}(b?null!=$?$:V:null),rt=function(t,e){void 0===e&&(e=bk);const[n]=t,i=bI(n?LO(n):null),[r,s]=Vt.useState(SI);function o(){s(()=>t.length?t.map(t=>Nk(t)?i:new Uk(e(t),t)):SI)}const a=mI({callback:o});return UO(()=>{null==a||a.disconnect(),o(),t.forEach(t=>null==a?void 0:a.observe(t))},[t]),r}(it),st=function(t,e){let{transform:n,...i}=e;return null!=t&&t.length?t.reduce((t,e)=>e({transform:t,...i}),n):n}(d,{transform:{x:E.x-tt.x,y:E.y-tt.y,scaleX:1,scaleY:1},activatorEvent:D,active:A,activeNodeRect:X,containerNodeRect:q,draggingNodeRect:Z,over:K.current.over,overlayNodeRect:Y.rect,scrollableAncestors:it,scrollableAncestorRects:rt,windowRect:nt}),ot=W?qO(W,E):null,at=function(t){const[e,n]=Vt.useState(null),i=Vt.useRef(t),r=Vt.useCallback(t=>{const e=Tk(t.target);e&&n(t=>t?(t.set(e,Ak(e)),new Map(t)):null)},[]);return Vt.useEffect(()=>{const e=i.current;if(t!==e){s(e);const o=t.map(t=>{const e=Tk(t);return e?(e.addEventListener("scroll",r,{passive:!0}),[e,Ak(e)]):null}).filter(t=>null!=t);n(o.length?new Map(o):null),i.current=t}return()=>{s(t),s(e)};function s(t){t.forEach(t=>{const e=Tk(t);null==e||e.removeEventListener("scroll",r)})}},[r,t]),Vt.useMemo(()=>t.length?e?Array.from(e.values()).reduce((t,e)=>qO(t,e),ck):Ik(t):ck,[t,e])}(it),lt=xI(at),ct=xI(at,[X]),ut=qO(st,lt),ht=Z?yk(Z,st):null,dt=A&&ht?u({active:A,collisionRect:ht,droppableRects:z,droppableContainers:I,pointerCoordinates:ot}):null,ft=function(t,e){if(!t||0===t.length)return null;const[n]=t;return e?n[e]:n}(dt,"id"),[pt,gt]=Vt.useState(null),mt=function(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}(Q?st:qO(st,ct),null!=(r=null==pt?void 0:pt.rect)?r:null,X),_t=Vt.useRef(null),vt=Vt.useCallback((t,e)=>{let{sensor:n,options:i}=e;if(null==R.current)return;const r=w.get(R.current);if(!r)return;const s=t.nativeEvent,o=new n({active:R.current,activeNode:r,event:s,options:i,context:K,onAbort(t){if(!w.get(t))return;const{onDragAbort:e}=O.current,n={id:t};null==e||e(n),_({type:"onDragAbort",event:n})},onPending(t,e,n,i){if(!w.get(t))return;const{onDragPending:r}=O.current,s={id:t,constraint:e,initialCoordinates:n,offset:i};null==r||r(s),_({type:"onDragPending",event:s})},onStart(t){const e=R.current;if(null==e)return;const n=w.get(e);if(!n)return;const{onDragStart:i}=O.current,r={activatorEvent:s,active:{id:e,data:n.data,rect:C}};qt.unstable_batchedUpdates(()=>{null==i||i(r),x(II.Initializing),m({type:ak.DragStart,initialCoordinates:t,active:e}),_({type:"onDragStart",event:r}),N(_t.current),L(s)})},onMove(t){m({type:ak.DragMove,coordinates:t})},onEnd:a(ak.DragEnd),onCancel:a(ak.DragCancel)});function a(t){return async function(){const{active:e,collisions:n,over:i,scrollAdjustedTranslate:r}=K.current;let o=null;if(e&&r){const{cancelDrop:a}=O.current;if(o={activatorEvent:s,active:e,collisions:n,delta:r,over:i},t===ak.DragEnd&&"function"==typeof a){await Promise.resolve(a(o))&&(t=ak.DragCancel)}}R.current=null,qt.unstable_batchedUpdates(()=>{m({type:t}),x(II.Uninitialized),gt(null),N(null),L(null),_t.current=null;const e=t===ak.DragEnd?"onDragEnd":"onDragCancel";if(o){const t=O.current[e];null==t||t(o),_({type:e,event:o})}})}}_t.current=o},[w]),yt=function(t,e){return Vt.useMemo(()=>t.reduce((t,n)=>{const{sensor:i}=n;return[...t,...i.activators.map(t=>({eventName:t.eventName,handler:e(t.handler,n)}))]},[]),[t,e])}(c,Vt.useCallback((t,e)=>(n,i)=>{const r=n.nativeEvent,s=w.get(i);if(null!==R.current||!s||r.dndKit||r.defaultPrevented)return;const o={active:s};!0===t(n,e.options,o)&&(r.dndKit={capturedBy:e.sensor},R.current=i,vt(n,e))},[w,vt]));!function(t){Vt.useEffect(()=>{if(!PO)return;const e=t.map(t=>{let{sensor:e}=t;return null==e.setup?void 0:e.setup()});return()=>{for(const t of e)null==t||t()}},t.map(t=>{let{sensor:e}=t;return e}))}(c),UO(()=>{X&&y===II.Initializing&&x(II.Initialized)},[X,y]),Vt.useEffect(()=>{const{onDragMove:t}=O.current,{active:e,activatorEvent:n,collisions:i,over:r}=K.current;if(!e||!n)return;const s={active:e,activatorEvent:n,collisions:i,delta:{x:ut.x,y:ut.y},over:r};qt.unstable_batchedUpdates(()=>{null==t||t(s),_({type:"onDragMove",event:s})})},[ut.x,ut.y]),Vt.useEffect(()=>{const{active:t,activatorEvent:e,collisions:n,droppableContainers:i,scrollAdjustedTranslate:r}=K.current;if(!t||null==R.current||!e||!r)return;const{onDragOver:s}=O.current,o=i.get(ft),a=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:t,activatorEvent:e,collisions:n,delta:{x:r.x,y:r.y},over:a};qt.unstable_batchedUpdates(()=>{gt(a),null==s||s(l),_({type:"onDragOver",event:l})})},[ft]),UO(()=>{K.current={activatorEvent:D,active:A,activeNode:V,collisionRect:ht,collisions:dt,droppableRects:z,draggableNodes:w,draggingNode:J,draggingNodeRect:Z,droppableContainers:T,over:pt,scrollableAncestors:it,scrollAdjustedTranslate:ut},C.current={initial:Z,translated:ht}},[A,V,dt,ht,w,J,Z,z,T,pt,it,ut]),cI({...G,delta:E,draggingRect:ht,pointerCoordinates:ot,scrollableAncestors:it,scrollableAncestorRects:rt});const xt=Vt.useMemo(()=>({active:A,activeNode:V,activeNodeRect:X,activatorEvent:D,collisions:dt,containerNodeRect:q,dragOverlay:Y,draggableNodes:w,droppableContainers:T,droppableRects:z,over:pt,measureDroppableContainers:B,scrollableAncestors:it,scrollableAncestorRects:rt,measuringConfiguration:F,measuringScheduled:H,windowRect:nt}),[A,V,X,D,dt,q,Y,w,T,z,pt,B,it,rt,F,H,nt]),bt=Vt.useMemo(()=>({activatorEvent:D,activators:yt,active:A,activeNodeRect:X,ariaDescribedById:{draggable:k},dispatch:m,draggableNodes:w,over:pt,measureDroppableContainers:B}),[D,yt,A,X,m,k,w,pt,B]);return Xt.createElement(ik.Provider,{value:v},Xt.createElement(PI.Provider,{value:bt},Xt.createElement(NI.Provider,{value:xt},Xt.createElement(kI.Provider,{value:mt},l)),Xt.createElement(OI,{disabled:!1===(null==o?void 0:o.restoreFocus)})),Xt.createElement(ok,{...o,hiddenTextDescribedById:k}))}),zI=Vt.createContext(null),BI="button";function HI(t){let{id:e,data:n,disabled:i=!1,attributes:r}=t;const s=jO("Draggable"),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:h,over:d}=Vt.useContext(PI),{role:f=BI,roleDescription:p="draggable",tabIndex:g=0}=null!=r?r:{},m=(null==l?void 0:l.id)===e,_=Vt.useContext(m?kI:zI),[v,y]=VO(),[x,b]=VO(),S=function(t,e){return Vt.useMemo(()=>t.reduce((t,n)=>{let{eventName:i,handler:r}=n;return t[i]=t=>{r(t,e)},t},{}),[t,e])}(o,e),w=BO(n);UO(()=>(h.set(e,{id:e,key:s,node:v,activatorNode:x,data:w}),()=>{const t=h.get(e);t&&t.key===s&&h.delete(e)}),[h,e]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:Vt.useMemo(()=>({role:f,tabIndex:g,"aria-disabled":i,"aria-pressed":!(!m||f!==BI)||void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[i,f,g,m,p,u.draggable]),isDragging:m,listeners:i?void 0:S,node:v,over:d,setNodeRef:y,setActivatorNodeRef:b,transform:_}}const VI={timeout:25};function WI(t,e,n){const i=t.slice();return i.splice(n<0?i.length+n:n,0,i.splice(e,1)[0]),i}function GI(t,e){return t.reduce((t,n,i)=>{const r=e.get(n);return r&&(t[i]=r),t},Array(t.length))}function jI(t){return null!==t&&t>=0}const XI=t=>{let{rects:e,activeIndex:n,overIndex:i,index:r}=t;const s=WI(e,i,n),o=e[r],a=s[r];return a&&o?{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}:null},qI={scaleX:1,scaleY:1},KI=t=>{var e;let{activeIndex:n,activeNodeRect:i,index:r,rects:s,overIndex:o}=t;const a=null!=(e=s[n])?e:i;if(!a)return null;if(r===n){const t=s[o];return t?{x:0,y:n<o?t.top+t.height-(a.top+a.height):t.top-a.top,...qI}:null}const l=function(t,e,n){const i=t[e],r=t[e-1],s=t[e+1];if(!i)return 0;if(n<e)return r?i.top-(r.top+r.height):s?s.top-(i.top+i.height):0;return s?s.top-(i.top+i.height):r?i.top-(r.top+r.height):0}(s,r,n);return r>n&&r<=o?{x:0,y:-a.height-l,...qI}:r<n&&r>=o?{x:0,y:a.height+l,...qI}:{x:0,y:0,...qI}};const $I="Sortable",YI=Xt.createContext({activeIndex:-1,containerId:$I,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:XI,disabled:{draggable:!1,droppable:!1}});function JI(t){let{children:e,id:n,items:i,strategy:r=XI,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=Vt.useContext(NI),h=jO($I,n),d=Boolean(null!==a.rect),f=Vt.useMemo(()=>i.map(t=>"object"==typeof t&&"id"in t?t.id:t),[i]),p=null!=o,g=o?f.indexOf(o.id):-1,m=c?f.indexOf(c.id):-1,_=Vt.useRef(f),v=!function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(f,_.current),y=-1!==m&&-1===g||v,x=function(t){return"boolean"==typeof t?{draggable:t,droppable:t}:t}(s);UO(()=>{v&&p&&u(f)},[v,f,p,u]),Vt.useEffect(()=>{_.current=f},[f]);const b=Vt.useMemo(()=>({activeIndex:g,containerId:h,disabled:x,disableTransforms:y,items:f,overIndex:m,useDragOverlay:d,sortedRects:GI(f,l),strategy:r}),[g,h,x.draggable,x.droppable,y,f,m,l,d,r]);return Xt.createElement(YI.Provider,{value:b},e)}const ZI=t=>{let{id:e,items:n,activeIndex:i,overIndex:r}=t;return WI(n,i,r).indexOf(e)},QI=t=>{let{containerId:e,isSorting:n,wasDragging:i,index:r,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!(!c||!i)&&((a===s||r!==o)&&(!!n||o!==r&&e===l))},tF={duration:200,easing:"ease"},eF="transform",nF=JO.Transition.toString({property:eF,duration:0,easing:"linear"}),iF={roleDescription:"sortable"};function rF(t){let{animateLayoutChanges:e=QI,attributes:n,disabled:i,data:r,getNewIndex:s=ZI,id:o,strategy:a,resizeObserverConfig:l,transition:c=tF}=t;const{items:u,containerId:h,activeIndex:d,disabled:f,disableTransforms:p,sortedRects:g,overIndex:m,useDragOverlay:_,strategy:v}=Vt.useContext(YI),y=function(t,e){var n,i;if("boolean"==typeof t)return{draggable:t,droppable:!1};return{draggable:null!=(n=null==t?void 0:t.draggable)?n:e.draggable,droppable:null!=(i=null==t?void 0:t.droppable)?i:e.droppable}}(i,f),x=u.indexOf(o),b=Vt.useMemo(()=>({sortable:{containerId:h,index:x,items:u},...r}),[h,r,x,u]),S=Vt.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:w,node:E,isOver:T,setNodeRef:M}=function(t){let{data:e,disabled:n=!1,id:i,resizeObserverConfig:r}=t;const s=jO("Droppable"),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=Vt.useContext(PI),u=Vt.useRef({disabled:n}),h=Vt.useRef(!1),d=Vt.useRef(null),f=Vt.useRef(null),{disabled:p,updateMeasurementsFor:g,timeout:m}={...VI,...r},_=BO(null!=g?g:i),v=mI({callback:Vt.useCallback(()=>{h.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(_.current)?_.current:[_.current]),f.current=null},m)):h.current=!0},[m]),disabled:p||!o}),y=Vt.useCallback((t,e)=>{v&&(e&&(v.unobserve(e),h.current=!1),t&&v.observe(t))},[v]),[x,b]=VO(y),S=BO(e);return Vt.useEffect(()=>{v&&x.current&&(v.disconnect(),h.current=!1,v.observe(x.current))},[x,v]),Vt.useEffect(()=>(a({type:ak.RegisterDroppable,element:{id:i,key:s,disabled:n,node:x,rect:d,data:S}}),()=>a({type:ak.UnregisterDroppable,key:s,id:i})),[i]),Vt.useEffect(()=>{n!==u.current.disabled&&(a({type:ak.SetDroppableDisabled,id:i,key:s,disabled:n}),u.current.disabled=n)},[i,s,n,a]),{active:o,rect:d,isOver:(null==l?void 0:l.id)===i,node:x,over:l,setNodeRef:b}}({id:o,data:b,disabled:y.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:C,activatorEvent:A,activeNodeRect:R,attributes:P,setNodeRef:N,listeners:D,isDragging:L,over:O,setActivatorNodeRef:k,transform:I}=HI({id:o,data:b,attributes:{...iF,...n},disabled:y.draggable}),F=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Vt.useMemo(()=>t=>{e.forEach(e=>e(t))},e)}(M,N),U=Boolean(C),z=U&&!p&&jI(d)&&jI(m),B=!_&&L,H=B&&z?I:null,V=z?null!=H?H:(null!=a?a:v)({rects:g,activeNodeRect:R,activeIndex:d,overIndex:m,index:x}):null,W=jI(d)&&jI(m)?s({id:o,items:u,activeIndex:d,overIndex:m}):x,G=null==C?void 0:C.id,j=Vt.useRef({activeId:G,items:u,newIndex:W,containerId:h}),X=u!==j.current.items,q=e({active:C,containerId:h,isDragging:L,isSorting:U,id:o,index:x,items:u,newIndex:j.current.newIndex,previousItems:j.current.items,previousContainerId:j.current.containerId,transition:c,wasDragging:null!=j.current.activeId}),K=function(t){let{disabled:e,index:n,node:i,rect:r}=t;const[s,o]=Vt.useState(null),a=Vt.useRef(n);return UO(()=>{if(!e&&n!==a.current&&i.current){const t=r.current;if(t){const e=bk(i.current,{ignoreTransform:!0}),n={x:t.left-e.left,y:t.top-e.top,scaleX:t.width/e.width,scaleY:t.height/e.height};(n.x||n.y)&&o(n)}}n!==a.current&&(a.current=n)},[e,n,i,r]),Vt.useEffect(()=>{s&&o(null)},[s]),s}({disabled:!q,index:x,node:E,rect:w});return Vt.useEffect(()=>{U&&j.current.newIndex!==W&&(j.current.newIndex=W),h!==j.current.containerId&&(j.current.containerId=h),u!==j.current.items&&(j.current.items=u)},[U,W,h,u]),Vt.useEffect(()=>{if(G===j.current.activeId)return;if(null!=G&&null==j.current.activeId)return void(j.current.activeId=G);const t=setTimeout(()=>{j.current.activeId=G},50);return()=>clearTimeout(t)},[G]),{active:C,activeIndex:d,attributes:P,data:b,rect:w,index:x,newIndex:W,items:u,isOver:T,isSorting:U,isDragging:L,listeners:D,node:E,overIndex:m,over:O,setNodeRef:F,setActivatorNodeRef:k,setDroppableNodeRef:M,setDraggableNodeRef:N,transform:null!=K?K:V,transition:function(){if(K||X&&j.current.newIndex===x)return nF;if(B&&!$O(A)||!c)return;if(U||q)return JO.Transition.toString({...c,property:eF});return}()}}Wk.Down,Wk.Right,Wk.Up,Wk.Left;export{XD as $,vl as A,wa as B,JO as C,UI as D,oN as E,ea as F,tL as G,iC as H,ID as I,yD as J,TD as K,WI as L,nl as M,Zt as N,ne as O,La as P,Me as Q,nD as R,JI as S,el as T,Ce as U,Ae as V,ih as W,ae as X,MT as Y,zw as Z,ue as _,Ha as a,Yt as a0,Ee as a1,De as a2,oe as a3,ee as a4,an as a5,hn as a6,ze as a7,Ue as a8,bn as a9,RO as aA,SO as aB,MO as aC,CO as aD,wO as aE,TO as aF,EO as aG,On as aH,i_ as aI,Dn as aa,p_ as ab,Zb as ac,Xx as ad,Mb as ae,jb as af,m_ as ag,_b as ah,Hv as ai,Jv as aj,cC as ak,BC as al,sC as am,uT as an,CR as ao,jR as ap,UP as aq,_N as ar,kP as as,FP as at,bN as au,xN as av,tD as aw,QN as ax,pD as ay,xP as az,Go as b,pk as c,In as d,_l as e,pl as f,Qa as g,ba as h,fm as i,ca as j,Jw as k,cM as l,XT as m,dN as n,vA as o,jM as p,qD as q,mM as r,YN as s,aC as t,rF as u,KI as v,lN as w,JN as x,VN as y,FN as z};
//# sourceMappingURL=chunk-ac0f623e.js.map
