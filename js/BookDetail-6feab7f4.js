import{u as e,b as t,j as a,c as r}from"./chunk-9a18e39e.js";import{r as s,L as i,e as l,u as n,b as d}from"./chunk-324910f1.js";import{n as o,o as c,p as m,q as x,i as g,f as u,r as y,g as h,m as p,s as b,j as v,t as f,l as j,v as k}from"./index-5373f156.js";import{f as N,a as w}from"./chunk-abc135ce.js";import{B as _,a as F,b as S}from"./chunk-ee28cf2a.js";import{R as C}from"./chunk-5462ce7c.js";import{m as $,A as I}from"./chunk-816c63d1.js";import{u as E}from"./chunk-52ed7ddd.js";import{u as A}from"./chunk-43ad9be7.js";const D=a=>{const r=e(),[i,l]=s.useState(null),[n,d]=s.useState(null),[c,m]=s.useState({topic:"",content:""}),[x,g]=s.useState(!1),[u,y]=s.useState(null),h=(a=>{const r=e();return t({mutationFn:async e=>(await o.createForBook(a,e)).data,onSuccess:()=>{r.invalidateQueries({queryKey:[_,"detail",a]}),r.invalidateQueries({queryKey:[_,"list"]}),r.invalidateQueries({queryKey:["chapters",a]})}})})(a),p=(a=>{const r=e();return t({mutationFn:async({learningId:e,data:t})=>(await o.updateForBook(a,e,t)).data,onSuccess:()=>{r.invalidateQueries({queryKey:[_,"detail",a]}),r.invalidateQueries({queryKey:[_,"list"]}),r.invalidateQueries({queryKey:["chapters",a]})}})})(a),b=(a=>{const r=e();return t({mutationFn:async e=>{await o.deleteForBook(a,e)},onSuccess:()=>{r.invalidateQueries({queryKey:[_,"detail",a]}),r.invalidateQueries({queryKey:[_,"list"]}),r.invalidateQueries({queryKey:["chapters",a]})}})})(a),v=(a=>{const r=e();return t({mutationFn:async({learningId:e,skillIds:t})=>(await o.updateSkills(a,e,t)).data,onSuccess:()=>{r.invalidateQueries({queryKey:[_,"detail",a]}),r.invalidateQueries({queryKey:[_,"list"]}),r.invalidateQueries({queryKey:["chapters",a]})}})})(a),f=h.isPending||p.isPending||b.isPending||v.isPending,j=()=>{l(null),d(null),m({topic:"",content:""}),g(!1)},k=()=>{j(),y(null)};return{editingLearningId:i,currentFormData:c,setCurrentFormData:m,showAddForm:x,isSaving:f,learningApiError:u,handleToggleAddForm:()=>{i&&k(),x&&m({topic:"",content:""}),g(e=>!e),y(null)},handleAddLearning:async()=>{if(c.topic&&c.content)try{y(null),await h.mutateAsync(c),j()}catch(e){y("학습 내용 추가에 실패했습니다.")}},handleDeleteLearning:async(e,t)=>{if(confirm("이 학습 내용을 삭제하시겠습니까?"))try{y(null),t?await o.deleteForChapter(a,t,e):await b.mutateAsync(e),r.invalidateQueries({queryKey:[_,"detail",a]}),r.invalidateQueries({queryKey:["chapters",a]})}catch(s){y("학습 내용 삭제에 실패했습니다.")}},handleStartEdit:(e,t)=>{g(!1),l(e._id),d(t||null),m({topic:e.topic,content:e.content}),y(null)},handleSaveEdit:async()=>{if(i&&c.topic&&c.content)try{if(y(null),n){await o.updateForChapter(a,n,i,c)}else await p.mutateAsync({learningId:i,data:c});r.invalidateQueries({queryKey:[_,"detail",a]}),r.invalidateQueries({queryKey:["chapters",a]}),j()}catch(e){y("학습 내용 수정에 실패했습니다.")}},handleCancelEdit:k,handleSkillLinkChange:async(e,t,s)=>{const i=[_,"detail",a],l=["chapters",a],n=r.getQueryData(i),d=r.getQueryData(l);try{y(null);let a=[];const o=(d||[]).flatMap(e=>e.learnings||[]).find(t=>t._id===e)||((null==n?void 0:n.learnings)||[]).find(t=>t._id===e);if(o){const e=o.skillIds||[];a=s?Array.from(new Set([...e,t])):e.filter(e=>e!==t)}else a=s?[t]:[];d&&r.setQueryData(l,t=>t?t.map(t=>({...t,learnings:(t.learnings||[]).map(t=>t._id===e?{...t,skillIds:a}:t)})):t),n&&r.setQueryData(i,t=>t?t.chapters&&t.chapters.length>0?{...t,chapters:t.chapters.map(t=>({...t,learnings:(t.learnings||[]).map(t=>t._id===e?{...t,skillIds:a}:t)}))}:{...t,learnings:(t.learnings||[]).map(t=>t._id===e?{...t,skillIds:a}:t)}:t),await v.mutateAsync({learningId:e,skillIds:a})}catch(o){y("스킬 연결/해제에 실패했습니다."),d&&r.setQueryData(l,d),n?r.setQueryData(i,n):(r.invalidateQueries({queryKey:i}),r.invalidateQueries({queryKey:l}))}}}},Q=(e,t=200)=>{const a=((e,t=200)=>{if(!e)return 0;const a=e.trim().split(/\s+/).length,r=Math.ceil(a/t);return Math.max(1,r)})(e,t);return(e=>0===e?"읽기 시간 없음":1===e?"1분 읽기":`${e}분 읽기`)(a)},q=({learning:e,index:t,isAuthenticated:r,isEditing:l,currentFormData:n,setCurrentFormData:d,onStartEdit:o,onSaveEdit:g,onCancelEdit:u,onDelete:y,isSaving:h=!1,allSkillsMap:p,onSkillLinkChange:b,chapterId:v})=>{var f;const j=s.useMemo(()=>p?(e.skillIds||[]).map(e=>p.get(e)).filter(e=>!!e):[],[e.skillIds,p]),k=s.useMemo(()=>p?Array.from(p.values()):[],[p]);return a.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"card p-6 "+(l?"border-2 border-primary-500 shadow-xl":""),children:l?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"학습 주제"}),a.jsx("input",{type:"text",id:"topic",value:n.topic,onChange:e=>d(t=>({...t,topic:e.target.value})),placeholder:"학습 주제를 입력하세요",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"학습 내용"}),a.jsx(C,{value:n.content,onChange:e=>d(t=>({...t,content:e})),placeholder:"학습 내용을 입력하세요. 리치텍스트 에디터를 사용하여 다양한 서식을 적용할 수 있습니다.",rows:8,className:"min-h-[200px]"})]}),r&&p&&k.length>0&&a.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(c,{size:14,className:"text-primary-600"})," 관련 스킬 연결 (",(null==(f=e.skillIds)?void 0:f.length)||0,"개 연결됨)"]}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-2 rounded-lg bg-gray-50 dark:bg-gray-700/50",children:k.map(t=>{var r;const s=null==(r=e.skillIds)?void 0:r.includes(t._id),i=t.color&&s?{backgroundColor:t.color,color:"#FFFFFF"}:void 0;return a.jsxs("button",{onClick:()=>(t=>{var a;if(!b)return;const r=(null==(a=e.skillIds)?void 0:a.includes(t))||!1;b(e._id,t,!r)})(t._id),type:"button",className:"px-3 py-1 text-xs font-medium rounded-full transition-all "+(s?"text-white hover:opacity-80":"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500"),style:i,children:[s?"✔️":"➕"," ",t.name]},t._id)})})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:()=>g(),disabled:h||!n.topic.trim()||!n.content.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:h?"저장 중...":"수정"}),a.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e.topic}),r&&a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>o(e,v),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-blue-600 dark:text-blue-400","aria-label":"수정",children:a.jsx(m,{size:16})}),a.jsx("button",{onClick:()=>y(e._id,v),className:"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400","aria-label":"삭제",children:a.jsx(x,{size:16})})]})]}),j.length>0&&a.jsxs("div",{className:"flex flex-wrap items-start gap-2 mb-4",children:[a.jsx(c,{size:16,className:"text-gray-500 dark:text-gray-400 mt-1 shrink-0",title:"관련 스킬"}),j.map(e=>{const t=e.color?{backgroundColor:`${r=e.color}1A`,color:r}:void 0;var r;return a.jsx(i,{to:`/projects?skillId=${e._id}`,title:`${e.name} 스킬이 사용된 프로젝트 보기`,className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-all hover:opacity-80 hover:ring-2",style:{...t,"--tw-ring-color":e.color||"#3B82F6"},children:e.name},e._id)})]}),a.jsx("div",{className:"text-gray-600 dark:text-gray-300 leading-relaxed prose prose-sm max-w-none dark:prose-invert",dangerouslySetInnerHTML:{__html:(_=e.content,_?_.replace(/```([\s\S]*?)```/g,'<pre class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto my-4"><code class="text-sm font-mono">$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm font-mono">$1</code>').replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/__(.*?)__/g,"<strong>$1</strong>").replace(/(^|[^*])\*([^*\s][^*]*[^*\s]|[^*\s])\*([^*]|$)/g,"$1<em>$2</em>$3").replace(/(^|[^_])\_([^_\s][^_]*[^_\s]|[^_\s])\_([^_]|$)/g,"$1<em>$2</em>$3").replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-primary-600 hover:text-primary-700 underline" target="_blank" rel="noopener noreferrer">$1</a>').replace(/^### (.*$)/gm,'<h3 class="text-lg font-semibold text-gray-900 dark:text-white mt-4 mb-2">$1</h3>').replace(/^## (.*$)/gm,'<h2 class="text-xl font-semibold text-gray-900 dark:text-white mt-4 mb-2">$1</h2>').replace(/^# (.*$)/gm,'<h1 class="text-2xl font-bold text-gray-900 dark:text-white mt-4 mb-2">$1</h1>').replace(/^[\s]*[-*] (.*$)/gm,'<li class="ml-4">$1</li>').replace(/(<li class="ml-4">.*<\/li>)/s,'<ul class="list-disc list-inside my-2">$1</ul>').replace(/^> (.*$)/gm,'<blockquote class="border-l-4 border-primary-500 pl-4 italic text-gray-600 dark:text-gray-400 my-2">$1</blockquote>').replace(/^---$/gm,'<hr class="border-gray-300 dark:border-gray-600 my-4">').replace(/\n/g,"<br>"):"")}}),a.jsxs("div",{className:"mt-4 text-sm text-gray-500 dark:text-gray-500",children:["작성일: ",N(e.createdAt)," (",w(e.createdAt),") • ",Q(e.content)]})]})});var _},K=()=>{const{id:e}=l(),t=n(),o=d(),{isAuthenticated:c}=g(),{i18n:w}=A(),_=w.language,{data:Q,isLoading:K,isError:L,error:M}=F(e),{data:B=[]}=r({queryKey:["chapters",e],queryFn:async()=>{var t;if(!e)return[];const a=await k.getByBook(e);return(null==(t=a.data)?void 0:t.data)||a.data||[]},enabled:!!e,staleTime:3e5}),{skillCategories:T}=E(),P=S(),z=L?(null==M?void 0:M.message)||"서적 정보를 불러오는 데 실패했습니다.":null,{editingLearningId:J,currentFormData:H,setCurrentFormData:O,showAddForm:R,isSaving:G,learningApiError:U,handleToggleAddForm:V,handleAddLearning:W,handleDeleteLearning:X,handleStartEdit:Y,handleSaveEdit:Z,handleCancelEdit:ee,handleSkillLinkChange:te}=D(e),[ae,re]=s.useState(null),se=s.useMemo(()=>{if(!B||!T)return[];const e=T.flatMap(e=>e.skills||[]),t=new Set;if(B.forEach(e=>{(e.learnings||[]).forEach(e=>{(e.skillIds||[]).forEach(e=>{t.add(e)})})}),0===t.size)return[];return e.filter(e=>e._id&&t.has(e._id)).map(e=>{return{...e,levelText:(t=e.level||0,t>=90?"Expert":t>=70?"Proficient":t>=50?"Competent":"Basic")};var t})},[B,T]),ie=s.useMemo(()=>{const e=new Map;return se.forEach(t=>t._id&&e.set(t._id,t)),e},[se]),le=P.isPending,ne=s.useMemo(()=>(null==Q?void 0:Q.learnings)?[...Q.learnings].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()):[],[null==Q?void 0:Q.learnings]);if(K)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})});if(!Q)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(u,{className:"text-6xl text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"서적을 찾을 수 없습니다"}),a.jsx(i,{to:"/books",state:o.state,className:"text-primary-600 hover:text-primary-700 mt-4 inline-block",children:"목록으로 돌아가기"})]})});return a.jsx("section",{className:"section-padding bg-white dark:bg-dark-900 min-h-screen",children:a.jsxs("div",{className:"max-w-5xl mx-auto",children:[(z||U)&&a.jsx($.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-dark-800 dark:text-red-400",role:"alert",children:z||U}),a.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:a.jsxs(i,{to:"/books",state:o.state,className:"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6",children:[a.jsx(y,{})," 목록으로 돌아가기"]})}),a.jsx($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card p-8 mb-8",children:a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsx("div",{children:Q.coverImage?a.jsx("img",{src:Q.coverImage,alt:Q.title,className:"w-full h-auto object-cover rounded-lg shadow-lg",loading:"eager",decoding:"async",width:"400",height:"533"}):a.jsx("div",{className:"w-full aspect-[3/4] bg-gradient-to-br from-primary-400 to-blue-500 rounded-lg flex items-center justify-center",children:a.jsx(u,{className:"text-white text-6xl"})})}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:"flex flex-wrap gap-2",children:Q.categoryIds&&Q.categoryIds.length>0?Q.categoryIds.map(e=>{const t="string"==typeof e?e:null==e?void 0:e.name;return t?a.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:t},"string"==typeof e?e:null==e?void 0:e._id):null}):Q.category&&a.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:Q.category})}),c&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx(i,{to:"/admin",state:{tab:"books",editId:Q._id},className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-blue-600 dark:text-blue-400","aria-label":"서적 수정",children:a.jsx(m,{})}),a.jsx("button",{onClick:async()=>{if(confirm("이 서적을 삭제하시겠습니까? 관련 학습 내용도 모두 사라집니다."))try{await P.mutateAsync(e),t("/books")}catch(a){}},disabled:le,className:"p-2 rounded-lg text-red-600 dark:text-red-400 transition-colors "+(le?"opacity-50 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-700"),"aria-label":"서적 삭제",children:le?a.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):a.jsx(x,{})})]})]}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2",children:h(_,Q.title,Q.titleEn,Q.titleJa)}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-6",children:h(_,Q.author,Q.authorEn,Q.authorJa)}),a.jsxs("div",{className:"flex flex-wrap gap-6 text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[(de=Q.rating,Array.from({length:5},(e,t)=>a.jsx(j,{className:t<de?"text-yellow-500":"text-gray-300 dark:text-gray-600"},t))),a.jsxs("span",{className:"font-medium ml-1",children:[Q.rating,"/5"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(p,{}),a.jsxs("span",{children:["읽은 날짜: ",N(Q.readDate)]})]})]})]})]})}),se.length>0&&a.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card p-6 mb-8",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[a.jsx(b,{className:"text-primary-600"})," 이 책을 통해 학습한 핵심 스킬"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:se.map(e=>{const t=e.color?{backgroundColor:`${r=e.color}26`,color:r}:void 0;var r;return a.jsxs(i,{to:`/projects?skillId=${e._id}`,title:`${e.name} 스킬이 사용된 모든 프로젝트 보기`,className:"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium hover:ring-2 transition-all hover:opacity-80",style:{...t,"--tw-ring-color":e.color||"#3B82F6"},children:[e.name,a.jsxs("span",{className:"ml-1 text-xs font-semibold",style:{color:e.color||"#3B82F6"},children:["[",e.levelText,"]"]})]},e._id)})})]}),a.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"학습 내용"}),c&&(!B||0===B.length)&&a.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-medium px-4 py-2 rounded-lg transition-colors",children:[a.jsx(v,{})," ",R?"추가 취소":"새 내용 추가"]})]}),a.jsx(I,{children:R&&a.jsxs($.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"card p-6 mb-6 overflow-hidden",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"새 학습 내용 추가"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"학습 주제"}),a.jsx("input",{type:"text",id:"topic",value:H.topic,onChange:e=>O(t=>({...t,topic:e.target.value})),placeholder:"학습 주제를 입력하세요",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"학습 내용"}),a.jsx(C,{value:H.content,onChange:e=>O(t=>({...t,content:e})),placeholder:"학습 내용을 입력하세요. 리치텍스트 에디터를 사용하여 다양한 서식을 적용할 수 있습니다.",rows:8,className:"min-h-[200px]"})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{onClick:W,disabled:G||!H.topic.trim()||!H.content.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:G?"저장 중...":"추가"}),a.jsx("button",{onClick:V,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})}),B&&B.length>0?a.jsx("div",{className:"space-y-4",children:B.map(e=>{const t=ae===e._id;return a.jsxs("div",{className:"card p-6 border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 -m-6 p-6 rounded-lg transition-colors",onClick:()=>{return t=e._id,void re(e=>e===t?null:t);var t},children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex-1",children:[e.title,a.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500 dark:text-gray-400",children:["(",(e.learnings||[]).length,"개의 학습 내용)"]})]}),a.jsx($.span,{animate:{rotate:t?90:0},transition:{duration:.3},className:"text-primary-600 dark:text-primary-400 text-xl ml-4",children:a.jsx(f,{})})]}),a.jsx(I,{children:t&&a.jsx($.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a.jsxs("div",{className:"space-y-6 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[(e.learnings||[]).map((t,r)=>a.jsx(q,{learning:t,index:r,isAuthenticated:c,isEditing:J===t._id,currentFormData:H,setCurrentFormData:O,onStartEdit:Y,onSaveEdit:Z,onCancelEdit:ee,onDelete:X,isSaving:G,allSkillsMap:ie,onSkillLinkChange:te,chapterId:e._id},t._id)),(!e.learnings||0===e.learnings.length)&&a.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"이 목차에는 아직 학습 내용이 없습니다."})]})})})]},e._id)})}):ne.length>0?a.jsx("div",{className:"space-y-6",children:ne.map((e,t)=>a.jsx(q,{learning:e,index:t,isAuthenticated:c,isEditing:J===e._id,currentFormData:H,setCurrentFormData:O,onStartEdit:Y,onSaveEdit:Z,onCancelEdit:ee,onDelete:X,isSaving:G,allSkillsMap:ie,onSkillLinkChange:te},e._id))}):a.jsxs("div",{className:"card p-12 text-center",children:[a.jsx(u,{className:"text-6xl text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400",children:"아직 작성된 학습 내용이 없습니다"})]})]})]})});var de};export{K as default};
//# sourceMappingURL=BookDetail-6feab7f4.js.map
