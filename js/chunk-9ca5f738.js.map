{"version":3,"file":"chunk-9ca5f738.js","sources":["../../src/components/ProtectedRoute.tsx","../../src/components/LoadScene.tsx","../../src/components/common/DynamicIcon.tsx","../../src/components/LanguageSwitcher.tsx","../../src/utils/i18nUtils.ts","../../src/components/Sidebar.tsx","../../src/components/LoginModal.tsx","../../src/components/AppLayout.tsx","../../src/components/Hero.tsx","../../src/components/BookCoverImage.tsx","../../src/components/common/ScrollToTopButton.tsx","../../src/utils/textUtils.ts","../../src/components/RichTextEditor.tsx","../../src/components/common/LanguageTabs.tsx","../../src/components/common/LearningItem.tsx","../../src/components/BookDetail.tsx","../../src/components/StickyVideoPlayer.tsx","../../src/components/VideoLearningDetail.tsx","../../src/components/VideoPlaylistDetail.tsx","../../src/components/ProjectCard.tsx","../../src/components/ProjectDetail.tsx","../../src/components/ExperienceItem.tsx","../../src/components/forms/BookForm.tsx","../../src/components/forms/ChapterForm.tsx","../../src/components/forms/LearningForm.tsx","../../src/components/common/ChapterLearningList.tsx","../../src/components/common/Toast.tsx","../../src/components/forms/VideoLearningForm.tsx","../../src/components/forms/VideoPlaylistForm.tsx","../../src/components/forms/PlaylistVideoForm.tsx","../../src/components/forms/ExperienceForm.tsx","../../src/components/forms/ProjectForm.tsx","../../src/components/forms/SkillCategoryForm.tsx","../../src/components/forms/SkillForm.tsx","../../src/components/forms/CategoryForm.tsx","../../src/components/common/NotificationDropdown.tsx","../../src/components/common/BookFilterMenu.tsx","../../src/components/common/ExperienceFilterMenu.tsx","../../src/components/common/ProjectFilterMenu.tsx","../../src/components/common/SettingsMenu.tsx","../../src/components/common/RightSidebar.tsx"],"sourcesContent":["import React from 'react'\r\nimport { Navigate } from 'react-router-dom'\r\nimport { useAuth } from '../contexts/AuthContext'\r\n\r\ninterface ProtectedRouteProps {\r\n  element: React.ComponentType\r\n}\r\n\r\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ element: Component }) => {\r\n  const { isAuthenticated, isLoading } = useAuth()\r\n\r\n  // ë¡œë”© ì¤‘ì¼ ë•ŒëŠ” ë¡œë”© ìŠ¤í”¼ë„ˆ í‘œì‹œ\r\n  if (isLoading) {\r\n    return (\r\n      <div style={{\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        height: '100vh',\r\n        backgroundColor: '#f8fafc'\r\n      }}>\r\n        <div style={{\r\n          width: '32px',\r\n          height: '32px',\r\n          border: '4px solid #3b82f6',\r\n          borderTop: '4px solid transparent',\r\n          borderRadius: '50%',\r\n          animation: 'spin 1s linear infinite'\r\n        }}></div>\r\n        <span style={{\r\n          marginLeft: '12px',\r\n          color: '#6b7280',\r\n          fontSize: '16px'\r\n        }}>ì¸ì¦ í™•ì¸ ì¤‘...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // ì¸ì¦ë˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/\" replace />\r\n  }\r\n\r\n  // ì¸ì¦ëœ ê²½ìš° í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§\r\n  return <Component />\r\n}\r\n\r\nexport default ProtectedRoute\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport * as THREE from 'three'\r\nimport { gsap } from 'gsap'\r\n\r\ninterface LoadSceneProps {\r\n  onFirstVisitComplete?: () => void\r\n}\r\n\r\nconst LoadScene: React.FC<LoadSceneProps> = ({ onFirstVisitComplete }) => {\r\n  const [progress, setProgress] = useState(0)\r\n  const navigate = useNavigate()\r\n\r\n  // í•´ì‹œ URLì´ ìˆëŠ” ê²½ìš° ë°”ë¡œ í™ˆìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ ì—†ìŒ)\r\n  useEffect(() => {\r\n    const hash = window.location.hash\r\n    if (hash) {\r\n      navigate('/home', { replace: true })\r\n    }\r\n  }, [navigate])\r\n  const sceneRef = useRef<HTMLDivElement>(null)\r\n  const animationRef = useRef<number>()\r\n  const tlRef = useRef<gsap.core.Timeline>()\r\n  const textMeshesRef = useRef<THREE.Mesh[]>([])\r\n  const sceneInstanceRef = useRef<THREE.Scene>()\r\n  const cameraRef = useRef<THREE.PerspectiveCamera>()\r\n  const rendererRef = useRef<THREE.WebGLRenderer>()\r\n\r\n  useEffect(() => {\r\n    // 3D ì”¬ ì´ˆê¸°í™”\r\n    initThreeScene()\r\n    \r\n    // ì• ë‹ˆë©”ì´ì…˜ íƒ€ì„ë¼ì¸ ì„¤ì •\r\n    setupAnimation()\r\n    \r\n    return () => {\r\n      cleanup()\r\n    }\r\n  }, [])\r\n\r\n  // Loading ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ í™ˆ í™”ë©´ìœ¼ë¡œ ì´ë™\r\n  useEffect(() => {\r\n    const autoNavigateTimer = setTimeout(() => {\r\n      // ì²« ë°©ë¬¸ ì™„ë£Œ í”Œë˜ê·¸ ì„¤ì •\r\n      localStorage.setItem('hasVisited', 'true')\r\n      onFirstVisitComplete?.()\r\n      navigate('/home')\r\n    }, 6000) // ì´ 6ì´ˆ í›„ ìë™ ì´ë™ (Loading 3ì´ˆ + ì¶”ê°€ 3ì´ˆ)\r\n\r\n    return () => clearTimeout(autoNavigateTimer)\r\n  }, [navigate, onFirstVisitComplete])\r\n\r\n  const cleanup = () => {\r\n    if (animationRef.current) {\r\n      cancelAnimationFrame(animationRef.current)\r\n    }\r\n    if (tlRef.current) {\r\n      tlRef.current.kill()\r\n    }\r\n    if (rendererRef.current && sceneRef.current) {\r\n      const canvas = rendererRef.current.domElement\r\n      if (sceneRef.current.contains(canvas)) {\r\n        sceneRef.current.removeChild(canvas)\r\n      }\r\n      rendererRef.current.dispose()\r\n    }\r\n    textMeshesRef.current = []\r\n  }\r\n\r\n  const initThreeScene = () => {\r\n    if (!sceneRef.current) return\r\n\r\n    // Three.js ì”¬ ì„¤ì •\r\n    const scene = new THREE.Scene()\r\n    scene.background = new THREE.Color(0x0a0a0a) // ë§¤ìš° ì–´ë‘ìš´ ë°°ê²½ (Eric ìŠ¤íƒ€ì¼)\r\n    \r\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)\r\n    const renderer = new THREE.WebGLRenderer({ alpha: false, antialias: true })\r\n    \r\n    renderer.setSize(window.innerWidth, window.innerHeight)\r\n    renderer.setClearColor(0x0a0a0a, 1)\r\n    renderer.shadowMap.enabled = true\r\n    renderer.shadowMap.type = THREE.PCFSoftShadowMap\r\n    \r\n    sceneRef.current.appendChild(renderer.domElement)\r\n\r\n    // ì¡°ëª… ì„¤ì •\r\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.3)\r\n    scene.add(ambientLight)\r\n    \r\n    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8)\r\n    directionalLight.position.set(10, 10, 5)\r\n    directionalLight.castShadow = true\r\n    directionalLight.shadow.mapSize.width = 2048\r\n    directionalLight.shadow.mapSize.height = 2048\r\n    scene.add(directionalLight)\r\n    \r\n    // í¬ì¸íŠ¸ ë¼ì´íŠ¸ ì¶”ê°€ (í…ìŠ¤íŠ¸ì— ë” ë‚˜ì€ ì¡°ëª…)\r\n    const pointLight = new THREE.PointLight(0x00ffff, 0.5, 100)\r\n    pointLight.position.set(-10, 0, 10)\r\n    scene.add(pointLight)\r\n    \r\n    const pointLight2 = new THREE.PointLight(0xff00ff, 0.5, 100)\r\n    pointLight2.position.set(10, 0, 10)\r\n    scene.add(pointLight2)\r\n\r\n    // 3D í…ìŠ¤íŠ¸ ìƒì„±\r\n    create3DText(scene)\r\n    \r\n    // ì¹´ë©”ë¼ ìœ„ì¹˜\r\n    camera.position.z = 20\r\n    camera.lookAt(0, 0, 0)\r\n    \r\n    // ì°¸ì¡° ì €ì¥\r\n    sceneInstanceRef.current = scene\r\n    cameraRef.current = camera\r\n    rendererRef.current = renderer\r\n    \r\n    // ë Œë”ë§ ë£¨í”„\r\n    const animate = () => {\r\n      animationRef.current = requestAnimationFrame(animate)\r\n      \r\n      // í…ìŠ¤íŠ¸ íšŒì „ ì• ë‹ˆë©”ì´ì…˜\r\n      textMeshesRef.current.forEach((mesh, index) => {\r\n        if (mesh) {\r\n          mesh.rotation.y += 0.008 + (index * 0.002)\r\n          mesh.rotation.x = Math.sin(Date.now() * 0.001 + index) * 0.1\r\n          mesh.position.y = Math.sin(Date.now() * 0.002 + index) * 0.5\r\n        }\r\n      })\r\n      \r\n      // ì¹´ë©”ë¼ ì•½ê°„ì˜ ì›€ì§ì„ (Eric ìŠ¤íƒ€ì¼)\r\n      if (cameraRef.current) {\r\n        cameraRef.current.position.x = Math.sin(Date.now() * 0.0005) * 2\r\n        cameraRef.current.position.y = Math.cos(Date.now() * 0.0003) * 1\r\n        cameraRef.current.lookAt(0, 0, 0)\r\n      }\r\n      \r\n      renderer.render(scene, camera)\r\n    }\r\n    animate()\r\n\r\n    // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬\r\n    const handleResize = () => {\r\n      if (cameraRef.current && rendererRef.current) {\r\n        cameraRef.current.aspect = window.innerWidth / window.innerHeight\r\n        cameraRef.current.updateProjectionMatrix()\r\n        rendererRef.current.setSize(window.innerWidth, window.innerHeight)\r\n      }\r\n    }\r\n    window.addEventListener('resize', handleResize)\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', handleResize)\r\n    }\r\n  }\r\n\r\n  const create3DText = (scene: THREE.Scene) => {\r\n    // \"LOADING\" í…ìŠ¤íŠ¸ë¥¼ ê¸°ë³¸ ì§€ì˜¤ë©”íŠ¸ë¦¬ë¡œ ìƒì„±\r\n    const loadingLetters = ['L', 'O', 'A', 'D', 'I', 'N', 'G']\r\n    \r\n    loadingLetters.forEach((letter, index) => {\r\n      // ê° ê¸€ìë¥¼ ìœ„í•œ ì§€ì˜¤ë©”íŠ¸ë¦¬ ìƒì„±\r\n      let geometry: THREE.BufferGeometry\r\n      \r\n      // ê¸€ìë³„ë¡œ ë‹¤ë¥¸ ì§€ì˜¤ë©”íŠ¸ë¦¬ ì‚¬ìš©\r\n      switch(letter) {\r\n        case 'L':\r\n          geometry = createLGeometry()\r\n          break\r\n        case 'O':\r\n          geometry = new THREE.TorusGeometry(1.2, 0.4, 16, 32)\r\n          break\r\n        case 'A':\r\n          geometry = new THREE.ConeGeometry(1.8, 4, 3)\r\n          break\r\n        case 'D':\r\n          geometry = createDGeometry()\r\n          break\r\n        case 'I':\r\n          geometry = new THREE.BoxGeometry(0.4, 4, 0.4)\r\n          break\r\n        case 'N':\r\n          geometry = createNGeometry()\r\n          break\r\n        case 'G':\r\n          geometry = createGGeometry()\r\n          break\r\n        default:\r\n          geometry = new THREE.BoxGeometry(1, 4, 0.5)\r\n      }\r\n      \r\n      // ì¬ì§ˆ ìƒì„± (ê·¸ë¼ë°ì´ì…˜ íš¨ê³¼ë¥¼ ìœ„í•œ ìƒ‰ìƒ)\r\n      const hue = (index / loadingLetters.length) * 360\r\n      const material = new THREE.MeshPhongMaterial({ \r\n        color: new THREE.Color().setHSL(hue / 360, 0.8, 0.6),\r\n        shininess: 100,\r\n        specular: 0x333333,\r\n        emissive: new THREE.Color().setHSL(hue / 360, 0.3, 0.1)\r\n      })\r\n      \r\n      const mesh = new THREE.Mesh(geometry, material)\r\n      mesh.castShadow = true\r\n      mesh.receiveShadow = true\r\n      \r\n      // ìœ„ì¹˜ ì„¤ì •\r\n      const spacing = 3.5\r\n      const startX = -(loadingLetters.length - 1) * spacing / 2\r\n      mesh.position.set(startX + index * spacing, 0, 0)\r\n      \r\n      // ì´ˆê¸° ì• ë‹ˆë©”ì´ì…˜ ìƒíƒœ\r\n      mesh.scale.set(0.01, 0.01, 0.01)\r\n      mesh.rotation.x = Math.PI\r\n      mesh.rotation.z = Math.PI\r\n      \r\n      scene.add(mesh)\r\n      textMeshesRef.current.push(mesh)\r\n      \r\n      // GSAPìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ì• ë‹ˆë©”ì´ì…˜\r\n      gsap.to(mesh.scale, {\r\n        x: 1,\r\n        y: 1,\r\n        z: 1,\r\n        duration: 1.2,\r\n        delay: index * 0.15,\r\n        ease: \"back.out(2)\"\r\n      })\r\n      \r\n      gsap.to(mesh.rotation, {\r\n        x: 0,\r\n        z: 0,\r\n        duration: 1.2,\r\n        delay: index * 0.15,\r\n        ease: \"power2.out\"\r\n      })\r\n    })\r\n  }\r\n\r\n  // ì»¤ìŠ¤í…€ ì§€ì˜¤ë©”íŠ¸ë¦¬ ìƒì„± í•¨ìˆ˜ë“¤\r\n  const createLGeometry = () => {\r\n    const geometry = new THREE.BufferGeometry()\r\n    const vertices = []\r\n    \r\n    // L ëª¨ì–‘ ìƒì„±\r\n    vertices.push(-1, -2, 0, -1, 2, 0, -0.3, 2, 0) // ì™¼ìª½ ì„¸ë¡œì„ \r\n    vertices.push(-1, -2, 0, -0.3, 2, 0, -0.3, -2, 0)\r\n    vertices.push(-0.3, -1.5, 0, 1, -1.5, 0, 1, -2, 0) // ì•„ë˜ ê°€ë¡œì„ \r\n    vertices.push(-0.3, -1.5, 0, 1, -2, 0, -0.3, -2, 0)\r\n    \r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n    geometry.computeVertexNormals()\r\n    return geometry\r\n  }\r\n\r\n  const createDGeometry = () => {\r\n    const geometry = new THREE.BufferGeometry()\r\n    const vertices = []\r\n    \r\n    // D ëª¨ì–‘ ìƒì„± (ë°˜ì› + ì§ì„ )\r\n    for (let i = 0; i <= 16; i++) {\r\n      const angle = (i / 16) * Math.PI\r\n      const x = Math.cos(angle) * 1.5\r\n      const y = Math.sin(angle) * 2\r\n      vertices.push(x, y, 0, x, y, 0.5)\r\n    }\r\n    \r\n    // ì™¼ìª½ ì§ì„  ì¶”ê°€\r\n    vertices.push(-1.5, -2, 0, -1.5, 2, 0, -1.5, 2, 0.5)\r\n    vertices.push(-1.5, -2, 0, -1.5, 2, 0.5, -1.5, -2, 0.5)\r\n    \r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n    geometry.computeVertexNormals()\r\n    return geometry\r\n  }\r\n\r\n  const createNGeometry = () => {\r\n    const geometry = new THREE.BufferGeometry()\r\n    const vertices = []\r\n    \r\n    // N ëª¨ì–‘ ìƒì„±\r\n    vertices.push(-1, -2, 0, -1, 2, 0, -0.3, 2, 0) // ì™¼ìª½ ì„¸ë¡œì„ \r\n    vertices.push(-1, -2, 0, -0.3, 2, 0, -0.3, -2, 0)\r\n    vertices.push(-0.3, 1.5, 0, 1, -2, 0, 1, -1.5, 0) // ëŒ€ê°ì„ \r\n    vertices.push(-0.3, 1.5, 0, 1, -1.5, 0, -0.3, -2, 0)\r\n    vertices.push(0.7, -2, 0, 0.7, 2, 0, 1, 2, 0) // ì˜¤ë¥¸ìª½ ì„¸ë¡œì„ \r\n    vertices.push(0.7, -2, 0, 1, 2, 0, 1, -2, 0)\r\n    \r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n    geometry.computeVertexNormals()\r\n    return geometry\r\n  }\r\n\r\n  const createGGeometry = () => {\r\n    const geometry = new THREE.BufferGeometry()\r\n    const vertices = []\r\n    \r\n    // G ëª¨ì–‘ ìƒì„± (ë¶ˆì™„ì „í•œ ì› + ì§ì„ )\r\n    for (let i = 0; i <= 20; i++) {\r\n      const angle = (i / 20) * Math.PI * 1.8 // ê±°ì˜ ì™„ì „í•œ ì›\r\n      const x = Math.cos(angle) * 1.5\r\n      const y = Math.sin(angle) * 2\r\n      vertices.push(x, y, 0, x, y, 0.5)\r\n    }\r\n    \r\n    // ê°€ë¡œì„  ì¶”ê°€\r\n    vertices.push(-1.5, -2, 0, 0, -2, 0, 0, -1.5, 0)\r\n    vertices.push(-1.5, -2, 0, 0, -1.5, 0, -1.5, -1.5, 0)\r\n    \r\n    geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3))\r\n    geometry.computeVertexNormals()\r\n    return geometry\r\n  }\r\n\r\n\r\n  const setupAnimation = () => {\r\n    const tl = gsap.timeline()\r\n    tlRef.current = tl\r\n    \r\n    // 3ì´ˆê°„ Loading ì• ë‹ˆë©”ì´ì…˜\r\n    tl.to({}, {\r\n      duration: 3,\r\n      onUpdate: function() {\r\n        setProgress((this['progress']() * 100))\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-black overflow-hidden\">\r\n      {/* 3D ì”¬ ì»¨í…Œì´ë„ˆ */}\r\n      <div ref={sceneRef} className=\"absolute inset-0\" />\r\n      \r\n      {/* UI ì˜¤ë²„ë ˆì´ */}\r\n      <div className=\"absolute inset-0 flex flex-col items-center justify-center pointer-events-none\">\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"text-center\"\r\n        >\r\n          <h2 className=\"text-5xl font-bold text-white mb-12 tracking-wider\">\r\n            Loading...\r\n          </h2>\r\n          \r\n          {/* ë¡œë”© ë°” */}\r\n          <div className=\"w-96 h-3 bg-gray-800 rounded-full overflow-hidden\">\r\n            <motion.div\r\n              className=\"h-full bg-gradient-to-r from-cyan-500 via-blue-500 to-purple-600 rounded-full\"\r\n              style={{ width: `${progress}%` }}\r\n              transition={{ duration: 0.1 }}\r\n            />\r\n          </div>\r\n          <p className=\"text-lg text-gray-400 mt-6 font-mono\">\r\n            {Math.round(progress)}%\r\n          </p>\r\n        </motion.div>\r\n      </div>\r\n      \r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadScene","import React from 'react'\r\nimport * as FaIcons from 'react-icons/fa'\r\nimport * as SiIcons from 'react-icons/si'\r\n\r\n// ëª¨ë“  ì•„ì´ì½˜ì„ í•˜ë‚˜ì˜ ê°ì²´ë¡œ ë§¤í•‘\r\nconst IconMap: { [key: string]: React.ElementType } = {\r\n  ...FaIcons,\r\n  ...SiIcons,\r\n}\r\n\r\ninterface DynamicIconProps {\r\n  iconName: string\r\n  size?: number\r\n  className?: string\r\n}\r\n\r\nconst DynamicIcon: React.FC<DynamicIconProps> = ({ \r\n  iconName, \r\n  size = 16, \r\n  className = '' \r\n}) => {\r\n  const IconComponent = IconMap[iconName]\r\n\r\n  if (!IconComponent) {\r\n    // ìœ íš¨í•˜ì§€ ì•Šì€ ì•„ì´ì½˜ ì´ë¦„ì¼ ê²½ìš° ê¸°ë³¸ ì•„ì´ì½˜ í‘œì‹œ\r\n    return <FaIcons.FaMicrochip size={size} className={className} />\r\n  }\r\n\r\n  return React.createElement(IconComponent, { size, className })\r\n}\r\n\r\nexport default DynamicIcon\r\n","import React from 'react'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { FaGlobe } from 'react-icons/fa'\r\n\r\ninterface LanguageSwitcherProps {\r\n  variant?: 'default' | 'compact'\r\n}\r\n\r\ntype Language = 'ko' | 'en' | 'ja'\r\n\r\nconst LanguageSwitcher: React.FC<LanguageSwitcherProps> = ({ variant = 'default' }) => {\r\n  const { i18n } = useTranslation()\r\n\r\n  const changeLanguage = (lang: Language) => {\r\n    i18n.changeLanguage(lang)\r\n    localStorage.setItem('language', lang)\r\n  }\r\n\r\n  const languages = [\r\n    { code: 'ko' as Language, short: 'KOR', full: 'í•œêµ­ì–´' },\r\n    { code: 'en' as Language, short: 'ENG', full: 'English' },\r\n    { code: 'ja' as Language, short: 'JPN', full: 'æ—¥æœ¬èª' }\r\n  ]\r\n\r\n  if (variant === 'compact') {\r\n    return (\r\n      <div className=\"flex flex-col gap-2\">\r\n        <div className=\"flex items-center gap-2 mb-1\">\r\n          <FaGlobe className=\"text-base text-gray-600 dark:text-gray-400\" />\r\n          <span className=\"text-xs text-gray-600 dark:text-gray-400 font-medium\">Language</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          {languages.map((lang) => {\r\n            const isActive = i18n.language === lang.code\r\n            return (\r\n              <button\r\n                key={lang.code}\r\n                onClick={() => changeLanguage(lang.code)}\r\n                className={`px-3 py-2 rounded-lg text-xs font-semibold transition-all duration-200 ${\r\n                  isActive\r\n                    ? 'bg-blue-600 text-white shadow-md'\r\n                    : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\r\n                }`}\r\n                aria-label={`${lang.full}ë¡œ ë³€ê²½`}\r\n                aria-current={isActive ? 'true' : 'false'}\r\n              >\r\n                {lang.short}\r\n              </button>\r\n            )\r\n          })}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-3\">\r\n      <div className=\"flex items-center gap-2\">\r\n        <FaGlobe className=\"text-primary-600 dark:text-primary-400\" />\r\n        <span className=\"text-sm text-gray-700 dark:text-gray-300 font-medium\">ì–¸ì–´ ì„ íƒ</span>\r\n      </div>\r\n      <div className=\"flex flex-wrap gap-2\">\r\n        {languages.map((lang) => {\r\n          const isActive = i18n.language === lang.code\r\n          return (\r\n            <button\r\n              key={lang.code}\r\n              onClick={() => changeLanguage(lang.code)}\r\n              className={`px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${\r\n                isActive\r\n                  ? 'bg-primary-600 text-white shadow-lg'\r\n                  : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-primary-100 dark:hover:bg-primary-900 hover:text-primary-700 dark:hover:text-primary-300'\r\n              }`}\r\n              aria-label={`${lang.full}ë¡œ ë³€ê²½`}\r\n              aria-current={isActive ? 'true' : 'false'}\r\n            >\r\n              {lang.full}\r\n            </button>\r\n          )\r\n        })}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LanguageSwitcher\r\n\r\n","/**\r\n * ë‹¤êµ­ì–´ í•„ë“œ ì„ íƒ ìœ í‹¸ë¦¬í‹°\r\n * í˜„ì¬ ì–¸ì–´ì— ë§ëŠ” ê°’ì„ ë°˜í™˜í•˜ê³ , ì—†ìœ¼ë©´ í•œêµ­ì–´ë¡œ í´ë°±\r\n */\r\n\r\nexport type Language = 'ko' | 'en' | 'ja'\r\n\r\n/**\r\n * ë‹¨ì¼ í•„ë“œì—ì„œ í˜„ì¬ ì–¸ì–´ì— ë§ëŠ” ê°’ ì¶”ì¶œ\r\n */\r\nexport const getLocalizedField = (\r\n  currentLang: Language,\r\n  koValue: string | undefined,\r\n  enValue?: string,\r\n  jaValue?: string\r\n): string => {\r\n  if (currentLang === 'en' && enValue) return enValue\r\n  if (currentLang === 'ja' && jaValue) return jaValue\r\n  return koValue || ''\r\n}\r\n\r\n/**\r\n * ë°°ì—´ í•„ë“œì—ì„œ í˜„ì¬ ì–¸ì–´ì— ë§ëŠ” ê°’ ì¶”ì¶œ\r\n */\r\nexport const getLocalizedArrayField = (\r\n  currentLang: Language,\r\n  koArray: string[] | undefined,\r\n  enArray?: string[],\r\n  jaArray?: string[]\r\n): string[] => {\r\n  if (currentLang === 'en' && enArray && enArray.length > 0) return enArray\r\n  if (currentLang === 'ja' && jaArray && jaArray.length > 0) return jaArray\r\n  return koArray || []\r\n}\r\n\r\n/**\r\n * ê°ì²´ì˜ ë‹¤êµ­ì–´ í•„ë“œë“¤ì„ í˜„ì¬ ì–¸ì–´ì— ë§ê²Œ ë³€í™˜\r\n * ì˜ˆ: { title, titleEn, titleJa } -> í˜„ì¬ ì–¸ì–´ì— ë§ëŠ” title ë°˜í™˜\r\n */\r\nexport const getLocalizedObject = <T extends Record<string, any>>(\r\n  obj: T,\r\n  currentLang: Language,\r\n  fields: string[]\r\n): Partial<T> => {\r\n  const result: any = { ...obj }\r\n  \r\n  fields.forEach(field => {\r\n    const koValue = obj[field]\r\n    const enValue = obj[`${field}En`]\r\n    const jaValue = obj[`${field}Ja`]\r\n    \r\n    result[field] = getLocalizedField(currentLang, koValue, enValue, jaValue)\r\n  })\r\n  \r\n  return result\r\n}\r\n\r\n// =================================================================\r\n// Resource-Specific Localization Helpers\r\n// =================================================================\r\n\r\n/**\r\n * Get localized skill name\r\n * @param currentLang - Current language ('ko', 'en', 'ja')\r\n * @param skill - Skill object\r\n * @returns Localized skill name\r\n */\r\nexport const getLocalizedSkillName = (\r\n  currentLang: Language,\r\n  skill: { name: string; nameEn?: string; nameJa?: string }\r\n): string => {\r\n  return getLocalizedField(currentLang, skill.name, skill.nameEn, skill.nameJa)\r\n}\r\n\r\n/**\r\n * Get localized skill description\r\n * @param currentLang - Current language ('ko', 'en', 'ja')\r\n * @param skill - Skill object\r\n * @returns Localized skill description or empty string\r\n */\r\nexport const getLocalizedSkillDescription = (\r\n  currentLang: Language,\r\n  skill: { description?: string; descriptionEn?: string; descriptionJa?: string }\r\n): string => {\r\n  return getLocalizedField(currentLang, skill.description, skill.descriptionEn, skill.descriptionJa)\r\n}\r\n\r\n/**\r\n * Get localized category name\r\n * @param currentLang - Current language ('ko', 'en', 'ja')\r\n * @param category - Category object\r\n * @returns Localized category name\r\n */\r\nexport const getLocalizedCategoryName = (\r\n  currentLang: Language,\r\n  category: { name: string; nameEn?: string; nameJa?: string }\r\n): string => {\r\n  return getLocalizedField(currentLang, category.name, category.nameEn, category.nameJa)\r\n}\r\n\r\n/**\r\n * Get localized skill category title\r\n * @param currentLang - Current language ('ko', 'en', 'ja')\r\n * @param skillCategory - SkillCategory object\r\n * @returns Localized skill category title\r\n */\r\nexport const getLocalizedSkillCategoryTitle = (\r\n  currentLang: Language,\r\n  skillCategory: { title: string; titleEn?: string; titleJa?: string }\r\n): string => {\r\n  return getLocalizedField(currentLang, skillCategory.title, skillCategory.titleEn, skillCategory.titleJa)\r\n}\r\n\r\n","import React, { useState, useMemo, useCallback } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { FaSun, FaMoon, FaBars, FaTimes, FaGithub, FaLinkedin, FaEnvelope, FaCode, FaBook, FaVideo, FaSignInAlt, FaUserShield, FaHome, FaUser, FaBriefcase, FaLaptopCode, FaWrench, FaCommentDots } from 'react-icons/fa'\r\nimport { IconType } from 'react-icons'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useScrollSpy, scrollToSection, SectionId } from '../hooks/useScrollSpy'\r\nimport { useSidebarSkills } from '../hooks/useSidebarSkills'\r\nimport DynamicIcon from './common/DynamicIcon'\r\nimport LanguageSwitcher from './LanguageSwitcher'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useSiteSettings } from '../hooks/useSiteSettings'\r\nimport { getLocalizedField, getLocalizedSkillName } from '../utils/i18nUtils'\r\n\r\n// AuthContext íƒ€ì… ì •ì˜ (ì‹¤ì œ AuthContextì™€ ì¼ì¹˜í•´ì•¼ í•¨)\r\n// interface AuthContextType {\r\n//   isAuthenticated: boolean\r\n//   logout: () => void\r\n//   // ê¸°íƒ€ ì¸ì¦ ê´€ë ¨ ìƒíƒœ/í•¨ìˆ˜ë“¤...\r\n// }\r\n\r\n// íƒ€ì… ì •ì˜\r\ninterface NavItem {\r\n  name: string\r\n  href: string\r\n  path: string\r\n  icon: IconType\r\n}\r\n\r\ninterface SidebarProps {\r\n  darkMode: boolean\r\n  toggleDarkMode: () => void\r\n  onLoginClick: () => void\r\n}\r\n\r\n// ë„¤ë¹„ê²Œì´ì…˜ í•­ëª© ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬\r\ninterface SidebarNavItemProps {\r\n  item: NavItem\r\n  location: ReturnType<typeof useLocation>\r\n  setIsOpen: React.Dispatch<React.SetStateAction<boolean>>\r\n  activeSection: SectionId\r\n}\r\n\r\nconst SidebarNavItem: React.FC<SidebarNavItemProps> = ({ item, location, setIsOpen, activeSection }) => {\r\n  const navigate = useNavigate()\r\n  \r\n  // ê°„ì†Œí™”ëœ í™œì„±í™” ìƒíƒœ ë¡œì§\r\n  const isActive = useMemo(() => {\r\n    // ë³„ë„ ë¼ìš°íŠ¸ì¸ ê²½ìš°: ê²½ë¡œ ì¼ì¹˜ (ìƒì„¸ í˜ì´ì§€ë„ í™œì„±í™”í•˜ê¸° ìœ„í•´ startsWith ì‚¬ìš©)\r\n    return location.pathname.startsWith(item.path)\r\n  }, [location.pathname, item.path])\r\n\r\n  const IconComponent = item.icon\r\n  \r\n  const baseClasses = `flex items-center gap-2 px-4 py-3 rounded-xl transition-colors duration-200 font-medium`\r\n  const activeClasses = 'bg-coffee-100 dark:bg-dark-700 text-coffee-600 dark:text-coffee-400'\r\n  const inactiveClasses = 'text-dark-700 dark:text-dark-300 hover:bg-coffee-100 dark:hover:bg-dark-700 hover:text-coffee-600 dark:hover:text-coffee-400'\r\n\r\n  const classes = `${baseClasses} ${isActive ? activeClasses : inactiveClasses}`\r\n\r\n  // ê°œì„ ëœ ë„¤ë¹„ê²Œì´ì…˜ í•¸ë“¤ëŸ¬\r\n  const handleNavigation = useCallback(() => {\r\n    // ëª¨ë“  ê²½ë¡œëŠ” navigateë¥¼ ì‚¬ìš©í•˜ì—¬ SPA ë°©ì‹ìœ¼ë¡œ ì´ë™\r\n    navigate(item.href)\r\n    setIsOpen(false)\r\n  }, [item.href, navigate, setIsOpen])\r\n\r\n  // ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œì€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬\r\n  return (\r\n    <button\r\n      onClick={handleNavigation}\r\n      className={classes}\r\n      aria-current={isActive ? 'page' : undefined}\r\n    >\r\n      <IconComponent size={18} />\r\n      {item.name}\r\n    </button>\r\n  )\r\n}\r\n\r\nconst Sidebar: React.FC<SidebarProps> = ({ darkMode, toggleDarkMode, onLoginClick }) => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const location = useLocation()\r\n  const { isAuthenticated, logout } = useAuth()\r\n  const { t, i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  const { settings: siteSettings } = useSiteSettings()\r\n  // ìŠ¤í¬ë¡¤ ìŠ¤íŒŒì´ í›… ì‚¬ìš© (ê¸°ë³¸ ì˜µì…˜ ì ìš©)\r\n  const activeSection = useScrollSpy()\r\n  \r\n  // =================================================================\r\n  // ğŸ”„ í˜ì´ì§€ ë³€ê²½ ê°ì§€ ë° ë„¤ë¹„ê²Œì´ì…˜ í™œì„±í™”\r\n  // =================================================================\r\n  \r\n  const navItems: NavItem[] = [\r\n    // ğŸ’¡ ë©”ì¸ í˜ì´ì§€ í™ˆ ë§í¬ë§Œ ë‚¨ê¸°ê³  ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ ë³„ë„ ë¼ìš°íŠ¸ë¡œ ë¶„ë¦¬\r\n    { name: t('nav.home'), href: '/home', path: '/home', icon: FaHome },\r\n    \r\n    // ğŸ’¡ ë³„ë„ ë¼ìš°íŠ¸ ë§í¬: pathì™€ hrefê°€ ë™ì¼\r\n    { name: t('nav.about'), href: '/about', path: '/about', icon: FaUser },\r\n    { name: t('nav.experience'), href: '/experience', path: '/experience', icon: FaBriefcase },\r\n    { name: t('nav.skills'), href: '/skills', path: '/skills', icon: FaWrench },\r\n    { name: t('nav.projects'), href: '/projects', path: '/projects', icon: FaLaptopCode },\r\n    { name: t('nav.books'), href: '/books', path: '/books', icon: FaBook },\r\n    { name: t('nav.videoLearnings'), href: '/video-learnings', path: '/video-learnings', icon: FaVideo },\r\n    { name: t('nav.contact'), href: '/contact', path: '/contact', icon: FaCommentDots },\r\n  ]\r\n\r\n  // ì»¤ìŠ¤í…€ í›…ì„ ì‚¬ìš©í•˜ì—¬ ìŠ¤í‚¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n  const { coreSkills, languageSkills, isLoadingSkills } = useSidebarSkills()\r\n\r\n  const socialLinks = [\r\n    { icon: FaGithub, href: '#', label: 'GitHub' },\r\n    { icon: FaLinkedin, href: '#', label: 'LinkedIn' },\r\n    { icon: FaEnvelope, href: 'mailto:juyeong_choi@naver.com', label: 'Email' },\r\n  ]\r\n\r\n\r\n\r\n  return (\r\n    <>\r\n      {/* Mobile Menu Button */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"lg:hidden fixed top-4 left-4 z-50 p-3 bg-coffee-600 text-white rounded-xl shadow-lg hover:bg-coffee-700 transition-colors\"\r\n        aria-label={isOpen ? \"ì‚¬ì´ë“œë°” ë‹«ê¸°\" : \"ì‚¬ì´ë“œë°” ì—´ê¸°\"}\r\n      >\r\n        {isOpen ? <FaTimes size={20} /> : <FaBars size={20} />}\r\n      </button>\r\n\r\n      {/* Overlay for mobile */}\r\n      {isOpen && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40\"\r\n          onClick={() => setIsOpen(false)}\r\n          aria-label=\"ì‚¬ì´ë“œë°” ë‹«ê¸°\"\r\n        />\r\n      )}\r\n\r\n      {/* Sidebar */}\r\n      <aside\r\n        className={`fixed top-0 left-0 h-screen w-80 bg-white dark:bg-dark-800 border-r border-cream-200 dark:border-dark-700 z-40 transition-transform duration-300 lg:translate-x-0 ${\r\n          isOpen ? 'translate-x-0' : '-translate-x-full'\r\n        } overflow-y-auto custom-scrollbar`}\r\n        aria-label=\"ì£¼ìš” ë„¤ë¹„ê²Œì´ì…˜\"\r\n      >\r\n        <div className=\"p-8 space-y-8\">\r\n          {/* Profile Section */}\r\n          <div className=\"text-center\">\r\n            <div className=\"relative w-32 h-32 mx-auto mb-6\">\r\n              <div className=\"w-full h-full rounded-full bg-coffee-600 flex items-center justify-center text-white text-4xl font-bold shadow-xl\">\r\n                {getLocalizedField(currentLang, siteSettings?.firstName, siteSettings?.firstNameEn, siteSettings?.firstNameJa) || 'ì£¼ì˜'}\r\n              </div>\r\n              <div \r\n                className=\"absolute bottom-0 right-0 w-10 h-10 bg-caramel-500 rounded-full flex items-center justify-center border-4 border-white dark:border-dark-800\"\r\n                aria-label=\"í”„ë¡œí•„ ì´ë¯¸ì§€\"\r\n              >\r\n                <FaCode className=\"text-white\" size={18} />\r\n              </div>\r\n            </div>\r\n            <h1 className=\"text-2xl font-bold text-dark-900 dark:text-cream-100 mb-2\">\r\n              {getLocalizedField(currentLang, siteSettings?.fullName, siteSettings?.fullNameEn, siteSettings?.fullNameJa) || 'ìµœì£¼ì˜'}\r\n            </h1>\r\n            <p className=\"text-coffee-600 dark:text-coffee-400 font-medium mb-1\">\r\n              {getLocalizedField(currentLang, siteSettings?.role, siteSettings?.roleEn, siteSettings?.roleJa) || 'ê³µì¥ìë™í™” ì „ë¬¸ê°€'}\r\n            </p>\r\n            <p className=\"text-sm text-dark-600 dark:text-dark-400\">\r\n              {getLocalizedField(currentLang, siteSettings?.subtitle, siteSettings?.subtitleEn, siteSettings?.subtitleJa) || 'ë°”ë¦¬ìŠ¤íƒ€ â†’ ìë™í™” ì—”ì§€ë‹ˆì–´'}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Info Cards */}\r\n          <div className=\"space-y-4\">\r\n            <div className=\"bg-cream-100 dark:bg-dark-700 rounded-xl p-4\">\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"text-dark-700 dark:text-dark-300 text-sm\">{t('about.location')}</span>\r\n                <span className=\"text-dark-900 dark:text-cream-100 font-medium\">\r\n                  {getLocalizedField(currentLang, siteSettings?.location, siteSettings?.locationEn, siteSettings?.locationJa) || 'ë¶€ì‚°'}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between items-center mb-2\">\r\n                <span className=\"text-dark-700 dark:text-dark-300 text-sm\">{t('about.education')}</span>\r\n                <span className=\"text-dark-900 dark:text-cream-100 font-medium text-right text-xs\">\r\n                  {getLocalizedField(currentLang, siteSettings?.education, siteSettings?.educationEn, siteSettings?.educationJa) || 'ë¶€ì‚°ì¸ë ¥ê°œë°œì›'}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between items-center\">\r\n                <span className=\"text-dark-700 dark:text-dark-300 text-sm\">{t('about.yearsOfExperience')}</span>\r\n                <span className=\"text-dark-900 dark:text-cream-100 font-medium\">\r\n                  {getLocalizedField(currentLang, siteSettings?.yearsOfExperience, siteSettings?.yearsOfExperienceEn, siteSettings?.yearsOfExperienceJa) || '5ë…„'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Language Skills - Circular Progress */}\r\n          {languageSkills.length > 0 && (\r\n            <div>\r\n              <div className=\"flex justify-around items-center gap-2\">\r\n                {isLoadingSkills ? (\r\n                  [1, 2, 3].map((i) => (\r\n                    <div key={i} className=\"flex flex-col items-center\">\r\n                      <div className=\"w-16 h-16 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse\"></div>\r\n                      <div className=\"h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-12 mt-2\"></div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  languageSkills.map((skill) => {\r\n                    // ğŸŒŸ í•œêµ­ì–´ì´ê³  100%ë©´ \"ëª¨êµ­ì–´\"ë¡œ í‘œì‹œ\r\n                    const skillName = getLocalizedSkillName(currentLang, skill)\r\n                    const isNative = skillName.includes('í•œêµ­ì–´') && skill.level === 100\r\n                    \r\n                    return (\r\n                      <div key={skill._id} className=\"flex flex-col items-center\">\r\n                        <div className=\"relative w-16 h-16\">\r\n                          {/* Background Circle */}\r\n                          <svg className=\"w-16 h-16 transform -rotate-90\">\r\n                            <circle\r\n                              cx=\"32\"\r\n                              cy=\"32\"\r\n                              r=\"28\"\r\n                              stroke=\"currentColor\"\r\n                              strokeWidth=\"4\"\r\n                              fill=\"none\"\r\n                              className=\"text-cream-200 dark:text-dark-700\"\r\n                            />\r\n                            {/* Progress Circle */}\r\n                            <circle\r\n                              cx=\"32\"\r\n                              cy=\"32\"\r\n                              r=\"28\"\r\n                              stroke={skill.color || '#8B4513'}\r\n                              strokeWidth=\"4\"\r\n                              fill=\"none\"\r\n                              strokeDasharray={`${(skill.level / 100) * 176} 176`}\r\n                              className=\"transition-all duration-1000 ease-out\"\r\n                              strokeLinecap=\"round\"\r\n                            />\r\n                          </svg>\r\n                          {/* Icon in Center */}\r\n                          <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                            <DynamicIcon \r\n                              iconName={skill.icon} \r\n                              size={20} \r\n                              className=\"text-coffee-600 dark:text-coffee-400\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <span className=\"text-xs font-medium text-dark-700 dark:text-dark-300 mt-1 text-center\">\r\n                          {skillName}\r\n                        </span>\r\n                        <span className=\"text-xs font-bold text-coffee-600 dark:text-coffee-400\">\r\n                          {isNative ? t('sidebar.nativeLanguage') : `${skill.level}%`}\r\n                        </span>\r\n                      </div>\r\n                    )\r\n                  })\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Core Skills Progress */}\r\n          <div>\r\n            <h3 className=\"text-lg font-bold text-dark-900 dark:text-cream-100 mb-4\">\r\n              {t('sidebar.coreSkills')}\r\n            </h3>\r\n            <div className=\"space-y-4\">\r\n              {isLoadingSkills ? (\r\n                // ë¡œë”© ìƒíƒœ\r\n                <div className=\"space-y-4\">\r\n                  {[1, 2, 3, 4].map((i) => (\r\n                    <div key={i}>\r\n                      <div className=\"flex justify-between mb-2\">\r\n                        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-16\"></div>\r\n                        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse w-8\"></div>\r\n                      </div>\r\n                      <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 animate-pulse\"></div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : coreSkills.length > 0 ? (\r\n                // ìŠ¤í‚¬ ë°ì´í„° í‘œì‹œ\r\n                coreSkills.map((skill) => (\r\n                  <div key={skill._id}>\r\n                    <div className=\"flex justify-between mb-2\">\r\n                      <span className=\"text-sm font-medium text-dark-700 dark:text-dark-300\">\r\n                        {getLocalizedSkillName(currentLang, skill)}\r\n                      </span>\r\n                      <span className=\"text-sm font-bold text-coffee-600 dark:text-coffee-400\">\r\n                        {skill.level}%\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"w-full bg-cream-200 dark:bg-dark-700 rounded-full h-2\">\r\n                      <motion.div\r\n                        initial={{ width: 0 }}\r\n                        animate={{ width: `${skill.level}%` }}\r\n                        transition={{ duration: 1, delay: 0.2 }}\r\n                        className=\"bg-coffee-600 h-2 rounded-full\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                // ë°ì´í„°ê°€ ì—†ì„ ë•Œ\r\n                <div className=\"text-center py-8\">\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    {t('sidebar.noSkillData')}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Navigation */}\r\n          <nav>\r\n            <h3 className=\"text-lg font-bold text-dark-900 dark:text-cream-100 mb-4\">\r\n              {t('sidebar.menu')}\r\n            </h3>\r\n            <ul className=\"space-y-2\">\r\n              {navItems.map((item) => (\r\n                <li key={item.name}>\r\n                  <SidebarNavItem \r\n                    item={item} \r\n                    location={location} \r\n                    setIsOpen={setIsOpen}\r\n                    activeSection={activeSection}\r\n                  />\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </nav>\r\n\r\n          {/* Admin Section */}\r\n          {isAuthenticated && (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 10 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 0.3 }}\r\n            >\r\n              <Link\r\n                to=\"/admin\"\r\n                className=\"block px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl transition-colors duration-200 font-medium text-center flex items-center justify-center gap-2\"\r\n                onClick={() => setIsOpen(false)}\r\n              >\r\n                <FaUserShield size={18} /> {t('sidebar.adminDashboard')}\r\n              </Link>\r\n            </motion.div>\r\n          )}\r\n\r\n          {/* Social Links */}\r\n          <div>\r\n            <h3 className=\"text-lg font-bold text-dark-900 dark:text-cream-100 mb-4\">\r\n              {t('sidebar.social')}\r\n            </h3>\r\n            <div className=\"flex space-x-3\">\r\n              {socialLinks.map(({ icon: Icon, href, label }) => (\r\n                <a\r\n                  key={label}\r\n                  href={href}\r\n                  className=\"p-3 bg-cream-100 dark:bg-dark-700 rounded-xl hover:bg-coffee-100 dark:hover:bg-dark-600 text-dark-700 dark:text-dark-300 hover:text-coffee-600 dark:hover:text-coffee-400 transition-all duration-200\"\r\n                  aria-label={label}\r\n                >\r\n                  <Icon size={20} />\r\n                </a>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Language Switcher */}\r\n          <div className=\"mb-4\">\r\n            <LanguageSwitcher variant=\"compact\" />\r\n          </div>\r\n\r\n          {/* Dark Mode Toggle & Auth */}\r\n          <div className=\"space-y-2\">\r\n            <button\r\n              onClick={toggleDarkMode}\r\n              className=\"w-full py-3 px-4 bg-coffee-600 hover:bg-coffee-700 text-white rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 font-medium\"\r\n              aria-label={darkMode ? t('sidebar.lightMode') : t('sidebar.darkMode')}\r\n            >\r\n              {darkMode ? (\r\n                <>\r\n                  <FaSun size={18} />\r\n                  <span>{t('sidebar.lightMode')}</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FaMoon size={18} />\r\n                  <span>{t('sidebar.darkMode')}</span>\r\n                </>\r\n              )}\r\n            </button>\r\n\r\n            {isAuthenticated ? (\r\n              <button\r\n                onClick={() => {\r\n                  logout()\r\n                  setIsOpen(false)\r\n                }}\r\n                className=\"w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 font-medium\"\r\n                aria-label={t('sidebar.logout')}\r\n              >\r\n                <FaSignInAlt size={18} />\r\n                <span>{t('sidebar.logout')}</span>\r\n              </button>\r\n            ) : (\r\n              <button\r\n                onClick={() => {\r\n                  onLoginClick()\r\n                  setIsOpen(false)\r\n                }}\r\n                className=\"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white rounded-xl transition-colors duration-200 flex items-center justify-center space-x-2 font-medium\"\r\n                aria-label={t('sidebar.adminLogin')}\r\n              >\r\n                <FaSignInAlt size={18} />\r\n                <span>{t('sidebar.adminLogin')}</span>\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n        </div>\r\n      </aside>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useState } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { FaTimes, FaUser, FaLock, FaCircleNotch } from 'react-icons/fa'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\ninterface LoginModalProps {\r\n  isOpen: boolean\r\n  onClose: () => void\r\n}\r\n\r\nconst LoginModal: React.FC<LoginModalProps> = ({ isOpen, onClose }) => {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [error, setError] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const { login } = useAuth()\r\n  const navigate = useNavigate()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setError('')\r\n    setIsLoading(true)\r\n\r\n    try {\r\n      await login(username, password)\r\n      onClose()\r\n      navigate('/admin')\r\n      setUsername('')\r\n      setPassword('')\r\n    } catch (err: any) {\r\n      // ì—ëŸ¬ ë©”ì‹œì§€ê°€ ê°ì²´ë¼ë©´ ë¬¸ìì—´ë¡œ ë³€í™˜\r\n      const errorMessage = err.message || 'ë¡œê·¸ì¸ ì¤‘ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'\r\n      setError(errorMessage)\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  const handleClose = () => {\r\n    setUsername('')\r\n    setPassword('')\r\n    setError('')\r\n    onClose()\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            onClick={handleClose}\r\n            className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50\"\r\n          />\r\n\r\n          {/* Modal */}\r\n          <div className=\"fixed inset-0 flex items-center justify-center z-50 p-4\">\r\n            <motion.div\r\n              initial={{ opacity: 0, scale: 0.9, y: 20 }}\r\n              animate={{ opacity: 1, scale: 1, y: 0 }}\r\n              exit={{ opacity: 0, scale: 0.9, y: 20 }}\r\n              role=\"dialog\"\r\n              aria-modal=\"true\"\r\n              aria-labelledby=\"login-title\"\r\n              className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md p-8 relative\"\r\n            >\r\n              {/* Close button */}\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\r\n                aria-label=\"ë‹«ê¸°\"\r\n              >\r\n                <FaTimes className=\"text-gray-600 dark:text-gray-300\" />\r\n              </button>\r\n\r\n              {/* Header */}\r\n              <div className=\"text-center mb-8\">\r\n                <div className=\"w-16 h-16 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                  <FaUser className=\"text-white text-2xl\" />\r\n                </div>\r\n                <h2 id=\"login-title\" className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                  ê´€ë¦¬ì ë¡œê·¸ì¸\r\n                </h2>\r\n                <p className=\"text-gray-600 dark:text-gray-400\">\r\n                  í¬íŠ¸í´ë¦¬ì˜¤ ê´€ë¦¬ë¥¼ ìœ„í•´ ë¡œê·¸ì¸í•˜ì„¸ìš”\r\n                </p>\r\n              </div>\r\n\r\n              {/* Form */}\r\n              <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                {error && (\r\n                  <motion.div\r\n                    initial={{ opacity: 0, y: -10 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded-lg text-sm\"\r\n                    role=\"alert\"\r\n                  >\r\n                    {error}\r\n                  </motion.div>\r\n                )}\r\n\r\n                <div>\r\n                  <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    ì•„ì´ë””\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <FaUser className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"username\"\r\n                      value={username}\r\n                      onChange={(e) => setUsername(e.target.value)}\r\n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                      placeholder=\"ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”\"\r\n                      required\r\n                      autoComplete=\"username\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    ë¹„ë°€ë²ˆí˜¸\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <FaLock className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n                    <input\r\n                      type=\"password\"\r\n                      id=\"password\"\r\n                      value={password}\r\n                      onChange={(e) => setPassword(e.target.value)}\r\n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                      placeholder=\"ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”\"\r\n                      required\r\n                      autoComplete=\"current-password\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <motion.button\r\n                  type=\"submit\"\r\n                  disabled={isLoading}\r\n                  className=\"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-semibold py-3 rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                >\r\n                  {isLoading ? (\r\n                    <>\r\n                      <FaCircleNotch className=\"animate-spin\" />\r\n                      ë¡œê·¸ì¸ ì¤‘...\r\n                    </>\r\n                  ) : (\r\n                    'ë¡œê·¸ì¸'\r\n                  )}\r\n                </motion.button>\r\n              </form>\r\n            </motion.div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n\r\nexport default LoginModal\r\n\r\n\r\n","import React, { Suspense } from 'react'\r\nimport { Outlet } from 'react-router-dom'\r\nimport Sidebar from './Sidebar'\r\nimport LoginModal from './LoginModal'\r\nimport LoadScene from './LoadScene'\r\n\r\ninterface AppLayoutProps {\r\n  darkMode: boolean\r\n  toggleDarkMode: () => void\r\n  showLoginModal: boolean\r\n  setShowLoginModal: (show: boolean) => void\r\n  isFirstVisit: boolean\r\n}\r\n\r\nconst AppLayout: React.FC<AppLayoutProps> = ({\r\n  darkMode,\r\n  toggleDarkMode,\r\n  showLoginModal,\r\n  setShowLoginModal,\r\n  isFirstVisit\r\n}) => {\r\n\r\n  // ê°„ë‹¨í•œ ë¡œë”© ìŠ¤í”¼ë„ˆ ì»´í¬ë„ŒíŠ¸\r\n  const SimpleLoadingSpinner = () => (\r\n    <div className=\"flex items-center justify-center h-64\">\r\n      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen bg-cream-50 dark:bg-dark-900 transition-colors duration-300\">\r\n      {/* ê³ ì •ëœ ì™¼ìª½ ì‚¬ì´ë“œë°” */}\r\n      <Sidebar \r\n        darkMode={darkMode} \r\n        toggleDarkMode={toggleDarkMode}\r\n        onLoginClick={() => setShowLoginModal(true)}\r\n      />\r\n      \r\n      {/* ì˜¤ë¥¸ìª½ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì½˜í…ì¸  */}\r\n      <main className=\"flex-1 ml-0 lg:ml-80 overflow-y-auto\">\r\n        <Suspense fallback={isFirstVisit ? <LoadScene /> : <SimpleLoadingSpinner />}>\r\n          <Outlet />\r\n        </Suspense>\r\n      </main>\r\n      \r\n      {/* ë¡œê·¸ì¸ ëª¨ë‹¬ */}\r\n      <LoginModal \r\n        isOpen={showLoginModal} \r\n        onClose={() => setShowLoginModal(false)} \r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default AppLayout\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { motion, useScroll, useTransform } from 'framer-motion'\r\nimport { FaDownload, FaArrowRight, FaCoffee, FaCog, FaCode } from 'react-icons/fa'\r\nimport { useSiteSettings } from '../hooks/useSiteSettings'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField } from '../utils/i18nUtils'\r\n\r\nconst Hero: React.FC = () => {\r\n  const { settings, loading } = useSiteSettings()\r\n  const { t, i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n\r\n  // íŒ¨ëŸ´ë™ìŠ¤ íš¨ê³¼ë¥¼ ìœ„í•œ ìŠ¤í¬ë¡¤ í›…\r\n  const { scrollYProgress } = useScroll()\r\n  \r\n  // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì— ë”°ë¼ ìš”ì†Œì˜ Yì¶• ìœ„ì¹˜ë¥¼ ë³€í™˜\r\n  const yTop = useTransform(scrollYProgress, [0, 1], [0, 100])\r\n  const yBottom = useTransform(scrollYProgress, [0, 1], [0, -100])\r\n\r\n  const containerVariants = {\r\n    hidden: { opacity: 0 },\r\n    visible: {\r\n      opacity: 1,\r\n      transition: {\r\n        staggerChildren: 0.3,\r\n      },\r\n    },\r\n  }\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 30 },\r\n    visible: {\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: {\r\n        duration: 0.8,\r\n        ease: 'easeOut',\r\n      },\r\n    },\r\n  }\r\n\r\n  // ë¡œë”© ì¤‘ì¼ ë•Œ\r\n  if (loading) {\r\n    return (\r\n      <section id=\"home\" className=\"min-h-screen flex items-center justify-center bg-cream-50 dark:bg-dark-900\">\r\n        <div className=\"w-12 h-12 border-4 border-coffee-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </section>\r\n    )\r\n  }\r\n\r\n  const stats = [\r\n    { \r\n      number: settings?.stat1Number || '5+', \r\n      label: getLocalizedField(currentLang, settings?.stat1Label, settings?.stat1LabelEn, settings?.stat1LabelJa) || 'ë…„ ê²½ë ¥', \r\n      icon: FaCoffee \r\n    },\r\n    { \r\n      number: settings?.stat2Number || '3+', \r\n      label: getLocalizedField(currentLang, settings?.stat2Label, settings?.stat2LabelEn, settings?.stat2LabelJa) || 'ì™„ë£Œ í”„ë¡œì íŠ¸', \r\n      icon: FaCode \r\n    },\r\n    { \r\n      number: settings?.stat3Number || '10+', \r\n      label: getLocalizedField(currentLang, settings?.stat3Label, settings?.stat3LabelEn, settings?.stat3LabelJa) || 'ê¸°ìˆ  ìŠ¤íƒ', \r\n      icon: FaCog \r\n    },\r\n  ]\r\n\r\n  return (\r\n    <section id=\"home\" className=\"min-h-screen flex items-center justify-center bg-cream-50 dark:bg-dark-900 relative overflow-hidden\">\r\n      {/* Background decoration (íŒ¨ëŸ´ë™ìŠ¤ ì ìš©) */}\r\n      <div className=\"absolute inset-0 overflow-hidden\">\r\n        {/* ìœ—ë¶€ë¶„ ì¥ì‹: ìŠ¤í¬ë¡¤ ì‹œ ì•„ë˜ë¡œ ì´ë™ */}\r\n        <motion.div \r\n          style={{ y: yTop }}\r\n          className=\"absolute -top-40 -right-40 w-80 h-80 bg-coffee-200 dark:bg-coffee-900 rounded-full opacity-20 blur-3xl\"\r\n        ></motion.div>\r\n        {/* ì•„ë«ë¶€ë¶„ ì¥ì‹: ìŠ¤í¬ë¡¤ ì‹œ ìœ„ë¡œ ì´ë™ */}\r\n        <motion.div \r\n          style={{ y: yBottom }}\r\n          className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-caramel-200 dark:bg-caramel-900 rounded-full opacity-20 blur-3xl\"\r\n        ></motion.div>\r\n      </div>\r\n\r\n      <div className=\"section-padding w-full relative z-10\">\r\n        <motion.div\r\n          variants={containerVariants}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          className=\"max-w-4xl mx-auto\"\r\n        >\r\n          <motion.div\r\n            variants={itemVariants}\r\n            className=\"mb-8\"\r\n          >\r\n            <span className=\"inline-block px-4 py-2 bg-coffee-100 dark:bg-coffee-900 text-coffee-700 dark:text-coffee-300 rounded-full text-sm font-medium mb-6\">\r\n              {getLocalizedField(currentLang, settings?.heroTag, settings?.heroTagEn, settings?.heroTagJa) || 'ğŸ¯ ì·¨ì—… ì¤€ë¹„ ì¤‘'}\r\n            </span>\r\n          </motion.div>\r\n\r\n          <motion.h1\r\n            variants={itemVariants}\r\n            className=\"text-5xl md:text-7xl font-bold text-dark-900 dark:text-cream-100 mb-8 leading-tight\"\r\n          >\r\n            {getLocalizedField(currentLang, settings?.heroTitle, settings?.heroTitleEn, settings?.heroTitleJa) || 'ê³µì¥ìë™í™” ì „ë¬¸ê°€'}\r\n          </motion.h1>\r\n\r\n          <motion.p\r\n            variants={itemVariants}\r\n            className=\"text-xl md:text-2xl text-dark-600 dark:text-dark-300 mb-12 leading-relaxed max-w-3xl whitespace-pre-line\"\r\n          >\r\n            {getLocalizedField(currentLang, settings?.heroSubtitle, settings?.heroSubtitleEn, settings?.heroSubtitleJa) || 'PLC í”„ë¡œê·¸ë˜ë°ë¶€í„° ë°ì´í„° ë¶„ì„ê¹Œì§€, ìŠ¤ë§ˆíŠ¸ íŒ©í† ë¦¬ì˜ ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.'}\r\n          </motion.p>\r\n\r\n          <motion.div\r\n            variants={itemVariants}\r\n            className=\"flex flex-col sm:flex-row gap-4 mb-16\"\r\n          >\r\n            <Link to=\"/projects\">\r\n              <motion.button\r\n                aria-label={t('hero.viewProjects')}\r\n                variants={itemVariants}\r\n                className=\"btn-primary text-lg px-8 py-4 flex items-center justify-center gap-2 group w-full\"\r\n              >\r\n                {t('hero.viewProjects')}\r\n                <FaArrowRight className=\"group-hover:translate-x-1 transition-transform\" />\r\n              </motion.button>\r\n            </Link>\r\n            <motion.button\r\n              onClick={() => alert(t('hero.resumeComingSoon'))}\r\n              aria-label={t('hero.downloadResume')}\r\n              variants={itemVariants}\r\n              className=\"btn-secondary text-lg px-8 py-4 flex items-center justify-center gap-2\"\r\n            >\r\n              <FaDownload />\r\n              {t('hero.downloadResume')}\r\n            </motion.button>\r\n          </motion.div>\r\n\r\n          {/* Stats */}\r\n          <motion.div\r\n            variants={itemVariants}\r\n            className=\"grid grid-cols-1 sm:grid-cols-3 gap-6\"\r\n          >\r\n            {stats.map((stat) => (\r\n              <motion.div\r\n                key={stat.label}\r\n                className=\"bg-white dark:bg-dark-800 rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-cream-200 dark:border-dark-700\"\r\n                whileHover={{ y: -5 }}\r\n                role=\"status\"\r\n                aria-label={`${stat.label} í†µê³„: ${stat.number}`}\r\n              >\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div className=\"p-3 bg-coffee-100 dark:bg-coffee-900 rounded-xl\">\r\n                    <stat.icon className=\"text-coffee-600 dark:text-coffee-400\" size={24} />\r\n                  </div>\r\n                  <div>\r\n                    <div className=\"text-3xl font-bold text-coffee-600 dark:text-coffee-400\">\r\n                      {stat.number}\r\n                    </div>\r\n                    <div className=\"text-sm text-dark-600 dark:text-dark-400\">\r\n                      {stat.label}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            ))}\r\n          </motion.div>\r\n        </motion.div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Hero","import React, { useState } from 'react'\r\nimport { FaBook, FaImage } from 'react-icons/fa'\r\n\r\ninterface BookCoverImageProps {\r\n  src?: string\r\n  alt: string\r\n  className?: string\r\n  fallbackIcon?: React.ReactNode\r\n}\r\n\r\n/**\r\n * ì±… ì»¤ë²„ ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸\r\n * - ì§€ì—° ë¡œë”© ì§€ì›\r\n * - ë¡œë”© ìƒíƒœ í‘œì‹œ\r\n * - ì˜¤ë¥˜ ì‹œ ëŒ€ì²´ ì•„ì´ì½˜ í‘œì‹œ\r\n */\r\nconst BookCoverImage: React.FC<BookCoverImageProps> = ({\r\n  src,\r\n  alt,\r\n  className = \"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300\",\r\n  fallbackIcon\r\n}) => {\r\n  const [imageState, setImageState] = useState<'loading' | 'loaded' | 'error'>('loading')\r\n  const [imageSrc, setImageSrc] = useState(src)\r\n\r\n  const handleImageLoad = () => {\r\n    setImageState('loaded')\r\n  }\r\n\r\n  const handleImageError = () => {\r\n    setImageState('error')\r\n    setImageSrc(undefined)\r\n  }\r\n\r\n  // ì´ë¯¸ì§€ê°€ ì—†ê±°ë‚˜ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²½ìš° ëŒ€ì²´ ì•„ì´ì½˜ í‘œì‹œ\r\n  if (!imageSrc || imageState === 'error') {\r\n    return (\r\n      <div className=\"w-full h-64 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center\">\r\n        {fallbackIcon || <FaBook className=\"text-white text-6xl\" />}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative overflow-hidden\">\r\n      {/* ë¡œë”© ìƒíƒœ ìŠ¤ì¼ˆë ˆí†¤ */}\r\n      {imageState === 'loading' && (\r\n        <div className=\"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse flex items-center justify-center\">\r\n          <FaImage className=\"text-gray-400 text-4xl\" />\r\n        </div>\r\n      )}\r\n      \r\n      {/* ì‹¤ì œ ì´ë¯¸ì§€ */}\r\n      <img\r\n        src={imageSrc}\r\n        alt={alt}\r\n        className={`${className} ${imageState === 'loading' ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`}\r\n        loading=\"lazy\"\r\n        decoding=\"async\"\r\n        width=\"400\"\r\n        height=\"256\"\r\n        onLoad={handleImageLoad}\r\n        onError={handleImageError}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BookCoverImage\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaArrowUp } from 'react-icons/fa'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\n\r\nconst ScrollToTopButton: React.FC = () => {\r\n  const [isVisible, setIsVisible] = useState(false)\r\n\r\n  // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ì— ë”°ë¼ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€\r\n  useEffect(() => {\r\n    const toggleVisibility = () => {\r\n      // 300px ì´ìƒ ìŠ¤í¬ë¡¤í•˜ë©´ ë²„íŠ¼ í‘œì‹œ\r\n      if (window.scrollY > 300) {\r\n        setIsVisible(true)\r\n      } else {\r\n        setIsVisible(false)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('scroll', toggleVisibility)\r\n\r\n    return () => {\r\n      window.removeEventListener('scroll', toggleVisibility)\r\n    }\r\n  }, [])\r\n\r\n  // ìµœìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤\r\n  const scrollToTop = () => {\r\n    window.scrollTo({\r\n      top: 0,\r\n      behavior: 'smooth'\r\n    })\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <motion.button\r\n          initial={{ opacity: 0, scale: 0.8 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          exit={{ opacity: 0, scale: 0.8 }}\r\n          transition={{ duration: 0.2 }}\r\n          onClick={scrollToTop}\r\n          className=\"fixed bottom-8 right-8 z-50 p-4 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 group\"\r\n          aria-label=\"ë§¨ ìœ„ë¡œ ìŠ¤í¬ë¡¤\"\r\n          title=\"ë§¨ ìœ„ë¡œ\"\r\n        >\r\n          <FaArrowUp className=\"text-xl group-hover:transform group-hover:-translate-y-1 transition-transform\" />\r\n        </motion.button>\r\n      )}\r\n    </AnimatePresence>\r\n  )\r\n}\r\n\r\nexport default ScrollToTopButton\r\n\r\n","/**\r\n * í…ìŠ¤íŠ¸ í¬ë§·íŒ… ë° ë§ˆí¬ë‹¤ìš´ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤\r\n */\r\nimport React from 'react'\r\n\r\n/**\r\n * ë§ˆí¬ë‹¤ìš´ ìŠ¤íƒ€ì¼ í…ìŠ¤íŠ¸ë¥¼ HTMLë¡œ ë³€í™˜ (ì •ë°€í•œ ë²„ì „)\r\n * @param text - ë§ˆí¬ë‹¤ìš´ ìŠ¤íƒ€ì¼ì˜ í…ìŠ¤íŠ¸\r\n * @returns HTML ë¬¸ìì—´\r\n */\r\nexport const parseMarkdown = (text: string): string => {\r\n  if (!text) return ''\r\n  \r\n  return text\r\n    // ì½”ë“œ ë¸”ë¡: ```code``` (ë¨¼ì € ì²˜ë¦¬í•˜ì—¬ ë‹¤ë¥¸ ë§ˆí¬ë‹¤ìš´ê³¼ ì¶©ëŒ ë°©ì§€)\r\n    .replace(/```([\\s\\S]*?)```/g, '<pre class=\"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg overflow-x-auto my-4\"><code class=\"text-sm font-mono\">$1</code></pre>')\r\n    \r\n    // ì¸ë¼ì¸ ì½”ë“œ: `code` (ì½”ë“œ ë¸”ë¡ ì²˜ë¦¬ í›„)\r\n    .replace(/`([^`]+)`/g, '<code class=\"bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded text-sm font-mono\">$1</code>')\r\n    \r\n    // ë³¼ë“œì²´: **text** ë˜ëŠ” __text__ (ì´íƒ¤ë¦­ì²´ë³´ë‹¤ ë¨¼ì € ì²˜ë¦¬)\r\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n    .replace(/__(.*?)__/g, '<strong>$1</strong>')\r\n    \r\n    // ì´íƒ¤ë¦­ì²´: *text* ë˜ëŠ” _text_ (ë³¼ë“œì²´ ì²˜ë¦¬ í›„, ê²½ê³„ ëª…í™•í™”)\r\n    .replace(/(^|[^*])\\*([^*\\s][^*]*[^*\\s]|[^*\\s])\\*([^*]|$)/g, '$1<em>$2</em>$3')\r\n    .replace(/(^|[^_])\\_([^_\\s][^_]*[^_\\s]|[^_\\s])\\_([^_]|$)/g, '$1<em>$2</em>$3')\r\n    \r\n    // ë§í¬: [text](url)\r\n    .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" class=\"text-primary-600 hover:text-primary-700 underline\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>')\r\n    \r\n    // í—¤ë”: # ## ###\r\n    .replace(/^### (.*$)/gm, '<h3 class=\"text-lg font-semibold text-gray-900 dark:text-white mt-4 mb-2\">$1</h3>')\r\n    .replace(/^## (.*$)/gm, '<h2 class=\"text-xl font-semibold text-gray-900 dark:text-white mt-4 mb-2\">$1</h2>')\r\n    .replace(/^# (.*$)/gm, '<h1 class=\"text-2xl font-bold text-gray-900 dark:text-white mt-4 mb-2\">$1</h1>')\r\n    \r\n    // ëª©ë¡: - item ë˜ëŠ” * item\r\n    .replace(/^[\\s]*[-*] (.*$)/gm, '<li class=\"ml-4\">$1</li>')\r\n    .replace(/(<li class=\"ml-4\">.*<\\/li>)/s, '<ul class=\"list-disc list-inside my-2\">$1</ul>')\r\n    \r\n    // ë¸”ë¡ ì¸ìš©: > quote\r\n    .replace(/^> (.*$)/gm, '<blockquote class=\"border-l-4 border-primary-500 pl-4 italic text-gray-600 dark:text-gray-400 my-2\">$1</blockquote>')\r\n    \r\n    // ìˆ˜í‰ì„ : ---\r\n    .replace(/^---$/gm, '<hr class=\"border-gray-300 dark:border-gray-600 my-4\">')\r\n    \r\n    // ì¤„ë°”ê¿ˆì„ <br>ë¡œ ë³€í™˜ (ë§ˆì§€ë§‰ì— ì²˜ë¦¬)\r\n    .replace(/\\n/g, '<br>')\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ HTMLë¡œ ë Œë”ë§í•˜ê¸° ìœ„í•œ í•¨ìˆ˜\r\n * @param text - ë³€í™˜í•  í…ìŠ¤íŠ¸\r\n * @returns JSX ìš”ì†Œ\r\n */\r\nexport const renderFormattedText = (text: string): React.ReactElement => {\r\n  const htmlContent = parseMarkdown(text)\r\n  \r\n  return React.createElement('div', {\r\n    className: \"text-gray-600 dark:text-gray-300 leading-relaxed\",\r\n    dangerouslySetInnerHTML: { __html: htmlContent }\r\n  })\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ ê¸¸ì´ì— ë”°ë¼ ìš”ì•½ë³¸ ìƒì„±\r\n * @param text - ì›ë³¸ í…ìŠ¤íŠ¸\r\n * @param maxLength - ìµœëŒ€ ê¸¸ì´\r\n * @returns ìš”ì•½ëœ í…ìŠ¤íŠ¸\r\n */\r\nexport const truncateText = (text: string, maxLength: number = 100): string => {\r\n  if (!text) return ''\r\n  if (text.length <= maxLength) return text\r\n  \r\n  return text.substring(0, maxLength).trim() + '...'\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ í•´ì‹œíƒœê·¸ ì¶”ì¶œ\r\n * @param text - ê²€ìƒ‰í•  í…ìŠ¤íŠ¸\r\n * @returns í•´ì‹œíƒœê·¸ ë°°ì—´\r\n */\r\nexport const extractHashtags = (text: string): string[] => {\r\n  if (!text) return []\r\n  \r\n  const hashtagRegex = /#[\\wê°€-í£]+/g\r\n  const matches = text.match(hashtagRegex)\r\n  \r\n  return matches ? matches.map(tag => tag.substring(1)) : []\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ ë©˜ì…˜(@username) ì¶”ì¶œ\r\n * @param text - ê²€ìƒ‰í•  í…ìŠ¤íŠ¸\r\n * @returns ë©˜ì…˜ ë°°ì—´\r\n */\r\nexport const extractMentions = (text: string): string[] => {\r\n  if (!text) return []\r\n  \r\n  const mentionRegex = /@[\\wê°€-í£]+/g\r\n  const matches = text.match(mentionRegex)\r\n  \r\n  return matches ? matches.map(mention => mention.substring(1)) : []\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ë¥¼ ì½ê¸° ì‹œê°„ìœ¼ë¡œ ë³€í™˜ (ë¶„ ë‹¨ìœ„)\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @param wordsPerMinute - ë¶„ë‹¹ ì½ëŠ” ë‹¨ì–´ ìˆ˜ (ê¸°ë³¸ê°’: 200)\r\n * @returns ì½ê¸° ì‹œê°„ (ë¶„)\r\n */\r\nexport const calculateReadingTime = (text: string, wordsPerMinute: number = 200): number => {\r\n  if (!text) return 0\r\n  \r\n  const words = text.trim().split(/\\s+/).length\r\n  const minutes = Math.ceil(words / wordsPerMinute)\r\n  \r\n  return Math.max(1, minutes) // ìµœì†Œ 1ë¶„\r\n}\r\n\r\n/**\r\n * ì½ê¸° ì‹œê°„ì„ í¬ë§·íŒ…í•˜ì—¬ í‘œì‹œ ë¬¸ìì—´ë¡œ ë³€í™˜\r\n * @param minutes - ì½ê¸° ì‹œê°„ (ë¶„)\r\n * @returns í‘œì‹œ ë¬¸ìì—´ (ì˜ˆ: \"5ë¶„ ì½ê¸°\")\r\n */\r\nexport const formatReadingTime = (minutes: number): string => {\r\n  if (minutes === 0) return 'ì½ê¸° ì‹œê°„ ì—†ìŒ'\r\n  if (minutes === 1) return '1ë¶„ ì½ê¸°'\r\n  return `${minutes}ë¶„ ì½ê¸°`\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ ì½ê¸° ì‹œê°„ì„ ê³„ì‚°í•˜ê³  í¬ë§·íŒ…\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @param wordsPerMinute - ë¶„ë‹¹ ì½ëŠ” ë‹¨ì–´ ìˆ˜ (ê¸°ë³¸ê°’: 200)\r\n * @returns í¬ë§·íŒ…ëœ ì½ê¸° ì‹œê°„ ë¬¸ìì—´\r\n */\r\nexport const getFormattedReadingTime = (text: string, wordsPerMinute: number = 200): string => {\r\n  const minutes = calculateReadingTime(text, wordsPerMinute)\r\n  return formatReadingTime(minutes)\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ ë‹¨ì–´ ìˆ˜ë¥¼ ê³„ì‚°\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @returns ë‹¨ì–´ ìˆ˜\r\n */\r\nexport const getWordCount = (text: string): number => {\r\n  if (!text) return 0\r\n  return text.trim().split(/\\s+/).length\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ ë¬¸ì ìˆ˜ë¥¼ ê³„ì‚° (ê³µë°± í¬í•¨/ì œì™¸)\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @param includeSpaces - ê³µë°± í¬í•¨ ì—¬ë¶€ (ê¸°ë³¸ê°’: true)\r\n * @returns ë¬¸ì ìˆ˜\r\n */\r\nexport const getCharacterCount = (text: string, includeSpaces: boolean = true): number => {\r\n  if (!text) return 0\r\n  return includeSpaces ? text.length : text.replace(/\\s/g, '').length\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ ë¬¸ì¥ ìˆ˜ë¥¼ ê³„ì‚°\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @returns ë¬¸ì¥ ìˆ˜\r\n */\r\nexport const getSentenceCount = (text: string): number => {\r\n  if (!text) return 0\r\n  const sentences = text.split(/[.!?]+/).filter(sentence => sentence.trim().length > 0)\r\n  return sentences.length\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì˜ ê°€ë…ì„± ì ìˆ˜ë¥¼ ê³„ì‚° (ê°„ë‹¨í•œ ë²„ì „)\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @returns ê°€ë…ì„± ì ìˆ˜ (0-100, ë†’ì„ìˆ˜ë¡ ì½ê¸° ì‰¬ì›€)\r\n */\r\nexport const calculateReadabilityScore = (text: string): number => {\r\n  if (!text) return 0\r\n  \r\n  const words = getWordCount(text)\r\n  const sentences = getSentenceCount(text)\r\n  const characters = getCharacterCount(text, false)\r\n  \r\n  if (words === 0 || sentences === 0) return 0\r\n  \r\n  // ê°„ë‹¨í•œ ê°€ë…ì„± ê³µì‹ (Flesch Reading Ease ê¸°ë°˜)\r\n  const avgWordsPerSentence = words / sentences\r\n  const avgSyllablesPerWord = characters / words * 0.5 // ê·¼ì‚¬ì¹˜\r\n  \r\n  const score = 206.835 - (1.015 * avgWordsPerSentence) - (84.6 * avgSyllablesPerWord)\r\n  \r\n  return Math.max(0, Math.min(100, Math.round(score)))\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ë¥¼ ì•ˆì „í•˜ê²Œ HTML ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬\r\n * @param text - ì´ìŠ¤ì¼€ì´í”„í•  í…ìŠ¤íŠ¸\r\n * @returns ì´ìŠ¤ì¼€ì´í”„ëœ HTML ë¬¸ìì—´\r\n */\r\nexport const escapeHtml = (text: string): string => {\r\n  if (!text) return ''\r\n  \r\n  return text\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#39;')\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ URLì„ ìë™ìœ¼ë¡œ ë§í¬ë¡œ ë³€í™˜\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @returns URLì´ ë§í¬ë¡œ ë³€í™˜ëœ í…ìŠ¤íŠ¸\r\n */\r\nexport const autoLinkUrls = (text: string): string => {\r\n  if (!text) return ''\r\n  \r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g\r\n  return text.replace(urlRegex, '<a href=\"$1\" class=\"text-primary-600 hover:text-primary-700 underline\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>')\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ìë™ìœ¼ë¡œ ë§í¬ë¡œ ë³€í™˜\r\n * @param text - í…ìŠ¤íŠ¸\r\n * @returns ì´ë©”ì¼ì´ ë§í¬ë¡œ ë³€í™˜ëœ í…ìŠ¤íŠ¸\r\n */\r\nexport const autoLinkEmails = (text: string): string => {\r\n  if (!text) return ''\r\n  \r\n  const emailRegex = /([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})/g\r\n  return text.replace(emailRegex, '<a href=\"mailto:$1\" class=\"text-primary-600 hover:text-primary-700 underline\">$1</a>')\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ë¥¼ ì™„ì „íˆ í¬ë§·íŒ… (ë§ˆí¬ë‹¤ìš´ + ìë™ ë§í¬)\r\n * @param text - í¬ë§·íŒ…í•  í…ìŠ¤íŠ¸\r\n * @returns ì™„ì „íˆ í¬ë§·íŒ…ëœ HTML ë¬¸ìì—´\r\n */\r\nexport const formatTextCompletely = (text: string): string => {\r\n  if (!text) return ''\r\n  \r\n  // ë§ˆí¬ë‹¤ìš´ íŒŒì‹±\r\n  let formatted = parseMarkdown(text)\r\n  // ìë™ URL ë§í¬\r\n  formatted = autoLinkUrls(formatted)\r\n  // ìë™ ì´ë©”ì¼ ë§í¬\r\n  formatted = autoLinkEmails(formatted)\r\n  \r\n  return formatted\r\n}\r\n","import React, { useState, useRef } from 'react'\r\nimport { FaBold, FaItalic, FaUnderline, FaListUl, FaListOl, FaIndent, FaOutdent, FaChevronDown } from 'react-icons/fa'\r\nimport { MdCode } from 'react-icons/md' // ì½”ë“œ ë¸”ë¡ ì•„ì´ì½˜ ì¶”ê°€\r\n\r\ninterface RichTextEditorProps {\r\n  value: string\r\n  onChange: (value: string) => void\r\n  placeholder?: string\r\n  rows?: number\r\n  className?: string\r\n}\r\n\r\nconst RichTextEditor: React.FC<RichTextEditorProps> = ({\r\n  value,\r\n  onChange,\r\n  placeholder = \"ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”\",\r\n  rows = 8,\r\n  className = \"\"\r\n}) => {\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null)\r\n  const [cursorPosition, setCursorPosition] = useState(0)\r\n\r\n  // ì»¤ì„œ ìœ„ì¹˜ ì—…ë°ì´íŠ¸\r\n  const updateCursorPosition = () => {\r\n    if (textareaRef.current) {\r\n      setCursorPosition(textareaRef.current.selectionStart)\r\n    }\r\n  }\r\n\r\n  // í˜„ì¬ ì¤„ì˜ í…ìŠ¤íŠ¸ì™€ ì‹œì‘ ìœ„ì¹˜ ê°€ì ¸ì˜¤ê¸° (ì»¤ì„œ ì¡°ì • ì˜¤ë¥˜ ìˆ˜ì •)\r\n  const getCurrentLine = () => {\r\n    const lines = value.split('\\n')\r\n    let currentLineIndex = 0\r\n    let lineStart = 0 // í˜„ì¬ ì¤„ì˜ ì‹œì‘ ìœ„ì¹˜\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n      const lineLengthWithNewline = (lines[i]?.length || 0) + 1 // ì¤„ ê¸¸ì´ + \\n (ë§ˆì§€ë§‰ ì¤„ì€ \\nì´ ì—†ìœ¼ë¯€ë¡œ ì£¼ì˜)\r\n      \r\n      // ì»¤ì„œ ìœ„ì¹˜ê°€ í˜„ì¬ ì¤„ ë²”ìœ„ ë‚´ì— ìˆê±°ë‚˜, ë§ˆì§€ë§‰ ì¤„ì¸ ê²½ìš°\r\n      if (cursorPosition >= lineStart && (cursorPosition < lineStart + lineLengthWithNewline || i === lines.length - 1)) {\r\n        currentLineIndex = i\r\n        break\r\n      }\r\n      \r\n      lineStart += lineLengthWithNewline\r\n    }\r\n    \r\n    return {\r\n      lineIndex: currentLineIndex,\r\n      line: lines[currentLineIndex] || '',\r\n      lines: lines,\r\n      lineStart: lineStart, // í˜„ì¬ ì¤„ì˜ ì ˆëŒ€ ì‹œì‘ ìœ„ì¹˜\r\n    }\r\n  }\r\n\r\n  // í…ìŠ¤íŠ¸ ì‚½ì… í•¨ìˆ˜ ì œê±°ë¨ - applyTextStyle ì‚¬ìš©\r\n\r\n  // ì¤„ ë°”ê¿ˆê³¼ í•¨ê»˜ í…ìŠ¤íŠ¸ ì‚½ì… í•¨ìˆ˜ ì œê±°ë¨ - ì‚¬ìš©í•˜ì§€ ì•ŠìŒ\r\n\r\n  // ì œëª© ìŠ¤íƒ€ì¼ ì ìš©\r\n  const applyHeading = (level: number) => {\r\n    const { lineIndex, line, lines } = getCurrentLine()\r\n    const prefix = '#'.repeat(level) + ' '\r\n    \r\n    // ì´ë¯¸ ì œëª©ì¸ ê²½ìš° ì œëª© ë ˆë²¨ ë³€ê²½\r\n    if (line.match(/^#+\\s/)) {\r\n      lines[lineIndex] = prefix + line.replace(/^#+\\s/, '')\r\n    } else {\r\n      lines[lineIndex] = prefix + line\r\n    }\r\n    \r\n    onChange(lines.join('\\n'))\r\n  }\r\n\r\n  // ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ì ìš©\r\n  const applyListStyle = (type: 'bullet' | 'number') => {\r\n    const { lineIndex, line, lines } = getCurrentLine()\r\n    \r\n    // ì´ë¯¸ ë¦¬ìŠ¤íŠ¸ì¸ ê²½ìš° ë¦¬ìŠ¤íŠ¸ í•´ì œ\r\n    if (line?.match(/^[\\s]*[-*+]\\s/) || line?.match(/^[\\s]*\\d+\\.\\s/)) {\r\n      lines[lineIndex] = line?.replace(/^[\\s]*[-*+\\d\\.]\\s/, '').trim() || ''\r\n    } else {\r\n      // ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ í•­ëª© ì¶”ê°€\r\n      const indent = line?.match(/^[\\s]*/)?.[0] || ''\r\n      const prefix = type === 'bullet' ? '- ' : '1. '\r\n      lines[lineIndex] = indent + prefix + (line?.trim() || '')\r\n    }\r\n    \r\n    onChange(lines.join('\\n'))\r\n  }\r\n\r\n  // ë“¤ì—¬ì“°ê¸°/ë‚´ì–´ì“°ê¸°\r\n  const adjustIndent = (direction: 'in' | 'out') => {\r\n    const { lineIndex, lines } = getCurrentLine()\r\n    const line = lines[lineIndex] || ''\r\n    \r\n    if (direction === 'in') {\r\n      lines[lineIndex] = '  ' + line\r\n    } else {\r\n      lines[lineIndex] = line.replace(/^[\\s]{0,2}/, '')\r\n    }\r\n    \r\n    onChange(lines.join('\\n'))\r\n  }\r\n\r\n  // í† ê¸€ ë¸”ë¡ ìƒì„±\r\n  const insertToggle = () => {\r\n    const { lineIndex, lines, lineStart } = getCurrentLine()\r\n    const newLine = 'â–¶ í† ê¸€ ì œëª©'\r\n    lines.splice(lineIndex + 1, 0, newLine, '  í† ê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”') // ê³µë°± 2ê°œ ë“¤ì—¬ì“°ê¸°\r\n    onChange(lines.join('\\n'))\r\n    \r\n    // ì»¤ì„œë¥¼ í† ê¸€ ë‚´ìš© (ë‘ ë²ˆì§¸ ì‚½ì…ëœ ì¤„)ìœ¼ë¡œ ì´ë™\r\n    setTimeout(() => {\r\n      if (textareaRef.current) {\r\n        // ì»¤ì„œ ìœ„ì¹˜: í˜„ì¬ ì¤„ ì‹œì‘ ìœ„ì¹˜ + í˜„ì¬ ì¤„ ê¸¸ì´ + \\n + ì²« ë²ˆì§¸ ì‚½ì…ëœ ì¤„ ê¸¸ì´ + \\n + 2 (ë“¤ì—¬ì“°ê¸°)\r\n        const newPosition = lineStart + (lines[lineIndex]?.length || 0) + 1 + newLine.length + 1 + 2\r\n        textareaRef.current.setSelectionRange(newPosition, newPosition)\r\n        textareaRef.current.focus()\r\n      }\r\n    }, 0)\r\n  }\r\n\r\n  // === ìƒˆë¡œ ì¶”ê°€ëœ ì½”ë“œ ë¸”ë¡ ì‚½ì… í•¨ìˆ˜ ===\r\n  const insertCodeBlock = () => {\r\n    const { lineIndex, lines, lineStart } = getCurrentLine()\r\n    \r\n    const codeBlockLines = [\r\n      '```javascript', // ê¸°ë³¸ ì–¸ì–´\r\n      '// ì—¬ê¸°ì— ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”',\r\n      '```',\r\n    ]\r\n\r\n    // í˜„ì¬ ì¤„ì˜ ë°”ë¡œ ì•„ë˜ì— ì„¸ ì¤„ì„ ì‚½ì…\r\n    lines.splice(lineIndex + 1, 0, ...codeBlockLines)\r\n    const newValue = lines.join('\\n')\r\n    onChange(newValue)\r\n    \r\n    // ì»¤ì„œë¥¼ ì½”ë“œ ë¸”ë¡ì˜ ë‚´ìš© ì¤„ë¡œ ì´ë™\r\n    setTimeout(() => {\r\n      if (textareaRef.current) {\r\n        // ì»¤ì„œ ìœ„ì¹˜: (í˜„ì¬ ì¤„ì˜ ë) + (ì²« ë²ˆì§¸ ë°±í‹± ì¤„ ê¸¸ì´ + \\n) + (ë‚´ìš© ì¤„ ì‹œì‘)\r\n        const positionToMove = \r\n          lineStart + (lines[lineIndex]?.length || 0) + 1  // í˜„ì¬ ì¤„ ë + \\n\r\n          + (codeBlockLines[0]?.length || 0) + 1          // ì²« ë²ˆì§¸ ë°±í‹± ì¤„ + \\n\r\n          + 2                                     // '//' ìœ„ì¹˜ê¹Œì§€ ì´ë™\r\n        \r\n        textareaRef.current.setSelectionRange(positionToMove, positionToMove)\r\n        textareaRef.current.focus()\r\n      }\r\n    }, 0)\r\n  }\r\n  // ===================================\r\n\r\n  // í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ì ìš© (ê°„ë‹¨í•œ ë§ˆí¬ë‹¤ìš´)\r\n  const applyTextStyle = (style: 'bold' | 'italic' | 'underline') => {\r\n    const textarea = textareaRef.current\r\n    if (!textarea) return\r\n    \r\n    const start = textarea.selectionStart\r\n    const end = textarea.selectionEnd\r\n    const selectedText = value.substring(start, end)\r\n    \r\n    let wrap = ''\r\n    switch (style) {\r\n      case 'bold': wrap = '**'; break\r\n      case 'italic': wrap = '*'; break\r\n      case 'underline': wrap = '__'; break\r\n    }\r\n    \r\n    const wrappedText = `${wrap}${selectedText}${wrap}`\r\n    \r\n    const newValue = value.substring(0, start) + wrappedText + value.substring(end)\r\n    onChange(newValue)\r\n    \r\n    // ì»¤ì„œ ìœ„ì¹˜ ì¡°ì •\r\n    setTimeout(() => {\r\n      // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë©´, ë©í¼ ì•ˆì— ì»¤ì„œë¥¼ ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.\r\n      if (start === end) {\r\n        textarea.setSelectionRange(start + wrap.length, end + wrap.length)\r\n      } \r\n      // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ìˆìœ¼ë©´, ì „ì²´ ë©í¼ ë’¤ì— ì»¤ì„œë¥¼ ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.\r\n      else {\r\n        textarea.setSelectionRange(end + 2 * wrap.length, end + 2 * wrap.length)\r\n      }\r\n      textarea.focus()\r\n    }, 0)\r\n  }\r\n\r\n  // ë Œë”ë§ëœ í…ìŠ¤íŠ¸ (ë§ˆí¬ë‹¤ìš´ â†’ HTML)\r\n  const renderMarkdown = (text: string) => {\r\n    return text\r\n      // ì œëª©\r\n      .replace(/^### (.*$)/gim, '<h3 class=\"text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-white\">$1</h3>')\r\n      .replace(/^## (.*$)/gim, '<h2 class=\"text-xl font-semibold mt-4 mb-2 text-gray-900 dark:text-white\">$1</h2>')\r\n      .replace(/^# (.*$)/gim, '<h1 class=\"text-2xl font-bold mt-4 mb-2 text-gray-900 dark:text-white\">$1</h1>')\r\n      // ë³¼ë“œ\r\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-bold\">$1</strong>')\r\n      // ì´íƒ¤ë¦­\r\n      .replace(/\\*(.*?)\\*/g, '<em class=\"italic\">$1</em>')\r\n      // ë°‘ì¤„\r\n      .replace(/__(.*?)__/g, '<u class=\"underline\">$1</u>')\r\n      // ì¸ë¼ì¸ ì½”ë“œ ì¶”ê°€\r\n      .replace(/`(.*?)`/g, '<code class=\"bg-gray-200 dark:bg-gray-600 text-red-600 dark:text-red-400 px-1 rounded text-sm\">$1</code>')\r\n      // í† ê¸€\r\n      .replace(/^â–¶ (.*$)/gim, '<div class=\"flex items-center mt-2 mb-1\"><span class=\"mr-2\">â–¶</span><span class=\"font-medium text-gray-900 dark:text-white\">$1</span></div>')\r\n      // ë¶ˆë¦¿ ë¦¬ìŠ¤íŠ¸\r\n      .replace(/^[\\s]*[-*+]\\s(.*$)/gim, '<div class=\"ml-4 mb-1\"><span class=\"mr-2\">â€¢</span>$1</div>')\r\n      // ìˆ«ì ë¦¬ìŠ¤íŠ¸\r\n      .replace(/^[\\s]*\\d+\\.\\s(.*$)/gim, '<div class=\"ml-4 mb-1\"><span class=\"mr-2\">1.</span>$1</div>')\r\n      // ì½”ë“œ ë¸”ë¡\r\n      .replace(/```(.*?)\\n([\\s\\S]*?)\\n```/gim, (_match, p1, p2) => {\r\n        const lang = p1 ? `language-${p1.trim()}` : ''\r\n        return `<pre class=\"bg-gray-800 p-3 rounded-lg overflow-x-auto my-3\"><code class=\"${lang} text-sm text-gray-100\">${p2.trim()}</code></pre>`\r\n      })\r\n      // ì¤„ë°”ê¿ˆ\r\n      .replace(/\\n/g, '<br>')\r\n  }\r\n\r\n  return (\r\n    <div className={`border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 ${className}`}>\r\n      {/* íˆ´ë°” */}\r\n      <div className=\"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 rounded-t-lg\">\r\n        {/* ì œëª© ë²„íŠ¼ë“¤ */}\r\n        <div className=\"flex items-center gap-1 mr-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyHeading(1)}\r\n            className=\"px-2 py-1 text-xs font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ì œëª© 1\"\r\n          >\r\n            H1\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyHeading(2)}\r\n            className=\"px-2 py-1 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ì œëª© 2\"\r\n          >\r\n            H2\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyHeading(3)}\r\n            className=\"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ì œëª© 3\"\r\n          >\r\n            H3\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"w-px h-4 bg-gray-300 dark:bg-gray-600\"></div>\r\n\r\n        {/* í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */}\r\n        <div className=\"flex items-center gap-1 mx-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyTextStyle('bold')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"êµµê²Œ\"\r\n          >\r\n            <FaBold className=\"text-xs\" />\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyTextStyle('italic')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ê¸°ìš¸ì„\"\r\n          >\r\n            <FaItalic className=\"text-xs\" />\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyTextStyle('underline')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ë°‘ì¤„\"\r\n          >\r\n            <FaUnderline className=\"text-xs\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"w-px h-4 bg-gray-300 dark:bg-gray-600\"></div>\r\n\r\n        {/* ë¦¬ìŠ¤íŠ¸ */}\r\n        <div className=\"flex items-center gap-1 mx-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyListStyle('bullet')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ë¶ˆë¦¿ ë¦¬ìŠ¤íŠ¸\"\r\n          >\r\n            <FaListUl className=\"text-xs\" />\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => applyListStyle('number')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸\"\r\n          >\r\n            <FaListOl className=\"text-xs\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"w-px h-4 bg-gray-300 dark:bg-gray-600\"></div>\r\n\r\n        {/* ë“¤ì—¬ì“°ê¸° */}\r\n        <div className=\"flex items-center gap-1 mx-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => adjustIndent('out')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ë‚´ì–´ì“°ê¸°\"\r\n          >\r\n            <FaOutdent className=\"text-xs\" />\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => adjustIndent('in')}\r\n            className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n            title=\"ë“¤ì—¬ì“°ê¸°\"\r\n          >\r\n            <FaIndent className=\"text-xs\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"w-px h-4 bg-gray-300 dark:bg-gray-600\"></div>\r\n\r\n        {/* í† ê¸€ ë° ì½”ë“œ ë¸”ë¡ */}\r\n        <button\r\n          type=\"button\"\r\n          onClick={insertToggle}\r\n          className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors mx-2\"\r\n          title=\"í† ê¸€ ë¸”ë¡\"\r\n        >\r\n          <FaChevronDown className=\"text-xs\" />\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          onClick={insertCodeBlock}\r\n          className=\"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors\"\r\n          title=\"ì½”ë“œ ë¸”ë¡\"\r\n        >\r\n          <MdCode className=\"text-sm\" />\r\n        </button>\r\n      </div>\r\n\r\n      {/* í¸ì§‘ ì˜ì—­ */}\r\n      <div className=\"relative\">\r\n        <textarea\r\n          ref={textareaRef}\r\n          value={value}\r\n          onChange={(e) => onChange(e.target.value)}\r\n          onSelect={updateCursorPosition}\r\n          onKeyUp={updateCursorPosition}\r\n          onMouseUp={updateCursorPosition}\r\n          placeholder={placeholder}\r\n          rows={rows}\r\n          className=\"w-full p-3 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none resize-y\"\r\n        />\r\n        \r\n        {/* ë¯¸ë¦¬ë³´ê¸° ì˜ì—­ (ì„ íƒì‚¬í•­) */}\r\n        {value && (\r\n          <div className=\"absolute inset-0 pointer-events-none opacity-0\">\r\n            <div \r\n              className=\"p-3 text-gray-900 dark:text-white whitespace-pre-wrap\"\r\n              dangerouslySetInnerHTML={{ __html: renderMarkdown(value) }}\r\n            />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RichTextEditor\r\n","import React from 'react'\r\n\r\nexport type AdminLanguage = 'ko' | 'en' | 'ja'\r\n\r\ninterface LanguageTabsProps {\r\n  activeLanguage: AdminLanguage\r\n  onChange: (lang: AdminLanguage) => void\r\n}\r\n\r\nconst LanguageTabs: React.FC<LanguageTabsProps> = ({ activeLanguage, onChange }) => {\r\n  const languages: { code: AdminLanguage; flag: string; label: string }[] = [\r\n    { code: 'ko', flag: 'ğŸ‡°ğŸ‡·', label: 'í•œêµ­ì–´' },\r\n    { code: 'en', flag: 'ğŸ‡ºğŸ‡¸', label: 'English' },\r\n    { code: 'ja', flag: 'ğŸ‡¯ğŸ‡µ', label: 'æ—¥æœ¬èª' }\r\n  ]\r\n\r\n  return (\r\n    <div className=\"flex gap-2 mb-6 border-b border-gray-200 dark:border-gray-700\">\r\n      {languages.map((lang) => {\r\n        const isActive = activeLanguage === lang.code\r\n        return (\r\n          <button\r\n            key={lang.code}\r\n            type=\"button\"\r\n            onClick={() => onChange(lang.code)}\r\n            className={`flex items-center gap-2 px-6 py-3 font-semibold transition-all duration-200 border-b-2 ${\r\n              isActive\r\n                ? 'border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20'\r\n                : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800'\r\n            }`}\r\n          >\r\n            <span className=\"text-xl\">{lang.flag}</span>\r\n            <span>{lang.label}</span>\r\n          </button>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LanguageTabs\r\n\r\n","import React, { useMemo, useState } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FaEdit, FaTrash, FaTag } from 'react-icons/fa'\r\nimport { Link } from 'react-router-dom'\r\nimport { Learning, Skill } from '../../types'\r\nimport { formatDate, formatRelativeDate } from '../../utils/dateUtils'\r\nimport { parseMarkdown, getFormattedReadingTime } from '../../utils/textUtils'\r\nimport RichTextEditor from '../RichTextEditor'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField } from '../../utils/i18nUtils'\r\nimport LanguageTabs, { AdminLanguage } from './LanguageTabs'\r\n\r\n// ğŸŒŸ BookDetail.tsxì—ì„œ ì „ë‹¬ë°›ëŠ” Skill Mapì˜ ê°’ íƒ€ì…\r\ninterface SkillWithLevel extends Skill {\r\n  levelText: string\r\n}\r\n\r\ninterface LearningItemProps {\r\n  learning: Learning\r\n  index: number\r\n  isAuthenticated: boolean\r\n  isEditing: boolean\r\n  currentFormData: { \r\n    topic: string\r\n    topicEn?: string\r\n    topicJa?: string\r\n    content: string\r\n    contentEn?: string\r\n    contentJa?: string\r\n  }\r\n  setCurrentFormData: React.Dispatch<React.SetStateAction<{ \r\n    topic: string\r\n    topicEn?: string\r\n    topicJa?: string\r\n    content: string\r\n    contentEn?: string\r\n    contentJa?: string\r\n  }>>\r\n  onStartEdit: (learning: Learning, chapterId?: string) => void\r\n  onSaveEdit: () => void\r\n  onCancelEdit: () => void\r\n  onDelete: (learningId: string, chapterId?: string) => void\r\n  isSaving?: boolean\r\n  // ğŸŒŸ NEW PROP 1: ì „ì²´ ìŠ¤í‚¬ ëª©ë¡ ë§µ (IDë¡œ ìŠ¤í‚¬ ì •ë³´ë¥¼ ì°¾ëŠ” ìš©ë„)\r\n  allSkillsMap?: Map<string, SkillWithLevel>\r\n  // ğŸŒŸ NEW PROP 2: ìŠ¤í‚¬ ì—°ê²°/í•´ì œ í•¸ë“¤ëŸ¬ (useLearningManagerì— êµ¬í˜„ í•„ìš”)\r\n  onSkillLinkChange?: (learningId: string, skillId: string, isLinked: boolean) => void\r\n  // ğŸŒŸ NEW PROP 3: ëª©ì°¨ ID (ëª©ì°¨ ê¸°ë°˜ í•™ìŠµ ë‚´ìš©ì¸ ê²½ìš°)\r\n  chapterId?: string\r\n}\r\n\r\n/**\r\n * ê°œë³„ í•™ìŠµ ë‚´ìš© ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸\r\n * í•™ìŠµ ë‚´ìš©ì˜ í‘œì‹œ, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.\r\n */\r\nconst LearningItem: React.FC<LearningItemProps> = ({\r\n  learning,\r\n  index,\r\n  isAuthenticated,\r\n  isEditing,\r\n  currentFormData,\r\n  setCurrentFormData,\r\n  onStartEdit,\r\n  onSaveEdit,\r\n  onCancelEdit,\r\n  onDelete,\r\n  isSaving = false,\r\n  allSkillsMap,\r\n  onSkillLinkChange,\r\n  chapterId,\r\n}) => {\r\n  const { i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  const [editLang, setEditLang] = useState<AdminLanguage>('ko')\r\n  \r\n  // ğŸŒŸ 1. í˜„ì¬ í•™ìŠµ ë‚´ìš©ì— ì—°ê²°ëœ ìŠ¤í‚¬ ëª©ë¡ ì¶”ì¶œ (ê¸°ë³¸ ë³´ê¸°ìš©)\r\n  const linkedSkills = useMemo(() => {\r\n    if (!allSkillsMap) return []\r\n    return (learning.skillIds || [])\r\n      .map(skillId => allSkillsMap.get(skillId))\r\n      .filter((skill): skill is SkillWithLevel => !!skill)\r\n  }, [learning.skillIds, allSkillsMap])\r\n  \r\n  // ğŸŒŸ 2. ê´€ë¦¬ì ìˆ˜ì • ëª¨ë“œì—ì„œ ìŠ¤í‚¬ ì—°ê²°/í•´ì œ í† ê¸€ í•¸ë“¤ëŸ¬\r\n  const handleSkillToggle = (skillId: string) => {\r\n    if (!onSkillLinkChange) return\r\n    const isLinked = learning.skillIds?.includes(skillId) || false\r\n    // ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸(BookDetail)ì˜ í•¸ë“¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ì—¬ LearningManagerë¥¼ í†µí•´ ìƒíƒœ ì—…ë°ì´íŠ¸\r\n    onSkillLinkChange(learning._id, skillId, !isLinked)\r\n  }\r\n\r\n  // ğŸŒŸ 3. í¸ì§‘ ëª¨ë“œì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì „ì²´ ìŠ¤í‚¬ ëª©ë¡ (Mapì˜ ê°’ì„ ë°°ì—´ë¡œ ë³€í™˜)\r\n  const availableSkills = useMemo(() => {\r\n    if (!allSkillsMap) return []\r\n    return Array.from(allSkillsMap.values())\r\n  }, [allSkillsMap])\r\n\r\n  // ğŸŒŸ 4. ìƒ‰ìƒì„ ë™ì ìœ¼ë¡œ ì ìš©í•˜ëŠ” ìŠ¤íƒ€ì¼ ìƒì„± í•¨ìˆ˜ (ë°°ì§€ìš©)\r\n  const getBadgeStyle = (colorCode: string) => {\r\n    // ë°°ê²½ìƒ‰ì— 10%ì˜ íˆ¬ëª…ë„ë¥¼ ì ìš©í•˜ì—¬ ì€ì€í•˜ê²Œ í‘œì‹œ\r\n    const bgColor = `${colorCode}1A`\r\n    const textColor = colorCode\r\n    \r\n    return {\r\n      backgroundColor: bgColor,\r\n      color: textColor,\r\n    } as React.CSSProperties\r\n  }\r\n  \r\n  // ğŸŒŸ 5. ìƒ‰ìƒì„ ë™ì ìœ¼ë¡œ ì ìš©í•˜ëŠ” ìŠ¤íƒ€ì¼ ìƒì„± í•¨ìˆ˜ (ë²„íŠ¼ìš©)\r\n  const getButtonStyle = (colorCode: string) => {\r\n    return {\r\n      backgroundColor: colorCode,\r\n      color: '#FFFFFF',\r\n    } as React.CSSProperties\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ delay: 0.1 * index }}\r\n      className={`card p-6 ${isEditing ? 'border-2 border-primary-500 shadow-xl' : ''}`}\r\n    >\r\n      {isEditing ? (\r\n        // ğŸŒŸ [ìˆ˜ì • í¼ ë Œë”ë§]\r\n        <div className=\"space-y-4\">\r\n          {/* ì–¸ì–´ íƒ­ */}\r\n          <LanguageTabs activeLanguage={editLang} onChange={setEditLang} />\r\n          \r\n          {/* í•™ìŠµ ì£¼ì œ */}\r\n          <div>\r\n            <label htmlFor=\"topic\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              í•™ìŠµ ì£¼ì œ {editLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n              <span className=\"text-xs text-gray-500 ml-2\">\r\n                ({editLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : editLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n              </span>\r\n            </label>\r\n            {editLang === 'ko' && (\r\n              <input\r\n                type=\"text\"\r\n                id=\"topic\"\r\n                value={currentFormData.topic}\r\n                onChange={(e) => setCurrentFormData(prev => ({ ...prev, topic: e.target.value }))}\r\n                placeholder=\"í•™ìŠµ ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            )}\r\n            {editLang === 'en' && (\r\n              <input\r\n                type=\"text\"\r\n                value={currentFormData.topicEn || ''}\r\n                onChange={(e) => setCurrentFormData(prev => ({ ...prev, topicEn: e.target.value }))}\r\n                placeholder=\"Enter learning topic\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            )}\r\n            {editLang === 'ja' && (\r\n              <input\r\n                type=\"text\"\r\n                value={currentFormData.topicJa || ''}\r\n                onChange={(e) => setCurrentFormData(prev => ({ ...prev, topicJa: e.target.value }))}\r\n                placeholder=\"å­¦ç¿’ãƒˆãƒ”ãƒƒã‚¯ã‚’å…¥åŠ›\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* í•™ìŠµ ë‚´ìš© */}\r\n          <div>\r\n            <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              í•™ìŠµ ë‚´ìš© {editLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n              <span className=\"text-xs text-gray-500 ml-2\">\r\n                ({editLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : editLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n              </span>\r\n            </label>\r\n            {editLang === 'ko' && (\r\n              <RichTextEditor\r\n                value={currentFormData.content}\r\n                onChange={(value) => setCurrentFormData(prev => ({ ...prev, content: value }))}\r\n                placeholder=\"í•™ìŠµ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”. ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì„œì‹ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\r\n                rows={8}\r\n                className=\"min-h-[200px]\"\r\n              />\r\n            )}\r\n            {editLang === 'en' && (\r\n              <RichTextEditor\r\n                value={currentFormData.contentEn || ''}\r\n                onChange={(value) => setCurrentFormData(prev => ({ ...prev, contentEn: value }))}\r\n                placeholder=\"Enter learning content. Use the rich text editor to apply various formats.\"\r\n                rows={8}\r\n                className=\"min-h-[200px]\"\r\n              />\r\n            )}\r\n            {editLang === 'ja' && (\r\n              <RichTextEditor\r\n                value={currentFormData.contentJa || ''}\r\n                onChange={(value) => setCurrentFormData(prev => ({ ...prev, contentJa: value }))}\r\n                placeholder=\"å­¦ç¿’å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ç”¨ã—ã¦ã€ã•ã¾ã–ã¾ãªæ›¸å¼ã‚’é©ç”¨ã§ãã¾ã™ã€‚\"\r\n                rows={8}\r\n                className=\"min-h-[200px]\"\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* ğŸŒŸ [ì¶”ê°€] ìŠ¤í‚¬ ì—°ê²° ì„¹ì…˜ (ê´€ë¦¬ììš©) */}\r\n          {isAuthenticated && allSkillsMap && availableSkills.length > 0 && (\r\n            <div className=\"pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2\">\r\n                <FaTag size={14} className=\"text-primary-600\" /> ê´€ë ¨ ìŠ¤í‚¬ ì—°ê²° ({learning.skillIds?.length || 0}ê°œ ì—°ê²°ë¨)\r\n              </label>\r\n              {/* ìŠ¤í‚¬ ì„ íƒ ë²„íŠ¼ ëª©ë¡ */}\r\n              <div className=\"flex flex-wrap gap-2 max-h-40 overflow-y-auto p-2 rounded-lg bg-gray-50 dark:bg-gray-700/50\">\r\n                {availableSkills.map(skill => {\r\n                  const isLinked = learning.skillIds?.includes(skill._id!)\r\n                  // ğŸŒŸ ë™ì  ìŠ¤íƒ€ì¼ ì ìš©\r\n                  const dynamicStyle = skill.color && isLinked ? getButtonStyle(skill.color) : undefined\r\n\r\n                  return (\r\n                    <button\r\n                      key={skill._id}\r\n                      onClick={() => handleSkillToggle(skill._id!)}\r\n                      type=\"button\"\r\n                      className={`px-3 py-1 text-xs font-medium rounded-full transition-all ${\r\n                        isLinked\r\n                          ? 'text-white hover:opacity-80'\r\n                          : 'bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-500'\r\n                      }`}\r\n                      style={dynamicStyle}\r\n                    >\r\n                      {isLinked ? 'âœ”ï¸' : 'â•'} {skill.name}\r\n                    </button>\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n          {/* ğŸŒŸ ìŠ¤í‚¬ ì—°ê²° ì„¹ì…˜ ë */}\r\n\r\n          <div className=\"flex gap-3 pt-4\">\r\n            <button\r\n              onClick={() => onSaveEdit()}\r\n              disabled={isSaving || !currentFormData.topic.trim() || !currentFormData.content.trim()}\r\n              className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n            >\r\n              {isSaving ? 'ì €ì¥ ì¤‘...' : 'ìˆ˜ì •'}\r\n            </button>\r\n            <button\r\n              onClick={onCancelEdit}\r\n              className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n            >\r\n              ì·¨ì†Œ\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        // ğŸŒŸ [ê¸°ë³¸ ë³´ê¸° ë Œë”ë§]\r\n        <>\r\n          <div className=\"flex items-start justify-between mb-3\">\r\n            <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n              {getLocalizedField(currentLang, learning.topic, learning.topicEn, learning.topicJa)}\r\n            </h3>\r\n            {isAuthenticated && (\r\n              <div className=\"flex gap-1\">\r\n                <button\r\n                  onClick={() => onStartEdit(learning, chapterId)}\r\n                  className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-blue-600 dark:text-blue-400\"\r\n                  aria-label=\"ìˆ˜ì •\"\r\n                >\r\n                  <FaEdit size={16} />\r\n                </button>\r\n                <button\r\n                  onClick={() => onDelete(learning._id, chapterId)}\r\n                  className=\"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400\"\r\n                  aria-label=\"ì‚­ì œ\"\r\n                >\r\n                  <FaTrash size={16} />\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          {/* ğŸŒŸ [ì¶”ê°€] ì—°ê²°ëœ ìŠ¤í‚¬ ë°°ì§€ ëª©ë¡ (ê¸°ë³¸ ë³´ê¸°) */}\r\n          {linkedSkills.length > 0 && (\r\n            <div className=\"flex flex-wrap items-start gap-2 mb-4\">\r\n              <FaTag size={16} className=\"text-gray-500 dark:text-gray-400 mt-1 shrink-0\" title=\"ê´€ë ¨ ìŠ¤í‚¬\" />\r\n              {linkedSkills.map(skill => {\r\n                // ğŸŒŸ ë™ì  ìŠ¤íƒ€ì¼ ì ìš©\r\n                const badgeStyle = skill.color ? getBadgeStyle(skill.color) : undefined\r\n\r\n                return (\r\n                  <Link\r\n                    key={skill._id}\r\n                    to={`/projects?skillId=${skill._id}`}\r\n                    title={`${skill.name} ìŠ¤í‚¬ì´ ì‚¬ìš©ëœ í”„ë¡œì íŠ¸ ë³´ê¸°`}\r\n                    className=\"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-all hover:opacity-80 hover:ring-2\"\r\n                    style={{\r\n                      ...badgeStyle,\r\n                      '--tw-ring-color': skill.color || '#3B82F6',\r\n                    } as React.CSSProperties}\r\n                  >\r\n                    {skill.name}\r\n                  </Link>\r\n                )\r\n              })}\r\n            </div>\r\n          )}\r\n          {/* ğŸŒŸ ì—°ê²°ëœ ìŠ¤í‚¬ ë°°ì§€ ëª©ë¡ ë */}\r\n\r\n          <div \r\n            className=\"text-gray-600 dark:text-gray-300 leading-relaxed prose prose-sm max-w-none dark:prose-invert\"\r\n            dangerouslySetInnerHTML={{ \r\n              __html: parseMarkdown(\r\n                getLocalizedField(currentLang, learning.content, learning.contentEn, learning.contentJa)\r\n              ) \r\n            }}\r\n          />\r\n          <div className=\"mt-4 text-sm text-gray-500 dark:text-gray-500\">\r\n            ì‘ì„±ì¼: {formatDate(learning.createdAt)} ({formatRelativeDate(learning.createdAt)}) â€¢ {getFormattedReadingTime(learning.content)}\r\n          </div>\r\n        </>\r\n      )}\r\n    </motion.div>\r\n  )\r\n}\r\n\r\nexport default LearningItem\r\n","import React, { useMemo, useState } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom'\r\nimport { FaArrowLeft, FaBook, FaStar, FaCalendar, FaEdit, FaTrash, FaPlus, FaChevronRight, FaCubes } from 'react-icons/fa'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { formatDate } from '../utils/dateUtils'\r\nimport { Chapter, Skill } from '../types'\r\nimport { useBook, useDeleteBook } from '../hooks/useBooks'\r\nimport { useLearningManager } from '../hooks/useLearningManager'\r\n// ëª©ì°¨ ê´€ë¦¬ ê´€ë ¨ import ì œê±°ë¨ - ì¤‘ë³µ ì¶œë ¥ ë¬¸ì œ í•´ê²°\r\nimport LearningItem from './common/LearningItem'\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { chaptersAPI } from '../services/api'\r\nimport { useSkills } from '../hooks/useSkills'\r\nimport RichTextEditor from './RichTextEditor'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField } from '@/utils/i18nUtils'\r\n\r\nconst BookDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>()\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const { isAuthenticated } = useAuth()\r\n  const { i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  \r\n  // ğŸŒŸ React Queryë¡œ ì„œì  ë°ì´í„° ì¡°íšŒ\r\n  const { data: book, isLoading: loading, isError, error } = useBook(id)\r\n  \r\n  // ğŸŒŸ React Queryë¡œ ëª©ì°¨ ë°ì´í„° ì¡°íšŒ\r\n  const { data: bookChapters = [] } = useQuery<Chapter[], Error>({\r\n    queryKey: ['chapters', id],\r\n    queryFn: async () => {\r\n      if (!id) return []\r\n      const response = await chaptersAPI.getByBook(id)\r\n      return response.data?.data || response.data || []\r\n    },\r\n    enabled: !!id,\r\n    staleTime: 5 * 60 * 1000,\r\n  })\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n  const { skillCategories } = useSkills()\r\n  \r\n  // ğŸŒŸ React Queryë¡œ ì„œì  ì‚­ì œ\r\n  const deleteMutation = useDeleteBook()\r\n  \r\n  const bookApiError = isError ? (error?.message || 'ì„œì  ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.') : null\r\n\r\n  // ëª©ì°¨ ê´€ë¦¬ ê´€ë ¨ ìƒíƒœ ì œê±°ë¨ - ì¤‘ë³µ ì¶œë ¥ ë¬¸ì œ í•´ê²°\r\n\r\n  // ğŸ’¡ ì»¤ìŠ¤í…€ í›… ì‚¬ìš©: í•™ìŠµ ë‚´ìš© ìƒíƒœì™€ í•¸ë“¤ëŸ¬ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.\r\n  const {\r\n    editingLearningId,\r\n    currentFormData,\r\n    setCurrentFormData,\r\n    showAddForm,\r\n    isSaving,\r\n    learningApiError,\r\n    handleToggleAddForm,\r\n    handleAddLearning,\r\n    handleDeleteLearning,\r\n    handleStartEdit,\r\n    handleSaveEdit,\r\n    handleCancelEdit,\r\n    handleSkillLinkChange,  // ğŸŒŸ ìŠ¤í‚¬ ì—°ê²° í•¸ë“¤ëŸ¬ ì¶”ê°€\r\n  } = useLearningManager(id!)\r\n  \r\n  // ğŸŒŸ í™•ì¥ ìƒíƒœ ê´€ë¦¬ (ì•„ì½”ë””ì–¸ UI)\r\n  const [expandedChapterId, setExpandedChapterId] = useState<string | null>(null)\r\n  \r\n  // ğŸŒŸ ëª©ì°¨ ì¶”ê°€ í¼ ìƒíƒœ\r\n  const [showAddChapterForm, setShowAddChapterForm] = useState(false)\r\n  const [chapterFormData, setChapterFormData] = useState({ \r\n    title: '', \r\n    titleEn: '', \r\n    titleJa: '', \r\n    order: (bookChapters?.length || 0) + 1 \r\n  })\r\n  \r\n  // ì±•í„° í™•ì¥/ì¶•ì†Œ í† ê¸€ í•¨ìˆ˜\r\n  const toggleChapter = (chapterId: string) => {\r\n    setExpandedChapterId(prevId => (prevId === chapterId ? null : chapterId))\r\n  }\r\n  \r\n  // ëª©ì°¨ ì¶”ê°€ í•¸ë“¤ëŸ¬\r\n  const handleAddChapter = async () => {\r\n    if (!chapterFormData.title.trim()) {\r\n      alert('ëª©ì°¨ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n    \r\n    try {\r\n      await chaptersAPI.create(id!, chapterFormData)\r\n      setShowAddChapterForm(false)\r\n      setChapterFormData({ title: '', titleEn: '', titleJa: '', order: (bookChapters?.length || 0) + 2 })\r\n      // React Queryê°€ ìë™ìœ¼ë¡œ ìºì‹œ ë¬´íš¨í™”í•˜ì—¬ ëª©ë¡ ê°±ì‹ \r\n    } catch (error) {\r\n      console.error('Failed to add chapter:', error)\r\n      alert('ëª©ì°¨ ì¶”ê°€ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }\r\n\r\n  // =================================================================\r\n  // ğŸ“š ìŠ¤í‚¬ ë°ì´í„° ì²˜ë¦¬ ë¡œì§ (useMemoë¡œ ìµœì í™”)\r\n  // =================================================================\r\n\r\n  // ğŸŒŸ ì „ì²´ ì±…ì— ì—°ê²°ëœ ìŠ¤í‚¬ ëª©ë¡ í•„í„°ë§ ë° ê°€ê³µ\r\n  const linkedBookSkills = useMemo<Array<Skill & { levelText: string }>>(() => {\r\n    if (!bookChapters || !skillCategories) return []\r\n\r\n    const allSkills = skillCategories.flatMap(category => category.skills || [])\r\n    \r\n    // 1. ëª¨ë“  ì±•í„°ì˜ ëª¨ë“  í•™ìŠµ ë‚´ìš©ì—ì„œ ê³ ìœ í•œ skillIdsë¥¼ ì¶”ì¶œ\r\n    const uniqueSkillIds = new Set<string>()\r\n    bookChapters.forEach(chapter => {\r\n      (chapter.learnings || []).forEach(learning => {\r\n        // í•™ìŠµ ë‚´ìš©ì— skillIds í•„ë“œê°€ ìˆë‹¤ê³  ê°€ì •\r\n        (learning.skillIds || []).forEach((skillId: string) => {\r\n          uniqueSkillIds.add(skillId)\r\n        })\r\n      })\r\n    })\r\n    \r\n    if (uniqueSkillIds.size === 0) return []\r\n\r\n    // 2. Skills.tsxì˜ ë ˆë²¨ í…ìŠ¤íŠ¸ ë¡œì§ ì¬ì‚¬ìš©\r\n    const getLevelText = (level: number) => {\r\n      if (level >= 90) return 'Expert'\r\n      if (level >= 70) return 'Proficient'\r\n      if (level >= 50) return 'Competent'\r\n      return 'Basic'\r\n    }\r\n\r\n    // 3. í•„í„°ë§ ë° ê°€ê³µ\r\n    return allSkills\r\n      .filter(skill => skill._id && uniqueSkillIds.has(skill._id))\r\n      .map(skill => ({\r\n        ...skill,\r\n        levelText: getLevelText(skill.level || 0),\r\n      }))\r\n  }, [bookChapters, skillCategories])\r\n\r\n  // ğŸŒŸ ê°œë³„ í•™ìŠµ ë‚´ìš©ì—ì„œ ìŠ¤í‚¬ IDë¥¼ ê°ì²´ë¡œ ë³€í™˜í•˜ê¸° ìœ„í•œ Map\r\n  const allSkillsMap = useMemo(() => {\r\n    const map = new Map<string, Skill & { levelText: string }>()\r\n    linkedBookSkills.forEach(skill => skill._id && map.set(skill._id, skill))\r\n    return map\r\n  }, [linkedBookSkills])\r\n\r\n  // ğŸŒŸ ìƒ‰ìƒì„ ë™ì ìœ¼ë¡œ ì ìš©í•˜ëŠ” ìŠ¤íƒ€ì¼ ìƒì„± í•¨ìˆ˜ (ë°°ì§€ìš©)\r\n  const getBadgeStyle = (colorCode: string) => {\r\n    // ë°°ê²½ìƒ‰ì— 15%ì˜ íˆ¬ëª…ë„ë¥¼ ì ìš©í•˜ì—¬ ì€ì€í•˜ê²Œ í‘œì‹œ\r\n    const bgColor = `${colorCode}26`\r\n    const textColor = colorCode\r\n    \r\n    return {\r\n      backgroundColor: bgColor,\r\n      color: textColor,\r\n    } as React.CSSProperties\r\n  }\r\n\r\n  // =================================================================\r\n  // ğŸ“š ì„œì  ì‚­ì œ í•¸ë“¤ëŸ¬\r\n  // =================================================================\r\n\r\n  // ğŸŒŸ React Query Mutationì„ ì‚¬ìš©í•œ ì„œì  ì‚­ì œ\r\n  const handleDeleteBook = async () => {\r\n    if (!confirm('ì´ ì„œì ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê´€ë ¨ í•™ìŠµ ë‚´ìš©ë„ ëª¨ë‘ ì‚¬ë¼ì§‘ë‹ˆë‹¤.')) return\r\n\r\n    try {\r\n      await deleteMutation.mutateAsync(id!)\r\n      navigate('/books')\r\n    } catch (error) {\r\n      console.error('Failed to delete book:', error)\r\n    }\r\n  }\r\n  \r\n  const isDeleting = deleteMutation.isPending\r\n\r\n  // ëª©ì°¨ ê´€ë¦¬ í•¸ë“¤ëŸ¬ë“¤ ì œê±°ë¨ - ì¤‘ë³µ ì¶œë ¥ ë¬¸ì œ í•´ê²°\r\n\r\n  // ğŸ’¡ ê¸°ì¡´ì˜ í•™ìŠµ ë‚´ìš© í•¸ë“¤ëŸ¬ë“¤ì€ useLearningManager í›…ìœ¼ë¡œ ì´ë™í•˜ì—¬ ì‚­ì œë¨\r\n\r\n  // í•™ìŠµ ë‚´ìš© ì •ë ¬ (useMemo ì‚¬ìš©ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”)\r\n  const sortedLearnings = useMemo(() => {\r\n    if (!book?.learnings) return []\r\n    \r\n    return [...book.learnings].sort((a, b) => {\r\n      // ìµœì‹ ìˆœ(ë‚´ë¦¼ì°¨ìˆœ) ì •ë ¬\r\n      return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n    })\r\n  }, [book?.learnings])\r\n\r\n  // =================================================================\r\n  // âš™ï¸ ë Œë”ë§ ë° ë¡œë”©/ì—ëŸ¬ ì²˜ë¦¬\r\n  // =================================================================\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!book) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <FaBook className=\"text-6xl text-gray-400 mx-auto mb-4\" />\r\n          <p className=\"text-xl text-gray-600 dark:text-gray-400\">ì„œì ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>\r\n          <Link \r\n            to=\"/books\" \r\n            state={location.state}\r\n            className=\"text-primary-600 hover:text-primary-700 mt-4 inline-block\"\r\n          >\r\n            ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // ë³„ì  ë Œë”ë§ í•¨ìˆ˜\r\n  const renderRatingStars = (rating: number) => {\r\n    return Array.from({ length: 5 }, (_, i) => (\r\n      <FaStar \r\n        key={i} \r\n        className={i < rating ? 'text-yellow-500' : 'text-gray-300 dark:text-gray-600'} \r\n      />\r\n    ))\r\n  }\r\n\r\n  return (\r\n    <section className=\"section-padding bg-white dark:bg-dark-900 min-h-screen\">\r\n      <div className=\"max-w-5xl mx-auto\">\r\n        {/* ì—ëŸ¬ ë©”ì‹œì§€: bookApiErrorì™€ learningApiErrorë¥¼ ëª¨ë‘ í‘œì‹œ */}\r\n        {(bookApiError || learningApiError) && (\r\n          <motion.div \r\n            initial={{ opacity: 0, y: -20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            className=\"p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-dark-800 dark:text-red-400\" \r\n            role=\"alert\"\r\n          >\r\n            {bookApiError || learningApiError}\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"mb-8\"\r\n        >\r\n          <Link\r\n            to=\"/books\"\r\n            state={location.state}\r\n            className=\"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6\"\r\n          >\r\n            <FaArrowLeft /> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </motion.div>\r\n\r\n        {/* Book Info */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"card p-8 mb-8\"\r\n        >\r\n          <div className=\"grid md:grid-cols-3 gap-8\">\r\n            <div>\r\n              {book.coverImage ? (\r\n                <img\r\n                  src={book.coverImage}\r\n                  alt={book.title}\r\n                  className=\"w-full h-auto object-cover rounded-lg shadow-lg\"\r\n                  loading=\"eager\"\r\n                  decoding=\"async\"\r\n                  width=\"400\"\r\n                  height=\"533\"\r\n                />\r\n              ) : (\r\n                <div className=\"w-full aspect-[3/4] bg-gradient-to-br from-primary-400 to-blue-500 rounded-lg flex items-center justify-center\">\r\n                  <FaBook className=\"text-white text-6xl\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {/* ì¹´í…Œê³ ë¦¬ ë°°ì§€ (ë³µìˆ˜ í‘œì‹œ) */}\r\n                  {book.categoryIds && book.categoryIds.length > 0 ? (\r\n                    (book.categoryIds as any[]).map((catIdOrObj: any) => {\r\n                      const catName = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?.name\r\n                      return catName ? (\r\n                        <span \r\n                          key={typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id}\r\n                          className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\"\r\n                        >\r\n                          {catName}\r\n                        </span>\r\n                      ) : null\r\n                    })\r\n                  ) : (\r\n                    // í˜¸í™˜ì„±: categoryIdsê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ category í‘œì‹œ\r\n                    book.category && (\r\n                      <span className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\">\r\n                        {book.category}\r\n                      </span>\r\n                    )\r\n                  )}\r\n                </div>\r\n                {isAuthenticated && (\r\n                  <div className=\"flex gap-2\">\r\n                    <Link\r\n                      to={`/admin`}\r\n                      state={{ tab: 'books', editId: book._id }}\r\n                      className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-blue-600 dark:text-blue-400\"\r\n                      aria-label=\"ì„œì  ìˆ˜ì •\"\r\n                    >\r\n                      <FaEdit />\r\n                    </Link>\r\n                    <button\r\n                      onClick={handleDeleteBook}\r\n                      disabled={isDeleting}\r\n                      className={`p-2 rounded-lg text-red-600 dark:text-red-400 transition-colors ${\r\n                        isDeleting \r\n                          ? 'opacity-50 cursor-not-allowed' \r\n                          : 'hover:bg-gray-100 dark:hover:bg-gray-700'\r\n                      }`}\r\n                      aria-label=\"ì„œì  ì‚­ì œ\"\r\n                    >\r\n                      {isDeleting ? (\r\n                        <div className=\"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin\" />\r\n                      ) : (\r\n                        <FaTrash />\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2\">\r\n                {getLocalizedField(currentLang, book.title, book.titleEn, book.titleJa)}\r\n              </h1>\r\n              <p className=\"text-xl text-gray-600 dark:text-gray-400 mb-6\">\r\n                {getLocalizedField(currentLang, book.author, book.authorEn, book.authorJa)}\r\n              </p>\r\n              <div className=\"flex flex-wrap gap-6 text-gray-600 dark:text-gray-400\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  {renderRatingStars(book.rating)}\r\n                  <span className=\"font-medium ml-1\">{book.rating}/5</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FaCalendar />\r\n                  <span>ì½ì€ ë‚ ì§œ: {formatDate(book.readDate)}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* ğŸŒŸ ì´ ì±…ì„ í†µí•´ í•™ìŠµí•œ í•µì‹¬ ìŠ¤í‚¬ ì„¹ì…˜ */}\r\n        {linkedBookSkills.length > 0 && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: 0.1 }}\r\n            className=\"card p-6 mb-8\"\r\n          >\r\n            <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\r\n              <FaCubes className=\"text-primary-600\" /> ì´ ì±…ì„ í†µí•´ í•™ìŠµí•œ í•µì‹¬ ìŠ¤í‚¬\r\n            </h3>\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {linkedBookSkills.map(skill => {\r\n                // ğŸŒŸ ë™ì  ìŠ¤íƒ€ì¼ ì ìš©\r\n                const badgeStyle = skill.color ? getBadgeStyle(skill.color) : undefined\r\n\r\n                return (\r\n                  <Link\r\n                    key={skill._id}\r\n                    to={`/projects?skillId=${skill._id}`}\r\n                    title={`${skill.name} ìŠ¤í‚¬ì´ ì‚¬ìš©ëœ ëª¨ë“  í”„ë¡œì íŠ¸ ë³´ê¸°`}\r\n                    className=\"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium hover:ring-2 transition-all hover:opacity-80\"\r\n                    style={{\r\n                      ...badgeStyle,\r\n                      '--tw-ring-color': skill.color || '#3B82F6',\r\n                    } as React.CSSProperties}\r\n                  >\r\n                    {skill.name}\r\n                    <span \r\n                      className=\"ml-1 text-xs font-semibold\"\r\n                      style={{ color: skill.color || '#3B82F6' }}\r\n                    >\r\n                      [{skill.levelText}]\r\n                    </span>\r\n                  </Link>\r\n                )\r\n              })}\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n\r\n        {/* Learnings Section */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.2 }}\r\n        >\r\n          <div className=\"flex items-center justify-between mb-6 flex-wrap gap-3\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n              í•™ìŠµ ë‚´ìš©\r\n            </h2>\r\n            {isAuthenticated && (\r\n              <div className=\"flex gap-2\">\r\n                {/* ëª©ì°¨ ì¶”ê°€ ë²„íŠ¼ */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowAddChapterForm(!showAddChapterForm)}\r\n                  className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors\"\r\n                >\r\n                  <FaBook /> {showAddChapterForm ? 'ì·¨ì†Œ' : 'ëª©ì°¨ ì¶”ê°€'}\r\n                </button>\r\n                \r\n                {/* í•™ìŠµ ë‚´ìš© ì¶”ê°€ ë²„íŠ¼ (ëª©ì°¨ê°€ ì—†ì„ ë•Œë§Œ) */}\r\n                {(!bookChapters || bookChapters.length === 0) && (\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleToggleAddForm}\r\n                    className=\"flex items-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-medium px-4 py-2 rounded-lg transition-colors\"\r\n                  >\r\n                    <FaPlus /> {showAddForm ? 'ì¶”ê°€ ì·¨ì†Œ' : 'ìƒˆ ë‚´ìš© ì¶”ê°€'}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ëª©ì°¨ ì¶”ê°€ í¼ */}\r\n          <AnimatePresence>\r\n            {showAddChapterForm && (\r\n              <motion.div\r\n                initial={{ opacity: 0, height: 0 }}\r\n                animate={{ opacity: 1, height: 'auto' }}\r\n                exit={{ opacity: 0, height: 0 }}\r\n                className=\"card p-6 mb-6 overflow-hidden\"\r\n              >\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n                  ìƒˆ ëª©ì°¨ ì¶”ê°€\r\n                </h3>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                      ëª©ì°¨ ì œëª© (í•œêµ­ì–´) <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={chapterFormData.title}\r\n                      onChange={(e) => setChapterFormData({ ...chapterFormData, title: e.target.value })}\r\n                      placeholder=\"ì˜ˆ: Chapter 1. ê¸°ì´ˆ ê°œë…\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                      ëª©ì°¨ ì œëª© (English)\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={chapterFormData.titleEn}\r\n                      onChange={(e) => setChapterFormData({ ...chapterFormData, titleEn: e.target.value })}\r\n                      placeholder=\"e.g., Chapter 1. Basic Concepts\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                      ëª©ì°¨ ì œëª© (æ—¥æœ¬èª)\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={chapterFormData.titleJa}\r\n                      onChange={(e) => setChapterFormData({ ...chapterFormData, titleJa: e.target.value })}\r\n                      placeholder=\"ä¾‹ï¼šç¬¬1ç« ã€‚åŸºæœ¬æ¦‚å¿µ\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex gap-3\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={handleAddChapter}\r\n                      className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                    >\r\n                      ì¶”ê°€\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => {\r\n                        setShowAddChapterForm(false)\r\n                        setChapterFormData({ title: '', titleEn: '', titleJa: '', order: (bookChapters?.length || 0) + 1 })\r\n                      }}\r\n                      className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n                    >\r\n                      ì·¨ì†Œ\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* Add Learning Form */}\r\n          <AnimatePresence>\r\n            {showAddForm && (\r\n              <motion.div\r\n                initial={{ opacity: 0, height: 0 }}\r\n                animate={{ opacity: 1, height: 'auto' }}\r\n                exit={{ opacity: 0, height: 0 }}\r\n                className=\"card p-6 mb-6 overflow-hidden\"\r\n              >\r\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n                  ìƒˆ í•™ìŠµ ë‚´ìš© ì¶”ê°€\r\n                </h3>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label htmlFor=\"topic\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                      í•™ìŠµ ì£¼ì œ\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      id=\"topic\"\r\n                      value={currentFormData.topic}\r\n                      onChange={(e) => setCurrentFormData(prev => ({ ...prev, topic: e.target.value }))}\r\n                      placeholder=\"í•™ìŠµ ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”\"\r\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                      í•™ìŠµ ë‚´ìš©\r\n                    </label>\r\n                    <RichTextEditor\r\n                      value={currentFormData.content}\r\n                      onChange={(value) => setCurrentFormData(prev => ({ ...prev, content: value }))}\r\n                      placeholder=\"í•™ìŠµ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”. ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì„œì‹ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\r\n                      rows={8}\r\n                      className=\"min-h-[200px]\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-3 pt-4\">\r\n                    <button\r\n                      onClick={handleAddLearning}\r\n                      disabled={isSaving || !currentFormData.topic.trim() || !currentFormData.content.trim()}\r\n                      className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n                    >\r\n                      {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì¶”ê°€'}\r\n                    </button>\r\n                    <button\r\n                      onClick={handleToggleAddForm}\r\n                      className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n                    >\r\n                      ì·¨ì†Œ\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </AnimatePresence>\r\n\r\n          {/* í•™ìŠµ ë‚´ìš© ë¦¬ìŠ¤íŠ¸ - ì•„ì½”ë””ì–¸ ë²„ì „ */}\r\n          {(() => {\r\n            // ëª©ì°¨ ê¸°ë°˜ í•™ìŠµ ë‚´ìš©ì´ ìˆëŠ” ê²½ìš°\r\n            if (bookChapters && bookChapters.length > 0) {\r\n              return (\r\n                <div className=\"space-y-4\">\r\n                  {bookChapters.map((chapter) => {\r\n                    // ğŸŒŸ í˜„ì¬ ì±•í„°ê°€ í™•ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸\r\n                    const isExpanded = expandedChapterId === chapter._id\r\n                    \r\n                    return (\r\n                      <div key={chapter._id} className=\"card p-6 border border-gray-200 dark:border-gray-700\">\r\n                        \r\n                        {/* ğŸŒŸ ì±•í„° ì œëª© (í´ë¦­ ê°€ëŠ¥í•œ ì•„ì½”ë””ì–¸ í—¤ë”) */}\r\n                        <div \r\n                          className=\"flex items-center justify-between cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 -m-6 p-6 rounded-lg transition-colors\"\r\n                          onClick={() => toggleChapter(chapter._id!)}\r\n                        >\r\n                          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white flex-1\">\r\n                            {getLocalizedField(currentLang, chapter.title, chapter.titleEn, chapter.titleJa)}\r\n                            <span className=\"ml-3 text-sm font-normal text-gray-500 dark:text-gray-400\">\r\n                              ({(chapter.learnings || []).length}ê°œì˜ í•™ìŠµ ë‚´ìš©)\r\n                            </span>\r\n                          </h3>\r\n                          {/* ğŸŒŸ í™•ì¥/ì¶•ì†Œ ì•„ì´ì½˜ */}\r\n                          <motion.span\r\n                            animate={{ rotate: isExpanded ? 90 : 0 }}\r\n                            transition={{ duration: 0.3 }}\r\n                            className=\"text-primary-600 dark:text-primary-400 text-xl ml-4\"\r\n                          >\r\n                            <FaChevronRight />\r\n                          </motion.span>\r\n                        </div>\r\n\r\n                        {/* ğŸŒŸ í•™ìŠµ ë‚´ìš© (ì•„ì½”ë””ì–¸ ë°”ë””) */}\r\n                        <AnimatePresence>\r\n                          {isExpanded && (\r\n                            <motion.div\r\n                              initial={{ opacity: 0, height: 0 }}\r\n                              animate={{ opacity: 1, height: 'auto' }}\r\n                              exit={{ opacity: 0, height: 0 }}\r\n                              transition={{ duration: 0.3, ease: \"easeInOut\" }}\r\n                              className=\"overflow-hidden\"\r\n                            >\r\n                              <div className=\"space-y-6 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700\">\r\n                                {(chapter.learnings || []).map((learning, index: number) => (\r\n                                  <LearningItem \r\n                                    key={learning._id}\r\n                                    learning={learning}\r\n                                    index={index}\r\n                                    isAuthenticated={isAuthenticated}\r\n                                    isEditing={editingLearningId === learning._id}\r\n                                    currentFormData={currentFormData}\r\n                                    setCurrentFormData={setCurrentFormData}\r\n                                    onStartEdit={handleStartEdit}\r\n                                    onSaveEdit={handleSaveEdit}\r\n                                    onCancelEdit={handleCancelEdit}\r\n                                    onDelete={handleDeleteLearning}\r\n                                    isSaving={isSaving}\r\n                                    allSkillsMap={allSkillsMap}  // ğŸŒŸ ìŠ¤í‚¬ ë§µ ì „ë‹¬\r\n                                    onSkillLinkChange={handleSkillLinkChange}  // ğŸŒŸ ìŠ¤í‚¬ ì—°ê²° í•¸ë“¤ëŸ¬ ì „ë‹¬\r\n                                    chapterId={chapter._id}  // ğŸŒŸ ëª©ì°¨ ID ì „ë‹¬\r\n                                  />\r\n                                ))}\r\n                                {(!chapter.learnings || chapter.learnings.length === 0) && (\r\n                                  <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n                                    ì´ ëª©ì°¨ì—ëŠ” ì•„ì§ í•™ìŠµ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            </motion.div>\r\n                          )}\r\n                        </AnimatePresence>\r\n                      </div>\r\n                    )\r\n                  })}\r\n                </div>\r\n              )\r\n            }\r\n            // ê¸°ì¡´ í•™ìŠµ ë‚´ìš©ì´ ìˆëŠ” ê²½ìš°\r\n            else if (sortedLearnings.length > 0) {\r\n              return (\r\n                <div className=\"space-y-6\">\r\n                  {sortedLearnings.map((learning, index) => (\r\n                    <LearningItem \r\n                      key={learning._id}\r\n                      learning={learning}\r\n                      index={index}\r\n                      isAuthenticated={isAuthenticated}\r\n                      isEditing={editingLearningId === learning._id}\r\n                      currentFormData={currentFormData}\r\n                      setCurrentFormData={setCurrentFormData}\r\n                      onStartEdit={handleStartEdit}\r\n                      onSaveEdit={handleSaveEdit}\r\n                      onCancelEdit={handleCancelEdit}\r\n                      onDelete={handleDeleteLearning}\r\n                      isSaving={isSaving}\r\n                      allSkillsMap={allSkillsMap}  // ğŸŒŸ ìŠ¤í‚¬ ë§µ ì „ë‹¬\r\n                      onSkillLinkChange={handleSkillLinkChange}  // ğŸŒŸ ìŠ¤í‚¬ ì—°ê²° í•¸ë“¤ëŸ¬ ì „ë‹¬\r\n                    />\r\n                  ))}\r\n                </div>\r\n              )\r\n            }\r\n            // í•™ìŠµ ë‚´ìš©ì´ ì—†ëŠ” ê²½ìš°\r\n            else {\r\n              return (\r\n                <div className=\"card p-12 text-center\">\r\n                  <FaBook className=\"text-6xl text-gray-400 mx-auto mb-4\" />\r\n                  <p className=\"text-xl text-gray-600 dark:text-gray-400\">\r\n                    ì•„ì§ ì‘ì„±ëœ í•™ìŠµ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤\r\n                  </p>\r\n                </div>\r\n              )\r\n            }\r\n          })()}\r\n        </motion.div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default BookDetail\r\n\r\n// ğŸ’¡ LearningFormê³¼ LearningItem ì»´í¬ë„ŒíŠ¸ëŠ” ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬ë¨\r\n","import React, { useState, useRef, useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FaTimes } from 'react-icons/fa'\r\n\r\ninterface StickyVideoPlayerProps {\r\n  videoId: string\r\n  playerRef?: React.MutableRefObject<any>\r\n  onPlayerReady?: () => void\r\n}\r\n\r\nconst StickyVideoPlayer: React.FC<StickyVideoPlayerProps> = ({ \r\n  videoId, \r\n  playerRef: externalPlayerRef,\r\n  onPlayerReady \r\n}) => {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  const playerWrapperRef = useRef<HTMLDivElement>(null)\r\n  const [isSticky, setIsSticky] = useState(false)\r\n  const [isClosed, setIsClosed] = useState(false)\r\n  const [containerTop, setContainerTop] = useState(0)\r\n\r\n  useEffect(() => {\r\n    if (isClosed) return\r\n\r\n    // ì´ˆê¸° ìœ„ì¹˜ ì €ì¥\r\n    if (containerRef.current && containerTop === 0) {\r\n      const rect = containerRef.current.getBoundingClientRect()\r\n      setContainerTop(rect.top + window.scrollY)\r\n    }\r\n\r\n    const handleScroll = () => {\r\n      if (!containerRef.current) return\r\n\r\n      const scrollY = window.scrollY\r\n      const threshold = 150 // í”Œë ˆì´ì–´ê°€ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ëŠ” ì„ê³„ê°’\r\n\r\n      // ìŠ¤í¬ë¡¤ì´ í”Œë ˆì´ì–´ ì›ë˜ ìœ„ì¹˜ë¥¼ ë„˜ì–´ê°€ë©´ sticky í™œì„±í™”\r\n      if (scrollY > containerTop + threshold && !isSticky) {\r\n        setIsSticky(true)\r\n      }\r\n\r\n      // ë‹¤ì‹œ ì›ë˜ ìœ„ì¹˜ë¡œ ëŒì•„ì˜¤ë©´ sticky í•´ì œ\r\n      if (scrollY <= containerTop + threshold && isSticky) {\r\n        setIsSticky(false)\r\n      }\r\n    }\r\n\r\n    window.addEventListener('scroll', handleScroll, { passive: true })\r\n    handleScroll() // ì´ˆê¸° ì²´í¬\r\n\r\n    return () => window.removeEventListener('scroll', handleScroll)\r\n  }, [isSticky, containerTop, isClosed])\r\n\r\n  // Sticky ëª¨ë“œ ë‹«ê¸°\r\n  const handleClose = () => {\r\n    setIsClosed(true)\r\n    setIsSticky(false)\r\n  }\r\n\r\n  return (\r\n    <div ref={containerRef} className=\"relative\">\r\n      {/* Sticky ëª¨ë“œì¼ ë•Œ ì›ë˜ ìë¦¬ ê³µê°„ ìœ ì§€ */}\r\n      {isSticky && !isClosed && (\r\n        <div className=\"aspect-video bg-gray-100 dark:bg-gray-800 rounded-xl flex items-center justify-center\">\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-sm\">\r\n            ì˜ìƒì´ ìƒë‹¨ì—ì„œ ì¬ìƒ ì¤‘ì…ë‹ˆë‹¤\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* í”Œë ˆì´ì–´ - Sticky ëª¨ë“œì¼ ë•Œ ìœ„ì¹˜ë§Œ ë³€ê²½ */}\r\n      <motion.div\r\n        ref={playerWrapperRef}\r\n        className={`${isSticky && !isClosed ? 'fixed z-50' : 'relative'}`}\r\n        style={\r\n          isSticky && !isClosed\r\n            ? {\r\n                top: '80px',\r\n                left: window.innerWidth < 640 ? '20px' : '280px',\r\n                right: window.innerWidth < 640 ? '20px' : 'auto',\r\n                width: window.innerWidth < 640 ? 'calc(100vw - 40px)' : '400px',\r\n                maxWidth: window.innerWidth >= 640 ? 'calc(100vw - 320px)' : '90vw',\r\n              }\r\n            : {}\r\n        }\r\n        animate={{\r\n          scale: isSticky && !isClosed ? 1 : 1,\r\n          opacity: 1,\r\n        }}\r\n        transition={{ type: 'spring', damping: 20, stiffness: 300 }}\r\n      >\r\n        <div\r\n          className={`bg-black rounded-xl overflow-hidden shadow-2xl ${\r\n            isSticky && !isClosed ? 'border-2 border-blue-500' : ''\r\n          }`}\r\n        >\r\n          {/* Sticky ëª¨ë“œ í—¤ë” */}\r\n          {isSticky && !isClosed && (\r\n            <div className=\"bg-gray-900 px-3 py-2 flex items-center justify-between\">\r\n              <span className=\"text-white text-xs font-medium flex items-center gap-2\">\r\n                <div className=\"w-2 h-2 rounded-full bg-red-500 animate-pulse\"></div>\r\n                ì¬ìƒ ì¤‘\r\n              </span>\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"p-1.5 hover:bg-red-600 rounded text-white transition-colors\"\r\n                title=\"ë‹«ê¸°\"\r\n              >\r\n                <FaTimes size={14} />\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* í”Œë ˆì´ì–´ ì»¨í…Œì´ë„ˆ - ë™ì¼í•œ í”Œë ˆì´ì–´ ìœ ì§€ */}\r\n          <div className=\"aspect-video bg-black relative\">\r\n            <div ref={externalPlayerRef} className=\"w-full h-full\" />\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default StickyVideoPlayer\r\n\r\n","import React, { useState, useMemo, useRef, useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom'\r\nimport { FaArrowLeft, FaVideo, FaStar, FaCalendar, FaEdit, FaTrash, FaCubes, FaBullseye, FaLightbulb, FaRocket, FaSave, FaTimes } from 'react-icons/fa'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { formatDate } from '../utils/dateUtils'\r\nimport { useVideoLearning, useDeleteVideoLearning, useUpdateVideoLearning } from '../hooks/useVideoLearnings'\r\nimport { useSkills } from '../hooks/useSkills'\r\nimport { extractYouTubeId, parseTimestamps, renderHtmlWithTimestamps } from '../utils/videoUtils'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport RichTextEditor from './RichTextEditor'\r\nimport { useToastHelpers } from '../hooks/useToast'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField } from '@/utils/i18nUtils'\r\nimport StickyVideoPlayer from './StickyVideoPlayer'\r\n\r\n// ğŸŒŸ ìœ íŠœë¸Œ IFrame Player API íƒ€ì… ì •ì˜\r\ndeclare global {\r\n  interface Window {\r\n    YT: any\r\n    onYouTubeIframeAPIReady: () => void\r\n  }\r\n}\r\n\r\nconst VideoLearningDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>()\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const { isAuthenticated } = useAuth()\r\n  const { i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  \r\n  const { data: video, isLoading: loading, isError, error } = useVideoLearning(id)\r\n  const deleteMutation = useDeleteVideoLearning()\r\n  const updateMutation = useUpdateVideoLearning()\r\n  const { skillCategories } = useSkills()\r\n  const { success, error: toastError } = useToastHelpers()\r\n\r\n  // ğŸŒŸ ìœ íŠœë¸Œ í”Œë ˆì´ì–´ ref ë° ìƒíƒœ\r\n  const playerRef = useRef<any>(null)\r\n  const playerContainerRef = useRef<HTMLDivElement>(null)\r\n  const [isPlayerReady, setIsPlayerReady] = useState(false)\r\n  \r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ í¸ì§‘ ìƒíƒœ\r\n  const [isEditingKeyTakeaways, setIsEditingKeyTakeaways] = useState(false)\r\n  const [editingContent, setEditingContent] = useState('')\r\n  \r\n  const videoId = useMemo(() => {\r\n    if (video?.videoId) return video.videoId\r\n    // í˜¸í™˜ì„±: videoUrlì´ ìˆìœ¼ë©´ ID ì¶”ì¶œ\r\n    if ((video as any)?.videoUrl) return extractYouTubeId((video as any).videoUrl)\r\n    return null\r\n  }, [video])\r\n  \r\n  // ğŸŒŸ ìœ íŠœë¸Œ IFrame API ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ë° í”Œë ˆì´ì–´ ì´ˆê¸°í™”\r\n  useEffect(() => {\r\n    if (!videoId) return\r\n    \r\n    // YouTube IFrame API ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ\r\n    if (!window.YT) {\r\n      const tag = document.createElement('script')\r\n      tag.src = 'https://www.youtube.com/iframe_api'\r\n      const firstScriptTag = document.getElementsByTagName('script')[0]\r\n      if (firstScriptTag?.parentNode) {\r\n        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)\r\n      }\r\n    }\r\n    \r\n    // API ì¤€ë¹„ ì™„ë£Œ í›„ í”Œë ˆì´ì–´ ì´ˆê¸°í™”\r\n    const initializePlayer = () => {\r\n      if (window.YT && window.YT.Player && playerContainerRef.current) {\r\n        playerRef.current = new window.YT.Player(playerContainerRef.current, {\r\n          videoId: videoId,\r\n          playerVars: {\r\n            enablejsapi: 1,\r\n            origin: window.location.origin,\r\n            rel: 0,  // ğŸŒŸ ê´€ë ¨ ì˜ìƒ ì¶”ì²œ ë¹„í™œì„±í™” (ì „ë¬¸ì„± ìœ ì§€)\r\n            modestbranding: 1,  // ğŸŒŸ ìœ íŠœë¸Œ ë¡œê³  ìµœì†Œí™” & 'ë™ì˜ìƒ ë”ë³´ê¸°' íˆ´íŒ ì œê±°\r\n            fs: 1,  // ì „ì²´ í™”ë©´ ë²„íŠ¼ í‘œì‹œ\r\n            cc_load_policy: 0,  // ìë§‰ ìë™ ë¡œë“œ ë¹„í™œì„±í™”\r\n            iv_load_policy: 3,  // ğŸŒŸ ì˜ìƒ ì£¼ì„(annotations) ë¹„í™œì„±í™”\r\n            showinfo: 0,  // ğŸŒŸ ì˜ìƒ ì •ë³´ í‘œì‹œ ìµœì†Œí™” (êµ¬ë²„ì „ ì§€ì›)\r\n            controls: 1,  // ì»¨íŠ¸ë¡¤ëŸ¬ í‘œì‹œ\r\n          },\r\n          events: {\r\n            onReady: () => {\r\n              console.log('âœ… ìœ íŠœë¸Œ í”Œë ˆì´ì–´ ì¤€ë¹„ ì™„ë£Œ')\r\n              setIsPlayerReady(true)\r\n            },\r\n          },\r\n        })\r\n      }\r\n    }\r\n    \r\n    if (window.YT && window.YT.Player) {\r\n      initializePlayer()\r\n    } else {\r\n      window.onYouTubeIframeAPIReady = initializePlayer\r\n    }\r\n    \r\n    // cleanup\r\n    return () => {\r\n      if (playerRef.current && typeof playerRef.current.destroy === 'function') {\r\n        playerRef.current.destroy()\r\n      }\r\n    }\r\n  }, [videoId])\r\n\r\n  // ğŸŒŸ ì—°ê²°ëœ ìŠ¤í‚¬ í•„í„°ë§\r\n  const linkedSkills = useMemo(() => {\r\n    if (!video?.skillIds || !skillCategories) return []\r\n    const allSkills = skillCategories.flatMap(cat => cat.skills || [])\r\n    return allSkills.filter(skill => skill._id && video.skillIds?.includes(skill._id))\r\n  }, [video, skillCategories])\r\n\r\n  // ğŸŒŸ íƒ€ì„ìŠ¤íƒ¬í”„ í´ë¦­ í•¸ë“¤ëŸ¬ (ìœ íŠœë¸Œ API ì‚¬ìš©)\r\n  const handleTimestampClick = (seconds: number) => {\r\n    console.log(`â° íƒ€ì„ìŠ¤íƒ¬í”„ í´ë¦­: ${seconds}ì´ˆë¡œ ì´ë™ + ìë™ ì¬ìƒ`)\r\n    \r\n    if (!playerRef.current || !isPlayerReady) {\r\n      console.warn('âš ï¸ í”Œë ˆì´ì–´ê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤')\r\n      return\r\n    }\r\n    \r\n    try {\r\n      // 1. í•´ë‹¹ ì‹œê°„ìœ¼ë¡œ ì´ë™ (allowSeekAhead: true)\r\n      playerRef.current.seekTo(seconds, true)\r\n      \r\n      // 2. ì¦‰ì‹œ ì¬ìƒ ì‹œì‘\r\n      playerRef.current.playVideo()\r\n      \r\n      console.log(`âœ… ${seconds}ì´ˆë¡œ ì´ë™ í›„ ì¬ìƒ ì‹œì‘`)\r\n    } catch (error) {\r\n      console.error('í”Œë ˆì´ì–´ ì œì–´ ì˜¤ë¥˜:', error)\r\n    }\r\n  }\r\n\r\n  // ğŸŒŸ íƒ€ì„ìŠ¤íƒ¬í”„ê°€ í¬í•¨ëœ í…ìŠ¤íŠ¸ ë Œë”ë§\r\n  const renderTextWithTimestamps = (text: string) => {\r\n    if (!text) return null\r\n    \r\n    const timestamps = parseTimestamps(text)\r\n    if (timestamps.length === 0) {\r\n      return <ReactMarkdown>{text}</ReactMarkdown>\r\n    }\r\n\r\n    const result: (string | JSX.Element)[] = []\r\n    let lastIndex = 0\r\n\r\n    timestamps.forEach((ts, idx) => {\r\n      // íƒ€ì„ìŠ¤íƒ¬í”„ ì´ì „ í…ìŠ¤íŠ¸\r\n      if (ts.position > lastIndex) {\r\n        const beforeText = text.substring(lastIndex, ts.position)\r\n        result.push(\r\n          <span key={`text-${idx}`}>\r\n            <ReactMarkdown>{beforeText}</ReactMarkdown>\r\n          </span>\r\n        )\r\n      }\r\n\r\n      // íƒ€ì„ìŠ¤íƒ¬í”„ ë²„íŠ¼\r\n      result.push(\r\n        <button\r\n          key={`ts-${idx}`}\r\n          onClick={() => handleTimestampClick(ts.seconds)}\r\n          className=\"inline-flex items-center px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-mono text-xs font-bold transition-colors mx-1\"\r\n          title={`ì˜ìƒ ${ts.text} ìœ„ì¹˜ë¡œ ì´ë™`}\r\n        >\r\n          {ts.text}\r\n        </button>\r\n      )\r\n\r\n      lastIndex = ts.position + ts.text.length\r\n    })\r\n\r\n    // ë§ˆì§€ë§‰ í…ìŠ¤íŠ¸\r\n    if (lastIndex < text.length) {\r\n      const afterText = text.substring(lastIndex)\r\n      result.push(\r\n        <span key=\"text-last\">\r\n          <ReactMarkdown>{afterText}</ReactMarkdown>\r\n        </span>\r\n      )\r\n    }\r\n\r\n    return <div className=\"space-y-2\">{result}</div>\r\n  }\r\n\r\n  // ì‚­ì œ í•¸ë“¤ëŸ¬\r\n  const handleDeleteVideo = async () => {\r\n    if (!confirm('ì´ ì˜ìƒ í•™ìŠµ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return\r\n\r\n    try {\r\n      await deleteMutation.mutateAsync(id!)\r\n      navigate('/video-learnings')\r\n    } catch (error) {\r\n      console.error('Failed to delete video learning:', error)\r\n    }\r\n  }\r\n\r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ í¸ì§‘ ì‹œì‘\r\n  const handleStartEdit = () => {\r\n    setIsEditingKeyTakeaways(true)\r\n    setEditingContent(video?.keyTakeaways || '')\r\n  }\r\n\r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ í¸ì§‘ ì·¨ì†Œ\r\n  const handleCancelEdit = () => {\r\n    setIsEditingKeyTakeaways(false)\r\n    setEditingContent('')\r\n  }\r\n\r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ ì €ì¥\r\n  const handleSaveEdit = async () => {\r\n    if (!video || !id) return\r\n\r\n    try {\r\n      // ğŸŒŸ skillIdsì™€ categoryIdsë¥¼ ë¬¸ìì—´ ë°°ì—´ë¡œ í™•ì‹¤í•˜ê²Œ ë³€í™˜\r\n      const skillIds = (video.skillIds || []).map((skillIdOrObj: any) => \r\n        typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj?._id\r\n      ).filter(Boolean)\r\n      \r\n      const categoryIds = (video.categoryIds || []).map((catIdOrObj: any) => \r\n        typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id\r\n      ).filter(Boolean)\r\n\r\n      // VideoLearningFormData íƒ€ì…ì— ë§ê²Œ í•„ìš”í•œ í•„ë“œë§Œ ì „ë‹¬\r\n      const updateData = {\r\n        title: video.title,\r\n        videoId: video.videoId,\r\n        category: video.category,\r\n        categoryIds: categoryIds,\r\n        watchDate: video.watchDate,\r\n        purpose: video.purpose,\r\n        keyTakeaways: editingContent,\r\n        application: video.application,\r\n        skillIds: skillIds,\r\n        rating: video.rating,\r\n        order: video.order,\r\n      }\r\n      \r\n      console.log('ğŸ“¤ ì „ì†¡ ë°ì´í„°:', updateData)\r\n      \r\n      await updateMutation.mutateAsync({\r\n        id,\r\n        data: updateData\r\n      })\r\n      success('ì €ì¥ ì™„ë£Œ', 'í•µì‹¬ ë°°ì›€ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      setIsEditingKeyTakeaways(false)\r\n      setEditingContent('')\r\n    } catch (err: any) {\r\n      console.error('í•µì‹¬ ë°°ì›€ ì €ì¥ ì‹¤íŒ¨:', err)\r\n      console.error('ğŸ“‹ ì„œë²„ ì‘ë‹µ ìƒì„¸:', err.response?.data)\r\n      toastError('ì €ì¥ ì‹¤íŒ¨', err.response?.data?.message || 'í•µì‹¬ ë°°ì›€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }\r\n  \r\n  const isDeleting = deleteMutation.isPending\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!video) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <FaVideo className=\"text-6xl text-gray-400 mx-auto mb-4\" />\r\n          <p className=\"text-xl text-gray-600 dark:text-gray-400\">ì˜ìƒ í•™ìŠµ ê¸°ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>\r\n          <Link \r\n            to=\"/video-learnings\" \r\n            state={location.state}\r\n            className=\"text-primary-600 hover:text-primary-700 mt-4 inline-block\"\r\n          >\r\n            ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section className=\"min-h-screen bg-white dark:bg-dark-900\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n        >\r\n          <Link\r\n            to=\"/video-learnings\"\r\n            state={location.state}\r\n            className=\"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6\"\r\n          >\r\n            <FaArrowLeft /> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </motion.div>\r\n\r\n        {/* 2ë‹¨ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ */}\r\n        <div className=\"flex flex-col lg:flex-row gap-6\">\r\n          \r\n          {/* ========== ì™¼ìª½ ì˜ì—­: í”Œë ˆì´ì–´ + ê¸°ë³¸ ì •ë³´ ========== */}\r\n          <div className=\"w-full lg:w-7/12 lg:sticky lg:top-8 self-start\">\r\n            \r\n            {/* ìœ íŠœë¸Œ í”Œë ˆì´ì–´ */}\r\n            {videoId && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"mb-6\"\r\n              >\r\n                <StickyVideoPlayer \r\n                  videoId={videoId}\r\n                  playerRef={playerContainerRef}\r\n                  onPlayerReady={() => setIsPlayerReady(true)}\r\n                />\r\n                {!isPlayerReady && (\r\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 rounded-xl pointer-events-none\">\r\n                    <div className=\"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                  </div>\r\n                )}\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* ê¸°ë³¸ ì •ë³´ ì¹´ë“œ */}\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 }}\r\n              className=\"card p-6 mb-6\"\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                {/* ì¹´í…Œê³ ë¦¬ ë°°ì§€ (ë³µìˆ˜ í‘œì‹œ) */}\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {video.categoryIds && video.categoryIds.length > 0 ? (\r\n                    (video.categoryIds as any[]).map((catIdOrObj: any) => {\r\n                      const catName = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?.name\r\n                      return catName ? (\r\n                        <span \r\n                          key={typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id}\r\n                          className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\"\r\n                        >\r\n                          {catName}\r\n                        </span>\r\n                      ) : null\r\n                    })\r\n                  ) : (\r\n                    // í˜¸í™˜ì„±: categoryIdsê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ category í‘œì‹œ\r\n                    video.category && (\r\n                      <span className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\">\r\n                        {video.category}\r\n                      </span>\r\n                    )\r\n                  )}\r\n                </div>\r\n                {isAuthenticated && (\r\n                  <div className=\"flex gap-2\">\r\n                    <Link\r\n                      to={`/admin`}\r\n                      state={{ tab: 'videoLearnings', editId: video._id }}\r\n                      className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-blue-600 dark:text-blue-400\"\r\n                      aria-label=\"ì˜ìƒ ìˆ˜ì •\"\r\n                    >\r\n                      <FaEdit />\r\n                    </Link>\r\n                    <button\r\n                      onClick={handleDeleteVideo}\r\n                      disabled={isDeleting}\r\n                      className={`p-2 rounded-lg text-red-600 dark:text-red-400 transition-colors ${\r\n                        isDeleting \r\n                          ? 'opacity-50 cursor-not-allowed' \r\n                          : 'hover:bg-gray-100 dark:hover:bg-gray-700'\r\n                      }`}\r\n                      aria-label=\"ì˜ìƒ ì‚­ì œ\"\r\n                    >\r\n                      {isDeleting ? (\r\n                        <div className=\"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin\" />\r\n                      ) : (\r\n                        <FaTrash />\r\n                      )}\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\r\n                {video.title}\r\n              </h1>\r\n\r\n              <div className=\"flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400\">\r\n                {video.rating && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {Array.from({ length: 5 }, (_, i) => (\r\n                      <FaStar \r\n                        key={i} \r\n                        className={`text-sm ${i < video.rating! ? 'text-yellow-500' : 'text-gray-300 dark:text-gray-600'}`} \r\n                      />\r\n                    ))}\r\n                    <span className=\"font-medium\">{video.rating}/5</span>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FaCalendar />\r\n                  <span>{formatDate(video.watchDate)}</span>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* ì‹œì²­ ëª©ì  */}\r\n            {video.purpose && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.2 }}\r\n                className=\"card p-6 mb-6\"\r\n              >\r\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2\">\r\n                  <FaBullseye className=\"text-blue-600\" /> ì‹œì²­ ëª©ì \r\n                </h3>\r\n                <div className=\"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 text-sm\">\r\n                  <ReactMarkdown>{video.purpose}</ReactMarkdown>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* í†µí•© ì ìš© ê³„íš */}\r\n            {video.application && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.3 }}\r\n                className=\"card p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-l-4 border-purple-600\"\r\n              >\r\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2\">\r\n                  <FaRocket className=\"text-purple-600\" /> ì ìš© ê³„íš\r\n                </h3>\r\n                <div className=\"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 text-sm\">\r\n                  <ReactMarkdown>{video.application}</ReactMarkdown>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ========== ì˜¤ë¥¸ìª½ ì˜ì—­: í•™ìŠµ ê¸°ë¡ ========== */}\r\n          <div className=\"w-full lg:w-5/12 space-y-6\">\r\n\r\n            {/* ì—°ê²°ëœ ìŠ¤í‚¬ */}\r\n            {linkedSkills.length > 0 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.2 }}\r\n                className=\"card p-6\"\r\n              >\r\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\r\n                  <FaCubes className=\"text-primary-600\" /> í•™ìŠµí•œ ê¸°ìˆ \r\n                </h3>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {linkedSkills.map(skill => (\r\n                    <div\r\n                      key={skill._id}\r\n                      className=\"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium\"\r\n                      style={{\r\n                        backgroundColor: `${skill.color}26`,\r\n                        color: skill.color,\r\n                      }}\r\n                    >\r\n                      {skill.name}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* í•µì‹¬ ë°°ì›€ */}\r\n            {(video.keyTakeaways || isAuthenticated) && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.3 }}\r\n                className=\"card p-6 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-l-4 border-blue-600\"\r\n              >\r\n                <div className=\"mb-4\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                      <FaLightbulb className=\"text-yellow-500\" /> í•µì‹¬ ë°°ì›€\r\n                    </h3>\r\n                    {/* ğŸŒŸ í¸ì§‘ ë²„íŠ¼ - ì¸ì¦ëœ ì‚¬ìš©ìì—ê²Œë§Œ í‘œì‹œ */}\r\n                    {isAuthenticated && !isEditingKeyTakeaways && (\r\n                      <button\r\n                        onClick={handleStartEdit}\r\n                        className=\"p-1.5 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors\"\r\n                        title=\"í•µì‹¬ ë°°ì›€ í¸ì§‘\"\r\n                      >\r\n                        <FaEdit className=\"text-sm\" />\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  {video.createdAt && (\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      ê¸°ë¡ ë‚ ì§œ: {formatDate(video.createdAt)}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* ì½ê¸° ëª¨ë“œ */}\r\n                {!isEditingKeyTakeaways && (\r\n                  <>\r\n                    {video.keyTakeaways ? (\r\n                      <>\r\n                        <div \r\n                          className=\"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300\"\r\n                          dangerouslySetInnerHTML={{ \r\n                            __html: renderHtmlWithTimestamps(video.keyTakeaways)\r\n                          }}\r\n                          onClick={(e) => {\r\n                            // íƒ€ì„ìŠ¤íƒ¬í”„ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬\r\n                            const target = e.target as HTMLElement\r\n                            if (target.tagName === 'BUTTON' && target.dataset['timestamp']) {\r\n                              const seconds = parseInt(target.dataset['timestamp'], 10)\r\n                              handleTimestampClick(seconds)\r\n                            }\r\n                          }}\r\n                        />\r\n                      </>\r\n                    ) : (\r\n                      <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n                        <p className=\"text-sm\">ì´ ì˜ìƒì˜ í•µì‹¬ ë°°ì›€ì´ ì•„ì§ ê¸°ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</p>\r\n                        {isAuthenticated && (\r\n                          <p className=\"text-xs mt-2\">ìœ„ì˜ ì—°í•„ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í•™ìŠµ ê¸°ë¡ì„ ì¶”ê°€í•˜ì„¸ìš”</p>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n\r\n                {/* ğŸŒŸ í¸ì§‘ ëª¨ë“œ */}\r\n                {isEditingKeyTakeaways && (\r\n                  <div>\r\n                    <RichTextEditor\r\n                      value={editingContent}\r\n                      onChange={setEditingContent}\r\n                      placeholder=\"ì˜ìƒì„ ë³´ë©´ì„œ í•µì‹¬ ë°°ì›€ì„ ì‘ì„±í•˜ì„¸ìš”. ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì„œì‹ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\r\n                      rows={8}\r\n                      className=\"min-h-[250px]\"\r\n                    />\r\n                    <div className=\"flex gap-2 mt-4\">\r\n                      <button\r\n                        onClick={handleSaveEdit}\r\n                        disabled={updateMutation.isPending}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\r\n                      >\r\n                        <FaSave />\r\n                        {updateMutation.isPending ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n                      </button>\r\n                      <button\r\n                        onClick={handleCancelEdit}\r\n                        disabled={updateMutation.isPending}\r\n                        className=\"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\r\n                      >\r\n                        <FaTimes />\r\n                        ì·¨ì†Œ\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n          {/* ì˜¤ë¥¸ìª½ ì˜ì—­ ë */}\r\n          \r\n        </div>\r\n        {/* 2ë‹¨ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ ë */}\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default VideoLearningDetail\r\n\r\n","import React, { useState, useMemo, useRef, useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom'\r\nimport { FaArrowLeft, FaList, FaStar, FaCalendar, FaEdit, FaTrash, FaCubes, FaBullseye, FaRocket, FaChevronDown, FaChevronUp, FaSave, FaTimes } from 'react-icons/fa'\r\nimport { useAuth } from '../contexts/AuthContext'\r\nimport { formatDate } from '../utils/dateUtils'\r\nimport { useVideoPlaylist, useDeleteVideoPlaylist, usePlaylistVideos, useUpdatePlaylistVideo } from '../hooks/useVideoPlaylists'\r\nimport { useSkills } from '../hooks/useSkills'\r\nimport ReactMarkdown from 'react-markdown'\r\nimport { renderTextWithTimestamps, renderHtmlWithTimestamps } from '../utils/videoUtils'\r\nimport RichTextEditor from './RichTextEditor'\r\nimport { useToastHelpers } from '../hooks/useToast'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField } from '@/utils/i18nUtils'\r\nimport StickyVideoPlayer from './StickyVideoPlayer'\r\n\r\n// ìœ íŠœë¸Œ IFrame Player API íƒ€ì… ì •ì˜\r\ndeclare global {\r\n  interface Window {\r\n    YT: any\r\n    onYouTubeIframeAPIReady: () => void\r\n  }\r\n}\r\n\r\nconst VideoPlaylistDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>()\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const { isAuthenticated } = useAuth()\r\n  const { i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  \r\n  const { data: playlist, isLoading: loading } = useVideoPlaylist(id)\r\n  const { data: playlistVideos = [] } = usePlaylistVideos(id)\r\n  const deleteMutation = useDeleteVideoPlaylist()\r\n  const updateVideoMutation = useUpdatePlaylistVideo()\r\n  const { skillCategories } = useSkills()\r\n  const { success, error } = useToastHelpers()\r\n\r\n  const playerRef = useRef<any>(null)\r\n  const playerContainerRef = useRef<HTMLDivElement>(null)\r\n  const [isPlayerReady, setIsPlayerReady] = useState(false)\r\n  const [activeVideoId, setActiveVideoId] = useState<string | null>(null)\r\n  const [expandedVideoId, setExpandedVideoId] = useState<string | null>(null)\r\n  const [activeVideoTab, setActiveVideoTab] = useState<string | null>(null)\r\n  const [showVideoTabs, setShowVideoTabs] = useState(true)\r\n  \r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ í¸ì§‘ ìƒíƒœ\r\n  const [editingVideoId, setEditingVideoId] = useState<string | null>(null)\r\n  const [editingContent, setEditingContent] = useState<string>('')\r\n\r\n\r\n  // ì²« ë²ˆì§¸ ì˜ìƒì„ ê¸°ë³¸ í™œì„± ì˜ìƒìœ¼ë¡œ ì„¤ì •\r\n  useEffect(() => {\r\n    if (playlistVideos.length > 0 && !activeVideoId && playlistVideos[0]) {\r\n      setActiveVideoId(playlistVideos[0].videoId)\r\n    }\r\n  }, [playlistVideos, activeVideoId])\r\n\r\n  // ìœ íŠœë¸Œ IFrame API ì´ˆê¸°í™”\r\n  useEffect(() => {\r\n    if (!playlist?.playlistId) return\r\n    \r\n    if (!window.YT) {\r\n      const tag = document.createElement('script')\r\n      tag.src = 'https://www.youtube.com/iframe_api'\r\n      const firstScriptTag = document.getElementsByTagName('script')[0]\r\n      if (firstScriptTag?.parentNode) {\r\n        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)\r\n      }\r\n    }\r\n    \r\n    const initializePlayer = () => {\r\n      if (window.YT && window.YT.Player && playerContainerRef.current) {\r\n        playerRef.current = new window.YT.Player(playerContainerRef.current, {\r\n          playerVars: {\r\n            listType: 'playlist',\r\n            list: playlist.playlistId,\r\n            enablejsapi: 1,\r\n            origin: window.location.origin,\r\n            rel: 0,\r\n            modestbranding: 1,\r\n            fs: 1,\r\n            cc_load_policy: 0,\r\n            iv_load_policy: 3,\r\n            showinfo: 0,\r\n          },\r\n          events: {\r\n            onReady: () => {\r\n              setIsPlayerReady(true)\r\n            },\r\n          },\r\n        })\r\n      }\r\n    }\r\n    \r\n    if (window.YT && window.YT.Player) {\r\n      initializePlayer()\r\n    } else {\r\n      window.onYouTubeIframeAPIReady = initializePlayer\r\n    }\r\n    \r\n    return () => {\r\n      if (playerRef.current && typeof playerRef.current.destroy === 'function') {\r\n        playerRef.current.destroy()\r\n      }\r\n    }\r\n  }, [playlist?.playlistId])\r\n\r\n  // ì²« ë²ˆì§¸ ì˜ìƒì„ ê¸°ë³¸ í™œì„± íƒ­ìœ¼ë¡œ ì„¤ì •\r\n  useEffect(() => {\r\n    if (playlistVideos.length > 0 && !activeVideoTab && playlistVideos[0]) {\r\n      setActiveVideoTab(playlistVideos[0]._id)\r\n    }\r\n  }, [playlistVideos, activeVideoTab])\r\n\r\n  // ì—°ê²°ëœ ìŠ¤í‚¬\r\n  const linkedSkills = useMemo(() => {\r\n    if (!playlist?.skillIds || !skillCategories) return []\r\n    const allSkills = skillCategories.flatMap(cat => cat.skills || [])\r\n    return allSkills.filter(skill => skill._id && playlist.skillIds?.includes(skill._id))\r\n  }, [playlist, skillCategories])\r\n\r\n  // í™œì„± ì˜ìƒ\r\n  const activeVideo = useMemo(() => \r\n    playlistVideos.find(v => v._id === activeVideoTab),\r\n    [playlistVideos, activeVideoTab]\r\n  )\r\n\r\n  // íƒ­ í´ë¦­ ì‹œ ì˜ìƒ ì „í™˜\r\n  const handleVideoTabClick = (video: any, index: number) => {\r\n    setActiveVideoTab(video._id)\r\n    handleTimestampClick(video.videoId, 0)\r\n  }\r\n\r\n  // íƒ€ì„ìŠ¤íƒ¬í”„ í´ë¦­ í•¸ë“¤ëŸ¬ (ì˜ìƒ ì „í™˜ + ì‹œê°„ ì´ë™ + ìë™ ì¬ìƒ)\r\n  const handleTimestampClick = (targetVideoId: string, seconds: number) => {\r\n    if (!isPlayerReady || !playerRef.current) {\r\n      return\r\n    }\r\n\r\n    try {\r\n      const videoIndex = playlistVideos.findIndex(v => v.videoId === targetVideoId)\r\n      \r\n      if (videoIndex === -1) {\r\n        return\r\n      }\r\n\r\n      // ì˜ìƒ ì „í™˜\r\n      playerRef.current.playVideoAt(videoIndex)\r\n      setActiveVideoId(targetVideoId)\r\n      \r\n      // ì‹œê°„ ì´ë™ + ìë™ ì¬ìƒ\r\n      setTimeout(() => {\r\n        playerRef.current.seekTo(seconds, true)\r\n        playerRef.current.playVideo()\r\n      }, 1000)\r\n      \r\n    } catch (error) {\r\n      console.error('íƒ€ì„ìŠ¤íƒ¬í”„ ì´ë™ ì‹¤íŒ¨:', error)\r\n    }\r\n  }\r\n\r\n\r\n  // ì¬ìƒ ëª©ë¡ ì‚­ì œ í•¸ë“¤ëŸ¬\r\n  const handleDelete = async () => {\r\n    if (!confirm('ì´ ì¬ìƒ ëª©ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return\r\n\r\n    try {\r\n      await deleteMutation.mutateAsync(id!)\r\n      navigate('/video-learnings')\r\n    } catch (error) {\r\n      console.error('ì‚­ì œ ì‹¤íŒ¨:', error)\r\n    }\r\n  }\r\n\r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ í¸ì§‘ ì‹œì‘\r\n  const handleStartEdit = (video: any) => {\r\n    setEditingVideoId(video._id)\r\n    setEditingContent(video.keyTakeaways || '')\r\n  }\r\n\r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ í¸ì§‘ ì·¨ì†Œ\r\n  const handleCancelEdit = () => {\r\n    setEditingVideoId(null)\r\n    setEditingContent('')\r\n  }\r\n\r\n  // ğŸŒŸ í•µì‹¬ ë°°ì›€ ì €ì¥\r\n  const handleSaveEdit = async () => {\r\n    if (!editingVideoId || !activeVideo) return\r\n\r\n    try {\r\n      await updateVideoMutation.mutateAsync({\r\n        id: editingVideoId,\r\n        data: {\r\n          playlistId: id!,\r\n          videoId: activeVideo.videoId,\r\n          title: activeVideo.title,\r\n          keyTakeaways: editingContent,\r\n          order: activeVideo.order || 0,\r\n        }\r\n      })\r\n      success('ì €ì¥ ì™„ë£Œ', 'í•µì‹¬ ë°°ì›€ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      setEditingVideoId(null)\r\n      setEditingContent('')\r\n    } catch (err) {\r\n      error('ì €ì¥ ì‹¤íŒ¨', 'í•µì‹¬ ë°°ì›€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n      console.error('í•µì‹¬ ë°°ì›€ ì €ì¥ ì‹¤íŒ¨:', err)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!playlist) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <FaList className=\"text-6xl text-gray-400 mx-auto mb-4\" />\r\n          <p className=\"text-xl text-gray-600 dark:text-gray-400\">ì¬ìƒ ëª©ë¡ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</p>\r\n          <Link \r\n            to=\"/video-learnings\" \r\n            state={location.state}\r\n            className=\"text-primary-600 hover:text-primary-700 mt-4 inline-block\"\r\n          >\r\n            ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <section className=\"min-h-screen bg-white dark:bg-dark-900\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n        >\r\n          <Link\r\n            to=\"/video-learnings\"\r\n            state={location.state}\r\n            className=\"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6\"\r\n          >\r\n            <FaArrowLeft /> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </motion.div>\r\n\r\n        {/* 2ë‹¨ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ */}\r\n        <div className=\"flex flex-col lg:flex-row gap-6\">\r\n          \r\n          {/* ========== ì™¼ìª½ ì˜ì—­: í”Œë ˆì´ì–´ + ê¸°ë³¸ ì •ë³´ ========== */}\r\n          <div className=\"w-full lg:w-7/12 lg:sticky lg:top-8 self-start\">\r\n            \r\n            {/* ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ í”Œë ˆì´ì–´ */}\r\n            {playlist.playlistId && activeVideoId && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"mb-6\"\r\n              >\r\n                <StickyVideoPlayer \r\n                  videoId={activeVideoId}\r\n                  playerRef={playerContainerRef}\r\n                  onPlayerReady={() => setIsPlayerReady(true)}\r\n                />\r\n                {!isPlayerReady && (\r\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 rounded-xl pointer-events-none\">\r\n                    <div className=\"w-12 h-12 border-4 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n                  </div>\r\n                )}\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* ê¸°ë³¸ ì •ë³´ ì¹´ë“œ */}\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.1 }}\r\n              className=\"card p-6 mb-6\"\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                {/* ì¹´í…Œê³ ë¦¬ ë°°ì§€ (ë³µìˆ˜ í‘œì‹œ) */}\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {playlist.categoryIds && playlist.categoryIds.length > 0 ? (\r\n                    (playlist.categoryIds as any[]).map((catIdOrObj: any) => {\r\n                      const catName = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?.name\r\n                      return catName ? (\r\n                        <span \r\n                          key={typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id}\r\n                          className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\"\r\n                        >\r\n                          {catName}\r\n                        </span>\r\n                      ) : null\r\n                    })\r\n                  ) : (\r\n                    // í˜¸í™˜ì„±: categoryIdsê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ category í‘œì‹œ\r\n                    playlist.category && (\r\n                      <span className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\">\r\n                        {playlist.category}\r\n                      </span>\r\n                    )\r\n                  )}\r\n                </div>\r\n                {isAuthenticated && (\r\n                  <div className=\"flex gap-2\">\r\n                    <Link\r\n                      to={`/admin`}\r\n                      state={{ tab: 'videoPlaylists', editId: playlist._id }}\r\n                      className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-blue-600 dark:text-blue-400\"\r\n                      aria-label=\"ì¬ìƒ ëª©ë¡ ìˆ˜ì •\"\r\n                    >\r\n                      <FaEdit />\r\n                    </Link>\r\n                    <button\r\n                      onClick={handleDelete}\r\n                      disabled={deleteMutation.isPending}\r\n                      className=\"p-2 rounded-lg text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n                      aria-label=\"ì¬ìƒ ëª©ë¡ ì‚­ì œ\"\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-4\">\r\n                {playlist.title}\r\n              </h1>\r\n\r\n              <div className=\"flex flex-wrap gap-4 text-sm text-gray-600 dark:text-gray-400\">\r\n                {playlist.rating && (\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {Array.from({ length: 5 }, (_, i) => (\r\n                      <FaStar \r\n                        key={i} \r\n                        className={`text-sm ${i < playlist.rating! ? 'text-yellow-500' : 'text-gray-300 dark:text-gray-600'}`} \r\n                      />\r\n                    ))}\r\n                    <span className=\"font-medium\">{playlist.rating}/5</span>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FaCalendar />\r\n                  <span>{formatDate(playlist.watchDate)}</span>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <FaList />\r\n                  <span>{playlistVideos.length}ê°œ ì˜ìƒ</span>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n\r\n            {/* ì‹œì²­ ëª©ì  */}\r\n            {playlist.purpose && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.2 }}\r\n                className=\"card p-6 mb-6\"\r\n              >\r\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2\">\r\n                  <FaBullseye className=\"text-blue-600\" /> ì‹œì²­ ëª©ì \r\n                </h3>\r\n                <div className=\"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 text-sm\">\r\n                  <ReactMarkdown>{playlist.purpose}</ReactMarkdown>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* í†µí•© ì ìš© ê³„íš */}\r\n            {playlist.application && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.3 }}\r\n                className=\"card p-6 bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 border-l-4 border-purple-600\"\r\n              >\r\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-3 flex items-center gap-2\">\r\n                  <FaRocket className=\"text-purple-600\" /> í†µí•© ì ìš© ê³„íš\r\n                </h3>\r\n                <div className=\"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 text-sm\">\r\n                  <ReactMarkdown>{playlist.application}</ReactMarkdown>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n\r\n          {/* ========== ì˜¤ë¥¸ìª½ ì˜ì—­: í•™ìŠµ ê¸°ë¡ ========== */}\r\n          <div className=\"w-full lg:w-5/12 space-y-6\">\r\n\r\n            {/* ì—°ê²°ëœ ìŠ¤í‚¬ */}\r\n            {linkedSkills.length > 0 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ delay: 0.2 }}\r\n                className=\"card p-6 mb-6\"\r\n              >\r\n                <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2\">\r\n                  <FaCubes className=\"text-primary-600\" /> í•™ìŠµí•œ ê¸°ìˆ \r\n                </h3>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {linkedSkills.map(skill => (\r\n                    <div\r\n                      key={skill._id}\r\n                      className=\"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium\"\r\n                      style={{\r\n                        backgroundColor: `${skill.color}26`,\r\n                        color: skill.color,\r\n                      }}\r\n                    >\r\n                      {skill.name}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* ì˜ìƒë³„ í•™ìŠµ ê¸°ë¡ - íƒ­ í˜•íƒœ */}\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: 0.4 }}\r\n              className=\"card p-6\"\r\n            >\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <button\r\n              onClick={() => setShowVideoTabs(!showVideoTabs)}\r\n              className=\"flex items-center gap-2 text-xl font-bold text-gray-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400 transition-colors\"\r\n            >\r\n              {showVideoTabs ? <FaChevronUp /> : <FaChevronDown />}\r\n              ğŸ“¹ ì˜ìƒë³„ í•™ìŠµ ê¸°ë¡ ({playlistVideos.length}ê°œ)\r\n            </button>\r\n          </div>\r\n          \r\n          {/* ì˜ìƒ íƒ­ ë²„íŠ¼ë“¤ - í† ê¸€ ê°€ëŠ¥ */}\r\n          {showVideoTabs && playlistVideos.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-4\">\r\n              {playlistVideos.map((video, index) => (\r\n                <button\r\n                  key={video._id}\r\n                  onClick={() => handleVideoTabClick(video, index)}\r\n                  className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n                    activeVideoTab === video._id\r\n                      ? 'bg-primary-600 text-white'\r\n                      : 'bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600'\r\n                  }`}\r\n                >\r\n                  #{index + 1} {video.title}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* í™œì„± ì˜ìƒì˜ í•™ìŠµ ê¸°ë¡ */}\r\n          {playlistVideos.length > 0 && activeVideo ? (\r\n            <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden\">\r\n              {/* ì˜ìƒ í—¤ë” */}\r\n              <div className=\"p-4 bg-gray-50 dark:bg-gray-800\">\r\n                <h4 className=\"font-bold text-gray-900 dark:text-white mb-1\">\r\n                  {activeVideo.title}\r\n                </h4>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"space-y-0.5\">\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      ìœ íŠœë¸Œ ì˜ìƒ ID: {activeVideo.videoId}\r\n                    </p>\r\n                    {activeVideo.createdAt && (\r\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                        ê¸°ë¡ ë‚ ì§œ: {formatDate(activeVideo.createdAt)}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  {/* ğŸŒŸ í¸ì§‘ ë²„íŠ¼ - ì¸ì¦ëœ ì‚¬ìš©ìì—ê²Œë§Œ í‘œì‹œ */}\r\n                  {isAuthenticated && editingVideoId !== activeVideo._id && (\r\n                    <button\r\n                      onClick={() => handleStartEdit(activeVideo)}\r\n                      className=\"p-1.5 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors\"\r\n                      title=\"í•µì‹¬ ë°°ì›€ í¸ì§‘\"\r\n                    >\r\n                      <FaEdit className=\"text-sm\" />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n\r\n              {/* í•µì‹¬ ë°°ì›€ - ì½ê¸° ëª¨ë“œ */}\r\n              {editingVideoId !== activeVideo._id && (\r\n                <>\r\n                  {activeVideo.keyTakeaways ? (\r\n                    <div className=\"p-4 bg-white dark:bg-gray-900\">\r\n                      <h5 className=\"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3\">\r\n                        ğŸ¯ í•µì‹¬ ë°°ì›€\r\n                      </h5>\r\n                      <div \r\n                        className=\"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 leading-relaxed\"\r\n                        dangerouslySetInnerHTML={{ \r\n                          __html: renderHtmlWithTimestamps(activeVideo.keyTakeaways)\r\n                        }}\r\n                        onClick={(e) => {\r\n                          // íƒ€ì„ìŠ¤íƒ¬í”„ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬\r\n                          const target = e.target as HTMLElement\r\n                          if (target.tagName === 'BUTTON' && target.dataset['timestamp']) {\r\n                            const seconds = parseInt(target.dataset['timestamp'], 10)\r\n                            handleTimestampClick(activeVideo.videoId, seconds)\r\n                          }\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"p-4 bg-white dark:bg-gray-900 text-center text-gray-500 dark:text-gray-400\">\r\n                      <p className=\"text-sm\">ì´ ì˜ìƒì˜ í•µì‹¬ ë°°ì›€ì´ ì•„ì§ ê¸°ë¡ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤</p>\r\n                      {isAuthenticated && (\r\n                        <p className=\"text-xs mt-2\">ìœ„ì˜ ì—°í•„ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í•™ìŠµ ê¸°ë¡ì„ ì¶”ê°€í•˜ì„¸ìš”</p>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n\r\n              {/* ğŸŒŸ í•µì‹¬ ë°°ì›€ - í¸ì§‘ ëª¨ë“œ */}\r\n              {editingVideoId === activeVideo._id && (\r\n                <div className=\"p-4 bg-white dark:bg-gray-900\">\r\n                  <h5 className=\"text-sm font-bold text-gray-700 dark:text-gray-300 mb-3\">\r\n                    âœï¸ í•µì‹¬ ë°°ì›€ í¸ì§‘\r\n                  </h5>\r\n                  <RichTextEditor\r\n                    value={editingContent}\r\n                    onChange={setEditingContent}\r\n                    placeholder=\"ì˜ìƒì„ ë³´ë©´ì„œ í•µì‹¬ ë°°ì›€ì„ ì‘ì„±í•˜ì„¸ìš”. ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì„œì‹ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\r\n                    rows={8}\r\n                    className=\"min-h-[250px]\"\r\n                  />\r\n                  <div className=\"flex gap-2 mt-4\">\r\n                    <button\r\n                      onClick={handleSaveEdit}\r\n                      disabled={updateVideoMutation.isPending}\r\n                      className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\r\n                    >\r\n                      <FaSave />\r\n                      {updateVideoMutation.isPending ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n                    </button>\r\n                    <button\r\n                      onClick={handleCancelEdit}\r\n                      disabled={updateVideoMutation.isPending}\r\n                      className=\"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\r\n                    >\r\n                      <FaTimes />\r\n                      ì·¨ì†Œ\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          ) : playlistVideos.length === 0 ? (\r\n            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n              <p className=\"mb-4\">ì•„ì§ ë“±ë¡ëœ ì˜ìƒ í•™ìŠµ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p>\r\n              {isAuthenticated && (\r\n                <p className=\"text-sm\">ê´€ë¦¬ì í˜ì´ì§€ì˜ ì¬ìƒ ëª©ë¡ ìˆ˜ì •ì—ì„œ ì˜ìƒì„ ì¶”ê°€í•´ì£¼ì„¸ìš”</p>\r\n              )}\r\n            </div>\r\n          ) : null}\r\n            </motion.div>\r\n          </div>\r\n          {/* ì˜¤ë¥¸ìª½ ì˜ì—­ ë */}\r\n          \r\n        </div>\r\n        {/* 2ë‹¨ ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ ë */}\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default VideoPlaylistDetail\r\n\r\n","import React from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { Link } from 'react-router-dom'\r\nimport { FaGithub, FaExternalLinkAlt, FaImage } from 'react-icons/fa'\r\nimport { Project } from '../types'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField, getLocalizedArrayField } from '@/utils/i18nUtils'\r\n\r\ninterface ProjectCardProps {\r\n  project: Project\r\n  itemVariants: any // framer-motion variants íƒ€ì…\r\n  getStatusColor: (status: string) => string\r\n  getStatusText: (status: string) => string\r\n}\r\n\r\n// ê¸°ìˆ  ìŠ¤íƒ ìµœëŒ€ í‘œì‹œ ê°œìˆ˜ ìƒìˆ˜\r\nconst MAX_TECH_DISPLAY = 5\r\n\r\nconst ProjectCard: React.FC<ProjectCardProps> = ({ project, itemVariants, getStatusColor, getStatusText }) => {\r\n  const { i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  \r\n  // Get localized technologies\r\n  const technologies = getLocalizedArrayField(\r\n    currentLang,\r\n    project.technologies,\r\n    project.technologiesEn,\r\n    project.technologiesJa\r\n  )\r\n  \r\n  // í”„ë¡œì íŠ¸ ë§í¬ ì¡´ì¬ ì—¬ë¶€ í™•ì¸\r\n  const hasLinks = project.githubLink || project.liveLink\r\n\r\n  return (\r\n    <motion.div\r\n      key={project._id}\r\n      variants={itemVariants}\r\n      // ë ˆì´ì•„ì›ƒ ë³€ê²½ ì‹œ ë¶€ë“œëŸ¬ìš´ ì „í™˜ì„ ìœ„í•´ layout ì†ì„± ì¶”ê°€\r\n      layout\r\n      className=\"card overflow-hidden bg-white dark:bg-dark-800 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 flex flex-col cursor-pointer group\"\r\n    >\r\n      <Link \r\n        to={`/projects/${project._id}`}\r\n        state={{ scrollPosition: window.scrollY }}\r\n        className=\"block flex flex-col h-full\"\r\n      >\r\n      <div className=\"h-48 bg-cream-200 dark:bg-dark-700 flex items-center justify-center relative flex-shrink-0\">\r\n        {project.image ? (\r\n          <img \r\n            src={project.image} \r\n            alt={`${project.title} ì¸ë„¤ì¼`} \r\n            className=\"w-full h-full object-cover\"\r\n            loading=\"lazy\"\r\n            decoding=\"async\"\r\n            width=\"640\"\r\n            height=\"192\"\r\n          />\r\n        ) : (\r\n          <FaImage className=\"text-dark-400 dark:text-dark-500 text-5xl\" />\r\n        )}\r\n        <div className=\"absolute top-4 right-4\">\r\n          <span className={`px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(project.status)}`}>\r\n            {getStatusText(project.status)}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-8 flex flex-col flex-grow\">\r\n        <h3 className=\"text-xl font-bold text-dark-900 dark:text-cream-100 mb-3 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors\">\r\n          {getLocalizedField(currentLang, project.title, project.titleEn, project.titleJa)}\r\n        </h3>\r\n        <p className=\"text-dark-600 dark:text-dark-300 mb-6 leading-relaxed flex-grow\">\r\n          {getLocalizedField(currentLang, project.description, project.descriptionEn, project.descriptionJa)}\r\n        </p>\r\n        <div className=\"flex flex-wrap gap-2 mb-4\">\r\n          {technologies.slice(0, MAX_TECH_DISPLAY).map((tech) => (\r\n            <span\r\n              key={tech}\r\n              className=\"px-3 py-1 bg-coffee-50 dark:bg-coffee-900 text-coffee-700 dark:text-coffee-300 rounded-lg text-sm font-medium\"\r\n            >\r\n              {tech}\r\n            </span>\r\n          ))}\r\n          {technologies.length > MAX_TECH_DISPLAY && (\r\n            <span className=\"px-3 py-1 bg-cream-200 dark:bg-dark-700 text-dark-500 dark:text-dark-400 rounded-lg text-sm font-medium\">\r\n              ì™¸ {technologies.length - MAX_TECH_DISPLAY}ê°œ\r\n            </span>\r\n          )}\r\n        </div>\r\n        <div \r\n          className=\"flex flex-wrap gap-4 pt-4 border-t border-cream-200 dark:border-dark-700\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {hasLinks ? (\r\n            <>\r\n              {project.liveLink && (\r\n                <a \r\n                  href={project.liveLink}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className={`px-4 py-2 rounded-xl font-bold transition-all duration-200 flex items-center gap-2 \r\n                    ${project.status === 'completed' \r\n                      ? 'bg-coffee-600 text-white hover:bg-coffee-700 shadow-md'\r\n                      : 'bg-cream-200 dark:bg-dark-700 text-dark-700 dark:text-dark-300 hover:bg-cream-300 dark:hover:bg-dark-600'\r\n                    }`}\r\n                  aria-label={`${project.title} ë¼ì´ë¸Œ ë°ëª¨ ë³´ê¸°`}\r\n                >\r\n                  <FaExternalLinkAlt size={16} />\r\n                  ë¼ì´ë¸Œ ë³´ê¸°\r\n                </a>\r\n              )}\r\n              {project.githubLink && (\r\n                <a \r\n                  href={project.githubLink}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"px-4 py-2 rounded-xl font-medium transition-all duration-200 flex items-center gap-2 bg-white dark:bg-dark-900 text-dark-600 dark:text-dark-300 hover:bg-cream-100 dark:hover:bg-dark-700 border border-cream-200 dark:border-dark-700\"\r\n                  aria-label={`${project.title} GitHub ë ˆí¬ì§€í† ë¦¬`}\r\n                >\r\n                  <FaGithub size={20} />\r\n                  GitHub\r\n                </a>\r\n              )}\r\n            </>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n      </Link>\r\n    </motion.div>\r\n  )\r\n}\r\n\r\nexport default ProjectCard\r\n","import React, { useState } from 'react'\r\nimport { useParams, useNavigate, Link, useLocation } from 'react-router-dom'\r\nimport { motion } from 'framer-motion'\r\nimport { FaArrowLeft, FaGithub, FaExternalLinkAlt, FaPlay, FaImage, FaCode, FaChevronLeft, FaChevronRight } from 'react-icons/fa'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useProjectDetail } from '../hooks/useProjectDetail'\r\n\r\nconst ProjectDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>()\r\n  const navigate = useNavigate()\r\n  const location = useLocation()\r\n  const { i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  \r\n  // Use custom hook for data fetching and i18n processing\r\n  const { loading, error, localizedProject, linkedSkills } = useProjectDetail(id, currentLang)\r\n  \r\n  // UI state management\r\n  const [selectedImage, setSelectedImage] = useState<string | null>(null)\r\n  const [currentVideoIndex, setCurrentVideoIndex] = useState(0)\r\n  const [currentShortsIndex, setCurrentShortsIndex] = useState(0)\r\n\r\n  // Utility function for skill badge styling\r\n  const getBadgeStyle = (colorCode: string) => {\r\n    const bgColor = `${colorCode}26`\r\n    const textColor = colorCode\r\n    \r\n    return {\r\n      backgroundColor: bgColor,\r\n      color: textColor,\r\n    } as React.CSSProperties\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (error || !localizedProject) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-xl text-gray-600 dark:text-gray-400 mb-4\">{error || 'í”„ë¡œì íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'}</p>\r\n          <button\r\n            onClick={() => navigate('/projects', { state: location.state })}\r\n            className=\"text-primary-600 hover:text-primary-700\"\r\n          >\r\n            ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const isYouTubeUrl = (url: string) => {\r\n    return url.includes('youtube.com') || url.includes('youtu.be')\r\n  }\r\n\r\n  // ğŸŒŸ ìœ íŠœë¸Œ ì‡¼ì¸  URL íŒë³„ í•¨ìˆ˜ ì¶”ê°€\r\n  const isYouTubeShorts = (url: string) => {\r\n    return url.includes('youtube.com/shorts/')\r\n  }\r\n\r\n  const getYouTubeEmbedUrl = (url: string) => {\r\n    let videoId = ''\r\n    // ğŸŒŸ ìœ íŠœë¸Œ ì‡¼ì¸  ì§€ì› ì¶”ê°€\r\n    if (url.includes('youtube.com/shorts/')) {\r\n      videoId = url.split('shorts/')[1]?.split('?')[0] || ''\r\n    } else if (url.includes('youtube.com/watch?v=')) {\r\n      videoId = url.split('v=')[1]?.split('&')[0] || ''\r\n    } else if (url.includes('youtu.be/')) {\r\n      videoId = url.split('youtu.be/')[1]?.split('?')[0] || ''\r\n    }\r\n    return videoId ? `https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1&showinfo=0` : ''\r\n  }\r\n\r\n  // ğŸŒŸ ë™ì˜ìƒ ë¶„ë¥˜ (ì‡¼ì¸  vs ì¼ë°˜)\r\n  const regularVideos = localizedProject.videos?.filter((video: string) => !isYouTubeShorts(video)) || []\r\n  const shortsVideos = localizedProject.videos?.filter((video: string) => isYouTubeShorts(video)) || []\r\n\r\n  return (\r\n    <section className=\"section-padding bg-gray-50 dark:bg-dark-900 min-h-screen\">\r\n      <div className=\"max-w-6xl mx-auto px-4\">\r\n        {/* Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"mb-8\"\r\n        >\r\n          <Link\r\n            to=\"/projects\"\r\n            state={location.state}\r\n            className=\"inline-flex items-center gap-2 text-primary-600 hover:text-primary-700 mb-6 dark:text-primary-400\"\r\n          >\r\n            <FaArrowLeft /> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°\r\n          </Link>\r\n        </motion.div>\r\n\r\n        {/* Project Header */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 mb-8\"\r\n        >\r\n          <div className=\"flex flex-col md:flex-row gap-8\">\r\n            {/* ğŸŒŸ Main Image - ì™¼ìª½ìœ¼ë¡œ ì´ë™ */}\r\n            {localizedProject.image && (\r\n              <div className=\"md:w-1/3\">\r\n                <img \r\n                  src={localizedProject.image}\r\n                  alt={localizedProject.title}\r\n                  className=\"w-full h-auto rounded-lg shadow-lg object-cover\"\r\n                  loading=\"eager\"\r\n                  decoding=\"async\"\r\n                  width=\"800\"\r\n                  height=\"600\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            {/* ğŸŒŸ í…ìŠ¤íŠ¸ ë‚´ìš© - ì˜¤ë¥¸ìª½ */}\r\n            <div className=\"flex-1\">\r\n              <div className=\"flex items-start gap-4 mb-4 flex-wrap\">\r\n                {/* ì¹´í…Œê³ ë¦¬ ë°°ì§€ (ë³µìˆ˜ í‘œì‹œ) */}\r\n                {localizedProject.categoryIds && localizedProject.categoryIds.length > 0 ? (\r\n                  (localizedProject.categoryIds as any[]).map((catIdOrObj: any) => {\r\n                    const catName = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?.name\r\n                    return catName ? (\r\n                      <span \r\n                        key={typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id}\r\n                        className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\"\r\n                      >\r\n                        {catName}\r\n                      </span>\r\n                    ) : null\r\n                  })\r\n                ) : (\r\n                  // í˜¸í™˜ì„±: categoryIdsê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ category í‘œì‹œ\r\n                  localizedProject.category && (\r\n                    <span className=\"px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\">\r\n                      {localizedProject.category}\r\n                    </span>\r\n                  )\r\n                )}\r\n                <span className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                  localizedProject.status === 'completed' \r\n                    ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                    : localizedProject.status === 'planning'\r\n                    ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200'\r\n                    : 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'\r\n                }`}>\r\n                  {localizedProject.status === 'completed' ? 'ì™„ë£Œ' : localizedProject.status === 'planning' ? 'ê¸°íšì¤‘' : 'ì¤€ë¹„ì¤‘'}\r\n                </span>\r\n              </div>\r\n              <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4\">\r\n                {localizedProject.title}\r\n              </h1>\r\n              <p className=\"text-lg text-gray-600 dark:text-gray-300 mb-6 leading-relaxed\">\r\n                {localizedProject.description}\r\n              </p>\r\n              \r\n              {/* Technologies */}\r\n              {localizedProject.technologies.length > 0 && (\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2\">\r\n                    <FaCode /> ì‚¬ìš© ê¸°ìˆ \r\n                  </h3>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {localizedProject.technologies.map((tech, index) => (\r\n                      <span\r\n                        key={index}\r\n                        className=\"px-3 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium\"\r\n                      >\r\n                        {tech}\r\n                      </span>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* ğŸŒŸ Linked Skills (ìŠ¤í‚¬ ë°°ì§€) */}\r\n              {linkedSkills.length > 0 && (\r\n                <div className=\"mb-6\">\r\n                  <h3 className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2\">\r\n                    <FaCode /> ì‚¬ìš©ëœ í•µì‹¬ ìŠ¤í‚¬\r\n                  </h3>\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    {linkedSkills.map((skill) => {\r\n                      // ğŸŒŸ ë™ì  ìŠ¤íƒ€ì¼ ì ìš©\r\n                      const badgeStyle = skill.color ? getBadgeStyle(skill.color) : undefined\r\n\r\n                      return (\r\n                        <Link\r\n                          key={skill._id}\r\n                          to={`/projects?skillId=${skill._id}`}\r\n                          className=\"inline-flex items-center px-3 py-1 rounded-lg text-sm font-medium hover:ring-2 transition-all hover:opacity-80\"\r\n                          title={`${skill.name} ìŠ¤í‚¬ì´ ì‚¬ìš©ëœ ëª¨ë“  í”„ë¡œì íŠ¸ ë³´ê¸°`}\r\n                          style={{\r\n                            ...badgeStyle,\r\n                            '--tw-ring-color': skill.color || '#3B82F6',\r\n                          } as React.CSSProperties}\r\n                        >\r\n                          <span className=\"font-semibold\">{skill.name}</span>\r\n                          <span \r\n                            className=\"text-xs font-semibold ml-1\"\r\n                            style={{ color: skill.color || '#3B82F6' }}\r\n                          >\r\n                            [{skill.levelText}]\r\n                          </span>\r\n                        </Link>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Links */}\r\n              <div className=\"flex flex-wrap gap-4\">\r\n                {localizedProject.githubLink && (\r\n                  <a\r\n                    href={localizedProject.githubLink}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 bg-gray-900 dark:bg-gray-700 text-white rounded-lg hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors\"\r\n                  >\r\n                    <FaGithub /> GitHub\r\n                  </a>\r\n                )}\r\n                {localizedProject.liveLink && (\r\n                  <a\r\n                    href={localizedProject.liveLink}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"inline-flex items-center gap-2 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n                  >\r\n                    <FaExternalLinkAlt /> Live Demo\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\r\n          {/* Additional Images - ì „ì²´ ë„ˆë¹„ */}\r\n          {localizedProject.images && localizedProject.images.length > 0 && (\r\n            <div className=\"lg:col-span-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2\">\r\n                <FaImage /> í”„ë¡œì íŠ¸ ì´ë¯¸ì§€\r\n              </h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {localizedProject.images.map((image, index) => (\r\n                  <motion.div\r\n                    key={index}\r\n                    initial={{ opacity: 0, scale: 0.9 }}\r\n                    animate={{ opacity: 1, scale: 1 }}\r\n                    transition={{ delay: index * 0.1 }}\r\n                    className=\"cursor-pointer group\"\r\n                    onClick={() => setSelectedImage(image)}\r\n                  >\r\n                    <div className=\"aspect-video rounded-lg overflow-hidden shadow-md group-hover:shadow-xl transition-shadow\">\r\n                      <img\r\n                        src={image}\r\n                        alt={`${localizedProject.title} ${index + 1}`}\r\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                        loading=\"lazy\"\r\n                        decoding=\"async\"\r\n                        width=\"640\"\r\n                        height=\"360\"\r\n                      />\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* ğŸŒŸ ì˜ìƒ ì„¹ì…˜ - ê°€ë¡œ ë°°ì¹˜ */}\r\n          {/* ğŸŒŸ ì¼ë°˜ ë™ì˜ìƒ (ê°€ë¡œí˜•) - ì™¼ìª½ (3/4) */}\r\n          {regularVideos.length > 0 && (\r\n            <div className=\"lg:col-span-3 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8\" data-video-section>\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                  <FaPlay /> í”„ë¡œì íŠ¸ ë™ì˜ìƒ\r\n                </h3>\r\n                {regularVideos.length > 1 && (\r\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    {currentVideoIndex + 1} / {regularVideos.length}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"relative\">\r\n                {/* ì˜ìƒ ì»¨í…Œì´ë„ˆ */}\r\n                <div className=\"relative group\">\r\n                  {(() => {\r\n                    const video = regularVideos[currentVideoIndex]\r\n                    if (!video) return null\r\n                    \r\n                    return (\r\n                      <div>\r\n                        {isYouTubeUrl(video) ? (\r\n                          <div className=\"relative w-full rounded-lg overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-700\">\r\n                            <div className=\"aspect-video\">\r\n                              <iframe\r\n                                src={getYouTubeEmbedUrl(video)}\r\n                                title={`${localizedProject.title} ë™ì˜ìƒ ${currentVideoIndex + 1}`}\r\n                                className=\"w-full h-full\"\r\n                                allowFullScreen\r\n                                allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                              />\r\n                            </div>\r\n                            {/* YouTube ë§í¬ */}\r\n                            <div className=\"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\r\n                              <a\r\n                                href={video}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors\"\r\n                              >\r\n                                YouTubeì—ì„œ ë³´ê¸°\r\n                              </a>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <div className=\"relative w-full rounded-lg overflow-hidden shadow-lg bg-gray-100 dark:bg-gray-700\">\r\n                            <div className=\"aspect-video\">\r\n                              <video\r\n                                src={video}\r\n                                controls\r\n                                className=\"w-full h-full object-cover\"\r\n                                preload=\"metadata\"\r\n                              >\r\n                                <source src={video} type=\"video/mp4\" />\r\n                                <source src={video} type=\"video/webm\" />\r\n                                <source src={video} type=\"video/ogg\" />\r\n                                ë¸Œë¼ìš°ì €ê°€ ë¹„ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\r\n                              </video>\r\n                            </div>\r\n                            {/* ì§ì ‘ ë§í¬ */}\r\n                            <div className=\"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\r\n                              <a\r\n                                href={video}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors\"\r\n                              >\r\n                                ì›ë³¸ ë³´ê¸°\r\n                              </a>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                        \r\n                        {/* ğŸŒŸ ì˜ìƒ ì„¤ëª… (HTML ë Œë”ë§) */}\r\n                        {localizedProject.videoDescriptions?.[currentVideoIndex] && (\r\n                          <div className=\"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                            <div \r\n                              className=\"text-gray-700 dark:text-gray-300 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none\"\r\n                              dangerouslySetInnerHTML={{ __html: localizedProject.videoDescriptions[currentVideoIndex] }}\r\n                            />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  })()}\r\n                  \r\n                  {/* ğŸŒŸ ì¢Œìš° í™”ì‚´í‘œ (ì˜ìƒì´ 2ê°œ ì´ìƒì¼ ë•Œ) */}\r\n                  {regularVideos.length > 1 && (\r\n                    <>\r\n                      <button\r\n                        onClick={() => setCurrentVideoIndex((prev) => (prev === 0 ? regularVideos.length - 1 : prev - 1))}\r\n                        className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\"\r\n                        aria-label=\"ì´ì „ ì˜ìƒ\"\r\n                      >\r\n                        <FaChevronLeft size={20} />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setCurrentVideoIndex((prev) => (prev === regularVideos.length - 1 ? 0 : prev + 1))}\r\n                        className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\"\r\n                        aria-label=\"ë‹¤ìŒ ì˜ìƒ\"\r\n                      >\r\n                        <FaChevronRight size={20} />\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                \r\n                {/* ğŸŒŸ ì¸ë””ì¼€ì´í„° (ì˜ìƒì´ 2ê°œ ì´ìƒì¼ ë•Œ) */}\r\n                {regularVideos.length > 1 && (\r\n                  <div className=\"flex justify-center gap-2 mt-4\">\r\n                    {regularVideos.map((_: string, index: number) => (\r\n                      <button\r\n                        key={index}\r\n                        onClick={() => setCurrentVideoIndex(index)}\r\n                        className={`h-2 rounded-full transition-all ${\r\n                          index === currentVideoIndex \r\n                            ? 'w-8 bg-blue-600 dark:bg-blue-400' \r\n                            : 'w-2 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500'\r\n                        }`}\r\n                        aria-label={`${index + 1}ë²ˆì§¸ ì˜ìƒ ë³´ê¸°`}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* ğŸŒŸ ìœ íŠœë¸Œ ì‡¼ì¸  (ì„¸ë¡œí˜•) - ì˜¤ë¥¸ìª½ (1/4) */}\r\n          {shortsVideos.length > 0 && (\r\n            <div className=\"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl shadow-lg px-4 py-8\" data-shorts-section>\r\n              {/* ğŸŒŸ ì‡¼ì¸  ì»¨í…Œì´ë„ˆ - ì™„ì „ ì¤‘ì•™ ì •ë ¬ */}\r\n              <div className=\"flex justify-center items-center\">\r\n                <div className=\"relative group px-0\" style={{ maxWidth: '280px', width: '100%' }}>\r\n                  {/* ğŸŒŸ íƒ€ì´í‹€ì„ ì˜ìƒ ì»¨í…Œì´ë„ˆ ì•ˆìœ¼ë¡œ ì´ë™ */}\r\n                  <div className=\"flex items-center justify-between mb-6\">\r\n                    <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                      <FaPlay /> Shorts\r\n                    </h3>\r\n                    {shortsVideos.length > 1 && (\r\n                      <span className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        {currentShortsIndex + 1} / {shortsVideos.length}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  {(() => {\r\n                    const video = shortsVideos[currentShortsIndex]\r\n                    if (!video) return null\r\n                    \r\n                    const videoIndexInAll = localizedProject.videos?.indexOf(video) ?? -1\r\n                    \r\n                    return (\r\n                      <div className=\"w-full\">\r\n                        <div className=\"relative w-full rounded-lg overflow-hidden shadow-lg bg-black\">\r\n                          {/* ğŸŒŸ ì„¸ë¡œ í˜•ì‹ (9:16 ë¹„ìœ¨) - ìµœëŒ€ ë†’ì´ ì„¤ì • */}\r\n                          <div className=\"aspect-[9/16] w-full\" style={{ maxHeight: '600px' }}>\r\n                            <iframe\r\n                              src={getYouTubeEmbedUrl(video)}\r\n                              title={`${localizedProject.title} Shorts ${currentShortsIndex + 1}`}\r\n                              className=\"w-full h-full\"\r\n                              allowFullScreen\r\n                              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\r\n                            />\r\n                          </div>\r\n                          {/* YouTube ì‡¼ì¸  ë§í¬ */}\r\n                          <div className=\"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity z-10\">\r\n                            <a\r\n                              href={video}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-sm font-medium transition-colors flex items-center gap-1 shadow-lg\"\r\n                            >\r\n                              Shorts\r\n                            </a>\r\n                          </div>\r\n                        </div>\r\n                        \r\n                        {/* ğŸŒŸ ì˜ìƒ ì„¤ëª… (HTML ë Œë”ë§) */}\r\n                        {localizedProject.videoDescriptions?.[videoIndexInAll] && (\r\n                          <div className=\"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg\" style={{ maxWidth: '600px', margin: '1rem auto 0' }}>\r\n                            <div \r\n                              className=\"text-gray-700 dark:text-gray-300 text-sm leading-relaxed prose prose-sm dark:prose-invert max-w-none\"\r\n                              dangerouslySetInnerHTML={{ __html: localizedProject.videoDescriptions[videoIndexInAll] }}\r\n                            />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )\r\n                  })()}\r\n                  \r\n                  {/* ğŸŒŸ ì¢Œìš° í™”ì‚´í‘œ (ì‡¼ì¸ ê°€ 2ê°œ ì´ìƒì¼ ë•Œ) */}\r\n                  {shortsVideos.length > 1 && (\r\n                    <>\r\n                      <button\r\n                        onClick={() => setCurrentShortsIndex((prev) => (prev === 0 ? shortsVideos.length - 1 : prev - 1))}\r\n                        className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\"\r\n                        aria-label=\"ì´ì „ ì‡¼ì¸ \"\r\n                      >\r\n                        <FaChevronLeft size={20} />\r\n                      </button>\r\n                      <button\r\n                        onClick={() => setCurrentShortsIndex((prev) => (prev === shortsVideos.length - 1 ? 0 : prev + 1))}\r\n                        className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-3 rounded-full transition-all opacity-0 group-hover:opacity-100 z-10\"\r\n                        aria-label=\"ë‹¤ìŒ ì‡¼ì¸ \"\r\n                      >\r\n                        <FaChevronRight size={20} />\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              \r\n              {/* ğŸŒŸ ì¸ë””ì¼€ì´í„° (ì‡¼ì¸ ê°€ 2ê°œ ì´ìƒì¼ ë•Œ) */}\r\n              {shortsVideos.length > 1 && (\r\n                <div className=\"flex justify-center gap-2 mt-4\">\r\n                  {shortsVideos.map((_: string, index: number) => (\r\n                    <button\r\n                      key={index}\r\n                      onClick={() => setCurrentShortsIndex(index)}\r\n                      className={`h-2 rounded-full transition-all ${\r\n                        index === currentShortsIndex \r\n                          ? 'w-8 bg-red-600 dark:bg-red-400' \r\n                          : 'w-2 bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500'\r\n                      }`}\r\n                      aria-label={`${index + 1}ë²ˆì§¸ ì‡¼ì¸  ë³´ê¸°`}\r\n                    />\r\n                  ))}\r\n                </div>\r\n          )}\r\n          </div>\r\n          )}\r\n\r\n          {/* í”„ë¡œì íŠ¸ ì„¤ëª… - ì „ì²´ ë„ˆë¹„ */}\r\n          {localizedProject.detailedDescription && (\r\n            <div className=\"lg:col-span-4 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n                ìƒì„¸ ì„¤ëª…\r\n              </h3>\r\n              <div \r\n                className=\"prose prose-lg dark:prose-invert max-w-none text-gray-700 dark:text-gray-300\"\r\n                dangerouslySetInnerHTML={{ __html: localizedProject.detailedDescription }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Features & Learnings - ê°€ë¡œ ë°°ì¹˜ */}\r\n          {/* Features */}\r\n          {localizedProject.features.length > 0 && (\r\n            <div className=\"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n                ì£¼ìš” ê¸°ëŠ¥\r\n              </h3>\r\n              <ul className=\"space-y-3\">\r\n                {localizedProject.features.map((feature, index) => (\r\n                  <li key={index} className=\"flex items-start gap-3\">\r\n                    <span className=\"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900 text-primary-600 dark:text-primary-300 flex items-center justify-center text-sm font-medium mt-0.5\">\r\n                      {index + 1}\r\n                    </span>\r\n                    <span className=\"text-gray-700 dark:text-gray-300\">{feature}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          {/* Learnings */}\r\n          {localizedProject.learnings.length > 0 && (\r\n            <div className=\"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8\">\r\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n                ë°°ìš´ ì \r\n              </h3>\r\n              <ul className=\"space-y-3\">\r\n                {localizedProject.learnings.map((learning, index) => (\r\n                  <li key={index} className=\"flex items-start gap-3\">\r\n                    <span className=\"flex-shrink-0 w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 mt-2\"></span>\r\n                    <span className=\"text-gray-700 dark:text-gray-300\">{learning}</span>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Image Modal */}\r\n      {selectedImage && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4\"\r\n          onClick={() => setSelectedImage(null)}\r\n        >\r\n          <button\r\n            onClick={() => setSelectedImage(null)}\r\n            className=\"absolute top-4 right-4 text-white hover:text-gray-300 text-3xl\"\r\n          >\r\n            Ã—\r\n          </button>\r\n          <img\r\n            src={selectedImage}\r\n            alt=\"í™•ëŒ€ ì´ë¯¸ì§€\"\r\n            className=\"max-w-full max-h-full object-contain\"\r\n            loading=\"eager\"\r\n            decoding=\"async\"\r\n          />\r\n        </motion.div>\r\n      )}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default ProjectDetail\r\n","import React, { useState, useMemo } from 'react';\r\nimport { motion, Variants } from 'framer-motion';\r\nimport { \r\n  FaBriefcase, \r\n  FaCheckCircle, \r\n  FaCoffee, \r\n  FaGraduationCap, \r\n  FaChartLine, \r\n  FaCode, \r\n  FaCog, \r\n  FaRobot, \r\n  FaChevronDown, \r\n  FaChevronRight,\r\n  FaCar,           // ğŸš— ìë™ì°¨\r\n  FaShieldAlt,     // ğŸ›¡ï¸ êµ°ì¸\r\n  FaLaptopCode     // ğŸ’» í”„ë¡œê·¸ë˜ë°\r\n} from 'react-icons/fa';\r\nimport { ExperienceItem as ExperienceItemType } from '../hooks/useExperiences';\r\nimport { ExperienceDetail } from '../types';\r\nimport { useSkills } from '../hooks/useSkills';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { getLocalizedField, getLocalizedArrayField } from '@/utils/i18nUtils';\r\n\r\ninterface ExperienceItemProps {\r\n  exp: ExperienceItemType;\r\n  variants: Variants;\r\n  isLast?: boolean;\r\n}\r\n\r\n// ì•„ì´ì½˜ ë§¤í•‘\r\nconst iconMap = {\r\n  FaCoffee: FaCoffee,\r\n  FaGraduationCap: FaGraduationCap,\r\n  FaChartLine: FaChartLine,\r\n  FaBriefcase: FaBriefcase,\r\n  FaCode: FaCode,\r\n  FaCog: FaCog,\r\n  FaRobot: FaRobot,\r\n  FaCar: FaCar,               // ğŸš— ìë™ì°¨\r\n  FaShieldAlt: FaShieldAlt,   // ğŸ›¡ï¸ êµ°ì¸\r\n  FaLaptopCode: FaLaptopCode, // ğŸ’» í”„ë¡œê·¸ë˜ë°\r\n} as const;\r\n\r\nconst ExperienceItem: React.FC<ExperienceItemProps> = ({ exp, variants, isLast = false }) => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const { skillCategories } = useSkills();\r\n  const { t, i18n } = useTranslation();\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja';\r\n  \r\n  // ì•„ì´ì½˜ ë§¤í•‘ ë° ëŒ€ì²´ ì•„ì´ì½˜ ì„¤ì •\r\n  const IconComponent = exp.iconKey && iconMap[exp.iconKey as keyof typeof iconMap] \r\n    ? iconMap[exp.iconKey as keyof typeof iconMap] \r\n    : FaBriefcase;\r\n  \r\n  // ğŸŒŸ ì—°ê²°ëœ ìŠ¤í‚¬ í•„í„°ë§\r\n  const linkedSkills = useMemo(() => {\r\n    if (!exp.skillIds || !skillCategories) return [];\r\n    const allSkills = skillCategories.flatMap(cat => cat.skills || []);\r\n    return allSkills.filter(skill => {\r\n      const skillId = skill._id;\r\n      return skillId && (exp.skillIds as any[]).some((idOrObj: any) => {\r\n        const id = typeof idOrObj === 'string' ? idOrObj : idOrObj?._id;\r\n        return id === skillId;\r\n      });\r\n    });\r\n  }, [exp.skillIds, skillCategories]);\r\n  \r\n  // descriptionì„ ì¤„ ë°”ê¿ˆ ê¸°ì¤€ìœ¼ë¡œ ë¶„í• í•˜ì—¬ ëª©ë¡ìœ¼ë¡œ ì‚¬ìš©\r\n  const descriptionItems = exp.description \r\n    ? exp.description.split('\\n').filter(line => line.trim() !== '') \r\n    : [];\r\n  \r\n  // ë™ì  ìƒ‰ìƒ ê°’ ë³€ìˆ˜ ì„¤ì • (CSS ë³€ìˆ˜ Fallback)\r\n  const iconColor = exp.color || '#8B4513';\r\n  const iconBgColor = exp.bgColor || '#F5DEB3';\r\n\r\n  return (\r\n    <div className=\"relative flex items-start gap-6\">\r\n      {/* ğŸŒŸ íƒ€ì„ë¼ì¸ ë¼ì¸ (ì„¸ë¡œì„ ) */}\r\n      {!isLast && (\r\n        <div className=\"absolute left-8 top-20 bottom-0 w-0.5 bg-gradient-to-b from-primary-300 to-primary-100 dark:from-primary-700 dark:to-primary-900\" />\r\n      )}\r\n      \r\n      {/* ğŸŒŸ íƒ€ì„ë¼ì¸ ì•„ì´ì½˜ (ì›í˜• ë°°ì§€) */}\r\n      <div className=\"relative z-10 flex-shrink-0\">\r\n        <motion.div\r\n          variants={variants}\r\n          className=\"w-16 h-16 rounded-full flex items-center justify-center shadow-lg ring-4 ring-white dark:ring-gray-800\"\r\n          style={{ \r\n            backgroundColor: iconBgColor,\r\n          }}\r\n          whileHover={{ scale: 1.1, rotate: 5 }}\r\n          transition={{ type: 'spring', stiffness: 300 }}\r\n        >\r\n          <IconComponent \r\n            size={28}\r\n            style={{ color: iconColor }}\r\n          />\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* ğŸŒŸ ì½˜í…ì¸  ì¹´ë“œ */}\r\n      <motion.div\r\n        variants={variants}\r\n        className=\"flex-1 mb-12\"\r\n      >\r\n        <div className=\"card p-6 hover:shadow-xl transition-all duration-300\">\r\n          {/* í—¤ë” (í´ë¦­ ê°€ëŠ¥) */}\r\n          <button\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            className=\"w-full text-left\"\r\n          >\r\n            <div className=\"flex items-start justify-between mb-4\">\r\n              <div className=\"flex-1\">\r\n                {/* íšŒì‚¬ëª… (ì‘ê²Œ) */}\r\n                <p className=\"text-sm text-primary-600 dark:text-primary-400 font-semibold mb-1\">\r\n                  {getLocalizedField(currentLang, exp.company, exp.companyEn, exp.companyJa)}\r\n                </p>\r\n                {/* ì§ì±… (í¬ê²Œ) */}\r\n                <h3 className=\"text-2xl font-bold text-dark-900 dark:text-white mb-2 flex items-center gap-2\">\r\n                  {getLocalizedField(currentLang, exp.title, exp.titleEn, exp.titleJa)}\r\n                  {/* ğŸŒŸ í† ê¸€ í™”ì‚´í‘œ (í•­ìƒ í‘œì‹œ) */}\r\n                  <span className=\"text-sm\">\r\n                    {isExpanded ? (\r\n                      <FaChevronDown className=\"text-primary-600 dark:text-primary-400\" />\r\n                    ) : (\r\n                      <FaChevronRight className=\"text-gray-400\" />\r\n                    )}\r\n                  </span>\r\n                </h3>\r\n                {/* ê¸°ê°„ ë°°ì§€ */}\r\n                <span className=\"inline-flex items-center px-3 py-1 bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded-full text-sm font-medium\">\r\n                  ğŸ“… {exp.period}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </button>\r\n\r\n          {/* ğŸŒŸ ì•„ì½”ë””ì–¸: ì£¼ìš” ë‚´ìš© (í¼ì³¤ì„ ë•Œë§Œ í‘œì‹œ) */}\r\n          {isExpanded && (\r\n            <motion.div\r\n              initial={{ opacity: 0, height: 0 }}\r\n              animate={{ opacity: 1, height: 'auto' }}\r\n              exit={{ opacity: 0, height: 0 }}\r\n              transition={{ duration: 0.3 }}\r\n              className=\"mb-6 pt-4 border-t border-gray-200 dark:border-gray-700\"\r\n            >\r\n              {/* ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš© ì¹´ë“œ (detailsê°€ ìˆëŠ” ê²½ìš°) */}\r\n              {exp.details && exp.details.length > 0 ? (\r\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                  {exp.details.map((detail: ExperienceDetail, idx: number) => (\r\n                    <motion.div\r\n                      key={idx}\r\n                      initial={{ opacity: 0, y: 20 }}\r\n                      animate={{ opacity: 1, y: 0 }}\r\n                      transition={{ delay: idx * 0.1 }}\r\n                      className=\"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-850 rounded-lg p-5 border-2 border-gray-200 dark:border-gray-700 hover:border-primary-400 dark:hover:border-primary-600 transition-all hover:shadow-lg\"\r\n                    >\r\n                      {/* ì¹´í…Œê³ ë¦¬ í—¤ë” */}\r\n                      <div className=\"flex items-center gap-2 mb-4 pb-3 border-b border-gray-200 dark:border-gray-700\">\r\n                        <div className=\"w-2 h-2 rounded-full\" style={{ backgroundColor: iconColor }}></div>\r\n                        <h4 className=\"text-base font-bold text-dark-900 dark:text-white\">\r\n                          {getLocalizedField(currentLang, detail.category, detail.categoryEn, detail.categoryJa)}\r\n                        </h4>\r\n                      </div>\r\n                      \r\n                      {/* í•­ëª© ë¦¬ìŠ¤íŠ¸ */}\r\n                      <ul className=\"space-y-2.5\">\r\n                        {getLocalizedArrayField(currentLang, detail.items, detail.itemsEn, detail.itemsJa).map((item: string, itemIdx: number) => (\r\n                          <motion.li\r\n                            key={itemIdx}\r\n                            initial={{ opacity: 0, x: -10 }}\r\n                            animate={{ opacity: 1, x: 0 }}\r\n                            transition={{ delay: (idx * 0.1) + (itemIdx * 0.03) }}\r\n                            className=\"flex items-start gap-2 text-sm text-dark-700 dark:text-dark-300\"\r\n                          >\r\n                            <FaCheckCircle style={{ color: iconColor }} className=\"mt-0.5 flex-shrink-0 text-xs\" />\r\n                            <span className=\"flex-1 leading-relaxed\">{item}</span>\r\n                          </motion.li>\r\n                        ))}\r\n                      </ul>\r\n                    </motion.div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                // ê¸°ì¡´ ì„¤ëª… ë°©ì‹ (í•˜ìœ„ í˜¸í™˜ì„±)\r\n                descriptionItems.length > 0 && (\r\n                  <>\r\n                    <h4 className=\"text-sm font-semibold text-dark-900 dark:text-white mb-3 flex items-center gap-2\">\r\n                      <FaCheckCircle style={{ color: iconColor }} size={14} />\r\n                      {t('experience.keyPoints')}\r\n                    </h4>\r\n                    <ul className=\"space-y-2.5 pl-1\">\r\n                      {descriptionItems.map((item, i) => (\r\n                        <li key={i} className=\"flex items-start gap-3 text-dark-600 dark:text-dark-300\">\r\n                          <span className=\"flex-shrink-0 w-1.5 h-1.5 rounded-full mt-2\" style={{ backgroundColor: iconColor }} />\r\n                          <span className=\"flex-1\">{item}</span>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </>\r\n                )\r\n              )}\r\n            </motion.div>\r\n          )}\r\n\r\n          {/* ğŸŒŸ ì—°ê²°ëœ ìŠ¤í‚¬ ë°°ì§€ (skillIds ê¸°ë°˜) */}\r\n          {linkedSkills.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mt-4\">\r\n              {linkedSkills.map((skill) => (\r\n                <Link\r\n                  key={skill._id}\r\n                  to={`/projects?skillId=${skill._id}`}\r\n                  className=\"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium transition-all hover:opacity-80 hover:ring-2\"\r\n                  style={{\r\n                    backgroundColor: `${skill.color}26`,\r\n                    color: skill.color,\r\n                    '--tw-ring-color': skill.color || '#3B82F6',\r\n                  } as React.CSSProperties}\r\n                  title={`${skill.name} ${t('experience.viewProjects')}`}\r\n                >\r\n                  {skill.name}\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          )}\r\n          \r\n          {/* ğŸ”„ í˜¸í™˜ì„±: ê¸°ì¡´ skills ë¬¸ìì—´ ë°°ì—´ë„ í‘œì‹œ (skillIdsê°€ ì—†ì„ ë•Œë§Œ) */}\r\n          {!linkedSkills.length && exp.skills && exp.skills.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mt-4\">\r\n              {getLocalizedArrayField(currentLang, exp.skills, exp.skillsEn, exp.skillsJa).map((skill, idx) => (\r\n                <span\r\n                  key={`${skill}-${idx}`}\r\n                  className=\"px-3 py-1.5 bg-secondary-100 dark:bg-secondary-900/50 text-secondary-700 dark:text-secondary-300 rounded-lg text-sm font-medium hover:bg-secondary-200 dark:hover:bg-secondary-800/50 transition-colors\"\r\n                >\r\n                  {skill}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExperienceItem;\r\n","import React, { useState } from 'react'\r\nimport { FaSave, FaStar, FaTimes } from 'react-icons/fa'\r\nimport { Book, BookFormData, Skill, SkillCategory } from '../../types'\r\nimport { useSkills } from '../../hooks/useSkills'\r\nimport { useCategories } from '../../hooks/useCategories'\r\nimport LanguageTabs, { AdminLanguage } from '../common/LanguageTabs'\r\n\r\n// í¼ ì»´í¬ë„ŒíŠ¸ì˜ Props íƒ€ì… ì •ì˜\r\ninterface FormProps {\r\n  data: Book | null\r\n  onSave: (data: BookFormData) => Promise<void>\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n  availableCategories?: string[] // ë™ì  ì¹´í…Œê³ ë¦¬ ëª©ë¡\r\n}\r\n\r\nconst BookForm: React.FC<FormProps> = ({ \r\n  data, \r\n  onSave, \r\n  onCancel, \r\n  isSaving = false, \r\n  availableCategories = ['PLC', 'ë°ì´í„°ë¶„ì„', 'ë¡œë´‡ê³µí•™', 'IoT', 'ê¸°íƒ€'] \r\n}) => {\r\n  // ì–¸ì–´ íƒ­ ìƒíƒœ\r\n  const [currentLang, setCurrentLang] = useState<AdminLanguage>('ko')\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n  const { skillCategories, loading: skillsLoading } = useSkills()\r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n  const { data: categories = [], isLoading: categoriesLoading } = useCategories()\r\n  \r\n  // readDate ì´ˆê¸°ê°’ ìˆ˜ì •\r\n  const initialReadDate = data?.readDate && !isNaN(new Date(data.readDate).getTime())\r\n    ? new Date(data.readDate).toISOString().split('T')[0]\r\n    : new Date().toISOString().split('T')[0]\r\n\r\n  // ğŸŒŸ categoryIds ì´ˆê¸°ê°’ ì²˜ë¦¬\r\n  const initialCategoryIds = data?.categoryIds \r\n    ? (data.categoryIds as any[]).map((catIdOrObj: any) => \r\n        typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj._id\r\n      ).filter(Boolean) as string[]\r\n    : []\r\n\r\n  // ğŸŒŸ skillIds ì´ˆê¸°ê°’ ì²˜ë¦¬ (ê°ì²´ ë˜ëŠ” ë¬¸ìì—´ ëª¨ë‘ ì²˜ë¦¬)\r\n  const initialSkillIds = data?.skillIds \r\n    ? (data.skillIds as any[]).map((skillIdOrObj: any) => \r\n        typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj._id\r\n      ).filter(Boolean) as string[]\r\n    : []\r\n\r\n  const [formData, setFormData] = useState<BookFormData>(\r\n    data\r\n      ? { \r\n          title: data.title,\r\n          titleEn: data.titleEn || '',\r\n          titleJa: data.titleJa || '',\r\n          author: data.author,\r\n          authorEn: data.authorEn || '',\r\n          authorJa: data.authorJa || '',\r\n          category: data.category,\r\n          categoryIds: initialCategoryIds,\r\n          coverImage: data.coverImage || '',\r\n          readDate: initialReadDate as string,\r\n          rating: data.rating,\r\n          skillIds: initialSkillIds  // ğŸŒŸ ìŠ¤í‚¬ ID ë¬¸ìì—´ ë°°ì—´ë¡œ ì´ˆê¸°í™”\r\n        } \r\n      : {\r\n          title: '',\r\n          titleEn: '',\r\n          titleJa: '',\r\n          author: '',\r\n          authorEn: '',\r\n          authorJa: '',\r\n          category: availableCategories[0] || 'PLC', // ë™ì  ì¹´í…Œê³ ë¦¬ ì²« ë²ˆì§¸ í•­ëª© ì‚¬ìš©\r\n          categoryIds: [],\r\n          coverImage: '',\r\n          readDate: initialReadDate as string, // initialReadDateë¥¼ ì‚¬ìš©\r\n          rating: 5,\r\n          skillIds: []  // ğŸŒŸ ìŠ¤í‚¬ ID ì´ˆê¸°ê°’\r\n        }\r\n  )\r\n  \r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleCategoryToggle = (categoryId: string) => {\r\n    const currentCategoryIds = formData.categoryIds || []\r\n    const isSelected = currentCategoryIds.includes(categoryId)\r\n    \r\n    const newCategoryIds = isSelected\r\n      ? currentCategoryIds.filter((id: string) => id !== categoryId)\r\n      : [...currentCategoryIds, categoryId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      categoryIds: newCategoryIds \r\n    })\r\n  }\r\n\r\n  // ğŸŒŸ ìŠ¤í‚¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleSkillToggle = (skillId: string) => {\r\n    const currentSkillIds = formData.skillIds || []\r\n    const isSelected = currentSkillIds.includes(skillId)\r\n    \r\n    const newSkillIds = isSelected\r\n      ? currentSkillIds.filter((id: string) => id !== skillId)\r\n      : [...currentSkillIds, skillId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ì¹´í…Œê³ ë¦¬ ì „ì²´ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬\r\n  const handleSkillCategoryToggle = (category: SkillCategory) => {\r\n    const categorySkillIds = (category.skills || []).map(skill => skill._id!).filter(Boolean)\r\n    const currentSkillIds = formData.skillIds || []\r\n    \r\n    const allSelected = categorySkillIds.every((id: string) => currentSkillIds.includes(id))\r\n    \r\n    let newSkillIds: string[]\r\n    if (allSelected) {\r\n      newSkillIds = currentSkillIds.filter((id: string) => !categorySkillIds.includes(id))\r\n    } else {\r\n      const uniqueIds = new Set([...currentSkillIds, ...categorySkillIds])\r\n      newSkillIds = Array.from(uniqueIds)\r\n    }\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n\r\n  // í•„ìˆ˜ í•„ë“œ ê²€ì¦\r\n  const isFormValid = formData.title.trim() !== '' && \r\n                     formData.author.trim() !== '' && \r\n                     formData.category.trim() !== ''\r\n\r\n  const handleFormSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!isFormValid) {\r\n      alert('í•„ìˆ˜ í•„ë“œ(ì œëª©, ì €ì, ì¹´í…Œê³ ë¦¬)ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n    \r\n    console.log('ğŸ“š ì„œì  ì €ì¥ ì‹œì‘:', formData)\r\n    console.log('ğŸ”— ì„ íƒëœ ìŠ¤í‚¬ IDs:', formData.skillIds)\r\n    \r\n    // ğŸŒŸ skillIdsì™€ categoryIdsë¥¼ ë¬¸ìì—´ ë°°ì—´ë¡œ í™•ì‹¤í•˜ê²Œ ë³€í™˜ + ì¤‘ë³µ ì œê±°\r\n    const skillIds = Array.from(new Set(\r\n      (formData.skillIds || []).map((skillIdOrObj: any) => \r\n        typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj?._id\r\n      ).filter(Boolean)\r\n    ))\r\n    \r\n    const categoryIds = Array.from(new Set(\r\n      (formData.categoryIds || []).map((catIdOrObj: any) => \r\n        typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id\r\n      ).filter(Boolean)\r\n    ))\r\n    \r\n    const { title, titleEn, titleJa, author, authorEn, authorJa, category, coverImage, readDate, rating } = formData\r\n    \r\n    const saveData = { \r\n      title,\r\n      titleEn,\r\n      titleJa,\r\n      author,\r\n      authorEn,\r\n      authorJa,\r\n      category, \r\n      coverImage: coverImage || '', \r\n      readDate, \r\n      rating,\r\n      skillIds,  // ğŸŒŸ ë³€í™˜ëœ skillIds\r\n      categoryIds  // ğŸŒŸ ë³€í™˜ëœ categoryIds\r\n    }\r\n    \r\n    console.log('ğŸ“¤ ìµœì¢… ì „ì†¡ ë°ì´í„°:', saveData)\r\n    onSave(saveData)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleFormSubmit} className=\"space-y-4\">\r\n      <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">\r\n        {data ? 'ì„œì  ìˆ˜ì •' : 'ì„œì  ì¶”ê°€'}\r\n      </h3>\r\n      \r\n      {/* ì–¸ì–´ íƒ­ */}\r\n      <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n      \r\n      <div className=\"grid md:grid-cols-2 gap-4\">\r\n        {/* ì œëª© */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì œëª© {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.title}\r\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ì„œì  ì œëª©\"\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleEn || ''}\r\n              onChange={(e) => setFormData({ ...formData, titleEn: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"Book title\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleJa || ''}\r\n              onChange={(e) => setFormData({ ...formData, titleJa: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"æœ¬ã®ã‚¿ã‚¤ãƒˆãƒ«\"\r\n            />\r\n          )}\r\n        </div>\r\n        \r\n        {/* ì €ì */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì €ì {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.author}\r\n              onChange={(e) => setFormData({ ...formData, author: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ì €ì ì´ë¦„\"\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.authorEn || ''}\r\n              onChange={(e) => setFormData({ ...formData, authorEn: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"Author name\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.authorJa || ''}\r\n              onChange={(e) => setFormData({ ...formData, authorJa: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"è‘—è€…å\"\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n            ì¹´í…Œê³ ë¦¬ ì„ íƒ ğŸ“‚ (ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)\r\n          </label>\r\n\r\n          {/* ì„ íƒëœ ì¹´í…Œê³ ë¦¬ íƒœê·¸ í‘œì‹œ */}\r\n          {formData.categoryIds && formData.categoryIds.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n              {formData.categoryIds.map((catId) => {\r\n                const category = categories.find(c => c._id === catId)\r\n                return category ? (\r\n                  <span\r\n                    key={catId}\r\n                    className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm\"\r\n                  >\r\n                    {category.name}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleCategoryToggle(catId)}\r\n                      className=\"hover:bg-blue-700 rounded-full p-0.5\"\r\n                    >\r\n                      <FaTimes className=\"text-xs\" />\r\n                    </button>\r\n                  </span>\r\n                ) : null\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ëª©ë¡ */}\r\n          {categoriesLoading ? (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">ì¹´í…Œê³ ë¦¬ ë¡œë”© ì¤‘...</p>\r\n          ) : categories.length > 0 ? (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n              {categories.map((category) => {\r\n                const isSelected = (formData.categoryIds || []).includes(category._id)\r\n                return (\r\n                  <label\r\n                    key={category._id}\r\n                    className={`flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all ${\r\n                      isSelected\r\n                        ? 'border-primary-600 bg-primary-50 dark:bg-primary-900/20'\r\n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={isSelected}\r\n                      onChange={() => handleCategoryToggle(category._id)}\r\n                      className=\"w-4 h-4\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                      {category.name}\r\n                    </span>\r\n                  </label>\r\n                )\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ì ë©”ë‰´ì˜ \"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬\"ì—ì„œ ì¶”ê°€í•˜ì„¸ìš”.\r\n            </p>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í‰ì \r\n          </label>\r\n          <div className=\"flex items-center gap-2\">\r\n            {/* ì‹œê°ì  ë³„ ì„ íƒ */}\r\n            <div className=\"flex gap-1\">\r\n              {[1, 2, 3, 4, 5].map((star) => (\r\n                <button\r\n                  key={star}\r\n                  type=\"button\"\r\n                  onClick={() => setFormData({ ...formData, rating: star })}\r\n                  className={`text-2xl transition-colors ${\r\n                    star <= formData.rating \r\n                      ? 'text-yellow-500 hover:text-yellow-600' \r\n                      : 'text-gray-300 hover:text-gray-400'\r\n                  }`}\r\n                >\r\n                  <FaStar />\r\n                </button>\r\n              ))}\r\n            </div>\r\n            {/* ìˆ«ì ì…ë ¥ (ë³´ì¡°) */}\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              max=\"5\"\r\n              step=\"0.5\"\r\n              value={formData.rating}\r\n              onChange={(e) => {\r\n                const value = e.target.value\r\n                // ì…ë ¥ê°’ì´ ë¹„ì–´ìˆê±°ë‚˜, ìœ íš¨í•œ ìˆ«ìê°€ ì•„ë‹ˆë©´ ì´ì „ ê°’ ìœ ì§€\r\n                const newRating = value === '' ? 0 : parseFloat(value)\r\n                setFormData({ \r\n                  ...formData, \r\n                  rating: isNaN(newRating) ? formData.rating : Math.max(1, Math.min(5, newRating))\r\n                })\r\n              }}\r\n              className=\"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì½ì€ ë‚ ì§œ\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            value={formData.readDate}\r\n            onChange={(e) => setFormData({ ...formData, readDate: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í‘œì§€ ì´ë¯¸ì§€ URL\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.coverImage}\r\n            onChange={(e) => setFormData({ ...formData, coverImage: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"https://...\"\r\n          />\r\n        </div>\r\n        \r\n        {/* ğŸŒŸ ì„œì ì—ì„œ ë‹¤ë£¨ëŠ” í•µì‹¬ ìŠ¤í‚¬ ì„ íƒ - ì²´í¬ë°•ìŠ¤ UI */}\r\n        <div className=\"md:col-span-2\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              ì´ ì„œì ì—ì„œ ë‹¤ë£¨ëŠ” í•µì‹¬ ìŠ¤í‚¬ ğŸ”—\r\n            </label>\r\n            {formData.skillIds && formData.skillIds.length > 0 && (\r\n              <span className=\"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded\">\r\n                âœ“ {formData.skillIds.length}ê°œ ì„ íƒë¨\r\n              </span>\r\n            )}\r\n          </div>\r\n          \r\n          {skillsLoading ? (\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 py-2\">\r\n              ìŠ¤í‚¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...\r\n            </div>\r\n          ) : skillCategories.length === 0 ? (\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 py-4 text-center border border-gray-300 dark:border-gray-600 rounded-lg\">\r\n              ë“±ë¡ëœ ìŠ¤í‚¬ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ìŠ¤í‚¬ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\r\n            </div>\r\n          ) : (\r\n            <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 max-h-[400px] overflow-y-auto\">\r\n              {skillCategories.map((category: SkillCategory) => {\r\n                const categorySkillIds = (category.skills || []).map(skill => skill._id!).filter(Boolean)\r\n                const currentSkillIds = formData.skillIds || []\r\n                \r\n                const selectedCount = categorySkillIds.filter(id => currentSkillIds.includes(id)).length\r\n                const allSelected = categorySkillIds.length > 0 && selectedCount === categorySkillIds.length\r\n                const someSelected = selectedCount > 0 && selectedCount < categorySkillIds.length\r\n                \r\n                return (\r\n                  <div key={category._id} className=\"mb-4 last:mb-0\">\r\n                    {/* ì¹´í…Œê³ ë¦¬ í—¤ë” (ì „ì²´ ì„ íƒ/í•´ì œ) */}\r\n                    <div \r\n                      className=\"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded\"\r\n                      onClick={() => handleSkillCategoryToggle(category)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={allSelected}\r\n                        ref={el => {\r\n                          if (el) {\r\n                            el.indeterminate = someSelected\r\n                          }\r\n                        }}\r\n                        onChange={() => handleSkillCategoryToggle(category)}\r\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                      />\r\n                      <label \r\n                        className=\"font-semibold text-gray-900 dark:text-white flex-1 cursor-pointer\"\r\n                        style={{ color: category.color || '#3B82F6' }}\r\n                      >\r\n                        {category.title}\r\n                        {selectedCount > 0 && (\r\n                          <span className=\"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400\">\r\n                            ({selectedCount}/{categorySkillIds.length})\r\n                          </span>\r\n                        )}\r\n                      </label>\r\n                    </div>\r\n                    \r\n                    {/* ìŠ¤í‚¬ ëª©ë¡ */}\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6\">\r\n                      {(category.skills || []).map((skill: Skill) => {\r\n                        const currentSkillIds = formData.skillIds || []\r\n                        const isSelected = currentSkillIds.includes(skill._id!)\r\n                        \r\n                        return (\r\n                          <label\r\n                            key={skill._id}\r\n                            className={`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${\r\n                              isSelected \r\n                                ? 'bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700' \r\n                                : 'hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent'\r\n                            }`}\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={isSelected}\r\n                              onChange={() => handleSkillToggle(skill._id!)}\r\n                              className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                            />\r\n                            <span className={`text-sm ${isSelected ? 'font-semibold text-blue-700 dark:text-blue-300' : 'text-gray-700 dark:text-gray-300'}`}>\r\n                              {skill.name}\r\n                            </span>\r\n                          </label>\r\n                        )\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          )}\r\n          \r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            ğŸ’¡ ì´ ì„œì ì—ì„œ ì£¼ìš”í•˜ê²Œ ë‹¤ë£¨ëŠ” ìŠ¤í‚¬ì„ ì„ íƒí•˜ì„¸ìš”. ê°œë³„ í•™ìŠµ ë‚´ìš©ì—ì„œë„ ì¶”ê°€ë¡œ ìŠ¤í‚¬ì„ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex gap-3 pt-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSaving || !isFormValid}\r\n          className={`flex-1 flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 rounded-lg transition-colors ${\r\n            isSaving || !isFormValid ? 'opacity-50 cursor-not-allowed' : ''\r\n          }`}\r\n        >\r\n          {isSaving ? (\r\n            <>\r\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n              ì €ì¥ ì¤‘...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <FaSave /> ì €ì¥\r\n            </>\r\n          )}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 rounded-lg transition-colors\"\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default BookForm\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaSave, FaTimes } from 'react-icons/fa'\r\nimport { Chapter } from '../../types'\r\n\r\ninterface ChapterFormProps {\r\n  chapter?: Chapter | null\r\n  onSave: (data: { title: string; order: number }) => Promise<void>\r\n  onCancel: () => void\r\n  maxOrder?: number\r\n}\r\n\r\nconst ChapterForm: React.FC<ChapterFormProps> = ({\r\n  chapter,\r\n  onSave,\r\n  onCancel,\r\n  maxOrder = 0\r\n}) => {\r\n  const [title, setTitle] = useState('')\r\n  const [order, setOrder] = useState(0)\r\n  const [isSaving, setIsSaving] = useState(false)\r\n\r\n  useEffect(() => {\r\n    if (chapter) {\r\n      setTitle(chapter.title)\r\n      setOrder(chapter.order)\r\n    } else {\r\n      setTitle('')\r\n      setOrder(maxOrder)\r\n    }\r\n  }, [chapter, maxOrder])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!title.trim()) {\r\n      alert('ëª©ì°¨ ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setIsSaving(true)\r\n      await onSave({ title: title.trim(), order })\r\n    } catch (error) {\r\n      console.error('ëª©ì°¨ ì €ì¥ ì‹¤íŒ¨:', error)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n          {chapter ? 'ëª©ì°¨ ìˆ˜ì •' : 'ëª©ì°¨ ì¶”ê°€'}\r\n        </h3>\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n        >\r\n          <FaTimes className=\"text-gray-500 dark:text-gray-400\" />\r\n        </button>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ëª©ì°¨ ì œëª©\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            placeholder=\"ëª©ì°¨ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"order\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ìˆœì„œ\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"order\"\r\n            value={order}\r\n            onChange={(e) => setOrder(parseInt(e.target.value) || 0)}\r\n            min=\"0\"\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex gap-3 pt-4\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSaving || !title.trim()}\r\n            className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n            <FaSave />\r\n            {isSaving ? 'ì €ì¥ ì¤‘...' : (chapter ? 'ìˆ˜ì •' : 'ì¶”ê°€')}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n          >\r\n            ì·¨ì†Œ\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChapterForm\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaSave, FaTimes } from 'react-icons/fa'\r\nimport ReactQuill from 'react-quill'\r\nimport 'react-quill/dist/quill.snow.css'\r\nimport { Learning } from '../../types'\r\n\r\n// ë§ˆí¬ë‹¤ìš´ ë¬¸ë²• ë³€í™˜ í•¨ìˆ˜ (í–¥í›„ ì‚¬ìš©ì„ ìœ„í•´ ìœ ì§€)\r\n// const convertMarkdownToHtml = (text: string): string => {\r\n//   return text\r\n//     .replace(/^### (.*$)/gim, '<h3>$1</h3>')\r\n//     .replace(/^## (.*$)/gim, '<h2>$1</h2>')\r\n//     .replace(/^# (.*$)/gim, '<h1>$1</h1>')\r\n//     .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n//     .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\r\n//     .replace(/```([\\s\\S]*?)```/g, '<pre><code>$1</code></pre>')\r\n//     .replace(/`([^`]+)`/g, '<code>$1</code>')\r\n//     .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\">$1</a>')\r\n//     .replace(/\\n/g, '<br>')\r\n// }\r\n\r\ninterface LearningFormProps {\r\n  learning?: Learning | null\r\n  onSave: (data: { topic: string; content: string }) => Promise<void>\r\n  onCancel: () => void\r\n}\r\n\r\nconst LearningForm: React.FC<LearningFormProps> = ({\r\n  learning,\r\n  onSave,\r\n  onCancel\r\n}) => {\r\n  const [topic, setTopic] = useState('')\r\n  const [content, setContent] = useState('')\r\n  const [isSaving, setIsSaving] = useState(false)\r\n\r\n  // Quill ì—ë””í„° ì„¤ì •\r\n  const quillModules = {\r\n    toolbar: [\r\n      [{ 'header': [1, 2, 3, false] }],\r\n      ['bold', 'italic', 'underline', 'strike'],\r\n      [{ 'list': 'ordered'}, { 'list': 'bullet' }],\r\n      [{ 'indent': '-1'}, { 'indent': '+1' }],\r\n      ['blockquote', 'code-block'],\r\n      [{ 'color': [] }, { 'background': [] }],\r\n      ['link', 'image'],\r\n      ['clean']\r\n    ]\r\n  }\r\n\r\n  const quillFormats = [\r\n    'header', 'bold', 'italic', 'underline', 'strike',\r\n    'list', 'bullet', 'indent',\r\n    'blockquote', 'code-block',\r\n    'color', 'background',\r\n    'link', 'image'\r\n  ]\r\n\r\n  useEffect(() => {\r\n    if (learning) {\r\n      setTopic(learning.topic)\r\n      setContent(learning.content)\r\n    } else {\r\n      setTopic('')\r\n      setContent('')\r\n    }\r\n  }, [learning])\r\n\r\n  // HTML íƒœê·¸ë¥¼ ì œê±°í•˜ê³  ìˆœìˆ˜ í…ìŠ¤íŠ¸ë§Œ ì¶”ì¶œí•˜ëŠ” í•¨ìˆ˜\r\n  const stripHtml = (html: string) => {\r\n    const tmp = document.createElement('div')\r\n    tmp.innerHTML = html\r\n    return tmp.textContent || tmp.innerText || ''\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!topic.trim()) {\r\n      alert('í•™ìŠµ ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    // HTML íƒœê·¸ë¥¼ ì œê±°í•œ ìˆœìˆ˜ í…ìŠ¤íŠ¸ë¡œ ê²€ì¦\r\n    const plainTextContent = stripHtml(content).trim()\r\n    if (!plainTextContent) {\r\n      alert('í•™ìŠµ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setIsSaving(true)\r\n      await onSave({ topic: topic.trim(), content: content.trim() })\r\n    } catch (error) {\r\n      console.error('í•™ìŠµ ë‚´ìš© ì €ì¥ ì‹¤íŒ¨:', error)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n          {learning ? 'í•™ìŠµ ë‚´ìš© ìˆ˜ì •' : 'í•™ìŠµ ë‚´ìš© ì¶”ê°€'}\r\n        </h3>\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n        >\r\n          <FaTimes className=\"text-gray-500 dark:text-gray-400\" />\r\n        </button>\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label htmlFor=\"topic\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í•™ìŠµ ì£¼ì œ\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"topic\"\r\n            value={topic}\r\n            onChange={(e) => setTopic(e.target.value)}\r\n            placeholder=\"í•™ìŠµ ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”\"\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í•™ìŠµ ë‚´ìš©\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              (ë§ˆí¬ë‹¤ìš´ ë¬¸ë²• ì§€ì›: **êµµê²Œ**, *ê¸°ìš¸ì„*, # ì œëª©, - ëª©ë¡)\r\n            </span>\r\n          </label>\r\n          <div className=\"rich-text-editor-container\">\r\n            <ReactQuill\r\n              theme=\"snow\"\r\n              value={content}\r\n              onChange={(value) => {\r\n                console.log('ReactQuill onChange:', value)\r\n                setContent(value)\r\n              }}\r\n              placeholder=\"í•™ìŠµ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”. ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\r\n              modules={quillModules}\r\n              formats={quillFormats}\r\n              className=\"rich-text-editor\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-3 pt-4\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSaving || !topic.trim() || !stripHtml(content).trim()}\r\n            className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2\"\r\n          >\r\n            <FaSave />\r\n            {isSaving ? 'ì €ì¥ ì¤‘...' : (learning ? 'ìˆ˜ì •' : 'ì¶”ê°€')}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n          >\r\n            ì·¨ì†Œ\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LearningForm\r\n","import React, { useState } from 'react'\r\nimport { FaPlus, FaEdit, FaTrash, FaChevronDown, FaChevronRight, FaBook } from 'react-icons/fa'\r\nimport { Chapter, Learning } from '../../types'\r\nimport { formatDate } from '../../utils/dateUtils'\r\n\r\ninterface ChapterLearningListProps {\r\n  chapters: Chapter[]\r\n  onAddChapter: () => void\r\n  onEditChapter: (chapter: Chapter) => void\r\n  onDeleteChapter: (chapter: Chapter) => void\r\n  onAddLearning: (chapterId: string) => void\r\n  onEditLearning: (learning: Learning, chapterId: string) => void\r\n  onDeleteLearning: (learning: Learning, chapterId: string) => void\r\n  isAuthenticated?: boolean\r\n}\r\n\r\nconst ChapterLearningList: React.FC<ChapterLearningListProps> = ({\r\n  chapters,\r\n  onAddChapter,\r\n  onEditChapter,\r\n  onDeleteChapter,\r\n  onAddLearning,\r\n  onEditLearning,\r\n  onDeleteLearning,\r\n  isAuthenticated = true\r\n}) => {\r\n  const [expandedChapters, setExpandedChapters] = useState<Set<string>>(\r\n    new Set(chapters.map(ch => ch._id)) // ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ í¼ì³ì§„ ìƒíƒœ\r\n  )\r\n\r\n  const toggleChapter = (chapterId: string) => {\r\n    setExpandedChapters(prev => {\r\n      const newSet = new Set(prev)\r\n      if (newSet.has(chapterId)) {\r\n        newSet.delete(chapterId)\r\n      } else {\r\n        newSet.add(chapterId)\r\n      }\r\n      return newSet\r\n    })\r\n  }\r\n\r\n  const expandAll = () => {\r\n    setExpandedChapters(new Set(chapters.map(ch => ch._id)))\r\n  }\r\n\r\n  const collapseAll = () => {\r\n    setExpandedChapters(new Set())\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* ğŸŒŸ í—¤ë” */}\r\n      <div className=\"flex items-center justify-between sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4 border-b border-gray-200 dark:border-gray-700\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n            ğŸ“š ëª©ì°¨ë³„ í•™ìŠµ ë‚´ìš©\r\n          </h3>\r\n          {chapters.length > 0 && (\r\n            <div className=\"flex gap-2 text-sm\">\r\n              <button\r\n                onClick={expandAll}\r\n                className=\"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline\"\r\n              >\r\n                ëª¨ë‘ í¼ì¹˜ê¸°\r\n              </button>\r\n              <span className=\"text-gray-400\">|</span>\r\n              <button\r\n                onClick={collapseAll}\r\n                className=\"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline\"\r\n              >\r\n                ëª¨ë‘ ì ‘ê¸°\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {isAuthenticated && (\r\n          <button\r\n            onClick={onAddChapter}\r\n            className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-sm shadow-md\"\r\n          >\r\n            <FaPlus />\r\n            ëª©ì°¨ ì¶”ê°€\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* ğŸŒŸ ëª©ì°¨ ë¦¬ìŠ¤íŠ¸ (ì•„ì½”ë””ì–¸) */}\r\n      {chapters.length > 0 ? (\r\n        <div className=\"space-y-3\">\r\n          {chapters\r\n            .sort((a, b) => a.order - b.order)\r\n            .map((chapter) => {\r\n              const isExpanded = expandedChapters.has(chapter._id)\r\n              const learningCount = chapter.learnings?.length || 0\r\n\r\n              return (\r\n                <div \r\n                  key={chapter._id} \r\n                  className=\"bg-white dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden transition-all hover:shadow-md\"\r\n                >\r\n                  {/* ğŸŒŸ ëª©ì°¨ í—¤ë” (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°/ì ‘ê¸°) */}\r\n                  <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-700\">\r\n                    <div className=\"flex items-center justify-between p-4\">\r\n                      <button\r\n                        onClick={() => toggleChapter(chapter._id)}\r\n                        className=\"flex items-center gap-3 flex-1 text-left hover:opacity-80 transition-opacity\"\r\n                      >\r\n                        <div className=\"flex-shrink-0\">\r\n                          {isExpanded ? (\r\n                            <FaChevronDown className=\"text-blue-600 dark:text-blue-400 w-5 h-5\" />\r\n                          ) : (\r\n                            <FaChevronRight className=\"text-gray-400 w-5 h-5\" />\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-center gap-2 mb-1\">\r\n                            <span className=\"text-sm font-bold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-2 py-0.5 rounded\">\r\n                              Chapter {chapter.order + 1}\r\n                            </span>\r\n                            <h4 className=\"font-semibold text-gray-900 dark:text-white text-lg truncate\">\r\n                              {chapter.title}\r\n                            </h4>\r\n                          </div>\r\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                            ğŸ“ {learningCount}ê°œì˜ í•™ìŠµ ë‚´ìš©\r\n                          </p>\r\n                        </div>\r\n                      </button>\r\n                      \r\n                      {isAuthenticated && (\r\n                        <div className=\"flex gap-2 ml-3 flex-shrink-0\">\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation()\r\n                              onAddLearning(chapter._id)\r\n                            }}\r\n                            className=\"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors\"\r\n                            title=\"í•™ìŠµ ë‚´ìš© ì¶”ê°€\"\r\n                          >\r\n                            <FaPlus className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation()\r\n                              onEditChapter(chapter)\r\n                            }}\r\n                            className=\"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors\"\r\n                            title=\"ëª©ì°¨ ìˆ˜ì •\"\r\n                          >\r\n                            <FaEdit className=\"w-4 h-4\" />\r\n                          </button>\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation()\r\n                              if (confirm(`\"${chapter.title}\" ëª©ì°¨ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\\nê´€ë ¨ í•™ìŠµ ë‚´ìš© ${learningCount}ê°œë„ ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.`)) {\r\n                                onDeleteChapter(chapter)\r\n                              }\r\n                            }}\r\n                            className=\"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors\"\r\n                            title=\"ëª©ì°¨ ì‚­ì œ\"\r\n                          >\r\n                            <FaTrash className=\"w-4 h-4\" />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* ğŸŒŸ ëª©ì°¨ë³„ í•™ìŠµ ë‚´ìš© (ì•„ì½”ë””ì–¸ ì½˜í…ì¸ ) */}\r\n                  {isExpanded && (\r\n                    <div className=\"p-5 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700\">\r\n                      {learningCount > 0 ? (\r\n                        <div className=\"space-y-4\">\r\n                          {(chapter.learnings || [])\r\n                            .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\r\n                            .map((learning, idx) => (\r\n                            <div \r\n                              key={learning._id} \r\n                              className=\"bg-white dark:bg-gray-800 p-5 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-md transition-shadow\"\r\n                            >\r\n                              <div className=\"flex items-start justify-between mb-3\">\r\n                                <div className=\"flex items-center gap-2 flex-1\">\r\n                                  <span className=\"flex-shrink-0 text-xs font-bold text-white bg-blue-600 dark:bg-blue-500 px-2 py-1 rounded-full\">\r\n                                    #{idx + 1}\r\n                                  </span>\r\n                                  <h5 className=\"font-semibold text-gray-900 dark:text-white text-lg\">\r\n                                    {learning.topic}\r\n                                  </h5>\r\n                                </div>\r\n                                {isAuthenticated && (\r\n                                  <div className=\"flex gap-1 flex-shrink-0 ml-2\">\r\n                                    <button\r\n                                      onClick={() => onEditLearning(learning, chapter._id)}\r\n                                      className=\"p-1.5 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors\"\r\n                                      title=\"ìˆ˜ì •\"\r\n                                    >\r\n                                      <FaEdit className=\"w-3.5 h-3.5\" />\r\n                                    </button>\r\n                                    <button\r\n                                      onClick={() => {\r\n                                        if (confirm(`\"${learning.topic}\" í•™ìŠµ ë‚´ìš©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {\r\n                                          onDeleteLearning(learning, chapter._id)\r\n                                        }\r\n                                      }}\r\n                                      className=\"p-1.5 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors\"\r\n                                      title=\"ì‚­ì œ\"\r\n                                    >\r\n                                      <FaTrash className=\"w-3.5 h-3.5\" />\r\n                                    </button>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                              \r\n                              {/* ğŸŒŸ ReactQuillë¡œ ì‘ì„±ëœ HTML ì½˜í…ì¸  ë Œë”ë§ */}\r\n                              <div \r\n                                className=\"prose prose-sm max-w-none dark:prose-invert text-gray-700 dark:text-gray-300\r\n                                  prose-headings:text-gray-900 dark:prose-headings:text-white\r\n                                  prose-p:text-gray-700 dark:prose-p:text-gray-300\r\n                                  prose-code:bg-gray-200 dark:prose-code:bg-gray-700 prose-code:text-red-600 dark:prose-code:text-red-400 prose-code:px-1 prose-code:rounded\r\n                                  prose-pre:bg-gray-900 dark:prose-pre:bg-gray-950 prose-pre:text-gray-100\r\n                                  prose-a:text-blue-600 dark:prose-a:text-blue-400\"\r\n                                dangerouslySetInnerHTML={{ __html: learning.content }}\r\n                              />\r\n                              \r\n                              <div className=\"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400\">\r\n                                <span>ğŸ“… ì‘ì„±ì¼: {formatDate(learning.createdAt)}</span>\r\n                                {learning.updatedAt && learning.updatedAt !== learning.createdAt && (\r\n                                  <span>âœï¸ ìˆ˜ì •ì¼: {formatDate(learning.updatedAt)}</span>\r\n                                )}\r\n                              </div>\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"text-center py-10 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-600\">\r\n                          <FaBook className=\"mx-auto text-3xl mb-3 text-gray-400 opacity-50\" />\r\n                          <p className=\"text-gray-500 dark:text-gray-400 mb-3\">\r\n                            ì´ ëª©ì°¨ì— ì•„ì§ í•™ìŠµ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.\r\n                          </p>\r\n                          {isAuthenticated && (\r\n                            <button\r\n                              onClick={() => onAddLearning(chapter._id)}\r\n                              className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2\"\r\n                            >\r\n                              <FaPlus />\r\n                              ì²« ë²ˆì§¸ í•™ìŠµ ë‚´ìš© ì¶”ê°€í•˜ê¸°\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )\r\n            })}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-16 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600\">\r\n          <FaBook className=\"mx-auto text-5xl mb-4 text-gray-400\" />\r\n          <p className=\"text-lg text-gray-600 dark:text-gray-400 mb-2 font-medium\">\r\n            ì•„ì§ ëª©ì°¨ê°€ ì—†ìŠµë‹ˆë‹¤.\r\n          </p>\r\n          <p className=\"text-sm text-gray-500 dark:text-gray-500 mb-6\">\r\n            ë¨¼ì € ëª©ì°¨ë¥¼ ì¶”ê°€í•˜ê³ , ê° ëª©ì°¨ì— í•™ìŠµ ë‚´ìš©ì„ ê¸°ë¡í•˜ì„¸ìš”.\r\n          </p>\r\n          {isAuthenticated && (\r\n            <button\r\n              onClick={onAddChapter}\r\n              className=\"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center gap-2 shadow-md\"\r\n            >\r\n              <FaPlus />\r\n              ì²« ë²ˆì§¸ ëª©ì°¨ ì¶”ê°€í•˜ê¸°\r\n            </button>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChapterLearningList\r\n","import React, { useEffect } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { FaCheck, FaExclamationTriangle, FaInfo, FaTimes } from 'react-icons/fa'\r\nimport { Toast as ToastType } from '../../hooks/useToast'\r\n\r\ninterface ToastProps {\r\n  toast: ToastType\r\n  onClose: (id: string) => void\r\n}\r\n\r\nconst Toast: React.FC<ToastProps> = ({ toast, onClose }) => {\r\n  const getIcon = () => {\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return <FaCheck className=\"text-green-500\" />\r\n      case 'error':\r\n        return <FaExclamationTriangle className=\"text-red-500\" />\r\n      case 'warning':\r\n        return <FaExclamationTriangle className=\"text-yellow-500\" />\r\n      case 'info':\r\n        return <FaInfo className=\"text-blue-500\" />\r\n      default:\r\n        return <FaInfo className=\"text-blue-500\" />\r\n    }\r\n  }\r\n\r\n  const getBgColor = () => {\r\n    switch (toast.type) {\r\n      case 'success':\r\n        return 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\r\n      case 'error':\r\n        return 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800'\r\n      case 'warning':\r\n        return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800'\r\n      case 'info':\r\n        return 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800'\r\n      default:\r\n        return 'bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: -50, scale: 0.95 }}\r\n      animate={{ opacity: 1, y: 0, scale: 1 }}\r\n      exit={{ opacity: 0, y: -20, scale: 0.95 }}\r\n      transition={{ duration: 0.2 }}\r\n      className={`\r\n        relative flex items-start gap-3 p-4 rounded-lg border shadow-lg\r\n        ${getBgColor()}\r\n        max-w-md w-full\r\n      `}\r\n    >\r\n      <div className=\"flex-shrink-0 mt-0.5\">\r\n        {getIcon()}\r\n      </div>\r\n      \r\n      <div className=\"flex-1 min-w-0\">\r\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n          {toast.title}\r\n        </h4>\r\n        {toast.message && (\r\n          <p className=\"mt-1 text-sm text-gray-600 dark:text-gray-300\">\r\n            {toast.message}\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <button\r\n        onClick={() => onClose(toast.id)}\r\n        className=\"flex-shrink-0 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors\"\r\n      >\r\n        <FaTimes className=\"w-3 h-3 text-gray-400\" />\r\n      </button>\r\n    </motion.div>\r\n  )\r\n}\r\n\r\ninterface ToastContainerProps {\r\n  toasts: ToastType[]\r\n  onClose: (id: string) => void\r\n}\r\n\r\nconst ToastContainer: React.FC<ToastContainerProps> = ({ toasts, onClose }) => {\r\n  return (\r\n    <div className=\"fixed top-4 right-4 z-50 space-y-2\">\r\n      <AnimatePresence>\r\n        {toasts.map((toast) => (\r\n          <Toast\r\n            key={toast.id}\r\n            toast={toast}\r\n            onClose={onClose}\r\n          />\r\n        ))}\r\n      </AnimatePresence>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ToastContainer\r\nexport { Toast }\r\n","import React, { useState, useMemo } from 'react'\r\nimport { FaSave, FaStar, FaTimes } from 'react-icons/fa'\r\nimport { VideoLearning, VideoLearningFormData, Skill, SkillCategory } from '../../types'\r\nimport { extractYouTubeId, getYouTubeThumbnail } from '../../utils/videoUtils'\r\nimport { useSkills } from '../../hooks/useSkills'\r\nimport { useCategories } from '../../hooks/useCategories'\r\n\r\ninterface FormProps {\r\n  data?: VideoLearning\r\n  onSave: (data: VideoLearningFormData) => void\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n  availableCategories?: string[]\r\n}\r\n\r\nconst VideoLearningForm: React.FC<FormProps> = ({ \r\n  data, \r\n  onSave, \r\n  onCancel, \r\n  isSaving = false, \r\n  availableCategories = ['PLC', 'ë°ì´í„°ë¶„ì„', 'ë¡œë´‡ê³µí•™', 'IoT', 'ê¸°íƒ€'] \r\n}) => {\r\n  // ğŸŒŸ ìŠ¤í‚¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n  const { skillCategories, loading: skillsLoading } = useSkills()\r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n  const { data: categories = [], isLoading: categoriesLoading } = useCategories()\r\n\r\n  // watchDate ì´ˆê¸°ê°’ ìˆ˜ì •\r\n  const initialWatchDate = data?.watchDate && !isNaN(new Date(data.watchDate).getTime())\r\n    ? new Date(data.watchDate).toISOString().split('T')[0]\r\n    : new Date().toISOString().split('T')[0]\r\n\r\n  // ğŸŒŸ í¼ ìƒíƒœ ê´€ë¦¬ (ë‚´ë¶€ì—ì„œëŠ” videoUrlë¡œ ê´€ë¦¬, ì €ì¥ ì‹œ videoIdë¡œ ë³€í™˜)\r\n  const [videoUrlInput, setVideoUrlInput] = useState<string>(() => {\r\n    // videoIdê°€ ìˆìœ¼ë©´ URLë¡œ ë³€í™˜, videoUrlì´ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš© (í˜¸í™˜ì„±)\r\n    if (data?.videoId) return `https://www.youtube.com/watch?v=${data.videoId}`\r\n    if ((data as any)?.videoUrl) return (data as any).videoUrl\r\n    return ''\r\n  })\r\n\r\n  // ğŸŒŸ skillIds ì´ˆê¸°ê°’ ì²˜ë¦¬ (populateëœ ê°ì²´ ë°°ì—´ì—ì„œ _idë§Œ ì¶”ì¶œ)\r\n  const initialSkillIds = data?.skillIds \r\n    ? (data.skillIds as any[]).map((skillIdOrObj: any) => \r\n        typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj._id\r\n      ).filter(Boolean) as string[]\r\n    : []\r\n\r\n  // ğŸŒŸ categoryIds ì´ˆê¸°ê°’ ì²˜ë¦¬\r\n  const initialCategoryIds = data?.categoryIds \r\n    ? (data.categoryIds as any[]).map((catIdOrObj: any) => \r\n        typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj._id\r\n      ).filter(Boolean) as string[]\r\n    : []\r\n\r\n  console.log('ğŸ¬ VideoLearningForm ì´ˆê¸°í™”:', {\r\n    hasData: !!data,\r\n    rawSkillIds: data?.skillIds,\r\n    extractedSkillIds: initialSkillIds,\r\n    rawCategoryIds: data?.categoryIds,\r\n    extractedCategoryIds: initialCategoryIds,\r\n  })\r\n\r\n  const [formData, setFormData] = useState<Omit<VideoLearningFormData, 'videoId'>>(\r\n    data\r\n      ? { \r\n          title: data.title,\r\n          category: data.category,\r\n          categoryIds: initialCategoryIds,\r\n          watchDate: initialWatchDate as string,\r\n          rating: data.rating || 3,\r\n          purpose: data.purpose || '',\r\n          keyTakeaways: data.keyTakeaways || '',\r\n          application: data.application || '',\r\n          skillIds: initialSkillIds,\r\n          order: data.order || 0,\r\n        } \r\n      : {\r\n          title: '',\r\n          category: availableCategories[0] || 'PLC',\r\n          categoryIds: [],\r\n          watchDate: initialWatchDate as string,\r\n          rating: 3,\r\n          purpose: '',\r\n          keyTakeaways: '',\r\n          application: '',\r\n          skillIds: [],\r\n          order: 0,\r\n        }\r\n  )\r\n\r\n  // ğŸŒŸ ìœ íŠœë¸Œ ì˜ìƒ ID ì¶”ì¶œ (ì‹¤ì‹œê°„) + ë””ë²„ê¹… ë¡œê·¸\r\n  const videoId = useMemo(() => {\r\n    const id = extractYouTubeId(videoUrlInput)\r\n    console.log('ğŸ¬ VideoForm: URL íŒŒì‹± ê²°ê³¼ -', { inputUrl: videoUrlInput, extractedId: id })\r\n    return id\r\n  }, [videoUrlInput])\r\n  \r\n  const thumbnailUrl = useMemo(() => videoId ? getYouTubeThumbnail(videoId) : null, [videoId])\r\n  const isValidUrl = useMemo(() => videoId !== null, [videoId])\r\n\r\n\r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleCategoryToggle = (categoryId: string) => {\r\n    const currentCategoryIds = formData.categoryIds || []\r\n    const isSelected = currentCategoryIds.includes(categoryId)\r\n    \r\n    const newCategoryIds = isSelected\r\n      ? currentCategoryIds.filter((id: string) => id !== categoryId)\r\n      : [...currentCategoryIds, categoryId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      categoryIds: newCategoryIds \r\n    })\r\n  }\r\n\r\n  // ğŸŒŸ ìŠ¤í‚¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleSkillToggle = (skillId: string) => {\r\n    const currentSkillIds = formData.skillIds || []\r\n    const isSelected = currentSkillIds.includes(skillId)\r\n    \r\n    const newSkillIds = isSelected\r\n      ? currentSkillIds.filter((id: string) => id !== skillId)\r\n      : [...currentSkillIds, skillId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ì¹´í…Œê³ ë¦¬ ì „ì²´ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬\r\n  const handleSkillCategoryToggle = (category: SkillCategory) => {\r\n    const categorySkillIds = (category.skills || []).map((skill: Skill) => skill._id!).filter(Boolean)\r\n    const currentSkillIds = formData.skillIds || []\r\n    \r\n    // ì¹´í…Œê³ ë¦¬ì˜ ëª¨ë“  ìŠ¤í‚¬ì´ ì„ íƒë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\r\n    const allSelected = categorySkillIds.every((id: string) => currentSkillIds.includes(id))\r\n    \r\n    let newSkillIds: string[]\r\n    if (allSelected) {\r\n      // ëª¨ë‘ ì„ íƒë˜ì–´ ìˆìœ¼ë©´ ì „ì²´ í•´ì œ\r\n      newSkillIds = currentSkillIds.filter((id: string) => !categorySkillIds.includes(id))\r\n    } else {\r\n      // ì¼ë¶€ë§Œ ì„ íƒë˜ì–´ ìˆê±°ë‚˜ ì—†ìœ¼ë©´ ì „ì²´ ì„ íƒ\r\n      const uniqueIds = new Set([...currentSkillIds, ...categorySkillIds])\r\n      newSkillIds = Array.from(uniqueIds)\r\n    }\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n\r\n  const handleFormSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!formData.title.trim() || !videoUrlInput.trim()) {\r\n      alert('í•„ìˆ˜ í•„ë“œ(ì œëª©, ì˜ìƒ URL)ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    if (!isValidUrl || !videoId) {\r\n      alert('âŒ ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    console.log('ğŸ“¹ ì˜ìƒ í•™ìŠµ ì €ì¥ ì‹œì‘:', formData)\r\n    console.log('ğŸ¬ ì¶”ì¶œëœ ì˜ìƒ ID:', videoId)\r\n    console.log('ğŸ”— ì„ íƒëœ ìŠ¤í‚¬ IDs:', formData.skillIds)\r\n    \r\n    const { title, category, watchDate, rating, purpose, keyTakeaways, application, skillIds, order } = formData\r\n    \r\n    // ğŸŒŸ videoIdë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥\r\n    onSave({ \r\n      title, \r\n      videoId: videoId!,  // ì¶”ì¶œëœ ì˜ìƒ ID\r\n      category, \r\n      watchDate, \r\n      ...(rating !== undefined && { rating }),\r\n      ...(purpose && { purpose }),\r\n      ...(keyTakeaways && { keyTakeaways }),\r\n      ...(application && { application }),\r\n      skillIds: skillIds || [],\r\n      order: order || 0,\r\n    })\r\n  }\r\n\r\n  // í¼ ìœ íš¨ì„± ê²€ì‚¬\r\n  const isFormValid = formData.title.trim() && videoUrlInput.trim() && isValidUrl\r\n\r\n  // ğŸŒŸ ë³„ì  ë Œë”ë§ (í´ë¦­ ê°€ëŠ¥)\r\n  const renderRatingStars = () => {\r\n    return Array.from({ length: 5 }, (_, i) => {\r\n      const starValue = i + 1\r\n      return (\r\n        <button\r\n          key={i}\r\n          type=\"button\"\r\n          onClick={() => setFormData({ ...formData, rating: starValue })}\r\n          className={`text-3xl transition-colors ${\r\n            starValue <= (formData.rating || 0)\r\n              ? 'text-yellow-500 hover:text-yellow-600'\r\n              : 'text-gray-300 dark:text-gray-600 hover:text-gray-400'\r\n          }`}\r\n        >\r\n          <FaStar />\r\n        </button>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleFormSubmit} className=\"space-y-6\">\r\n      {/* ê¸°ë³¸ ì •ë³´ */}\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì œëª© <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.title}\r\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"ì˜ìƒ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì˜ìƒ URL <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={videoUrlInput}\r\n            onChange={(e) => setVideoUrlInput(e.target.value)}\r\n            className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${\r\n              videoUrlInput && !isValidUrl\r\n                ? 'border-red-500'\r\n                : 'border-gray-300 dark:border-gray-600'\r\n            }`}\r\n            placeholder=\"https://www.youtube.com/watch?v=...\"\r\n            required\r\n          />\r\n          {videoUrlInput && !isValidUrl && (\r\n            <p className=\"text-red-500 text-sm mt-1\">ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>\r\n          )}\r\n          {videoId && (\r\n            <p className=\"text-green-600 text-sm mt-1\">âœ… ì˜ìƒ ID: <code className=\"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">{videoId}</code></p>\r\n          )}\r\n          {/* ğŸŒŸ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° */}\r\n          {thumbnailUrl && isValidUrl && (\r\n            <div className=\"mt-3\">\r\n              <img \r\n                src={thumbnailUrl} \r\n                alt=\"ì˜ìƒ ì¸ë„¤ì¼\" \r\n                className=\"w-full max-w-md rounded-lg shadow-md\"\r\n                onError={(e) => {\r\n                  // maxresdefaultê°€ ì—†ìœ¼ë©´ hqdefaultë¡œ í´ë°±\r\n                  const target = e.target as HTMLImageElement\r\n                  if (target.src.includes('maxresdefault')) {\r\n                    target.src = getYouTubeThumbnail(videoId!, 'hqdefault')\r\n                  }\r\n                }}\r\n              />\r\n              <p className=\"text-sm text-green-600 dark:text-green-400 mt-2\">âœ“ ìœ íš¨í•œ ìœ íŠœë¸Œ URL</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n            ì¹´í…Œê³ ë¦¬ ì„ íƒ ğŸ“‚ (ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)\r\n          </label>\r\n\r\n          {/* ì„ íƒëœ ì¹´í…Œê³ ë¦¬ íƒœê·¸ í‘œì‹œ */}\r\n          {formData.categoryIds && formData.categoryIds.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n              {formData.categoryIds.map((catId) => {\r\n                const category = categories.find(c => c._id === catId)\r\n                return category ? (\r\n                  <span\r\n                    key={catId}\r\n                    className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm\"\r\n                  >\r\n                    {category.name}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleCategoryToggle(catId)}\r\n                      className=\"hover:bg-blue-700 rounded-full p-0.5\"\r\n                    >\r\n                      <FaTimes className=\"text-xs\" />\r\n                    </button>\r\n                  </span>\r\n                ) : null\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ëª©ë¡ */}\r\n          {categoriesLoading ? (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">ì¹´í…Œê³ ë¦¬ ë¡œë”© ì¤‘...</p>\r\n          ) : categories.length > 0 ? (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n              {categories.map((category) => {\r\n                const isSelected = (formData.categoryIds || []).includes(category._id)\r\n                return (\r\n                  <label\r\n                    key={category._id}\r\n                    className={`flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all ${\r\n                      isSelected\r\n                        ? 'border-primary-600 bg-primary-50 dark:bg-primary-900/20'\r\n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={isSelected}\r\n                      onChange={() => handleCategoryToggle(category._id)}\r\n                      className=\"w-4 h-4\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                      {category.name}\r\n                    </span>\r\n                  </label>\r\n                )\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ì ë©”ë‰´ì˜ \"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬\"ì—ì„œ ì¶”ê°€í•˜ì„¸ìš”.\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì‹œì²­ ë‚ ì§œ\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            value={formData.watchDate}\r\n            onChange={(e) => setFormData({ ...formData, watchDate: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì´í•´ë„ í‰ì \r\n          </label>\r\n          <div className=\"flex items-center gap-2\">\r\n            {renderRatingStars()}\r\n            <span className=\"ml-3 text-gray-600 dark:text-gray-400\">{formData.rating}/5</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ìƒì„¸ ì •ë³´ */}\r\n      <div className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì‹œì²­ ëª©ì \r\n          </label>\r\n          <textarea\r\n            value={formData.purpose}\r\n            onChange={(e) => setFormData({ ...formData, purpose: e.target.value })}\r\n            className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical\"\r\n            rows={3}\r\n            placeholder=\"ì´ ì˜ìƒì„ ì™œ ì‹œì²­í–ˆëŠ”ì§€, ì–´ë–¤ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œì¸ì§€ ì‘ì„±í•˜ì„¸ìš”...\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">ìµœëŒ€ 1000ì</p>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í•µì‹¬ ë°°ì›€ (ë§ˆí¬ë‹¤ìš´ ì§€ì›)\r\n          </label>\r\n          <textarea\r\n            value={formData.keyTakeaways}\r\n            onChange={(e) => setFormData({ ...formData, keyTakeaways: e.target.value })}\r\n            className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm\"\r\n            rows={8}\r\n            placeholder=\"ì˜ìƒì—ì„œ ì–»ì€ í•µì‹¬ ì§€ì‹ 3-5ê°€ì§€ë¥¼ ì •ë¦¬í•˜ì„¸ìš”...&#10;&#10;ì˜ˆì‹œ:&#10;- [2:30] React Queryì˜ staleTimeê³¼ cacheTime ì°¨ì´&#10;- [5:15] Optimistic Updates êµ¬í˜„ ë°©ë²•&#10;- [8:45] Query Invalidation ì „ëµ\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n            ìµœëŒ€ 5000ì | íƒ€ì„ìŠ¤íƒ¬í”„ í˜•ì‹: [MM:SS] ë˜ëŠ” [H:MM:SS]\r\n          </p>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì ìš© ê³„íš (ë§ˆí¬ë‹¤ìš´ ì§€ì›)\r\n          </label>\r\n          <textarea\r\n            value={formData.application}\r\n            onChange={(e) => setFormData({ ...formData, application: e.target.value })}\r\n            className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm\"\r\n            rows={5}\r\n            placeholder=\"ì´ ì§€ì‹ì„ ì–´ë–»ê²Œ í™œìš©í•  ê³„íšì¸ì§€, ë˜ëŠ” ì´ë¯¸ ì ìš©í•œ ê²½í—˜ì„ ì‘ì„±í•˜ì„¸ìš”...\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">ìµœëŒ€ 3000ì</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ğŸŒŸ ìŠ¤í‚¬ ì—°ê²° (ì²´í¬ë°•ìŠ¤ UI) */}\r\n      <div className=\"md:col-span-2\">\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ê´€ë ¨ ê¸°ìˆ  ì—°ë™ ğŸ”—\r\n        </label>\r\n        {skillsLoading ? (\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400 py-2\">\r\n            ìŠ¤í‚¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* ì„ íƒëœ ìŠ¤í‚¬ ê°œìˆ˜ í‘œì‹œ */}\r\n            {(formData.skillIds || []).length > 0 && (\r\n              <div className=\"mb-3 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n                <span className=\"text-sm text-blue-700 dark:text-blue-300 font-medium\">\r\n                  âœ“ {(formData.skillIds || []).length}ê°œ ì„ íƒë¨\r\n                </span>\r\n              </div>\r\n            )}\r\n            \r\n            {/* ì¹´í…Œê³ ë¦¬ë³„ ìŠ¤í‚¬ ì²´í¬ë°•ìŠ¤ */}\r\n            <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 max-h-[400px] overflow-y-auto bg-gray-50 dark:bg-gray-800/50\">\r\n              {skillCategories.map((category) => {\r\n                const categorySkills = category.skills || []\r\n                const categorySkillIds = categorySkills.map((s: Skill) => s._id!).filter(Boolean)\r\n                const selectedInCategory = categorySkillIds.filter((id: string) => \r\n                  (formData.skillIds || []).includes(id)\r\n                )\r\n                const allSelected = categorySkillIds.length > 0 && selectedInCategory.length === categorySkillIds.length\r\n                const someSelected = selectedInCategory.length > 0 && !allSelected\r\n\r\n                return (\r\n                  <div key={category._id} className=\"mb-4 last:mb-0\">\r\n                    {/* ì¹´í…Œê³ ë¦¬ í—¤ë” */}\r\n                    <div \r\n                      onClick={() => handleSkillCategoryToggle(category)}\r\n                      className=\"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors mb-2\"\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={allSelected}\r\n                        ref={(input) => {\r\n                          if (input) input.indeterminate = someSelected\r\n                        }}\r\n                        onChange={() => {}}\r\n                        className=\"w-5 h-5 text-primary-600 rounded focus:ring-2 focus:ring-primary-500\"\r\n                      />\r\n                      <label \r\n                        className=\"font-bold text-base cursor-pointer flex-1\"\r\n                        style={{ color: category.color || '#3B82F6' }}\r\n                      >\r\n                        {category.title} ({selectedInCategory.length}/{categorySkills.length})\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* ê°œë³„ ìŠ¤í‚¬ ì²´í¬ë°•ìŠ¤ */}\r\n                    <div className=\"ml-8 space-y-2\">\r\n                      {categorySkills.map((skill: Skill) => {\r\n                        const isSelected = (formData.skillIds || []).includes(skill._id!)\r\n                        return (\r\n                          <div\r\n                            key={skill._id}\r\n                            onClick={() => handleSkillToggle(skill._id!)}\r\n                            className={`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-all ${\r\n                              isSelected\r\n                                ? 'bg-blue-100 dark:bg-blue-900/30 font-medium'\r\n                                : 'hover:bg-gray-100 dark:hover:bg-gray-600'\r\n                            }`}\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={isSelected}\r\n                              onChange={() => {}}\r\n                              className=\"w-4 h-4 text-primary-600 rounded focus:ring-2 focus:ring-primary-500\"\r\n                            />\r\n                            <label \r\n                              className=\"cursor-pointer flex-1 text-sm\"\r\n                              style={{ color: isSelected ? skill.color : undefined }}\r\n                            >\r\n                              {skill.name}\r\n                            </label>\r\n                          </div>\r\n                        )\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* ìˆœì„œ */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ìˆœì„œ (ë‚®ì„ìˆ˜ë¡ ë¨¼ì € í‘œì‹œ)\r\n        </label>\r\n        <input\r\n          type=\"number\"\r\n          value={formData.order}\r\n          onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) || 0 })}\r\n          className=\"w-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          min=\"0\"\r\n        />\r\n      </div>\r\n\r\n      {/* ë²„íŠ¼ */}\r\n      <div className=\"flex gap-4 pt-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSaving || !isFormValid || !isValidUrl}\r\n          className=\"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          <FaSave /> {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium\"\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default VideoLearningForm\r\n\r\n","import React, { useState, useMemo } from 'react'\r\nimport { FaSave, FaStar, FaTimes } from 'react-icons/fa'\r\nimport { VideoPlaylist, VideoPlaylistFormData } from '../../types'\r\nimport { formatCategoryDisplayName } from '../../utils/categoryUtils'\r\nimport { extractYouTubePlaylistId, getYouTubePlaylistThumbnail } from '../../utils/videoUtils'\r\nimport { useSkills } from '../../hooks/useSkills'\r\nimport { useCategories } from '../../hooks/useCategories'\r\n\r\ninterface FormProps {\r\n  data?: VideoPlaylist\r\n  onSave: (data: VideoPlaylistFormData) => void\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n  availableCategories?: string[]\r\n}\r\n\r\nconst VideoPlaylistForm: React.FC<FormProps> = ({ \r\n  data, \r\n  onSave, \r\n  onCancel, \r\n  isSaving = false, \r\n  availableCategories = ['PLC', 'ë°ì´í„°ë¶„ì„', 'ë¡œë´‡ê³µí•™', 'IoT', 'ê¸°íƒ€'] \r\n}) => {\r\n  const { skillCategories, loading: skillsLoading } = useSkills()\r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n  const { data: categories = [], isLoading: categoriesLoading } = useCategories()\r\n\r\n  const initialWatchDate = data?.watchDate && !isNaN(new Date(data.watchDate).getTime())\r\n    ? new Date(data.watchDate).toISOString().split('T')[0]\r\n    : new Date().toISOString().split('T')[0]\r\n\r\n  const [playlistUrlInput, setPlaylistUrlInput] = useState<string>(() => {\r\n    if (data?.playlistId) return `https://www.youtube.com/playlist?list=${data.playlistId}`\r\n    return ''\r\n  })\r\n\r\n  // ğŸŒŸ categoryIds ì´ˆê¸°ê°’ ì²˜ë¦¬\r\n  const initialCategoryIds = data?.categoryIds \r\n    ? (data.categoryIds as any[]).map((catIdOrObj: any) => \r\n        typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj._id\r\n      ).filter(Boolean) as string[]\r\n    : []\r\n\r\n  const [formData, setFormData] = useState<Omit<VideoPlaylistFormData, 'playlistId'>>(\r\n    data\r\n      ? { \r\n          title: data.title,\r\n          category: data.category,\r\n          categoryIds: initialCategoryIds,\r\n          watchDate: initialWatchDate as string,\r\n          rating: data.rating || 3,\r\n          purpose: data.purpose || '',\r\n          application: data.application || '',\r\n          skillIds: (data.skillIds || []).map((skillIdOrObj: any) => \r\n            typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj._id\r\n          ).filter(Boolean) as string[],\r\n          order: data.order || 0,\r\n        } \r\n      : {\r\n          title: '',\r\n          category: availableCategories[0] || 'PLC',\r\n          categoryIds: [],\r\n          watchDate: initialWatchDate as string,\r\n          rating: 3,\r\n          purpose: '',\r\n          application: '',\r\n          skillIds: [],\r\n          order: 0,\r\n        }\r\n  )\r\n\r\n  const playlistId = useMemo(() => {\r\n    const id = extractYouTubePlaylistId(playlistUrlInput)\r\n    console.log('ğŸ¬ PlaylistForm: URL íŒŒì‹± ê²°ê³¼ -', { inputUrl: playlistUrlInput, extractedId: id })\r\n    return id\r\n  }, [playlistUrlInput])\r\n  \r\n  const thumbnailUrl = useMemo(() => playlistId ? getYouTubePlaylistThumbnail(playlistId) : null, [playlistId])\r\n  const isValidUrl = useMemo(() => playlistId !== null, [playlistId])\r\n\r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleCategoryToggle = (categoryId: string) => {\r\n    const currentCategoryIds = formData.categoryIds || []\r\n    const isSelected = currentCategoryIds.includes(categoryId)\r\n    \r\n    const newCategoryIds = isSelected\r\n      ? currentCategoryIds.filter((id: string) => id !== categoryId)\r\n      : [...currentCategoryIds, categoryId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      categoryIds: newCategoryIds \r\n    })\r\n  }\r\n\r\n  const handleSkillToggle = (skillId: string) => {\r\n    const currentSkillIds = formData.skillIds || []\r\n    const isSelected = currentSkillIds.includes(skillId)\r\n    \r\n    const newSkillIds = isSelected\r\n      ? currentSkillIds.filter((id: string) => id !== skillId)\r\n      : [...currentSkillIds, skillId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n\r\n  const handleFormSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!formData.title.trim() || !playlistUrlInput.trim()) {\r\n      alert('í•„ìˆ˜ í•„ë“œ(ì œëª©, ì¬ìƒ ëª©ë¡ URL)ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    if (!isValidUrl || !playlistId) {\r\n      alert('âŒ ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n    \r\n    const { title, category, categoryIds, watchDate, rating, purpose, application, skillIds, order } = formData\r\n    \r\n    const saveData = { \r\n      title, \r\n      playlistId: playlistId!,\r\n      category, \r\n      categoryIds: categoryIds || [],  // ğŸŒŸ ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬ ì¶”ê°€\r\n      watchDate, \r\n      ...(rating !== undefined && { rating }),\r\n      ...(purpose && { purpose }),\r\n      ...(application && { application }),\r\n      skillIds: skillIds || [],\r\n      order: order || 0,\r\n    }\r\n    \r\n    console.log('ğŸ“ VideoPlaylistForm: ì €ì¥ ë°ì´í„° ì „ì†¡', saveData)\r\n    onSave(saveData)\r\n  }\r\n\r\n  const isFormValid = formData.title.trim() && playlistUrlInput.trim() && isValidUrl\r\n\r\n  const renderRatingStars = () => {\r\n    return Array.from({ length: 5 }, (_, i) => {\r\n      const starValue = i + 1\r\n      return (\r\n        <button\r\n          key={i}\r\n          type=\"button\"\r\n          onClick={() => setFormData({ ...formData, rating: starValue })}\r\n          className={`text-3xl transition-colors ${\r\n            starValue <= (formData.rating || 0)\r\n              ? 'text-yellow-500 hover:text-yellow-600'\r\n              : 'text-gray-300 dark:text-gray-600 hover:text-gray-400'\r\n          }`}\r\n        >\r\n          <FaStar />\r\n        </button>\r\n      )\r\n    })\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleFormSubmit} className=\"space-y-6\">\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì œëª© <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.title}\r\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"ì¬ìƒ ëª©ë¡ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì¬ìƒ ëª©ë¡ URL <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={playlistUrlInput}\r\n            onChange={(e) => setPlaylistUrlInput(e.target.value)}\r\n            className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${\r\n              playlistUrlInput && !isValidUrl\r\n                ? 'border-red-500'\r\n                : 'border-gray-300 dark:border-gray-600'\r\n            }`}\r\n            placeholder=\"https://www.youtube.com/playlist?list=...\"\r\n            required\r\n          />\r\n          {playlistUrlInput && !isValidUrl && (\r\n            <p className=\"text-red-500 text-sm mt-1\">ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>\r\n          )}\r\n          {playlistId && (\r\n            <p className=\"text-green-600 text-sm mt-1\">âœ… ì¬ìƒ ëª©ë¡ ID: <code className=\"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">{playlistId}</code></p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n            ì¹´í…Œê³ ë¦¬ ì„ íƒ ğŸ“‚ (ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)\r\n          </label>\r\n\r\n          {/* ì„ íƒëœ ì¹´í…Œê³ ë¦¬ íƒœê·¸ í‘œì‹œ */}\r\n          {formData.categoryIds && formData.categoryIds.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n              {formData.categoryIds.map((catId) => {\r\n                const category = categories.find(c => c._id === catId)\r\n                return category ? (\r\n                  <span\r\n                    key={catId}\r\n                    className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm\"\r\n                  >\r\n                    {category.name}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleCategoryToggle(catId)}\r\n                      className=\"hover:bg-blue-700 rounded-full p-0.5\"\r\n                    >\r\n                      <FaTimes className=\"text-xs\" />\r\n                    </button>\r\n                  </span>\r\n                ) : null\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ëª©ë¡ */}\r\n          {categoriesLoading ? (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">ì¹´í…Œê³ ë¦¬ ë¡œë”© ì¤‘...</p>\r\n          ) : categories.length > 0 ? (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n              {categories.map((category) => {\r\n                const isSelected = (formData.categoryIds || []).includes(category._id)\r\n                return (\r\n                  <label\r\n                    key={category._id}\r\n                    className={`flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all ${\r\n                      isSelected\r\n                        ? 'border-primary-600 bg-primary-50 dark:bg-primary-900/20'\r\n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={isSelected}\r\n                      onChange={() => handleCategoryToggle(category._id)}\r\n                      className=\"w-4 h-4\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                      {category.name}\r\n                    </span>\r\n                  </label>\r\n                )\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ì ë©”ë‰´ì˜ \"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬\"ì—ì„œ ì¶”ê°€í•˜ì„¸ìš”.\r\n            </p>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì‹œì²­ ë‚ ì§œ\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            value={formData.watchDate}\r\n            onChange={(e) => setFormData({ ...formData, watchDate: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í‰ì \r\n          </label>\r\n          <div className=\"flex items-center gap-2\">\r\n            {renderRatingStars()}\r\n            <span className=\"ml-3 text-gray-600 dark:text-gray-400\">{formData.rating}/5</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì‹œì²­ ëª©ì \r\n          </label>\r\n          <textarea\r\n            value={formData.purpose}\r\n            onChange={(e) => setFormData({ ...formData, purpose: e.target.value })}\r\n            className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical\"\r\n            rows={3}\r\n            placeholder=\"ì´ ì¬ìƒ ëª©ë¡ì„ ì™œ ì‹œì²­í–ˆëŠ”ì§€ ì‘ì„±í•˜ì„¸ìš”...\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í†µí•© ì ìš© ê³„íš (ë§ˆí¬ë‹¤ìš´ ì§€ì›)\r\n          </label>\r\n          <textarea\r\n            value={formData.application}\r\n            onChange={(e) => setFormData({ ...formData, application: e.target.value })}\r\n            className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm\"\r\n            rows={5}\r\n            placeholder=\"ì´ ì§€ì‹ì„ ì–´ë–»ê²Œ í™œìš©í•  ê³„íšì¸ì§€ ì‘ì„±í•˜ì„¸ìš”...\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* ìŠ¤í‚¬ ì—°ê²° (VideoLearningFormê³¼ ë™ì¼í•œ UI) */}\r\n      <div className=\"md:col-span-2\">\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ê´€ë ¨ ê¸°ìˆ  ì—°ë™ ğŸ”—\r\n        </label>\r\n        {skillsLoading ? (\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400 py-2\">\r\n            ìŠ¤í‚¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {(formData.skillIds || []).length > 0 && (\r\n              <div className=\"mb-3 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n                <span className=\"text-sm text-blue-700 dark:text-blue-300 font-medium\">\r\n                  âœ“ {(formData.skillIds || []).length}ê°œ ì„ íƒë¨\r\n                </span>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 max-h-[300px] overflow-y-auto bg-gray-50 dark:bg-gray-800/50\">\r\n              {skillCategories.map((category) => (\r\n                <div key={category._id} className=\"mb-3 last:mb-0\">\r\n                  <label \r\n                    className=\"font-bold text-sm block mb-2\"\r\n                    style={{ color: category.color || '#3B82F6' }}\r\n                  >\r\n                    {category.title}\r\n                  </label>\r\n                  <div className=\"ml-4 space-y-1\">\r\n                    {(category.skills || []).map((skill) => {\r\n                      const isSelected = (formData.skillIds || []).includes(skill._id!)\r\n                      return (\r\n                        <div\r\n                          key={skill._id}\r\n                          onClick={() => handleSkillToggle(skill._id!)}\r\n                          className={`flex items-center gap-2 p-2 rounded cursor-pointer transition-all ${\r\n                            isSelected\r\n                              ? 'bg-blue-100 dark:bg-blue-900/30 font-medium'\r\n                              : 'hover:bg-gray-100 dark:hover:bg-gray-600'\r\n                          }`}\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={isSelected}\r\n                            onChange={() => {}}\r\n                            className=\"w-4 h-4\"\r\n                          />\r\n                          <span className=\"text-sm\">{skill.name}</span>\r\n                        </div>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 pt-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSaving || !isFormValid || !isValidUrl}\r\n          className=\"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          <FaSave /> {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium\"\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default VideoPlaylistForm\r\n\r\n","import React, { useState, useMemo } from 'react'\r\nimport { FaSave } from 'react-icons/fa'\r\nimport { PlaylistVideo, PlaylistVideoFormData } from '../../types'\r\nimport { extractYouTubeId, getYouTubeThumbnail } from '../../utils/videoUtils'\r\n\r\ninterface FormProps {\r\n  playlistId: string\r\n  data?: PlaylistVideo\r\n  onSave: (data: PlaylistVideoFormData) => void\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n}\r\n\r\nconst PlaylistVideoForm: React.FC<FormProps> = ({ \r\n  playlistId,\r\n  data, \r\n  onSave, \r\n  onCancel, \r\n  isSaving = false \r\n}) => {\r\n  // ğŸŒŸ ì˜ìƒ URL ì…ë ¥ (videoId ìë™ ì¶”ì¶œ)\r\n  const [videoUrlInput, setVideoUrlInput] = useState<string>(() => {\r\n    if (data?.videoId) return `https://www.youtube.com/watch?v=${data.videoId}`\r\n    return ''\r\n  })\r\n\r\n  const [formData, setFormData] = useState<Omit<PlaylistVideoFormData, 'playlistId' | 'videoId'>>(\r\n    data\r\n      ? { \r\n          title: data.title,\r\n          keyTakeaways: data.keyTakeaways || '',\r\n          order: data.order || 0,\r\n        } \r\n      : {\r\n          title: '',\r\n          keyTakeaways: '',\r\n          order: 0,\r\n        }\r\n  )\r\n\r\n  const videoId = useMemo(() => extractYouTubeId(videoUrlInput), [videoUrlInput])\r\n  const thumbnailUrl = useMemo(() => videoId ? getYouTubeThumbnail(videoId) : null, [videoId])\r\n  const isValidUrl = useMemo(() => videoId !== null, [videoId])\r\n\r\n  const handleFormSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!formData.title.trim() || !videoUrlInput.trim()) {\r\n      alert('í•„ìˆ˜ í•„ë“œ(ì œëª©, ì˜ìƒ URL)ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n\r\n    if (!isValidUrl || !videoId) {\r\n      alert('âŒ ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ ì˜ìƒ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n    \r\n    onSave({ \r\n      playlistId,\r\n      videoId: videoId!,\r\n      title: formData.title,\r\n      keyTakeaways: formData.keyTakeaways || '',\r\n      order: formData.order || 0,\r\n    })\r\n  }\r\n\r\n  const isFormValid = formData.title.trim() && videoUrlInput.trim() && isValidUrl\r\n\r\n  return (\r\n    <form onSubmit={handleFormSubmit} className=\"space-y-4\">\r\n      <div className=\"grid gap-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì˜ìƒ URL <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={videoUrlInput}\r\n            onChange={(e) => setVideoUrlInput(e.target.value)}\r\n            className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white ${\r\n              videoUrlInput && !isValidUrl\r\n                ? 'border-red-500'\r\n                : 'border-gray-300 dark:border-gray-600'\r\n            }`}\r\n            placeholder=\"https://www.youtube.com/watch?v=...\"\r\n            required\r\n          />\r\n          {videoUrlInput && !isValidUrl && (\r\n            <p className=\"text-red-500 text-sm mt-1\">ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>\r\n          )}\r\n          {videoId && (\r\n            <p className=\"text-green-600 text-sm mt-1\">âœ… ì˜ìƒ ID: <code className=\"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded\">{videoId}</code></p>\r\n          )}\r\n          {/* ğŸŒŸ ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸° */}\r\n          {thumbnailUrl && isValidUrl && (\r\n            <div className=\"mt-3\">\r\n              <img \r\n                src={thumbnailUrl} \r\n                alt=\"ì˜ìƒ ì¸ë„¤ì¼\" \r\n                className=\"w-full max-w-xs rounded-lg shadow-md\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì˜ìƒ ì œëª© <span className=\"text-red-500\">*</span>\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.title}\r\n            onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"ì˜ìƒ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            í•µì‹¬ ë°°ì›€ (ë§ˆí¬ë‹¤ìš´ ì§€ì›)\r\n          </label>\r\n          <textarea\r\n            value={formData.keyTakeaways}\r\n            onChange={(e) => setFormData({ ...formData, keyTakeaways: e.target.value })}\r\n            className=\"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm\"\r\n            rows={6}\r\n            placeholder=\"ì˜ˆì‹œ:&#10;- [2:30] React Queryì˜ staleTime ì´í•´&#10;- [5:15] ìºì‹œ ë¬´íš¨í™” ì „ëµ&#10;- [8:45] Optimistic Updates\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n            íƒ€ì„ìŠ¤íƒ¬í”„ í˜•ì‹: [MM:SS] ë˜ëŠ” [H:MM:SS]\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 pt-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSaving || !isFormValid}\r\n          className=\"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          <FaSave /> {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium\"\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default PlaylistVideoForm\r\n\r\n","import React, { useState } from 'react'\r\nimport { \r\n  FaSave, \r\n  FaPlus, \r\n  FaTrash, \r\n  FaBriefcase, \r\n  FaCoffee, \r\n  FaGraduationCap, \r\n  FaChartLine, \r\n  FaCode, \r\n  FaCog, \r\n  FaRobot,\r\n  FaCar,           // ğŸš— ìë™ì°¨\r\n  FaShieldAlt,     // ğŸ›¡ï¸ êµ°ì¸\r\n  FaLaptopCode,    // ğŸ’» í”„ë¡œê·¸ë˜ë°\r\n  FaBars           // ğŸŒŸ ë“œë˜ê·¸ í•¸ë“¤ ì•„ì´ì½˜\r\n} from 'react-icons/fa'\r\nimport { Experience, ExperienceFormData, ExperienceDetail, Skill, SkillCategory } from '../../types'\r\nimport RichTextEditor from '../RichTextEditor'\r\nimport { DndContext, closestCenter, DragEndEvent } from '@dnd-kit/core'\r\nimport { SortableContext, verticalListSortingStrategy, useSortable } from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\nimport { useSkills } from '../../hooks/useSkills'\r\nimport LanguageTabs, { AdminLanguage } from '../common/LanguageTabs'\r\n\r\n// ğŸŒŸ ì•„ì´ì½˜ ì˜µì…˜ ì •ì˜\r\nconst iconOptions = [\r\n  { key: 'FaBriefcase', icon: FaBriefcase, label: 'ğŸ’¼ ì¼ë°˜ ì—…ë¬´' },\r\n  { key: 'FaCoffee', icon: FaCoffee, label: 'â˜• ì„œë¹„ìŠ¤/ì¹´í˜' },\r\n  { key: 'FaGraduationCap', icon: FaGraduationCap, label: 'ğŸ“ êµìœ¡/í•™ìŠµ' },\r\n  { key: 'FaChartLine', icon: FaChartLine, label: 'ğŸ“ˆ ì„±ì¥/ë¶„ì„' },\r\n  { key: 'FaLaptopCode', icon: FaLaptopCode, label: 'ğŸ’» í”„ë¡œê·¸ë˜ë°' },\r\n  { key: 'FaCode', icon: FaCode, label: 'âŒ¨ï¸ ê°œë°œ/ì½”ë”©' },\r\n  { key: 'FaCog', icon: FaCog, label: 'âš™ï¸ ê¸°ìˆ /ì—”ì§€ë‹ˆì–´ë§' },\r\n  { key: 'FaRobot', icon: FaRobot, label: 'ğŸ¤– ìë™í™”/AI' },\r\n  { key: 'FaCar', icon: FaCar, label: 'ğŸš— ìë™ì°¨/ìš´ì „' },\r\n  { key: 'FaShieldAlt', icon: FaShieldAlt, label: 'ğŸ›¡ï¸ êµ°ëŒ€/ë³´ì•ˆ' },\r\n]\r\n\r\n// ğŸŒŸ Sortable ì¹´í…Œê³ ë¦¬ ì•„ì´í…œ ì»´í¬ë„ŒíŠ¸\r\ninterface SortableCategoryItemProps {\r\n  detail: ExperienceDetail\r\n  index: number\r\n  editingCategoryIndex: number | null\r\n  onEdit: (index: number) => void\r\n  onRemove: (index: number) => void\r\n}\r\n\r\nconst SortableCategoryItem: React.FC<SortableCategoryItemProps> = ({ \r\n  detail, \r\n  index, \r\n  editingCategoryIndex,\r\n  onEdit,\r\n  onRemove\r\n}) => {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: index })\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n    zIndex: isDragging ? 1000 : 'auto',\r\n  }\r\n\r\n  return (\r\n    <div \r\n      ref={setNodeRef} \r\n      style={style}\r\n      className=\"bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-600 transition-colors\"\r\n    >\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <div className=\"flex items-center gap-2\">\r\n          {/* ğŸŒŸ ë“œë˜ê·¸ í•¸ë“¤ */}\r\n          <div\r\n            {...attributes}\r\n            {...listeners}\r\n            className=\"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1\"\r\n            title=\"ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½\"\r\n          >\r\n            <FaBars />\r\n          </div>\r\n          <div className=\"w-2 h-2 rounded-full bg-blue-600\"></div>\r\n          <h5 className=\"font-bold text-gray-900 dark:text-white\">{detail.category}</h5>\r\n          <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n            ({detail.items.length}ê°œ í•­ëª©)\r\n          </span>\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onEdit(index)}\r\n            disabled={editingCategoryIndex !== null}\r\n            className={`px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors ${\r\n              editingCategoryIndex !== null ? 'opacity-50 cursor-not-allowed' : ''\r\n            }`}\r\n          >\r\n            ìˆ˜ì •\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onRemove(index)}\r\n            disabled={editingCategoryIndex !== null}\r\n            className={`p-1.5 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors ${\r\n              editingCategoryIndex !== null ? 'opacity-50 cursor-not-allowed' : ''\r\n            }`}\r\n            title=\"ì¹´í…Œê³ ë¦¬ ì‚­ì œ\"\r\n          >\r\n            <FaTrash className=\"text-xs\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <ul className=\"text-sm text-gray-700 dark:text-gray-300 pl-4\">\r\n        {detail.items.slice(0, 3).map((item, i) => (\r\n          <li key={i} className=\"list-disc\">{item}</li>\r\n        ))}\r\n        {detail.items.length > 3 && (\r\n          <li className=\"text-gray-500 dark:text-gray-400 italic\">\r\n            ì™¸ {detail.items.length - 3}ê°œ í•­ëª©...\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\n\r\n// í¼ ì»´í¬ë„ŒíŠ¸ì˜ Props íƒ€ì… ì •ì˜\r\ninterface FormProps {\r\n  data: Experience | null\r\n  onSave: (data: ExperienceFormData) => Promise<void>\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n}\r\n\r\nconst ExperienceForm: React.FC<FormProps> = ({ data, onSave, onCancel, isSaving = false }) => {\r\n  const [currentLang, setCurrentLang] = useState<AdminLanguage>('ko')\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°\r\n  const { skillCategories, loading: skillsLoading } = useSkills()\r\n  \r\n  // ğŸŒŸ skillIds ì´ˆê¸°ê°’ ì²˜ë¦¬ (ê°ì²´ ë˜ëŠ” ë¬¸ìì—´ ëª¨ë‘ ì²˜ë¦¬)\r\n  const initialSkillIds = data?.skillIds \r\n    ? (data.skillIds as any[]).map((skillIdOrObj: any) => \r\n        typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj?._id\r\n      ).filter(Boolean) as string[]\r\n    : []\r\n  \r\n  // ì´ˆê¸° formData ì„¤ì • (iconKey í¬í•¨, detailsì— order í˜¸í™˜ì„± ì²˜ë¦¬)\r\n  const initialFormData: ExperienceFormData = data ? {\r\n    ...data,\r\n    iconKey: data.iconKey || 'FaBriefcase',\r\n    // ğŸŒŸ ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±: detailsì— orderê°€ ì—†ìœ¼ë©´ ì¸ë±ìŠ¤ë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •\r\n    details: (data.details || []).map((detail, index) => ({\r\n      ...detail,\r\n      order: detail.order ?? index\r\n    })),\r\n    skills: data.skills || [],\r\n    skillsEn: data.skillsEn || [],\r\n    skillsJa: data.skillsJa || [],\r\n    skillIds: initialSkillIds,  // ğŸŒŸ ìŠ¤í‚¬ ID ë¬¸ìì—´ ë°°ì—´ë¡œ ì´ˆê¸°í™”\r\n    titleEn: data.titleEn || '',\r\n    titleJa: data.titleJa || '',\r\n    companyEn: data.companyEn || '',\r\n    companyJa: data.companyJa || ''\r\n  } : {\r\n    period: '',\r\n    title: '',\r\n    titleEn: '',\r\n    titleJa: '',\r\n    company: '',\r\n    companyEn: '',\r\n    companyJa: '',\r\n    description: '',\r\n    details: [],\r\n    skills: [],\r\n    skillsEn: [],\r\n    skillsJa: [],\r\n    skillIds: [],  // ğŸŒŸ ìŠ¤í‚¬ ID ì´ˆê¸°ê°’\r\n    order: 0,\r\n    iconKey: 'FaBriefcase'\r\n  }\r\n  \r\n  const [formData, setFormData] = useState<ExperienceFormData>(initialFormData)\r\n  \r\n  // ê¸°ìˆ  ì…ë ¥ì„ ìœ„í•œ ë³„ë„ ìƒíƒœ (ì…ë ¥ ì¤‘ì—ëŠ” ë¬¸ìì—´ë¡œ ìœ ì§€)\r\n  const [skillsInput, setSkillsInput] = useState<string>(\r\n    Array.isArray(formData.skills) ? formData.skills.join(', ') : ''\r\n  )\r\n  const [skillsInputEn, setSkillsInputEn] = useState<string>(\r\n    Array.isArray(formData.skillsEn) ? formData.skillsEn.join(', ') : ''\r\n  )\r\n  const [skillsInputJa, setSkillsInputJa] = useState<string>(\r\n    Array.isArray(formData.skillsJa) ? formData.skillsJa.join(', ') : ''\r\n  )\r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš© ê´€ë¦¬ ìƒíƒœ\r\n  const [editingCategoryIndex, setEditingCategoryIndex] = useState<number | null>(null)\r\n  const [categoryFormData, setCategoryFormData] = useState<{ \r\n    category: string\r\n    categoryEn: string\r\n    categoryJa: string\r\n    content: string\r\n    contentEn: string\r\n    contentJa: string\r\n  }>({\r\n    category: '',\r\n    categoryEn: '',\r\n    categoryJa: '',\r\n    content: '',\r\n    contentEn: '',\r\n    contentJa: ''\r\n  })\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleSkillToggle = (skillId: string) => {\r\n    const currentSkillIds = formData.skillIds || []\r\n    const isSelected = currentSkillIds.includes(skillId)\r\n    \r\n    const newSkillIds = isSelected\r\n      ? currentSkillIds.filter((id: string) => id !== skillId)\r\n      : [...currentSkillIds, skillId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ì¹´í…Œê³ ë¦¬ ì „ì²´ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬\r\n  const handleSkillCategoryToggle = (category: SkillCategory) => {\r\n    const categorySkillIds = (category.skills || []).map(skill => skill._id!).filter(Boolean)\r\n    const currentSkillIds = formData.skillIds || []\r\n    \r\n    const allSelected = categorySkillIds.every((id: string) => currentSkillIds.includes(id))\r\n    \r\n    let newSkillIds: string[]\r\n    if (allSelected) {\r\n      newSkillIds = currentSkillIds.filter((id: string) => !categorySkillIds.includes(id))\r\n    } else {\r\n      const uniqueIds = new Set([...currentSkillIds, ...categorySkillIds])\r\n      newSkillIds = Array.from(uniqueIds)\r\n    }\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš© ê´€ë¦¬ í•¨ìˆ˜ë“¤\r\n  const addDetailCategory = () => {\r\n    setEditingCategoryIndex((formData.details || []).length)\r\n    setCategoryFormData({ \r\n      category: '', \r\n      categoryEn: '', \r\n      categoryJa: '', \r\n      content: '', \r\n      contentEn: '', \r\n      contentJa: '' \r\n    })\r\n  }\r\n  \r\n  const editDetailCategory = (index: number) => {\r\n    const detail = (formData.details || [])[index]\r\n    if (detail) {\r\n      setEditingCategoryIndex(index)\r\n      setCategoryFormData({\r\n        category: detail.category,\r\n        categoryEn: detail.categoryEn || '',\r\n        categoryJa: detail.categoryJa || '',\r\n        content: detail.items.join('\\n'),\r\n        contentEn: detail.itemsEn?.join('\\n') || '',\r\n        contentJa: detail.itemsJa?.join('\\n') || ''\r\n      })\r\n    }\r\n  }\r\n  \r\n  const saveDetailCategory = () => {\r\n    if (!categoryFormData.category.trim() || !categoryFormData.content.trim()) {\r\n      alert('ì¹´í…Œê³ ë¦¬ ì´ë¦„ê³¼ ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n    \r\n    const items = categoryFormData.content.split('\\n').map(s => s.trim()).filter(s => s.length > 0)\r\n    const itemsEn = categoryFormData.contentEn.split('\\n').map(s => s.trim()).filter(s => s.length > 0)\r\n    const itemsJa = categoryFormData.contentJa.split('\\n').map(s => s.trim()).filter(s => s.length > 0)\r\n    \r\n    const newDetail: ExperienceDetail = {\r\n      category: categoryFormData.category.trim(),\r\n      categoryEn: categoryFormData.categoryEn.trim() || undefined,\r\n      categoryJa: categoryFormData.categoryJa.trim() || undefined,\r\n      items,\r\n      itemsEn: itemsEn.length > 0 ? itemsEn : undefined,\r\n      itemsJa: itemsJa.length > 0 ? itemsJa : undefined\r\n    }\r\n    \r\n    const newDetails = [...(formData.details || [])]\r\n    if (editingCategoryIndex !== null) {\r\n      newDetails[editingCategoryIndex] = newDetail\r\n    }\r\n    \r\n    setFormData({ ...formData, details: newDetails })\r\n    setEditingCategoryIndex(null)\r\n    setCategoryFormData({ \r\n      category: '', \r\n      categoryEn: '', \r\n      categoryJa: '', \r\n      content: '', \r\n      contentEn: '', \r\n      contentJa: '' \r\n    })\r\n  }\r\n  \r\n  const cancelDetailCategory = () => {\r\n    setEditingCategoryIndex(null)\r\n    setCategoryFormData({ \r\n      category: '', \r\n      categoryEn: '', \r\n      categoryJa: '', \r\n      content: '', \r\n      contentEn: '', \r\n      contentJa: '' \r\n    })\r\n  }\r\n  \r\n  const removeDetailCategory = (index: number) => {\r\n    if (!confirm('ì´ ì¹´í…Œê³ ë¦¬ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return\r\n    const newDetails = [...(formData.details || [])]\r\n    newDetails.splice(index, 1)\r\n    setFormData({ ...formData, details: newDetails })\r\n  }\r\n  \r\n  // ğŸŒŸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬\r\n  const handleDragEnd = (event: DragEndEvent) => {\r\n    const { active, over } = event\r\n    \r\n    if (!over || active.id === over.id) return\r\n    \r\n    const oldIndex = (formData.details || []).findIndex((_, i) => i === active.id)\r\n    const newIndex = (formData.details || []).findIndex((_, i) => i === over.id)\r\n    \r\n    if (oldIndex === -1 || newIndex === -1) return\r\n    \r\n    // ë°°ì—´ ìˆœì„œ ë³€ê²½\r\n    const newDetails = [...(formData.details || [])]\r\n    const [movedItem] = newDetails.splice(oldIndex, 1)\r\n    \r\n    if (!movedItem) return  // ì•ˆì „ì„± ì²´í¬\r\n    \r\n    newDetails.splice(newIndex, 0, movedItem)\r\n    \r\n    // ğŸŒŸ ìˆœì„œ ë³€ê²½ í›„ ê° í•­ëª©ì— ìƒˆë¡œìš´ order ê°’ í• ë‹¹\r\n    const reorderedDetails = newDetails.map((detail, index) => ({\r\n      ...detail,\r\n      order: index\r\n    }))\r\n    \r\n    setFormData({ ...formData, details: reorderedDetails })\r\n  }\r\n\r\n  // í•„ìˆ˜ í•„ë“œ ê²€ì¦\r\n  const isFormValid = formData.title.trim() !== '' && \r\n                     formData.company.trim() !== '' && \r\n                     formData.period.trim() !== ''\r\n\r\n  const handleFormSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!isFormValid) {\r\n      alert('í•„ìˆ˜ í•„ë“œ(ê¸°ê°„, ì§ì±…, íšŒì‚¬/ê¸°ê´€)ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')\r\n      return\r\n    }\r\n    \r\n    // ì œì¶œ ì‹œ ìµœì‹  ê¸°ìˆ  ë°°ì—´ì„ í¬í•¨í•˜ì—¬ ì €ì¥ (í˜¸í™˜ì„± ìœ ì§€)\r\n    const skillsArray = skillsInput.split(',').map((s) => s.trim()).filter(s => s.length > 0)\r\n    const skillsArrayEn = skillsInputEn.split(',').map((s) => s.trim()).filter(s => s.length > 0)\r\n    const skillsArrayJa = skillsInputJa.split(',').map((s) => s.trim()).filter(s => s.length > 0)\r\n    \r\n    // ğŸŒŸ skillIdsë¥¼ ë¬¸ìì—´ ë°°ì—´ë¡œ í™•ì‹¤í•˜ê²Œ ë³€í™˜ + ì¤‘ë³µ ì œê±°\r\n    const skillIds = Array.from(new Set(\r\n      (formData.skillIds || []).map((skillIdOrObj: any) => \r\n        typeof skillIdOrObj === 'string' ? skillIdOrObj : skillIdOrObj?._id\r\n      ).filter(Boolean)\r\n    ))\r\n    \r\n    // ğŸŒŸ details ë°°ì—´ì˜ ê° í•­ëª©ì— order ê°’ í• ë‹¹ (í˜„ì¬ ë°°ì—´ ìˆœì„œ ê¸°ì¤€)\r\n    const orderedDetails = (formData.details || []).map((detail, index) => ({\r\n      ...detail,\r\n      order: detail.order ?? index  // ê¸°ì¡´ orderê°€ ìˆìœ¼ë©´ ìœ ì§€, ì—†ìœ¼ë©´ ì¸ë±ìŠ¤ ì‚¬ìš©\r\n    }))\r\n    \r\n    const finalFormData = { \r\n      ...formData, \r\n      skills: skillsArray,  // ğŸ”„ í˜¸í™˜ì„± ìœ ì§€\r\n      skillsEn: skillsArrayEn,\r\n      skillsJa: skillsArrayJa,\r\n      skillIds,  // ğŸŒŸ ìŠ¤í‚¬ ID ë°°ì—´\r\n      details: orderedDetails\r\n    }\r\n    \r\n    console.log('ğŸ“¤ ê²½ë ¥ ì €ì¥ ë°ì´í„°:', finalFormData)\r\n    onSave(finalFormData)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleFormSubmit} className=\"space-y-4\">\r\n      <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">\r\n        {data ? 'ê²½ë ¥ ìˆ˜ì •' : 'ê²½ë ¥ ì¶”ê°€'}\r\n      </h3>\r\n      \r\n      {/* Language Tabs for Main Fields */}\r\n      <div className=\"mb-6\">\r\n        <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n      </div>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ê¸°ê°„\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.period}\r\n            onChange={(e) => setFormData({ ...formData, period: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"2018 - 2023\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì§ì±… {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.title}\r\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ë°”ë¦¬ìŠ¤íƒ€\"\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleEn || ''}\r\n              onChange={(e) => setFormData({ ...formData, titleEn: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"Barista\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleJa || ''}\r\n              onChange={(e) => setFormData({ ...formData, titleJa: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ãƒãƒªã‚¹ã‚¿\"\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            íšŒì‚¬/ê¸°ê´€ {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.company}\r\n              onChange={(e) => setFormData({ ...formData, company: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ìŠ¤íƒ€ë²…ìŠ¤ì»¤í”¼ì½”ë¦¬ì•„\"\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.companyEn || ''}\r\n              onChange={(e) => setFormData({ ...formData, companyEn: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"Starbucks Coffee Korea\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.companyJa || ''}\r\n              onChange={(e) => setFormData({ ...formData, companyJa: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ã‚¹ã‚¿ãƒ¼ãƒãƒƒã‚¯ã‚¹ã‚³ãƒ¼ãƒ’ãƒ¼ã‚¸ãƒ£ãƒ‘ãƒ³\"\r\n            />\r\n          )}\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ìˆœì„œ\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.order}\r\n            onChange={(e) => {\r\n              const value = parseInt(e.target.value)\r\n              setFormData({ ...formData, order: isNaN(value) ? 0 : value })\r\n            }}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            min=\"0\"\r\n            placeholder=\"í‘œì‹œ ìˆœì„œ (ìˆ«ìê°€ ì‘ì„ìˆ˜ë¡ ë¨¼ì € í‘œì‹œ)\"\r\n          />\r\n        </div>\r\n        {/* ğŸŒŸ ì•„ì´ì½˜ ì„ íƒ í•„ë“œ (ì‹ ê·œ) */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì•„ì´ì½˜\r\n          </label>\r\n          <select\r\n            value={formData.iconKey || 'FaBriefcase'}\r\n            onChange={(e) => setFormData({ ...formData, iconKey: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          >\r\n            {iconOptions.map((option) => (\r\n              <option key={option.key} value={option.key}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n          {/* ë¯¸ë¦¬ë³´ê¸° */}\r\n          <div className=\"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400\">\r\n            <span>ë¯¸ë¦¬ë³´ê¸°:</span>\r\n            {React.createElement(\r\n              iconOptions.find(opt => opt.key === (formData.iconKey || 'FaBriefcase'))?.icon || FaBriefcase,\r\n              { className: 'text-xl' }\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* ğŸŒŸ ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš© ì…ë ¥ (ì‹ ê·œ) */}\r\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-2 border-blue-200 dark:border-blue-800\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div>\r\n            <h4 className=\"text-md font-bold text-gray-900 dark:text-white\">\r\n              ğŸ“‹ ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš©\r\n            </h4>\r\n            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\r\n              ê·¼ë¬´ê²½í—˜, êµìœ¡, ê·¼ë¬´ë§¤ì¥ ë“± ì¹´í…Œê³ ë¦¬ë³„ë¡œ êµ¬ì²´ì ì¸ ë‚´ìš©ì„ ì •ë¦¬í•˜ì„¸ìš”\r\n            </p>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={addDetailCategory}\r\n            disabled={editingCategoryIndex !== null}\r\n            className={`px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 text-sm ${\r\n              editingCategoryIndex !== null ? 'opacity-50 cursor-not-allowed' : ''\r\n            }`}\r\n          >\r\n            <FaPlus className=\"text-xs\" />\r\n            ì¹´í…Œê³ ë¦¬ ì¶”ê°€\r\n          </button>\r\n        </div>\r\n        \r\n        {/* ì €ì¥ëœ ì¹´í…Œê³ ë¦¬ ëª©ë¡ - ğŸŒŸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì ìš© */}\r\n        {formData.details && formData.details.length > 0 && (\r\n          <DndContext collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\r\n            <SortableContext items={formData.details.map((_, i) => i)} strategy={verticalListSortingStrategy}>\r\n              <div className=\"space-y-3 mb-4\">\r\n                {formData.details.map((detail, index) => (\r\n                  <SortableCategoryItem\r\n                    key={index}\r\n                    detail={detail}\r\n                    index={index}\r\n                    editingCategoryIndex={editingCategoryIndex}\r\n                    onEdit={editDetailCategory}\r\n                    onRemove={removeDetailCategory}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </SortableContext>\r\n          </DndContext>\r\n        )}\r\n        \r\n        {/* ì¹´í…Œê³ ë¦¬ ì¶”ê°€/ìˆ˜ì • í¼ */}\r\n        {editingCategoryIndex !== null && (\r\n          <div className=\"bg-white dark:bg-gray-800 p-5 rounded-lg border-2 border-blue-400 dark:border-blue-600 shadow-lg\">\r\n            <h5 className=\"font-bold text-gray-900 dark:text-white mb-4\">\r\n              {editingCategoryIndex < (formData.details || []).length ? 'ì¹´í…Œê³ ë¦¬ ìˆ˜ì •' : 'ì¹´í…Œê³ ë¦¬ ì¶”ê°€'}\r\n            </h5>\r\n            \r\n            {/* Language Tabs for Detail Category */}\r\n            <div className=\"mb-4\">\r\n              <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n            </div>\r\n            \r\n            <div className=\"space-y-4\">\r\n              {/* Category Name (Multilingual) */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  ì¹´í…Œê³ ë¦¬ ì´ë¦„ {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n                  <span className=\"text-xs text-gray-500 ml-2\">\r\n                    ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n                  </span>\r\n                </label>\r\n                {currentLang === 'ko' && (\r\n                  <input\r\n                    type=\"text\"\r\n                    value={categoryFormData.category}\r\n                    onChange={(e) => setCategoryFormData({ ...categoryFormData, category: e.target.value })}\r\n                    placeholder=\"ì˜ˆ: ê·¼ë¬´ê²½í—˜, êµìœ¡, ê·¼ë¬´ë§¤ì¥\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-semibold\"\r\n                  />\r\n                )}\r\n                {currentLang === 'en' && (\r\n                  <input\r\n                    type=\"text\"\r\n                    value={categoryFormData.categoryEn}\r\n                    onChange={(e) => setCategoryFormData({ ...categoryFormData, categoryEn: e.target.value })}\r\n                    placeholder=\"e.g., Work Experience, Education, Store\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-semibold\"\r\n                  />\r\n                )}\r\n                {currentLang === 'ja' && (\r\n                  <input\r\n                    type=\"text\"\r\n                    value={categoryFormData.categoryJa}\r\n                    onChange={(e) => setCategoryFormData({ ...categoryFormData, categoryJa: e.target.value })}\r\n                    placeholder=\"ä¾‹: è·å‹™çµŒé¨“ã€æ•™è‚²ã€åº—èˆ—\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-semibold\"\r\n                  />\r\n                )}\r\n              </div>\r\n              \r\n              {/* Category Content (Multilingual) */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  ì¹´í…Œê³ ë¦¬ ë‚´ìš© {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n                  <span className=\"text-xs text-gray-500 ml-2\">\r\n                    ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n                  </span>\r\n                </label>\r\n                {currentLang === 'ko' && (\r\n                  <>\r\n                    <RichTextEditor\r\n                      value={categoryFormData.content}\r\n                      onChange={(value) => setCategoryFormData({ ...categoryFormData, content: value })}\r\n                      placeholder=\"í•­ëª©ë“¤ì„ í•œ ì¤„ì”© ì…ë ¥í•˜ì„¸ìš”&#10;ì˜ˆ:&#10;ë§¤ì¥ì¸ì› ê´€ë¦¬&#10;ì‹ ê·œíŒŒíŠ¸ë„ˆ êµìœ¡&#10;ë¼ë–¼ì•„íŠ¸ êµìœ¡\"\r\n                      rows={8}\r\n                      className=\"min-h-[200px]\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                      ğŸ’¡ í•œ ì¤„ì— í•˜ë‚˜ì”© í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš” (Enterë¡œ êµ¬ë¶„)\r\n                    </p>\r\n                  </>\r\n                )}\r\n                {currentLang === 'en' && (\r\n                  <>\r\n                    <RichTextEditor\r\n                      value={categoryFormData.contentEn}\r\n                      onChange={(value) => setCategoryFormData({ ...categoryFormData, contentEn: value })}\r\n                      placeholder=\"Enter items one per line&#10;e.g.&#10;Store Staff Management&#10;New Partner Training&#10;Latte Art Education\"\r\n                      rows={8}\r\n                      className=\"min-h-[200px]\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                      ğŸ’¡ Enter one item per line (separated by Enter)\r\n                    </p>\r\n                  </>\r\n                )}\r\n                {currentLang === 'ja' && (\r\n                  <>\r\n                    <RichTextEditor\r\n                      value={categoryFormData.contentJa}\r\n                      onChange={(value) => setCategoryFormData({ ...categoryFormData, contentJa: value })}\r\n                      placeholder=\"1è¡Œã«1é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„&#10;ä¾‹:&#10;åº—èˆ—ã‚¹ã‚¿ãƒƒãƒ•ç®¡ç†&#10;æ–°è¦ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼æ•™è‚²&#10;ãƒ©ãƒ†ã‚¢ãƒ¼ãƒˆæ•™è‚²\"\r\n                      rows={8}\r\n                      className=\"min-h-[200px]\"\r\n                    />\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n                      ğŸ’¡ 1è¡Œã«1é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ (Enterã§åŒºåˆ‡ã‚‹)\r\n                    </p>\r\n                  </>\r\n                )}\r\n              </div>\r\n              \r\n              <div className=\"flex gap-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={saveDetailCategory}\r\n                  className=\"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2\"\r\n                >\r\n                  <FaSave />\r\n                  ì €ì¥\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={cancelDetailCategory}\r\n                  className=\"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors\"\r\n                >\r\n                  ì·¨ì†Œ\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n        \r\n        {/* ë¹ˆ ìƒíƒœ */}\r\n        {(!formData.details || formData.details.length === 0) && editingCategoryIndex === null && (\r\n          <div className=\"text-center py-6 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600\">\r\n            <p className=\"text-gray-500 dark:text-gray-400 text-sm mb-2\">\r\n              ì•„ì§ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤\r\n            </p>\r\n            <p className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n              ìƒë‹¨ì˜ \"ì¹´í…Œê³ ë¦¬ ì¶”ê°€\" ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹œì‘í•˜ì„¸ìš”\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ì„¤ëª… (ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°) - ì„ íƒì‚¬í•­\r\n        </label>\r\n        <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\r\n          ğŸ’¡ ìœ„ì˜ \"ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš©\"ì„ ì‚¬ìš©í•˜ë©´ ë” ì²´ê³„ì ìœ¼ë¡œ ì •ë¦¬ë©ë‹ˆë‹¤. ì´ í•„ë“œëŠ” í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ë©ë‹ˆë‹¤.\r\n        </p>\r\n        <RichTextEditor\r\n          value={formData.description || ''}\r\n          onChange={(value) => setFormData({ ...formData, description: value })}\r\n          placeholder=\"(ì„ íƒì‚¬í•­) ì „ì²´ì ì¸ ì„¤ëª…ì„ ì‘ì„±í•˜ê±°ë‚˜, ìœ„ì˜ ì¹´í…Œê³ ë¦¬ë³„ ì…ë ¥ì„ ì‚¬ìš©í•˜ì„¸ìš”.\"\r\n          rows={4}\r\n          className=\"min-h-[150px]\"\r\n        />\r\n      </div>\r\n      {/* ğŸŒŸ ìŠ¤í‚¬ ì—°ê²° (ì²´í¬ë°•ìŠ¤) */}\r\n      <div className=\"md:col-span-2\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n            ì´ ê²½ë ¥ì—ì„œ ì‚¬ìš©í•œ ìŠ¤í‚¬ ğŸ”—\r\n          </label>\r\n          {formData.skillIds && formData.skillIds.length > 0 && (\r\n            <span className=\"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded\">\r\n              âœ“ {formData.skillIds.length}ê°œ ì„ íƒë¨\r\n            </span>\r\n          )}\r\n        </div>\r\n        \r\n        {skillsLoading ? (\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400 py-2\">\r\n            ìŠ¤í‚¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...\r\n          </div>\r\n        ) : skillCategories.length === 0 ? (\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400 py-4 text-center border border-gray-300 dark:border-gray-600 rounded-lg\">\r\n            ë“±ë¡ëœ ìŠ¤í‚¬ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ìŠ¤í‚¬ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\r\n          </div>\r\n        ) : (\r\n          <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 max-h-[400px] overflow-y-auto\">\r\n            {skillCategories.map((category: SkillCategory) => {\r\n              const categorySkillIds = (category.skills || []).map(skill => skill._id!).filter(Boolean)\r\n              const currentSkillIds = formData.skillIds || []\r\n              const selectedCount = categorySkillIds.filter(id => currentSkillIds.includes(id)).length\r\n              const allSelected = categorySkillIds.length > 0 && selectedCount === categorySkillIds.length\r\n              const someSelected = selectedCount > 0 && selectedCount < categorySkillIds.length\r\n              \r\n              return (\r\n                <div key={category._id} className=\"mb-4 last:mb-0\">\r\n                  {/* ì¹´í…Œê³ ë¦¬ í—¤ë” (ì „ì²´ ì„ íƒ/í•´ì œ) */}\r\n                  <div \r\n                    className=\"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded\"\r\n                    onClick={() => handleSkillCategoryToggle(category)}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={allSelected}\r\n                      ref={el => {\r\n                        if (el) {\r\n                          el.indeterminate = someSelected\r\n                        }\r\n                      }}\r\n                      onChange={() => handleSkillCategoryToggle(category)}\r\n                      className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                      onClick={(e) => e.stopPropagation()}\r\n                    />\r\n                    <label \r\n                      className=\"font-semibold text-gray-900 dark:text-white flex-1 cursor-pointer\"\r\n                      style={{ color: category.color || '#3B82F6' }}\r\n                    >\r\n                      {category.title}\r\n                      {selectedCount > 0 && (\r\n                        <span className=\"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400\">\r\n                          ({selectedCount}/{categorySkillIds.length})\r\n                        </span>\r\n                      )}\r\n                    </label>\r\n                  </div>\r\n                  \r\n                  {/* ìŠ¤í‚¬ ëª©ë¡ */}\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6\">\r\n                    {(category.skills || []).map((skill: Skill) => {\r\n                      const isSelected = (formData.skillIds || []).includes(skill._id!)\r\n                      \r\n                      return (\r\n                        <label\r\n                          key={skill._id}\r\n                          className={`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${\r\n                            isSelected \r\n                              ? 'bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700' \r\n                              : 'hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent'\r\n                          }`}\r\n                        >\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={isSelected}\r\n                            onChange={() => handleSkillToggle(skill._id!)}\r\n                            className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                          />\r\n                          <span className={`text-sm ${isSelected ? 'font-semibold text-blue-700 dark:text-blue-300' : 'text-gray-700 dark:text-gray-300'}`}>\r\n                            {skill.name}\r\n                          </span>\r\n                        </label>\r\n                      )\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )\r\n            })}\r\n          </div>\r\n        )}\r\n        \r\n        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n          ğŸ’¡ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ì—¬ ê²½ë ¥ì—ì„œ ì‚¬ìš©í•œ ìŠ¤í‚¬ì„ ì„ íƒí•˜ì„¸ìš”. ì¹´í…Œê³ ë¦¬ ì œëª©ì„ í´ë¦­í•˜ë©´ ì „ì²´ ì„ íƒ/í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n        </p>\r\n      </div>\r\n      \r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ê¸°ìˆ  (ì‰¼í‘œë¡œ êµ¬ë¶„) - ì„ íƒì‚¬í•­\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <input\r\n            type=\"text\"\r\n            value={skillsInput}\r\n            onChange={(e) => setSkillsInput(e.target.value)}\r\n            onBlur={() => {\r\n              const skillsArray = skillsInput.split(',').map((s) => s.trim()).filter(s => s.length > 0)\r\n              setFormData({ ...formData, skills: skillsArray })\r\n            }}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"PLC í”„ë¡œê·¸ë˜ë°, Python, ë°ì´í„° ë¶„ì„\"\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <input\r\n            type=\"text\"\r\n            value={skillsInputEn}\r\n            onChange={(e) => setSkillsInputEn(e.target.value)}\r\n            onBlur={() => {\r\n              const skillsArray = skillsInputEn.split(',').map((s) => s.trim()).filter(s => s.length > 0)\r\n              setFormData({ ...formData, skillsEn: skillsArray })\r\n            }}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"PLC Programming, Python, Data Analysis\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <input\r\n            type=\"text\"\r\n            value={skillsInputJa}\r\n            onChange={(e) => setSkillsInputJa(e.target.value)}\r\n            onBlur={() => {\r\n              const skillsArray = skillsInputJa.split(',').map((s) => s.trim()).filter(s => s.length > 0)\r\n              setFormData({ ...formData, skillsJa: skillsArray })\r\n            }}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"PLCãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€Pythonã€ãƒ‡ãƒ¼ã‚¿åˆ†æ\"\r\n          />\r\n        )}\r\n        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n          ğŸ’¡ ìœ„ì˜ ìŠ¤í‚¬ ì²´í¬ë°•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤. ì´ í•„ë“œëŠ” í•˜ìœ„ í˜¸í™˜ì„±ì„ ìœ„í•´ ìœ ì§€ë©ë‹ˆë‹¤.\r\n        </p>\r\n      </div>\r\n      {/* ğŸŒŸ ìµœì¢… ì €ì¥ ì•ˆë‚´ (ì¹´í…Œê³ ë¦¬ ì…ë ¥ ì¤‘ì¼ ë•Œ) */}\r\n      {editingCategoryIndex !== null && (\r\n        <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border-2 border-yellow-300 dark:border-yellow-700\">\r\n          <p className=\"text-sm text-yellow-800 dark:text-yellow-300 font-medium\">\r\n            âš ï¸ ì¹´í…Œê³ ë¦¬ ì…ë ¥ ì¤‘ì…ë‹ˆë‹¤. ìœ„ì˜ \"ì €ì¥\" ë²„íŠ¼ì„ ë¨¼ì € ëˆŒëŸ¬ ì¹´í…Œê³ ë¦¬ë¥¼ ì €ì¥í•˜ì„¸ìš”.\r\n          </p>\r\n        </div>\r\n      )}\r\n      \r\n      {/* ğŸŒŸ ì €ì¥ëœ ì¹´í…Œê³ ë¦¬ ìš”ì•½ */}\r\n      {formData.details && formData.details.length > 0 && editingCategoryIndex === null && (\r\n        <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-2 border-green-300 dark:border-green-700\">\r\n          <p className=\"text-sm text-green-800 dark:text-green-300 font-medium mb-2\">\r\n            âœ… {formData.details.length}ê°œì˜ ì¹´í…Œê³ ë¦¬ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤\r\n          </p>\r\n          <p className=\"text-xs text-green-700 dark:text-green-400\">\r\n            ì•„ë˜ \"ì €ì¥\" ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²½ë ¥ ë°ì´í„°ë¥¼ ìµœì¢… ì €ì¥í•˜ì„¸ìš”\r\n          </p>\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"flex gap-3 pt-4 border-t-2 border-gray-300 dark:border-gray-600\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSaving || !isFormValid || editingCategoryIndex !== null}\r\n          className={`flex-1 flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 rounded-lg transition-colors text-lg ${\r\n            isSaving || !isFormValid || editingCategoryIndex !== null ? 'opacity-50 cursor-not-allowed' : 'shadow-lg'\r\n          }`}\r\n          title={editingCategoryIndex !== null ? 'ì¹´í…Œê³ ë¦¬ ì…ë ¥ì„ ë¨¼ì € ì™„ë£Œí•˜ì„¸ìš”' : ''}\r\n        >\r\n          {isSaving ? (\r\n            <>\r\n              <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n              ì €ì¥ ì¤‘...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <FaSave className=\"text-xl\" /> ìµœì¢… ì €ì¥\r\n            </>\r\n          )}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          disabled={isSaving}\r\n          className={`flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-3 rounded-lg transition-colors ${\r\n            isSaving ? 'opacity-50 cursor-not-allowed' : ''\r\n          }`}\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default ExperienceForm\r\n","import React from 'react'\r\nimport { FaSave, FaPlus, FaTrash, FaVideo, FaTimes } from 'react-icons/fa'\r\nimport { Project, ProjectFormData, Skill, SkillCategory } from '../../types'\r\nimport RichTextEditor from '../RichTextEditor'\r\nimport { useSkills } from '../../hooks/useSkills'\r\nimport { useCategories } from '../../hooks/useCategories'\r\nimport LanguageTabs from '../common/LanguageTabs'\r\nimport { useProjectForm } from '../../hooks/useProjectForm'\r\n\r\n// í¼ ì»´í¬ë„ŒíŠ¸ì˜ Props íƒ€ì… ì •ì˜\r\ninterface FormProps {\r\n  data: Project | null\r\n  onSave: (data: ProjectFormData) => Promise<void>\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n}\r\n\r\nconst ProjectForm: React.FC<FormProps> = ({ data, onSave, onCancel, isSaving = false }) => {\r\n  // Use custom hook for form logic\r\n  const {\r\n    formData,\r\n    videoItems,\r\n    currentLang,\r\n    setCurrentLang,\r\n    setFormData,\r\n    handleVideoUrlChange,\r\n    handleVideoDescriptionChange,\r\n    handleAddVideo,\r\n    handleRemoveVideo,\r\n    prepareDataForSubmit\r\n  } = useProjectForm(data)\r\n  \r\n  // ğŸŒŸ ëª¨ë“  ìŠ¤í‚¬ ëª©ë¡ì„ ê°€ì ¸ì˜µë‹ˆë‹¤\r\n  const { skillCategories, loading: skillsLoading } = useSkills()\r\n  \r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°\r\n  const { data: categories = [], isLoading: categoriesLoading } = useCategories()\r\n\r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleCategoryToggle = (categoryId: string) => {\r\n    const currentCategoryIds = formData.categoryIds || []\r\n    const isSelected = currentCategoryIds.includes(categoryId)\r\n    \r\n    const newCategoryIds = isSelected\r\n      ? currentCategoryIds.filter((id: string) => id !== categoryId)\r\n      : [...currentCategoryIds, categoryId]\r\n    \r\n    setFormData({ \r\n      ...formData, \r\n      categoryIds: newCategoryIds \r\n    })\r\n  }\r\n\r\n  // ğŸŒŸ ìŠ¤í‚¬ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬ (ì²´í¬ë°•ìŠ¤ìš©)\r\n  const handleSkillToggle = (skillId: string) => {\r\n    const currentSkillIds = formData.skillIds || []\r\n    const isSelected = currentSkillIds.includes(skillId)\r\n    \r\n    const newSkillIds = isSelected\r\n      ? currentSkillIds.filter((id: string) => id !== skillId) // ì„ íƒ í•´ì œ\r\n      : [...currentSkillIds, skillId] // ì„ íƒ ì¶”ê°€\r\n    \r\n    console.log('ğŸ”§ ìŠ¤í‚¬ ë³€ê²½:', { skillId, isSelected: !isSelected, newSkillIds })\r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ì¹´í…Œê³ ë¦¬ ì „ì²´ ì„ íƒ/í•´ì œ í•¸ë“¤ëŸ¬\r\n  const handleSkillCategoryToggle = (category: SkillCategory) => {\r\n    const categorySkillIds = (category.skills || []).map(skill => skill._id!).filter(Boolean)\r\n    const currentSkillIds = formData.skillIds || []\r\n    \r\n    // ì¹´í…Œê³ ë¦¬ì˜ ëª¨ë“  ìŠ¤í‚¬ì´ ì„ íƒë˜ì–´ ìˆëŠ”ì§€ í™•ì¸\r\n    const allSelected = categorySkillIds.every((id: string) => currentSkillIds.includes(id))\r\n    \r\n    let newSkillIds: string[]\r\n    if (allSelected) {\r\n      // ëª¨ë‘ ì„ íƒë˜ì–´ ìˆìœ¼ë©´ ì „ì²´ í•´ì œ\r\n      newSkillIds = currentSkillIds.filter((id: string) => !categorySkillIds.includes(id))\r\n    } else {\r\n      // ì¼ë¶€ë§Œ ì„ íƒë˜ì–´ ìˆê±°ë‚˜ ì—†ìœ¼ë©´ ì „ì²´ ì„ íƒ\r\n      const uniqueIds = new Set([...currentSkillIds, ...categorySkillIds])\r\n      newSkillIds = Array.from(uniqueIds)\r\n    }\r\n    \r\n    console.log('ğŸ“ ì¹´í…Œê³ ë¦¬ ì „ì²´ ë³€ê²½:', { category: category.title, allSelected: !allSelected, newSkillIds })\r\n    setFormData({ \r\n      ...formData, \r\n      skillIds: newSkillIds \r\n    })\r\n  }\r\n\r\n  const handleSaveClick = () => {\r\n    try {\r\n      console.log('ğŸ’¾ ì €ì¥ ì‹œì‘ - videoItems:', videoItems)\r\n      console.log('ğŸ”— ì„ íƒëœ ìŠ¤í‚¬ IDs:', formData.skillIds)\r\n      \r\n      // Use hook's prepare function to process all data\r\n      const processedData = prepareDataForSubmit()\r\n      \r\n      console.log('âœ… ìµœì¢… processedData:', processedData)\r\n      console.log('âœ… ìµœì¢… skillIds:', processedData.skillIds)\r\n      onSave(processedData)\r\n    } catch (error: any) {\r\n      console.error('âŒ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error)\r\n      alert(error.message || 'ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-4\">\r\n        {data ? 'í”„ë¡œì íŠ¸ ìˆ˜ì •' : 'í”„ë¡œì íŠ¸ ì¶”ê°€'}\r\n      </h3>\r\n      \r\n      {/* Language Tabs */}\r\n      <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-4\">\r\n        {/* Title Field (Multilingual) */}\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì œëª© {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.title}\r\n              onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"í”„ë¡œì íŠ¸ ì œëª©\"\r\n              required\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleEn || ''}\r\n              onChange={(e) => setFormData({ ...formData, titleEn: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"Project Title\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleJa || ''}\r\n              onChange={(e) => setFormData({ ...formData, titleJa: e.target.value })}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒˆãƒ«\"\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"md:col-span-2\">\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n            ì¹´í…Œê³ ë¦¬ ì„ íƒ ğŸ“‚ (ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥)\r\n          </label>\r\n\r\n          {/* ì„ íƒëœ ì¹´í…Œê³ ë¦¬ íƒœê·¸ í‘œì‹œ */}\r\n          {formData.categoryIds && formData.categoryIds.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\r\n              {formData.categoryIds.map((catId: string) => {\r\n                const category = categories.find(c => c._id === catId)\r\n                return category ? (\r\n                  <span\r\n                    key={catId}\r\n                    className=\"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm\"\r\n                  >\r\n                    {category.name}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => handleCategoryToggle(catId)}\r\n                      className=\"hover:bg-blue-700 rounded-full p-0.5\"\r\n                    >\r\n                      <FaTimes className=\"text-xs\" />\r\n                    </button>\r\n                  </span>\r\n                ) : null\r\n              })}\r\n            </div>\r\n          )}\r\n\r\n          {/* ì¹´í…Œê³ ë¦¬ ì²´í¬ë°•ìŠ¤ ëª©ë¡ */}\r\n          {categoriesLoading ? (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">ì¹´í…Œê³ ë¦¬ ë¡œë”© ì¤‘...</p>\r\n          ) : categories.length > 0 ? (\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\r\n              {categories.map((category) => {\r\n                const isSelected = (formData.categoryIds || []).includes(category._id)\r\n                return (\r\n                  <label\r\n                    key={category._id}\r\n                    className={`flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all ${\r\n                      isSelected\r\n                        ? 'border-primary-600 bg-primary-50 dark:bg-primary-900/20'\r\n                        : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={isSelected}\r\n                      onChange={() => handleCategoryToggle(category._id)}\r\n                      className=\"w-4 h-4\"\r\n                    />\r\n                    <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                      {category.name}\r\n                    </span>\r\n                  </label>\r\n                )\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤. ê´€ë¦¬ì ë©”ë‰´ì˜ \"ì¹´í…Œê³ ë¦¬ ê´€ë¦¬\"ì—ì„œ ì¶”ê°€í•˜ì„¸ìš”.\r\n            </p>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ìƒíƒœ\r\n          </label>\r\n          <select\r\n            value={formData.status}\r\n            onChange={(e) => setFormData({ ...formData, status: e.target.value as 'preparing' | 'planning' | 'completed' })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          >\r\n            <option value=\"preparing\">ì¤€ë¹„ ì¤‘</option>\r\n            <option value=\"planning\">ê³„íš ì¤‘</option>\r\n            <option value=\"completed\">ì™„ë£Œ</option>\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            GitHub URL\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.githubLink || ''}\r\n            onChange={(e) => setFormData({ ...formData, githubLink: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"https://github.com/...\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Live URL\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.liveLink || ''}\r\n            onChange={(e) => setFormData({ ...formData, liveLink: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"https://...\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ì´ë¯¸ì§€ URL\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            value={formData.image}\r\n            onChange={(e) => setFormData({ ...formData, image: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"https://...\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            ìˆœì„œ\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.order}\r\n            onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          />\r\n        </div>\r\n\r\n        {/* ğŸŒŸ ê°œì„ : ì‚¬ìš©ëœ ìŠ¤í‚¬ - ì²´í¬ë°•ìŠ¤ UI */}\r\n        <div className=\"md:col-span-2\">\r\n          <div className=\"flex items-center justify-between mb-2\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              ì‚¬ìš©ëœ ìŠ¤í‚¬ (í”„ë¡œì íŠ¸ ì—°ë™) ğŸ”—\r\n            </label>\r\n            {formData.skillIds && formData.skillIds.length > 0 && (\r\n              <span className=\"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded\">\r\n                âœ“ {formData.skillIds.length}ê°œ ì„ íƒë¨\r\n              </span>\r\n            )}\r\n          </div>\r\n          \r\n          {skillsLoading ? (\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 py-2\">\r\n              ìŠ¤í‚¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...\r\n            </div>\r\n          ) : skillCategories.length === 0 ? (\r\n            <div className=\"text-sm text-gray-500 dark:text-gray-400 py-4 text-center border border-gray-300 dark:border-gray-600 rounded-lg\">\r\n              ë“±ë¡ëœ ìŠ¤í‚¬ì´ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ìŠ¤í‚¬ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.\r\n            </div>\r\n          ) : (\r\n            <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 max-h-[400px] overflow-y-auto\">\r\n              {skillCategories.map((category: SkillCategory) => {\r\n                const categorySkillIds = (category.skills || []).map(skill => skill._id!).filter(Boolean)\r\n                const selectedCount = categorySkillIds.filter(id => (formData.skillIds || []).includes(id)).length\r\n                const allSelected = categorySkillIds.length > 0 && selectedCount === categorySkillIds.length\r\n                const someSelected = selectedCount > 0 && selectedCount < categorySkillIds.length\r\n                \r\n                return (\r\n                  <div key={category._id} className=\"mb-4 last:mb-0\">\r\n                    {/* ì¹´í…Œê³ ë¦¬ í—¤ë” (ì „ì²´ ì„ íƒ/í•´ì œ) */}\r\n                    <div \r\n                      className=\"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded\"\r\n                      onClick={() => handleSkillCategoryToggle(category)}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={allSelected}\r\n                        ref={el => {\r\n                          if (el) {\r\n                            el.indeterminate = someSelected\r\n                          }\r\n                        }}\r\n                        onChange={() => handleSkillCategoryToggle(category)}\r\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                        onClick={(e) => e.stopPropagation()}\r\n                      />\r\n                      <label \r\n                        className=\"font-semibold text-gray-900 dark:text-white flex-1 cursor-pointer\"\r\n                        style={{ color: category.color || '#3B82F6' }}\r\n                      >\r\n                        {category.title}\r\n                        {selectedCount > 0 && (\r\n                          <span className=\"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400\">\r\n                            ({selectedCount}/{categorySkillIds.length})\r\n                          </span>\r\n                        )}\r\n                      </label>\r\n                    </div>\r\n                    \r\n                    {/* ìŠ¤í‚¬ ëª©ë¡ */}\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6\">\r\n                      {(category.skills || []).map((skill: Skill) => {\r\n                        const isSelected = (formData.skillIds || []).includes(skill._id!)\r\n                        \r\n                        return (\r\n                          <label\r\n                            key={skill._id}\r\n                            className={`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${\r\n                              isSelected \r\n                                ? 'bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700' \r\n                                : 'hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent'\r\n                            }`}\r\n                          >\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={isSelected}\r\n                              onChange={() => handleSkillToggle(skill._id!)}\r\n                              className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\r\n                            />\r\n                            <span className={`text-sm ${isSelected ? 'font-semibold text-blue-700 dark:text-blue-300' : 'text-gray-700 dark:text-gray-300'}`}>\r\n                              {skill.name}\r\n                            </span>\r\n                          </label>\r\n                        )\r\n                      })}\r\n                    </div>\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          )}\r\n          \r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\r\n            ğŸ’¡ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ì—¬ í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•œ ìŠ¤í‚¬ì„ ì„ íƒí•˜ì„¸ìš”. ì¹´í…Œê³ ë¦¬ ì œëª©ì„ í´ë¦­í•˜ë©´ ì „ì²´ ì„ íƒ/í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\r\n          </p>\r\n        </div>\r\n      </div>\r\n      {/* Description Field (Multilingual) */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ì„¤ëª… (ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°)\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <RichTextEditor\r\n            value={formData.description || ''}\r\n            onChange={(value) => setFormData({ ...formData, description: value })}\r\n            placeholder=\"í”„ë¡œì íŠ¸ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…ì„ ì‘ì„±í•˜ì„¸ìš”.\"\r\n            rows={4}\r\n            className=\"min-h-[150px]\"\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <RichTextEditor\r\n            value={formData.descriptionEn || ''}\r\n            onChange={(value) => setFormData({ ...formData, descriptionEn: value })}\r\n            placeholder=\"Write a brief description of the project.\"\r\n            rows={4}\r\n            className=\"min-h-[150px]\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <RichTextEditor\r\n            value={formData.descriptionJa || ''}\r\n            onChange={(value) => setFormData({ ...formData, descriptionJa: value })}\r\n            placeholder=\"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç°¡å˜ãªèª¬æ˜ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚\"\r\n            rows={4}\r\n            className=\"min-h-[150px]\"\r\n          />\r\n        )}\r\n      </div>\r\n      {/* Technologies Field (Multilingual) */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ê¸°ìˆ  ìŠ¤íƒ (ì‰¼í‘œ ë˜ëŠ” ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <textarea\r\n            value={typeof formData.technologies === 'string' ? formData.technologies : (Array.isArray(formData.technologies) ? formData.technologies.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, technologies: e.target.value })}\r\n            rows={3}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"PLC, Python, Arduino\"\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <textarea\r\n            value={typeof formData.technologiesEn === 'string' ? formData.technologiesEn : (Array.isArray(formData.technologiesEn) ? formData.technologiesEn.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, technologiesEn: e.target.value })}\r\n            rows={3}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"PLC, Python, Arduino\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <textarea\r\n            value={typeof formData.technologiesJa === 'string' ? formData.technologiesJa : (Array.isArray(formData.technologiesJa) ? formData.technologiesJa.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, technologiesJa: e.target.value })}\r\n            rows={3}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"PLC, Python, Arduino\"\r\n          />\r\n        )}\r\n      </div>\r\n      \r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ì¶”ê°€ ì´ë¯¸ì§€ URLs (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)\r\n        </label>\r\n        <textarea\r\n          value={typeof formData.images === 'string' ? formData.images : (Array.isArray(formData.images) ? formData.images.join('\\n') : '')}\r\n          onChange={(e) => {\r\n            const value = e.target.value\r\n            setFormData({\r\n              ...formData,\r\n              images: value, // ì›ë³¸ í…ìŠ¤íŠ¸ë¥¼ ê·¸ëŒ€ë¡œ ì €ì¥\r\n            })\r\n          }}\r\n          rows={3}\r\n          className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n          placeholder=\"https://example.com/image1.jpg\r\nhttps://example.com/image2.jpg\"\r\n        />\r\n      </div>\r\n\r\n      {/* ğŸŒŸ ì˜ìƒ ê´€ë¦¬ ì„¹ì…˜ (ê°œì„ ëœ UI) */}\r\n      <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <label className=\"block text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n            <FaVideo className=\"text-blue-600 dark:text-blue-400\" />\r\n            ë™ì˜ìƒ ê´€ë¦¬\r\n          </label>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleAddVideo}\r\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium\"\r\n          >\r\n            <FaPlus /> ì˜ìƒ ì¶”ê°€\r\n          </button>\r\n        </div>\r\n\r\n        {videoItems.length === 0 ? (\r\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n            <FaVideo className=\"text-4xl mx-auto mb-2 opacity-50\" />\r\n            <p>ì•„ì§ ì¶”ê°€ëœ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>\r\n            <p className=\"text-sm mt-1\">ìœ„ì˜ \"ì˜ìƒ ì¶”ê°€\" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì˜ìƒì„ ì¶”ê°€í•˜ì„¸ìš”.</p>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-6\">\r\n            {videoItems.map((item, index) => (\r\n              <div key={index} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-900 space-y-4\">\r\n                {/* í—¤ë” */}\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h4 className=\"text-md font-semibold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                    <span className=\"flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded-full text-sm font-bold\">\r\n                      {index + 1}\r\n                    </span>\r\n                    ì˜ìƒ {index + 1}\r\n                  </h4>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => handleRemoveVideo(index)}\r\n                    className=\"flex items-center gap-1 px-3 py-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-sm\"\r\n                  >\r\n                    <FaTrash /> ì‚­ì œ\r\n                  </button>\r\n                </div>\r\n\r\n                {/* ì˜ìƒ URL ì…ë ¥ */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    ì˜ìƒ URL *\r\n                  </label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={item.url}\r\n                    onChange={(e) => handleVideoUrlChange(index, e.target.value)}\r\n                    placeholder=\"https://youtube.com/watch?v=... ë˜ëŠ” https://youtube.com/shorts/...\"\r\n                    className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  />\r\n                </div>\r\n\r\n                {/* ì˜ìƒ ì„¤ëª… (RichTextEditor - ë‹¤êµ­ì–´) */}\r\n                <div>\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                      ì˜ìƒ ì„¤ëª… (ë¦¬ì¹˜í…ìŠ¤íŠ¸)\r\n                      <span className=\"text-xs text-gray-500 ml-2\">\r\n                        ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n                      </span>\r\n                    </label>\r\n                    <span className={`text-xs ${\r\n                      (currentLang === 'ko' ? item.description.length : currentLang === 'en' ? item.descriptionEn.length : item.descriptionJa.length) > 5000 \r\n                        ? 'text-red-600 dark:text-red-400 font-bold' \r\n                        : (currentLang === 'ko' ? item.description.length : currentLang === 'en' ? item.descriptionEn.length : item.descriptionJa.length) > 4000\r\n                        ? 'text-orange-600 dark:text-orange-400'\r\n                        : 'text-gray-500 dark:text-gray-400'\r\n                    }`}>\r\n                      {currentLang === 'ko' ? item.description.length : currentLang === 'en' ? item.descriptionEn.length : item.descriptionJa.length} / 5000ì\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {currentLang === 'ko' && (\r\n                    <RichTextEditor\r\n                      value={item.description}\r\n                      onChange={(value) => handleVideoDescriptionChange(index, value, 'ko')}\r\n                      placeholder=\"ì´ ì˜ìƒì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì„ ì‘ì„±í•˜ì„¸ìš”. êµµê²Œ, ê¸°ìš¸ì„, ë¦¬ìŠ¤íŠ¸ ë“± ë‹¤ì–‘í•œ ì„œì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\"\r\n                      rows={4}\r\n                      className=\"min-h-[150px]\"\r\n                    />\r\n                  )}\r\n                  \r\n                  {currentLang === 'en' && (\r\n                    <RichTextEditor\r\n                      value={item.descriptionEn}\r\n                      onChange={(value) => handleVideoDescriptionChange(index, value, 'en')}\r\n                      placeholder=\"Write a detailed description of this video. You can use bold, italic, lists, and other formatting.\"\r\n                      rows={4}\r\n                      className=\"min-h-[150px]\"\r\n                    />\r\n                  )}\r\n                  \r\n                  {currentLang === 'ja' && (\r\n                    <RichTextEditor\r\n                      value={item.descriptionJa}\r\n                      onChange={(value) => handleVideoDescriptionChange(index, value, 'ja')}\r\n                      placeholder=\"ã“ã®å‹•ç”»ã®è©³ç´°ãªèª¬æ˜ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚å¤ªå­—ã€æ–œä½“ã€ãƒªã‚¹ãƒˆãªã©ã®æ›¸å¼ã‚’ä½¿ç”¨ã§ãã¾ã™ã€‚\"\r\n                      rows={4}\r\n                      className=\"min-h-[150px]\"\r\n                    />\r\n                  )}\r\n                  \r\n                  <div className=\"flex items-center justify-between mt-1\">\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      ğŸ’¡ ì´ ì„¤ëª…ì€ í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì—ì„œ ì˜ìƒ í•˜ë‹¨ì— í‘œì‹œë©ë‹ˆë‹¤.\r\n                    </p>\r\n                    {(currentLang === 'ko' ? item.description.length : currentLang === 'en' ? item.descriptionEn.length : item.descriptionJa.length) > 4000 && (\r\n                      <p className=\"text-xs text-orange-600 dark:text-orange-400\">\r\n                        âš ï¸ ê¸€ì ìˆ˜ê°€ ë§ìŠµë‹ˆë‹¤. ê°„ê²°í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Detailed Description Field (Multilingual) */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ìƒì„¸ ì„¤ëª… (ë¦¬ì¹˜í…ìŠ¤íŠ¸ ì—ë””í„°)\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <RichTextEditor\r\n            value={formData.detailedDescription || ''}\r\n            onChange={(value) => setFormData({ ...formData, detailedDescription: value })}\r\n            placeholder=\"í”„ë¡œì íŠ¸ì˜ ìƒì„¸í•œ ì„¤ëª…ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.\"\r\n            rows={6}\r\n            className=\"min-h-[200px]\"\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <RichTextEditor\r\n            value={formData.detailedDescriptionEn || ''}\r\n            onChange={(value) => setFormData({ ...formData, detailedDescriptionEn: value })}\r\n            placeholder=\"Write a detailed description of the project.\"\r\n            rows={6}\r\n            className=\"min-h-[200px]\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <RichTextEditor\r\n            value={formData.detailedDescriptionJa || ''}\r\n            onChange={(value) => setFormData({ ...formData, detailedDescriptionJa: value })}\r\n            placeholder=\"ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è©³ç´°ãªèª¬æ˜ã‚’æ›¸ã„ã¦ãã ã•ã„ã€‚\"\r\n            rows={6}\r\n            className=\"min-h-[200px]\"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Features Field (Multilingual) */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ì£¼ìš” ê¸°ëŠ¥ (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <textarea\r\n            value={typeof formData.features === 'string' ? formData.features : (Array.isArray(formData.features) ? formData.features.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, features: e.target.value })}\r\n            rows={4}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§&#10;ë°ì´í„° ìˆ˜ì§‘ ë° ë¶„ì„&#10;ì•Œë¦¼ ì‹œìŠ¤í…œ\"\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <textarea\r\n            value={typeof formData.featuresEn === 'string' ? formData.featuresEn : (Array.isArray(formData.featuresEn) ? formData.featuresEn.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, featuresEn: e.target.value })}\r\n            rows={4}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"Real-time monitoring&#10;Data collection and analysis&#10;Alert system\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <textarea\r\n            value={typeof formData.featuresJa === 'string' ? formData.featuresJa : (Array.isArray(formData.featuresJa) ? formData.featuresJa.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, featuresJa: e.target.value })}\r\n            rows={4}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–&#10;ãƒ‡ãƒ¼ã‚¿åé›†ã¨åˆ†æ&#10;é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ \"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Learnings Field (Multilingual) */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          í•™ìŠµ ë‚´ìš© (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <textarea\r\n            value={typeof formData.learnings === 'string' ? formData.learnings : (Array.isArray(formData.learnings) ? formData.learnings.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, learnings: e.target.value })}\r\n            rows={4}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"PLC í”„ë¡œê·¸ë˜ë° ê¸°ë²•&#10;ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬&#10;ì›¹ ê¸°ë°˜ ëŒ€ì‹œë³´ë“œ êµ¬ì¶•\"\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <textarea\r\n            value={typeof formData.learningsEn === 'string' ? formData.learningsEn : (Array.isArray(formData.learningsEn) ? formData.learningsEn.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, learningsEn: e.target.value })}\r\n            rows={4}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"PLC programming techniques&#10;Real-time data processing&#10;Web-based dashboard development\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <textarea\r\n            value={typeof formData.learningsJa === 'string' ? formData.learningsJa : (Array.isArray(formData.learningsJa) ? formData.learningsJa.join('\\n') : '')}\r\n            onChange={(e) => setFormData({ ...formData, learningsJa: e.target.value })}\r\n            rows={4}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y\"\r\n            placeholder=\"PLCãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æŠ€è¡“&#10;ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿å‡¦ç†&#10;Webãƒ™ãƒ¼ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰é–‹ç™º\"\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"flex gap-3 pt-4\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={handleSaveClick}\r\n          disabled={isSaving}\r\n          className={`flex-1 flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 rounded-lg transition-colors ${\r\n            isSaving ? 'opacity-50 cursor-not-allowed' : ''\r\n          }`}\r\n        >\r\n          {isSaving ? (\r\n            <>\r\n              <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\r\n              ì €ì¥ ì¤‘...\r\n            </>\r\n          ) : (\r\n            <>\r\n              <FaSave /> ì €ì¥\r\n            </>\r\n          )}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 rounded-lg transition-colors\"\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProjectForm\r\n","import React, { useState, useEffect } from 'react'\r\nimport { SkillCategory, SkillCategoryFormData } from '../../types'\r\nimport LanguageTabs, { AdminLanguage } from '../common/LanguageTabs'\r\n\r\ninterface SkillCategoryFormProps {\r\n  initialData?: SkillCategory | null\r\n  onSave: (data: SkillCategoryFormData) => void\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n}\r\n\r\nconst SkillCategoryForm: React.FC<SkillCategoryFormProps> = ({\r\n  initialData,\r\n  onSave,\r\n  onCancel,\r\n  isSaving = false\r\n}) => {\r\n  const [currentLang, setCurrentLang] = useState<AdminLanguage>('ko')\r\n  const [formData, setFormData] = useState<SkillCategoryFormData>({\r\n    title: '',\r\n    titleEn: '',\r\n    titleJa: '',\r\n    description: '',\r\n    descriptionEn: '',\r\n    descriptionJa: '',\r\n    color: '#3B82F6',\r\n    order: 0\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (initialData) {\r\n      setFormData({\r\n        title: initialData.title,\r\n        titleEn: initialData.titleEn || '',\r\n        titleJa: initialData.titleJa || '',\r\n        description: initialData.description || '',\r\n        descriptionEn: initialData.descriptionEn || '',\r\n        descriptionJa: initialData.descriptionJa || '',\r\n        color: initialData.color,\r\n        order: initialData.order\r\n      })\r\n    }\r\n  }, [initialData])\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    console.log('ğŸ“‹ í¼ ì œì¶œ:', formData)\r\n    onSave(formData)\r\n  }\r\n\r\n  const handleChange = (field: keyof SkillCategoryFormData, value: string | number) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }))\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6\">\r\n      <h3 className=\"text-lg font-semibold mb-4\">\r\n        {initialData ? 'ì¹´í…Œê³ ë¦¬ ìˆ˜ì •' : 'ìƒˆ ì¹´í…Œê³ ë¦¬ ì¶”ê°€'}\r\n      </h3>\r\n      \r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {/* Language Tabs */}\r\n        <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n\r\n        {/* Title Field (Multilingual) */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">\r\n            ì œëª© {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.title}\r\n              onChange={(e) => handleChange('title', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ì˜ˆ: í”„ë¡œê·¸ë˜ë° ì–¸ì–´\"\r\n              required\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleEn || ''}\r\n              onChange={(e) => handleChange('titleEn', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"e.g., Programming Languages\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.titleJa || ''}\r\n              onChange={(e) => handleChange('titleJa', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ä¾‹: ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª\"\r\n            />\r\n          )}\r\n        </div>\r\n        \r\n        {/* Description Field (Multilingual) */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">\r\n            ì„¤ëª…\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <textarea\r\n              value={formData.description}\r\n              onChange={(e) => handleChange('description', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”\"\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <textarea\r\n              value={formData.descriptionEn || ''}\r\n              onChange={(e) => handleChange('descriptionEn', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"Enter description for this category\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <textarea\r\n              value={formData.descriptionJa || ''}\r\n              onChange={(e) => handleChange('descriptionJa', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"ã“ã®ã‚«ãƒ†ã‚´ãƒªã®èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\r\n            />\r\n          )}\r\n        </div>\r\n        \r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">ìƒ‰ìƒ</label>\r\n          <input\r\n            type=\"color\"\r\n            value={formData.color}\r\n            onChange={(e) => handleChange('color', e.target.value)}\r\n            className=\"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded-md\"\r\n          />\r\n        </div>\r\n        \r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">ìˆœì„œ (ê³ ê¸‰ ì˜µì…˜)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.order}\r\n            onChange={(e) => handleChange('order', parseInt(e.target.value) || 0)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            min=\"0\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n            ğŸ’¡ ì¹´í…Œê³ ë¦¬ ëª©ë¡ì—ì„œ ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSaving}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n          >\r\n            {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n          >\r\n            ì·¨ì†Œ\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SkillCategoryForm\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Skill, SkillFormData } from '../../types'\r\nimport DynamicIcon from '../common/DynamicIcon'\r\nimport LanguageTabs, { AdminLanguage } from '../common/LanguageTabs'\r\n\r\ninterface SkillFormProps {\r\n  initialData?: Skill | null\r\n  categoryId?: string | undefined\r\n  onSave: (data: SkillFormData) => void\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n}\r\n\r\nconst SkillForm: React.FC<SkillFormProps> = ({\r\n  initialData,\r\n  onSave,\r\n  onCancel,\r\n  isSaving = false\r\n}) => {\r\n  const [currentLang, setCurrentLang] = useState<AdminLanguage>('ko')\r\n  const [formData, setFormData] = useState<SkillFormData>({\r\n    name: '',\r\n    nameEn: '',\r\n    nameJa: '',\r\n    level: 50, // ìƒˆ ìŠ¤í‚¬ ìƒì„± ì‹œ ê¸°ë³¸ ìˆ™ë ¨ë„\r\n    icon: 'FaMicrochip',\r\n    description: '',\r\n    descriptionEn: '',\r\n    descriptionJa: '',\r\n    order: 0\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (initialData) {\r\n      setFormData({\r\n        name: initialData.name,\r\n        nameEn: initialData.nameEn || '',\r\n        nameJa: initialData.nameJa || '',\r\n        level: initialData.level, // ê¸°ì¡´ ìŠ¤í‚¬ì˜ ìˆ™ë ¨ë„ ìœ ì§€ (ëª©ë¡ì—ì„œ ì¡°ì ˆ)\r\n        icon: initialData.icon,\r\n        description: initialData.description || '',\r\n        descriptionEn: initialData.descriptionEn || '',\r\n        descriptionJa: initialData.descriptionJa || '',\r\n        order: initialData.order\r\n      })\r\n    }\r\n  }, [initialData])\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    onSave(formData)\r\n  }\r\n\r\n  const handleChange = (field: keyof SkillFormData, value: string | number) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }))\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6\">\r\n      <h3 className=\"text-lg font-semibold mb-4\">\r\n        {initialData ? 'ìŠ¤í‚¬ ìˆ˜ì •' : 'ìƒˆ ìŠ¤í‚¬ ì¶”ê°€'}\r\n      </h3>\r\n      \r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        {/* Language Tabs */}\r\n        <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n\r\n        {/* Name Field (Multilingual) */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">\r\n            ì´ë¦„ {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => handleChange('name', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ì˜ˆ: Python, React, PLC\"\r\n              required\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.nameEn || ''}\r\n              onChange={(e) => handleChange('nameEn', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"e.g., Python, React, PLC\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <input\r\n              type=\"text\"\r\n              value={formData.nameJa || ''}\r\n              onChange={(e) => handleChange('nameJa', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              placeholder=\"ä¾‹: Python, React, PLC\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        {/* Description Field (Multilingual) */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">\r\n            ì„¤ëª… (ì„ íƒì‚¬í•­)\r\n            <span className=\"text-xs text-gray-500 ml-2\">\r\n              ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n            </span>\r\n          </label>\r\n          {currentLang === 'ko' && (\r\n            <textarea\r\n              value={formData.description || ''}\r\n              onChange={(e) => handleChange('description', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"ìŠ¤í‚¬ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…\"\r\n            />\r\n          )}\r\n          {currentLang === 'en' && (\r\n            <textarea\r\n              value={formData.descriptionEn || ''}\r\n              onChange={(e) => handleChange('descriptionEn', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"Brief description of this skill\"\r\n            />\r\n          )}\r\n          {currentLang === 'ja' && (\r\n            <textarea\r\n              value={formData.descriptionJa || ''}\r\n              onChange={(e) => handleChange('descriptionJa', e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n              rows={3}\r\n              placeholder=\"ã“ã®ã‚¹ã‚­ãƒ«ã®ç°¡å˜ãªèª¬æ˜\"\r\n            />\r\n          )}\r\n        </div>\r\n        \r\n        {/* ğŸŒŸ ìˆ™ë ¨ë„ëŠ” ê¸°ìˆ  ê´€ë¦¬ ëª©ë¡ì˜ ì¸ë¼ì¸ ìŠ¬ë¼ì´ë”ë¡œ ì¡°ì ˆí•©ë‹ˆë‹¤ */}\r\n        \r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">ì•„ì´ì½˜</label>\r\n          <div className=\"flex items-center gap-3 mb-2\">\r\n            <div className=\"text-lg text-blue-600 dark:text-blue-400\">\r\n              <DynamicIcon iconName={formData.icon} size={20} />\r\n            </div>\r\n            <span className=\"text-sm text-gray-600 dark:text-gray-400\">ë¯¸ë¦¬ë³´ê¸°</span>\r\n          </div>\r\n          <select\r\n            value={formData.icon}\r\n            onChange={(e) => handleChange('icon', e.target.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          >\r\n            <optgroup label=\"í”„ë¡œê·¸ë˜ë° ì–¸ì–´\">\r\n              <option value=\"FaPython\">Python</option>\r\n              <option value=\"SiJavascript\">JavaScript</option>\r\n              <option value=\"SiTypescript\">TypeScript</option>\r\n              <option value=\"SiC\">C</option>\r\n              <option value=\"SiCplusplus\">C++</option>\r\n              <option value=\"SiCsharp\">C#</option>\r\n              <option value=\"SiGo\">Go</option>\r\n              <option value=\"SiRust\">Rust</option>\r\n              <option value=\"SiJava\">Java</option>\r\n              <option value=\"SiPhp\">PHP</option>\r\n              <option value=\"SiRuby\">Ruby</option>\r\n              <option value=\"SiSwift\">Swift</option>\r\n              <option value=\"SiKotlin\">Kotlin</option>\r\n            </optgroup>\r\n            <optgroup label=\"í”„ë ˆì„ì›Œí¬ & ë¼ì´ë¸ŒëŸ¬ë¦¬\">\r\n              <option value=\"SiReact\">React</option>\r\n              <option value=\"SiNodedotjs\">Node.js</option>\r\n              <option value=\"SiVuedotjs\">Vue.js</option>\r\n              <option value=\"SiAngular\">Angular</option>\r\n              <option value=\"SiNextdotjs\">Next.js</option>\r\n              <option value=\"SiExpress\">Express</option>\r\n              <option value=\"SiDjango\">Django</option>\r\n              <option value=\"SiFlask\">Flask</option>\r\n              <option value=\"SiSpring\">Spring</option>\r\n            </optgroup>\r\n            <optgroup label=\"ë°ì´í„°ë² ì´ìŠ¤\">\r\n              <option value=\"FaDatabase\">Database</option>\r\n              <option value=\"SiMysql\">MySQL</option>\r\n              <option value=\"SiMongodb\">MongoDB</option>\r\n              <option value=\"SiPostgresql\">PostgreSQL</option>\r\n              <option value=\"SiRedis\">Redis</option>\r\n              <option value=\"SiSqlite\">SQLite</option>\r\n            </optgroup>\r\n            <optgroup label=\"ìë™í™” & í•˜ë“œì›¨ì–´\">\r\n              <option value=\"FaMicrochip\">Microchip</option>\r\n              <option value=\"FaRobot\">Robot</option>\r\n              <option value=\"SiArduino\">Arduino</option>\r\n              <option value=\"SiRaspberrypi\">Raspberry Pi</option>\r\n              <option value=\"SiSiemens\">Siemens</option>\r\n              <option value=\"SiMitsubishi\">Mitsubishi</option>\r\n            </optgroup>\r\n            <optgroup label=\"ê°œë°œ ë„êµ¬\">\r\n              <option value=\"FaCode\">Code</option>\r\n              <option value=\"FaServer\">Server</option>\r\n              <option value=\"SiDocker\">Docker</option>\r\n              <option value=\"SiGit\">Git</option>\r\n              <option value=\"SiLinux\">Linux</option>\r\n              <option value=\"SiGithub\">GitHub</option>\r\n              <option value=\"SiGitlab\">GitLab</option>\r\n              <option value=\"SiVisualstudiocode\">VS Code</option>\r\n            </optgroup>\r\n            <optgroup label=\"ì–¸ì–´\">\r\n              <option value=\"FaLanguage\">ì–¸ì–´ ì¼ë°˜</option>\r\n              <option value=\"FaGlobeAsia\">ì¼ë³¸ì–´</option>\r\n              <option value=\"FaGlobeEurope\">ë…ì¼ì–´</option>\r\n              <option value=\"FaFlag\">ëŸ¬ì‹œì•„ì–´</option>\r\n              <option value=\"FaFlagCheckered\">í•œêµ­ì–´</option>\r\n              <option value=\"FaGlobe\">ì—ìŠ¤í† ë‹ˆì•„ì–´</option>\r\n              <option value=\"FaFont\">ì¤‘êµ­ì–´</option>\r\n              <option value=\"FaComment\">ì˜ì–´</option>\r\n            </optgroup>\r\n            <optgroup label=\"í•™ë¬¸ & ì „ê³µ\">\r\n              <option value=\"FaLaptopCode\">ì»´í“¨í„°ê³µí•™</option>\r\n              <option value=\"FaChartBar\">í†µê³„í•™</option>\r\n              <option value=\"FaCalculator\">ìˆ˜í•™</option>\r\n              <option value=\"FaSquareRootAlt\">ìˆ˜í•™ (ê³ ê¸‰)</option>\r\n              <option value=\"FaUniversity\">ëŒ€í•™/í•™ìˆ </option>\r\n              <option value=\"FaGraduationCap\">ì¡¸ì—…/í•™ìœ„</option>\r\n            </optgroup>\r\n            <optgroup label=\"ê³µí•™\">\r\n              <option value=\"FaCogs\">ê³µí•™ ì¼ë°˜</option>\r\n              <option value=\"FaTools\">ê¸°ê³„ê³µí•™</option>\r\n              <option value=\"FaWrench\">ê¸°ê³„ì„¤ê³„</option>\r\n              <option value=\"FaBolt\">ì „ê¸°ê³µí•™</option>\r\n              <option value=\"FaPlug\">ì „ë ¥ê³µí•™</option>\r\n              <option value=\"FaMicrochip\">ì „ìê³µí•™</option>\r\n              <option value=\"FaHardHat\">í† ëª©ê³µí•™</option>\r\n              <option value=\"FaBuilding\">ê±´ì¶•ê³µí•™</option>\r\n              <option value=\"FaIndustry\">ì‚°ì—…ê³µí•™</option>\r\n              <option value=\"FaChartLine\">ê²½ì˜ê³µí•™</option>\r\n              <option value=\"FaFlask\">í™”í•™ê³µí•™</option>\r\n              <option value=\"FaCubes\">ì¬ë£Œê³µí•™</option>\r\n              <option value=\"FaPlane\">í•­ê³µê³µí•™</option>\r\n              <option value=\"FaRocket\">ìš°ì£¼ê³µí•™</option>\r\n              <option value=\"FaLeaf\">í™˜ê²½ê³µí•™</option>\r\n              <option value=\"FaRecycle\">ìì›ê³µí•™</option>\r\n              <option value=\"FaDna\">ìƒëª…ê³µí•™</option>\r\n              <option value=\"FaOilCan\">ì„ìœ ê³µí•™</option>\r\n              <option value=\"FaFire\">ì—ë„ˆì§€ê³µí•™</option>\r\n              <option value=\"FaShieldAlt\">ì•ˆì „ê³µí•™</option>\r\n            </optgroup>\r\n            <optgroup label=\"ê³¼í•™\">\r\n              <option value=\"FaAtom\">ì›ì/ë¬¼ë¦¬í•™</option>\r\n              <option value=\"FaFlask\">í™”í•™/ì‹¤í—˜</option>\r\n              <option value=\"FaMicroscope\">ìƒë¬¼í•™/ì—°êµ¬</option>\r\n              <option value=\"FaDna\">DNA/ìœ ì „í•™</option>\r\n              <option value=\"FaRocket\">ìš°ì£¼/í•­ê³µ</option>\r\n              <option value=\"FaSatellite\">ìœ„ì„±/í†µì‹ </option>\r\n              <option value=\"FaBrain\">ë‡Œê³¼í•™/ì‹¬ë¦¬í•™</option>\r\n              <option value=\"FaLightbulb\">ë°œëª…/í˜ì‹ </option>\r\n              <option value=\"FaWaveSquare\">ì „ì/ì „ê¸°ê³µí•™</option>\r\n              <option value=\"FaMagnet\">ìê¸°í•™/ë¬¼ë¦¬</option>\r\n            </optgroup>\r\n            <optgroup label=\"ì˜ˆìˆ  & ì·¨ë¯¸\">\r\n              <option value=\"FaPalette\">ë¯¸ìˆ </option>\r\n              <option value=\"FaPaintBrush\">ê·¸ë¦¼</option>\r\n              <option value=\"FaCamera\">ì‚¬ì§„</option>\r\n              <option value=\"FaCameraRetro\">ì‚¬ì§„ (ë ˆíŠ¸ë¡œ)</option>\r\n              <option value=\"FaCoffee\">ì»¤í”¼</option>\r\n              <option value=\"FaMugHot\">ì»¤í”¼ (ë¨¸ê·¸)</option>\r\n              <option value=\"FaMusic\">ìŒì•…</option>\r\n              <option value=\"FaGuitar\">ì•…ê¸°</option>\r\n              <option value=\"FaFilm\">ì˜í™”/ì˜ìƒ</option>\r\n            </optgroup>\r\n            <optgroup label=\"ê²½ë ¥ & ê²½í—˜\">\r\n              <option value=\"FaUserShield\">êµ°ì¸</option>\r\n              <option value=\"FaShieldAlt\">ë°©ì–´/ë³´ì•ˆ</option>\r\n              <option value=\"FaCar\">ìš´ì „</option>\r\n              <option value=\"FaTruck\">íŠ¸ëŸ­ ìš´ì „</option>\r\n              <option value=\"FaShippingFast\">ë¬¼ë¥˜</option>\r\n              <option value=\"FaBriefcase\">ë¹„ì¦ˆë‹ˆìŠ¤</option>\r\n              <option value=\"FaHandshake\">í˜‘ì—…</option>\r\n            </optgroup>\r\n            <optgroup label=\"ê¸°íƒ€\">\r\n              <option value=\"FaChartLine\">Chart</option>\r\n              <option value=\"FaCubes\">Cubes</option>\r\n              <option value=\"FaCog\">Settings</option>\r\n              <option value=\"FaMobile\">Mobile</option>\r\n              <option value=\"FaDesktop\">Desktop</option>\r\n              <option value=\"FaCloud\">Cloud</option>\r\n              <option value=\"FaNetworkWired\">Network</option>\r\n            </optgroup>\r\n          </select>\r\n        </div>\r\n        \r\n        <div>\r\n          <label className=\"block text-sm font-medium mb-2\">ìˆœì„œ (ê³ ê¸‰ ì˜µì…˜)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={formData.order}\r\n            onChange={(e) => handleChange('order', parseInt(e.target.value) || 0)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            min=\"0\"\r\n          />\r\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n            ğŸ’¡ ìŠ¤í‚¬ ëª©ë¡ì—ì„œ ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSaving}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50\"\r\n          >\r\n            {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onCancel}\r\n            className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n          >\r\n            ì·¨ì†Œ\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SkillForm\r\n","import React, { useState } from 'react'\r\nimport { FaSave } from 'react-icons/fa'\r\nimport { Category, CategoryFormData } from '../../types'\r\nimport LanguageTabs, { AdminLanguage } from '../common/LanguageTabs'\r\n\r\ninterface FormProps {\r\n  data?: Category\r\n  onSave: (data: CategoryFormData) => void\r\n  onCancel: () => void\r\n  isSaving?: boolean\r\n}\r\n\r\nconst CategoryForm: React.FC<FormProps> = ({ \r\n  data, \r\n  onSave, \r\n  onCancel, \r\n  isSaving = false \r\n}) => {\r\n  const [currentLang, setCurrentLang] = useState<AdminLanguage>('ko')\r\n  const [formData, setFormData] = useState<CategoryFormData>(\r\n    data\r\n      ? { \r\n          name: data.name,\r\n          nameEn: data.nameEn,\r\n          nameJa: data.nameJa,\r\n          order: data.order || 0,\r\n        } \r\n      : {\r\n          name: '',\r\n          nameEn: '',\r\n          nameJa: '',\r\n          order: 0,\r\n        }\r\n  )\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    if (!formData.name.trim()) {\r\n      alert('ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')\r\n      return\r\n    }\r\n\r\n    onSave(formData)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      {/* Language Tabs */}\r\n      <LanguageTabs activeLanguage={currentLang} onChange={setCurrentLang} />\r\n\r\n      {/* Name Field (Multilingual) */}\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ì¹´í…Œê³ ë¦¬ ì´ë¦„ {currentLang === 'ko' && <span className=\"text-red-500\">*</span>}\r\n          <span className=\"text-xs text-gray-500 ml-2\">\r\n            ({currentLang === 'ko' ? 'ğŸ‡°ğŸ‡· í•œêµ­ì–´' : currentLang === 'en' ? 'ğŸ‡ºğŸ‡¸ English' : 'ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª'})\r\n          </span>\r\n        </label>\r\n        {currentLang === 'ko' && (\r\n          <input\r\n            type=\"text\"\r\n            value={formData.name}\r\n            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"ì˜ˆ: PLC, ì›¹ê°œë°œ, AI/ML\"\r\n            required\r\n          />\r\n        )}\r\n        {currentLang === 'en' && (\r\n          <input\r\n            type=\"text\"\r\n            value={formData.nameEn || ''}\r\n            onChange={(e) => setFormData({ ...formData, nameEn: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"e.g., PLC, Web Development, AI/ML\"\r\n          />\r\n        )}\r\n        {currentLang === 'ja' && (\r\n          <input\r\n            type=\"text\"\r\n            value={formData.nameJa || ''}\r\n            onChange={(e) => setFormData({ ...formData, nameJa: e.target.value })}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            placeholder=\"ä¾‹: PLC, ã‚¦ã‚§ãƒ–é–‹ç™º, AI/ML\"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div>\r\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n          ìˆœì„œ (ê³ ê¸‰ ì˜µì…˜)\r\n        </label>\r\n        <input\r\n          type=\"number\"\r\n          value={formData.order}\r\n          onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) || 0 })}\r\n          className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          min=\"0\"\r\n        />\r\n        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n          ğŸ’¡ ì¹´í…Œê³ ë¦¬ ëª©ë¡ì—ì„œ ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"flex gap-3 pt-4\">\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isSaving || !formData.name.trim()}\r\n          className=\"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          <FaSave />\r\n          {isSaving ? 'ì €ì¥ ì¤‘...' : 'ì €ì¥'}\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          disabled={isSaving}\r\n          className=\"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium\"\r\n        >\r\n          ì·¨ì†Œ\r\n        </button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default CategoryForm\r\n","import React from 'react'\r\nimport { FaBell } from 'react-icons/fa'\r\n\r\ninterface Notification {\r\n  id: string\r\n  message: string\r\n  read: boolean\r\n  createdAt: string\r\n}\r\n\r\ninterface NotificationDropdownProps {\r\n  notifications: Notification[]\r\n  showNotifications: boolean\r\n  onToggle: () => void\r\n  onNotificationClick?: (notificationId: string) => void\r\n}\r\n\r\nconst NotificationDropdown: React.FC<NotificationDropdownProps> = ({\r\n  notifications,\r\n  showNotifications,\r\n  onToggle,\r\n  onNotificationClick\r\n}) => {\r\n  const getUnreadNotificationCount = () => {\r\n    return notifications.filter(n => !n.read).length\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <button\r\n        onClick={onToggle}\r\n        className=\"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors relative\"\r\n      >\r\n        <FaBell />\r\n        ì•Œë¦¼\r\n        {getUnreadNotificationCount() > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\r\n            {getUnreadNotificationCount()}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {showNotifications && (\r\n        <div className=\"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50\">\r\n          <div className=\"p-4\">\r\n            <h3 className=\"font-semibold text-gray-900 dark:text-white mb-3\">\r\n              ì•Œë¦¼\r\n            </h3>\r\n            {notifications.length === 0 ? (\r\n              <p className=\"text-gray-500 dark:text-gray-400 text-sm\">\r\n                ìƒˆë¡œìš´ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.\r\n              </p>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                {notifications.slice(0, 5).map((notification) => (\r\n                  <div\r\n                    key={notification.id}\r\n                    onClick={() => onNotificationClick?.(notification.id)}\r\n                    className={`p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md ${\r\n                      !notification.read\r\n                        ? 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30'\r\n                        : 'bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600'\r\n                    }`}\r\n                  >\r\n                    <p className=\"text-sm text-gray-900 dark:text-white\">\r\n                      {notification.message}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                      {new Date(notification.createdAt).toLocaleString('ko-KR')}\r\n                    </p>\r\n                  </div>\r\n                ))}\r\n                {notifications.length > 5 && (\r\n                  <p className=\"text-center text-sm text-gray-500 dark:text-gray-400 pt-2 border-t border-gray-200 dark:border-gray-700\">\r\n                    +{notifications.length - 5}ê°œ ë” ë³´ê¸°\r\n                  </p>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NotificationDropdown\r\n","import React, { useState } from 'react'\r\nimport { BookFilterGroup } from '../../hooks/useAdminSidebarState'\r\n\r\ninterface BookFilterMenuProps {\r\n  filterGroup: BookFilterGroup\r\n  count: number\r\n}\r\n\r\nconst BookFilterMenu: React.FC<BookFilterMenuProps> = ({ filterGroup, count }) => {\r\n  const { state, actions, data } = filterGroup\r\n  \r\n  // ë¡œì»¬ UI ìƒíƒœ: ê²€ìƒ‰ì°½ í‘œì‹œ ì—¬ë¶€\r\n  const [showBookSearch, setShowBookSearch] = useState(false)\r\n\r\n  // ëª¨ë“  í•„í„° ì´ˆê¸°í™” í•¨ìˆ˜\r\n  const resetAllFilters = () => {\r\n    actions.setFilter('all')\r\n    actions.setSearchTerm('')\r\n    actions.setSelectedCategory('')\r\n    setShowBookSearch(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n        ì„œì  ê´€ë¦¬\r\n      </h4>\r\n      <div className=\"space-y-1\">\r\n        {/* ëª¨ë“  ì„œì  ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('all')\r\n            actions.setSearchTerm('')\r\n            setShowBookSearch(false)\r\n            actions.setSelectedCategory('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'all' && !state.searchTerm && !state.selectedCategory\r\n              ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ“– ëª¨ë“  ì„œì  ({count})\r\n        </button>\r\n\r\n        {/* í‰ì  5ì  ì„œì  ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('five-star')\r\n            actions.setSearchTerm('')\r\n            setShowBookSearch(false)\r\n            actions.setSelectedCategory('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'five-star'\r\n              ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          â­ í‰ì  5ì  ì„œì \r\n        </button>\r\n\r\n        {/* ì¹´í…Œê³ ë¦¬ë³„ ë³´ê¸° ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('category')\r\n            actions.setSearchTerm('')\r\n            setShowBookSearch(false)\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'category'\r\n              ? 'bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ“š ì¹´í…Œê³ ë¦¬ë³„ ë³´ê¸°\r\n        </button>\r\n\r\n        {/* ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ */}\r\n        {state.filter === 'category' && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <select\r\n              value={state.selectedCategory}\r\n              onChange={(e) => actions.setSelectedCategory(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            >\r\n              <option value=\"\">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>\r\n              {data.categories.map((category) => (\r\n                <option key={category} value={category}>\r\n                  {category}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {/* ê²€ìƒ‰ ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => setShowBookSearch(!showBookSearch)}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            showBookSearch\r\n              ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ” ì„œì  ê²€ìƒ‰\r\n        </button>\r\n\r\n        {/* ê²€ìƒ‰ ì…ë ¥ì°½ */}\r\n        {showBookSearch && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ì œëª©, ì €ì, ì¹´í…Œê³ ë¦¬ ê²€ìƒ‰...\"\r\n              value={state.searchTerm}\r\n              onChange={(e) => actions.setSearchTerm(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* í•„í„° ì´ˆê¸°í™” ë²„íŠ¼ */}\r\n        {(state.filter !== 'all' || state.searchTerm || state.selectedCategory) && (\r\n          <button\r\n            onClick={resetAllFilters}\r\n            className=\"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n          >\r\n            ğŸ”„ í•„í„° ì´ˆê¸°í™”\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BookFilterMenu\r\n","import React, { useState } from 'react'\r\nimport { ExperienceFilterGroup } from '../../hooks/useAdminSidebarState'\r\n\r\ninterface ExperienceFilterMenuProps {\r\n  filterGroup: ExperienceFilterGroup\r\n  count: number\r\n}\r\n\r\nconst ExperienceFilterMenu: React.FC<ExperienceFilterMenuProps> = ({ filterGroup, count }) => {\r\n  const { state, actions, data } = filterGroup\r\n  \r\n  // ë¡œì»¬ UI ìƒíƒœ: ê²€ìƒ‰ì°½ í‘œì‹œ ì—¬ë¶€\r\n  const [showExperienceSearch, setShowExperienceSearch] = useState(false)\r\n\r\n  // ëª¨ë“  í•„í„° ì´ˆê¸°í™” í•¨ìˆ˜\r\n  const resetAllFilters = () => {\r\n    actions.setFilter('all')\r\n    actions.setSearchTerm('')\r\n    actions.setSelectedCompany('')\r\n    actions.setSelectedYear('')\r\n    setShowExperienceSearch(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n        ê²½ë ¥ ê´€ë¦¬\r\n      </h4>\r\n      <div className=\"space-y-1\">\r\n        {/* ëª¨ë“  ê²½ë ¥ ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('all')\r\n            actions.setSearchTerm('')\r\n            setShowExperienceSearch(false)\r\n            actions.setSelectedCompany('')\r\n            actions.setSelectedYear('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'all' && !state.searchTerm && !state.selectedCompany && !state.selectedYear\r\n              ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ’¼ ëª¨ë“  ê²½ë ¥ ({count})\r\n        </button>\r\n\r\n        {/* íšŒì‚¬ë³„ ë³´ê¸° ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('company')\r\n            actions.setSearchTerm('')\r\n            setShowExperienceSearch(false)\r\n            actions.setSelectedYear('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'company'\r\n              ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ¢ íšŒì‚¬ë³„ ë³´ê¸°\r\n        </button>\r\n\r\n        {/* íšŒì‚¬ ë“œë¡­ë‹¤ìš´ */}\r\n        {state.filter === 'company' && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <select\r\n              value={state.selectedCompany}\r\n              onChange={(e) => actions.setSelectedCompany(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            >\r\n              <option value=\"\">íšŒì‚¬ ì„ íƒ</option>\r\n              {data.companies.map((company) => (\r\n                <option key={company} value={company}>\r\n                  {company}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {/* ì—°ë„ë³„ ë³´ê¸° ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('year')\r\n            actions.setSearchTerm('')\r\n            setShowExperienceSearch(false)\r\n            actions.setSelectedCompany('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'year'\r\n              ? 'bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ“… ì—°ë„ë³„ ë³´ê¸°\r\n        </button>\r\n\r\n        {/* ì—°ë„ ë“œë¡­ë‹¤ìš´ */}\r\n        {state.filter === 'year' && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <select\r\n              value={state.selectedYear}\r\n              onChange={(e) => actions.setSelectedYear(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            >\r\n              <option value=\"\">ì—°ë„ ì„ íƒ</option>\r\n              {data.years.map((year) => (\r\n                <option key={year} value={year}>\r\n                  {year}ë…„\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {/* ê²€ìƒ‰ ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => setShowExperienceSearch(!showExperienceSearch)}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            showExperienceSearch\r\n              ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ” ê²½ë ¥ ê²€ìƒ‰\r\n        </button>\r\n\r\n        {/* ê²€ìƒ‰ ì…ë ¥ì°½ */}\r\n        {showExperienceSearch && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ì œëª©, íšŒì‚¬, ì„¤ëª… ê²€ìƒ‰...\"\r\n              value={state.searchTerm}\r\n              onChange={(e) => actions.setSearchTerm(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* í•„í„° ì´ˆê¸°í™” ë²„íŠ¼ */}\r\n        {(state.filter !== 'all' || state.searchTerm || state.selectedCompany || state.selectedYear) && (\r\n          <button\r\n            onClick={resetAllFilters}\r\n            className=\"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n          >\r\n            ğŸ”„ í•„í„° ì´ˆê¸°í™”\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExperienceFilterMenu\r\n","import React, { useState } from 'react'\r\nimport { ProjectFilterGroup } from '../../hooks/useAdminSidebarState'\r\n\r\ninterface ProjectFilterMenuProps {\r\n  filterGroup: ProjectFilterGroup\r\n  count: number\r\n}\r\n\r\nconst ProjectFilterMenu: React.FC<ProjectFilterMenuProps> = ({ filterGroup, count }) => {\r\n  const { state, actions, data } = filterGroup\r\n  \r\n  // ë¡œì»¬ UI ìƒíƒœ: ê²€ìƒ‰ì°½ í‘œì‹œ ì—¬ë¶€\r\n  const [showProjectSearch, setShowProjectSearch] = useState(false)\r\n\r\n  // ëª¨ë“  í•„í„° ì´ˆê¸°í™” í•¨ìˆ˜\r\n  const resetAllFilters = () => {\r\n    actions.setFilter('all')\r\n    actions.setSearchTerm('')\r\n    actions.setSelectedCategory('')\r\n    setShowProjectSearch(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n        í”„ë¡œì íŠ¸ ê´€ë¦¬\r\n      </h4>\r\n      <div className=\"space-y-1\">\r\n        {/* ëª¨ë“  í”„ë¡œì íŠ¸ ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('all')\r\n            actions.setSearchTerm('')\r\n            setShowProjectSearch(false)\r\n            actions.setSelectedCategory('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'all' && !state.searchTerm && !state.selectedCategory\r\n              ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ“ ëª¨ë“  í”„ë¡œì íŠ¸ ({count})\r\n        </button>\r\n\r\n        {/* ì¹´í…Œê³ ë¦¬ë³„ ë³´ê¸° ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('category')\r\n            actions.setSearchTerm('')\r\n            setShowProjectSearch(false)\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'category'\r\n              ? 'bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ·ï¸ ì¹´í…Œê³ ë¦¬ë³„ ë³´ê¸°\r\n        </button>\r\n\r\n        {/* ì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´ */}\r\n        {state.filter === 'category' && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <select\r\n              value={state.selectedCategory}\r\n              onChange={(e) => actions.setSelectedCategory(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            >\r\n              <option value=\"\">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>\r\n              {data.categories.map((category) => (\r\n                <option key={category} value={category}>\r\n                  {category}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        )}\r\n\r\n        {/* ì£¼ìš” í”„ë¡œì íŠ¸ ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => {\r\n            actions.setFilter('featured')\r\n            actions.setSearchTerm('')\r\n            setShowProjectSearch(false)\r\n            actions.setSelectedCategory('')\r\n          }}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            state.filter === 'featured'\r\n              ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸŒŸ ì£¼ìš” í”„ë¡œì íŠ¸\r\n        </button>\r\n\r\n        {/* ê²€ìƒ‰ ë²„íŠ¼ */}\r\n        <button\r\n          onClick={() => setShowProjectSearch(!showProjectSearch)}\r\n          className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n            showProjectSearch\r\n              ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300'\r\n              : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n          }`}\r\n        >\r\n          ğŸ” í”„ë¡œì íŠ¸ ê²€ìƒ‰\r\n        </button>\r\n\r\n        {/* ê²€ìƒ‰ ì…ë ¥ì°½ */}\r\n        {showProjectSearch && (\r\n          <div className=\"ml-4 mb-2\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"ì œëª©, ì„¤ëª…, ê¸°ìˆ ìŠ¤íƒ ê²€ìƒ‰...\"\r\n              value={state.searchTerm}\r\n              onChange={(e) => actions.setSearchTerm(e.target.value)}\r\n              className=\"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {/* í•„í„° ì´ˆê¸°í™” ë²„íŠ¼ */}\r\n        {(state.filter !== 'all' || state.searchTerm || state.selectedCategory) && (\r\n          <button\r\n            onClick={resetAllFilters}\r\n            className=\"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n          >\r\n            ğŸ”„ í•„í„° ì´ˆê¸°í™”\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProjectFilterMenu\r\n","import React from 'react'\r\n\r\ninterface SettingsMenuProps {\r\n  activeSettingsSection: string | null\r\n  setActiveSettingsSection: (section: string | null) => void\r\n}\r\n\r\nconst SettingsMenu: React.FC<SettingsMenuProps> = ({ \r\n  activeSettingsSection, \r\n  setActiveSettingsSection \r\n}) => {\r\n  const settingsOptions = [\r\n    { id: 'general', label: 'ğŸ  ì¼ë°˜ ì„¤ì •', description: 'ì‚¬ì´íŠ¸ ê¸°ë³¸ ì •ë³´' },\r\n    { id: 'appearance', label: 'ğŸ¨ ì™¸ê´€ ì„¤ì •', description: 'í…Œë§ˆ ë° ë””ìì¸' },\r\n    { id: 'seo', label: 'ğŸ” SEO ì„¤ì •', description: 'ê²€ìƒ‰ ì—”ì§„ ìµœì í™”' },\r\n    { id: 'social', label: 'ğŸ“± ì†Œì…œ ë¯¸ë””ì–´', description: 'ì†Œì…œ ë§í¬ ë° ì—°ë½ì²˜' },\r\n    { id: 'analytics', label: 'ğŸ“Š ë¶„ì„ ë„êµ¬', description: 'Google Analytics ë“±' },\r\n    { id: 'security', label: 'ğŸ”’ ë³´ì•ˆ ì„¤ì •', description: 'ì¸ì¦ ë° ë³´ì•ˆ' },\r\n  ]\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\r\n        ì‚¬ì´íŠ¸ ì„¤ì •\r\n      </h4>\r\n      \r\n      <div className=\"space-y-1\">\r\n        {settingsOptions.map((option) => (\r\n          <button\r\n            key={option.id}\r\n            onClick={() => setActiveSettingsSection(option.id)}\r\n            className={`w-full text-left px-3 py-2 text-sm rounded-lg transition-colors ${\r\n              activeSettingsSection === option.id\r\n                ? 'bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <div className=\"flex flex-col\">\r\n              <span className=\"font-medium\">{option.label}</span>\r\n              <span className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\r\n                {option.description}\r\n              </span>\r\n            </div>\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ì„¤ì • ì´ˆê¸°í™” ë²„íŠ¼ */}\r\n      {activeSettingsSection && (\r\n        <button\r\n          onClick={() => setActiveSettingsSection(null)}\r\n          className=\"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700\"\r\n        >\r\n          â† ì„¤ì • ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°\r\n        </button>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SettingsMenu\r\n","import React from 'react'\r\nimport { AdminTab, BookFilterGroup, ExperienceFilterGroup, ProjectFilterGroup } from '../../hooks/useAdminSidebarState'\r\n\r\n// ë¶„ë¦¬ëœ ì»´í¬ë„ŒíŠ¸ë“¤ import\r\nimport BookFilterMenu from './BookFilterMenu'\r\nimport ExperienceFilterMenu from './ExperienceFilterMenu'\r\nimport ProjectFilterMenu from './ProjectFilterMenu'\r\nimport SettingsMenu from './SettingsMenu'\r\n\r\ninterface DataCounts {\r\n  books: number\r\n  videoLearnings: number\r\n  videoPlaylists: number\r\n  experiences: number\r\n  projects: number\r\n  messages: number\r\n  skills: number\r\n  categories: number\r\n}\r\n\r\ninterface RightSidebarProps {\r\n  // íƒ­ ê´€ë ¨ props (í•µì‹¬ë§Œ)\r\n  activeTab: AdminTab\r\n  setActiveTab: (tab: AdminTab) => void\r\n  activeSettingsSection: string | null\r\n  setActiveSettingsSection: (section: string | null) => void\r\n  \r\n  // ë°ì´í„° ì¹´ìš´íŠ¸\r\n  counts: DataCounts\r\n  refreshCounts: () => void\r\n  \r\n  // í•„í„° ê·¸ë£¹ë“¤ (ê°ê° í•˜ë‚˜ì˜ ê°ì²´ë¡œ ì „ë‹¬)\r\n  bookFilters: BookFilterGroup\r\n  experienceFilters: ExperienceFilterGroup\r\n  projectFilters: ProjectFilterGroup\r\n}\r\n\r\nconst RightSidebar: React.FC<RightSidebarProps> = ({ \r\n  activeTab, \r\n  setActiveTab, \r\n  activeSettingsSection,\r\n  setActiveSettingsSection, \r\n  counts,\r\n  refreshCounts,\r\n  bookFilters,\r\n  experienceFilters,\r\n  projectFilters,\r\n}) => {\r\n  return (\r\n    <div className=\"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 p-6\">\r\n      <div className=\"sticky top-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n          ë¹ ë¥¸ ë©”ë‰´\r\n        </h3>\r\n\r\n        {/* ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ í™ˆ ë²„íŠ¼ */}\r\n        <div className=\"mb-8\">\r\n          <button\r\n            onClick={() => {\r\n              setActiveTab('settings')\r\n              setActiveSettingsSection(null)\r\n            }}\r\n            className={`w-full flex items-center gap-3 px-4 py-3 text-sm font-semibold rounded-lg transition-colors ${\r\n              activeTab === 'settings' && activeSettingsSection === null\r\n                ? 'bg-blue-600 text-white'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span className=\"text-lg\">ğŸ </span>\r\n            ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ\r\n          </button>\r\n        </div>\r\n\r\n        {/* ê´€ë¦¬ ë²„íŠ¼ë“¤ */}\r\n        <div className=\"space-y-2 mb-8\">\r\n          <button\r\n            onClick={() => setActiveTab('books')}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'books'\r\n                ? 'bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸ“š ì„œì  ê´€ë¦¬</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.books}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => {\r\n              setActiveSettingsSection(null)\r\n              setActiveTab('videoLearnings')\r\n            }}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'videoLearnings'\r\n                ? 'bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸ“¹ ê°œë³„ ì˜ìƒ</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.videoLearnings || 0}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => {\r\n              setActiveSettingsSection(null)\r\n              setActiveTab('videoPlaylists')\r\n            }}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'videoPlaylists'\r\n                ? 'bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸ“º ì‹œë¦¬ì¦ˆ ì˜ìƒ</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.videoPlaylists || 0}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('experiences')}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'experiences'\r\n                ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸ’¼ ê²½ë ¥ ê´€ë¦¬</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.experiences}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('projects')}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'projects'\r\n                ? 'bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸš€ í”„ë¡œì íŠ¸ ê´€ë¦¬</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.projects}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('messages')}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'messages'\r\n                ? 'bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸ’¬ ë©”ì‹œì§€ ê´€ë¦¬</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.messages}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => setActiveTab('skills')}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'skills'\r\n                ? 'bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>âš¡ ê¸°ìˆ  ê´€ë¦¬</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.skills}\r\n            </span>\r\n          </button>\r\n\r\n          <button\r\n            onClick={() => {\r\n              setActiveSettingsSection(null)\r\n              setActiveTab('categories')\r\n            }}\r\n            className={`w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors ${\r\n              activeTab === 'categories'\r\n                ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300'\r\n                : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n          >\r\n            <span>ğŸ“‚ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬</span>\r\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full\">\r\n              {counts.categories || 0}\r\n            </span>\r\n          </button>\r\n        </div>\r\n\r\n        {/* ì„¸ë¶€ ë©”ë‰´ - ë¶„ë¦¬ëœ ì»´í¬ë„ŒíŠ¸ë“¤ë¡œ ëŒ€ì²´ */}\r\n        {activeTab === 'books' && (\r\n          <BookFilterMenu \r\n            filterGroup={bookFilters} \r\n            count={counts.books} \r\n          />\r\n        )}\r\n\r\n        {activeTab === 'experiences' && (\r\n          <ExperienceFilterMenu \r\n            filterGroup={experienceFilters} \r\n            count={counts.experiences} \r\n          />\r\n        )}\r\n\r\n        {activeTab === 'projects' && (\r\n          <ProjectFilterMenu \r\n            filterGroup={projectFilters} \r\n            count={counts.projects} \r\n          />\r\n        )}\r\n\r\n        {activeTab === 'settings' && (\r\n          <SettingsMenu \r\n            activeSettingsSection={activeSettingsSection}\r\n            setActiveSettingsSection={setActiveSettingsSection}\r\n          />\r\n        )}\r\n\r\n        {/* ê³µí†µ ë„êµ¬ */}\r\n        <div className=\"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700\">\r\n          <div className=\"space-y-2\">\r\n            <button\r\n              onClick={refreshCounts}\r\n              className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n            >\r\n              <span>ğŸ”„</span>\r\n              ë°ì´í„° ìƒˆë¡œê³ ì¹¨\r\n            </button>\r\n            \r\n            <div className=\"text-xs text-gray-500 dark:text-gray-400 text-center\">\r\n              ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: {new Date().toLocaleTimeString('ko-KR')}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RightSidebar"],"names":["ProtectedRoute","element","Component","isAuthenticated","isLoading","useAuth","jsxRuntimeExports","jsxs","style","display","justifyContent","alignItems","height","backgroundColor","children","width","border","borderTop","borderRadius","animation","marginLeft","color","fontSize","jsx","Navigate","to","replace","LoadScene","onFirstVisitComplete","progress","setProgress","useState","navigate","useNavigate","useEffect","window","location","hash","sceneRef","useRef","animationRef","tlRef","textMeshesRef","sceneInstanceRef","cameraRef","rendererRef","autoNavigateTimer","setTimeout","localStorage","setItem","clearTimeout","cleanup","current","cancelAnimationFrame","kill","canvas","domElement","contains","removeChild","dispose","initThreeScene","scene","THREE.Scene","background","THREE.Color","camera","THREE.PerspectiveCamera","innerWidth","innerHeight","renderer","THREE.WebGLRenderer","alpha","antialias","setSize","setClearColor","shadowMap","enabled","type","THREE.PCFSoftShadowMap","appendChild","ambientLight","THREE.AmbientLight","add","directionalLight","THREE.DirectionalLight","position","set","castShadow","shadow","mapSize","pointLight","THREE.PointLight","pointLight2","create3DText","z","lookAt","animate","requestAnimationFrame","forEach","mesh","index","rotation","y","x","Math","sin","Date","now","cos","render","handleResize","aspect","updateProjectionMatrix","addEventListener","removeEventListener","loadingLetters","letter","geometry","createLGeometry","THREE.TorusGeometry","THREE.ConeGeometry","createDGeometry","THREE.BoxGeometry","createNGeometry","createGGeometry","hue","length","material","THREE.MeshPhongMaterial","setHSL","shininess","specular","emissive","THREE.Mesh","receiveShadow","startX","scale","PI","push","gsapWithCSS","duration","delay","ease","THREE.BufferGeometry","vertices","setAttribute","THREE.Float32BufferAttribute","computeVertexNormals","i","angle","setupAnimation","tl","gsap","timeline","onUpdate","this","className","ref","motion","div","initial","opacity","transition","round","IconMap","FaIcons","SiIcons","DynamicIcon","iconName","size","IconComponent","React","createElement","FaIcons.FaMicrochip","LanguageSwitcher","variant","i18n","useTranslation","changeLanguage","lang","languages","code","short","full","FaGlobe","map","isActive","language","onClick","getLocalizedField","currentLang","koValue","enValue","jaValue","getLocalizedArrayField","koArray","enArray","jaArray","getLocalizedSkillName","skill","name","nameEn","nameJa","getLocalizedSkillDescription","description","descriptionEn","descriptionJa","getLocalizedCategoryName","category","getLocalizedSkillCategoryTitle","skillCategory","title","titleEn","titleJa","SidebarNavItem","item","setIsOpen","activeSection","useMemo","pathname","startsWith","path","icon","classes","handleNavigation","useCallback","href","Sidebar","darkMode","toggleDarkMode","onLoginClick","isOpen","useLocation","logout","t","settings","siteSettings","useSiteSettings","useScrollSpy","navItems","FaHome","FaUser","FaBriefcase","FaWrench","FaLaptopCode","FaBook","FaVideo","FaCommentDots","coreSkills","languageSkills","isLoadingSkills","useSidebarSkills","socialLinks","FaGithub","label","FaLinkedin","FaEnvelope","Fragment","FaTimes","FaBars","exit","firstName","firstNameEn","firstNameJa","FaCode","fullName","fullNameEn","fullNameJa","role","roleEn","roleJa","subtitle","subtitleEn","subtitleJa","locationEn","locationJa","education","educationEn","educationJa","yearsOfExperience","yearsOfExperienceEn","yearsOfExperienceJa","skillName","isNative","includes","level","cx","cy","r","stroke","strokeWidth","fill","strokeDasharray","strokeLinecap","_id","Link","FaUserShield","Icon","FaSun","FaMoon","FaSignInAlt","LoginModal","onClose","username","setUsername","password","setPassword","error","setError","setIsLoading","login","handleClose","AnimatePresence","id","onSubmit","async","e","preventDefault","err","errorMessage","message","htmlFor","value","onChange","target","placeholder","required","autoComplete","FaLock","button","disabled","whileHover","whileTap","FaCircleNotch","AppLayout","showLoginModal","setShowLoginModal","isFirstVisit","SimpleLoadingSpinner","Suspense","fallback","Outlet","Hero","loading","scrollYProgress","useScroll","yTop","useTransform","yBottom","itemVariants","hidden","visible","stats","number","stat1Number","stat1Label","stat1LabelEn","stat1LabelJa","FaCoffee","stat2Number","stat2Label","stat2LabelEn","stat2LabelJa","stat3Number","stat3Label","stat3LabelEn","stat3LabelJa","FaCog","variants","staggerChildren","heroTag","heroTagEn","heroTagJa","h1","heroTitle","heroTitleEn","heroTitleJa","p","heroSubtitle","heroSubtitleEn","heroSubtitleJa","FaArrowRight","alert","FaDownload","stat","BookCoverImage","src","alt","fallbackIcon","imageState","setImageState","imageSrc","setImageSrc","FaImage","decoding","onLoad","onError","ScrollToTopButton","isVisible","setIsVisible","toggleVisibility","scrollY","scrollTo","top","behavior","FaArrowUp","getFormattedReadingTime","text","wordsPerMinute","minutes","words","trim","split","ceil","max","calculateReadingTime","formatReadingTime","RichTextEditor","rows","textareaRef","cursorPosition","setCursorPosition","updateCursorPosition","selectionStart","getCurrentLine","lines","currentLineIndex","lineStart","lineLengthWithNewline","_a","lineIndex","line","applyHeading","prefix","repeat","match","join","applyListStyle","indent","adjustIndent","direction","applyTextStyle","textarea","start","end","selectionEnd","selectedText","substring","wrap","wrappedText","newValue","setSelectionRange","focus","FaBold","FaItalic","FaUnderline","FaListUl","FaListOl","FaOutdent","FaIndent","newLine","splice","newPosition","FaChevronDown","codeBlockLines","positionToMove","_b","MdCode","onSelect","onKeyUp","onMouseUp","dangerouslySetInnerHTML","__html","_match","p1","p2","LanguageTabs","activeLanguage","flag","LearningItem","learning","isEditing","currentFormData","setCurrentFormData","onStartEdit","onSaveEdit","onCancelEdit","onDelete","isSaving","allSkillsMap","onSkillLinkChange","chapterId","editLang","setEditLang","linkedSkills","skillIds","get","skillId","filter","availableSkills","Array","from","values","topic","prev","topicEn","topicJa","content","contentEn","contentJa","FaTag","isLinked","dynamicStyle","handleSkillToggle","FaEdit","FaTrash","badgeStyle","colorCode","formatDate","createdAt","formatRelativeDate","useParams","data","book","isError","useBook","bookChapters","useQuery","queryKey","queryFn","response","chaptersAPI","getByBook","staleTime","skillCategories","useSkills","deleteMutation","useDeleteBook","bookApiError","editingLearningId","showAddForm","learningApiError","handleToggleAddForm","handleAddLearning","handleDeleteLearning","handleStartEdit","handleSaveEdit","handleCancelEdit","handleSkillLinkChange","useLearningManager","expandedChapterId","setExpandedChapterId","showAddChapterForm","setShowAddChapterForm","chapterFormData","setChapterFormData","order","linkedBookSkills","allSkills","flatMap","skills","uniqueSkillIds","Set","chapter","learnings","has","levelText","Map","isDeleting","isPending","sortedLearnings","sort","a","b","getTime","state","FaArrowLeft","coverImage","categoryIds","catIdOrObj","catName","tab","editId","confirm","mutateAsync","author","authorEn","authorJa","rating","_","FaStar","FaCalendar","readDate","FaCubes","FaPlus","create","isExpanded","toggleChapter","prevId","span","rotate","FaChevronRight","StickyVideoPlayer","videoId","playerRef","externalPlayerRef","onPlayerReady","containerRef","playerWrapperRef","isSticky","setIsSticky","isClosed","setIsClosed","containerTop","setContainerTop","rect","getBoundingClientRect","handleScroll","passive","left","right","maxWidth","damping","stiffness","video","useVideoLearning","useDeleteVideoLearning","updateMutation","useUpdateVideoLearning","success","toastError","useToastHelpers","playerContainerRef","isPlayerReady","setIsPlayerReady","isEditingKeyTakeaways","setIsEditingKeyTakeaways","editingContent","setEditingContent","videoUrl","extractYouTubeId","YT","tag","document","firstScriptTag","getElementsByTagName","parentNode","insertBefore","initializePlayer","Player","playerVars","enablejsapi","origin","rel","modestbranding","fs","cc_load_policy","iv_load_policy","showinfo","controls","events","onReady","onYouTubeIframeAPIReady","destroy","cat","watchDate","purpose","FaBullseye","ReactMarkdown","application","FaRocket","keyTakeaways","FaLightbulb","renderHtmlWithTimestamps","tagName","dataset","seconds","seekTo","playVideo","handleTimestampClick","parseInt","skillIdOrObj","Boolean","updateData","_c","FaSave","playlist","useVideoPlaylist","playlistVideos","usePlaylistVideos","useDeleteVideoPlaylist","updateVideoMutation","useUpdatePlaylistVideo","activeVideoId","setActiveVideoId","activeVideoTab","setActiveVideoTab","showVideoTabs","setShowVideoTabs","editingVideoId","setEditingVideoId","playlistId","listType","list","activeVideo","find","v","targetVideoId","videoIndex","findIndex","playVideoAt","FaList","FaChevronUp","handleVideoTabClick","ProjectCard","project","getStatusColor","getStatusText","technologies","technologiesEn","technologiesJa","hasLinks","githubLink","liveLink","layout","scrollPosition","image","status","slice","tech","stopPropagation","FaExternalLinkAlt","localizedProject","useProjectDetail","selectedImage","setSelectedImage","currentVideoIndex","setCurrentVideoIndex","currentShortsIndex","setCurrentShortsIndex","isYouTubeShorts","url","getYouTubeEmbedUrl","regularVideos","videos","shortsVideos","images","FaPlay","allowFullScreen","allow","preload","videoDescriptions","FaChevronLeft","videoIndexInAll","indexOf","maxHeight","margin","detailedDescription","features","feature","iconMap","FaGraduationCap","FaChartLine","FaRobot","FaCar","FaShieldAlt","ExperienceItem","exp","isLast","setIsExpanded","iconKey","some","idOrObj","descriptionItems","iconColor","iconBgColor","bgColor","company","companyEn","companyJa","period","details","detail","idx","categoryEn","categoryJa","items","itemsEn","itemsJa","itemIdx","li","FaCheckCircle","skillsEn","skillsJa","BookForm","onSave","onCancel","availableCategories","setCurrentLang","skillsLoading","categories","categoriesLoading","useCategories","initialReadDate","isNaN","toISOString","initialCategoryIds","initialSkillIds","formData","setFormData","handleCategoryToggle","categoryId","currentCategoryIds","newCategoryIds","handleSkillCategoryToggle","categorySkillIds","currentSkillIds","newSkillIds","every","uniqueIds","isFormValid","catId","c","isSelected","checked","star","min","step","newRating","parseFloat","selectedCount","allSelected","someSelected","el","indeterminate","ChapterForm","maxOrder","setTitle","setOrder","setIsSaving","LearningForm","setTopic","setContent","stripHtml","html","tmp","innerHTML","textContent","innerText","ReactQuill","theme","modules","toolbar","header","formats","ChapterLearningList","chapters","onAddChapter","onEditChapter","onDeleteChapter","onAddLearning","onEditLearning","onDeleteLearning","expandedChapters","setExpandedChapters","ch","learningCount","newSet","delete","updatedAt","Toast","toast","getBgColor","FaCheck","FaExclamationTriangle","FaInfo","getIcon","ToastContainer","toasts","VideoLearningForm","initialWatchDate","videoUrlInput","setVideoUrlInput","thumbnailUrl","getYouTubeThumbnail","isValidUrl","starValue","categorySkills","s","selectedInCategory","input","VideoPlaylistForm","playlistUrlInput","setPlaylistUrlInput","extractYouTubePlaylistId","reactExports","getYouTubePlaylistThumbnail","saveData","PlaylistVideoForm","iconOptions","key","SortableCategoryItem","editingCategoryIndex","onEdit","onRemove","attributes","listeners","setNodeRef","transform","isDragging","useSortable","CSS","Transform","toString","zIndex","ExperienceForm","initialFormData","skillsInput","setSkillsInput","isArray","skillsInputEn","setSkillsInputEn","skillsInputJa","setSkillsInputJa","setEditingCategoryIndex","categoryFormData","setCategoryFormData","editDetailCategory","removeDetailCategory","newDetails","skillsArray","skillsArrayEn","skillsArrayJa","orderedDetails","finalFormData","option","opt","DndContext","collisionDetection","closestCenter","onDragEnd","event","active","over","oldIndex","newIndex","movedItem","reorderedDetails","SortableContext","strategy","verticalListSortingStrategy","newDetail","onBlur","ProjectForm","videoItems","handleVideoUrlChange","handleVideoDescriptionChange","handleAddVideo","handleRemoveVideo","prepareDataForSubmit","useProjectForm","detailedDescriptionEn","detailedDescriptionJa","featuresEn","featuresJa","learningsEn","learningsJa","processedData","SkillCategoryForm","initialData","handleChange","field","SkillForm","CategoryForm","NotificationDropdown","notifications","showNotifications","onToggle","onNotificationClick","getUnreadNotificationCount","n","read","FaBell","notification","toLocaleString","BookFilterMenu","filterGroup","count","actions","showBookSearch","setShowBookSearch","setFilter","setSearchTerm","setSelectedCategory","searchTerm","selectedCategory","ExperienceFilterMenu","showExperienceSearch","setShowExperienceSearch","setSelectedCompany","setSelectedYear","selectedCompany","selectedYear","companies","years","year","ProjectFilterMenu","showProjectSearch","setShowProjectSearch","SettingsMenu","activeSettingsSection","setActiveSettingsSection","RightSidebar","activeTab","setActiveTab","counts","refreshCounts","bookFilters","experienceFilters","projectFilters","books","videoLearnings","videoPlaylists","experiences","projects","messages","toLocaleTimeString"],"mappings":"0tCAQA,MAAMA,GAAgD,EAAGC,QAASC,MAChE,MAAMC,gBAAEA,EAAAC,UAAiBA,GAAcC,KAGvC,OAAID,EAEAE,EAAAC,KAAC,OAAIC,MAAO,CACVC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SACZC,OAAQ,QACRC,gBAAiB,WAEjBC,SAAA,OAAC,OAAIN,MAAO,CACVO,MAAO,OACPH,OAAQ,OACRI,OAAQ,oBACRC,UAAW,wBACXC,aAAc,MACdC,UAAW,mCAEZ,QAAKX,MAAO,CACXY,WAAY,OACZC,MAAO,UACPC,SAAU,QACTR,SAAU,kBAMdX,QAKGD,EAAU,CAAA,GAJRqB,EAAAA,IAAAC,EAAA,CAASC,GAAG,IAAIC,SAAO,KC9B7BC,GAAsC,EAAGC,2BAC7C,MAAOC,EAAUC,GAAeC,WAAS,GACnCC,EAAWC,IAGjBC,EAAAA,UAAU,KACKC,OAAOC,SAASC,MAE3BL,EAAS,QAAS,CAAEN,SAAS,KAE9B,CAACM,IACE,MAAAM,EAAWC,SAAuB,MAClCC,EAAeD,EAAAA,SACfE,EAAQF,EAAAA,SACRG,EAAgBH,SAAqB,IACrCI,EAAmBJ,EAAAA,SACnBK,EAAYL,EAAAA,SACZM,EAAcN,EAAAA,SAEpBL,EAAAA,UAAU,aAOD,WAGN,IAGHA,EAAAA,UAAU,KACF,MAAAY,EAAoBC,WAAW,KAEtBC,aAAAC,QAAQ,aAAc,QACZ,MAAArB,GAAAA,IACvBI,EAAS,UACR,KAEI,MAAA,IAAMkB,aAAaJ,IACzB,CAACd,EAAUJ,IAEd,MAAMuB,EAAU,KAOV,GANAX,EAAaY,SACfC,qBAAqBb,EAAaY,SAEhCX,EAAMW,SACRX,EAAMW,QAAQE,OAEZT,EAAYO,SAAWd,EAASc,QAAS,CACrC,MAAAG,EAASV,EAAYO,QAAQI,WAC/BlB,EAASc,QAAQK,SAASF,IACnBjB,EAAAc,QAAQM,YAAYH,GAE/BV,EAAYO,QAAQO,SACtB,CACAjB,EAAcU,QAAU,IAGpBQ,EAAiB,KACrB,IAAKtB,EAASc,QAAS,OAGjB,MAAAS,EAAQ,IAAIC,GACZD,EAAAE,WAAa,IAAIC,GAAY,QAE7B,MAAAC,EAAS,IAAIC,GAAwB,GAAI/B,OAAOgC,WAAahC,OAAOiC,YAAa,GAAK,KACtFC,EAAW,IAAIC,GAAoB,CAAEC,OAAO,EAAOC,WAAW,IAEpEH,EAASI,QAAQtC,OAAOgC,WAAYhC,OAAOiC,aAClCC,EAAAK,cAAc,OAAU,GACjCL,EAASM,UAAUC,SAAU,EACpBP,EAAAM,UAAUE,KAAOC,GAEjBxC,EAAAc,QAAQ2B,YAAYV,EAASb,YAGtC,MAAMwB,EAAe,IAAIC,GAAmB,SAAU,IACtDpB,EAAMqB,IAAIF,GAEV,MAAMG,EAAmB,IAAIC,GAAuB,SAAU,IAC9DD,EAAiBE,SAASC,IAAI,GAAI,GAAI,GACtCH,EAAiBI,YAAa,EACbJ,EAAAK,OAAOC,QAAQ1E,MAAQ,KACvBoE,EAAAK,OAAOC,QAAQ7E,OAAS,KACzCiD,EAAMqB,IAAIC,GAGV,MAAMO,EAAa,IAAIC,GAAiB,MAAU,GAAK,KACvDD,EAAWL,SAASC,KAAS,GAAA,EAAG,IAChCzB,EAAMqB,IAAIQ,GAEV,MAAME,EAAc,IAAID,GAAiB,SAAU,GAAK,KACxDC,EAAYP,SAASC,IAAI,GAAI,EAAG,IAChCzB,EAAMqB,IAAIU,GAGVC,EAAahC,GAGbI,EAAOoB,SAASS,EAAI,GACb7B,EAAA8B,OAAO,EAAG,EAAG,GAGpBpD,EAAiBS,QAAUS,EAC3BjB,EAAUQ,QAAUa,EACpBpB,EAAYO,QAAUiB,EAGtB,MAAM2B,EAAU,KACDxD,EAAAY,QAAU6C,sBAAsBD,GAG7CtD,EAAcU,QAAQ8C,QAAQ,CAACC,EAAMC,KAC/BD,IACGA,EAAAE,SAASC,GAAK,KAAiB,KAARF,EACvBD,EAAAE,SAASE,EAA2C,GAAvCC,KAAKC,IAAiB,KAAbC,KAAKC,MAAgBP,GAC3CD,EAAAd,SAASiB,EAA2C,GAAvCE,KAAKC,IAAiB,KAAbC,KAAKC,MAAgBP,MAKhDxD,EAAUQ,UACFR,EAAAQ,QAAQiC,SAASkB,EAAoC,EAAhCC,KAAKC,IAAiB,KAAbC,KAAKC,OACnC/D,EAAAQ,QAAQiC,SAASiB,EAAoC,EAAhCE,KAAKI,IAAiB,KAAbF,KAAKC,OAC7C/D,EAAUQ,QAAQ2C,OAAO,EAAG,EAAG,IAGxB1B,EAAAwC,OAAOhD,EAAOI,QAKzB,MAAM6C,EAAe,KACflE,EAAUQ,SAAWP,EAAYO,UACnCR,EAAUQ,QAAQ2D,OAAS5E,OAAOgC,WAAahC,OAAOiC,YACtDxB,EAAUQ,QAAQ4D,yBAClBnE,EAAYO,QAAQqB,QAAQtC,OAAOgC,WAAYhC,OAAOiC,eAK1D,OAFOjC,OAAA8E,iBAAiB,SAAUH,GAE3B,KACE3E,OAAA+E,oBAAoB,SAAUJ,KAInCjB,EAAgBhC,IAEd,MAAAsD,EAAiB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAEvCA,EAAAjB,QAAQ,CAACkB,EAAQhB,KAE1B,IAAAiB,EAGJ,OAAOD,GACL,IAAK,IACHC,EAAWC,IACX,MACF,IAAK,IACHD,EAAW,IAAIE,GAAoB,IAAK,GAAK,GAAI,IACjD,MACF,IAAK,IACHF,EAAW,IAAIG,GAAmB,IAAK,EAAG,GAC1C,MACF,IAAK,IACHH,EAAWI,IACX,MACF,IAAK,IACHJ,EAAW,IAAIK,GAAkB,GAAK,EAAG,IACzC,MACF,IAAK,IACHL,EAAWM,IACX,MACF,IAAK,IACHN,EAAWO,IACX,MACF,QACEP,EAAW,IAAIK,GAAkB,EAAG,EAAG,IAIrC,MAAAG,EAAOzB,EAAQe,EAAeW,OAAU,IACxCC,EAAW,IAAIC,GAAwB,CAC3C3G,OAAO,IAAI2C,IAAciE,OAAOJ,EAAM,IAAK,GAAK,IAChDK,UAAW,IACXC,SAAU,QACVC,UAAU,IAAIpE,IAAciE,OAAOJ,EAAM,IAAK,GAAK,MAG/C1B,EAAO,IAAIkC,GAAWhB,EAAUU,GACtC5B,EAAKZ,YAAa,EAClBY,EAAKmC,eAAgB,EAGrB,MACMC,EADU,MACCpB,EAAeW,OAAS,GAAe,EACxD3B,EAAKd,SAASC,IAAIiD,EAFF,IAEWnC,EAAiB,EAAG,GAG/CD,EAAKqC,MAAMlD,IAAI,IAAM,IAAM,KACtBa,EAAAE,SAASE,EAAIC,KAAKiC,GAClBtC,EAAAE,SAASP,EAAIU,KAAKiC,GAEvB5E,EAAMqB,IAAIiB,GACIzD,EAAAU,QAAQsF,KAAKvC,GAGtBwC,GAAAlH,GAAG0E,EAAKqC,MAAO,CAClBjC,EAAG,EACHD,EAAG,EACHR,EAAG,EACH8C,SAAU,IACVC,MAAe,IAARzC,EACP0C,KAAM,gBAGHH,GAAAlH,GAAG0E,EAAKE,SAAU,CACrBE,EAAG,EACHT,EAAG,EACH8C,SAAU,IACVC,MAAe,IAARzC,EACP0C,KAAM,kBAMNxB,EAAkB,KAChB,MAAAD,EAAW,IAAI0B,GACfC,EAAW,GAUV,OAPEA,EAAAN,SAAa,EAAA,KAAO,EAAG,GAAS,GAAA,EAAG,GACnCM,EAAAN,SAAa,EAAA,MAAS,EAAG,GAAS,IAAA,EAAI,GACtCM,EAAAN,UAAiB,IAAA,EAAG,GAAS,IAAA,EAAG,GAAG,EAAI,GACvCM,EAAAN,UAAiB,IAAA,EAAG,GAAO,EAAA,GAAS,IAAA,EAAI,GAEjDrB,EAAS4B,aAAa,WAAY,IAAIC,GAA6BF,EAAU,IAC7E3B,EAAS8B,uBACF9B,GAGHI,EAAkB,KAChB,MAAAJ,EAAW,IAAI0B,GACfC,EAAW,GAGjB,IAAA,IAASI,EAAI,EAAGA,GAAK,GAAIA,IAAK,CACtB,MAAAC,EAASD,EAAI,GAAM5C,KAAKiC,GACxBlC,EAAsB,IAAlBC,KAAKI,IAAIyC,GACb/C,EAAsB,EAAlBE,KAAKC,IAAI4C,GACnBL,EAASN,KAAKnC,EAAGD,EAAG,EAAGC,EAAGD,EAAG,GAC/B,CAQO,OALE0C,EAAAN,WAAe,EAAA,OAAS,EAAG,GAAS,IAAA,EAAG,IACvCM,EAAAN,WAAe,EAAA,OAAS,EAAG,IAAW,KAAA,EAAI,IAEnDrB,EAAS4B,aAAa,WAAY,IAAIC,GAA6BF,EAAU,IAC7E3B,EAAS8B,uBACF9B,GAGHM,EAAkB,KAChB,MAAAN,EAAW,IAAI0B,GACfC,EAAW,GAYV,OATEA,EAAAN,SAAa,EAAA,KAAO,EAAG,GAAS,GAAA,EAAG,GACnCM,EAAAN,SAAa,EAAA,MAAS,EAAG,GAAS,IAAA,EAAI,GACtCM,EAAAN,SAAW,IAAK,EAAG,GAAO,EAAA,EAAG,GAAG,IAAM,GACtCM,EAAAN,SAAW,IAAK,EAAG,GAAS,IAAA,GAAS,IAAA,EAAI,GACzCM,EAAAN,KAAK,IAAS,EAAA,EAAG,GAAK,EAAG,EAAG,EAAG,EAAG,GAClCM,EAAAN,KAAK,IAAS,EAAA,EAAG,EAAG,EAAG,EAAG,GAAG,EAAI,GAE1CrB,EAAS4B,aAAa,WAAY,IAAIC,GAA6BF,EAAU,IAC7E3B,EAAS8B,uBACF9B,GAGHO,EAAkB,KAChB,MAAAP,EAAW,IAAI0B,GACfC,EAAW,GAGjB,IAAA,IAASI,EAAI,EAAGA,GAAK,GAAIA,IAAK,CAC5B,MAAMC,EAASD,EAAI,GAAM5C,KAAKiC,GAAK,IAC7BlC,EAAsB,IAAlBC,KAAKI,IAAIyC,GACb/C,EAAsB,EAAlBE,KAAKC,IAAI4C,GACnBL,EAASN,KAAKnC,EAAGD,EAAG,EAAGC,EAAGD,EAAG,GAC/B,CAQO,OALE0C,EAAAN,WAAe,EAAA,EAAG,GAAO,EAAA,EAAG,GAAG,IAAM,GACrCM,EAAAN,WAAe,EAAA,EAAG,GAAS,IAAA,GAAS,KAAA,IAAM,GAEnDrB,EAAS4B,aAAa,WAAY,IAAIC,GAA6BF,EAAU,IAC7E3B,EAAS8B,uBACF9B,GAIHiC,EAAiB,KACf,MAAAC,EAAKC,GAAKC,WAChBhH,EAAMW,QAAUmG,EAGbA,EAAA9H,GAAG,GAAI,CACRmH,SAAU,EACVc,SAAU,WACR5H,EAAkC,IAArB6H,KAAe,WAC9B,KAOF,SAAApJ,KAAC,MAAI,CAAAqJ,UAAU,8CAEb9I,SAAA,CAAAS,EAAAA,IAAC,MAAI,CAAAsI,IAAKvH,EAAUsH,UAAU,uBAG9BrI,IAAC,MAAI,CAAAqI,UAAU,iFACb9I,SAAAR,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,cAEV9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,qDAAqD9I,SAEnE,iBAGAS,IAAC,MAAI,CAAAqI,UAAU,oDACb9I,SAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCH,UAAU,gFACVpJ,MAAO,CAAEO,MAAO,GAAGc,MACnBqI,WAAY,CAAEtB,SAAU,UAG5BrI,KAAC,IAAE,CAAAqJ,UAAU,uCACV9I,SAAA,CAAA0F,KAAK2D,MAAMtI,GAAU,gBC9V5BuI,GAAgD,IACjDC,KACAC,GASCC,GAA0C,EAC9CC,WACAC,OAAO,GACPb,YAAY,OAEN,MAAAc,EAAgBN,GAAQI,GAE9B,OAAKE,EAKEC,EAAMC,cAAcF,EAAe,CAAED,OAAMb,gBAHxCrI,IAAAsJ,EAAA,CAAoBJ,OAAYb,eCftCkB,GAAoD,EAAGC,UAAU,cAC/D,MAAAC,KAAEA,GAASC,IAEXC,EAAkBC,IACtBH,EAAKE,eAAeC,GACPnI,aAAAC,QAAQ,WAAYkI,IAG7BC,EAAY,CAChB,CAAEC,KAAM,KAAkBC,MAAO,MAAOC,KAAM,OAC9C,CAAEF,KAAM,KAAkBC,MAAO,MAAOC,KAAM,WAC9C,CAAEF,KAAM,KAAkBC,MAAO,MAAOC,KAAM,QAGhD,MAAgB,YAAZR,IAEAxK,KAAC,MAAI,CAAAqJ,UAAU,sBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,+BACb9I,SAAA,GAACS,IAAAiK,EAAA,CAAQ5B,UAAU,+CAClBrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,uDAAuD9I,SAAQ,sBAEhF,MAAI,CAAA8I,UAAU,0BACZ9I,SAAUsK,EAAAK,IAAKN,IACR,MAAAO,EAAWV,EAAKW,WAAaR,EAAKE,KAEtC,OAAA/K,EAAAiB,IAAC,SAAA,CAECqK,QAAS,IAAMV,EAAeC,EAAKE,MACnCzB,UAAW,2EACT8B,EACI,mCACA,0GAEN,aAAY,GAAGP,EAAKI,WACpB,eAAcG,EAAW,OAAS,QAEjC5K,SAAKqK,EAAAG,OAVDH,EAAKE,eAoBtB9K,KAAC,MAAI,CAAAqJ,UAAU,sBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,0BACb9I,SAAA,GAACS,IAAAiK,EAAA,CAAQ5B,UAAU,2CAClBrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,uDAAuD9I,SAAK,mBAE7E,MAAI,CAAA8I,UAAU,uBACZ9I,SAAUsK,EAAAK,IAAKN,IACR,MAAAO,EAAWV,EAAKW,WAAaR,EAAKE,KAEtC,OAAA/K,EAAAiB,IAAC,SAAA,CAECqK,QAAS,IAAMV,EAAeC,EAAKE,MACnCzB,UAAW,2EACT8B,EACI,sCACA,mKAEN,aAAY,GAAGP,EAAKI,WACpB,eAAcG,EAAW,OAAS,QAEjC5K,SAAKqK,EAAAI,MAVDJ,EAAKE,cCxDXQ,GAAoB,CAC/BC,EACAC,EACAC,EACAC,IAEoB,OAAhBH,GAAwBE,EAAgBA,EACxB,OAAhBF,GAAwBG,EAAgBA,EACrCF,GAAW,GAMPG,GAAyB,CACpCJ,EACAK,EACAC,EACAC,IAEoB,OAAhBP,GAAwBM,GAAWA,EAAQtE,OAAS,EAAUsE,EAC9C,OAAhBN,GAAwBO,GAAWA,EAAQvE,OAAS,EAAUuE,EAC3DF,GAAW,GAmCPG,GAAwB,CACnCR,EACAS,IAEOV,GAAkBC,EAAaS,EAAMC,KAAMD,EAAME,OAAQF,EAAMG,QAS3DC,GAA+B,CAC1Cb,EACAS,IAEOV,GAAkBC,EAAaS,EAAMK,YAAaL,EAAMM,cAAeN,EAAMO,eASzEC,GAA2B,CACtCjB,EACAkB,IAEOnB,GAAkBC,EAAakB,EAASR,KAAMQ,EAASP,OAAQO,EAASN,QASpEO,GAAiC,CAC5CnB,EACAoB,IAEOrB,GAAkBC,EAAaoB,EAAcC,MAAOD,EAAcE,QAASF,EAAcG,SCnE5FC,GAAgD,EAAGC,OAAMnL,WAAUoL,YAAWC,oBAClF,MAAMzL,EAAWC,IAGXyJ,EAAWgC,EAAAA,QAAQ,IAEhBtL,EAASuL,SAASC,WAAWL,EAAKM,MACxC,CAACzL,EAASuL,SAAUJ,EAAKM,OAEtBnD,EAAgB6C,EAAKO,KAMrBC,EAAU,4FAAkBrC,EAHZ,sEACE,gIAKlBsC,EAAmBC,EAAAA,YAAY,KAEnCjM,EAASuL,EAAKW,MACdV,GAAU,IACT,CAACD,EAAKW,KAAMlM,EAAUwL,IAIvB,OAAAlN,EAAAC,KAAC,SAAA,CACCqL,QAASoC,EACTpE,UAAWmE,EACX,eAAcrC,EAAW,YAAS,EAElC5K,SAAA,GAACS,IAAAmJ,EAAA,CAAcD,KAAM,KACpB8C,EAAKf,SAKN2B,GAAkC,EAAGC,WAAUC,iBAAgBC,mBACnE,MAAOC,EAAQf,GAAazL,YAAS,GAC/BK,EAAWoM,KACXrO,gBAAEA,EAAAsO,OAAiBA,GAAWpO,MAC9BqO,EAAEA,EAAA1D,KAAGA,GAASC,IACda,EAAcd,EAAKW,UACjBgD,SAAUC,GAAiBC,KAE7BpB,EAAgBqB,KAMhBC,EAAsB,CAE1B,CAAEvC,KAAMkC,EAAE,YAAaR,KAAM,QAASL,KAAM,QAASC,KAAMkB,GAG3D,CAAExC,KAAMkC,EAAE,aAAcR,KAAM,SAAUL,KAAM,SAAUC,KAAMmB,GAC9D,CAAEzC,KAAMkC,EAAE,kBAAmBR,KAAM,cAAeL,KAAM,cAAeC,KAAMoB,GAC7E,CAAE1C,KAAMkC,EAAE,cAAeR,KAAM,UAAWL,KAAM,UAAWC,KAAMqB,GACjE,CAAE3C,KAAMkC,EAAE,gBAAiBR,KAAM,YAAaL,KAAM,YAAaC,KAAMsB,GACvE,CAAE5C,KAAMkC,EAAE,aAAcR,KAAM,SAAUL,KAAM,SAAUC,KAAMuB,GAC9D,CAAE7C,KAAMkC,EAAE,sBAAuBR,KAAM,mBAAoBL,KAAM,mBAAoBC,KAAMwB,GAC3F,CAAE9C,KAAMkC,EAAE,eAAgBR,KAAM,WAAYL,KAAM,WAAYC,KAAMyB,KAIhEC,WAAEA,EAAAC,eAAYA,EAAgBC,gBAAAA,GAAoBC,KAElDC,EAAc,CAClB,CAAE9B,KAAM+B,EAAU3B,KAAM,IAAK4B,MAAO,UACpC,CAAEhC,KAAMiC,EAAY7B,KAAM,IAAK4B,MAAO,YACtC,CAAEhC,KAAMkC,EAAY9B,KAAM,gCAAiC4B,MAAO,UAKpE,OAGIxP,EAAAC,KAAA0P,WAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAM4B,GAAWe,GAC1B3E,UAAU,4HACV,aAAY2E,EAAS,UAAY,UAEhCzN,SAAAyN,QAAU2B,EAAQ,CAAAzF,KAAM,OAASlJ,IAAC4O,EAAO,CAAA1F,KAAM,OAIjD8D,GACCjO,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,GACpBjE,QAAS,CAAEiE,QAAS,GACpBmG,KAAM,CAAEnG,QAAS,GACjBL,UAAU,sDACVgC,QAAS,IAAM4B,GAAU,GACzB,aAAW,YAKflN,EAAAiB,IAAC,QAAA,CACCqI,UAAW,qKACT2E,EAAS,gBAAkB,uDAE7B,aAAW,WAEXzN,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,gBAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,cACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,kCACb9I,SAAA,GAAAS,IAAC,MAAI,CAAAqI,UAAU,oHACZ9I,SAAA+K,GAAkBC,EAAa,MAAA8C,OAAA,EAAAA,EAAcyB,UAAyB,MAAdzB,OAAc,EAAAA,EAAA0B,kBAAa1B,WAAc2B,cAAgB,OAEpHjQ,EAAAiB,IAAC,MAAA,CACCqI,UAAU,8IACV,aAAW,UAEX9I,WAACS,IAAAiP,EAAA,CAAO5G,UAAU,aAAaa,KAAM,YAGxClJ,IAAA,KAAA,CAAGqI,UAAU,4DACX9I,SAAkB+K,GAAAC,EAAa,MAAA8C,OAAA,EAAAA,EAAc6B,SAAwB,MAAd7B,OAAc,EAAAA,EAAA8B,iBAAY9B,WAAc+B,aAAe,UAEhHpP,IAAA,IAAA,CAAEqI,UAAU,wDACV9I,SAAkB+K,GAAAC,EAAa,MAAA8C,OAAA,EAAAA,EAAcgC,KAAoB,MAAdhC,OAAc,EAAAA,EAAAiC,aAAQjC,WAAckC,SAAW,gBAEpGvP,IAAA,IAAA,CAAEqI,UAAU,2CACV9I,SAAkB+K,GAAAC,EAAa,MAAA8C,OAAA,EAAAA,EAAcmC,SAAwB,MAAdnC,OAAc,EAAAA,EAAAoC,iBAAYpC,WAAcqC,aAAe,6BAKlH,MAAI,CAAArH,UAAU,YACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,+CACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,CAAAS,MAAC,OAAK,CAAAqI,UAAU,2CAA4C9I,SAAA4N,EAAE,sBAC7DnN,IAAA,OAAA,CAAKqI,UAAU,gDACb9I,SAAkB+K,GAAAC,EAAa,MAAA8C,OAAA,EAAAA,EAAcxM,SAAwB,MAAdwM,OAAc,EAAAA,EAAAsC,iBAAYtC,WAAcuC,aAAe,YAGnH5Q,KAAC,MAAI,CAAAqJ,UAAU,yCACb9I,SAAA,CAAAS,MAAC,OAAK,CAAAqI,UAAU,2CAA4C9I,SAAA4N,EAAE,uBAC7DnN,IAAA,OAAA,CAAKqI,UAAU,mEACb9I,SAAkB+K,GAAAC,EAAa,MAAA8C,OAAA,EAAAA,EAAcwC,UAAyB,MAAdxC,OAAc,EAAAA,EAAAyC,kBAAazC,WAAc0C,cAAgB,iBAGtH/Q,KAAC,MAAI,CAAAqJ,UAAU,oCACb9I,SAAA,CAAAS,MAAC,OAAK,CAAAqI,UAAU,2CAA4C9I,SAAA4N,EAAE,+BAC7DnN,IAAA,OAAA,CAAKqI,UAAU,gDACb9I,SAAkB+K,GAAAC,EAAa,MAAA8C,OAAA,EAAAA,EAAc2C,kBAAiC,MAAd3C,OAAc,EAAAA,EAAA4C,0BAAqB5C,WAAc6C,sBAAwB,eAOjJhC,EAAe3H,OAAS,GACvBvG,EAAAA,IAAC,OACCT,SAACS,EAAAA,IAAA,MAAA,CAAIqI,UAAU,yCACZ9I,SAAA4O,EACC,CAAC,EAAG,EAAG,GAAGjE,IAAKrC,GACb7I,EAAAA,KAAC,MAAY,CAAAqJ,UAAU,6BACrB9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,wEACfrI,IAAC,MAAI,CAAAqI,UAAU,uEAFPR,IAMZqG,EAAehE,IAAKc,IAEZ,MAAAmF,EAAYpF,GAAsBR,EAAaS,GAC/CoF,EAAWD,EAAUE,SAAS,QAA0B,MAAhBrF,EAAMsF,MAGlD,SAAAtR,KAAC,MAAoB,CAAAqJ,UAAU,6BAC7B9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,qBAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,iCACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCuQ,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAO,eACPC,YAAY,IACZC,KAAK,OACLvI,UAAU,sCAGZtJ,EAAAiB,IAAC,SAAA,CACCuQ,GAAG,KACHC,GAAG,KACHC,EAAE,KACFC,OAAQ1F,EAAMlL,OAAS,UACvB6Q,YAAY,IACZC,KAAK,OACLC,gBAAqB7F,EAAMsF,MAAQ,IAAO,IAAzB,OACjBjI,UAAU,wCACVyI,cAAc,eAIlB9Q,IAAC,MAAI,CAAAqI,UAAU,oDACb9I,SAAAR,EAAAiB,IAACgJ,GAAA,CACCC,SAAU+B,EAAMuB,KAChBrD,KAAM,GACNb,UAAU,8CAIfrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,wEACb9I,SACH4Q,IACAnQ,EAAAA,IAAC,OAAK,CAAAqI,UAAU,yDACb9I,SAAA6Q,EAAWjD,EAAE,0BAA4B,GAAGnC,EAAMsF,aAvC7CtF,EAAM+F,kBAkD3B,MACC,CAAAxR,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,2DACX9I,SAAA4N,EAAE,0BAELnN,IAAC,MAAI,CAAAqI,UAAU,YACZ9I,SAAA4O,EAEEnO,EAAAA,IAAA,MAAA,CAAIqI,UAAU,YACZ9I,UAAC,EAAG,EAAG,EAAG,GAAG2K,IAAKrC,UAChB,MACC,CAAAtI,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,4BACb9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,kEACfrI,IAAC,MAAI,CAAAqI,UAAU,oEAEjBrI,IAAC,MAAI,CAAAqI,UAAU,yEALPR,MASZoG,EAAW1H,OAAS,EAEtB0H,EAAW/D,IAAKc,UACb,MACC,CAAAzL,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,4BACb9I,SAAA,CAAAS,MAAC,QAAKqI,UAAU,uDACb9I,SAAsBwL,GAAAR,EAAaS,OAEtChM,KAAC,OAAK,CAAAqJ,UAAU,yDACb9I,SAAA,CAAMyL,EAAAsF,MAAM,YAGjBtQ,IAAC,MAAI,CAAAqI,UAAU,wDACb9I,SAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEjJ,MAAO,GAClBiF,QAAS,CAAEjF,MAAO,GAAGwL,EAAMsF,UAC3B3H,WAAY,CAAEtB,SAAU,EAAGC,MAAO,IAClCe,UAAU,uCAdN2C,EAAM+F,QAqBlB/Q,IAAC,MAAI,CAAAqI,UAAU,mBACb9I,SAAAS,EAAAA,IAAC,IAAE,CAAAqI,UAAU,2CACV9I,SAAA4N,EAAE,uCAQZ,MACC,CAAA5N,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,2DACX9I,SAAA4N,EAAE,oBAELnN,IAAC,MAAGqI,UAAU,YACX9I,WAAS2K,IAAK8B,GACbhM,EAAAA,IAAC,KACC,CAAAT,SAAAR,EAAAiB,IAAC+L,GAAA,CACCC,OACAnL,WACAoL,YACAC,mBALKF,EAAKf,YAanBrM,GACCG,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAEtB,SAAU,IAExB9H,SAAAR,EAAAC,KAACgS,EAAA,CACC9Q,GAAG,SACHmI,UAAU,oKACVgC,QAAS,IAAM4B,GAAU,GAEzB1M,SAAA,GAACS,IAAAiR,EAAA,CAAa/H,KAAM,KAAM,IAAEiE,EAAE,sCAMnC,MACC,CAAA5N,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,2DACX9I,SAAA4N,EAAE,sBAEJnN,IAAA,MAAA,CAAIqI,UAAU,iBACZ9I,SAAY8O,EAAAnE,IAAI,EAAGqC,KAAM2E,EAAMvE,OAAM4B,WACpCxP,EAAAiB,IAAC,IAAA,CAEC2M,OACAtE,UAAU,wMACV,aAAYkG,EAEZhP,SAAAS,EAAAA,IAACkR,EAAK,CAAAhI,KAAM,MALPqF,SAYbvO,EAAAA,IAAC,OAAIqI,UAAU,OACb9I,eAACgK,GAAiB,CAAAC,QAAQ,gBAI5BxK,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAASyC,EACTzE,UAAU,iKACV,aAAuB8E,EAAXN,EAAa,oBAAyB,oBAEjDtN,WAEGP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAAmR,EAAA,CAAMjI,KAAM,KACZlJ,EAAAA,IAAA,OAAA,CAAMT,SAAE4N,EAAA,0BAITnO,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAAoR,EAAA,CAAOlI,KAAM,KACblJ,EAAAA,IAAA,OAAA,CAAMT,SAAE4N,EAAA,2BAKdvO,EACCG,EAAAC,KAAC,SAAA,CACCqL,QAAS,SAEP4B,GAAU,IAEZ5D,UAAU,2JACV,aAAY8E,EAAE,kBAEd5N,SAAA,GAACS,IAAAqR,EAAA,CAAYnI,KAAM,KAClBlJ,EAAAA,IAAA,OAAA,CAAMT,SAAE4N,EAAA,uBAGXpO,EAAAC,KAAC,SAAA,CACCqL,QAAS,SAEP4B,GAAU,IAEZ5D,UAAU,+JACV,aAAY8E,EAAE,sBAEd5N,SAAA,GAACS,IAAAqR,EAAA,CAAYnI,KAAM,KAClBlJ,EAAAA,IAAA,OAAA,CAAMT,SAAE4N,EAAA,uCCxZnBmE,GAAwC,EAAGtE,SAAQuE,cACvD,MAAOC,EAAUC,GAAejR,WAAS,KAClCkR,EAAUC,GAAenR,WAAS,KAClCoR,EAAOC,GAAYrR,WAAS,KAC5B3B,EAAWiT,GAAgBtR,YAAS,IACrCuR,MAAEA,GAAUjT,KACZ2B,EAAWC,IAsBXsR,EAAc,KAClBP,EAAY,IACZE,EAAY,IACZE,EAAS,SAKT7R,OAAAA,EAAAA,IAACiS,GACE,CAAA1S,SAAAyN,GAGGhO,OAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,GACpBjE,QAAS,CAAEiE,QAAS,GACpBmG,KAAM,CAAEnG,QAAS,GACjB2B,QAAS2H,EACT3J,UAAU,sDAIZrI,IAAC,MAAI,CAAAqI,UAAU,0DACb9I,SAAAR,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGzB,MAAO,GAAKlC,EAAG,IACtCN,QAAS,CAAEiE,QAAS,EAAGzB,MAAO,EAAGlC,EAAG,GACpC8J,KAAM,CAAEnG,QAAS,EAAGzB,MAAO,GAAKlC,EAAG,IACnCsK,KAAK,SACL,aAAW,OACX,kBAAgB,cAChBhH,UAAU,gFAGV9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS2H,EACT3J,UAAU,mGACV,aAAW,KAEX9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,yCAIrBrJ,KAAC,MAAI,CAAAqJ,UAAU,mBACb9I,SAAA,CAAAS,EAAAA,IAAC,OAAIqI,UAAU,kHACb9I,eAACmO,EAAO,CAAArF,UAAU,gCAEnB,KAAG,CAAA6J,GAAG,cAAc7J,UAAU,wDAAwD9I,SAEvF,YACCS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,mCAAmC9I,SAEhD,2BAIDP,EAAAA,KAAA,OAAA,CAAKmT,SA1EGC,MAAOC,IAC1BA,EAAEC,iBACFT,EAAS,IACTC,GAAa,GAET,UACIC,EAAMP,EAAUE,OAEtBjR,EAAS,UACTgR,EAAY,IACZE,EAAY,UACLY,GAED,MAAAC,EAAeD,EAAIE,SAAW,2BACpCZ,EAASW,EAAY,CACrB,QACAV,GAAa,EACf,GAyDwCzJ,UAAU,YACrC9I,SAAA,CACCqS,GAAA7S,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,GAAO,IAC9BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,sIACVgH,KAAK,QAEJ9P,SAAAqS,WAIJ,MACC,CAAArS,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,WAAWrK,UAAU,kEAAkE9I,SAEtG,UACAP,KAAC,MAAI,CAAAqJ,UAAU,WACb9I,SAAA,GAACS,IAAA0N,EAAA,CAAOrF,UAAU,2DAClBtJ,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACL4O,GAAG,WACHS,MAAOnB,EACPoB,SAAWP,GAAMZ,EAAYY,EAAEQ,OAAOF,OACtCtK,UAAU,kMACVyK,YAAY,aACZC,UAAQ,EACRC,aAAa,0BAKlB,MACC,CAAAzT,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,WAAWrK,UAAU,kEAAkE9I,SAEtG,WACAP,KAAC,MAAI,CAAAqJ,UAAU,WACb9I,SAAA,GAACS,IAAAiT,EAAA,CAAO5K,UAAU,2DAClBtJ,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL4O,GAAG,WACHS,MAAOjB,EACPkB,SAAWP,GAAMV,EAAYU,EAAEQ,OAAOF,OACtCtK,UAAU,kMACVyK,YAAY,cACZC,UAAQ,EACRC,aAAa,2BAKnBjU,EAAAiB,IAACuI,GAAO2K,OAAP,CACC5P,KAAK,SACL6P,SAAUtU,EACVwJ,UAAU,sPACV+K,WAAY,CAAEnM,MAAO,MACrBoM,SAAU,CAAEpM,MAAO,KAElB1H,WAEGP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAAsT,EAAA,CAAcjL,UAAU,iBAAiB,cAI5C,sBC9IdkL,GAAsC,EAC1C1G,WACAC,iBACA0G,iBACAC,oBACAC,mBAIM,MAAAC,EAAuB,IAC3B3T,EAAAA,IAAC,MAAI,CAAAqI,UAAU,wCACb9I,SAACS,EAAAA,IAAA,MAAA,CAAIqI,UAAU,mEAKjB,SAAArJ,KAAC,MAAI,CAAAqJ,UAAU,gFAEb9I,SAAA,CAAAR,EAAAiB,IAAC4M,GAAA,CACCC,WACAC,iBACAC,aAAc,IAAM0G,GAAkB,WAIvC,OAAK,CAAApL,UAAU,uCACd9I,SAAAR,EAAAiB,IAAC4T,YAASC,SAAUH,IAAgB1T,IAAAI,GAAA,CAAA,GAAgBJ,EAAAA,IAAA2T,EAAA,IAClDpU,SAACS,EAAAA,IAAA8T,EAAA,QAKL/U,EAAAiB,IAACsR,GAAA,CACCtE,OAAQwG,EACRjC,QAAS,IAAMkC,GAAkB,SCxCnCM,GAAiB,KACrB,MAAM3G,SAAEA,EAAA4G,QAAUA,GAAY1G,MACxBH,EAAEA,EAAA1D,KAAGA,GAASC,IACda,EAAcd,EAAKW,UAGnB6J,gBAAEA,GAAoBC,KAGtBC,EAAOC,GAAaH,EAAiB,CAAC,EAAG,GAAI,CAAC,EAAG,MACjDI,EAAUD,GAAaH,EAAiB,CAAC,EAAG,GAAI,CAAC,GAAG,MAYpDK,EAAe,CACnBC,OAAQ,CAAE7L,QAAS,EAAG3D,EAAG,IACzByP,QAAS,CACP9L,QAAS,EACT3D,EAAG,EACH4D,WAAY,CACVtB,SAAU,GACVE,KAAM,aAMZ,GAAIyM,EAEA,SAAAhU,IAAC,UAAQ,CAAAkS,GAAG,OAAO7J,UAAU,6EAC3B9I,SAACS,EAAAA,IAAA,MAAA,CAAIqI,UAAU,0FAKrB,MAAMoM,EAAQ,CACZ,CACEC,cAAQtH,WAAUuH,cAAe,KACjCpG,MAAOjE,GAAkBC,EAAa,MAAA6C,OAAA,EAAAA,EAAUwH,WAAsB,MAAVxH,OAAU,EAAAA,EAAAyH,aAAwB,MAAVzH,OAAU,EAAAA,EAAA0H,eAAiB,OAC/GvI,KAAMwI,GAER,CACEL,cAAQtH,WAAU4H,cAAe,KACjCzG,MAAOjE,GAAkBC,EAAa,MAAA6C,OAAA,EAAAA,EAAU6H,WAAsB,MAAV7H,OAAU,EAAAA,EAAA8H,aAAwB,MAAV9H,OAAU,EAAAA,EAAA+H,eAAiB,UAC/G5I,KAAM0C,GAER,CACEyF,cAAQtH,WAAUgI,cAAe,MACjC7G,MAAOjE,GAAkBC,EAAa,MAAA6C,OAAA,EAAAA,EAAUiI,WAAsB,MAAVjI,OAAU,EAAAA,EAAAkI,aAAwB,MAAVlI,OAAU,EAAAA,EAAAmI,eAAiB,QAC/GhJ,KAAMiJ,IAKPxW,OAAAA,EAAAA,KAAA,UAAA,CAAQkT,GAAG,OAAO7J,UAAU,sGAE3B9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,mCAEb9I,SAAA,CAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCvJ,MAAO,CAAE8F,EAAGoP,GACZ9L,UAAU,2GAGZtJ,EAAAiB,IAACuI,GAAOC,IAAP,CACCvJ,MAAO,CAAE8F,EAAGsP,GACZhM,UAAU,oHAIdrI,IAAC,MAAI,CAAAqI,UAAU,uCACb9I,SAAAR,EAAAC,KAACuJ,GAAOC,IAAP,CACCiN,SAnEkB,CACxBlB,OAAQ,CAAE7L,QAAS,GACnB8L,QAAS,CACP9L,QAAS,EACTC,WAAY,CACV+M,gBAAiB,MA+DfjN,QAAQ,SACRhE,QAAQ,UACR4D,UAAU,oBAEV9I,SAAA,CAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCiN,SAAUnB,EACVjM,UAAU,OAEV9I,SAACR,EAAAiB,IAAA,OAAA,CAAKqI,UAAU,qIACb9I,SAAkB+K,GAAAC,EAAa,MAAA6C,OAAA,EAAAA,EAAUuI,QAAmB,MAAVvI,OAAU,EAAAA,EAAAwI,gBAAWxI,WAAUyI,YAAc,iBAIpG9W,EAAAiB,IAACuI,GAAOuN,GAAP,CACCL,SAAUnB,EACVjM,UAAU,sFAET9I,SAAA+K,GAAkBC,EAAa,MAAA6C,OAAA,EAAAA,EAAU2I,UAAqB,MAAV3I,OAAU,EAAAA,EAAA4I,YAAuB,MAAV5I,OAAU,EAAAA,EAAA6I,cAAgB,cAGxGlX,EAAAiB,IAACuI,GAAO2N,EAAP,CACCT,SAAUnB,EACVjM,UAAU,2GAET9I,SAAA+K,GAAkBC,EAAa,MAAA6C,OAAA,EAAAA,EAAU+I,aAAwB,MAAV/I,OAAU,EAAAA,EAAAgJ,eAA0B,MAAVhJ,OAAU,EAAAA,EAAAiJ,iBAAmB,+CAGjHtX,EAAAC,KAACuJ,GAAOC,IAAP,CACCiN,SAAUnB,EACVjM,UAAU,wCAEV9I,SAAA,GAACS,IAAAgR,EAAA,CAAK9Q,GAAG,YACPX,SAAAR,EAAAC,KAACuJ,GAAO2K,OAAP,CACC,aAAY/F,EAAE,qBACdsI,SAAUnB,EACVjM,UAAU,oFAET9I,SAAA,CAAA4N,EAAE,uBACHnN,IAACsW,EAAa,CAAAjO,UAAU,wDAG5BtJ,EAAAC,KAACuJ,GAAO2K,OAAP,CACC7I,QAAS,IAAMkM,MAAMpJ,EAAE,0BACvB,aAAYA,EAAE,uBACdsI,SAAUnB,EACVjM,UAAU,yEAEV9I,SAAA,CAAAR,EAAAiB,IAACwW,EAAW,IACXrJ,EAAE,6BAKPpO,EAAAiB,IAACuI,GAAOC,IAAP,CACCiN,SAAUnB,EACVjM,UAAU,wCAET9I,SAAAkV,EAAMvK,IAAKuM,GACV1X,EAAAiB,IAACuI,GAAOC,IAAP,CAECH,UAAU,+IACV+K,WAAY,CAAErO,GAAM,GACpBsK,KAAK,SACL,aAAY,GAAGoH,EAAKlI,aAAakI,EAAK/B,SAEtCnV,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,0BACb9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,kDACb9I,SAACS,EAAAA,IAAAyW,EAAKlK,KAAL,CAAUlE,UAAU,uCAAuCa,KAAM,cAEnE,MACC,CAAA3J,SAAA,CAAAS,EAAAA,IAAC,MAAI,CAAAqI,UAAU,0DACZ9I,SAAAkX,EAAK/B,SAEP1U,EAAAA,IAAA,MAAA,CAAIqI,UAAU,2CACZ9I,WAAKgP,eAfPkI,EAAKlI,mBCnIpBmI,GAAgD,EACpDC,MACAC,MACAvO,YAAY,mFACZwO,mBAEA,MAAOC,EAAYC,GAAiBvW,WAAyC,YACtEwW,EAAUC,GAAezW,WAASmW,GAYrC,OAACK,GAA2B,UAAfF,IASf9X,KAAC,MAAI,CAAAqJ,UAAU,2BAEZ9I,SAAA,CAAe,YAAAuX,SACb,MAAI,CAAAzO,UAAU,+FACb9I,SAACS,EAAAA,IAAAkX,EAAA,CAAQ7O,UAAU,6BAKvBtJ,EAAAiB,IAAC,MAAA,CACC2W,IAAKK,EACLJ,MACAvO,UAAW,GAAGA,KAA4B,YAAfyO,EAA2B,YAAc,gDACpE9C,QAAQ,OACRmD,SAAS,QACT3X,MAAM,MACNH,OAAO,MACP+X,OApCkB,KACtBL,EAAc,WAoCVM,QAjCmB,KACvBN,EAAc,SACdE,OAAY,WAMVjX,IAAC,OAAIqI,UAAU,iGACZ9I,YAAiBR,EAAAiB,IAAA8N,EAAA,CAAOzF,UAAU,2BClCrCiP,GAA8B,KAClC,MAAOC,EAAWC,GAAgBhX,YAAS,GAG3CG,EAAAA,UAAU,KACR,MAAM8W,EAAmB,KAEnB7W,OAAO8W,QAAU,IACnBF,GAAa,GAEbA,GAAa,IAMjB,OAFO5W,OAAA8E,iBAAiB,SAAU+R,GAE3B,KACE7W,OAAA+E,oBAAoB,SAAU8R,KAEtC,IAWD,SAAAzX,IAACiS,IACE1S,SACCgY,GAAAxY,EAAAiB,IAACuI,GAAO2K,OAAP,CACCzK,QAAS,CAAEC,QAAS,EAAGzB,MAAO,IAC9BxC,QAAS,CAAEiE,QAAS,EAAGzB,MAAO,GAC9B4H,KAAM,CAAEnG,QAAS,EAAGzB,MAAO,IAC3B0B,WAAY,CAAEtB,SAAU,IACxBgD,QAfY,KAClBzJ,OAAO+W,SAAS,CACdC,IAAK,EACLC,SAAU,YAaNxP,UAAU,0JACV,aAAW,WACXuD,MAAM,OAENrM,SAAAS,EAAAA,IAAC8X,EAAU,CAAAzP,UAAU,uFC2FlB0P,GAA0B,CAACC,EAAcC,EAAyB,OACvE,MAAAC,EA3B4B,EAACF,EAAcC,EAAyB,OAC1E,IAAKD,EAAa,OAAA,EAElB,MAAMG,EAAQH,EAAKI,OAAOC,MAAM,OAAO9R,OACjC2R,EAAUjT,KAAKqT,KAAKH,EAAQF,GAE3B,OAAAhT,KAAKsT,IAAI,EAAGL,IAqBHM,CAAqBR,EAAMC,GAC3C,MAd+B,CAACC,GAChB,IAAZA,EAAsB,WACV,IAAZA,EAAsB,QACnB,GAAGA,QAWHO,CAAkBP,IC/HrBQ,GAAgD,EACpD/F,QACAC,WACAE,cAAc,YACd6F,OAAO,EACPtQ,YAAY,OAEN,MAAAuQ,EAAc5X,SAA4B,OACzC6X,EAAgBC,GAAqBtY,WAAS,GAG/CuY,EAAuB,KACvBH,EAAY/W,SACIiX,EAAAF,EAAY/W,QAAQmX,iBAKpCC,EAAiB,WACf,MAAAC,EAAQvG,EAAM0F,MAAM,MAC1B,IAAIc,EAAmB,EACnBC,EAAY,EAEhB,IAAA,IAASvR,EAAI,EAAGA,EAAIqR,EAAM3S,OAAQsB,IAAK,CACrC,MAAMwR,IAAyB,OAAAC,EAAMJ,EAAArR,SAAN,EAAAyR,EAAU/S,SAAU,GAAK,EAGpD,GAAAsS,GAAkBO,IAAcP,EAAiBO,EAAYC,GAAyBxR,IAAMqR,EAAM3S,OAAS,GAAI,CAC9F4S,EAAAtR,EACnB,KACF,CAEauR,GAAAC,CACf,CAEO,MAAA,CACLE,UAAWJ,EACXK,KAAMN,EAAMC,IAAqB,GACjCD,QACAE,cASEK,EAAgBnJ,IACpB,MAAMiJ,UAAEA,EAAAC,KAAWA,EAAMN,MAAAA,GAAUD,IAC7BS,EAAS,IAAIC,OAAOrJ,GAAS,IAG/BkJ,EAAKI,MAAM,SACbV,EAAMK,GAAaG,EAASF,EAAKrZ,QAAQ,QAAS,IAE5C+Y,EAAAK,GAAaG,EAASF,EAGrB5G,EAAAsG,EAAMW,KAAK,QAIhBC,EAAkBxW,UACtB,MAAMiW,UAAEA,EAAAC,KAAWA,EAAMN,MAAAA,GAAUD,IAGnC,IAAU,MAANO,OAAM,EAAAA,EAAAI,MAAM,oBAAoB,MAAAJ,OAAA,EAAAA,EAAMI,MAAM,kBACxCV,EAAAK,IAAa,MAAAC,OAAA,EAAAA,EAAMrZ,QAAQ,oBAAqB,IAAIiY,SAAU,OAC/D,CAEL,MAAM2B,GAAS,OAAAT,EAAA,MAAAE,OAAA,EAAAA,EAAMI,MAAM,oBAAY,KAAM,GACvCF,EAAkB,WAATpW,EAAoB,KAAO,MAC1C4V,EAAMK,GAAaQ,EAASL,UAAUF,WAAMpB,SAAU,GACxD,CAESxF,EAAAsG,EAAMW,KAAK,QAIhBG,EAAgBC,IACpB,MAAMV,UAAEA,EAAAL,MAAWA,GAAUD,IACvBO,EAAON,EAAMK,IAAc,GAGzBL,EAAAK,GADU,OAAdU,EACiB,KAAOT,EAEPA,EAAKrZ,QAAQ,aAAc,IAGvCyS,EAAAsG,EAAMW,KAAK,QAqDhBK,EAAkBjb,IACtB,MAAMkb,EAAWvB,EAAY/W,QAC7B,IAAKsY,EAAU,OAEf,MAAMC,EAAQD,EAASnB,eACjBqB,EAAMF,EAASG,aACfC,EAAe5H,EAAM6H,UAAUJ,EAAOC,GAE5C,IAAII,EAAO,GACX,OAAQxb,GACN,IAAK,OAAewb,EAAA,KAAM,MAC1B,IAAK,SAAiBA,EAAA,IAAK,MAC3B,IAAK,YAAoBA,EAAA,KAG3B,MAAMC,EAAc,GAAGD,IAAOF,IAAeE,IAEvCE,EAAWhI,EAAM6H,UAAU,EAAGJ,GAASM,EAAc/H,EAAM6H,UAAUH,GAC3EzH,EAAS+H,GAGTnZ,WAAW,KAEL4Y,IAAUC,EACZF,EAASS,kBAAkBR,EAAQK,EAAKlU,OAAQ8T,EAAMI,EAAKlU,QAIlD4T,EAAAS,kBAAkBP,EAAM,EAAII,EAAKlU,OAAQ8T,EAAM,EAAII,EAAKlU,QAEnE4T,EAASU,SACR,IAkCF7b,OAAAA,EAAAA,KAAA,MAAA,CAAIqJ,UAAW,oFAAoFA,IAElG9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,qHAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,+BACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAMoP,EAAa,GAC5BpR,UAAU,kIACVuD,MAAM,OACPrM,SAAA,OAGDR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAMoP,EAAa,GAC5BpR,UAAU,sIACVuD,MAAM,OACPrM,SAAA,OAGDR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAMoP,EAAa,GAC5BpR,UAAU,oIACVuD,MAAM,OACPrM,SAAA,YAKHS,IAAC,MAAI,CAAAqI,UAAU,4CAGfrJ,KAAC,MAAI,CAAAqJ,UAAU,+BACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM6P,EAAe,QAC9B7R,UAAU,0GACVuD,MAAM,KAENrM,SAAAS,EAAAA,IAAC8a,EAAO,CAAAzS,UAAU,cAEpBtJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM6P,EAAe,UAC9B7R,UAAU,0GACVuD,MAAM,MAENrM,SAAAS,EAAAA,IAAC+a,EAAS,CAAA1S,UAAU,cAEtBtJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM6P,EAAe,aAC9B7R,UAAU,0GACVuD,MAAM,KAENrM,SAAAS,EAAAA,IAACgb,EAAY,CAAA3S,UAAU,mBAI3BrI,IAAC,MAAI,CAAAqI,UAAU,4CAGfrJ,KAAC,MAAI,CAAAqJ,UAAU,+BACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAMyP,EAAe,UAC9BzR,UAAU,0GACVuD,MAAM,SAENrM,SAAAS,EAAAA,IAACib,EAAS,CAAA5S,UAAU,cAEtBtJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAMyP,EAAe,UAC9BzR,UAAU,0GACVuD,MAAM,SAENrM,SAAAS,EAAAA,IAACkb,EAAS,CAAA7S,UAAU,mBAIxBrI,IAAC,MAAI,CAAAqI,UAAU,4CAGfrJ,KAAC,MAAI,CAAAqJ,UAAU,+BACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM2P,EAAa,OAC5B3R,UAAU,0GACVuD,MAAM,OAENrM,SAAAS,EAAAA,IAACmb,EAAU,CAAA9S,UAAU,cAEvBtJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM2P,EAAa,MAC5B3R,UAAU,0GACVuD,MAAM,OAENrM,SAAAS,EAAAA,IAACob,EAAS,CAAA/S,UAAU,mBAIxBrI,IAAC,MAAI,CAAAqI,UAAU,0CAGftJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAhOa,KACnB,MAAMkP,UAAEA,EAAAL,MAAWA,EAAOE,UAAAA,GAAcH,IAClCoC,EAAU,UAChBnC,EAAMoC,OAAO/B,EAAY,EAAG,EAAG8B,EAAS,kBAC/BzI,EAAAsG,EAAMW,KAAK,OAGpBrY,WAAW,WACT,GAAIoX,EAAY/W,QAAS,CAEjB,MAAA0Z,EAAcnC,IAAa,OAAAE,EAAAJ,EAAMK,SAAY,EAAAD,EAAA/S,SAAU,GAAK,EAAI8U,EAAiB,EAAI,EAC/EzC,EAAA/W,QAAQ+Y,kBAAkBW,EAAaA,GACnD3C,EAAY/W,QAAQgZ,OACtB,GACC,IAmNGxS,UAAU,+GACVuD,MAAM,QAENrM,SAAAS,EAAAA,IAACwb,EAAc,CAAAnT,UAAU,cAG3BtJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAvNgB,KACtB,MAAMkP,UAAEA,EAAAL,MAAWA,EAAOE,UAAAA,GAAcH,IAElCwC,EAAiB,CACrB,gBACA,mBACA,OAIFvC,EAAMoC,OAAO/B,EAAY,EAAG,KAAMkC,GAC5B,MAAAd,EAAWzB,EAAMW,KAAK,MAC5BjH,EAAS+H,GAGTnZ,WAAW,aACT,GAAIoX,EAAY/W,QAAS,CAEvB,MAAM6Z,EACJtC,IAAa,OAAAE,EAAMJ,EAAAK,SAAY,EAAAD,EAAA/S,SAAU,GAAK,IAC3C,OAAAoV,IAAe,SAAI,EAAAA,EAAApV,SAAU,GAAK,EACnC,EAEQqS,EAAA/W,QAAQ+Y,kBAAkBc,EAAgBA,GACtD9C,EAAY/W,QAAQgZ,OACtB,GACC,IA8LGxS,UAAU,0GACVuD,MAAM,QAENrM,SAAAS,EAAAA,IAAC4b,EAAO,CAAAvT,UAAU,mBAKtBrJ,KAAC,MAAI,CAAAqJ,UAAU,WACb9I,SAAA,CAAAR,EAAAiB,IAAC,WAAA,CACCsI,IAAKsQ,EACLjG,QACAC,SAAWP,GAAMO,EAASP,EAAEQ,OAAOF,OACnCkJ,SAAU9C,EACV+C,QAAS/C,EACTgD,UAAWhD,EACXjG,cACA6F,OACAtQ,UAAU,uIAIXsK,KACC3S,IAAC,MAAI,CAAAqI,UAAU,iDACb9I,SAAAR,EAAAiB,IAAC,MAAA,CACCqI,UAAU,wDACV2T,wBAAyB,CAAEC,QAhLfjE,EAgLsCrF,EA/KrDqF,EAEJ7X,QAAQ,gBAAiB,qFACzBA,QAAQ,eAAgB,qFACxBA,QAAQ,cAAe,kFAEvBA,QAAQ,iBAAkB,yCAE1BA,QAAQ,aAAc,8BAEtBA,QAAQ,aAAc,+BAEtBA,QAAQ,WAAY,4GAEpBA,QAAQ,cAAe,+IAEvBA,QAAQ,wBAAyB,8DAEjCA,QAAQ,wBAAyB,+DAEjCA,QAAQ,+BAAgC,CAAC+b,EAAQC,EAAIC,IAE7C,6EADMD,EAAK,YAAYA,EAAG/D,SAAW,6BACuEgE,EAAGhE,uBAGvHjY,QAAQ,MAAO,oBA1BG,IAAC6X,GCrLpBqE,GAA4C,EAAGC,iBAAgB1J,oBAQhE,MAAI,CAAAvK,UAAU,gEACZ9I,SARqE,CACxE,CAAEuK,KAAM,KAAMyS,KAAM,OAAQhO,MAAO,OACnC,CAAEzE,KAAM,KAAMyS,KAAM,OAAQhO,MAAO,WACnC,CAAEzE,KAAM,KAAMyS,KAAM,OAAQhO,MAAO,QAKtBrE,IAAKN,IACR,MAAAO,EAAWmS,IAAmB1S,EAAKE,KAEvC,OAAA/K,EAAAC,KAAC,SAAA,CAECsE,KAAK,SACL+G,QAAS,IAAMuI,EAAShJ,EAAKE,MAC7BzB,UAAW,2FACT8B,EACI,kFACA,4IAGN5K,SAAA,CAAAS,EAAAA,IAAC,OAAK,CAAAqI,UAAU,UAAW9I,SAAAqK,EAAK2S,SAChCvc,IAAC,OAAM,CAAAT,SAAAqK,EAAK2E,UAVP3E,EAAKE,UCiChB0S,GAA4C,EAChDC,WACA5X,QACAjG,kBACA8d,YACAC,kBACAC,qBACAC,cACAC,aACAC,eACAC,WACAC,YAAW,EACXC,eACAC,oBACAC,sBAEM,MAAA3T,KAAEA,GAASC,IACXa,EAAcd,EAAKW,UAClBiT,EAAUC,GAAe9c,WAAwB,MAGlD+c,EAAepR,EAAAA,QAAQ,IACtB+Q,GACGT,EAASe,UAAY,IAC1BtT,OAAegT,EAAaO,IAAIC,IAChCC,OAAQ3S,KAAqCA,GAHtB,GAIzB,CAACyR,EAASe,SAAUN,IAWjBU,EAAkBzR,EAAAA,QAAQ,IACzB+Q,EACEW,MAAMC,KAAKZ,EAAaa,UADL,GAEzB,CAACb,IAuBF,OAAAne,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,GAAMzC,GAC3BwD,UAAW,aAAYqU,EAAY,wCAA0C,IAE5End,SAAAmd,IAEC1d,KAAC,MAAI,CAAAqJ,UAAU,YAEb9I,SAAA,CAAAS,EAAAA,IAACqc,GAAa,CAAAC,eAAgBe,EAAUzK,SAAU0K,WAGjD,MACC,CAAA/d,SAAA,CAAAP,EAAAA,KAAC,QAAM,CAAA0T,QAAQ,QAAQrK,UAAU,kEAAkE9I,SAAA,CAAA,SAC7E,OAAb8d,GAAqBrd,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IAC5B,OAAb8d,EAAoB,WAA0B,OAAbA,EAAoB,eAAiB,WAAW,UAGzE,OAAbA,GACCte,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACL4O,GAAG,QACHS,MAAOgK,EAAgBqB,MACvBpL,SAAWP,GAAMuK,EAA4BqB,IAAA,IAAKA,EAAMD,MAAO3L,EAAEQ,OAAOF,SACxEG,YAAY,eACZzK,UAAU,8LAGA,OAAbgV,GACCte,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOgK,EAAgBuB,SAAW,GAClCtL,SAAWP,GAAMuK,EAA4BqB,IAAA,IAAKA,EAAMC,QAAS7L,EAAEQ,OAAOF,SAC1EG,YAAY,uBACZzK,UAAU,8LAGA,OAAbgV,GACCte,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOgK,EAAgBwB,SAAW,GAClCvL,SAAWP,GAAMuK,EAA4BqB,IAAA,IAAKA,EAAME,QAAS9L,EAAEQ,OAAOF,SAC1EG,YAAY,YACZzK,UAAU,wMAMf,MACC,CAAA9I,SAAA,CAAAP,EAAAA,KAAC,QAAM,CAAA0T,QAAQ,UAAUrK,UAAU,kEAAkE9I,SAAA,CAAA,SAC/E,OAAb8d,GAAqBrd,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IAC5B,OAAb8d,EAAoB,WAA0B,OAAbA,EAAoB,eAAiB,WAAW,UAGzE,OAAbA,GACCte,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOgK,EAAgByB,QACvBxL,SAAWD,GAAUiK,EAAmBqB,IAAS,IAAKA,EAAMG,QAASzL,KACrEG,YAAY,oDACZ6F,KAAM,EACNtQ,UAAU,kBAGA,OAAbgV,GACCte,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOgK,EAAgB0B,WAAa,GACpCzL,SAAWD,GAAUiK,EAAmBqB,IAAS,IAAKA,EAAMI,UAAW1L,KACvEG,YAAY,6EACZ6F,KAAM,EACNtQ,UAAU,kBAGA,OAAbgV,GACCte,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOgK,EAAgB2B,WAAa,GACpC1L,SAAWD,GAAUiK,EAAmBqB,IAAS,IAAKA,EAAMK,UAAW3L,KACvEG,YAAY,iDACZ6F,KAAM,EACNtQ,UAAU,qBAMfzJ,GAAmBse,GAAgBU,EAAgBrX,OAAS,UAC1D,MAAA,CAAI8B,UAAU,qDACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,0FACf9I,SAAA,CAAAS,EAAAA,IAACue,EAAM,CAAArV,KAAM,GAAIb,UAAU,qBAAqB,eAAY,OAAAiR,EAAAmD,EAASe,eAAT,EAAAlE,EAAmB/S,SAAU,EAAE,kBAG5F,MAAI,CAAA8B,UAAU,8FACZ9I,SAAAqe,EAAgB1T,IAAac,UAC5B,MAAMwT,EAAW,OAAAlF,EAAAmD,EAASe,eAATlE,EAAAA,EAAmBjJ,SAASrF,EAAM+F,KAE7C0N,EAAezT,EAAMlL,OAAS0e,EAzG3C,CACLlf,gBAwG0E0L,EAAMlL,MAvGhFA,MAAO,gBAuGkF,EAG3E,OAAAf,EAAAC,KAAC,SAAA,CAECqL,QAAS,IAzIH,CAACqT,UACzB,IAAKP,EAAmB,OACxB,MAAMqB,GAAW,OAAAlF,EAAAmD,EAASe,eAATlE,EAAAA,EAAmBjJ,SAASqN,MAAY,EAEzDP,EAAkBV,EAAS1L,IAAK2M,GAAUc,IAqITE,CAAkB1T,EAAM+F,KACvCzN,KAAK,SACL+E,UAAW,8DACTmW,EACI,8BACA,0GAENvf,MAAOwf,EAENlf,SAAA,CAAAif,EAAW,KAAO,IAAI,IAAExT,EAAMC,OAV1BD,EAAM+F,cAmBvB/R,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMyS,IACf3J,SAAU8J,IAAaN,EAAgBqB,MAAM5F,SAAWuE,EAAgByB,QAAQhG,OAChF/P,UAAU,iLAET9I,WAAW,UAAY,OAE1BR,EAAAiB,IAAC,SAAA,CACCqK,QAAS0S,EACT1U,UAAU,kFACX9I,SAAA,oBAQHmP,EAAAA,SAAA,CAAAnP,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,wCACb9I,SAAA,GAACS,IAAA,KAAA,CAAGqI,UAAU,sDACX9I,SAAkB+K,GAAAC,EAAakS,EAASuB,MAAOvB,EAASyB,QAASzB,EAAS0B,WAE5Evf,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMwS,EAAYJ,EAAUW,GACrC/U,UAAU,2FACV,aAAW,KAEX9I,SAAAS,EAAAA,IAAC2e,EAAO,CAAAzV,KAAM,OAEhBnK,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAM2S,EAASP,EAAS1L,IAAKqM,GACtC/U,UAAU,0FACV,aAAW,KAEX9I,SAAAS,EAAAA,IAAC4e,EAAQ,CAAA1V,KAAM,aAOtBqU,EAAahX,OAAS,GACpBvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,wCACb9I,SAAA,CAAAS,MAACue,GAAMrV,KAAM,GAAIb,UAAU,iDAAiDuD,MAAM,UACjF2R,EAAarT,IAAac,IAEzB,MAAM6T,EAAa7T,EAAMlL,MAzL9B,CACLR,gBAJc,GAFKwf,EA8LsC9T,EAAMlL,UAvL/DA,MAJgBgf,QA2LwD,EA9LtD,IAACA,EAiMP,OAAA/f,EAAAiB,IAACgR,EAAA,CAEC9Q,GAAI,qBAAqB8K,EAAM+F,MAC/BnF,MAAO,GAAGZ,EAAMC,uBAChB5C,UAAU,mHACVpJ,MAAO,IACF4f,EACH,kBAAmB7T,EAAMlL,OAAS,WAGnCP,SAAMyL,EAAAC,MATFD,EAAM+F,UAiBrBhS,EAAAiB,IAAC,MAAA,CACCqI,UAAU,+FACV2T,wBAAyB,CACvBC,QH9SgBjE,EG+Sd1N,GAAkBC,EAAakS,EAAS2B,QAAS3B,EAAS4B,UAAW5B,EAAS6B,WH9SvFtG,EAEEA,EAEJ7X,QAAQ,oBAAqB,iIAG7BA,QAAQ,aAAc,8FAGtBA,QAAQ,iBAAkB,uBAC1BA,QAAQ,aAAc,uBAGtBA,QAAQ,kDAAmD,mBAC3DA,QAAQ,kDAAmD,mBAG3DA,QAAQ,2BAA4B,2HAGpCA,QAAQ,eAAgB,qFACxBA,QAAQ,cAAe,qFACvBA,QAAQ,aAAc,kFAGtBA,QAAQ,qBAAsB,4BAC9BA,QAAQ,+BAAgC,kDAGxCA,QAAQ,aAAc,uHAGtBA,QAAQ,UAAW,0DAGnBA,QAAQ,MAAO,QApCA,SGkTVnB,KAAC,MAAI,CAAAqJ,UAAU,gDAAgD9I,SAAA,CAAA,QACvDwf,GAAWtC,EAASuC,WAAW,KAAGC,GAAmBxC,EAASuC,WAAW,OAAKjH,GAAwB0E,EAAS2B,iBHpTpG,IAACpG,kEIQD,KACrB,MAAA9F,GAAEA,GAAOgN,IACTze,EAAWC,IACXG,EAAWoM,KACXrO,gBAAEA,GAAoBE,MACtB2K,KAAEA,GAASC,IACXa,EAAcd,EAAKW,UAGjB+U,KAAMC,EAAMvgB,UAAWmV,UAASqL,EAASzN,MAAAA,GAAU0N,GAAQpN,IAG3DiN,KAAMI,EAAe,IAAOC,EAA2B,CAC7DC,SAAU,CAAC,WAAYvN,GACvBwN,QAAStN,gBACP,IAAKF,EAAI,MAAO,GAChB,MAAMyN,QAAiBC,GAAYC,UAAU3N,GAC7C,OAAO,OAAAoH,IAAS6F,WAAT,EAAA7F,EAAe6F,OAAQQ,EAASR,MAAQ,IAEjD9b,UAAW6O,EACX4N,UAAW,OAIPC,gBAAEA,GAAoBC,KAGtBC,EAAiBC,KAEjBC,EAAed,GAAkB,MAAPzN,OAAO,EAAAA,EAAAa,UAAW,wBAA2B,MAKvE2N,kBACJA,EAAAzD,gBACAA,EAAAC,mBACAA,EAAAyD,YACAA,EAAApD,SACAA,EAAAqD,iBACAA,EAAAC,oBACAA,EAAAC,kBACAA,EAAAC,qBACAA,EAAAC,gBACAA,EAAAC,eACAA,EAAAC,iBACAA,EAAAC,sBACAA,GACEC,GAAmB5O,IAGhB6O,EAAmBC,GAAwBxgB,WAAwB,OAGnEygB,EAAoBC,GAAyB1gB,YAAS,IACtD2gB,EAAiBC,GAAsB5gB,WAAS,CACrDoL,MAAO,GACPC,QAAS,GACTC,QAAS,GACTuV,QAAsB,MAAd9B,OAAc,EAAAA,EAAAhZ,SAAU,GAAK,IA+BjC+a,EAAmBnV,EAAAA,QAA8C,KACjE,IAACoT,IAAiBQ,EAAiB,MAAO,GAExC,MAAAwB,EAAYxB,EAAgByB,WAAoB/V,EAASgW,QAAU,IAGnEC,MAAqBC,IAU3B,GATapC,EAAA5a,QAAmBid,KAC7BA,EAAQC,WAAa,IAAIld,QAAoB8X,KAE3CA,EAASe,UAAY,IAAI7Y,QAAS+Y,IACjCgE,EAAe/d,IAAI+Z,SAKG,IAAxBgE,EAAexY,KAAY,MAAO,GAWtC,OAAOqY,EACJ5D,OAAgB3S,GAAAA,EAAM+F,KAAO2Q,EAAeI,IAAI9W,EAAM+F,MACtD7G,IAAcc,IAAA,UACVA,EACH+W,WAZkBzR,EAYMtF,EAAMsF,OAAS,EAXrCA,GAAS,GAAW,SACpBA,GAAS,GAAW,aACpBA,GAAS,GAAW,YACjB,UAJY,IAACA,KAcrB,CAACiP,EAAcQ,IAGZ7C,EAAe/Q,EAAAA,QAAQ,KACrB,MAAAjC,MAAU8X,IAET,OADUV,EAAA3c,WAAiBqG,EAAM+F,KAAO7G,EAAInG,IAAIiH,EAAM+F,IAAK/F,IAC3Dd,GACN,CAACoX,IA8BEW,EAAahC,EAAeiC,UAO5BC,EAAkBhW,EAAAA,QAAQ,KACnB,MAANiT,OAAM,EAAAA,EAAAyC,WAEJ,IAAIzC,EAAKyC,WAAWO,KAAK,CAACC,EAAGC,IAE3B,IAAInd,KAAKmd,EAAEtD,WAAWuD,UAAY,IAAIpd,KAAKkd,EAAErD,WAAWuD,WAJpC,GAM5B,CAAO,MAANnD,OAAM,EAAAA,EAAAyC,YAMV,GAAI7N,EAEA,OAAAjV,EAAAiB,IAAC,OAAIqI,UAAU,gDACb9I,eAAC,MAAI,CAAA8I,UAAU,2FAKrB,IAAK+W,EACH,aACG,MAAI,CAAA/W,UAAU,gDACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,cACb9I,SAAA,GAACS,IAAA8N,EAAA,CAAOzF,UAAU,wCACjBrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,SAAa,kBACrER,EAAAiB,IAACgR,EAAA,CACC9Q,GAAG,SACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,4DACX9I,SAAA,mBAkBT,aACG,UAAQ,CAAA8I,UAAU,yDACjB9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,oBAEX9I,SAAA,EAAA4gB,GAAgBG,IAChBvhB,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,GAAO,IAC9BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,wFACVgH,KAAK,QAEJ9P,SAAgB4gB,GAAAG,IAKrBvhB,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,OAEV9I,SAAAR,EAAAC,KAACgS,EAAA,CACC9Q,GAAG,SACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,8EAEV9I,SAAA,CAAAR,EAAAiB,IAACyiB,EAAY,IAAE,kBAKnB1jB,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,gBAEV9I,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,4BACb9I,SAAA,GAACS,IAAA,MAAA,CACET,WAAKmjB,WACJ3jB,EAAAiB,IAAC,MAAA,CACC2W,IAAKyI,EAAKsD,WACV9L,IAAKwI,EAAKxT,MACVvD,UAAU,kDACV2L,QAAQ,QACRmD,SAAS,QACT3X,MAAM,MACNH,OAAO,QAGRN,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,iHACb9I,eAACuO,EAAO,CAAAzF,UAAU,8BAIxBrJ,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,wCACb9I,SAAA,GAAAS,IAAC,MAAI,CAAAqI,UAAU,uBAEZ9I,SAAA6f,EAAKuD,aAAevD,EAAKuD,YAAYpc,OAAS,EAC5C6Y,EAAKuD,YAAsBzY,IAAK0Y,IAC/B,MAAMC,EAAgC,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA3X,KAC1E,OAAO4X,EACL9jB,EAAAiB,IAAC,OAAA,CAECqI,UAAU,uHAET9I,SAAAsjB,GAH0B,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA7R,KAK/D,OAINqO,EAAK3T,UACHzL,EAAAA,IAAC,QAAKqI,UAAU,uHACb9I,WAAKkM,aAKb7M,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAACgR,EAAA,CACC9Q,GAAI,SACJsiB,MAAO,CAAEM,IAAK,QAASC,OAAQ3D,EAAKrO,KACpC1I,UAAU,2FACV,aAAW,QAEX9I,eAACof,EAAO,MAEV5f,EAAAiB,IAAC,SAAA,CACCqK,QA7JK+H,UACnB,GAAC4Q,QAAQ,uCAET,UACI/C,EAAegD,YAAY/Q,GACjCzR,EAAS,gBACFmR,GAET,GAsJkBuB,SAAU8O,EACV5Z,UAAW,oEACT4Z,EACI,gCACA,4CAEN,aAAW,QAEV1iB,iBACE,MAAA,CAAI8I,UAAU,yFAEduW,EAAQ,cAMlB5e,IAAA,KAAA,CAAGqI,UAAU,oEACX9I,SAAkB+K,GAAAC,EAAa6U,EAAKxT,MAAOwT,EAAKvT,QAASuT,EAAKtT,aAEhE9L,IAAA,IAAA,CAAEqI,UAAU,gDACV9I,SAAkB+K,GAAAC,EAAa6U,EAAK8D,OAAQ9D,EAAK+D,SAAU/D,EAAKgE,cAEnEpkB,KAAC,MAAI,CAAAqJ,UAAU,wDACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,0BACZ9I,SAAA,EA7HU8jB,EA6HQjE,EAAKiE,OA5H/BxF,MAAMC,KAAK,CAAEvX,OAAQ,GAAK,CAAC+c,EAAGzb,IACnC9I,EAAAiB,IAACujB,GAAA,CAEClb,UAAWR,EAAIwb,EAAS,kBAAoB,oCADvCxb,OA2HK7I,KAAC,OAAK,CAAAqJ,UAAU,mBAAoB9I,SAAA,CAAK6f,EAAAiE,OAAO,aAElDrkB,KAAC,MAAI,CAAAqJ,UAAU,0BACb9I,SAAA,CAAAR,EAAAiB,IAACwjB,GAAW,WACX,OAAK,CAAAjkB,SAAA,CAAA,UAAQwf,GAAWK,EAAKqE,2BAQvCnC,EAAiB/a,OAAS,GACzBxH,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gBAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAA0jB,GAAA,CAAQrb,UAAU,qBAAqB,8BAEzC,MAAI,CAAAA,UAAU,uBACZ9I,SAAA+hB,EAAiBpX,IAAac,IAE7B,MAAM6T,EAAa7T,EAAMlL,MA5N9B,CACLR,gBAJc,GAFKwf,EAiOsC9T,EAAMlL,UA1N/DA,MAJgBgf,QA8NwD,EAjOtD,IAACA,EAoOP,OAAA/f,EAAAC,KAACgS,EAAA,CAEC9Q,GAAI,qBAAqB8K,EAAM+F,MAC/BnF,MAAO,GAAGZ,EAAMC,0BAChB5C,UAAU,iHACVpJ,MAAO,IACF4f,EACH,kBAAmB7T,EAAMlL,OAAS,WAGnCP,SAAA,CAAMyL,EAAAC,KACPlM,EAAAC,KAAC,OAAA,CACCqJ,UAAU,6BACVpJ,MAAO,CAAEa,MAAOkL,EAAMlL,OAAS,WAChCP,SAAA,CAAA,IACGyL,EAAM+W,UAAU,SAdf/W,EAAM+F,YAwBvBhS,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IAErB/H,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yDACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,mDAAmD9I,SAEjE,UACCX,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,aAEb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL+G,QAAS,IAAM6W,GAAuBD,GACtC5Y,UAAU,sHAEV9I,SAAA,CAAAR,EAAAiB,IAAC8N,EAAO,IAAE,IAAEmT,EAAqB,KAAO,aAIvC1B,GAAwC,IAAxBA,EAAahZ,SAC9BxH,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL+G,QAASkW,EACTlY,UAAU,4HAEV9I,SAAA,CAAAR,EAAAiB,IAAC2jB,GAAO,IAAE,IAAEtD,EAAc,QAAU,qBAQ9CrgB,IAACiS,IACE1S,SACC0hB,GAAAliB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGrJ,OAAQ,GAC/BoF,QAAS,CAAEiE,QAAS,EAAGrJ,OAAQ,QAC/BwP,KAAM,CAAEnG,QAAS,EAAGrJ,OAAQ,GAC5BgJ,UAAU,gCAEV9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,2DAA2D9I,SAEzE,cACAP,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,eACpES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAE9CR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOwO,EAAgBvV,MACvBgH,SAAWP,GAAM+O,EAAmB,IAAKD,EAAiBvV,MAAOyG,EAAEQ,OAAOF,QAC1EG,YAAY,sBACZzK,UAAU,+KAGb,MACC,CAAA9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,oBACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOwO,EAAgBtV,QACvB+G,SAAWP,GAAM+O,EAAmB,IAAKD,EAAiBtV,QAASwG,EAAEQ,OAAOF,QAC5EG,YAAY,kCACZzK,UAAU,+KAGb,MACC,CAAA9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,gBACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOwO,EAAgBrV,QACvB8G,SAAWP,GAAM+O,EAAmB,IAAKD,EAAiBrV,QAASuG,EAAEQ,OAAOF,QAC5EG,YAAY,aACZzK,UAAU,0KAGdrJ,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QApZK+H,UACvB,GAAK+O,EAAgBvV,MAAMwM,OAKvB,UACIwH,GAAYgE,OAAO1R,EAAKiP,GAC9BD,GAAsB,GACtBE,EAAmB,CAAExV,MAAO,GAAIC,QAAS,GAAIC,QAAS,GAAIuV,QAAsB,MAAd9B,OAAc,EAAAA,EAAAhZ,SAAU,GAAK,UAExFqL,GAEP2E,MAAM,iBACR,MAZEA,MAAM,mBAmZUlO,UAAU,yFACX9I,SAAA,OAGDR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,KACP6W,GAAsB,GACtBE,EAAmB,CAAExV,MAAO,GAAIC,QAAS,GAAIC,QAAS,GAAIuV,QAAsB,MAAd9B,OAAc,EAAAA,EAAAhZ,SAAU,GAAK,KAEjG8B,UAAU,kFACX9I,SAAA,oBAUXS,IAACiS,IACE1S,SACC8gB,GAAAthB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGrJ,OAAQ,GAC/BoF,QAAS,CAAEiE,QAAS,EAAGrJ,OAAQ,QAC/BwP,KAAM,CAAEnG,QAAS,EAAGrJ,OAAQ,GAC5BgJ,UAAU,gCAEV9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,2DAA2D9I,SAEzE,iBACAP,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,QAAQrK,UAAU,kEAAkE9I,SAEnG,UACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACL4O,GAAG,QACHS,MAAOgK,EAAgBqB,MACvBpL,SAAWP,GAAMuK,EAA4BqB,IAAA,IAAKA,EAAMD,MAAO3L,EAAEQ,OAAOF,SACxEG,YAAY,eACZzK,UAAU,wMAIb,MACC,CAAA9I,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,UAAUrK,UAAU,kEAAkE9I,SAErG,UACAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOgK,EAAgByB,QACvBxL,SAAWD,GAAUiK,EAAmBqB,IAAS,IAAKA,EAAMG,QAASzL,KACrEG,YAAY,oDACZ6F,KAAM,EACNtQ,UAAU,uBAIdrJ,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAASmW,EACTrN,SAAU8J,IAAaN,EAAgBqB,MAAM5F,SAAWuE,EAAgByB,QAAQhG,OAChF/P,UAAU,iLAET9I,WAAW,UAAY,OAE1BR,EAAAiB,IAAC,SAAA,CACCqK,QAASkW,EACTlY,UAAU,kFACX9I,SAAA,kBAYLggB,GAAgBA,EAAahZ,OAAS,QAErC,MAAI,CAAA8B,UAAU,YACZ9I,SAAaggB,EAAArV,IAAK0X,IAEX,MAAAiC,EAAa9C,IAAsBa,EAAQ7Q,IAG/C,SAAA/R,KAAC,MAAsB,CAAAqJ,UAAU,uDAG/B9I,SAAA,CAAAR,EAAAC,KAAC,MAAA,CACCqJ,UAAU,iIACVgC,QAAS,KAAMyZ,OA1fhB1G,EA0f8BwE,EAAQ7Q,SAzf3DiQ,EAAgC+C,GAAAA,IAAW3G,EAAY,KAAOA,GAD1C,IAACA,GA4fC7d,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,yDACX9I,SAAA,CAAA+K,GAAkBC,EAAaqX,EAAQhW,MAAOgW,EAAQ/V,QAAS+V,EAAQ9V,WACxE9M,KAAC,OAAK,CAAAqJ,UAAU,4DAA4D9I,SAAA,CAAA,KACvEqiB,EAAQC,WAAa,IAAItb,OAAO,kBAIvCxH,EAAAiB,IAACuI,GAAOyb,KAAP,CACCvf,QAAS,CAAEwf,OAAQJ,EAAa,GAAK,GACrClb,WAAY,CAAEtB,SAAU,IACxBgB,UAAU,sDAEV9I,eAAC2kB,GAAe,WAKpBlkB,IAACiS,IACE1S,SACCskB,GAAA9kB,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGrJ,OAAQ,GAC/BoF,QAAS,CAAEiE,QAAS,EAAGrJ,OAAQ,QAC/BwP,KAAM,CAAEnG,QAAS,EAAGrJ,OAAQ,GAC5BsJ,WAAY,CAAEtB,SAAU,GAAKE,KAAM,aACnCc,UAAU,kBAEV9I,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,oEACX9I,SAAA,EAAAqiB,EAAQC,WAAa,IAAI3X,IAAI,CAACuS,EAAU5X,IACxC9F,EAAAiB,IAACwc,GAAA,CAECC,WACA5X,QACAjG,kBACA8d,UAAW0D,IAAsB3D,EAAS1L,IAC1C4L,kBACAC,qBACAC,YAAa6D,EACb5D,WAAY6D,EACZ5D,aAAc6D,EACd5D,SAAUyD,EACVxD,WACAC,eACAC,kBAAmB0D,EACnBzD,UAAWwE,EAAQ7Q,KAdd0L,EAAS1L,QAiBf6Q,EAAQC,WAA0C,IAA7BD,EAAQC,UAAUtb,SACvCvG,EAAAA,IAAA,MAAA,CAAIqI,UAAU,oDAAoD9I,SAEnE,oCAxDFqiB,EAAQ7Q,SAqEnBoR,EAAgB5b,OAAS,QAE7B,OAAI8B,UAAU,YACZ9I,WAAgB2K,IAAI,CAACuS,EAAU5X,IAC9B9F,EAAAiB,IAACwc,GAAA,CAECC,WACA5X,QACAjG,kBACA8d,UAAW0D,IAAsB3D,EAAS1L,IAC1C4L,kBACAC,qBACAC,YAAa6D,EACb5D,WAAY6D,EACZ5D,aAAc6D,EACd5D,SAAUyD,EACVxD,WACAC,eACAC,kBAAmB0D,GAbdpE,EAAS1L,UAsBpB/R,KAAC,MAAI,CAAAqJ,UAAU,wBACb9I,SAAA,GAACS,IAAA8N,EAAA,CAAOzF,UAAU,wCACjBrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,SAExD,kCAzcU,IAAC8jB,0CCvNvBc,GAAsD,EAC1DC,UACAC,UAAWC,EACXC,oBAEM,MAAAC,EAAexjB,SAAuB,MACtCyjB,EAAmBzjB,SAAuB,OACzC0jB,EAAUC,GAAenkB,YAAS,IAClCokB,EAAUC,GAAerkB,YAAS,IAClCskB,EAAcC,GAAmBvkB,WAAS,GAEjDG,EAAAA,UAAU,KACJ,GAAAikB,EAAU,OAGV,GAAAJ,EAAa3iB,SAA4B,IAAjBijB,EAAoB,CACxC,MAAAE,EAAOR,EAAa3iB,QAAQojB,wBAClBF,EAAAC,EAAKpN,IAAMhX,OAAO8W,QACpC,CAEA,MAAMwN,EAAe,KACnB,IAAKV,EAAa3iB,QAAS,OAE3B,MAAM6V,EAAU9W,OAAO8W,QAInBA,EAAUoN,EAHI,MAGyBJ,GACzCC,GAAY,GAIVjN,GAAWoN,EARG,KAQyBJ,GACzCC,GAAY,IAOhB,OAHA/jB,OAAO8E,iBAAiB,SAAUwf,EAAc,CAAEC,SAAS,QAGpD,IAAMvkB,OAAO+E,oBAAoB,SAAUuf,IACjD,CAACR,EAAUI,EAAcF,IASzB5lB,OAAAA,EAAAA,KAAA,MAAA,CAAIsJ,IAAKkc,EAAcnc,UAAU,WAE/B9I,SAAA,CAAYmlB,IAACE,GACZ5kB,EAAAA,IAAC,MAAI,CAAAqI,UAAU,wFACb9I,WAAAS,IAAC,IAAE,CAAAqI,UAAU,2CAA2C9I,SAAA,uBAO5DR,EAAAiB,IAACuI,GAAOC,IAAP,CACCF,IAAKmc,EACLpc,UAAW,IAAGqc,IAAaE,EAAW,aAAe,YACrD3lB,MACEylB,IAAaE,EACT,CACEhN,IAAK,OACLwN,KAAMxkB,OAAOgC,WAAa,IAAM,OAAS,QACzCyiB,MAAOzkB,OAAOgC,WAAa,IAAM,OAAS,OAC1CpD,MAAOoB,OAAOgC,WAAa,IAAM,qBAAuB,QACxD0iB,SAAU1kB,OAAOgC,YAAc,IAAM,sBAAwB,QAE/D,CAAC,EAEP6B,QAAS,CACPwC,MAA+B,EAC/ByB,QAAS,GAEXC,WAAY,CAAErF,KAAM,SAAUiiB,QAAS,GAAIC,UAAW,KAEtDjmB,SAAAR,EAAAC,KAAC,MAAA,CACCqJ,UAAW,mDACTqc,IAAaE,EAAW,2BAA6B,IAItDrlB,SAAA,CAAAmlB,IAAaE,GACX5lB,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,0DACb9I,SAAA,GAACP,KAAA,OAAA,CAAKqJ,UAAU,yDACd9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,kDAAsD,UAGvEtJ,EAAAiB,IAAC,SAAA,CACCqK,QAlDM,KAClBwa,GAAY,GACZF,GAAY,IAiDAtc,UAAU,8DACVuD,MAAM,KAENrM,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAzF,KAAM,YAMrBlJ,IAAC,MAAI,CAAAqI,UAAU,iCACb9I,SAAAS,EAAAA,IAAC,OAAIsI,IAAKgc,EAAmBjc,UAAU,4FC3Fb,KAC9B,MAAA6J,GAAEA,GAAOgN,IACTze,EAAWC,IACXG,EAAWoM,KACXrO,gBAAEA,GAAoBE,MACtB2K,KAAEA,GAASC,IACQD,EAAAW,SAEnB,MAAE+U,KAAMsG,EAAO5mB,UAAWmV,UAASqL,EAASzN,MAAAA,GAAU8T,GAAiBxT,GACvE+N,EAAiB0F,KACjBC,EAAiBC,MACjB9F,gBAAEA,GAAoBC,MACtB8F,QAAEA,EAASlU,MAAOmU,GAAeC,KAGjC3B,EAAYrjB,SAAY,MACxBilB,EAAqBjlB,SAAuB,OAC3CklB,EAAeC,GAAoB3lB,YAAS,IAG5C4lB,EAAuBC,GAA4B7lB,YAAS,IAC5D8lB,EAAgBC,GAAqB/lB,WAAS,IAE/C4jB,EAAUjY,EAAAA,QAAQ,KACX,MAAPsZ,OAAO,EAAAA,EAAArB,SAAgBqB,EAAMrB,SAEb,MAAfqB,OAAe,EAAAA,EAAAe,UAAiBC,GAAkBhB,EAAce,UAC9D,KACN,CAACf,IAGJ9kB,EAAAA,UAAU,KACR,IAAKyjB,EAAS,OAGV,IAACxjB,OAAO8lB,GAAI,CACR,MAAAC,EAAMC,SAASvd,cAAc,UACnCsd,EAAIhQ,IAAM,qCACV,MAAMkQ,EAAiBD,SAASE,qBAAqB,UAAU,UAC3DD,WAAgBE,aACHF,EAAAE,WAAWC,aAAaL,EAAKE,EAEhD,CAGA,MAAMI,EAAmB,KACnBrmB,OAAO8lB,IAAM9lB,OAAO8lB,GAAGQ,QAAUjB,EAAmBpkB,UACtDwiB,EAAUxiB,QAAU,IAAIjB,OAAO8lB,GAAGQ,OAAOjB,EAAmBpkB,QAAS,CACnEuiB,UACA+C,WAAY,CACVC,YAAa,EACbC,OAAQzmB,OAAOC,SAASwmB,OACxBC,IAAK,EACLC,eAAgB,EAChBC,GAAI,EACJC,eAAgB,EAChBC,eAAgB,EAChBC,SAAU,EACVC,SAAU,GAEZC,OAAQ,CACNC,QAAS,KAEP3B,GAAiB,SAc3B,OAPIvlB,OAAO8lB,IAAM9lB,OAAO8lB,GAAGQ,WAGzBtmB,OAAOmnB,wBAA0Bd,EAI5B,KACD5C,EAAUxiB,SAAgD,mBAA9BwiB,EAAUxiB,QAAQmmB,SAChD3D,EAAUxiB,QAAQmmB,YAGrB,CAAC5D,IAGE,MAAA7G,EAAepR,EAAAA,QAAQ,KACvB,KAAQ,MAAPsZ,OAAO,EAAAA,EAAAjI,YAAauC,EAAiB,MAAO,GAE1C,OADWA,EAAgByB,WAAeyG,EAAIxG,QAAU,IAC9C9D,OAAO3S,UAAS,OAAAA,EAAM+F,MAAO,OAAAuI,EAAAmM,EAAMjI,eAAN,EAAAlE,EAAgBjJ,SAASrF,EAAM+F,SAC5E,CAAC0U,EAAO1F,IAgJLkC,EAAahC,EAAeiC,UAElC,OAAIlO,EAEAjV,EAAAiB,IAAC,OAAIqI,UAAU,gDACb9I,eAAC,MAAI,CAAA8I,UAAU,2FAKhBod,QAmBF,UAAQ,CAAApd,UAAU,yCACjB9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,8BAEb9I,SAAA,CAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAE1BxF,SAAAR,EAAAC,KAACgS,EAAA,CACC9Q,GAAG,mBACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,8EAEV9I,SAAA,CAAAR,EAAAiB,IAACyiB,EAAY,IAAE,oBAKnBzjB,KAAC,MAAI,CAAAqJ,UAAU,kCAGb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,iDAGZ9I,SAAA,CACC6kB,GAAArlB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,OAEV9I,SAAA,CAAAR,EAAAiB,IAACmkB,GAAA,CACCC,UACAC,UAAW4B,EACX1B,cAAe,IAAM4B,GAAiB,MAEtCD,GACAlmB,EAAAA,IAAC,MAAI,CAAAqI,UAAU,6GACb9I,SAACS,EAAAA,IAAA,MAAA,CAAIqI,UAAU,wFAOvBtJ,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gBAEV9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,wCAEb9I,SAAA,GAAAS,IAAC,MAAI,CAAAqI,UAAU,uBACZ9I,SAAAkmB,EAAM9C,aAAe8C,EAAM9C,YAAYpc,OAAS,EAC9Ckf,EAAM9C,YAAsBzY,IAAK0Y,IAChC,MAAMC,EAAgC,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA3X,KAC1E,OAAO4X,EACL9jB,EAAAiB,IAAC,OAAA,CAECqI,UAAU,uHAET9I,SAAAsjB,GAH0B,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA7R,KAK/D,OAIN0U,EAAMha,UACJzL,EAAAA,IAAC,QAAKqI,UAAU,uHACb9I,WAAMkM,aAKd7M,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAACgR,EAAA,CACC9Q,GAAI,SACJsiB,MAAO,CAAEM,IAAK,iBAAkBC,OAAQ0C,EAAM1U,KAC9C1I,UAAU,2FACV,aAAW,QAEX9I,eAACof,EAAO,MAEV5f,EAAAiB,IAAC,SAAA,CACCqK,QArLM+H,UACpB,GAAC4Q,QAAQ,yBAET,UACI/C,EAAegD,YAAY/Q,GACjCzR,EAAS,0BACFmR,GAET,GA8KkBuB,SAAU8O,EACV5Z,UAAW,oEACT4Z,EACI,gCACA,4CAEN,aAAW,QAEV1iB,iBACE,MAAA,CAAI8I,UAAU,yFAEduW,EAAQ,YAOlB5e,EAAAA,IAAA,KAAA,CAAGqI,UAAU,wDACX9I,WAAMqM,UAGT5M,KAAC,MAAI,CAAAqJ,UAAU,gEACZ9I,SAAA,CAAAkmB,EAAMpC,eACJ,MAAI,CAAAhb,UAAU,0BACZ9I,SAAA,CAAAse,MAAMC,KAAK,CAAEvX,OAAQ,GAAK,CAAC+c,EAAGzb,IAC7B9I,EAAAiB,IAACujB,GAAA,CAEClb,UAAW,YAAWR,EAAI4d,EAAMpC,OAAU,kBAAoB,qCADzDxb,MAIT7I,KAAC,OAAK,CAAAqJ,UAAU,cAAe9I,SAAA,CAAMkmB,EAAApC,OAAO,aAGhDrkB,KAAC,MAAI,CAAAqJ,UAAU,0BACb9I,SAAA,CAAAR,EAAAiB,IAACwjB,GAAW,IACXxjB,EAAAA,IAAA,OAAA,CAAMT,SAAWwf,GAAA0G,EAAMyC,sBAM7BzC,EAAM0C,SACLppB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gBAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAAooB,GAAA,CAAW/f,UAAU,kBAAkB,cAE1CrI,IAAC,OAAIqI,UAAU,8EACb9I,eAAC8oB,GAAe,CAAA9oB,SAAAkmB,EAAM0C,eAM3B1C,EAAM6C,aACLvpB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gIAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAAuoB,GAAA,CAASlgB,UAAU,oBAAoB,cAE1CrI,IAAC,OAAIqI,UAAU,8EACb9I,eAAC8oB,GAAe,CAAA9oB,SAAAkmB,EAAM6C,wBAO9BtpB,KAAC,MAAI,CAAAqJ,UAAU,6BAGZ9I,SAAA,CAAAge,EAAahX,OAAS,GACrBxH,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,WAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAA0jB,GAAA,CAAQrb,UAAU,qBAAqB,mBAEzC,MAAI,CAAAA,UAAU,uBACZ9I,SAAAge,EAAarT,IACZc,GAAAjM,EAAAiB,IAAC,MAAA,CAECqI,UAAU,oEACVpJ,MAAO,CACLK,gBAAiB,GAAG0L,EAAMlL,UAC1BA,MAAOkL,EAAMlL,OAGdP,SAAMyL,EAAAC,MAPFD,EAAM+F,YAenB0U,EAAM+C,cAAgB5pB,IACtBG,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,8HAEV9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,OACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,0EACZ9I,SAAA,GAACS,IAAAyoB,GAAA,CAAYpgB,UAAU,oBAAoB,YAG5CzJ,IAAoBwnB,GACnBrnB,EAAAiB,IAAC,SAAA,CACCqK,QArSE,KACtBgc,GAAyB,GACPE,GAAA,MAAAd,OAAA,EAAAA,EAAO+C,eAAgB,KAoSrBngB,UAAU,2FACVuD,MAAM,WAENrM,SAAAS,EAAAA,IAAC2e,EAAO,CAAAtW,UAAU,iBAIvBod,EAAMzG,kBACJ,IAAA,CAAE3W,UAAU,2CAA2C9I,SAAA,CAAA,UAC9Cwf,GAAW0G,EAAMzG,kBAM7BoH,GAEGpmB,EAAAA,IAAA0O,EAAAA,SAAA,CAAAnP,SAAAkmB,EAAM+C,eAEHxoB,IAAA0O,WAAA,CAAAnP,SAAAR,EAAAiB,IAAC,MAAA,CACCqI,UAAU,sEACV2T,wBAAyB,CACvBC,OAAQyM,GAAyBjD,EAAM+C,eAEzCne,QAAUgI,IAER,MAAMQ,EAASR,EAAEQ,OACjB,GAAuB,WAAnBA,EAAO8V,SAAwB9V,EAAO+V,QAAmB,UAAG,CAtZ7D,CAACC,IAG5B,GAAKxE,EAAUxiB,SAAYqkB,EAKvB,IAEQ7B,EAAAxiB,QAAQinB,OAAOD,GAAS,GAGlCxE,EAAUxiB,QAAQknB,kBAGXnX,GAET,GAsY0BoX,CADgBC,SAASpW,EAAO+V,QAAmB,UAAG,IAExD,OAKL5pB,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,oDACb9I,SAAA,CAACS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,UAAU9I,SAA0B,+BAChDX,KACCoB,IAAC,IAAE,CAAAqI,UAAU,eAAe9I,SAA2B,qCAQhE6mB,UACE,MACC,CAAA7mB,SAAA,CAAAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO2T,EACP1T,SAAU2T,EACVzT,YAAY,4DACZ6F,KAAM,EACNtQ,UAAU,oBAEZrJ,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAnVC+H,kBACjB,GAACqT,GAAUvT,EAEX,IAEF,MAAMsL,GAAYiI,EAAMjI,UAAY,IAAItT,IAAKgf,GACnB,iBAAjBA,EAA4BA,EAA6B,MAAdA,OAAc,EAAAA,EAAAnY,KAChE4M,OAAOwL,SAEHxG,GAAe8C,EAAM9C,aAAe,IAAIzY,IAAK0Y,GAC3B,iBAAfA,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA7R,KAC1D4M,OAAOwL,SAGHC,EAAa,CACjBxd,MAAO6Z,EAAM7Z,MACbwY,QAASqB,EAAMrB,QACf3Y,SAAUga,EAAMha,SAChBkX,cACAuF,UAAWzC,EAAMyC,UACjBC,QAAS1C,EAAM0C,QACfK,aAAclC,EACdgC,YAAa7C,EAAM6C,YACnB9K,WACA6F,OAAQoC,EAAMpC,OACdhC,MAAOoE,EAAMpE,aAKTuE,EAAe3C,YAAY,CAC/B/Q,KACAiN,KAAMiK,IAERtD,EAAQ,QAAS,mBACjBO,GAAyB,GACzBE,EAAkB,UACXhU,GAGPwT,EAAW,SAAS,OAAAsD,EAAA,OAAI1N,EAAApJ,EAAAoN,mBAAUR,WAAd,EAAAkK,EAAoB5W,UAAW,yBACrD,GA2SoBU,SAAUyS,EAAe1D,UACzB7Z,UAAU,+KAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IACP1D,EAAe1D,UAAY,UAAY,QAE1CnjB,EAAAC,KAAC,SAAA,CACCqL,QAjWG,KACvBgc,GAAyB,GACzBE,EAAkB,KAgWEpT,SAAUyS,EAAe1D,UACzB7Z,UAAU,+KAEV9I,SAAA,CAAAR,EAAAiB,IAAC2O,EAAQ,IAAE,kCAvS5B,MAAI,CAAAtG,UAAU,gDACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,cACb9I,SAAA,GAACS,IAAA+N,EAAA,CAAQ1F,UAAU,wCAClBrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,SAAmB,wBAC3ER,EAAAiB,IAACgR,EAAA,CACC9Q,GAAG,mBACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,4DACX9I,SAAA,0HC7P2B,KAC9B,MAAA2S,GAAEA,GAAOgN,IACTze,EAAWC,IACXG,EAAWoM,KACXrO,gBAAEA,GAAoBE,MACtB2K,KAAEA,GAASC,IACQD,EAAAW,SAEzB,MAAQ+U,KAAMoK,EAAU1qB,UAAWmV,GAAYwV,GAAiBtX,IACxDiN,KAAMsK,EAAiB,IAAOC,GAAkBxX,GAClD+N,EAAiB0J,KACjBC,EAAsBC,MACtB9J,gBAAEA,GAAoBC,MACtB8F,QAAEA,EAAAlU,MAASA,GAAUoU,KAErB3B,EAAYrjB,SAAY,MACxBilB,EAAqBjlB,SAAuB,OAC3CklB,EAAeC,GAAoB3lB,YAAS,IAC5CspB,EAAeC,GAAoBvpB,WAAwB,MACpBA,EAAAA,SAAwB,MACtE,MAAOwpB,EAAgBC,GAAqBzpB,WAAwB,OAC7D0pB,EAAeC,GAAoB3pB,YAAS,IAG5C4pB,EAAgBC,GAAqB7pB,WAAwB,OAC7D8lB,EAAgBC,GAAqB/lB,WAAiB,IAI7DG,EAAAA,UAAU,KACJ8oB,EAAeljB,OAAS,IAAMujB,GAAiBL,EAAe,IAC/CM,EAAAN,EAAe,GAAGrF,UAEpC,CAACqF,EAAgBK,IAGpBnpB,EAAAA,UAAU,KACR,KAAe,MAAV4oB,OAAU,EAAAA,EAAAe,YAAY,OAEvB,IAAC1pB,OAAO8lB,GAAI,CACR,MAAAC,EAAMC,SAASvd,cAAc,UACnCsd,EAAIhQ,IAAM,qCACV,MAAMkQ,EAAiBD,SAASE,qBAAqB,UAAU,UAC3DD,WAAgBE,aACHF,EAAAE,WAAWC,aAAaL,EAAKE,EAEhD,CAEA,MAAMI,EAAmB,KACnBrmB,OAAO8lB,IAAM9lB,OAAO8lB,GAAGQ,QAAUjB,EAAmBpkB,UACtDwiB,EAAUxiB,QAAU,IAAIjB,OAAO8lB,GAAGQ,OAAOjB,EAAmBpkB,QAAS,CACnEslB,WAAY,CACVoD,SAAU,WACVC,KAAMjB,EAASe,WACflD,YAAa,EACbC,OAAQzmB,OAAOC,SAASwmB,OACxBC,IAAK,EACLC,eAAgB,EAChBC,GAAI,EACJC,eAAgB,EAChBC,eAAgB,EAChBC,SAAU,GAEZE,OAAQ,CACNC,QAAS,KACP3B,GAAiB,SAa3B,OANIvlB,OAAO8lB,IAAM9lB,OAAO8lB,GAAGQ,WAGzBtmB,OAAOmnB,wBAA0Bd,EAG5B,KACD5C,EAAUxiB,SAAgD,mBAA9BwiB,EAAUxiB,QAAQmmB,SAChD3D,EAAUxiB,QAAQmmB,YAGrB,CAAW,MAAVuB,OAAU,EAAAA,EAAAe,aAGd3pB,EAAAA,UAAU,KACJ8oB,EAAeljB,OAAS,IAAMyjB,GAAkBP,EAAe,IAC/CQ,EAAAR,EAAe,GAAG1Y,MAErC,CAAC0Y,EAAgBO,IAGd,MAAAzM,EAAepR,EAAAA,QAAQ,KACvB,KAAW,MAAVod,OAAU,EAAAA,EAAA/L,YAAauC,EAAiB,MAAO,GAE7C,OADWA,EAAgByB,WAAeyG,EAAIxG,QAAU,IAC9C9D,OAAO3S,UAAS,OAAAA,EAAM+F,MAAO,OAAAuI,EAAAiQ,EAAS/L,eAAT,EAAAlE,EAAmBjJ,SAASrF,EAAM+F,SAC/E,CAACwY,EAAUxJ,IAGR0K,EAActe,EAAAA,QAAQ,IAC1Bsd,EAAeiB,KAAUC,GAAAA,EAAE5Z,MAAQiZ,GACnC,CAACP,EAAgBO,IAUbhB,EAAuB,CAAC4B,EAAuB/B,KACnD,GAAK3C,GAAkB7B,EAAUxiB,QAI7B,IACF,MAAMgpB,EAAapB,EAAeqB,UAAeH,GAAAA,EAAEvG,UAAYwG,GAE/D,IAAuB,IAAnBC,EACF,OAIQxG,EAAAxiB,QAAQkpB,YAAYF,GAC9Bd,EAAiBa,GAGjBppB,WAAW,KACC6iB,EAAAxiB,QAAQinB,OAAOD,GAAS,GAClCxE,EAAUxiB,QAAQknB,aACjB,WAEInX,GAET,GAoDF,OAAIoC,EAEAjV,EAAAiB,IAAC,OAAIqI,UAAU,gDACb9I,eAAC,MAAI,CAAA8I,UAAU,2FAKhBkhB,QAmBF,UAAQ,CAAAlhB,UAAU,yCACjB9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,8BAEb9I,SAAA,CAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAE1BxF,SAAAR,EAAAC,KAACgS,EAAA,CACC9Q,GAAG,mBACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,8EAEV9I,SAAA,CAAAR,EAAAiB,IAACyiB,EAAY,IAAE,oBAKnBzjB,KAAC,MAAI,CAAAqJ,UAAU,kCAGb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,iDAGZ9I,SAAA,CAAAgqB,EAASe,YAAcR,GACtB/qB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,OAEV9I,SAAA,CAAAR,EAAAiB,IAACmkB,GAAA,CACCC,QAAS0F,EACTzF,UAAW4B,EACX1B,cAAe,IAAM4B,GAAiB,MAEtCD,GACAlmB,EAAAA,IAAC,MAAI,CAAAqI,UAAU,6GACb9I,SAACS,EAAAA,IAAA,MAAA,CAAIqI,UAAU,wFAOvBtJ,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gBAEV9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,wCAEb9I,SAAA,GAAAS,IAAC,MAAI,CAAAqI,UAAU,uBACZ9I,SAAAgqB,EAAS5G,aAAe4G,EAAS5G,YAAYpc,OAAS,EACpDgjB,EAAS5G,YAAsBzY,IAAK0Y,IACnC,MAAMC,EAAgC,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA3X,KAC1E,OAAO4X,EACL9jB,EAAAiB,IAAC,OAAA,CAECqI,UAAU,uHAET9I,SAAAsjB,GAH0B,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA7R,KAK/D,OAINwY,EAAS9d,UACPzL,EAAAA,IAAC,QAAKqI,UAAU,uHACb9I,WAASkM,aAKjB7M,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAACgR,EAAA,CACC9Q,GAAI,SACJsiB,MAAO,CAAEM,IAAK,iBAAkBC,OAAQwG,EAASxY,KACjD1I,UAAU,2FACV,aAAW,WAEX9I,eAACof,EAAO,MAEV5f,EAAAiB,IAAC,SAAA,CACCqK,QA9JC+H,UACf,GAAC4Q,QAAQ,sBAET,UACI/C,EAAegD,YAAY/Q,GACjCzR,EAAS,0BACFmR,GAET,GAuJkBuB,SAAU8M,EAAeiC,UACzB7Z,UAAU,yFACV,aAAW,WAEX9I,eAACqf,EAAQ,YAMhB5e,EAAAA,IAAA,KAAA,CAAGqI,UAAU,wDACX9I,WAASqM,UAGZ5M,KAAC,MAAI,CAAAqJ,UAAU,gEACZ9I,SAAA,CAAAgqB,EAASlG,eACP,MAAI,CAAAhb,UAAU,0BACZ9I,SAAA,CAAAse,MAAMC,KAAK,CAAEvX,OAAQ,GAAK,CAAC+c,EAAGzb,IAC7B9I,EAAAiB,IAACujB,GAAA,CAEClb,UAAW,YAAWR,EAAI0hB,EAASlG,OAAU,kBAAoB,qCAD5Dxb,MAIT7I,KAAC,OAAK,CAAAqJ,UAAU,cAAe9I,SAAA,CAASgqB,EAAAlG,OAAO,aAGnDrkB,KAAC,MAAI,CAAAqJ,UAAU,0BACb9I,SAAA,CAAAR,EAAAiB,IAACwjB,GAAW,IACXxjB,EAAAA,IAAA,OAAA,CAAMT,SAAWwf,GAAAwK,EAASrB,kBAE7BlpB,KAAC,MAAI,CAAAqJ,UAAU,0BACb9I,SAAA,CAAAR,EAAAiB,IAACgrB,GAAO,WACP,OAAM,CAAAzrB,SAAA,CAAekqB,EAAAljB,OAAO,mBAMlCgjB,EAASpB,SACRppB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gBAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAAooB,GAAA,CAAW/f,UAAU,kBAAkB,cAE1CrI,IAAC,OAAIqI,UAAU,8EACb9I,eAAC8oB,GAAe,CAAA9oB,SAAAgqB,EAASpB,eAM9BoB,EAASjB,aACRvpB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gIAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAAuoB,GAAA,CAASlgB,UAAU,oBAAoB,iBAE1CrI,IAAC,OAAIqI,UAAU,8EACb9I,eAAC8oB,GAAe,CAAA9oB,SAAAgqB,EAASjB,wBAOjCtpB,KAAC,MAAI,CAAAqJ,UAAU,6BAGZ9I,SAAA,CAAAge,EAAahX,OAAS,GACrBxH,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,gBAEV9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,+EACZ9I,SAAA,GAACS,IAAA0jB,GAAA,CAAQrb,UAAU,qBAAqB,mBAEzC,MAAI,CAAAA,UAAU,uBACZ9I,SAAAge,EAAarT,IACZc,GAAAjM,EAAAiB,IAAC,MAAA,CAECqI,UAAU,oEACVpJ,MAAO,CACLK,gBAAiB,GAAG0L,EAAMlL,UAC1BA,MAAOkL,EAAMlL,OAGdP,SAAMyL,EAAAC,MAPFD,EAAM+F,WAerBhS,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAO,IACrBe,UAAU,WAEd9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,yCACb9I,SAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAM8f,GAAkBD,GACjC7hB,UAAU,+IAET9I,SAAA,CAAA2qB,EAAiBnrB,EAAAiB,IAAAirB,GAAA,CAAA,GAAiBlsB,EAAAiB,IAACwb,EAAc,IAAG,iBACtCiO,EAAeljB,OAAO,UAKxC2jB,GAAiBT,EAAeljB,OAAS,GACvCvG,EAAAA,IAAA,MAAA,CAAIqI,UAAU,4BACZ9I,SAAekqB,EAAAvf,IAAI,CAACub,EAAO5gB,IAC1B9F,EAAAC,KAAC,SAAA,CAECqL,QAAS,IAhUG,CAACob,IAC3BwE,EAAkBxE,EAAM1U,KACHiY,EAAAvD,EAAMrB,QAAS,IA8TP8G,CAAoBzF,GACnCpd,UAAW,+DACT2hB,IAAmBvE,EAAM1U,IACrB,4BACA,0GAEPxR,SAAA,CAAA,IACGsF,EAAQ,EAAE,IAAE4gB,EAAM7Z,QARf6Z,EAAM1U,QAelB0Y,EAAeljB,OAAS,GAAKkkB,EAC3BzrB,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,yEAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,kCACb9I,SAAA,CAAAS,EAAAA,IAAC,KAAG,CAAAqI,UAAU,+CACX9I,SAAAkrB,EAAY7e,UAEf5M,KAAC,MAAI,CAAAqJ,UAAU,oCACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,cACb9I,SAAA,GAACP,KAAA,IAAA,CAAEqJ,UAAU,2CAA2C9I,SAAA,CAAA,cAC1CkrB,EAAYrG,WAEzBqG,EAAYzL,kBACV,IAAA,CAAE3W,UAAU,2CAA2C9I,SAAA,CAAA,UAC9Cwf,GAAW0L,EAAYzL,iBAKpCpgB,GAAmBwrB,IAAmBK,EAAY1Z,KACjDhS,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KAAMqW,OAnTjC2J,GADuB5E,EAoT0BgF,GAnTzB1Z,UACNwV,EAAAd,EAAM+C,cAAgB,IAFlB,IAAC/C,GAqTLpd,UAAU,2FACVuD,MAAM,WAENrM,SAAAS,EAAAA,IAAC2e,EAAO,CAAAtW,UAAU,oBAOzB+hB,IAAmBK,EAAY1Z,KAC9B/Q,EAAAA,IAAA0O,EAAAA,SAAA,CACGnP,WAAYipB,aACXzpB,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,gCACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,0DAA0D9I,SAExE,aACAR,EAAAiB,IAAC,MAAA,CACCqI,UAAU,sFACV2T,wBAAyB,CACvBC,OAAQyM,GAAyB+B,EAAYjC,eAE/Cne,QAAUgI,IAER,MAAMQ,EAASR,EAAEQ,OACjB,GAAuB,WAAnBA,EAAO8V,SAAwB9V,EAAO+V,QAAmB,UAAG,CAC9D,MAAMC,EAAUI,SAASpW,EAAO+V,QAAmB,UAAG,IACjCI,EAAAyB,EAAYrG,QAASyE,EAC5C,QAKN7pB,EAAAA,KAAC,MAAI,CAAAqJ,UAAU,6EACb9I,SAAA,CAACS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,UAAU9I,SAA0B,+BAChDX,KACCoB,IAAC,IAAE,CAAAqI,UAAU,eAAe9I,SAA2B,qCAQhE6qB,IAAmBK,EAAY1Z,KAC7B/R,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,gCACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,0DAA0D9I,SAExE,gBACAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO2T,EACP1T,SAAU2T,EACVzT,YAAY,4DACZ6F,KAAM,EACNtQ,UAAU,oBAEZrJ,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAnWG+H,UACjB,GAACgY,GAAmBK,EAEpB,UACIb,EAAoB3G,YAAY,CACpC/Q,GAAIkY,EACJjL,KAAM,CACJmL,WAAYpY,EACZkS,QAASqG,EAAYrG,QACrBxY,MAAO6e,EAAY7e,MACnB4c,aAAclC,EACdjF,MAAOoJ,EAAYpJ,OAAS,KAGhCyE,EAAQ,QAAS,mBACjBuE,EAAkB,MAClB9D,EAAkB,UACXhU,GACPX,EAAM,QAAS,yBAEjB,GAgVkBuB,SAAUyW,EAAoB1H,UAC9B7Z,UAAU,+KAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IACPM,EAAoB1H,UAAY,UAAY,QAE/CnjB,EAAAC,KAAC,SAAA,CACCqL,QAjXK,KACvBggB,EAAkB,MAClB9D,EAAkB,KAgXApT,SAAUyW,EAAoB1H,UAC9B7Z,UAAU,+KAEV9I,SAAA,CAAAR,EAAAiB,IAAC2O,EAAQ,IAAE,iBAOO,IAA1B8a,EAAeljB,cAChB,MAAA,CAAI8B,UAAU,oDACb9I,SAAA,CAACS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,OAAO9I,SAAqB,0BACxCX,KACCoB,IAAC,IAAE,CAAAqI,UAAU,UAAU9I,SAA8B,sCAGvD,yBA5VP,MAAI,CAAA8I,UAAU,gDACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,cACb9I,SAAA,GAACS,IAAAgrB,GAAA,CAAO3iB,UAAU,wCACjBrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,SAAgB,qBACxER,EAAAiB,IAACgR,EAAA,CACC9Q,GAAG,mBACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,4DACX9I,SAAA,2DCpNL4rB,GAA0C,EAAGC,UAAS9W,eAAc+W,iBAAgBC,oBAClF,MAAA7hB,KAAEA,GAASC,IACXa,EAAcd,EAAKW,SAGnBmhB,EAAe5gB,GACnBJ,EACA6gB,EAAQG,aACRH,EAAQI,eACRJ,EAAQK,gBAIJC,EAAWN,EAAQO,YAAcP,EAAQQ,SAG7C,OAAA7sB,EAAAiB,IAACuI,GAAOC,IAAP,CAECiN,SAAUnB,EAEVuX,QAAM,EACNxjB,UAAU,sJAEV9I,SAAAR,EAAAC,KAACgS,EAAA,CACC9Q,GAAI,aAAakrB,EAAQra,MACzByR,MAAO,CAAEsJ,eAAgBlrB,OAAO8W,SAChCrP,UAAU,6BAEZ9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,6FACZ9I,SAAA,CAAA6rB,EAAQW,MACPhtB,EAAAiB,IAAC,MAAA,CACC2W,IAAKyU,EAAQW,MACbnV,IAAK,GAAGwU,EAAQxf,YAChBvD,UAAU,6BACV2L,QAAQ,OACRmD,SAAS,QACT3X,MAAM,MACNH,OAAO,QAGTN,EAAAiB,IAACkX,EAAQ,CAAA7O,UAAU,oDAEpB,MAAI,CAAAA,UAAU,yBACb9I,SAAAS,MAAC,QAAKqI,UAAW,8CAA8CgjB,EAAeD,EAAQY,UACnFzsB,WAAc6rB,EAAQY,iBAI7BhtB,KAAC,MAAI,CAAAqJ,UAAU,8BACb9I,SAAA,GAACS,IAAA,KAAA,CAAGqI,UAAU,4IACX9I,SAAkB+K,GAAAC,EAAa6gB,EAAQxf,MAAOwf,EAAQvf,QAASuf,EAAQtf,aAEzE9L,IAAA,IAAA,CAAEqI,UAAU,kEACV9I,SAAkB+K,GAAAC,EAAa6gB,EAAQ/f,YAAa+f,EAAQ9f,cAAe8f,EAAQ7f,mBAEtFvM,KAAC,MAAI,CAAAqJ,UAAU,4BACZ9I,SAAA,CAAAgsB,EAAaU,MAAM,EA1DL,GA0D0B/hB,IAAKgiB,GAC5CntB,EAAAiB,IAAC,OAAA,CAECqI,UAAU,gHAET9I,SAAA2sB,GAHIA,IAMRX,EAAahlB,OAlEC,GAmEZvH,EAAAA,KAAA,OAAA,CAAKqJ,UAAU,0GAA0G9I,SAAA,CAAA,KACrHgsB,EAAahlB,OApEL,EAoE+B,UAIhDxH,EAAAiB,IAAC,MAAA,CACCqI,UAAU,2EACVgC,QAAUgI,GAAMA,EAAE8Z,kBAEjB5sB,WAEIP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAA6rB,EAAQQ,UACP7sB,EAAAC,KAAC,IAAA,CACC2N,KAAMye,EAAQQ,SACd/Y,OAAO,SACPyU,IAAI,sBACJjf,UAAW,6GACY,cAAnB+iB,EAAQY,OACN,yDACA,4GAEN,aAAY,GAAGZ,EAAQxf,kBAEvBrM,SAAA,GAACS,IAAAosB,GAAA,CAAkBljB,KAAM,KAAM,YAIlCkiB,EAAQO,YACP5sB,EAAAC,KAAC,IAAA,CACC2N,KAAMye,EAAQO,WACd9Y,OAAO,SACPyU,IAAI,sBACJjf,UAAU,yOACV,aAAY,GAAG+iB,EAAQxf,qBAEvBrM,SAAA,GAACS,IAAAsO,EAAA,CAASpF,KAAM,KAAM,eAK1B,cAxFHkiB,EAAQra,qEC5Ba,aACxB,MAAAmB,GAAEA,GAAOgN,IACTze,EAAWC,IACXG,EAAWoM,KACXxD,KAAEA,GAASC,IACXa,EAAcd,EAAKW,UAGnB4J,QAAEA,QAASpC,EAAOya,iBAAAA,EAAA9O,aAAkBA,GAAiB+O,GAAiBpa,EAAI3H,IAGzEgiB,EAAeC,GAAoBhsB,WAAwB,OAC3DisB,EAAmBC,GAAwBlsB,WAAS,IACpDmsB,EAAoBC,GAAyBpsB,WAAS,GAa7D,GAAIwT,EAEA,OAAAjV,EAAAiB,IAAC,OAAIqI,UAAU,gDACb9I,eAAC,MAAI,CAAA8I,UAAU,2FAKjB,GAAAuJ,IAAUya,EACZ,aACG,MAAI,CAAAhkB,UAAU,gDACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,cACb9I,SAAA,CAAAS,EAAAA,IAAC,IAAE,CAAAqI,UAAU,gDAAiD9I,SAAAqS,GAAS,qBACvE7S,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAM5J,EAAS,YAAa,CAAE+hB,MAAO3hB,EAAS2hB,QACvDna,UAAU,0CACX9I,SAAA,mBAQH,MAKAstB,EAAmBC,GAChBA,EAAIzc,SAAS,uBAGhB0c,EAAsBD,cAC1B,IAAI1I,EAAU,GASP,OAPH0I,EAAIzc,SAAS,uBACLiJ,GAAA,OAAAA,EAAAwT,EAAIzU,MAAM,WAAW,SAArBiB,EAAAA,EAAyBjB,MAAM,KAAK,KAAM,GAC3CyU,EAAIzc,SAAS,wBACZsL,GAAA,OAAAA,EAAAmR,EAAIzU,MAAM,MAAM,SAAhBsD,EAAAA,EAAoBtD,MAAM,KAAK,KAAM,GACtCyU,EAAIzc,SAAS,eACZ+T,GAAA,OAAAiF,EAAAyD,EAAIzU,MAAM,aAAa,SAAvB,EAAAgR,EAA2BhR,MAAM,KAAK,KAAM,IAEjD+L,EAAU,iCAAiCA,sCAA8C,IAI5F4I,GAAgB,OAAA1T,EAAiB+S,EAAAY,aAAQ,EAAA3T,EAAAqE,OAAQ8H,IAAmBoH,EAAgBpH,MAAW,GAC/FyH,GAAe,OAAAvR,EAAiB0Q,EAAAY,aAAQ,EAAAtR,EAAAgC,OAAQ8H,GAAkBoH,EAAgBpH,MAAW,GAGjG,SAAAzmB,KAAC,UAAQ,CAAAqJ,UAAU,2DACjB9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yBAEb9I,SAAA,CAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,OAEV9I,SAAAR,EAAAC,KAACgS,EAAA,CACC9Q,GAAG,YACHsiB,MAAO3hB,EAAS2hB,MAChBna,UAAU,oGAEV9I,SAAA,CAAAR,EAAAiB,IAACyiB,EAAY,IAAE,kBAKnB1jB,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1BsD,UAAU,2DAEV9I,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,kCAEZ9I,SAAA,CAAA8sB,EAAiBN,aACf,MAAI,CAAA1jB,UAAU,WACb9I,SAAAR,EAAAiB,IAAC,MAAA,CACC2W,IAAK0V,EAAiBN,MACtBnV,IAAKyV,EAAiBzgB,MACtBvD,UAAU,kDACV2L,QAAQ,QACRmD,SAAS,QACT3X,MAAM,MACNH,OAAO,YAMbL,KAAC,MAAI,CAAAqJ,UAAU,SACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,wCAEZ9I,SAAA,CAAiB8sB,EAAA1J,aAAe0J,EAAiB1J,YAAYpc,OAAS,EACpE8lB,EAAiB1J,YAAsBzY,IAAK0Y,IAC3C,MAAMC,EAAgC,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA3X,KAC1E,OAAO4X,EACL9jB,EAAAiB,IAAC,OAAA,CAECqI,UAAU,uHAET9I,SAAAsjB,GAH0B,iBAAfD,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA7R,KAK/D,OAINsb,EAAiB5gB,UACfzL,EAAAA,IAAC,QAAKqI,UAAU,uHACb9I,WAAiBkM,WAIxBzL,EAAAA,IAAC,QAAKqI,UAAW,+CACa,cAA5BgkB,EAAiBL,OACb,oEAC4B,aAA5BK,EAAiBL,OACjB,wEACA,iEAEHzsB,SAA4B,gBAAXysB,OAAyB,KAAmC,aAA5BK,EAAiBL,OAAwB,MAAQ,WAGtGhsB,EAAAA,IAAA,KAAA,CAAGqI,UAAU,oEACX9I,WAAiBqM,QAEnB5L,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gEACV9I,WAAiB8L,cAInBghB,EAAiBd,aAAahlB,OAAS,GACrCvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,OACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,sFACZ9I,SAAA,CAAAR,EAAAiB,IAACiP,EAAO,IAAE,YAEZjP,EAAAA,IAAC,OAAIqI,UAAU,uBACZ9I,WAAiBgsB,aAAarhB,IAAI,CAACgiB,EAAMrnB,IACxC9F,EAAAiB,IAAC,OAAA,CAECqI,UAAU,yGAET9I,SAAA2sB,GAHIrnB,SAWd0Y,EAAahX,OAAS,GACpBvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,OACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,sFACZ9I,SAAA,CAAAR,EAAAiB,IAACiP,EAAO,IAAE,sBAEX,MAAI,CAAA5G,UAAU,uBACZ9I,SAAage,EAAArT,IAAKc,IAEjB,MAAM6T,EAAa7T,EAAMlL,MArKpC,CACLR,gBAJc,GADKwf,EAyK4C9T,EAAMlL,UAnKrEA,MAJgBgf,QAuK8D,EAzK5D,IAACA,EA4KD,OAAA/f,EAAAC,KAACgS,EAAA,CAEC9Q,GAAI,qBAAqB8K,EAAM+F,MAC/B1I,UAAU,iHACVuD,MAAO,GAAGZ,EAAMC,0BAChBhM,MAAO,IACF4f,EACH,kBAAmB7T,EAAMlL,OAAS,WAGpCP,SAAA,CAAAS,EAAAA,IAAC,OAAK,CAAAqI,UAAU,gBAAiB9I,SAAAyL,EAAMC,OACvClM,EAAAC,KAAC,OAAA,CACCqJ,UAAU,6BACVpJ,MAAO,CAAEa,MAAOkL,EAAMlL,OAAS,WAChCP,SAAA,CAAA,IACGyL,EAAM+W,UAAU,SAdf/W,EAAM+F,cAwBvB/R,KAAC,MAAI,CAAAqJ,UAAU,uBACZ9I,SAAA,CAAA8sB,EAAiBV,YAChB5sB,EAAAC,KAAC,IAAA,CACC2N,KAAM0f,EAAiBV,WACvB9Y,OAAO,SACPyU,IAAI,sBACJjf,UAAU,yJAEV9I,SAAA,CAAAR,EAAAiB,IAACsO,EAAS,IAAE,aAGf+d,EAAiBT,UAChB7sB,EAAAC,KAAC,IAAA,CACC2N,KAAM0f,EAAiBT,SACvB/Y,OAAO,SACPyU,IAAI,sBACJjf,UAAU,uHAEV9I,SAAA,CAAAR,EAAAiB,IAACosB,GAAkB,IAAE,6BAQjCptB,KAAC,MAAI,CAAAqJ,UAAU,wCAEZ9I,SAAA,CAAiB8sB,EAAAc,QAAUd,EAAiBc,OAAO5mB,OAAS,GAC1DxH,EAAAC,KAAA,MAAA,CAAIqJ,UAAU,oEACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,mFACZ9I,SAAA,CAAAR,EAAAiB,IAACkX,EAAQ,IAAE,eAEblX,EAAAA,IAAC,OAAIqI,UAAU,uDACZ9I,WAAiB4tB,OAAOjjB,IAAI,CAAC6hB,EAAOlnB,IACnC9F,EAAAiB,IAACuI,GAAOC,IAAP,CAECC,QAAS,CAAEC,QAAS,EAAGzB,MAAO,IAC9BxC,QAAS,CAAEiE,QAAS,EAAGzB,MAAO,GAC9B0B,WAAY,CAAErB,MAAe,GAARzC,GACrBwD,UAAU,uBACVgC,QAAS,IAAMmiB,EAAiBT,GAEhCxsB,WAAAS,IAAC,MAAI,CAAAqI,UAAU,4FACb9I,SAAAR,EAAAiB,IAAC,MAAA,CACC2W,IAAKoV,EACLnV,IAAK,GAAGyV,EAAiBzgB,SAAS/G,EAAQ,IAC1CwD,UAAU,qFACV2L,QAAQ,OACRmD,SAAS,QACT3X,MAAM,MACNH,OAAO,WAfNwF,SA0BdmoB,EAAczmB,OAAS,GACtBvH,EAAAA,KAAC,OAAIqJ,UAAU,oEAAoE,sBAAkB,EACnG9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,8EACZ9I,SAAA,CAAAR,EAAAiB,IAACotB,GAAO,IAAE,eAEXJ,EAAczmB,OAAS,GACrBvH,EAAAA,KAAA,OAAA,CAAKqJ,UAAU,2CACb9I,SAAA,CAAoBktB,EAAA,EAAE,MAAIO,EAAczmB,eAK/CvH,KAAC,MAAI,CAAAqJ,UAAU,WAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,iBACX9I,SAAA,CAAA,YACM,MAAAkmB,EAAQuH,EAAcP,GAC5B,OAAKhH,SAGF,MACE,CAAAlmB,SAAA,EAvPDutB,EAuPcrH,EAtP3BqH,EAAIzc,SAAS,gBAAkByc,EAAIzc,SAAS,YAuP5BrR,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,oFACb9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,eACb9I,SAAAR,EAAAiB,IAAC,SAAA,CACC2W,IAAKoW,EAAmBtH,GACxB7Z,MAAO,GAAGygB,EAAiBzgB,aAAa6gB,EAAoB,IAC5DpkB,UAAU,gBACVglB,iBAAe,EACfC,MAAM,iGAIVttB,IAAC,MAAI,CAAAqI,UAAU,sFACb9I,SAAAR,EAAAiB,IAAC,IAAA,CACC2M,KAAM8Y,EACN5S,OAAO,SACPyU,IAAI,sBACJjf,UAAU,iGACX9I,SAAA,sBAMLP,EAAAA,KAAC,MAAI,CAAAqJ,UAAU,oFACb9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,eACb9I,SAAAR,EAAAC,KAAC,QAAA,CACC2X,IAAK8O,EACLmC,UAAQ,EACRvf,UAAU,6BACVklB,QAAQ,WAERhuB,SAAA,CAAAS,EAAAA,IAAC,SAAO,CAAA2W,IAAK8O,EAAOniB,KAAK,cACxBtD,EAAAA,IAAA,SAAA,CAAO2W,IAAK8O,EAAOniB,KAAK,eACxBtD,EAAAA,IAAA,SAAA,CAAO2W,IAAK8O,EAAOniB,KAAK,cAAc,+BAK3CtD,IAAC,MAAI,CAAAqI,UAAU,sFACb9I,SAAAR,EAAAiB,IAAC,IAAA,CACC2M,KAAM8Y,EACN5S,OAAO,SACPyU,IAAI,sBACJjf,UAAU,mGACX9I,SAAA,iBAQN,OAAA+Z,EAAA+S,EAAiBmB,wBAAjB,EAAAlU,EAAqCmT,KACnC1tB,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,kDACb9I,SAAAR,EAAAiB,IAAC,MAAA,CACCqI,UAAU,uGACV2T,wBAAyB,CAAEC,OAAQoQ,EAAiBmB,kBAAkBf,WA7D7D,KAnPhB,IAACK,CAsTH,EArED,GAwEDE,EAAczmB,OAAS,GAEpBvH,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMqiB,EAAsBzO,GAAmB,IAATA,EAAa+O,EAAczmB,OAAS,EAAI0X,EAAO,GAC9F5V,UAAU,2JACV,aAAW,QAEX9I,SAAAS,EAAAA,IAACytB,GAAc,CAAAvkB,KAAM,OAEvBnK,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMqiB,EAAsBzO,GAAUA,IAAS+O,EAAczmB,OAAS,EAAI,EAAI0X,EAAO,GAC9F5V,UAAU,4JACV,aAAW,QAEX9I,SAAAS,EAAAA,IAACkkB,GAAe,CAAAhb,KAAM,aAO7B8jB,EAAczmB,OAAS,GACrBvG,EAAAA,IAAA,MAAA,CAAIqI,UAAU,iCACZ9I,SAAcytB,EAAA9iB,IAAI,CAACoZ,EAAWze,IAC7B9F,EAAAiB,IAAC,SAAA,CAECqK,QAAS,IAAMqiB,EAAqB7nB,GACpCwD,UAAW,oCACTxD,IAAU4nB,EACN,mCACA,6EAEN,aAAY,GAAG5nB,EAAQ,aAPlBA,YAiBlBqoB,EAAa3mB,OAAS,GACrBvH,EAAAA,KAAC,OAAIqJ,UAAU,0EAA0E,uBAAmB,EAE1G9I,SAAA,CAAAS,EAAAA,IAAC,MAAI,CAAAqI,UAAU,mCACb9I,WAAAP,KAAC,MAAI,CAAAqJ,UAAU,sBAAsBpJ,MAAO,CAAEqmB,SAAU,QAAS9lB,MAAO,QAEtED,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,8EACZ9I,SAAA,CAAAR,EAAAiB,IAACotB,GAAO,IAAE,aAEXF,EAAa3mB,OAAS,GACpBvH,EAAAA,KAAA,OAAA,CAAKqJ,UAAU,2CACb9I,SAAA,CAAqBotB,EAAA,EAAE,MAAIO,EAAa3mB,aAG/C,cAEQ,MAAAkf,EAAQyH,EAAaP,GAC3B,IAAKlH,EAAc,OAAA,KAEnB,MAAMiI,GAAkB,OAAApU,EAAA+S,EAAiBY,aAAjB3T,EAAAA,EAAyBqU,QAAQlI,MAAU,EAGjE,SAAAzmB,KAAC,MAAI,CAAAqJ,UAAU,SACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,gEAEb9I,SAAA,OAAC,OAAI8I,UAAU,uBAAuBpJ,MAAO,CAAE2uB,UAAW,SACxDruB,SAAAR,EAAAiB,IAAC,SAAA,CACC2W,IAAKoW,EAAmBtH,GACxB7Z,MAAO,GAAGygB,EAAiBzgB,gBAAgB+gB,EAAqB,IAChEtkB,UAAU,gBACVglB,iBAAe,EACfC,MAAM,iGAIVttB,IAAC,MAAI,CAAAqI,UAAU,sFACb9I,SAAAR,EAAAiB,IAAC,IAAA,CACC2M,KAAM8Y,EACN5S,OAAO,SACPyU,IAAI,sBACJjf,UAAU,mIACX9I,SAAA,iBAOJ,OAAAoc,EAAA0Q,EAAiBmB,wBAAjB,EAAA7R,EAAqC+R,WACnC,MAAI,CAAArlB,UAAU,kDAAkDpJ,MAAO,CAAEqmB,SAAU,QAASuI,OAAQ,eACnGtuB,SAAAR,EAAAiB,IAAC,MAAA,CACCqI,UAAU,uGACV2T,wBAAyB,CAAEC,OAAQoQ,EAAiBmB,kBAAkBE,UAM/E,EA5CH,GA+CCR,EAAa3mB,OAAS,GAEnBvH,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMuiB,EAAuB3O,GAAmB,IAATA,EAAaiP,EAAa3mB,OAAS,EAAI0X,EAAO,GAC9F5V,UAAU,2JACV,aAAW,QAEX9I,SAAAS,EAAAA,IAACytB,GAAc,CAAAvkB,KAAM,OAEvBnK,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMuiB,EAAuB3O,GAAUA,IAASiP,EAAa3mB,OAAS,EAAI,EAAI0X,EAAO,GAC9F5V,UAAU,4JACV,aAAW,QAEX9I,SAAAS,EAAAA,IAACkkB,GAAe,CAAAhb,KAAM,eAQ/BgkB,EAAa3mB,OAAS,GACpBvG,EAAAA,IAAA,MAAA,CAAIqI,UAAU,iCACZ9I,SAAa2tB,EAAAhjB,IAAI,CAACoZ,EAAWze,IAC5B9F,EAAAiB,IAAC,SAAA,CAECqK,QAAS,IAAMuiB,EAAsB/nB,GACrCwD,UAAW,oCACTxD,IAAU8nB,EACN,iCACA,6EAEN,aAAY,GAAG9nB,EAAQ,aAPlBA,SAgBhBwnB,EAAiByB,4BACf,MAAA,CAAIzlB,UAAU,oEACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,2DAA2D9I,SAEzE,UACAR,EAAAiB,IAAC,MAAA,CACCqI,UAAU,+EACV2T,wBAAyB,CAAEC,OAAQoQ,EAAiByB,0BAOzDzB,EAAiB0B,SAASxnB,OAAS,GACjCvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,oEACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,2DAA2D9I,SAEzE,YACCS,IAAA,KAAA,CAAGqI,UAAU,YACX9I,SAAiB8sB,EAAA0B,SAAS7jB,IAAI,CAAC8jB,EAASnpB,WACtC,KAAA,CAAewD,UAAU,yBACxB9I,SAAA,CAAAS,EAAAA,IAAC,OAAK,CAAAqI,UAAU,2KACb9I,SAAAsF,EAAQ,IAEV7E,EAAAA,IAAA,OAAA,CAAKqI,UAAU,mCAAoC9I,SAAQyuB,MAJrDnpB,SAYhBwnB,EAAiBxK,UAAUtb,OAAS,GAClCvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,oEACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,2DAA2D9I,SAEzE,WACCS,IAAA,KAAA,CAAGqI,UAAU,YACX9I,SAAiB8sB,EAAAxK,UAAU3X,IAAI,CAACuS,EAAU5X,WACxC,KAAA,CAAewD,UAAU,yBACxB9I,SAAA,GAACS,IAAA,OAAA,CAAKqI,UAAU,+EACfrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,mCAAoC9I,SAASkd,MAFtD5X,eAYpB0nB,GACCxtB,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,GACpBjE,QAAS,CAAEiE,QAAS,GACpBmG,KAAM,CAAEnG,QAAS,GACjBL,UAAU,sEACVgC,QAAS,IAAMmiB,EAAiB,MAEhCjtB,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMmiB,EAAiB,MAChCnkB,UAAU,iEACX9I,SAAA,MAGDR,EAAAiB,IAAC,MAAA,CACC2W,IAAK4V,EACL3V,IAAI,SACJvO,UAAU,uCACV2L,QAAQ,QACRmD,SAAS,wDC5iBf8W,GAAU,CACdlZ,WACAmZ,mBACAC,eACAxgB,cACAsB,SACAuG,QACA4Y,WACAC,SACAC,eACAzgB,gBAGI0gB,GAAgD,EAAGC,MAAK/Y,WAAUgZ,UAAS,MAC/E,MAAO5K,EAAY6K,GAAiBluB,YAAS,IACvCuf,gBAAEA,GAAoBC,MACtB7S,EAAEA,EAAA1D,KAAGA,GAASC,IACda,EAAcd,EAAKW,SAGnBjB,EAAgBqlB,EAAIG,SAAWV,GAAQO,EAAIG,SAC7CV,GAAQO,EAAIG,SACZhhB,EAGE4P,EAAepR,EAAAA,QAAQ,KACvB,IAACqiB,EAAIhR,WAAauC,EAAiB,MAAO,GAEvC,OADWA,EAAgByB,WAAeyG,EAAIxG,QAAU,IAC9C9D,OAAgB3S,IAC/B,MAAM0S,EAAU1S,EAAM+F,IACtB,OAAO2M,GAAY8Q,EAAIhR,SAAmBoR,KAAMC,IAChB,iBAAZA,EAAuBA,EAAmB,MAATA,OAAS,EAAAA,EAAA9d,OAC9C2M,MAGjB,CAAC8Q,EAAIhR,SAAUuC,IAGZ+O,EAAmBN,EAAInjB,YACzBmjB,EAAInjB,YAAYgN,MAAM,MAAMsF,UAA+B,KAAhBnE,EAAKpB,QAChD,GAGE2W,EAAYP,EAAI1uB,OAAS,UACzBkvB,EAAcR,EAAIS,SAAW,UAGjC,SAAAjwB,KAAC,MAAI,CAAAqJ,UAAU,kCAEZ9I,SAAA,EAACkvB,GACAzuB,EAAAA,IAAC,MAAI,CAAAqI,UAAU,uIAIjBrI,IAAC,MAAI,CAAAqI,UAAU,8BACb9I,SAAAR,EAAAiB,IAACuI,GAAOC,IAAP,CACCiN,WACApN,UAAU,yGACVpJ,MAAO,CACLK,gBAAiB0vB,GAEnB5b,WAAY,CAAEnM,MAAO,IAAKgd,OAAQ,GAClCtb,WAAY,CAAErF,KAAM,SAAUkiB,UAAW,KAEzCjmB,SAAAR,EAAAiB,IAACmJ,EAAA,CACCD,KAAM,GACNjK,MAAO,CAAEa,MAAOivB,SAMtBhwB,EAAAiB,IAACuI,GAAOC,IAAP,CACCiN,WACApN,UAAU,eAEV9I,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,uDAEb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMqkB,GAAe7K,GAC9Bxb,UAAU,mBAEV9I,eAAC,MAAI,CAAA8I,UAAU,wCACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,SAEb9I,SAAA,GAACS,IAAA,IAAA,CAAEqI,UAAU,oEACV9I,SAAkB+K,GAAAC,EAAaikB,EAAIU,QAASV,EAAIW,UAAWX,EAAIY,eAGlEpwB,KAAC,KAAG,CAAAqJ,UAAU,gFACX9I,SAAA,CAAA+K,GAAkBC,EAAaikB,EAAI5iB,MAAO4iB,EAAI3iB,QAAS2iB,EAAI1iB,SAE3D9L,EAAAA,IAAA,OAAA,CAAKqI,UAAU,UACb9I,WACES,EAAAA,IAAAwb,EAAA,CAAcnT,UAAU,2CAEzBrI,MAACkkB,GAAe,CAAA7b,UAAU,yBAKhCrJ,KAAC,OAAK,CAAAqJ,UAAU,gJAAgJ9I,SAAA,CAAA,MAC1JivB,EAAIa,iBAOfxL,GACC9kB,EAAAiB,IAACuI,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAGrJ,OAAQ,GAC/BoF,QAAS,CAAEiE,QAAS,EAAGrJ,OAAQ,QAC/BwP,KAAM,CAAEnG,QAAS,EAAGrJ,OAAQ,GAC5BsJ,WAAY,CAAEtB,SAAU,IACxBgB,UAAU,0DAGT9I,SAAIivB,EAAAc,SAAWd,EAAIc,QAAQ/oB,OAAS,IACnCvG,IAAC,MAAI,CAAAqI,UAAU,2CACZ9I,SAAIivB,EAAAc,QAAQplB,IAAI,CAACqlB,EAA0BC,IAC1CzwB,EAAAC,KAACuJ,GAAOC,IAAP,CAECC,QAAS,CAAEC,QAAS,EAAG3D,EAAG,IAC1BN,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,GAC1B4D,WAAY,CAAErB,MAAa,GAANkoB,GACrBnnB,UAAU,iOAGV9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,kFACb9I,SAAA,CAAAS,MAAC,OAAIqI,UAAU,uBAAuBpJ,MAAO,CAAEK,gBAAiByvB,OAC/D/uB,IAAA,KAAA,CAAGqI,UAAU,oDACX9I,SAAkB+K,GAAAC,EAAaglB,EAAO9jB,SAAU8jB,EAAOE,WAAYF,EAAOG,uBAK9E,KAAG,CAAArnB,UAAU,cACX9I,SAAAoL,GAAuBJ,EAAaglB,EAAOI,MAAOJ,EAAOK,QAASL,EAAOM,SAAS3lB,IAAI,CAAC8B,EAAc8jB,IACpG/wB,EAAAC,KAACuJ,GAAOwnB,GAAP,CAECtnB,QAAS,CAAEC,QAAS,EAAG1D,GAAO,IAC9BP,QAAS,CAAEiE,QAAS,EAAG1D,EAAG,GAC1B2D,WAAY,CAAErB,MAAc,GAANkoB,EAAwB,IAAVM,GACpCznB,UAAU,kEAEV9I,SAAA,CAAAS,MAACgwB,IAAc/wB,MAAO,CAAEa,MAAOivB,GAAa1mB,UAAU,iCACrDrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,yBAA0B9I,SAAKyM,MAP1C8jB,QAlBNN,MAkCXV,EAAiBvoB,OAAS,GAEtBvH,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,mFACZ9I,SAAA,CAAAS,MAACgwB,IAAc/wB,MAAO,CAAEa,MAAOivB,GAAa7lB,KAAM,KACjDiE,EAAE,6BAEJnN,IAAA,KAAA,CAAGqI,UAAU,mBACX9I,SAAiBuvB,EAAA5kB,IAAI,CAAC8B,EAAMnE,IAC3B7I,EAAAA,KAAC,KAAW,CAAAqJ,UAAU,0DACpB9I,SAAA,CAAAS,MAAC,QAAKqI,UAAU,8CAA8CpJ,MAAO,CAAEK,gBAAiByvB,KACvF/uB,EAAAA,IAAA,OAAA,CAAKqI,UAAU,SAAU9I,SAAKyM,MAFxBnE,WAatB0V,EAAahX,OAAS,GACpBvG,EAAAA,IAAA,MAAA,CAAIqI,UAAU,4BACZ9I,SAAAge,EAAarT,IAAKc,GACjBjM,EAAAiB,IAACgR,EAAA,CAEC9Q,GAAI,qBAAqB8K,EAAM+F,MAC/B1I,UAAU,mHACVpJ,MAAO,CACLK,gBAAiB,GAAG0L,EAAMlL,UAC1BA,MAAOkL,EAAMlL,MACb,kBAAmBkL,EAAMlL,OAAS,WAEpC8L,MAAO,GAAGZ,EAAMC,QAAQkC,EAAE,6BAEzB5N,SAAMyL,EAAAC,MAVFD,EAAM+F,SAiBjBwM,EAAahX,QAAUioB,EAAI/M,QAAU+M,EAAI/M,OAAOlb,OAAS,GACzDvG,EAAAA,IAAC,MAAI,CAAAqI,UAAU,4BACZ9I,SAAuBoL,GAAAJ,EAAaikB,EAAI/M,OAAQ+M,EAAIyB,SAAUzB,EAAI0B,UAAUhmB,IAAI,CAACc,EAAOwkB,IACvFzwB,EAAAiB,IAAC,OAAA,CAECqI,UAAU,0MAET9I,SAAAyL,GAHI,GAAGA,KAASwkB,iBCzN7BW,GAAgC,EACpChR,OACAiR,SACAC,WACApT,YAAW,EACXqT,sBAAsB,CAAC,MAAO,QAAS,OAAQ,MAAO,UAGtD,MAAO/lB,EAAagmB,GAAkB/vB,WAAwB,OAGxDuf,gBAAEA,EAAiB/L,QAASwc,GAAkBxQ,MAG5Cb,KAAMsR,EAAa,GAAI5xB,UAAW6xB,GAAsBC,KAG1DC,GAAkB,MAAAzR,OAAA,EAAAA,EAAMsE,YAAaoN,MAAM,IAAI1rB,KAAKga,EAAKsE,UAAUlB,WACrE,IAAIpd,KAAKga,EAAKsE,UAAUqN,cAAczY,MAAM,KAAK,IAAC,IAC9ClT,MAAO2rB,cAAczY,MAAM,KAAK,GAGlC0Y,GAAqB,MAAA5R,OAAA,EAAAA,EAAMwD,aAC5BxD,EAAKwD,YAAsBzY,IAAK0Y,GACT,iBAAfA,EAA0BA,EAAaA,EAAW7R,KACzD4M,OAAOwL,SACT,GAGE6H,GAAkB,MAAA7R,OAAA,EAAAA,EAAM3B,UACzB2B,EAAK3B,SAAmBtT,IAAKgf,GACJ,iBAAjBA,EAA4BA,EAAeA,EAAanY,KAC/D4M,OAAOwL,SACT,IAEG8H,EAAUC,GAAe1wB,EAAAA,SAC9B2e,EACI,CACEvT,MAAOuT,EAAKvT,MACZC,QAASsT,EAAKtT,SAAW,GACzBC,QAASqT,EAAKrT,SAAW,GACzBoX,OAAQ/D,EAAK+D,OACbC,SAAUhE,EAAKgE,UAAY,GAC3BC,SAAUjE,EAAKiE,UAAY,GAC3B3X,SAAU0T,EAAK1T,SACfkX,YAAaoO,EACbrO,WAAYvD,EAAKuD,YAAc,GAC/Be,SAAUmN,EACVvN,OAAQlE,EAAKkE,OACb7F,SAAUwT,GAEZ,CACEplB,MAAO,GACPC,QAAS,GACTC,QAAS,GACToX,OAAQ,GACRC,SAAU,GACVC,SAAU,GACV3X,SAAU6kB,EAAoB,IAAM,MACpC3N,YAAa,GACbD,WAAY,GACZe,SAAUmN,EACVvN,OAAQ,EACR7F,SAAU,KAMZ2T,EAAwBC,IACtB,MAAAC,EAAqBJ,EAAStO,aAAe,GAG7C2O,EAFaD,EAAmBhhB,SAAS+gB,GAG3CC,EAAmB1T,OAAQzL,GAAeA,IAAOkf,GACjD,IAAIC,EAAoBD,GAEhBF,EAAA,IACPD,EACHtO,YAAa2O,KAoBXC,EAA6B9lB,IAC3B,MAAA+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAIc,GAASA,EAAM+F,KAAM4M,OAAOwL,SAC3EsI,EAAkBR,EAASzT,UAAY,GAIzC,IAAAkU,EACJ,GAHoBF,EAAiBG,MAAOzf,GAAeuf,EAAgBphB,SAAS6B,IAIpEwf,EAAAD,EAAgB9T,OAAQzL,IAAgBsf,EAAiBnhB,SAAS6B,QAC3E,CACC,MAAA0f,MAAgBjQ,IAAI,IAAI8P,KAAoBD,IACpCE,EAAA7T,MAAMC,KAAK8T,EAC3B,CAEYV,EAAA,IACPD,EACHzT,SAAUkU,KAKRG,EAAwC,KAA1BZ,EAASrlB,MAAMwM,QACW,KAA3B6Y,EAAS/N,OAAO9K,QACa,KAA7B6Y,EAASxlB,SAAS2M,OAgDlCpZ,OAAAA,EAAAA,KAAA,OAAA,CAAKmT,SA9CkBE,IAGxB,GAFAA,EAAEC,kBAEGuf,EAEH,YADAtb,MAAM,mCAQF,MAAAiH,EAAWK,MAAMC,KAAK,IAAI6D,KAC7BsP,EAASzT,UAAY,IAAItT,IAAKgf,GACL,iBAAjBA,EAA4BA,EAA6B,MAAdA,OAAc,EAAAA,EAAAnY,KAChE4M,OAAOwL,WAGLxG,EAAc9E,MAAMC,KAAK,IAAI6D,KAChCsP,EAAStO,aAAe,IAAIzY,IAAK0Y,GACV,iBAAfA,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAA7R,KAC1D4M,OAAOwL,YAGLvd,MAAEA,EAAOC,QAAAA,EAAAC,QAASA,EAASoX,OAAAA,EAAAC,SAAQA,EAAUC,SAAAA,EAAA3X,SAAUA,EAAUiX,WAAAA,EAAAe,SAAYA,EAAUJ,OAAAA,GAAW4N,EAkBxGb,EAhBiB,CACfxkB,QACAC,UACAC,UACAoX,SACAC,WACAC,WACA3X,WACAiX,WAAYA,GAAc,GAC1Be,WACAJ,SACA7F,WACAmF,iBAQgCta,UAAU,YAC1C9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,uDACX9I,SAAA4f,EAAO,QAAU,UAInBnf,EAAAA,IAAAqc,GAAA,CAAaC,eAAgB/R,EAAaqI,SAAU2d,MAErDvxB,KAAC,MAAI,CAAAqJ,UAAU,4BAEb9I,SAAA,QAAC,MACC,CAAAA,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,MAC7D,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrlB,MAAOyG,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,UAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASplB,SAAW,GAC3B+G,SAAWP,GAAM6e,EAAY,IAAKD,EAAUplB,QAASwG,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,eAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASnlB,SAAW,GAC3B8G,SAAWP,GAAM6e,EAAY,IAAKD,EAAUnlB,QAASuG,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,qBAMjB,MACC,CAAAvT,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,MAC7D,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS/N,OAChBtQ,SAAWP,GAAM6e,EAAY,IAAKD,EAAU/N,OAAQ7Q,EAAEQ,OAAOF,QAC7DtK,UAAU,sKACVyK,YAAY,UAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS9N,UAAY,GAC5BvQ,SAAWP,GAAM6e,EAAY,IAAKD,EAAU9N,SAAU9Q,EAAEQ,OAAOF,QAC/DtK,UAAU,sKACVyK,YAAY,gBAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS7N,UAAY,GAC5BxQ,SAAWP,GAAM6e,EAAY,IAAKD,EAAU7N,SAAU/Q,EAAEQ,OAAOF,QAC/DtK,UAAU,sKACVyK,YAAY,aAIlB9T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,0BAGC0xB,EAAStO,aAAesO,EAAStO,YAAYpc,OAAS,SACpD,MAAI,CAAA8B,UAAU,0EACZ9I,SAAA0xB,EAAStO,YAAYzY,IAAK4nB,IACzB,MAAMrmB,EAAWglB,EAAW/F,KAAUqH,GAAAA,EAAEhhB,MAAQ+gB,GAChD,OAAOrmB,EACL1M,EAAAC,KAAC,OAAA,CAECqJ,UAAU,uFAET9I,SAAA,CAASkM,EAAAR,KACVlM,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM8mB,EAAqBW,GACpCzpB,UAAU,uCAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,gBAThBypB,GAYL,SAMTpB,EACE1wB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,0BACtDkxB,EAAWlqB,OAAS,QACrB,MAAI,CAAA8B,UAAU,wCACZ9I,SAAWkxB,EAAAvmB,IAAKuB,IACf,MAAMumB,GAAcf,EAAStO,aAAe,IAAItS,SAAS5E,EAASsF,KAEhE,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,kFACT2pB,EACI,0DACA,yFAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IAAMue,EAAqB1lB,EAASsF,KAC9C1I,UAAU,YAEXrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,oDACb9I,WAAS0L,SAdPQ,EAASsF,eAqBrB,IAAE,CAAA1I,UAAU,2CAA2C9I,SAExD,yDAGH,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,SACAP,KAAC,MAAI,CAAAqJ,UAAU,0BAEb9I,SAAA,GAAAS,IAAC,MAAI,CAAAqI,UAAU,aACZ9I,SAAA,CAAC,EAAG,EAAG,EAAG,EAAG,GAAG2K,IAAKgoB,GACpBnzB,EAAAiB,IAAC,SAAA,CAECsD,KAAK,SACL+G,QAAS,IAAM6mB,EAAY,IAAKD,EAAU5N,OAAQ6O,IAClD7pB,UAAW,+BACT6pB,GAAQjB,EAAS5N,OACb,wCACA,qCAGN9jB,eAACgkB,GAAO,KATH2O,MAcXnzB,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACL6uB,IAAI,IACJ5Z,IAAI,IACJ6Z,KAAK,MACLzf,MAAOse,EAAS5N,OAChBzQ,SAAWP,IACH,MAAAM,EAAQN,EAAEQ,OAAOF,MAEjB0f,EAAsB,KAAV1f,EAAe,EAAI2f,WAAW3f,GACpCue,EAAA,IACPD,EACH5N,OAAQwN,MAAMwB,GAAapB,EAAS5N,OAASpe,KAAKsT,IAAI,EAAGtT,KAAKktB,IAAI,EAAGE,OAGzEhqB,UAAU,wLAIf,MACC,CAAA9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,UACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASxN,SAChB7Q,SAAWP,GAAM6e,EAAY,IAAKD,EAAUxN,SAAUpR,EAAEQ,OAAOF,QAC/DtK,UAAU,kLAGb,MACC,CAAA9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,eACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASvO,WAChB9P,SAAWP,GAAM6e,EAAY,IAAKD,EAAUvO,WAAYrQ,EAAEQ,OAAOF,QACjEtK,UAAU,sKACVyK,YAAY,qBAKhB9T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,6DAA6D9I,SAE9E,wBACC0xB,EAASzT,UAAYyT,EAASzT,SAASjX,OAAS,GAC/CxH,EAAAC,KAAC,OAAK,CAAAqJ,UAAU,2GAA2G9I,SAAA,CAAA,KACtH0xB,EAASzT,SAASjX,OAAO,cAKjCiqB,QACE,MAAI,CAAAnoB,UAAU,gDAAgD9I,SAE/D,wBAC6B,IAA3BwgB,EAAgBxZ,SAClBvG,IAAC,OAAIqI,UAAU,mHAAmH9I,SAElI,iCAECR,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,uHACZ9I,SAAAwgB,EAAgB7V,IAAKuB,IACd,MAAA+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAIc,GAASA,EAAM+F,KAAM4M,OAAOwL,SAC3EsI,EAAkBR,EAASzT,UAAY,GAEvC+U,EAAgBf,EAAiB7T,OAAOzL,GAAMuf,EAAgBphB,SAAS6B,IAAK3L,OAC5EisB,EAAchB,EAAiBjrB,OAAS,GAAKgsB,IAAkBf,EAAiBjrB,OAChFksB,EAAeF,EAAgB,GAAKA,EAAgBf,EAAiBjrB,OAGzE,SAAAvH,KAAC,MAAuB,CAAAqJ,UAAU,iBAEhC9I,SAAA,CAAAR,EAAAC,KAAC,MAAA,CACCqJ,UAAU,sJACVgC,QAAS,IAAMknB,EAA0B9lB,GAEzClM,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASO,EACTlqB,IAAWoqB,IACLA,IACFA,EAAGC,cAAgBF,IAGvB7f,SAAU,IAAM2e,EAA0B9lB,GAC1CpD,UAAU,oEACVgC,QAAUgI,GAAMA,EAAE8Z,oBAEpBptB,EAAAC,KAAC,QAAA,CACCqJ,UAAU,oEACVpJ,MAAO,CAAEa,MAAO2L,EAAS3L,OAAS,WAEjCP,SAAA,CAASkM,EAAAG,MACT2mB,EAAgB,UACd,OAAA,CAAKlqB,UAAU,4DAA4D9I,SAAA,CAAA,IACxEgzB,EAAc,IAAEf,EAAiBjrB,OAAO,aAOlDvG,EAAAA,IAAC,MAAI,CAAAqI,UAAU,6CACX9I,UAAAkM,EAASgW,QAAU,IAAIvX,IAAKc,IACtBymB,MACAO,GADkBf,EAASzT,UAAY,IACVnN,SAASrF,EAAM+F,KAGhD,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,yEACT2pB,EACI,6EACA,sEAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IA3XZ,CAAC8K,IACnB,MAAA+T,EAAkBR,EAASzT,UAAY,GAGvCkU,EAFaD,EAAgBphB,SAASqN,GAGxC+T,EAAgB9T,OAAQzL,GAAeA,IAAOwL,GAC9C,IAAI+T,EAAiB/T,GAEbwT,EAAA,IACPD,EACHzT,SAAUkU,KAiX8BhT,CAAkB1T,EAAM+F,KACxC1I,UAAU,sEAEZrI,EAAAA,IAAC,QAAKqI,UAAW,YAAW2pB,EAAa,iDAAmD,oCACzFzyB,SAAAyL,EAAMC,SAdJD,EAAM+F,WAvCXtF,EAASsF,SAiE1B/Q,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,0EAGJP,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL6P,SAAU8J,IAAa4U,EACvBxpB,UAAW,+IACT4U,IAAa4U,EAAc,gCAAkC,IAG9DtyB,WAEGP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,iFAAqF,aAKpGrJ,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IAAE,WAIhBvqB,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,2JACX9I,SAAA,cChgBHqzB,GAA0C,EAC9ChR,UACAwO,SACAC,WACAwC,WAAW,MAEX,MAAOjnB,EAAOknB,GAAYtyB,WAAS,KAC5B6gB,EAAO0R,GAAYvyB,WAAS,IAC5Byc,EAAU+V,GAAexyB,YAAS,GAEzCG,EAAAA,UAAU,KACJihB,GACFkR,EAASlR,EAAQhW,OACjBmnB,EAASnR,EAAQP,SAEjByR,EAAS,IACTC,EAASF,KAEV,CAACjR,EAASiR,IAqBX,SAAA7zB,KAAC,MAAI,CAAAqJ,UAAU,uFACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,sDACX9I,SAAAqiB,EAAU,QAAU,UAEvB7iB,EAAAiB,IAAC,SAAA,CACCqK,QAASgmB,EACThoB,UAAU,4EAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,0CAItBrJ,EAAAA,KAAA,OAAA,CAAKmT,SAhCWC,MAAOC,IAGtB,GAFJA,EAAEC,iBAEG1G,EAAMwM,OAKP,IACF4a,GAAY,SACN5C,EAAO,CAAExkB,MAAOA,EAAMwM,OAAQiJ,gBAC7BzP,GACyB,CAChC,QACAohB,GAAY,EACd,MAXEzc,MAAM,mBA4BwBlO,UAAU,YACtC9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,QAAQrK,UAAU,kEAAkE9I,SAEnG,UACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACL4O,GAAG,QACHS,MAAO/G,EACPgH,SAAWP,GAAMygB,EAASzgB,EAAEQ,OAAOF,OACnCG,YAAY,eACZzK,UAAU,4LACV0K,UAAQ,cAIX,MACC,CAAAxT,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,QAAQrK,UAAU,kEAAkE9I,SAEnG,OACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACL4O,GAAG,QACHS,MAAO0O,EACPzO,SAAWP,GAAM0gB,EAAS9J,SAAS5W,EAAEQ,OAAOF,QAAU,GACtDwf,IAAI,IACJ9pB,UAAU,mMAIdrJ,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL6P,SAAU8J,IAAarR,EAAMwM,OAC7B/P,UAAU,iLAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IACPrM,EAAW,UAAa2E,EAAU,KAAO,QAE5C7iB,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,kFACX9I,SAAA,iBChFL0zB,GAA4C,EAChDxW,WACA2T,SACAC,eAEA,MAAOrS,EAAOkV,GAAY1yB,WAAS,KAC5B4d,EAAS+U,GAAc3yB,WAAS,KAChCyc,EAAU+V,GAAexyB,YAAS,GAwBzCG,EAAAA,UAAU,KACJ8b,GACFyW,EAASzW,EAASuB,OAClBmV,EAAW1W,EAAS2B,WAEpB8U,EAAS,IACTC,EAAW,MAEZ,CAAC1W,IAGE,MAAA2W,EAAaC,IACX,MAAAC,EAAM1M,SAASvd,cAAc,OAE5B,OADPiqB,EAAIC,UAAYF,EACTC,EAAIE,aAAeF,EAAIG,WAAa,IA6B3C,SAAAz0B,KAAC,MAAI,CAAAqJ,UAAU,uFACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,sDACX9I,SAAAkd,EAAW,WAAa,aAE3B1d,EAAAiB,IAAC,SAAA,CACCqK,QAASgmB,EACThoB,UAAU,4EAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,0CAItBrJ,EAAAA,KAAA,OAAA,CAAKmT,SAvCWC,MAAOC,IAGtB,GAFJA,EAAEC,kBAEG0L,EAAM5F,OAET,YADA7B,MAAM,kBAMR,GADyB6c,EAAUhV,GAAShG,OAMxC,IACF4a,GAAY,SACN5C,EAAO,CAAEpS,MAAOA,EAAM5F,OAAQgG,QAASA,EAAQhG,eAC9CxG,GAC4B,CACnC,QACAohB,GAAY,EACd,MAXEzc,MAAM,mBA4BwBlO,UAAU,YACtC9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAAAS,MAAC,QAAM,CAAA0S,QAAQ,QAAQrK,UAAU,kEAAkE9I,SAEnG,UACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACL4O,GAAG,QACHS,MAAOqL,EACPpL,SAAWP,GAAM6gB,EAAS7gB,EAAEQ,OAAOF,OACnCG,YAAY,eACZzK,UAAU,4LACV0K,UAAQ,cAIX,MACC,CAAAxT,SAAA,CAAAP,EAAAA,KAAC,QAAM,CAAA0T,QAAQ,UAAUrK,UAAU,kEAAkE9I,SAAA,CAAA,QAElGS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,6BAA6B9I,SAE7C,iDAEFS,IAAC,MAAI,CAAAqI,UAAU,6BACb9I,SAAAR,EAAAiB,IAAC0zB,GAAA,CACCC,MAAM,OACNhhB,MAAOyL,EACPxL,SAAWD,IAETwgB,EAAWxgB,IAEbG,YAAY,qCACZ8gB,QA7GS,CACnBC,QAAS,CACP,CAAC,CAAEC,OAAU,CAAC,EAAG,EAAG,GAAG,KACvB,CAAC,OAAQ,SAAU,YAAa,UAChC,CAAC,CAAEtJ,KAAQ,WAAY,CAAEA,KAAQ,WACjC,CAAC,CAAEzQ,OAAU,MAAO,CAAEA,OAAU,OAChC,CAAC,aAAc,cACf,CAAC,CAAEja,MAAS,IAAM,CAAE0C,WAAc,KAClC,CAAC,OAAQ,SACT,CAAC,WAqGOuxB,QAjGS,CACnB,SAAU,OAAQ,SAAU,YAAa,SACzC,OAAQ,SAAU,SAClB,aAAc,aACd,QAAS,aACT,OAAQ,SA6FE1rB,UAAU,4BAKhBrJ,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL6P,SAAU8J,IAAae,EAAM5F,SAAWgb,EAAUhV,GAAShG,OAC3D/P,UAAU,iLAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IACPrM,EAAW,UAAaR,EAAW,KAAO,QAE7C1d,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,kFACX9I,SAAA,iBCrJLy0B,GAA0D,EAC9DC,WACAC,eACAC,gBACAC,kBACAC,gBACAC,iBACAC,mBACA31B,mBAAkB,MAEZ,MAAC41B,EAAkBC,GAAuBj0B,EAAAA,SAC9C,IAAImhB,IAAIsS,EAAS/pB,IAAUwqB,GAAAA,EAAG3jB,OAwB9B,SAAA/R,KAAC,MAAI,CAAAqJ,UAAU,YAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,mIACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,0BACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,kDAAkD9I,SAEhE,iBACC00B,EAAS1tB,OAAS,GAChBvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,qBACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAnBI,KACIoqB,EAAA,IAAI9S,IAAIsS,EAAS/pB,OAAUwqB,EAAG3jB,QAmBtC1I,UAAU,uEACX9I,SAAA,WAGAS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,gBAAgB9I,SAAC,MACjCR,EAAAiB,IAAC,SAAA,CACCqK,QAtBM,KACEoqB,EAAA,IAAI9S,MAsBZtZ,UAAU,uEACX9I,SAAA,gBAMNX,GACCG,EAAAC,KAAC,SAAA,CACCqL,QAAS6pB,EACT7rB,UAAU,8HAEV9I,SAAA,CAAAR,EAAAiB,IAAC2jB,GAAO,IAAE,cAOfsQ,EAAS1tB,OAAS,QAChB,MAAI,CAAA8B,UAAU,YACZ9I,SACE00B,EAAA7R,KAAK,CAACC,EAAGC,IAAMD,EAAEhB,MAAQiB,EAAEjB,OAC3BnX,IAAK0X,UACJ,MAAMiC,EAAa2Q,EAAiB1S,IAAIF,EAAQ7Q,KAC1C4jB,GAAgB,OAAArb,EAAAsI,EAAQC,gBAAR,EAAAvI,EAAmB/S,SAAU,EAGjD,OAAAxH,EAAAC,KAAC,MAAA,CAECqJ,UAAU,8IAGV9I,SAAA,CAAAS,EAAAA,IAAC,OAAIqI,UAAU,iFACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,wCACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,KAAMyZ,OA3Ed1G,EA2E4BwE,EAAQ7Q,SA1EzD0jB,EAA4BxW,IACpB,MAAA2W,EAAS,IAAIjT,IAAI1D,GAMhB,OALH2W,EAAO9S,IAAI1E,GACbwX,EAAOC,OAAOzX,GAEdwX,EAAOjxB,IAAIyZ,GAENwX,IARW,IAACxX,GA4ED/U,UAAU,+EAEV9I,SAAA,CAAAS,EAAAA,IAAC,MAAI,CAAAqI,UAAU,gBACZ9I,SAAAskB,EACE7jB,EAAAA,IAAAwb,EAAA,CAAcnT,UAAU,6CAEzBrI,MAACkkB,GAAe,CAAA7b,UAAU,8BAG9BrJ,KAAC,MAAI,CAAAqJ,UAAU,iBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,+BACb9I,SAAA,GAACP,KAAA,OAAA,CAAKqJ,UAAU,yGAAyG9I,SAAA,CAAA,WAC9GqiB,EAAQP,MAAQ,KAE1BrhB,EAAAA,IAAA,KAAA,CAAGqI,UAAU,+DACX9I,WAAQqM,aAGb5M,KAAC,IAAE,CAAAqJ,UAAU,2CAA2C9I,SAAA,CAAA,MAClDo1B,EAAc,oBAKvB/1B,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,gCACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAUgI,IACRA,EAAE8Z,kBACFkI,EAAczS,EAAQ7Q,MAExB1I,UAAU,gGACVuD,MAAM,WAENrM,SAAAS,EAAAA,IAAC2jB,GAAO,CAAAtb,UAAU,cAEpBtJ,EAAAiB,IAAC,SAAA,CACCqK,QAAUgI,IACRA,EAAE8Z,kBACFgI,EAAcvS,IAEhBvZ,UAAU,6FACVuD,MAAM,QAENrM,SAAAS,EAAAA,IAAC2e,EAAO,CAAAtW,UAAU,cAEpBtJ,EAAAiB,IAAC,SAAA,CACCqK,QAAUgI,IACRA,EAAE8Z,kBACEnJ,QAAQ,IAAIpB,EAAQhW,kCAAkC+oB,kBACxDP,EAAgBxS,IAGpBvZ,UAAU,0FACVuD,MAAM,QAENrM,SAAAS,EAAAA,IAAC4e,EAAQ,CAAAvW,UAAU,sBAQ5Bwb,KACE7jB,IAAA,MAAA,CAAIqI,UAAU,mFACZ9I,WAAgB,IACfS,IAAC,MAAI,CAAAqI,UAAU,YACX9I,UAAQqiB,EAAAC,WAAa,IACpBO,KAAK,CAACC,EAAGC,IAAM,IAAInd,KAAKmd,EAAEtD,WAAWuD,UAAY,IAAIpd,KAAKkd,EAAErD,WAAWuD,WACvErY,IAAI,CAACuS,EAAU+S,IAChBzwB,EAAAC,KAAC,MAAA,CAECqJ,UAAU,mIAEV9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,wCACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,iCACb9I,SAAA,GAACP,KAAA,OAAA,CAAKqJ,UAAU,iGAAiG9I,SAAA,CAAA,IAC7GiwB,EAAM,KAETxvB,EAAAA,IAAA,KAAA,CAAGqI,UAAU,sDACX9I,WAASye,WAGbpf,GACCG,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,gCACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMiqB,EAAe7X,EAAUmF,EAAQ7Q,KAChD1I,UAAU,4FACVuD,MAAM,KAENrM,SAAAS,EAAAA,IAAC2e,EAAO,CAAAtW,UAAU,kBAEpBtJ,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACH2Y,QAAQ,IAAIvG,EAASuB,4BACNuW,EAAA9X,EAAUmF,EAAQ7Q,MAGvC1I,UAAU,yFACVuD,MAAM,KAENrM,SAAAS,EAAAA,IAAC4e,EAAQ,CAAAvW,UAAU,wBAO3BtJ,EAAAiB,IAAC,MAAA,CACCqI,UAAU,0nBAMV2T,wBAAyB,CAAEC,OAAQQ,EAAS2B,aAG9Cpf,KAAC,MAAI,CAAAqJ,UAAU,qIACb9I,SAAA,QAAC,OAAK,CAAAA,SAAA,CAAA,WAASwf,GAAWtC,EAASuC,cAClCvC,EAASqY,WAAarY,EAASqY,YAAcrY,EAASuC,kBACpD,OAAK,CAAAzf,SAAA,CAAA,WAASwf,GAAWtC,EAASqY,mBAlDlCrY,EAAS1L,QAyDnB/R,OAAA,MAAA,CAAIqJ,UAAU,mHACb9I,SAAA,GAACS,IAAA8N,EAAA,CAAOzF,UAAU,mDACjBrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,wCAAwC9I,SAErD,0BACCX,GACCG,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAMgqB,EAAczS,EAAQ7Q,KACrC1I,UAAU,iHAEV9I,SAAA,CAAAR,EAAAiB,IAAC2jB,GAAO,IAAE,4BAnJjB/B,EAAQ7Q,SAgKtB/R,OAAA,MAAA,CAAIqJ,UAAU,uHACb9I,SAAA,GAACS,IAAA8N,EAAA,CAAOzF,UAAU,wCACjBrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,4DAA4D9I,SAEzE,iBACCS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,qCACCX,GACCG,EAAAC,KAAC,SAAA,CACCqL,QAAS6pB,EACT7rB,UAAU,6HAEV9I,SAAA,CAAAR,EAAAiB,IAAC2jB,GAAO,IAAE,yBCrQlBoR,GAA8B,EAAGC,QAAOzjB,aAgC1CxS,EAAAC,KAACuJ,GAAOC,IAAP,CACCC,QAAS,CAAEC,QAAS,EAAG3D,GAAG,GAAKkC,MAAO,KACtCxC,QAAS,CAAEiE,QAAS,EAAG3D,EAAG,EAAGkC,MAAO,GACpC4H,KAAM,CAAEnG,QAAS,EAAG3D,GAAG,GAAKkC,MAAO,KACnC0B,WAAY,CAAEtB,SAAU,IACxBgB,UAAW,sFArBI,MACjB,OAAQ2sB,EAAM1xB,MACZ,IAAK,UACI,MAAA,0EACT,IAAK,QACI,MAAA,kEACT,IAAK,UACI,MAAA,8EACT,IAAK,OACI,MAAA,sEACT,QACS,MAAA,wEAYL2xB,sCAIJ11B,SAAA,CAAAS,EAAAA,IAAC,MAAI,CAAAqI,UAAU,uBACZ9I,SA3CS,MACd,OAAQy1B,EAAM1xB,MACZ,IAAK,UACI,SAAAtD,IAACk1B,GAAQ,CAAA7sB,UAAU,mBAC5B,IAAK,QACI,SAAArI,IAACm1B,GAAsB,CAAA9sB,UAAU,iBAC1C,IAAK,UACI,SAAArI,IAACm1B,GAAsB,CAAA9sB,UAAU,oBAG1C,QACS,SAAArI,IAACo1B,GAAO,CAAA/sB,UAAU,oBAgCxBgtB,OAGHr2B,KAAC,MAAI,CAAAqJ,UAAU,iBACb9I,SAAA,CAAAS,EAAAA,IAAC,KAAG,CAAAqI,UAAU,oDACX9I,SAAAy1B,EAAMppB,QAERopB,EAAMviB,SACLzS,EAAAA,IAAC,KAAEqI,UAAU,gDACV9I,WAAMkT,aAKb1T,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMkH,EAAQyjB,EAAM9iB,IAC7B7J,UAAU,4FAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,+BAWrBitB,GAAgD,EAAGC,SAAQhkB,eAE7DvR,IAAC,OAAIqI,UAAU,qCACb9I,eAAC0S,GACE,CAAA1S,SAAAg2B,EAAOrrB,IAAK8qB,GACXj2B,EAAAiB,IAAC+0B,GAAA,CAECC,QACAzjB,WAFKyjB,EAAM9iB,SC1EjBsjB,GAAyC,EAC7CrW,OACAiR,SACAC,WACApT,YAAW,EACXqT,sBAAsB,CAAC,MAAO,QAAS,OAAQ,MAAO,UAGtD,MAAMvQ,gBAAEA,EAAiB/L,QAASwc,GAAkBxQ,MAG5Cb,KAAMsR,EAAa,GAAI5xB,UAAW6xB,GAAsBC,KAG1D8E,GAAmB,MAAAtW,OAAA,EAAAA,EAAM+I,aAAc2I,MAAM,IAAI1rB,KAAKga,EAAK+I,WAAW3F,WACxE,IAAIpd,KAAKga,EAAK+I,WAAW4I,cAAczY,MAAM,KAAK,IAAC,IAC/ClT,MAAO2rB,cAAczY,MAAM,KAAK,IAGjCqd,EAAeC,GAAoBn1B,WAAiB,KAE/C,MAAN2e,OAAM,EAAAA,EAAAiF,SAAgB,mCAAmCjF,EAAKiF,WAC/C,MAAdjF,OAAc,EAAAA,EAAAqH,UAAkBrH,EAAaqH,SAC3C,IAIHwK,GAAkB,MAAA7R,OAAA,EAAAA,EAAM3B,UACzB2B,EAAK3B,SAAmBtT,IAAKgf,GACJ,iBAAjBA,EAA4BA,EAAeA,EAAanY,KAC/D4M,OAAOwL,SACT,GAGE4H,GAAqB,MAAA5R,OAAA,EAAAA,EAAMwD,aAC5BxD,EAAKwD,YAAsBzY,IAAK0Y,GACT,iBAAfA,EAA0BA,EAAaA,EAAW7R,KACzD4M,OAAOwL,SACT,IAUG8H,EAAUC,GAAe1wB,EAAAA,SAC9B2e,EACI,CACEvT,MAAOuT,EAAKvT,MACZH,SAAU0T,EAAK1T,SACfkX,YAAaoO,EACb7I,UAAWuN,EACXpS,OAAQlE,EAAKkE,QAAU,EACvB8E,QAAShJ,EAAKgJ,SAAW,GACzBK,aAAcrJ,EAAKqJ,cAAgB,GACnCF,YAAanJ,EAAKmJ,aAAe,GACjC9K,SAAUwT,EACV3P,MAAOlC,EAAKkC,OAAS,GAEvB,CACEzV,MAAO,GACPH,SAAU6kB,EAAoB,IAAM,MACpC3N,YAAa,GACbuF,UAAWuN,EACXpS,OAAQ,EACR8E,QAAS,GACTK,aAAc,GACdF,YAAa,GACb9K,SAAU,GACV6D,MAAO,IAKT+C,EAAUjY,EAAAA,QAAQ,IACXsa,GAAiBiP,GAG3B,CAACA,IAEEE,EAAezpB,UAAQ,IAAMiY,EAAUyR,GAAoBzR,GAAW,KAAM,CAACA,IAC7E0R,EAAa3pB,EAAAA,QAAQ,IAAkB,OAAZiY,EAAkB,CAACA,IAI9C+M,EAAwBC,IACtB,MAAAC,EAAqBJ,EAAStO,aAAe,GAG7C2O,EAFaD,EAAmBhhB,SAAS+gB,GAG3CC,EAAmB1T,OAAQzL,GAAeA,IAAOkf,GACjD,IAAIC,EAAoBD,GAEhBF,EAAA,IACPD,EACHtO,YAAa2O,KA8EXO,EAAcZ,EAASrlB,MAAMwM,QAAUsd,EAActd,QAAU0d,EAwBlE92B,OAAAA,EAAAA,KAAA,OAAA,CAAKmT,SA3DkBE,IAGpB,GAFJA,EAAEC,kBAEG2e,EAASrlB,MAAMwM,SAAWsd,EAActd,OAE3C,YADA7B,MAAM,iCAIJ,IAACuf,IAAe1R,EAElB,YADA7N,MAAM,0BAQF,MAAA3K,MAAEA,EAAOH,SAAAA,EAAAyc,UAAUA,EAAW7E,OAAAA,EAAA8E,QAAQA,eAASK,EAAcF,YAAAA,EAAA9K,SAAaA,EAAU6D,MAAAA,GAAU4P,EAG7Fb,EAAA,CACLxkB,QACAwY,UACA3Y,WACAyc,oBACe,IAAX7E,GAAwB,CAAEA,aAC1B8E,GAAW,CAAEA,cACbK,GAAgB,CAAEA,mBAClBF,GAAe,CAAEA,eACrB9K,SAAUA,GAAY,GACtB6D,MAAOA,GAAS,KA6BgBhZ,UAAU,YAE1C9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,4BACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,MAC7ES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAErCR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrlB,MAAOyG,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,eACZC,UAAQ,SAIZ/T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,UACzES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAEzCR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAO+iB,EACP9iB,SAAWP,GAAMsjB,EAAiBtjB,EAAEQ,OAAOF,OAC3CtK,UAAW,mIACTqtB,IAAkBI,EACd,iBACA,wCAENhjB,YAAY,sCACZC,UAAQ,IAET2iB,IAAkBI,SAChB,IAAE,CAAAztB,UAAU,4BAA4B9I,SAAmB,wBAE7D6kB,GACCrlB,EAAAC,KAAC,IAAE,CAAAqJ,UAAU,8BAA8B9I,SAAA,CAAA,YAAUS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,iDAAkD9I,SAAQ6kB,OAG/HwR,GAAgBE,UACd,MAAA,CAAIztB,UAAU,OACb9I,SAAA,CAAAR,EAAAiB,IAAC,MAAA,CACC2W,IAAKif,EACLhf,IAAI,SACJvO,UAAU,uCACVgP,QAAUhF,IAER,MAAMQ,EAASR,EAAEQ,OACbA,EAAO8D,IAAItG,SAAS,mBACfwC,EAAA8D,IAAMkf,GAAoBzR,EAAU,iBAIhDpkB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,kDAAkD9I,SAAa,0BAKlFP,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,0BAGC0xB,EAAStO,aAAesO,EAAStO,YAAYpc,OAAS,SACpD,MAAI,CAAA8B,UAAU,0EACZ9I,SAAA0xB,EAAStO,YAAYzY,IAAK4nB,IACzB,MAAMrmB,EAAWglB,EAAW/F,KAAUqH,GAAAA,EAAEhhB,MAAQ+gB,GAChD,OAAOrmB,EACL1M,EAAAC,KAAC,OAAA,CAECqJ,UAAU,uFAET9I,SAAA,CAASkM,EAAAR,KACVlM,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM8mB,EAAqBW,GACpCzpB,UAAU,uCAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,gBAThBypB,GAYL,SAMTpB,EACE1wB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,0BACtDkxB,EAAWlqB,OAAS,QACrB,MAAI,CAAA8B,UAAU,wCACZ9I,SAAWkxB,EAAAvmB,IAAKuB,IACf,MAAMumB,GAAcf,EAAStO,aAAe,IAAItS,SAAS5E,EAASsF,KAEhE,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,kFACT2pB,EACI,0DACA,yFAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IAAMue,EAAqB1lB,EAASsF,KAC9C1I,UAAU,YAEXrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,oDACb9I,WAAS0L,SAdPQ,EAASsF,eAqBrB,IAAE,CAAA1I,UAAU,2CAA2C9I,SAExD,yDAIH,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,UACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS/I,UAChBtV,SAAWP,GAAM6e,EAAY,IAAKD,EAAU/I,UAAW7V,EAAEQ,OAAOF,QAChEtK,UAAU,6KAIdrJ,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,aACAP,KAAC,MAAI,CAAAqJ,UAAU,0BACZ9I,SAAA,CAjKFse,MAAMC,KAAK,CAAEvX,OAAQ,GAAK,CAAC+c,EAAGzb,KACnC,MAAMkuB,EAAYluB,EAAI,EAEpB,OAAA9I,EAAAiB,IAAC,SAAA,CAECsD,KAAK,SACL+G,QAAS,IAAM6mB,EAAY,IAAKD,EAAU5N,OAAQ0S,IAClD1tB,UAAW,+BACT0tB,IAAc9E,EAAS5N,QAAU,GAC7B,wCACA,wDAGN9jB,eAACgkB,GAAO,KATH1b,OA8JH7I,KAAC,OAAK,CAAAqJ,UAAU,wCAAyC9I,SAAA,CAAS0xB,EAAA5N,OAAO,mBAM/ErkB,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,UACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS9I,QAChBvV,SAAWP,GAAM6e,EAAY,IAAKD,EAAU9I,QAAS9V,EAAEQ,OAAOF,QAC9DtK,UAAU,sLACVsQ,KAAM,EACN7F,YAAY,8CAEb9S,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAAQ,uBAGtE,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,oBACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAASzI,aAChB5V,SAAWP,GAAM6e,EAAY,IAAKD,EAAUzI,aAAcnW,EAAEQ,OAAOF,QACnEtK,UAAU,wMACVsQ,KAAM,EACN7F,YAAY,2JAEb9S,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,wDAGD,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,oBACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS3I,YAChB1V,SAAWP,GAAM6e,EAAY,IAAKD,EAAU3I,YAAajW,EAAEQ,OAAOF,QAClEtK,UAAU,wMACVsQ,KAAM,EACN7F,YAAY,+CAEb9S,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAAQ,qBAKzEP,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,gBACCixB,EACEzxB,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,gDAAgD9I,SAAA,wBAM3DP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,EAAA0xB,EAASzT,UAAY,IAAIjX,OAAS,KAClCvG,IAAC,MAAI,CAAAqI,UAAU,2DACb9I,gBAAC,OAAK,CAAA8I,UAAU,uDAAuD9I,SAAA,CAAA,MACjE0xB,EAASzT,UAAY,IAAIjX,OAAO,mBAMzC,MAAI,CAAA8B,UAAU,0HACZ9I,SAAgBwgB,EAAA7V,IAAKuB,IACd,MAAAuqB,EAAiBvqB,EAASgW,QAAU,GACpC+P,EAAmBwE,EAAe9rB,IAAK+rB,GAAaA,EAAEllB,KAAM4M,OAAOwL,SACnE+M,EAAqB1E,EAAiB7T,OAAQzL,IACjD+e,EAASzT,UAAY,IAAInN,SAAS6B,IAE/BsgB,EAAchB,EAAiBjrB,OAAS,GAAK2vB,EAAmB3vB,SAAWirB,EAAiBjrB,OAC5FksB,EAAeyD,EAAmB3vB,OAAS,IAAMisB,EAGrD,SAAAxzB,KAAC,MAAuB,CAAAqJ,UAAU,iBAEhC9I,SAAA,CAAAR,EAAAC,KAAC,MAAA,CACCqL,QAAS,IAvTK,CAACoB,IACjC,MAAM+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAKc,GAAiBA,EAAM+F,KAAM4M,OAAOwL,SACpFsI,EAAkBR,EAASzT,UAAY,GAKzC,IAAAkU,EACJ,GAHoBF,EAAiBG,MAAOzf,GAAeuf,EAAgBphB,SAAS6B,IAKpEwf,EAAAD,EAAgB9T,OAAQzL,IAAgBsf,EAAiBnhB,SAAS6B,QAC3E,CAEC,MAAA0f,MAAgBjQ,IAAI,IAAI8P,KAAoBD,IACpCE,EAAA7T,MAAMC,KAAK8T,EAC3B,CAEYV,EAAA,IACPD,EACHzT,SAAUkU,KAoSqBH,CAA0B9lB,GACzCpD,UAAU,kJAEV9I,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASO,EACTlqB,IAAM6tB,IACAA,IAAOA,EAAMxD,cAAgBF,IAEnC7f,SAAU,OACVvK,UAAU,yEAEZtJ,EAAAC,KAAC,QAAA,CACCqJ,UAAU,4CACVpJ,MAAO,CAAEa,MAAO2L,EAAS3L,OAAS,WAEjCP,SAAA,CAASkM,EAAAG,MAAM,KAAGsqB,EAAmB3vB,OAAO,IAAEyvB,EAAezvB,OAAO,gBAKxE,MAAI,CAAA8B,UAAU,iBACZ9I,SAAey2B,EAAA9rB,IAAKc,IACnB,MAAMgnB,GAAcf,EAASzT,UAAY,IAAInN,SAASrF,EAAM+F,KAE1D,OAAAhS,EAAAC,KAAC,MAAA,CAECqL,QAAS,IAjWT,CAACqT,IACnB,MAAA+T,EAAkBR,EAASzT,UAAY,GAGvCkU,EAFaD,EAAgBphB,SAASqN,GAGxC+T,EAAgB9T,OAAQzL,GAAeA,IAAOwL,GAC9C,IAAI+T,EAAiB/T,GAEbwT,EAAA,IACPD,EACHzT,SAAUkU,KAuV2BhT,CAAkB1T,EAAM+F,KACvC1I,UAAW,yEACT2pB,EACI,8CACA,4CAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,OACVvK,UAAU,yEAEZtJ,EAAAiB,IAAC,QAAA,CACCqI,UAAU,gCACVpJ,MAAO,CAAEa,MAAOkyB,EAAahnB,EAAMlL,WAAQ,GAE1CP,SAAMyL,EAAAC,SAlBJD,EAAM+F,WA7BXtF,EAASsF,sBA8D9B,MACC,CAAAxR,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,oBACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACLqP,MAAOse,EAAS5P,MAChBzO,SAAWP,GAAM6e,EAAY,IAAKD,EAAU5P,MAAO4H,SAAS5W,EAAEQ,OAAOF,QAAU,IAC/EtK,UAAU,oKACV8pB,IAAI,WAKRnzB,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL6P,SAAU8J,IAAa4U,IAAgBiE,EACvCztB,UAAU,uKAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IAAE,IAAErM,EAAW,UAAY,QAErCle,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,8FACX9I,SAAA,cCjgBH62B,GAAyC,EAC7CjX,OACAiR,SACAC,WACApT,YAAW,EACXqT,sBAAsB,CAAC,MAAO,QAAS,OAAQ,MAAO,UAEtD,MAAMvQ,gBAAEA,EAAiB/L,QAASwc,GAAkBxQ,MAG5Cb,KAAMsR,EAAa,GAAI5xB,UAAW6xB,GAAsBC,KAE1D8E,GAAmB,MAAAtW,OAAA,EAAAA,EAAM+I,aAAc2I,MAAM,IAAI1rB,KAAKga,EAAK+I,WAAW3F,WACxE,IAAIpd,KAAKga,EAAK+I,WAAW4I,cAAczY,MAAM,KAAK,IAAC,IAC/ClT,MAAO2rB,cAAczY,MAAM,KAAK,IAEjCge,EAAkBC,GAAuB91B,WAAiB,KACrD,MAAN2e,OAAM,EAAAA,EAAAmL,YAAmB,yCAAyCnL,EAAKmL,aACpE,IAIHyG,GAAqB,MAAA5R,OAAA,EAAAA,EAAMwD,aAC5BxD,EAAKwD,YAAsBzY,IAAK0Y,GACT,iBAAfA,EAA0BA,EAAaA,EAAW7R,KACzD4M,OAAOwL,SACT,IAEG8H,EAAUC,GAAe1wB,EAAAA,SAC9B2e,EACI,CACEvT,MAAOuT,EAAKvT,MACZH,SAAU0T,EAAK1T,SACfkX,YAAaoO,EACb7I,UAAWuN,EACXpS,OAAQlE,EAAKkE,QAAU,EACvB8E,QAAShJ,EAAKgJ,SAAW,GACzBG,YAAanJ,EAAKmJ,aAAe,GACjC9K,UAAW2B,EAAK3B,UAAY,IAAItT,IAAKgf,GACX,iBAAjBA,EAA4BA,EAAeA,EAAanY,KAC/D4M,OAAOwL,SACT9H,MAAOlC,EAAKkC,OAAS,GAEvB,CACEzV,MAAO,GACPH,SAAU6kB,EAAoB,IAAM,MACpC3N,YAAa,GACbuF,UAAWuN,EACXpS,OAAQ,EACR8E,QAAS,GACTG,YAAa,GACb9K,SAAU,GACV6D,MAAO,IAITiJ,EAAane,EAAAA,QAAQ,IACdoqB,GAAyBF,GAGnC,CAACA,IAEyBG,EAAArqB,QAAA,IAAMme,EAAamM,KAA0C,KAAM,CAACnM,IAC3F,MAAAwL,EAAa3pB,EAAAA,QAAQ,IAAqB,OAAfme,EAAqB,CAACA,IAGjD6G,EAAwBC,IACtB,MAAAC,EAAqBJ,EAAStO,aAAe,GAG7C2O,EAFaD,EAAmBhhB,SAAS+gB,GAG3CC,EAAmB1T,OAAQzL,GAAeA,IAAOkf,GACjD,IAAIC,EAAoBD,GAEhBF,EAAA,IACPD,EACHtO,YAAa2O,KAkDXO,EAAcZ,EAASrlB,MAAMwM,QAAUie,EAAiBje,QAAU0d,EAuBrE92B,OAAAA,EAAAA,KAAA,OAAA,CAAKmT,SAvDkBE,IAGpB,GAFJA,EAAEC,kBAEG2e,EAASrlB,MAAMwM,SAAWie,EAAiBje,OAE9C,YADA7B,MAAM,oCAIJ,IAACuf,IAAexL,EAElB,YADA/T,MAAM,gCAIF,MAAA3K,MAAEA,EAAOH,SAAAA,EAAAkX,YAAUA,EAAauF,UAAAA,EAAA7E,OAAWA,UAAQ8E,EAASG,YAAAA,EAAA9K,SAAaA,EAAU6D,MAAAA,GAAU4P,EAE7FyF,EAAW,CACf9qB,QACA0e,aACA7e,WACAkX,YAAaA,GAAe,GAC5BuF,oBACe,IAAX7E,GAAwB,CAAEA,aAC1B8E,GAAW,CAAEA,cACbG,GAAe,CAAEA,eACrB9K,SAAUA,GAAY,GACtB6D,MAAOA,GAAS,GAIlB+O,EAAOsG,IA0B2BruB,UAAU,YAC1C9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,4BACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,MAC7ES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAErCR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrlB,MAAOyG,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,kBACZC,UAAQ,SAIZ/T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,aACtES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAE5CR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAO0jB,EACPzjB,SAAWP,GAAMikB,EAAoBjkB,EAAEQ,OAAOF,OAC9CtK,UAAW,mIACTguB,IAAqBP,EACjB,iBACA,wCAENhjB,YAAY,4CACZC,UAAQ,IAETsjB,IAAqBP,SACnB,IAAE,CAAAztB,UAAU,4BAA4B9I,SAAyB,8BAEnE+qB,GACCvrB,EAAAC,KAAC,IAAE,CAAAqJ,UAAU,8BAA8B9I,SAAA,CAAA,eAAaS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,iDAAkD9I,SAAW+qB,YAIxItrB,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,0BAGC0xB,EAAStO,aAAesO,EAAStO,YAAYpc,OAAS,SACpD,MAAI,CAAA8B,UAAU,0EACZ9I,SAAA0xB,EAAStO,YAAYzY,IAAK4nB,IACzB,MAAMrmB,EAAWglB,EAAW/F,KAAUqH,GAAAA,EAAEhhB,MAAQ+gB,GAChD,OAAOrmB,EACL1M,EAAAC,KAAC,OAAA,CAECqJ,UAAU,uFAET9I,SAAA,CAASkM,EAAAR,KACVlM,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM8mB,EAAqBW,GACpCzpB,UAAU,uCAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,gBAThBypB,GAYL,SAMTpB,EACE1wB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,0BACtDkxB,EAAWlqB,OAAS,QACrB,MAAI,CAAA8B,UAAU,wCACZ9I,SAAWkxB,EAAAvmB,IAAKuB,IACf,MAAMumB,GAAcf,EAAStO,aAAe,IAAItS,SAAS5E,EAASsF,KAEhE,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,kFACT2pB,EACI,0DACA,yFAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IAAMue,EAAqB1lB,EAASsF,KAC9C1I,UAAU,YAEXrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,oDACb9I,WAAS0L,SAdPQ,EAASsF,eAqBrB,IAAE,CAAA1I,UAAU,2CAA2C9I,SAExD,yDAIH,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,UACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS/I,UAChBtV,SAAWP,GAAM6e,EAAY,IAAKD,EAAU/I,UAAW7V,EAAEQ,OAAOF,QAChEtK,UAAU,6KAIdrJ,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,SACAP,KAAC,MAAI,CAAAqJ,UAAU,0BACZ9I,SAAA,CA9IFse,MAAMC,KAAK,CAAEvX,OAAQ,GAAK,CAAC+c,EAAGzb,KACnC,MAAMkuB,EAAYluB,EAAI,EAEpB,OAAA9I,EAAAiB,IAAC,SAAA,CAECsD,KAAK,SACL+G,QAAS,IAAM6mB,EAAY,IAAKD,EAAU5N,OAAQ0S,IAClD1tB,UAAW,+BACT0tB,IAAc9E,EAAS5N,QAAU,GAC7B,wCACA,wDAGN9jB,eAACgkB,GAAO,KATH1b,OA2IH7I,KAAC,OAAK,CAAAqJ,UAAU,wCAAyC9I,SAAA,CAAS0xB,EAAA5N,OAAO,mBAK/ErkB,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,UACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS9I,QAChBvV,SAAWP,GAAM6e,EAAY,IAAKD,EAAU9I,QAAS9V,EAAEQ,OAAOF,QAC9DtK,UAAU,sLACVsQ,KAAM,EACN7F,YAAY,wCAIf,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,uBACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS3I,YAChB1V,SAAWP,GAAM6e,EAAY,IAAKD,EAAU3I,YAAajW,EAAEQ,OAAOF,QAClEtK,UAAU,wMACVsQ,KAAM,EACN7F,YAAY,wCAMlB9T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,gBACCixB,EACEzxB,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,gDAAgD9I,SAAA,wBAK3DP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,EAAA0xB,EAASzT,UAAY,IAAIjX,OAAS,KAClCvG,IAAC,MAAI,CAAAqI,UAAU,2DACb9I,gBAAC,OAAK,CAAA8I,UAAU,uDAAuD9I,SAAA,CAAA,MACjE0xB,EAASzT,UAAY,IAAIjX,OAAO,eAK1CvG,IAAC,MAAI,CAAAqI,UAAU,0HACZ9I,SAAAwgB,EAAgB7V,IAAKuB,GACpB1M,EAAAC,KAAC,MAAuB,CAAAqJ,UAAU,iBAChC9I,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCqI,UAAU,+BACVpJ,MAAO,CAAEa,MAAO2L,EAAS3L,OAAS,WAEjCP,SAASkM,EAAAG,QAEZ5L,EAAAA,IAAC,MAAI,CAAAqI,UAAU,iBACX9I,UAAAkM,EAASgW,QAAU,IAAIvX,IAAKc,IAC5B,MAAMgnB,GAAcf,EAASzT,UAAY,IAAInN,SAASrF,EAAM+F,KAE1D,OAAAhS,EAAAC,KAAC,MAAA,CAECqL,QAAS,IAnQP,CAACqT,IACnB,MAAA+T,EAAkBR,EAASzT,UAAY,GAGvCkU,EAFaD,EAAgBphB,SAASqN,GAGxC+T,EAAgB9T,OAAQzL,GAAeA,IAAOwL,GAC9C,IAAI+T,EAAiB/T,GAEbwT,EAAA,IACPD,EACHzT,SAAUkU,KAyPyBhT,CAAkB1T,EAAM+F,KACvC1I,UAAW,sEACT2pB,EACI,8CACA,4CAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,OACVvK,UAAU,YAEXrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,UAAW9I,WAAM0L,SAd5BD,EAAM+F,WAZXtF,EAASsF,gBAsC7B/R,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL6P,SAAU8J,IAAa4U,IAAgBiE,EACvCztB,UAAU,uKAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IAAE,IAAErM,EAAW,UAAY,QAErCle,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,8FACX9I,SAAA,cC3XHo3B,GAAyC,EAC7CrM,aACAnL,OACAiR,SACAC,WACApT,YAAW,MAGX,MAAOyY,EAAeC,GAAoBn1B,WAAiB,KAC/C,MAAN2e,OAAM,EAAAA,EAAAiF,SAAgB,mCAAmCjF,EAAKiF,UAC3D,KAGF6M,EAAUC,GAAe1wB,EAAAA,SAC9B2e,EACI,CACEvT,MAAOuT,EAAKvT,MACZ4c,aAAcrJ,EAAKqJ,cAAgB,GACnCnH,MAAOlC,EAAKkC,OAAS,GAEvB,CACEzV,MAAO,GACP4c,aAAc,GACdnH,MAAO,IAIT+C,EAAUjY,EAAAA,QAAQ,IAAMsa,GAAiBiP,GAAgB,CAACA,IAC1DE,EAAezpB,UAAQ,IAAMiY,EAAUyR,GAAoBzR,GAAW,KAAM,CAACA,IAC7E0R,EAAa3pB,EAAAA,QAAQ,IAAkB,OAAZiY,EAAkB,CAACA,IAwB9CyN,EAAcZ,EAASrlB,MAAMwM,QAAUsd,EAActd,QAAU0d,EAGlE92B,OAAAA,EAAAA,KAAA,OAAA,CAAKmT,SAzBkBE,IACxBA,EAAEC,iBAEG2e,EAASrlB,MAAMwM,QAAWsd,EAActd,OAKxC0d,GAAe1R,EAKbgM,EAAA,CACL9F,aACAlG,UACAxY,MAAOqlB,EAASrlB,MAChB4c,aAAcyI,EAASzI,cAAgB,GACvCnH,MAAO4P,EAAS5P,OAAS,IATzB9K,MAAM,6BALNA,MAAM,kCAqB0BlO,UAAU,YAC1C9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,aACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,UACzES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAEzCR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAO+iB,EACP9iB,SAAWP,GAAMsjB,EAAiBtjB,EAAEQ,OAAOF,OAC3CtK,UAAW,mIACTqtB,IAAkBI,EACd,iBACA,wCAENhjB,YAAY,sCACZC,UAAQ,IAET2iB,IAAkBI,SAChB,IAAE,CAAAztB,UAAU,4BAA4B9I,SAAmB,wBAE7D6kB,GACCrlB,EAAAC,KAAC,IAAE,CAAAqJ,UAAU,8BAA8B9I,SAAA,CAAA,YAAUS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,iDAAkD9I,SAAQ6kB,OAG/HwR,GAAgBE,SACd,MAAA,CAAIztB,UAAU,OACb9I,SAAAR,EAAAiB,IAAC,MAAA,CACC2W,IAAKif,EACLhf,IAAI,SACJvO,UAAU,qDAMjB,MACC,CAAA9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,SAC1ES,EAAAA,IAAA,OAAA,CAAKqI,UAAU,eAAe9I,SAAC,SAExCR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrlB,MAAOyG,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,eACZC,UAAQ,cAIX,MACC,CAAAxT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,oBACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAASzI,aAChB5V,SAAWP,GAAM6e,EAAY,IAAKD,EAAUzI,aAAcnW,EAAEQ,OAAOF,QACnEtK,UAAU,wMACVsQ,KAAM,EACN7F,YAAY,6FAEb9S,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,2CAIJP,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL6P,SAAU8J,IAAa4U,EACvBxpB,UAAU,uKAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IAAE,IAAErM,EAAW,UAAY,QAErCle,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,8FACX9I,SAAA,cC1HHq3B,GAAc,CAClB,CAAEC,IAAK,cAAetqB,KAAMoB,EAAaY,MAAO,YAChD,CAAEsoB,IAAK,WAAYtqB,KAAMwI,EAAUxG,MAAO,YAC1C,CAAEsoB,IAAK,kBAAmBtqB,KAAM2hB,GAAiB3f,MAAO,YACxD,CAAEsoB,IAAK,cAAetqB,KAAM4hB,GAAa5f,MAAO,YAChD,CAAEsoB,IAAK,eAAgBtqB,KAAMsB,EAAcU,MAAO,YAClD,CAAEsoB,IAAK,SAAUtqB,KAAM0C,EAAQV,MAAO,YACtC,CAAEsoB,IAAK,QAAStqB,KAAMiJ,EAAOjH,MAAO,eACpC,CAAEsoB,IAAK,UAAWtqB,KAAM6hB,GAAS7f,MAAO,aACxC,CAAEsoB,IAAK,QAAStqB,KAAM8hB,GAAO9f,MAAO,aACpC,CAAEsoB,IAAK,cAAetqB,KAAM+hB,GAAa/f,MAAO,cAY5CuoB,GAA4D,EAChEvH,SACA1qB,QACAkyB,uBACAC,SACAC,eAEM,MAAAC,WACJA,EAAAC,UACAA,EAAAC,WACAA,EAAAC,UACAA,EAAA1uB,WACAA,EAAA2uB,WACAA,GACEC,GAAY,CAAErlB,GAAIrN,IAEhB5F,EAAQ,CACZo4B,UAAWG,GAAIC,UAAUC,SAASL,GAClC1uB,aACAD,QAAS4uB,EAAa,GAAM,EAC5BK,OAAQL,EAAa,IAAO,QAI5B,OAAAv4B,EAAAC,KAAC,MAAA,CACCsJ,IAAK8uB,EACLn4B,QACAoJ,UAAU,4JAEV9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,0BAEb9I,SAAA,CAAAR,EAAAiB,IAAC,MAAA,IACKk3B,KACAC,EACJ9uB,UAAU,oGACVuD,MAAM,cAENrM,eAACqP,EAAO,QAEV5O,IAAC,MAAI,CAAAqI,UAAU,qCACdrI,EAAAA,IAAA,KAAA,CAAGqI,UAAU,0CAA2C9I,WAAOkM,aAChEzM,KAAC,OAAK,CAAAqJ,UAAU,2CAA2C9I,SAAA,CAAA,IACvDgwB,EAAOI,MAAMppB,OAAO,gBAG1BvH,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM2sB,EAAOnyB,GACtBsO,SAAmC,OAAzB4jB,EACV1uB,UAAW,yFACgB,OAAzB0uB,EAAgC,gCAAkC,IAErEx3B,SAAA,OAGDR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM4sB,EAASpyB,GACxBsO,SAAmC,OAAzB4jB,EACV1uB,UAAW,2FACgB,OAAzB0uB,EAAgC,gCAAkC,IAEpEnrB,MAAM,UAENrM,SAAAS,EAAAA,IAAC4e,EAAQ,CAAAvW,UAAU,sBAIzBrJ,KAAC,KAAG,CAAAqJ,UAAU,gDACX9I,SAAA,CAAAgwB,EAAOI,MAAM1D,MAAM,EAAG,GAAG/hB,IAAI,CAAC8B,EAAMnE,UAClC,KAAW,CAAAQ,UAAU,YAAa9I,SAAAyM,GAA1BnE,IAEV0nB,EAAOI,MAAMppB,OAAS,GACpBvH,EAAAA,KAAA,KAAA,CAAGqJ,UAAU,0CAA0C9I,SAAA,CAAA,KACnDgwB,EAAOI,MAAMppB,OAAS,EAAE,oBAgBjCqxB,GAAsC,EAAGzY,OAAMiR,SAAQC,WAAUpT,YAAW,YAChF,MAAO1S,EAAagmB,GAAkB/vB,WAAwB,OAGxDuf,gBAAEA,EAAiB/L,QAASwc,GAAkBxQ,KAG9CgR,GAAkB,MAAA7R,OAAA,EAAAA,EAAM3B,UACzB2B,EAAK3B,SAAmBtT,IAAKgf,GACJ,iBAAjBA,EAA4BA,EAA6B,MAAdA,OAAc,EAAAA,EAAAnY,KAChE4M,OAAOwL,SACT,GAGE0O,EAAsC1Y,EAAO,IAC9CA,EACHwP,QAASxP,EAAKwP,SAAW,cAEzBW,SAAUnQ,EAAKmQ,SAAW,IAAIplB,IAAI,CAACqlB,EAAQ1qB,KAAW,IACjD0qB,EACHlO,MAAOkO,EAAOlO,OAASxc,KAEzB4c,OAAQtC,EAAKsC,QAAU,GACvBwO,SAAU9Q,EAAK8Q,UAAY,GAC3BC,SAAU/Q,EAAK+Q,UAAY,GAC3B1S,SAAUwT,EACVnlB,QAASsT,EAAKtT,SAAW,GACzBC,QAASqT,EAAKrT,SAAW,GACzBqjB,UAAWhQ,EAAKgQ,WAAa,GAC7BC,UAAWjQ,EAAKiQ,WAAa,IAC3B,CACFC,OAAQ,GACRzjB,MAAO,GACPC,QAAS,GACTC,QAAS,GACTojB,QAAS,GACTC,UAAW,GACXC,UAAW,GACX/jB,YAAa,GACbikB,QAAS,GACT7N,OAAQ,GACRwO,SAAU,GACVC,SAAU,GACV1S,SAAU,GACV6D,MAAO,EACPsN,QAAS,gBAGJsC,EAAUC,GAAe1wB,WAA6Bq3B,IAGtDC,EAAaC,GAAkBv3B,EAAAA,SACpCqd,MAAMma,QAAQ/G,EAASxP,QAAUwP,EAASxP,OAAO5H,KAAK,MAAQ,KAEzDoe,EAAeC,GAAoB13B,EAAAA,SACxCqd,MAAMma,QAAQ/G,EAAShB,UAAYgB,EAAShB,SAASpW,KAAK,MAAQ,KAE7Dse,EAAeC,GAAoB53B,EAAAA,SACxCqd,MAAMma,QAAQ/G,EAASf,UAAYe,EAASf,SAASrW,KAAK,MAAQ,KAI7Dkd,EAAsBsB,GAA2B73B,WAAwB,OACzE83B,EAAkBC,GAAuB/3B,WAO7C,CACDiL,SAAU,GACVgkB,WAAY,GACZC,WAAY,GACZtR,QAAS,GACTC,UAAW,GACXC,UAAW,KAmBPiT,EAA6B9lB,IAC3B,MAAA+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAIc,GAASA,EAAM+F,KAAM4M,OAAOwL,SAC3EsI,EAAkBR,EAASzT,UAAY,GAIzC,IAAAkU,EACJ,GAHoBF,EAAiBG,MAAOzf,GAAeuf,EAAgBphB,SAAS6B,IAIpEwf,EAAAD,EAAgB9T,OAAQzL,IAAgBsf,EAAiBnhB,SAAS6B,QAC3E,CACC,MAAA0f,MAAgBjQ,IAAI,IAAI8P,KAAoBD,IACpCE,EAAA7T,MAAMC,KAAK8T,EAC3B,CAEYV,EAAA,IACPD,EACHzT,SAAUkU,KAiBR8G,EAAsB3zB,YAC1B,MAAM0qB,GAAU0B,EAAS3B,SAAW,IAAIzqB,GACpC0qB,IACF8I,EAAwBxzB,GACJ0zB,EAAA,CAClB9sB,SAAU8jB,EAAO9jB,SACjBgkB,WAAYF,EAAOE,YAAc,GACjCC,WAAYH,EAAOG,YAAc,GACjCtR,QAASmR,EAAOI,MAAM9V,KAAK,MAC3BwE,WAAW,OAAA/E,EAAAiW,EAAOK,cAAPtW,EAAAA,EAAgBO,KAAK,QAAS,GACzCyE,WAAW,OAAA3C,EAAA4T,EAAOM,cAAP,EAAAlU,EAAgB9B,KAAK,QAAS,OAqDzC4e,EAAwB5zB,IACxB,IAACme,QAAQ,qBAAsB,OACnC,MAAM0V,EAAa,IAAKzH,EAAS3B,SAAW,IACjCoJ,EAAApd,OAAOzW,EAAO,GACzBqsB,EAAY,IAAKD,EAAU3B,QAASoJ,KAgChC7G,EAAwC,KAA1BZ,EAASrlB,MAAMwM,QACY,KAA5B6Y,EAAS/B,QAAQ9W,QACU,KAA3B6Y,EAAS5B,OAAOjX,OA0ChCpZ,OAAAA,EAAAA,KAAA,OAAA,CAAKmT,SAxCkBE,IAGxB,GAFAA,EAAEC,kBAEGuf,EAEH,YADAtb,MAAM,oCAKR,MAAMoiB,EAAcb,EAAYzf,MAAM,KAAKnO,IAAK+rB,GAAMA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GACjFqyB,EAAgBX,EAAc5f,MAAM,KAAKnO,IAAK+rB,GAAMA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GACrFsyB,EAAgBV,EAAc9f,MAAM,KAAKnO,IAAK+rB,GAAMA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GAGrFiX,EAAWK,MAAMC,KAAK,IAAI6D,KAC7BsP,EAASzT,UAAY,IAAItT,IAAKgf,GACL,iBAAjBA,EAA4BA,EAA6B,MAAdA,OAAc,EAAAA,EAAAnY,KAChE4M,OAAOwL,WAIL2P,GAAkB7H,EAAS3B,SAAW,IAAIplB,IAAI,CAACqlB,EAAQ1qB,KAAW,IACnE0qB,EACHlO,MAAOkO,EAAOlO,OAASxc,KAGnBk0B,EAAgB,IACjB9H,EACHxP,OAAQkX,EACR1I,SAAU2I,EACV1I,SAAU2I,EACVrb,WACA8R,QAASwJ,GAIX1I,EAAO2I,IAI2B1wB,UAAU,YAC1C9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,uDACX9I,SAAA4f,EAAO,QAAU,YAIpBnf,IAAC,MAAI,CAAAqI,UAAU,OACb9I,SAAAS,EAAAA,IAACqc,IAAaC,eAAgB/R,EAAaqI,SAAU2d,QAGvDvxB,KAAC,MAAI,CAAAqJ,UAAU,4BACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,OACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS5B,OAChBzc,SAAWP,GAAM6e,EAAY,IAAKD,EAAU5B,OAAQhd,EAAEQ,OAAOF,QAC7DtK,UAAU,sKACVyK,YAAY,0BAGf,MACC,CAAAvT,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,MAC7D,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrlB,MAAOyG,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,SAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASplB,SAAW,GAC3B+G,SAAWP,GAAM6e,EAAY,IAAKD,EAAUplB,QAASwG,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,YAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASnlB,SAAW,GAC3B8G,SAAWP,GAAM6e,EAAY,IAAKD,EAAUnlB,QAASuG,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,cAIlB9T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,SAC1D,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC/DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS/B,QAChBtc,SAAWP,GAAM6e,EAAY,IAAKD,EAAU/B,QAAS7c,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,cAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS9B,WAAa,GAC7Bvc,SAAWP,GAAM6e,EAAY,IAAKD,EAAU9B,UAAW9c,EAAEQ,OAAOF,QAChEtK,UAAU,sKACVyK,YAAY,2BAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS7B,WAAa,GAC7Bxc,SAAWP,GAAM6e,EAAY,IAAKD,EAAU7B,UAAW/c,EAAEQ,OAAOF,QAChEtK,UAAU,sKACVyK,YAAY,8BAIjB,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,OACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACLqP,MAAOse,EAAS5P,MAChBzO,SAAWP,IACT,MAAMM,EAAQsW,SAAS5W,EAAEQ,OAAOF,OACpBue,EAAA,IAAKD,EAAU5P,MAAOwP,MAAMle,GAAS,EAAIA,KAEvDtK,UAAU,sKACV8pB,IAAI,IACJrf,YAAY,qCAIf,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,QACAR,EAAAiB,IAAC,SAAA,CACC2S,MAAOse,EAAStC,SAAW,cAC3B/b,SAAWP,GAAM6e,EAAY,IAAKD,EAAUtC,QAAStc,EAAEQ,OAAOF,QAC9DtK,UAAU,sKAET9I,SAAYq3B,GAAA1sB,IAAK8uB,GACfh5B,EAAAA,IAAA,SAAA,CAAwB2S,MAAOqmB,EAAOnC,IACpCt3B,SAAAy5B,EAAOzqB,OADGyqB,EAAOnC,UAMxB73B,KAAC,MAAI,CAAAqJ,UAAU,wEACb9I,SAAA,GAAAS,IAAC,QAAKT,SAAK,UACV6J,EAAMC,eACL,OAAAiQ,EAAAsd,GAAYlM,KAAYuO,GAAAA,EAAIpC,OAAS5F,EAAStC,SAAW,sBAAzD,EAAArV,EAA0E/M,OAAQoB,EAClF,CAAEtF,UAAW,uBAMrBrJ,KAAC,MAAI,CAAAqJ,UAAU,8FACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,QAAC,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,kDAAkD9I,SAEhE,mBACCS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,8CAEFR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL+G,QA/SgB,KACxBguB,GAAyBpH,EAAS3B,SAAW,IAAI/oB,QAC7BgyB,EAAA,CAClB9sB,SAAU,GACVgkB,WAAY,GACZC,WAAY,GACZtR,QAAS,GACTC,UAAW,GACXC,UAAW,MAwSLnL,SAAmC,OAAzB4jB,EACV1uB,UAAW,sHACgB,OAAzB0uB,EAAgC,gCAAkC,IAGpEx3B,SAAA,GAACS,IAAA2jB,GAAA,CAAOtb,UAAU,YAAY,gBAMjC4oB,EAAS3B,SAAW2B,EAAS3B,QAAQ/oB,OAAS,GAC7CvG,EAAAA,IAACk5B,GAAW,CAAAC,mBAAoBC,GAAeC,UAzOhCC,IACf,MAAAC,OAAEA,EAAQC,KAAAA,GAASF,EAEzB,IAAKE,GAAQD,EAAOrnB,KAAOsnB,EAAKtnB,GAAI,OAE9B,MAAAunB,GAAYxI,EAAS3B,SAAW,IAAIxE,UAAU,CAACxH,EAAGzb,IAAMA,IAAM0xB,EAAOrnB,IACrEwnB,GAAYzI,EAAS3B,SAAW,IAAIxE,UAAU,CAACxH,EAAGzb,IAAMA,IAAM2xB,EAAKtnB,IAErE,QAAAunB,IAAgC,IAAbC,EAAiB,OAGxC,MAAMhB,EAAa,IAAKzH,EAAS3B,SAAW,KACrCqK,GAAajB,EAAWpd,OAAOme,EAAU,GAEhD,IAAKE,EAAW,OAELjB,EAAApd,OAAOoe,EAAU,EAAGC,GAG/B,MAAMC,EAAmBlB,EAAWxuB,IAAI,CAACqlB,EAAQ1qB,KAAW,IACvD0qB,EACHlO,MAAOxc,KAGTqsB,EAAY,IAAKD,EAAU3B,QAASsK,KAkN5Br6B,SAACS,EAAAA,IAAA65B,GAAA,CAAgBlK,MAAOsB,EAAS3B,QAAQplB,IAAI,CAACoZ,EAAGzb,IAAMA,GAAIiyB,SAAUC,GACnEx6B,WAAAS,IAAC,MAAI,CAAAqI,UAAU,iBACZ9I,SAAS0xB,EAAA3B,QAAQplB,IAAI,CAACqlB,EAAQ1qB,IAC7B9F,EAAAiB,IAAC82B,GAAA,CAECvH,SACA1qB,QACAkyB,uBACAC,OAAQwB,EACRvB,SAAUwB,GALL5zB,UAcS,OAAzBkyB,UACE,MAAA,CAAI1uB,UAAU,mGACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,+CACX9I,SAAwBw3B,GAAA9F,EAAS3B,SAAW,IAAI/oB,OAAS,UAAY,cAIxEvG,IAAC,MAAI,CAAAqI,UAAU,OACb9I,SAAAS,EAAAA,IAACqc,IAAaC,eAAgB/R,EAAaqI,SAAU2d,QAGvDvxB,KAAC,MAAI,CAAAqJ,UAAU,YAEb9I,SAAA,QAAC,MACC,CAAAA,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,WACxD,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QACjEP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAO2lB,EAAiB7sB,SACxBmH,SAAWP,GAAMkmB,EAAoB,IAAKD,EAAkB7sB,SAAU4G,EAAEQ,OAAOF,QAC/EG,YAAY,oBACZzK,UAAU,mLAGG,OAAhBkC,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAO2lB,EAAiB7I,WACxB7c,SAAWP,GAAMkmB,EAAoB,IAAKD,EAAkB7I,WAAYpd,EAAEQ,OAAOF,QACjFG,YAAY,0CACZzK,UAAU,mLAGG,OAAhBkC,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAO2lB,EAAiB5I,WACxB9c,SAAWP,GAAMkmB,EAAoB,IAAKD,EAAkB5I,WAAYrd,EAAEQ,OAAOF,QACjFG,YAAY,gBACZzK,UAAU,6LAMf,MACC,CAAA9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,WACxD,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QACjEP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GAEGvL,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO2lB,EAAiBla,QACxBxL,SAAWD,GAAU4lB,EAAoB,IAAKD,EAAkBla,QAASzL,IACzEG,YAAY,kDACZ6F,KAAM,EACNtQ,UAAU,kBAEXrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,yCAGa,OAAhBgL,GAEGvL,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO2lB,EAAiBja,UACxBzL,SAAWD,GAAU4lB,EAAoB,IAAKD,EAAkBja,UAAW1L,IAC3EG,YAAY,oGACZ6F,KAAM,EACNtQ,UAAU,kBAEXrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,uDAGa,OAAhBgL,GAEGvL,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO2lB,EAAiBha,UACxB1L,SAAWD,GAAU4lB,EAAoB,IAAKD,EAAkBha,UAAW3L,IAC3EG,YAAY,oDACZ6F,KAAM,EACNtQ,UAAU,kBAEXrI,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,2CAKNP,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL+G,QA5ZW,KACrB,IAACiuB,EAAiB7sB,SAAS2M,SAAWkgB,EAAiBla,QAAQhG,OAEjE,YADA7B,MAAM,2BAIR,MAAMoZ,EAAQ2I,EAAiBla,QAAQ/F,MAAM,MAAMnO,IAAI+rB,GAAKA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GACvFqpB,EAAU0I,EAAiBja,UAAUhG,MAAM,MAAMnO,IAAI+rB,GAAKA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GAC3FspB,EAAUyI,EAAiBha,UAAUjG,MAAM,MAAMnO,IAAI+rB,GAAKA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GAE3FyzB,EAA8B,CAClCvuB,SAAU6sB,EAAiB7sB,SAAS2M,OACpCqX,WAAY6I,EAAiB7I,WAAWrX,aAAU,EAClDsX,WAAY4I,EAAiB5I,WAAWtX,aAAU,EAClDuX,QACAC,QAASA,EAAQrpB,OAAS,EAAIqpB,OAAU,EACxCC,QAASA,EAAQtpB,OAAS,EAAIspB,OAAU,GAGpC6I,EAAa,IAAKzH,EAAS3B,SAAW,IACf,OAAzByH,IACF2B,EAAW3B,GAAwBiD,GAGrC9I,EAAY,IAAKD,EAAU3B,QAASoJ,IACpCL,EAAwB,MACJE,EAAA,CAClB9sB,SAAU,GACVgkB,WAAY,GACZC,WAAY,GACZtR,QAAS,GACTC,UAAW,GACXC,UAAW,MA6XCjW,UAAU,gIAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IAAE,QAGZvqB,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAhYa,KAC3BguB,EAAwB,MACJE,EAAA,CAClB9sB,SAAU,GACVgkB,WAAY,GACZC,WAAY,GACZtR,QAAS,GACTC,UAAW,GACXC,UAAW,MAyXCjW,UAAU,kFACX9I,SAAA,kBASN0xB,EAAS3B,SAAuC,IAA5B2B,EAAS3B,QAAQ/oB,SAA0C,OAAzBwwB,KACvD/3B,KAAC,MAAI,CAAAqJ,UAAU,oHACb9I,SAAA,CAACS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,kBACCS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,SAExD,4CAKL,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,0BACCS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,qEACAR,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAAS5lB,aAAe,GAC/BuH,SAAWD,GAAUue,EAAY,IAAKD,EAAU5lB,YAAasH,IAC7DG,YAAY,6CACZ6F,KAAM,EACNtQ,UAAU,uBAIdrJ,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,6DAA6D9I,SAE9E,qBACC0xB,EAASzT,UAAYyT,EAASzT,SAASjX,OAAS,GAC/CxH,EAAAC,KAAC,OAAK,CAAAqJ,UAAU,2GAA2G9I,SAAA,CAAA,KACtH0xB,EAASzT,SAASjX,OAAO,cAKjCiqB,QACE,MAAI,CAAAnoB,UAAU,gDAAgD9I,SAE/D,wBAC6B,IAA3BwgB,EAAgBxZ,SAClBvG,IAAC,OAAIqI,UAAU,mHAAmH9I,SAElI,iCAECR,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,uHACZ9I,SAAAwgB,EAAgB7V,IAAKuB,IACd,MAAA+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAIc,GAASA,EAAM+F,KAAM4M,OAAOwL,SAC3EsI,EAAkBR,EAASzT,UAAY,GACvC+U,EAAgBf,EAAiB7T,OAAOzL,GAAMuf,EAAgBphB,SAAS6B,IAAK3L,OAC5EisB,EAAchB,EAAiBjrB,OAAS,GAAKgsB,IAAkBf,EAAiBjrB,OAChFksB,EAAeF,EAAgB,GAAKA,EAAgBf,EAAiBjrB,OAGzE,SAAAvH,KAAC,MAAuB,CAAAqJ,UAAU,iBAEhC9I,SAAA,CAAAR,EAAAC,KAAC,MAAA,CACCqJ,UAAU,sJACVgC,QAAS,IAAMknB,EAA0B9lB,GAEzClM,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASO,EACTlqB,IAAWoqB,IACLA,IACFA,EAAGC,cAAgBF,IAGvB7f,SAAU,IAAM2e,EAA0B9lB,GAC1CpD,UAAU,oEACVgC,QAAUgI,GAAMA,EAAE8Z,oBAEpBptB,EAAAC,KAAC,QAAA,CACCqJ,UAAU,oEACVpJ,MAAO,CAAEa,MAAO2L,EAAS3L,OAAS,WAEjCP,SAAA,CAASkM,EAAAG,MACT2mB,EAAgB,UACd,OAAA,CAAKlqB,UAAU,4DAA4D9I,SAAA,CAAA,IACxEgzB,EAAc,IAAEf,EAAiBjrB,OAAO,aAOlDvG,EAAAA,IAAC,MAAI,CAAAqI,UAAU,6CACX9I,UAAAkM,EAASgW,QAAU,IAAIvX,IAAKc,IAC5B,MAAMgnB,GAAcf,EAASzT,UAAY,IAAInN,SAASrF,EAAM+F,KAG1D,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,yEACT2pB,EACI,6EACA,sEAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IAxlBV,CAAC8K,IACnB,MAAA+T,EAAkBR,EAASzT,UAAY,GAGvCkU,EAFaD,EAAgBphB,SAASqN,GAGxC+T,EAAgB9T,OAAQzL,GAAeA,IAAOwL,GAC9C,IAAI+T,EAAiB/T,GAEbwT,EAAA,IACPD,EACHzT,SAAUkU,KA8kB4BhT,CAAkB1T,EAAM+F,KACxC1I,UAAU,sEAEZrI,EAAAA,IAAC,QAAKqI,UAAW,YAAW2pB,EAAa,iDAAmD,oCACzFzyB,SAAAyL,EAAMC,SAdJD,EAAM+F,WAtCXtF,EAASsF,SAgE1B/Q,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,gFAGD,MACC,CAAAA,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,uBAEjFP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOmlB,EACPllB,SAAWP,GAAM0lB,EAAe1lB,EAAEQ,OAAOF,OACzCsnB,OAAQ,KACN,MAAMtB,EAAcb,EAAYzf,MAAM,KAAKnO,IAAK+rB,GAAMA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GACvF2qB,EAAY,IAAKD,EAAUxP,OAAQkX,KAErCtwB,UAAU,sKACVyK,YAAY,8BAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOslB,EACPrlB,SAAWP,GAAM6lB,EAAiB7lB,EAAEQ,OAAOF,OAC3CsnB,OAAQ,KACN,MAAMtB,EAAcV,EAAc5f,MAAM,KAAKnO,IAAK+rB,GAAMA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GACzF2qB,EAAY,IAAKD,EAAUhB,SAAU0I,KAEvCtwB,UAAU,sKACVyK,YAAY,2CAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOwlB,EACPvlB,SAAWP,GAAM+lB,EAAiB/lB,EAAEQ,OAAOF,OAC3CsnB,OAAQ,KACN,MAAMtB,EAAcR,EAAc9f,MAAM,KAAKnO,IAAK+rB,GAAMA,EAAE7d,QAAQuF,OAAYsY,GAAAA,EAAE1vB,OAAS,GACzF2qB,EAAY,IAAKD,EAAUf,SAAUyI,KAEvCtwB,UAAU,sKACVyK,YAAY,4BAGf9S,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,6DAGwB,OAAzBw3B,GACC/2B,EAAAA,IAAC,MAAI,CAAAqI,UAAU,sGACb9I,WAAAS,IAAC,IAAE,CAAAqI,UAAU,2DAA2D9I,SAAA,sDAO3E0xB,EAAS3B,SAAW2B,EAAS3B,QAAQ/oB,OAAS,GAA8B,OAAzBwwB,GAClD/3B,EAAAA,KAAC,MAAI,CAAAqJ,UAAU,kGACb9I,SAAA,GAACP,KAAA,IAAA,CAAEqJ,UAAU,8DAA8D9I,SAAA,CAAA,KACtE0xB,EAAS3B,QAAQ/oB,OAAO,sBAE5BvG,EAAAA,IAAA,IAAA,CAAEqI,UAAU,6CAA6C9I,SAE1D,yCAIJP,KAAC,MAAI,CAAAqJ,UAAU,kEACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL6P,SAAU8J,IAAa4U,GAAwC,OAAzBkF,EACtC1uB,UAAW,qJACT4U,IAAa4U,GAAwC,OAAzBkF,EAAgC,gCAAkC,aAEhGnrB,MAAgC,OAAzBmrB,EAAgC,oBAAsB,GAE5Dx3B,WAEGP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,iFAAqF,aAKpGrJ,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAAspB,GAAA,CAAOjhB,UAAU,YAAY,cAIpCtJ,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACTld,SAAU8J,EACV5U,UAAW,6JACT4U,EAAW,gCAAkC,IAEhD1d,SAAA,cC15BH26B,GAAmC,EAAG/a,OAAMiR,SAAQC,WAAUpT,YAAW,MAEvE,MAAAgU,SACJA,EAAAkJ,WACAA,EAAA5vB,YACAA,EAAAgmB,eACAA,EAAAW,YACAA,EAAAkJ,qBACAA,EAAAC,6BACAA,EAAAC,eACAA,EAAAC,kBACAA,EAAAC,qBACAA,GACEC,GAAetb,IAGbY,gBAAEA,EAAiB/L,QAASwc,GAAkBxQ,MAG5Cb,KAAMsR,EAAa,GAAI5xB,UAAW6xB,GAAsBC,KAG1DQ,EAAwBC,IACtB,MAAAC,EAAqBJ,EAAStO,aAAe,GAG7C2O,EAFaD,EAAmBhhB,SAAS+gB,GAG3CC,EAAmB1T,OAAQzL,GAAeA,IAAOkf,GACjD,IAAIC,EAAoBD,GAEhBF,EAAA,IACPD,EACHtO,YAAa2O,KAqBXC,EAA6B9lB,IAC3B,MAAA+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAIc,GAASA,EAAM+F,KAAM4M,OAAOwL,SAC3EsI,EAAkBR,EAASzT,UAAY,GAKzC,IAAAkU,EACJ,GAHoBF,EAAiBG,MAAOzf,GAAeuf,EAAgBphB,SAAS6B,IAKpEwf,EAAAD,EAAgB9T,OAAQzL,IAAgBsf,EAAiBnhB,SAAS6B,QAC3E,CAEC,MAAA0f,MAAgBjQ,IAAI,IAAI8P,KAAoBD,IACpCE,EAAA7T,MAAMC,KAAK8T,EAC3B,CAGYV,EAAA,IACPD,EACHzT,SAAUkU,KAsBZ,SAAA1yB,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,uDACX9I,SAAA4f,EAAO,UAAY,YAIrBnf,EAAAA,IAAAqc,GAAA,CAAaC,eAAgB/R,EAAaqI,SAAU2d,MAErDvxB,KAAC,MAAI,CAAAqJ,UAAU,4BAEb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,MAC7D,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrlB,MAAOyG,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,UACZC,UAAQ,IAGK,OAAhBxI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASplB,SAAW,GAC3B+G,SAAWP,GAAM6e,EAAY,IAAKD,EAAUplB,QAASwG,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,kBAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASnlB,SAAW,GAC3B8G,SAAWP,GAAM6e,EAAY,IAAKD,EAAUnlB,QAASuG,EAAEQ,OAAOF,QAC9DtK,UAAU,sKACVyK,YAAY,oBAIlB9T,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,0BAGC0xB,EAAStO,aAAesO,EAAStO,YAAYpc,OAAS,SACpD,MAAI,CAAA8B,UAAU,0EACZ9I,SAAA0xB,EAAStO,YAAYzY,IAAK4nB,IACzB,MAAMrmB,EAAWglB,EAAW/F,KAAUqH,GAAAA,EAAEhhB,MAAQ+gB,GAChD,OAAOrmB,EACL1M,EAAAC,KAAC,OAAA,CAECqJ,UAAU,uFAET9I,SAAA,CAASkM,EAAAR,KACVlM,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAAS,IAAM8mB,EAAqBW,GACpCzpB,UAAU,uCAEV9I,SAAAS,EAAAA,IAAC2O,EAAQ,CAAAtG,UAAU,gBAThBypB,GAYL,SAMTpB,EACE1wB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,0BACtDkxB,EAAWlqB,OAAS,QACrB,MAAI,CAAA8B,UAAU,wCACZ9I,SAAWkxB,EAAAvmB,IAAKuB,IACf,MAAMumB,GAAcf,EAAStO,aAAe,IAAItS,SAAS5E,EAASsF,KAEhE,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,kFACT2pB,EACI,0DACA,yFAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IAAMue,EAAqB1lB,EAASsF,KAC9C1I,UAAU,YAEXrI,EAAAA,IAAA,OAAA,CAAKqI,UAAU,oDACb9I,WAAS0L,SAdPQ,EAASsF,eAqBrB,IAAE,CAAA1I,UAAU,2CAA2C9I,SAExD,yDAGH,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,OACAR,EAAAC,KAAC,SAAA,CACC2T,MAAOse,EAASjF,OAChBpZ,SAAWP,GAAM6e,EAAY,IAAKD,EAAUjF,OAAQ3Z,EAAEQ,OAAOF,QAC7DtK,UAAU,sKAEV9I,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAI,SAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAI,SAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAE,oBAG/B,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,eACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAStF,YAAc,GAC9B/Y,SAAWP,GAAM6e,EAAY,IAAKD,EAAUtF,WAAYtZ,EAAEQ,OAAOF,QACjEtK,UAAU,sKACVyK,YAAY,qCAGf,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,aACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrF,UAAY,GAC5BhZ,SAAWP,GAAM6e,EAAY,IAAKD,EAAUrF,SAAUvZ,EAAEQ,OAAOF,QAC/DtK,UAAU,sKACVyK,YAAY,0BAGf,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,YACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASlF,MAChBnZ,SAAWP,GAAM6e,EAAY,IAAKD,EAAUlF,MAAO1Z,EAAEQ,OAAOF,QAC5DtK,UAAU,sKACVyK,YAAY,0BAGf,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,OACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACLqP,MAAOse,EAAS5P,MAChBzO,SAAWP,GAAM6e,EAAY,IAAKD,EAAU5P,MAAO4H,SAAS5W,EAAEQ,OAAOF,SACrEtK,UAAU,6KAKdrJ,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,6DAA6D9I,SAE9E,wBACC0xB,EAASzT,UAAYyT,EAASzT,SAASjX,OAAS,GAC/CxH,EAAAC,KAAC,OAAK,CAAAqJ,UAAU,2GAA2G9I,SAAA,CAAA,KACtH0xB,EAASzT,SAASjX,OAAO,cAKjCiqB,QACE,MAAI,CAAAnoB,UAAU,gDAAgD9I,SAE/D,wBAC6B,IAA3BwgB,EAAgBxZ,SAClBvG,IAAC,OAAIqI,UAAU,mHAAmH9I,SAElI,iCAECR,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,uHACZ9I,SAAAwgB,EAAgB7V,IAAKuB,IACd,MAAA+lB,GAAoB/lB,EAASgW,QAAU,IAAIvX,IAAIc,GAASA,EAAM+F,KAAM4M,OAAOwL,SAC3EoJ,EAAgBf,EAAiB7T,OAAczL,IAAA+e,EAASzT,UAAY,IAAInN,SAAS6B,IAAK3L,OACtFisB,EAAchB,EAAiBjrB,OAAS,GAAKgsB,IAAkBf,EAAiBjrB,OAChFksB,EAAeF,EAAgB,GAAKA,EAAgBf,EAAiBjrB,OAGzE,SAAAvH,KAAC,MAAuB,CAAAqJ,UAAU,iBAEhC9I,SAAA,CAAAR,EAAAC,KAAC,MAAA,CACCqJ,UAAU,sJACVgC,QAAS,IAAMknB,EAA0B9lB,GAEzClM,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASO,EACTlqB,IAAWoqB,IACLA,IACFA,EAAGC,cAAgBF,IAGvB7f,SAAU,IAAM2e,EAA0B9lB,GAC1CpD,UAAU,oEACVgC,QAAUgI,GAAMA,EAAE8Z,oBAEpBptB,EAAAC,KAAC,QAAA,CACCqJ,UAAU,oEACVpJ,MAAO,CAAEa,MAAO2L,EAAS3L,OAAS,WAEjCP,SAAA,CAASkM,EAAAG,MACT2mB,EAAgB,UACd,OAAA,CAAKlqB,UAAU,4DAA4D9I,SAAA,CAAA,IACxEgzB,EAAc,IAAEf,EAAiBjrB,OAAO,aAOlDvG,EAAAA,IAAC,MAAI,CAAAqI,UAAU,6CACX9I,UAAAkM,EAASgW,QAAU,IAAIvX,IAAKc,IAC5B,MAAMgnB,GAAcf,EAASzT,UAAY,IAAInN,SAASrF,EAAM+F,KAG1D,OAAAhS,EAAAC,KAAC,QAAA,CAECqJ,UAAW,yEACT2pB,EACI,6EACA,sEAGNzyB,SAAA,CAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,WACL2uB,QAASD,EACTpf,SAAU,IApTZ,CAAC8K,IACnB,MAAA+T,EAAkBR,EAASzT,UAAY,GAGvCkU,EAFaD,EAAgBphB,SAASqN,GAGxC+T,EAAgB9T,OAAQzL,GAAeA,IAAOwL,GAC9C,IAAI+T,EAAiB/T,GAGbwT,EAAA,IACPD,EACHzT,SAAUkU,KAyS8BhT,CAAkB1T,EAAM+F,KACxC1I,UAAU,sEAEZrI,EAAAA,IAAC,QAAKqI,UAAW,YAAW2pB,EAAa,iDAAmD,oCACzFzyB,SAAAyL,EAAMC,SAdJD,EAAM+F,WAtCXtF,EAASsF,SAgE1B/Q,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,qFAIH,MACC,CAAAA,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,mBAEjFP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAAS5lB,aAAe,GAC/BuH,SAAWD,GAAUue,EAAY,IAAKD,EAAU5lB,YAAasH,IAC7DG,YAAY,0BACZ6F,KAAM,EACNtQ,UAAU,kBAGG,OAAhBkC,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAAS3lB,eAAiB,GACjCsH,SAAWD,GAAUue,EAAY,IAAKD,EAAU3lB,cAAeqH,IAC/DG,YAAY,4CACZ6F,KAAM,EACNtQ,UAAU,kBAGG,OAAhBkC,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAAS1lB,eAAiB,GACjCqH,SAAWD,GAAUue,EAAY,IAAKD,EAAU1lB,cAAeoH,IAC/DG,YAAY,wBACZ6F,KAAM,EACNtQ,UAAU,4BAKf,MACC,CAAA9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,2BAEjFP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAwC,iBAA1Bse,EAAS1F,aAA4B0F,EAAS1F,aAAgB1N,MAAMma,QAAQ/G,EAAS1F,cAAgB0F,EAAS1F,aAAa1R,KAAK,MAAQ,GACtJjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAU1F,aAAclZ,EAAEQ,OAAOF,QACnEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,yBAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAA0C,iBAA5Bse,EAASzF,eAA8ByF,EAASzF,eAAkB3N,MAAMma,QAAQ/G,EAASzF,gBAAkByF,EAASzF,eAAe3R,KAAK,MAAQ,GAC9JjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUzF,eAAgBnZ,EAAEQ,OAAOF,QACrEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,yBAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAA0C,iBAA5Bse,EAASxF,eAA8BwF,EAASxF,eAAkB5N,MAAMma,QAAQ/G,EAASxF,gBAAkBwF,EAASxF,eAAe5R,KAAK,MAAQ,GAC9JjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUxF,eAAgBpZ,EAAEQ,OAAOF,QACrEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,mCAKjB,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,2BACAR,EAAAiB,IAAC,WAAA,CACC2S,MAAkC,iBAApBse,EAAS9D,OAAsB8D,EAAS9D,OAAUtP,MAAMma,QAAQ/G,EAAS9D,QAAU8D,EAAS9D,OAAOtT,KAAK,MAAQ,GAC9HjH,SAAWP,IACH,MAAAM,EAAQN,EAAEQ,OAAOF,MACXue,EAAA,IACPD,EACH9D,OAAQxa,KAGZgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,0EAMhB9T,KAAC,MAAI,CAAAqJ,UAAU,mGACb9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,oFACf9I,SAAA,GAACS,IAAA+N,EAAA,CAAQ1F,UAAU,qCAAqC,YAG1DtJ,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL+G,QAASiwB,EACTjyB,UAAU,8HAEV9I,SAAA,CAAAR,EAAAiB,IAAC2jB,GAAO,IAAE,eAIS,IAAtBwW,EAAW5zB,OACTvH,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,oDACb9I,SAAA,GAACS,IAAA+N,EAAA,CAAQ1F,UAAU,uCACnBrI,IAAC,KAAET,SAAgB,qBAClBS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,eAAe9I,SAA8B,sCAG5DS,EAAAA,IAAC,MAAI,CAAAqI,UAAU,YACZ9I,SAAA46B,EAAWjwB,IAAI,CAAC8B,EAAMnH,IACpB7F,EAAAA,KAAA,MAAA,CAAgBqJ,UAAU,iGAEzB9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,oCACb9I,SAAA,GAACP,KAAA,KAAA,CAAGqJ,UAAU,8EACZ9I,SAAA,CAAAS,EAAAA,IAAC,OAAK,CAAAqI,UAAU,wIACb9I,SAAAsF,EAAQ,IACJ,MACHA,EAAQ,KAEd9F,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL+G,QAAS,IAAMkwB,EAAkB11B,GACjCwD,UAAU,+HAEV9I,SAAA,CAAAR,EAAAiB,IAAC4e,EAAQ,IAAE,mBAKd,MACC,CAAArf,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,aACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,MACLqP,MAAO3G,EAAK8gB,IACZla,SAAWP,GAAM+nB,EAAqBv1B,EAAOwN,EAAEQ,OAAOF,OACtDG,YAAY,oEACZzK,UAAU,+KAKb,MACC,CAAA9I,SAAA,GAACP,KAAA,MAAA,CAAIqJ,UAAU,yCACb9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,6DAA6D9I,SAAA,CAAA,kBAE5EP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,iBAG5F,OAAA,CAAKlC,UAAW,aACE,OAAhBkC,EAAuByB,EAAKX,YAAY9E,OAAyB,OAAhBgE,EAAuByB,EAAKV,cAAc/E,OAASyF,EAAKT,cAAchF,QAAU,IAC9H,4CACiB,OAAhBgE,EAAuByB,EAAKX,YAAY9E,OAAyB,OAAhBgE,EAAuByB,EAAKV,cAAc/E,OAASyF,EAAKT,cAAchF,QAAU,IAClI,uCACA,oCAEHhH,SAAA,CAAgB,OAAAgL,EAAOyB,EAAKX,YAAY9E,OAAyB,OAAhBgE,EAAuByB,EAAKV,cAAc/E,OAASyF,EAAKT,cAAchF,OAAO,iBAIlH,OAAhBgE,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO3G,EAAKX,YACZuH,SAAWD,GAAU0nB,EAA6Bx1B,EAAO8N,EAAO,MAChEG,YAAY,6DACZ6F,KAAM,EACNtQ,UAAU,kBAIG,OAAhBkC,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO3G,EAAKV,cACZsH,SAAWD,GAAU0nB,EAA6Bx1B,EAAO8N,EAAO,MAChEG,YAAY,qGACZ6F,KAAM,EACNtQ,UAAU,kBAIG,OAAhBkC,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAO3G,EAAKT,cACZqH,SAAWD,GAAU0nB,EAA6Bx1B,EAAO8N,EAAO,MAChEG,YAAY,4CACZ6F,KAAM,EACNtQ,UAAU,oBAIdrJ,KAAC,MAAI,CAAAqJ,UAAU,yCACb9I,SAAA,CAACS,EAAAA,IAAA,IAAA,CAAEqI,UAAU,2CAA2C9I,SAExD,0CACkB,OAAhBgL,EAAuByB,EAAKX,YAAY9E,OAAyB,OAAhBgE,EAAuByB,EAAKV,cAAc/E,OAASyF,EAAKT,cAAchF,QAAU,WAChI,IAAE,CAAA8B,UAAU,+CAA+C9I,SAE5D,wCAzFEsF,gBAoGjB,MACC,CAAAtF,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,sBAEjFP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAASnD,qBAAuB,GACvClb,SAAWD,GAAUue,EAAY,IAAKD,EAAUnD,oBAAqBnb,IACrEG,YAAY,wBACZ6F,KAAM,EACNtQ,UAAU,kBAGG,OAAhBkC,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAASyJ,uBAAyB,GACzC9nB,SAAWD,GAAUue,EAAY,IAAKD,EAAUyJ,sBAAuB/nB,IACvEG,YAAY,+CACZ6F,KAAM,EACNtQ,UAAU,kBAGG,OAAhBkC,GACCxL,EAAAiB,IAAC0Y,GAAA,CACC/F,MAAOse,EAAS0J,uBAAyB,GACzC/nB,SAAWD,GAAUue,EAAY,IAAKD,EAAU0J,sBAAuBhoB,IACvEG,YAAY,wBACZ6F,KAAM,EACNtQ,UAAU,4BAMf,MACC,CAAA9I,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,qBAEjFP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAoC,iBAAtBse,EAASlD,SAAwBkD,EAASlD,SAAYlQ,MAAMma,QAAQ/G,EAASlD,UAAYkD,EAASlD,SAASlU,KAAK,MAAQ,GACtIjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUlD,SAAU1b,EAAEQ,OAAOF,QAC/DgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,kCAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAsC,iBAAxBse,EAAS2J,WAA0B3J,EAAS2J,WAAc/c,MAAMma,QAAQ/G,EAAS2J,YAAc3J,EAAS2J,WAAW/gB,KAAK,MAAQ,GAC9IjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAU2J,WAAYvoB,EAAEQ,OAAOF,QACjEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,qEAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAsC,iBAAxBse,EAAS4J,WAA0B5J,EAAS4J,WAAchd,MAAMma,QAAQ/G,EAAS4J,YAAc5J,EAAS4J,WAAWhhB,KAAK,MAAQ,GAC9IjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAU4J,WAAYxoB,EAAEQ,OAAOF,QACjEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,yCAMjB,MACC,CAAAvT,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,qBAEjFP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAqC,iBAAvBse,EAASpP,UAAyBoP,EAASpP,UAAahE,MAAMma,QAAQ/G,EAASpP,WAAaoP,EAASpP,UAAUhI,KAAK,MAAQ,GAC1IjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAUpP,UAAWxP,EAAEQ,OAAOF,QAChEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,2CAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAuC,iBAAzBse,EAAS6J,YAA2B7J,EAAS6J,YAAejd,MAAMma,QAAQ/G,EAAS6J,aAAe7J,EAAS6J,YAAYjhB,KAAK,MAAQ,GAClJjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAU6J,YAAazoB,EAAEQ,OAAOF,QAClEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,2FAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAuC,iBAAzBse,EAAS8J,YAA2B9J,EAAS8J,YAAeld,MAAMma,QAAQ/G,EAAS8J,aAAe9J,EAAS8J,YAAYlhB,KAAK,MAAQ,GAClJjH,SAAWP,GAAM6e,EAAY,IAAKD,EAAU8J,YAAa1oB,EAAEQ,OAAOF,QAClEgG,KAAM,EACNtQ,UAAU,+KACVyK,YAAY,oDAIlB9T,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QA3mBgB,KAClB,IAKF,MAAM2wB,EAAgBR,IAItBpK,EAAO4K,SACAppB,GAED2E,MAAA3E,EAAMa,SAAW,+BACzB,GA8lBMU,SAAU8J,EACV5U,UAAW,+IACT4U,EAAW,gCAAkC,IAG9C1d,WAEGP,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,iFAAqF,aAKpGrJ,EAAAA,KAAA0P,EAAAA,SAAA,CAAAnP,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IAAE,WAIhBvqB,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,2JACX9I,SAAA,cCntBH07B,GAAsD,EAC1DC,cACA9K,SACAC,WACApT,YAAW,MAEX,MAAO1S,EAAagmB,GAAkB/vB,WAAwB,OACvDywB,EAAUC,GAAe1wB,WAAgC,CAC9DoL,MAAO,GACPC,QAAS,GACTC,QAAS,GACTT,YAAa,GACbC,cAAe,GACfC,cAAe,GACfzL,MAAO,UACPuhB,MAAO,IAGT1gB,EAAAA,UAAU,KACJu6B,GACUhK,EAAA,CACVtlB,MAAOsvB,EAAYtvB,MACnBC,QAASqvB,EAAYrvB,SAAW,GAChCC,QAASovB,EAAYpvB,SAAW,GAChCT,YAAa6vB,EAAY7vB,aAAe,GACxCC,cAAe4vB,EAAY5vB,eAAiB,GAC5CC,cAAe2vB,EAAY3vB,eAAiB,GAC5CzL,MAAOo7B,EAAYp7B,MACnBuhB,MAAO6Z,EAAY7Z,SAGtB,CAAC6Z,IAEE,MAMAC,EAAe,CAACC,EAAoCzoB,KAC5Cue,EAAAjT,QAAcA,EAAMmd,CAACA,GAAQzoB,MAIzC,SAAA3T,KAAC,MAAI,CAAAqJ,UAAU,4FACb9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,6BACX9I,SAAA27B,EAAc,UAAY,cAG5Bl8B,EAAAA,KAAA,OAAA,CAAKmT,SAhBYE,IACpBA,EAAEC,iBAEF8d,EAAOa,IAayB5oB,UAAU,YAEtC9I,SAAA,CAAAS,EAAAA,IAACqc,GAAa,CAAAC,eAAgB/R,EAAaqI,SAAU2d,WAGpD,MACC,CAAAhxB,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,iCAAiC9I,SAAA,CAAA,MAC5B,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASrlB,MAChBgH,SAAWP,GAAM8oB,EAAa,QAAS9oB,EAAEQ,OAAOF,OAChDtK,UAAU,kIACVyK,YAAY,cACZC,UAAQ,IAGK,OAAhBxI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASplB,SAAW,GAC3B+G,SAAWP,GAAM8oB,EAAa,UAAW9oB,EAAEQ,OAAOF,OAClDtK,UAAU,kIACVyK,YAAY,gCAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAASnlB,SAAW,GAC3B8G,SAAWP,GAAM8oB,EAAa,UAAW9oB,EAAEQ,OAAOF,OAClDtK,UAAU,kIACVyK,YAAY,2BAMjB,MACC,CAAAvT,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,iCAAiC9I,SAAA,CAAA,OAEhDP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS5lB,YAChBuH,SAAWP,GAAM8oB,EAAa,cAAe9oB,EAAEQ,OAAOF,OACtDtK,UAAU,kIACVsQ,KAAM,EACN7F,YAAY,uBAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS3lB,eAAiB,GACjCsH,SAAWP,GAAM8oB,EAAa,gBAAiB9oB,EAAEQ,OAAOF,OACxDtK,UAAU,kIACVsQ,KAAM,EACN7F,YAAY,wCAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS1lB,eAAiB,GACjCqH,SAAWP,GAAM8oB,EAAa,gBAAiB9oB,EAAEQ,OAAOF,OACxDtK,UAAU,kIACVsQ,KAAM,EACN7F,YAAY,iCAKjB,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,iCAAiC9I,SAAE,OACpDR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,QACLqP,MAAOse,EAASnxB,MAChB8S,SAAWP,GAAM8oB,EAAa,QAAS9oB,EAAEQ,OAAOF,OAChDtK,UAAU,+EAIb,MACC,CAAA9I,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,iCAAiC9I,SAAU,eAC5DR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACLqP,MAAOse,EAAS5P,MAChBzO,SAAWP,GAAM8oB,EAAa,QAASlS,SAAS5W,EAAEQ,OAAOF,QAAU,GACnEtK,UAAU,kIACV8pB,IAAI,MAELnyB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,2CAGFP,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL6P,SAAU8J,EACV5U,UAAU,sGAET9I,WAAW,UAAY,OAE1BR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,kFACX9I,SAAA,iBClKL87B,GAAsC,EAC1CH,cACA9K,SACAC,WACApT,YAAW,MAEX,MAAO1S,EAAagmB,GAAkB/vB,WAAwB,OACvDywB,EAAUC,GAAe1wB,WAAwB,CACtDyK,KAAM,GACNC,OAAQ,GACRC,OAAQ,GACRmF,MAAO,GACP/D,KAAM,cACNlB,YAAa,GACbC,cAAe,GACfC,cAAe,GACf8V,MAAO,IAGT1gB,EAAAA,UAAU,KACJu6B,GACUhK,EAAA,CACVjmB,KAAMiwB,EAAYjwB,KAClBC,OAAQgwB,EAAYhwB,QAAU,GAC9BC,OAAQ+vB,EAAY/vB,QAAU,GAC9BmF,MAAO4qB,EAAY5qB,MACnB/D,KAAM2uB,EAAY3uB,KAClBlB,YAAa6vB,EAAY7vB,aAAe,GACxCC,cAAe4vB,EAAY5vB,eAAiB,GAC5CC,cAAe2vB,EAAY3vB,eAAiB,GAC5C8V,MAAO6Z,EAAY7Z,SAGtB,CAAC6Z,IAEE,MAKAC,EAAe,CAACC,EAA4BzoB,KACpCue,EAAAjT,QAAcA,EAAMmd,CAACA,GAAQzoB,MAIzC,SAAA3T,KAAC,MAAI,CAAAqJ,UAAU,4FACb9I,SAAA,CAAAS,MAAC,KAAG,CAAAqI,UAAU,6BACX9I,SAAA27B,EAAc,QAAU,YAG1Bl8B,EAAAA,KAAA,OAAA,CAAKmT,SAfYE,IACpBA,EAAEC,iBACF8d,EAAOa,IAayB5oB,UAAU,YAEtC9I,SAAA,CAAAS,EAAAA,IAACqc,GAAa,CAAAC,eAAgB/R,EAAaqI,SAAU2d,WAGpD,MACC,CAAAhxB,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,iCAAiC9I,SAAA,CAAA,MAC5B,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QAC5DP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAShmB,KAChB2H,SAAWP,GAAM8oB,EAAa,OAAQ9oB,EAAEQ,OAAOF,OAC/CtK,UAAU,kIACVyK,YAAY,wBACZC,UAAQ,IAGK,OAAhBxI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS/lB,QAAU,GAC1B0H,SAAWP,GAAM8oB,EAAa,SAAU9oB,EAAEQ,OAAOF,OACjDtK,UAAU,kIACVyK,YAAY,6BAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS9lB,QAAU,GAC1ByH,SAAWP,GAAM8oB,EAAa,SAAU9oB,EAAEQ,OAAOF,OACjDtK,UAAU,kIACVyK,YAAY,oCAMjB,MACC,CAAAvT,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,iCAAiC9I,SAAA,CAAA,cAEhDP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS5lB,aAAe,GAC/BuH,SAAWP,GAAM8oB,EAAa,cAAe9oB,EAAEQ,OAAOF,OACtDtK,UAAU,kIACVsQ,KAAM,EACN7F,YAAY,kBAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS3lB,eAAiB,GACjCsH,SAAWP,GAAM8oB,EAAa,gBAAiB9oB,EAAEQ,OAAOF,OACxDtK,UAAU,kIACVsQ,KAAM,EACN7F,YAAY,oCAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,WAAA,CACC2S,MAAOse,EAAS1lB,eAAiB,GACjCqH,SAAWP,GAAM8oB,EAAa,gBAAiB9oB,EAAEQ,OAAOF,OACxDtK,UAAU,kIACVsQ,KAAM,EACN7F,YAAY,0BAOjB,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,iCAAiC9I,SAAG,UACrDP,KAAC,MAAI,CAAAqJ,UAAU,+BACb9I,SAAA,GAACS,IAAA,MAAA,CAAIqI,UAAU,2CACb9I,SAACS,EAAAA,IAAAgJ,GAAA,CAAYC,SAAUgoB,EAAS1kB,KAAMrD,KAAM,OAE7ClJ,EAAAA,IAAA,OAAA,CAAKqI,UAAU,2CAA2C9I,SAAI,YAEjER,EAAAC,KAAC,SAAA,CACC2T,MAAOse,EAAS1kB,KAChBqG,SAAWP,GAAM8oB,EAAa,OAAQ9oB,EAAEQ,OAAOF,OAC/CtK,UAAU,kIAEV9I,SAAA,GAACP,KAAA,WAAA,CAASuP,MAAM,WACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAU,eACtCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAU,eACtCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,MAAMpT,SAAC,MACpBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAG,QAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAE,OAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,OAAOpT,SAAE,OACtBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,QAAQpT,SAAG,QACxBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,gBAEjCP,KAAC,WAAS,CAAAuP,MAAM,gBACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAO,YAClCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,aAAapT,SAAM,WAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAO,YAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAO,YAClCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAO,YAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,gBAEjCP,KAAC,WAAS,CAAAuP,MAAM,SACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,aAAapT,SAAQ,aAClCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAO,YAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAU,eACtCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,gBAEjCP,KAAC,WAAS,CAAAuP,MAAM,aACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAS,cACpCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAO,YAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,gBAAgBpT,SAAY,iBACzCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAO,YAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAU,oBAEzCP,KAAC,WAAS,CAAAuP,MAAM,QACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,QAAQpT,SAAG,QACxBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,qBAAqBpT,SAAO,iBAE5CP,KAAC,WAAS,CAAAuP,MAAM,KACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,aAAapT,SAAK,UAC/BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAG,QAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,gBAAgBpT,SAAG,QAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,kBAAkBpT,SAAG,QAClCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAM,WAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAG,QACzBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAE,YAE9BP,KAAC,WAAS,CAAAuP,MAAM,UACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAK,UACjCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,aAAapT,SAAG,QAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAE,OAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,kBAAkBpT,SAAO,YACtCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAK,UACjCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,kBAAkBpT,SAAK,eAEvCP,KAAC,WAAS,CAAAuP,MAAM,KACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAK,UAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAI,SAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAI,SAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAI,SAC/BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAI,SAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,aAAapT,SAAI,SAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,aAAapT,SAAI,SAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAI,SAC/BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAI,SAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAI,SAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAI,SAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAI,SAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAI,SAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAI,SAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,QAAQpT,SAAI,SACzBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAI,SAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAK,UAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAI,cAElCP,KAAC,WAAS,CAAAuP,MAAM,KACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAM,WAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAM,WAClCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,QAAQpT,SAAO,YAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAK,UAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAK,UAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAO,YAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAK,UAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAO,YACnCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,gBAEjCP,KAAC,WAAS,CAAAuP,MAAM,UACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAE,OAC3BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAE,OAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAE,OAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,gBAAgBpT,SAAQ,aACrCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAE,OAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAO,YAC/BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAE,OACzBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAE,OAC1BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,SAASpT,SAAK,eAE9BP,KAAC,WAAS,CAAAuP,MAAM,UACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,eAAepT,SAAE,OAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAK,UAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,QAAQpT,SAAE,OACvBS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,iBAAiBpT,SAAE,OAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAI,SAC/BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAE,YAEhCP,KAAC,WAAS,CAAAuP,MAAM,KACdhP,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,cAAcpT,SAAK,UAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,QAAQpT,SAAQ,aAC7BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,WAAWpT,SAAM,WAC9BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,YAAYpT,SAAO,YAChCS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,UAAUpT,SAAK,UAC5BS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,iBAAiBpT,SAAO,4BAK3C,MACC,CAAAA,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,iCAAiC9I,SAAU,eAC5DR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACLqP,MAAOse,EAAS5P,MAChBzO,SAAWP,GAAM8oB,EAAa,QAASlS,SAAS5W,EAAEQ,OAAOF,QAAU,GACnEtK,UAAU,kIACV8pB,IAAI,MAELnyB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,yCAGFP,KAAC,MAAI,CAAAqJ,UAAU,aACb9I,SAAA,CAAAR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL6P,SAAU8J,EACV5U,UAAU,sGAET9I,WAAW,UAAY,OAE1BR,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACThoB,UAAU,kFACX9I,SAAA,iBCnTL+7B,GAAoC,EACxCnc,OACAiR,SACAC,WACApT,YAAW,MAEX,MAAO1S,EAAagmB,GAAkB/vB,WAAwB,OACvDywB,EAAUC,GAAe1wB,EAAAA,SAC9B2e,EACI,CACElU,KAAMkU,EAAKlU,KACXC,OAAQiU,EAAKjU,OACbC,OAAQgU,EAAKhU,OACbkW,MAAOlC,EAAKkC,OAAS,GAEvB,CACEpW,KAAM,GACNC,OAAQ,GACRC,OAAQ,GACRkW,MAAO,IAgBZriB,OAAAA,EAAAA,KAAA,OAAA,CAAKmT,SAZcE,IACpBA,EAAEC,iBAEG2e,EAAShmB,KAAKmN,OAKnBgY,EAAOa,GAJL1a,MAAM,oBAQsBlO,UAAU,YAEtC9I,SAAA,CAAAS,EAAAA,IAACqc,GAAa,CAAAC,eAAgB/R,EAAaqI,SAAU2d,WAGpD,MACC,CAAAhxB,SAAA,GAACP,KAAA,QAAA,CAAMqJ,UAAU,kEAAkE9I,SAAA,CAAA,WACxD,OAAhBgL,GAAwBvK,EAAAA,IAAC,OAAK,CAAAqI,UAAU,eAAe9I,SAAC,QACjEP,KAAC,OAAK,CAAAqJ,UAAU,6BAA6B9I,SAAA,CAAA,IACzB,OAAhBgL,EAAuB,WAA6B,OAAhBA,EAAuB,eAAiB,WAAW,UAG5E,OAAhBA,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAShmB,KAChB2H,SAAWP,GAAM6e,EAAY,IAAKD,EAAUhmB,KAAMoH,EAAEQ,OAAOF,QAC3DtK,UAAU,sKACVyK,YAAY,qBACZC,UAAQ,IAGK,OAAhBxI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS/lB,QAAU,GAC1B0H,SAAWP,GAAM6e,EAAY,IAAKD,EAAU/lB,OAAQmH,EAAEQ,OAAOF,QAC7DtK,UAAU,sKACVyK,YAAY,sCAGC,OAAhBvI,GACCxL,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLqP,MAAOse,EAAS9lB,QAAU,GAC1ByH,SAAWP,GAAM6e,EAAY,IAAKD,EAAU9lB,OAAQkH,EAAEQ,OAAOF,QAC7DtK,UAAU,sKACVyK,YAAY,mCAKjB,MACC,CAAAvT,SAAA,CAACS,EAAAA,IAAA,QAAA,CAAMqI,UAAU,kEAAkE9I,SAEnF,eACAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,SACLqP,MAAOse,EAAS5P,MAChBzO,SAAWP,GAAM6e,EAAY,IAAKD,EAAU5P,MAAO4H,SAAS5W,EAAEQ,OAAOF,QAAU,IAC/EtK,UAAU,sKACV8pB,IAAI,MAELnyB,EAAAA,IAAA,IAAA,CAAEqI,UAAU,gDAAgD9I,SAE7D,gDAGFP,KAAC,MAAI,CAAAqJ,UAAU,kBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCsE,KAAK,SACL6P,SAAU8J,IAAagU,EAAShmB,KAAKmN,OACrC/P,UAAU,mMAEV9I,SAAA,CAAAR,EAAAiB,IAACspB,GAAO,IACPrM,EAAW,UAAY,QAE1Ble,EAAAiB,IAAC,SAAA,CACCsD,KAAK,SACL+G,QAASgmB,EACTld,SAAU8J,EACV5U,UAAU,+IACX9I,SAAA,cCtGHg8B,GAA4D,EAChEC,gBACAC,oBACAC,WACAC,0BAEA,MAAMC,EAA6B,IAC1BJ,EAAc7d,OAAOke,IAAMA,EAAEC,MAAMv1B,OAI1C,SAAAvH,KAAC,MAAI,CAAAqJ,UAAU,WACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAASqxB,EACTrzB,UAAU,4GAEV9I,SAAA,CAAAR,EAAAiB,IAAC+7B,GAAO,IAAE,KAETH,IAA+B,GAC9B57B,EAAAA,IAAC,QAAKqI,UAAU,+GACb9I,kBAKNk8B,SACE,MAAI,CAAApzB,UAAU,sIACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,MACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,mDAAmD9I,SAEjE,OAC0B,IAAzBi8B,EAAcj1B,SACbvG,IAAC,IAAE,CAAAqI,UAAU,2CAA2C9I,SAAA,yBAIvD,MAAI,CAAA8I,UAAU,YACZ9I,SAAA,CAAAi8B,EAAcvP,MAAM,EAAG,GAAG/hB,IAAK8xB,GAC9Bj9B,EAAAC,KAAC,MAAA,CAECqL,QAAS,IAAM,MAAAsxB,OAAA,EAAAA,EAAsBK,EAAa9pB,IAClD7J,UAAW,wEACR2zB,EAAaF,KAEV,4GADA,mHAINv8B,SAAA,CAAAS,EAAAA,IAAC,IAAE,CAAAqI,UAAU,wCACV9I,SAAAy8B,EAAavpB,UAEhBzS,EAAAA,IAAC,IAAE,CAAAqI,UAAU,gDACV9I,SAAA,IAAI4F,KAAK62B,EAAahd,WAAWid,eAAe,aAZ9CD,EAAa9pB,KAgBrBspB,EAAcj1B,OAAS,GACrBvH,EAAAA,KAAA,IAAA,CAAEqJ,UAAU,0GAA0G9I,SAAA,CAAA,IACnHi8B,EAAcj1B,OAAS,EAAE,wBClEzC21B,GAAgD,EAAGC,cAAaC,YACpE,MAAM5Z,MAAEA,EAAA6Z,QAAOA,EAASld,KAAAA,GAASgd,GAG1BG,EAAgBC,GAAqB/7B,YAAS,GAWnD,SAAAxB,KAAC,MAAI,CAAAqJ,UAAU,OACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,4DAA4D9I,SAE1E,YACAP,KAAC,MAAI,CAAAqJ,UAAU,YAEb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACPgyB,EAAQG,UAAU,OAClBH,EAAQI,cAAc,IACtBF,GAAkB,GAClBF,EAAQK,oBAAoB,KAE9Br0B,UAAW,oEACQ,QAAjBma,EAAM7E,QAAqB6E,EAAMma,YAAena,EAAMoa,iBAElD,4EADA,iEAGPr9B,SAAA,CAAA,aACY68B,EAAM,OAInBr9B,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACPgyB,EAAQG,UAAU,aAClBH,EAAQI,cAAc,IACtBF,GAAkB,GAClBF,EAAQK,oBAAoB,KAE9Br0B,UAAW,oEACQ,cAAjBma,EAAM7E,OACF,wEACA,6EAEPpe,SAAA,eAKDR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACPgyB,EAAQG,UAAU,YAClBH,EAAQI,cAAc,IACtBF,GAAkB,IAEpBl0B,UAAW,oEACQ,aAAjBma,EAAM7E,OACF,wEACA,6EAEPpe,SAAA,gBAKiB,aAAjBijB,EAAM7E,QACJ5e,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,YACb9I,SAAAR,EAAAC,KAAC,SAAA,CACC2T,MAAO6P,EAAMoa,iBACbhqB,SAAWP,GAAMgqB,EAAQK,oBAAoBrqB,EAAEQ,OAAOF,OACtDtK,UAAU,uIAEV9I,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,GAAGpT,SAAO,YACvB4f,EAAKsR,WAAWvmB,IAAKuB,GACnBzL,EAAAA,IAAA,SAAA,CAAsB2S,MAAOlH,EAC3BlM,SADUkM,GAAAA,SASrB1M,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMkyB,GAAmBD,GAClCj0B,UAAW,oEACTi0B,EACI,oEACA,6EAEP/8B,SAAA,aAKA+8B,KACCt8B,IAAC,MAAI,CAAAqI,UAAU,YACb9I,SAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLwP,YAAY,qBACZH,MAAO6P,EAAMma,WACb/pB,SAAWP,GAAMgqB,EAAQI,cAAcpqB,EAAEQ,OAAOF,OAChDtK,UAAU,2LAMG,QAAjBma,EAAM7E,QAAoB6E,EAAMma,YAAcna,EAAMoa,mBACpD79B,EAAAiB,IAAC,SAAA,CACCqK,QA7Gc,KACtBgyB,EAAQG,UAAU,OAClBH,EAAQI,cAAc,IACtBJ,EAAQK,oBAAoB,IAC5BH,GAAkB,IA0GVl0B,UAAU,0IACX9I,SAAA,qBCtHLs9B,GAA4D,EAAGV,cAAaC,YAChF,MAAM5Z,MAAEA,EAAA6Z,QAAOA,EAASld,KAAAA,GAASgd,GAG1BW,EAAsBC,GAA2Bv8B,YAAS,GAY/D,SAAAxB,KAAC,MAAI,CAAAqJ,UAAU,OACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,4DAA4D9I,SAE1E,YACAP,KAAC,MAAI,CAAAqJ,UAAU,YAEb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACPgyB,EAAQG,UAAU,OAClBH,EAAQI,cAAc,IACtBM,GAAwB,GACxBV,EAAQW,mBAAmB,IAC3BX,EAAQY,gBAAgB,KAE1B50B,UAAW,oEACQ,QAAjBma,EAAM7E,QAAqB6E,EAAMma,YAAena,EAAM0a,iBAAoB1a,EAAM2a,aAE5E,4EADA,iEAGP59B,SAAA,CAAA,aACY68B,EAAM,OAInBr9B,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACPgyB,EAAQG,UAAU,WAClBH,EAAQI,cAAc,IACtBM,GAAwB,GACxBV,EAAQY,gBAAgB,KAE1B50B,UAAW,oEACQ,YAAjBma,EAAM7E,OACF,oEACA,6EAEPpe,SAAA,cAKiB,YAAjBijB,EAAM7E,QACJ5e,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,YACb9I,SAAAR,EAAAC,KAAC,SAAA,CACC2T,MAAO6P,EAAM0a,gBACbtqB,SAAWP,GAAMgqB,EAAQW,mBAAmB3qB,EAAEQ,OAAOF,OACrDtK,UAAU,uIAEV9I,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,GAAGpT,SAAK,UACrB4f,EAAKie,UAAUlzB,IAAKglB,GAClBlvB,EAAAA,IAAA,SAAA,CAAqB2S,MAAOuc,EAC1B3vB,SADU2vB,GAAAA,SASrBnwB,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACPgyB,EAAQG,UAAU,QAClBH,EAAQI,cAAc,IACtBM,GAAwB,GACxBV,EAAQW,mBAAmB,KAE7B30B,UAAW,oEACQ,SAAjBma,EAAM7E,OACF,wEACA,6EAEPpe,SAAA,cAKiB,SAAjBijB,EAAM7E,QACJ5e,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,YACb9I,SAAAR,EAAAC,KAAC,SAAA,CACC2T,MAAO6P,EAAM2a,aACbvqB,SAAWP,GAAMgqB,EAAQY,gBAAgB5qB,EAAEQ,OAAOF,OAClDtK,UAAU,uIAEV9I,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,GAAGpT,SAAK,UACrB4f,EAAKke,MAAMnzB,IAAKozB,UACd,SAAA,CAAkB3qB,MAAO2qB,EACvB/9B,SAAA,CAAA+9B,EAAK,MADKA,SASrBv+B,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAM0yB,GAAyBD,GACxCz0B,UAAW,oEACTy0B,EACI,oEACA,6EAEPv9B,SAAA,aAKAu9B,KACC98B,IAAC,MAAI,CAAAqI,UAAU,YACb9I,SAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLwP,YAAY,mBACZH,MAAO6P,EAAMma,WACb/pB,SAAWP,GAAMgqB,EAAQI,cAAcpqB,EAAEQ,OAAOF,OAChDtK,UAAU,2LAMG,QAAjBma,EAAM7E,QAAoB6E,EAAMma,YAAcna,EAAM0a,iBAAmB1a,EAAM2a,eAC7Ep+B,EAAAiB,IAAC,SAAA,CACCqK,QAlIc,KACtBgyB,EAAQG,UAAU,OAClBH,EAAQI,cAAc,IACtBJ,EAAQW,mBAAmB,IAC3BX,EAAQY,gBAAgB,IACxBF,GAAwB,IA8HhB10B,UAAU,0IACX9I,SAAA,qBC3ILg+B,GAAsD,EAAGpB,cAAaC,YAC1E,MAAM5Z,MAAEA,EAAA6Z,QAAOA,EAASld,KAAAA,GAASgd,GAG1BqB,EAAmBC,GAAwBj9B,YAAS,GAWzD,SAAAxB,KAAC,MAAI,CAAAqJ,UAAU,OACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,4DAA4D9I,SAE1E,cACAP,KAAC,MAAI,CAAAqJ,UAAU,YAEb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACPgyB,EAAQG,UAAU,OAClBH,EAAQI,cAAc,IACtBgB,GAAqB,GACrBpB,EAAQK,oBAAoB,KAE9Br0B,UAAW,oEACQ,QAAjBma,EAAM7E,QAAqB6E,EAAMma,YAAena,EAAMoa,iBAElD,4EADA,iEAGPr9B,SAAA,CAAA,eACc68B,EAAM,OAIrBr9B,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACPgyB,EAAQG,UAAU,YAClBH,EAAQI,cAAc,IACtBgB,GAAqB,IAEvBp1B,UAAW,oEACQ,aAAjBma,EAAM7E,OACF,wEACA,6EAEPpe,SAAA,iBAKiB,aAAjBijB,EAAM7E,QACJ5e,EAAAiB,IAAA,MAAA,CAAIqI,UAAU,YACb9I,SAAAR,EAAAC,KAAC,SAAA,CACC2T,MAAO6P,EAAMoa,iBACbhqB,SAAWP,GAAMgqB,EAAQK,oBAAoBrqB,EAAEQ,OAAOF,OACtDtK,UAAU,uIAEV9I,SAAA,CAACS,EAAAA,IAAA,SAAA,CAAO2S,MAAM,GAAGpT,SAAO,YACvB4f,EAAKsR,WAAWvmB,IAAKuB,GACnBzL,EAAAA,IAAA,SAAA,CAAsB2S,MAAOlH,EAC3BlM,SADUkM,GAAAA,SASrB1M,EAAAiB,IAAC,SAAA,CACCqK,QAAS,KACPgyB,EAAQG,UAAU,YAClBH,EAAQI,cAAc,IACtBgB,GAAqB,GACrBpB,EAAQK,oBAAoB,KAE9Br0B,UAAW,oEACQ,aAAjBma,EAAM7E,OACF,wEACA,6EAEPpe,SAAA,eAKDR,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMozB,GAAsBD,GACrCn1B,UAAW,oEACTm1B,EACI,oEACA,6EAEPj+B,SAAA,eAKAi+B,KACCx9B,IAAC,MAAI,CAAAqI,UAAU,YACb9I,SAAAR,EAAAiB,IAAC,QAAA,CACCsD,KAAK,OACLwP,YAAY,qBACZH,MAAO6P,EAAMma,WACb/pB,SAAWP,GAAMgqB,EAAQI,cAAcpqB,EAAEQ,OAAOF,OAChDtK,UAAU,2LAMG,QAAjBma,EAAM7E,QAAoB6E,EAAMma,YAAcna,EAAMoa,mBACpD79B,EAAAiB,IAAC,SAAA,CACCqK,QA7Gc,KACtBgyB,EAAQG,UAAU,OAClBH,EAAQI,cAAc,IACtBJ,EAAQK,oBAAoB,IAC5Be,GAAqB,IA0Gbp1B,UAAU,0IACX9I,SAAA,qBCvHLm+B,GAA4C,EAChDC,wBACAC,gCAYE5+B,KAAC,MAAI,CAAAqJ,UAAU,YACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,4DAA4D9I,SAE1E,iBAEC,MAAI,CAAA8I,UAAU,YACZ9I,SAhBiB,CACtB,CAAE2S,GAAI,UAAW3D,MAAO,WAAYlD,YAAa,aACjD,CAAE6G,GAAI,aAAc3D,MAAO,WAAYlD,YAAa,YACpD,CAAE6G,GAAI,MAAO3D,MAAO,YAAalD,YAAa,aAC9C,CAAE6G,GAAI,SAAU3D,MAAO,YAAalD,YAAa,eACjD,CAAE6G,GAAI,YAAa3D,MAAO,WAAYlD,YAAa,sBACnD,CAAE6G,GAAI,WAAY3D,MAAO,WAAYlD,YAAa,YAU7BnB,IAAK8uB,GACpBj6B,EAAAiB,IAAC,SAAA,CAECqK,QAAS,IAAMuzB,EAAyB5E,EAAO9mB,IAC/C7J,UAAW,oEACTs1B,IAA0B3E,EAAO9mB,GAC7B,gEACA,6EAGN3S,SAAAR,EAAAC,KAAC,MAAI,CAAAqJ,UAAU,gBACb9I,SAAA,CAAAS,EAAAA,IAAC,OAAK,CAAAqI,UAAU,cAAe9I,SAAAy5B,EAAOzqB,QACrCvO,EAAAA,IAAA,OAAA,CAAKqI,UAAU,kDACb9I,WAAO8L,kBAXP2tB,EAAO9mB,OAmBjByrB,GACC5+B,EAAAiB,IAAC,SAAA,CACCqK,QAAS,IAAMuzB,EAAyB,MACxCv1B,UAAU,4IACX9I,SAAA,qBCfHs+B,GAA4C,EAChDC,YACAC,eACAJ,wBACAC,2BACAI,SACAC,gBACAC,cACAC,oBACAC,0BAGG,MAAI,CAAA/1B,UAAU,mFACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,eACb9I,SAAA,CAACS,EAAAA,IAAA,KAAA,CAAGqI,UAAU,2DAA2D9I,SAEzE,YAGAS,IAAC,MAAI,CAAAqI,UAAU,OACb9I,SAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACP0zB,EAAa,YACbH,EAAyB,OAE3Bv1B,UAAW,gGACK,aAAdy1B,GAAsD,OAA1BH,EACxB,yBACA,6EAGNp+B,SAAA,CAACS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,UAAU9I,SAAE,OAAO,kBAMvCP,KAAC,MAAI,CAAAqJ,UAAU,iBACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAM0zB,EAAa,SAC5B11B,UAAW,4FACK,UAAdy1B,EACI,wEACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAQ,aACbS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,8DACb9I,WAAO8+B,WAIZt/B,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACPuzB,EAAyB,MACzBG,EAAa,mBAEf11B,UAAW,4FACK,mBAAdy1B,EACI,4DACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAQ,mBACb,OAAK,CAAA8I,UAAU,8DACb9I,SAAAy+B,EAAOM,gBAAkB,OAI9Bv/B,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACPuzB,EAAyB,MACzBG,EAAa,mBAEf11B,UAAW,4FACK,mBAAdy1B,EACI,4DACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAS,oBACd,OAAK,CAAA8I,UAAU,8DACb9I,SAAAy+B,EAAOO,gBAAkB,OAI9Bx/B,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAM0zB,EAAa,eAC5B11B,UAAW,4FACK,gBAAdy1B,EACI,oEACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAQ,aACbS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,8DACb9I,WAAOi/B,iBAIZz/B,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAM0zB,EAAa,YAC5B11B,UAAW,4FACK,aAAdy1B,EACI,wEACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAU,eACfS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,8DACb9I,WAAOk/B,cAIZ1/B,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAM0zB,EAAa,YAC5B11B,UAAW,4FACK,aAAdy1B,EACI,4DACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAS,cACdS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,8DACb9I,WAAOm/B,cAIZ3/B,EAAAC,KAAC,SAAA,CACCqL,QAAS,IAAM0zB,EAAa,UAC5B11B,UAAW,4FACK,WAAdy1B,EACI,wEACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAO,YACZS,EAAAA,IAAA,OAAA,CAAKqI,UAAU,8DACb9I,WAAOkiB,YAIZ1iB,EAAAC,KAAC,SAAA,CACCqL,QAAS,KACPuzB,EAAyB,MACzBG,EAAa,eAEf11B,UAAW,4FACK,eAAdy1B,EACI,wEACA,6EAGNv+B,SAAA,GAAAS,IAAC,QAAKT,SAAU,qBACf,OAAK,CAAA8I,UAAU,8DACb9I,SAAAy+B,EAAOvN,YAAc,UAMb,UAAdqN,GACC/+B,EAAAiB,IAACk8B,GAAA,CACCC,YAAa+B,EACb9B,MAAO4B,EAAOK,QAIH,gBAAdP,GACC/+B,EAAAiB,IAAC68B,GAAA,CACCV,YAAagC,EACb/B,MAAO4B,EAAOQ,cAIH,aAAdV,GACC/+B,EAAAiB,IAACu9B,GAAA,CACCpB,YAAaiC,EACbhC,MAAO4B,EAAOS,WAIH,aAAdX,GACC/+B,EAAAiB,IAAC09B,GAAA,CACCC,wBACAC,mCAKH,MAAI,CAAAv1B,UAAU,0DACb9I,SAACP,EAAAA,KAAA,MAAA,CAAIqJ,UAAU,YACb9I,SAAA,CAAAR,EAAAC,KAAC,SAAA,CACCqL,QAAS4zB,EACT51B,UAAU,0JAEV9I,SAAA,GAAAS,IAAC,QAAKT,SAAE,OAAO,gBAIjBP,KAAC,MAAI,CAAAqJ,UAAU,uDAAuD9I,SAAA,CAAA,cAAA,IACrD4F,MAAOw5B,mBAAmB"}