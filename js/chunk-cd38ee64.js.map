{"version":3,"file":"chunk-cd38ee64.js","sources":["../../src/services/api.ts","../../src/contexts/AuthContext.tsx","../../src/utils/dateUtils.ts","../../src/utils/videoUtils.tsx","../../src/components/admin/DashboardHome.tsx","../../src/components/admin/BookManager.tsx","../../src/components/admin/VideoLearningManager.tsx","../../src/utils/categoryUtils.ts","../../src/components/admin/VideoPlaylistManager.tsx","../../src/components/admin/ExperienceManager.tsx","../../src/components/admin/ProjectManager.tsx","../../src/components/admin/MessageDetail.tsx","../../src/components/admin/MessageManager.tsx","../../src/components/admin/SortableCategoryCard.tsx","../../src/components/admin/SortableSkillItem.tsx","../../src/components/admin/SkillsManager.tsx","../../src/components/admin/CategoryManager.tsx","../../src/admin/settings/constants.ts","../../src/admin/settings/utils.ts","../../src/admin/settings/hooks/useSettingsForm.ts","../../src/admin/settings/components/SettingField.tsx","../../src/admin/settings/components/SettingsSection.tsx","../../src/admin/SiteSettingsEditor.tsx","../../src/pages/admin/Dashboard.tsx"],"sourcesContent":["import axios from 'axios'\r\nimport {\r\n  // ì¸ì¦ ê´€ë ¨ íƒ€ì…\r\n  LoginRequest,\r\n  LoginResponse,\r\n  VerifyResponse,\r\n  LogoutResponse,\r\n  // Book ê´€ë ¨ íƒ€ì…\r\n  Book,\r\n  BookFormData,\r\n  BookUpdateData,\r\n  LearningFormData,\r\n  // Category ê´€ë ¨ íƒ€ì…\r\n  Category,\r\n  CategoryFormData,\r\n  CategoryUsage,\r\n  // VideoLearning ê´€ë ¨ íƒ€ì…\r\n  VideoLearning,\r\n  VideoLearningFormData,\r\n  // VideoPlaylist ê´€ë ¨ íƒ€ì…\r\n  VideoPlaylist,\r\n  VideoPlaylistFormData,\r\n  PlaylistVideo,\r\n  PlaylistVideoFormData,\r\n  // Experience ê´€ë ¨ íƒ€ì…\r\n  Experience,\r\n  ExperienceFormData,\r\n  ExperienceUpdateData,\r\n  // Project ê´€ë ¨ íƒ€ì…\r\n  Project,\r\n  ProjectFormData,\r\n  ProjectUpdateData,\r\n  // Skill ê´€ë ¨ íƒ€ì…\r\n  Skill,\r\n  SkillCategory,\r\n  SkillFormData,\r\n  SkillCategoryFormData,\r\n  // Settings ê´€ë ¨ íƒ€ì…\r\n  SiteSettings,\r\n  SettingsUpdateData,\r\n  // Contact ê´€ë ¨ íƒ€ì…\r\n  ContactFormData,\r\n  ContactResponse,\r\n} from '../types'\r\n\r\n// í™˜ê²½ ë³€ìˆ˜ì—ì„œ API URL ê°€ì ¸ì˜¤ê¸° (ê°œë°œ/ìš´ì˜ í™˜ê²½ ëŒ€ì‘)\r\n// Viteì—ì„œëŠ” import.meta.envë¥¼ ì‚¬ìš©\r\n// ê°œë°œ í™˜ê²½ì—ì„œëŠ” Vite í”„ë¡ì‹œ ì‚¬ìš© (/api), í”„ë¡œë•ì…˜ì—ì„œëŠ” ì§ì ‘ ì—°ê²°\r\nconst API_BASE_URL = (import.meta.env.VITE_API_URL as string) || \r\n  (import.meta.env.DEV ? '/api' : 'https://choifolio-github-io-backend.onrender.com/api')\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  withCredentials: true, // HttpOnly ì¿ í‚¤ë¥¼ ìœ„í•œ credentials í¬í•¨\r\n  timeout: 30000, // 30ì´ˆ íƒ€ì„ì•„ì›ƒ\r\n})\r\n\r\n// HttpOnly ì¿ í‚¤ ì‚¬ìš©ìœ¼ë¡œ í† í° ì¸í„°ì…‰í„° ì œê±°\r\n// ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ì¿ í‚¤ë¥¼ í¬í•¨í•˜ì—¬ ì „ì†¡\r\n\r\n// Auth API - íƒ€ì… ì•ˆì •ì„± ê°•í™”\r\nexport const authAPI = {\r\n  login: (username: string, password: string) =>\r\n    api.post<LoginResponse>('/auth/login', { username, password } as LoginRequest),\r\n  verify: () => api.post<VerifyResponse>('/auth/verify'), // POST ë©”ì„œë“œë¡œ ìˆ˜ì • (ë°±ì—”ë“œì™€ ì¼ì¹˜)\r\n  logout: () => api.post<LogoutResponse>('/auth/logout'),\r\n}\r\n\r\n// Books API - íƒ€ì… ì•ˆì •ì„± ê°•í™” (ê°œì„ ëœ UpdateData íƒ€ì… ì‚¬ìš©)\r\nexport const booksAPI = {\r\n  getAll: () => api.get<{ data: Book[] }>('/books'),\r\n  getById: (id: string) => api.get<Book>(`/books/${id}`),\r\n  create: (data: BookFormData) => api.post<Book>('/books', data),\r\n  update: (id: string, data: BookUpdateData) => api.put<Book>(`/books/${id}`, data),\r\n  delete: (id: string) => api.delete(`/books/${id}`),\r\n}\r\n\r\n// Chapters API - ëª©ì°¨ ê´€ë¦¬ (ìƒˆë¡œ ë¶„ë¦¬)\r\nexport const chaptersAPI = {\r\n  getByBook: (bookId: string) => api.get(`/books/${bookId}/chapters`),\r\n  create: (bookId: string, data: { title: string; order: number }) => \r\n    api.post(`/books/${bookId}/chapters`, data),\r\n  update: (bookId: string, chapterId: string, data: { title: string; order: number }) => \r\n    api.put(`/books/${bookId}/chapters/${chapterId}`, data),\r\n  delete: (bookId: string, chapterId: string) => \r\n    api.delete(`/books/${bookId}/chapters/${chapterId}`),\r\n  reorder: (bookId: string, chapterIds: string[]) => \r\n    api.put(`/books/${bookId}/chapters/reorder`, { chapterIds }),\r\n}\r\n\r\n// Learnings API - í•™ìŠµ ë‚´ìš© ê´€ë¦¬ (ìƒˆë¡œ ë¶„ë¦¬)\r\nexport const learningsAPI = {\r\n  // ì„œì  ì§ì ‘ í•™ìŠµ ë‚´ìš©\r\n  getByBook: (bookId: string) => api.get(`/books/${bookId}/learnings`),\r\n  createForBook: (bookId: string, data: LearningFormData) => \r\n    api.post(`/books/${bookId}/learnings`, data),\r\n  updateForBook: (bookId: string, learningId: string, data: LearningFormData) => \r\n    api.put(`/books/${bookId}/learnings/${learningId}`, data),\r\n  deleteForBook: (bookId: string, learningId: string) => \r\n    api.delete(`/books/${bookId}/learnings/${learningId}`),\r\n  \r\n  // ëª©ì°¨ë³„ í•™ìŠµ ë‚´ìš©\r\n  getByChapter: (bookId: string, chapterId: string) => \r\n    api.get(`/books/${bookId}/chapters/${chapterId}/learnings`),\r\n  createForChapter: (bookId: string, chapterId: string, data: LearningFormData) => \r\n    api.post(`/books/${bookId}/chapters/${chapterId}/learnings`, data),\r\n  updateForChapter: (bookId: string, chapterId: string, learningId: string, data: LearningFormData) => \r\n    api.put(`/books/${bookId}/chapters/${chapterId}/learnings/${learningId}`, data),\r\n  deleteForChapter: (bookId: string, chapterId: string, learningId: string) => \r\n    api.delete(`/books/${bookId}/chapters/${chapterId}/learnings/${learningId}`),\r\n  \r\n  // ğŸŒŸ ìŠ¤í‚¬ ì—°ê²°/í•´ì œ (skillIds ì—…ë°ì´íŠ¸)\r\n  updateSkills: (bookId: string, learningId: string, skillIds: string[]) => \r\n    api.patch(`/books/${bookId}/learnings/${learningId}/skills`, { skillIds }),\r\n}\r\n\r\n// Experiences API - íƒ€ì… ì•ˆì •ì„± ê°•í™” (ê°œì„ ëœ UpdateData íƒ€ì… ì‚¬ìš©)\r\nexport const experiencesAPI = {\r\n  getAll: () => api.get<{ data: Experience[] }>('/experiences'),\r\n  getById: (id: string) => api.get<Experience>(`/experiences/${id}`),\r\n  create: (data: ExperienceFormData) => api.post<Experience>('/experiences', data),\r\n  update: (id: string, data: ExperienceUpdateData) => api.put<Experience>(`/experiences/${id}`, data),\r\n  delete: (id: string) => api.delete(`/experiences/${id}`),\r\n}\r\n\r\n// Projects API - íƒ€ì… ì•ˆì •ì„± ê°•í™” ë° getById ì¶”ê°€ (ê°œì„ ëœ UpdateData íƒ€ì… ì‚¬ìš©)\r\nexport const projectsAPI = {\r\n  getAll: () => api.get<{ data: Project[] }>('/projects'),\r\n  getById: (id: string) => api.get<Project>(`/projects/${id}`), // ëˆ„ë½ëœ ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€\r\n  create: (data: ProjectFormData) => api.post<Project>('/projects', data),\r\n  update: (id: string, data: ProjectUpdateData) => api.put<Project>(`/projects/${id}`, data),\r\n  delete: (id: string) => api.delete(`/projects/${id}`),\r\n}\r\n\r\n// Settings API - íƒ€ì… ì•ˆì •ì„± ê°•í™” (ê°œì„ ëœ UpdateData íƒ€ì… ì‚¬ìš©)\r\nexport const settingsAPI = {\r\n  get: () => api.get<SiteSettings>('/settings'),\r\n  update: (data: SettingsUpdateData) => api.put<SiteSettings>('/settings', data),\r\n}\r\n\r\n// Contact API - íƒ€ì… ì•ˆì •ì„± ê°•í™”\r\nexport const contactAPI = {\r\n  sendEmail: (data: ContactFormData) => api.post<ContactResponse>('/contact', data),\r\n}\r\n\r\n// Messages API - ê´€ë¦¬ììš© ì—°ë½ì²˜ ë©”ì‹œì§€ ê´€ë¦¬\r\nexport const messagesAPI = {\r\n  getAll: () => api.get('/admin/messages'),\r\n  getById: (id: string) => api.get(`/admin/messages/${id}`),\r\n  markAsRead: (id: string) => api.put(`/admin/messages/${id}/read`),\r\n  delete: (id: string) => api.delete(`/admin/messages/${id}`),\r\n}\r\n\r\n// Skills API - ìŠ¤í‚¬ ê´€ë¦¬\r\nexport const skillsAPI = {\r\n  // ì¹´í…Œê³ ë¦¬ ê´€ë¦¬\r\n  getCategories: () => api.get<{ data: SkillCategory[] }>('/skill-categories'),\r\n  createCategory: (data: SkillCategoryFormData) => api.post<{ data: SkillCategory }>('/skill-categories', data),\r\n  updateCategory: (id: string, data: SkillCategoryFormData) => api.put<{ data: SkillCategory }>(`/skill-categories/${id}`, data),\r\n  deleteCategory: (id: string) => api.delete(`/skill-categories/${id}`),\r\n  \r\n  // ìŠ¤í‚¬ ê´€ë¦¬\r\n  getAll: () => api.get<Skill[]>('/skills'),\r\n  getByCategory: (categoryId: string) => api.get<{ data: Skill[] }>(`/skill-categories/${categoryId}/skills`),\r\n  create: (categoryId: string, data: SkillFormData) => api.post<{ data: Skill }>(`/skill-categories/${categoryId}/skills`, data),\r\n  update: (id: string, data: SkillFormData) => api.put<{ data: Skill }>(`/skills/${id}`, data),\r\n  delete: (id: string) => api.delete(`/skills/${id}`),\r\n  \r\n    // ëª¨ë“  ë°ì´í„° ì‚­ì œ\r\n    clearAllData: () => api.post('/skills/clear-all-data'),\r\n  \r\n  // ì¤‘ë³µ ë°ì´í„° ì •ë¦¬\r\n  cleanupDuplicates: () => api.post('/skills/cleanup-duplicates'),\r\n  \r\n  // ìˆœì„œ ì—…ë°ì´íŠ¸\r\n  reorderSkills: (skillIds: string[]) => api.put('/skills/reorder', { skillIds }),\r\n  reorderCategories: (categoryIds: string[]) => api.put('/skill-categories/reorder', { categoryIds }),\r\n}\r\n\r\n// =================================================================\r\n// ğŸ“‚ Category API (í†µí•© ì¹´í…Œê³ ë¦¬ ê´€ë¦¬)\r\n// =================================================================\r\n\r\nexport const categoriesAPI = {\r\n  getAll: () => api.get<Category[]>('/categories'),\r\n  getById: (id: string) => api.get<Category>(`/categories/${id}`),\r\n  getUsage: (id: string) => api.get<CategoryUsage>(`/categories/${id}/usage`),\r\n  create: (data: CategoryFormData) => api.post<Category>('/categories', data),\r\n  update: (id: string, data: CategoryFormData) => api.put<Category>(`/categories/${id}`, data),\r\n  delete: (id: string) => api.delete(`/categories/${id}`),\r\n}\r\n\r\n// =================================================================\r\n// ğŸ“¹ VideoLearning API (ì˜ìƒ í•™ìŠµ ê¸°ë¡)\r\n// =================================================================\r\n\r\nexport const videoLearningsAPI = {\r\n  getAll: () => api.get<{ data: VideoLearning[] }>('/video-learnings'),\r\n  getById: (id: string) => api.get<VideoLearning>(`/video-learnings/${id}`),\r\n  create: (data: VideoLearningFormData) => api.post<VideoLearning>('/video-learnings', data),\r\n  update: (id: string, data: VideoLearningFormData) => api.put<VideoLearning>(`/video-learnings/${id}`, data),\r\n  delete: (id: string) => api.delete(`/video-learnings/${id}`),\r\n}\r\n\r\n// ğŸŒŸ ì¬ìƒ ëª©ë¡ API\r\nexport const videoPlaylistsAPI = {\r\n  getAll: () => api.get<{ data: VideoPlaylist[] }>('/video-playlists'),\r\n  getById: (id: string) => api.get<{ data: VideoPlaylist }>(`/video-playlists/${id}`),\r\n  create: (data: VideoPlaylistFormData) => api.post<{ data: VideoPlaylist }>('/video-playlists', data),\r\n  update: (id: string, data: VideoPlaylistFormData) => api.put<{ data: VideoPlaylist }>(`/video-playlists/${id}`, data),\r\n  delete: (id: string) => api.delete(`/video-playlists/${id}`),\r\n}\r\n\r\n// ğŸŒŸ ì¬ìƒ ëª©ë¡ ë‚´ ì˜ìƒ API\r\nexport const playlistVideosAPI = {\r\n  getByPlaylist: (playlistId: string) => api.get<{ data: PlaylistVideo[] }>(`/playlist-videos?playlistId=${playlistId}`),\r\n  getById: (id: string) => api.get<{ data: PlaylistVideo }>(`/playlist-videos/${id}`),\r\n  create: (data: PlaylistVideoFormData) => api.post<{ data: PlaylistVideo }>('/playlist-videos', data),\r\n  update: (id: string, data: PlaylistVideoFormData) => api.put<{ data: PlaylistVideo }>(`/playlist-videos/${id}`, data),\r\n  delete: (id: string) => api.delete(`/playlist-videos/${id}`),\r\n}\r\n\r\nexport default api","import React, { createContext, useContext, useState, useEffect, useCallback, useMemo } from 'react';\r\nimport { authAPI } from '../services/api';\r\n\r\ninterface User {\r\n  username: string;\r\n  isAdmin: boolean;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  login: (username: string, password: string) => Promise<void>;\r\n  logout: () => void;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  // token ìƒíƒœ ì œê±°: HttpOnly ì¿ í‚¤ ì‚¬ìš© ê°€ì •\r\n  const [isLoading, setIsLoading] = useState(false); // ì´ˆê¸° ë¡œë”© ìƒíƒœë¥¼ falseë¡œ ì„¤ì •\r\n\r\n  // useEffectì—ì„œ ì‚¬ìš©ì ì •ë³´ë¥¼ ë¡œë“œ (í† í°ì´ ì¿ í‚¤ì— ìˆì„ ê²½ìš°)\r\n  useEffect(() => {\r\n    const loadUser = async () => {\r\n      try {\r\n        // verify APIê°€ HttpOnly ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦í•˜ê³  ì‚¬ìš©ì ì •ë³´ë¥¼ ë°˜í™˜í•œë‹¤ê³  ê°€ì •\r\n        const response = await authAPI.verify();\r\n        setUser(response.data.user);\r\n      } catch (error) {\r\n        // í† í°ì´ ì—†ê±°ë‚˜ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ userë¥¼ nullë¡œ ì„¤ì •\r\n        setUser(null);\r\n      }\r\n    };\r\n    \r\n    // ì•± ë¡œë“œ ì‹œ verify APIë¥¼ í˜¸ì¶œí•˜ì—¬ ê¸°ì¡´ ì„¸ì…˜ í™•ì¸\r\n    loadUser();\r\n  }, []); // ì•± ë¡œë“œ ì‹œ í•œ ë²ˆë§Œ ì‹¤í–‰\r\n\r\n  const login = useCallback(async (username: string, password: string) => {\r\n    try {\r\n      setIsLoading(true);\r\n      // ë¡œê·¸ì¸ API í˜¸ì¶œ: ì„œë²„ëŠ” ì„±ê³µ ì‹œ HttpOnly ì¿ í‚¤ì— í† í°ì„ ì„¤ì •í•˜ê³  ì‚¬ìš©ì ì •ë³´ë¥¼ ë°˜í™˜\r\n      const response = await authAPI.login(username, password);\r\n      setUser(response.data.user);\r\n      setIsLoading(false);\r\n    } catch (error: any) {\r\n      setIsLoading(false);\r\n      // setUser(null); // ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ user ì´ˆê¸°í™”\r\n      throw new Error(error.response?.data?.message || 'ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');\r\n    }\r\n  }, []);\r\n\r\n  const logout = useCallback(async () => {\r\n    // ë¡œê·¸ì•„ì›ƒ API í˜¸ì¶œ: ì„œë²„ëŠ” ì¿ í‚¤ë¥¼ ì œê±°\r\n    try {\r\n      await authAPI.logout(); \r\n    } catch (error) {\r\n      // ì„œë²„ ì¸¡ ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨ ì‹œì—ë„ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœëŠ” ì´ˆê¸°í™”\r\n      console.error('ì„œë²„ ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);\r\n    }\r\n    setUser(null);\r\n  }, []);\r\n\r\n  // Context valueë¥¼ useMemoë¡œ ë©”ëª¨ì´ì œì´ì…˜í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ë°©ì§€\r\n  const value = useMemo(() => ({\r\n    user,\r\n    login,\r\n    logout,\r\n    // isAuthenticatedëŠ” user ê°ì²´ì˜ ìœ ë¬´ë¡œ íŒë‹¨\r\n    isAuthenticated: !!user,\r\n    isLoading,\r\n  }), [user, login, logout, isLoading]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n\r\n","/**\r\n * ë‚ ì§œ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤\r\n */\r\n\r\n/**\r\n * ë‚ ì§œ ë¬¸ìì—´ì„ í•œêµ­ì–´ í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…\r\n * @param dateString - í¬ë§·íŒ…í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @returns í•œêµ­ì–´ í˜•ì‹ì˜ ë‚ ì§œ ë¬¸ìì—´ (ì˜ˆ: \"2024. 1. 15.\")\r\n */\r\nexport const formatDate = (dateString: string): string => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleDateString('ko-KR')\r\n  } catch (error) {\r\n    console.error('ë‚ ì§œ í¬ë§·íŒ… ì˜¤ë¥˜:', error)\r\n    return 'ë‚ ì§œ ì •ë³´ ì—†ìŒ'\r\n  }\r\n}\r\n\r\n/**\r\n * ë‚ ì§œ ë¬¸ìì—´ì„ ìƒëŒ€ì  ì‹œê°„ìœ¼ë¡œ í¬ë§·íŒ… (ì˜ˆ: \"3ë¶„ ì „\", \"2ì‹œê°„ ì „\", \"3ì¼ ì „\")\r\n * @param dateString - í¬ë§·íŒ…í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @returns ìƒëŒ€ì  ì‹œê°„ ë¬¸ìì—´\r\n */\r\nexport const formatRelativeDate = (dateString: string): string => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    const now = new Date()\r\n    const diffInMs = now.getTime() - date.getTime()\r\n    \r\n    // ìŒìˆ˜ì¸ ê²½ìš° ë¯¸ë˜ ë‚ ì§œ (ë°©ê¸ˆ ì „ìœ¼ë¡œ ì²˜ë¦¬)\r\n    if (diffInMs < 0) return 'ë°©ê¸ˆ ì „'\r\n    \r\n    // ë¶„ ë‹¨ìœ„ ê³„ì‚°\r\n    const diffInMinutes = Math.floor(diffInMs / (1000 * 60))\r\n    if (diffInMinutes < 1) return 'ë°©ê¸ˆ ì „'\r\n    if (diffInMinutes < 60) return `${diffInMinutes}ë¶„ ì „`\r\n    \r\n    // ì‹œê°„ ë‹¨ìœ„ ê³„ì‚°\r\n    const diffInHours = Math.floor(diffInMs / (1000 * 60 * 60))\r\n    if (diffInHours < 24) return `${diffInHours}ì‹œê°„ ì „`\r\n    \r\n    // ì¼ ë‹¨ìœ„ ê³„ì‚°\r\n    const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24))\r\n    if (diffInDays === 1) return 'ì–´ì œ'\r\n    if (diffInDays < 7) return `${diffInDays}ì¼ ì „`\r\n    \r\n    // ì£¼ ë‹¨ìœ„ ê³„ì‚°\r\n    const diffInWeeks = Math.floor(diffInDays / 7)\r\n    if (diffInWeeks < 4) return `${diffInWeeks}ì£¼ ì „`\r\n    \r\n    // ì›” ë‹¨ìœ„ ê³„ì‚° (30ì¼ ê¸°ì¤€)\r\n    const diffInMonths = Math.floor(diffInDays / 30)\r\n    if (diffInMonths < 12) return `${diffInMonths}ê°œì›” ì „`\r\n    \r\n    // ë…„ ë‹¨ìœ„ ê³„ì‚°\r\n    const diffInYears = Math.floor(diffInDays / 365)\r\n    return `${diffInYears}ë…„ ì „`\r\n  } catch (error) {\r\n    console.error('ìƒëŒ€ì  ë‚ ì§œ í¬ë§·íŒ… ì˜¤ë¥˜:', error)\r\n    return 'ë‚ ì§œ ì •ë³´ ì—†ìŒ'\r\n  }\r\n}\r\n\r\n/**\r\n * ëª¨ë˜í•œ Intl.RelativeTimeFormat APIë¥¼ ì‚¬ìš©í•œ ìƒëŒ€ì  ì‹œê°„ í¬ë§·íŒ…\r\n * @param dateString - í¬ë§·íŒ…í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @param locale - ë¡œì¼€ì¼ (ê¸°ë³¸ê°’: 'ko-KR')\r\n * @returns ìƒëŒ€ì  ì‹œê°„ ë¬¸ìì—´\r\n */\r\nexport const formatRelativeDateModern = (dateString: string, locale: string = 'ko-KR'): string => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    const now = new Date()\r\n    const diffInSeconds = (now.getTime() - date.getTime()) / 1000\r\n    \r\n    // ìŒìˆ˜ì¸ ê²½ìš° ë¯¸ë˜ ë‚ ì§œ\r\n    if (diffInSeconds < 0) return 'ë°©ê¸ˆ ì „'\r\n    \r\n    const formatter = new Intl.RelativeTimeFormat(locale, { numeric: 'auto' })\r\n    \r\n    // ì´ˆ ë‹¨ìœ„\r\n    if (diffInSeconds < 60) {\r\n      return 'ë°©ê¸ˆ ì „'\r\n    }\r\n    \r\n    // ë¶„ ë‹¨ìœ„\r\n    if (diffInSeconds < 3600) {\r\n      return formatter.format(Math.floor(-diffInSeconds / 60), 'minute')\r\n    }\r\n    \r\n    // ì‹œê°„ ë‹¨ìœ„\r\n    if (diffInSeconds < 86400) {\r\n      return formatter.format(Math.floor(-diffInSeconds / 3600), 'hour')\r\n    }\r\n    \r\n    // ì¼ ë‹¨ìœ„\r\n    if (diffInSeconds < 2592000) { // 30ì¼ ë¯¸ë§Œ\r\n      return formatter.format(Math.floor(-diffInSeconds / 86400), 'day')\r\n    }\r\n    \r\n    // ì›” ë‹¨ìœ„\r\n    if (diffInSeconds < 31536000) { // 365ì¼ ë¯¸ë§Œ\r\n      return formatter.format(Math.floor(-diffInSeconds / 2592000), 'month')\r\n    }\r\n    \r\n    // ë…„ ë‹¨ìœ„\r\n    return formatter.format(Math.floor(-diffInSeconds / 31536000), 'year')\r\n  } catch (error) {\r\n    console.error('ëª¨ë˜ ìƒëŒ€ì  ë‚ ì§œ í¬ë§·íŒ… ì˜¤ë¥˜:', error)\r\n    return 'ë‚ ì§œ ì •ë³´ ì—†ìŒ'\r\n  }\r\n}\r\n\r\n/**\r\n * ë‚ ì§œê°€ ìœ íš¨í•œì§€ í™•ì¸\r\n * @param dateString - í™•ì¸í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @returns ìœ íš¨í•œ ë‚ ì§œì¸ì§€ ì—¬ë¶€\r\n */\r\nexport const isValidDate = (dateString: string): boolean => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    return !isNaN(date.getTime())\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * ë‘ ë‚ ì§œ ì‚¬ì´ì˜ ì°¨ì´ë¥¼ ê³„ì‚°\r\n * @param startDate - ì‹œì‘ ë‚ ì§œ ë¬¸ìì—´\r\n * @param endDate - ì¢…ë£Œ ë‚ ì§œ ë¬¸ìì—´ (ê¸°ë³¸ê°’: í˜„ì¬ ì‹œê°„)\r\n * @returns ì°¨ì´ ì •ë³´ ê°ì²´\r\n */\r\nexport const getDateDifference = (\r\n  startDate: string, \r\n  endDate: string = new Date().toISOString()\r\n): {\r\n  days: number\r\n  hours: number\r\n  minutes: number\r\n  totalMs: number\r\n} => {\r\n  try {\r\n    const start = new Date(startDate)\r\n    const end = new Date(endDate)\r\n    const diffInMs = Math.abs(end.getTime() - start.getTime())\r\n    \r\n    const days = Math.floor(diffInMs / (1000 * 60 * 60 * 24))\r\n    const hours = Math.floor((diffInMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))\r\n    const minutes = Math.floor((diffInMs % (1000 * 60 * 60)) / (1000 * 60))\r\n    \r\n    return {\r\n      days,\r\n      hours,\r\n      minutes,\r\n      totalMs: diffInMs\r\n    }\r\n  } catch (error) {\r\n    console.error('ë‚ ì§œ ì°¨ì´ ê³„ì‚° ì˜¤ë¥˜:', error)\r\n    return {\r\n      days: 0,\r\n      hours: 0,\r\n      minutes: 0,\r\n      totalMs: 0\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * ë‚ ì§œë¥¼ ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…\r\n * @param dateString - í¬ë§·íŒ…í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @param format - í¬ë§· íƒ€ì… ('short', 'long', 'time', 'datetime')\r\n * @returns í¬ë§·íŒ…ëœ ë‚ ì§œ ë¬¸ìì—´\r\n */\r\nexport const formatDateByType = (\r\n  dateString: string, \r\n  format: 'short' | 'long' | 'time' | 'datetime' = 'short'\r\n): string => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    \r\n    switch (format) {\r\n      case 'short':\r\n        return date.toLocaleDateString('ko-KR', {\r\n          year: 'numeric',\r\n          month: 'numeric',\r\n          day: 'numeric'\r\n        })\r\n      case 'long':\r\n        return date.toLocaleDateString('ko-KR', {\r\n          year: 'numeric',\r\n          month: 'long',\r\n          day: 'numeric',\r\n          weekday: 'long'\r\n        })\r\n      case 'time':\r\n        return date.toLocaleTimeString('ko-KR', {\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        })\r\n      case 'datetime':\r\n        return date.toLocaleString('ko-KR', {\r\n          year: 'numeric',\r\n          month: 'numeric',\r\n          day: 'numeric',\r\n          hour: '2-digit',\r\n          minute: '2-digit'\r\n        })\r\n      default:\r\n        return date.toLocaleDateString('ko-KR')\r\n    }\r\n  } catch (error) {\r\n    console.error('ë‚ ì§œ íƒ€ì…ë³„ í¬ë§·íŒ… ì˜¤ë¥˜:', error)\r\n    return 'ë‚ ì§œ ì •ë³´ ì—†ìŒ'\r\n  }\r\n}\r\n\r\n/**\r\n * ë‚ ì§œê°€ ì˜¤ëŠ˜ì¸ì§€ í™•ì¸\r\n * @param dateString - í™•ì¸í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @returns ì˜¤ëŠ˜ì¸ì§€ ì—¬ë¶€\r\n */\r\nexport const isToday = (dateString: string): boolean => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    const today = new Date()\r\n    \r\n    return date.getDate() === today.getDate() &&\r\n           date.getMonth() === today.getMonth() &&\r\n           date.getFullYear() === today.getFullYear()\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n\r\n/**\r\n * ë‚ ì§œê°€ ìµœê·¼ Nì¼ ì´ë‚´ì¸ì§€ í™•ì¸\r\n * @param dateString - í™•ì¸í•  ë‚ ì§œ ë¬¸ìì—´\r\n * @param days - ê¸°ì¤€ ì¼ìˆ˜ (ê¸°ë³¸ê°’: 7)\r\n * @returns ìµœê·¼ Nì¼ ì´ë‚´ì¸ì§€ ì—¬ë¶€\r\n */\r\nexport const isRecent = (dateString: string, days: number = 7): boolean => {\r\n  try {\r\n    const date = new Date(dateString)\r\n    const now = new Date()\r\n    const diffInMs = now.getTime() - date.getTime()\r\n    const diffInDays = Math.floor(diffInMs / (1000 * 60 * 60 * 24))\r\n    \r\n    return diffInDays <= days && diffInDays >= 0\r\n  } catch {\r\n    return false\r\n  }\r\n}\r\n","// =================================================================\r\n// ğŸ“¹ ìœ íŠœë¸Œ ì˜ìƒ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜\r\n// =================================================================\r\n\r\n/**\r\n * ë‹¤ì–‘í•œ ìœ íŠœë¸Œ URL í˜•ì‹ì—ì„œ ì˜ìƒ ID ì¶”ì¶œ\r\n * @param url - ìœ íŠœë¸Œ URL\r\n * @returns ì˜ìƒ ID ë˜ëŠ” null\r\n */\r\nexport const extractYouTubeId = (url: string): string | null => {\r\n  if (!url) return null\r\n  \r\n  // ë‹¤ì–‘í•œ ìœ íŠœë¸Œ URL íŒ¨í„´\r\n  const patterns = [\r\n    /(?:youtube\\.com\\/watch\\?v=)([a-zA-Z0-9_-]{11})/,  // https://www.youtube.com/watch?v=VIDEO_ID\r\n    /(?:youtu\\.be\\/)([a-zA-Z0-9_-]{11})/,  // https://youtu.be/VIDEO_ID\r\n    /(?:youtube\\.com\\/embed\\/)([a-zA-Z0-9_-]{11})/,  // https://www.youtube.com/embed/VIDEO_ID\r\n    /(?:youtube\\.com\\/shorts\\/)([a-zA-Z0-9_-]{11})/,  // https://www.youtube.com/shorts/VIDEO_ID\r\n    /(?:youtube\\.com\\/v\\/)([a-zA-Z0-9_-]{11})/,  // https://www.youtube.com/v/VIDEO_ID\r\n  ]\r\n  \r\n  for (const pattern of patterns) {\r\n    const match = url.match(pattern)\r\n    if (match && match[1]) {\r\n      return match[1]\r\n    }\r\n  }\r\n  \r\n  return null\r\n}\r\n\r\n/**\r\n * ìœ íŠœë¸Œ ì˜ìƒ IDë¡œ ê³ í•´ìƒë„ ì¸ë„¤ì¼ URL ìƒì„±\r\n * @param videoId - ìœ íŠœë¸Œ ì˜ìƒ ID\r\n * @param quality - ì¸ë„¤ì¼ í’ˆì§ˆ (maxresdefault, hqdefault, mqdefault, sddefault)\r\n * @returns ì¸ë„¤ì¼ URL\r\n */\r\nexport const getYouTubeThumbnail = (videoId: string, quality: string = 'maxresdefault'): string => {\r\n  return `https://img.youtube.com/vi/${videoId}/${quality}.jpg`\r\n}\r\n\r\n/**\r\n * ìœ íŠœë¸Œ ì„ë² ë“œ URL ìƒì„± (íƒ€ì„ìŠ¤íƒ¬í”„ ì§€ì›, ì „ë¬¸ì„± ìµœì í™”)\r\n * @param videoId - ìœ íŠœë¸Œ ì˜ìƒ ID\r\n * @param startTime - ì‹œì‘ ì‹œê°„ (ì´ˆ ë‹¨ìœ„)\r\n * @param autoplay - ìë™ ì¬ìƒ ì—¬ë¶€ (ê¸°ë³¸ê°’: false)\r\n * @returns ì„ë² ë“œ URL\r\n */\r\nexport const getYouTubeEmbedUrl = (videoId: string, startTime?: number, autoplay: boolean = false): string => {\r\n  const baseUrl = `https://www.youtube.com/embed/${videoId}`\r\n  const params = new URLSearchParams()\r\n  \r\n  if (startTime !== undefined && startTime > 0) {\r\n    params.append('start', startTime.toString())\r\n  }\r\n  \r\n  if (autoplay) {\r\n    params.append('autoplay', '1')\r\n  }\r\n  \r\n  // ğŸŒŸ ì „ë¬¸ì„±ì„ ìœ„í•œ í”Œë ˆì´ì–´ ìµœì í™” íŒŒë¼ë¯¸í„°\r\n  params.append('rel', '0')  // ê´€ë ¨ ì˜ìƒ ì¶”ì²œ ë¹„í™œì„±í™”\r\n  params.append('modestbranding', '1')  // ìœ íŠœë¸Œ ë¡œê³  ìµœì†Œí™” & 'ë™ì˜ìƒ ë”ë³´ê¸°' íˆ´íŒ ì œê±°\r\n  params.append('iv_load_policy', '3')  // ì˜ìƒ ì£¼ì„(annotations) ë¹„í™œì„±í™”\r\n  params.append('showinfo', '0')  // ì˜ìƒ ì •ë³´ í‘œì‹œ ìµœì†Œí™”\r\n  params.append('fs', '1')  // ì „ì²´ í™”ë©´ ë²„íŠ¼ í‘œì‹œ\r\n  params.append('cc_load_policy', '0')  // ìë§‰ ìë™ ë¡œë“œ ë¹„í™œì„±í™”\r\n  params.append('controls', '1')  // ì»¨íŠ¸ë¡¤ëŸ¬ í‘œì‹œ\r\n  \r\n  return `${baseUrl}?${params.toString()}`\r\n}\r\n\r\n/**\r\n * í…ìŠ¤íŠ¸ì—ì„œ íƒ€ì„ìŠ¤íƒ¬í”„ íŒ¨í„´ ì¶”ì¶œ ë° ì´ˆ ë‹¨ìœ„ ë³€í™˜\r\n * @param text - íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ í¬í•¨í•œ í…ìŠ¤íŠ¸\r\n * @returns íƒ€ì„ìŠ¤íƒ¬í”„ ì •ë³´ ë°°ì—´ [{ text: '[1:30]', seconds: 90, position: 10 }]\r\n */\r\nexport interface TimestampMatch {\r\n  text: string  // ì›ë³¸ í…ìŠ¤íŠ¸ (ì˜ˆ: '[1:30]')\r\n  seconds: number  // ì´ˆ ë‹¨ìœ„ ì‹œê°„\r\n  position: number  // í…ìŠ¤íŠ¸ ë‚´ ìœ„ì¹˜\r\n}\r\n\r\nexport const parseTimestamps = (text: string): TimestampMatch[] => {\r\n  if (!text) return []\r\n  \r\n  // íƒ€ì„ìŠ¤íƒ¬í”„ íŒ¨í„´: [MM:SS] ë˜ëŠ” [H:MM:SS]\r\n  const pattern = /\\[(\\d{1,2}):(\\d{2})(?::(\\d{2}))?\\]/g\r\n  const matches: TimestampMatch[] = []\r\n  \r\n  let match\r\n  while ((match = pattern.exec(text)) !== null) {\r\n    const hours = match[3] ? parseInt(match[1] || '0', 10) : 0\r\n    const minutes = match[3] ? parseInt(match[2] || '0', 10) : parseInt(match[1] || '0', 10)\r\n    const seconds = match[3] ? parseInt(match[3] || '0', 10) : parseInt(match[2] || '0', 10)\r\n    \r\n    const totalSeconds = hours * 3600 + minutes * 60 + seconds\r\n    \r\n    matches.push({\r\n      text: match[0],\r\n      seconds: totalSeconds,\r\n      position: match.index,\r\n    })\r\n  }\r\n  \r\n  return matches\r\n}\r\n\r\n/**\r\n * íƒ€ì„ìŠ¤íƒ¬í”„ê°€ í¬í•¨ëœ í…ìŠ¤íŠ¸ë¥¼ í´ë¦­ ê°€ëŠ¥í•œ ë§í¬ë¡œ ë³€í™˜\r\n * @param text - ì›ë³¸ í…ìŠ¤íŠ¸\r\n * @param onTimestampClick - íƒ€ì„ìŠ¤íƒ¬í”„ í´ë¦­ í•¸ë“¤ëŸ¬\r\n * @returns JSX ìš”ì†Œ ë°°ì—´\r\n */\r\nexport const renderTextWithTimestamps = (\r\n  text: string,\r\n  onTimestampClick?: (seconds: number) => void\r\n): (string | JSX.Element)[] => {\r\n  if (!text) return []\r\n  \r\n  const timestamps = parseTimestamps(text)\r\n  if (timestamps.length === 0) return [text]\r\n  \r\n  const result: (string | JSX.Element)[] = []\r\n  let lastIndex = 0\r\n  \r\n  timestamps.forEach((ts, idx) => {\r\n    // íƒ€ì„ìŠ¤íƒ¬í”„ ì´ì „ í…ìŠ¤íŠ¸ ì¶”ê°€\r\n    if (ts.position > lastIndex) {\r\n      result.push(text.substring(lastIndex, ts.position))\r\n    }\r\n    \r\n    // íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ í´ë¦­ ê°€ëŠ¥í•œ ë²„íŠ¼ìœ¼ë¡œ ì¶”ê°€\r\n    if (onTimestampClick) {\r\n      result.push(\r\n        <button\r\n          key={`ts-${idx}`}\r\n          onClick={() => onTimestampClick(ts.seconds)}\r\n          className=\"inline-flex items-center px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-mono text-xs font-bold transition-colors mx-1\"\r\n          title={`ì˜ìƒ ${ts.text} ìœ„ì¹˜ë¡œ ì´ë™`}\r\n        >\r\n          {ts.text}\r\n        </button>\r\n      )\r\n    } else {\r\n      result.push(\r\n        <span key={`ts-${idx}`} className=\"inline-flex items-center px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded font-mono text-xs font-bold mx-1\">\r\n          {ts.text}\r\n        </span>\r\n      )\r\n    }\r\n    \r\n    lastIndex = ts.position + ts.text.length\r\n  })\r\n  \r\n  // ë§ˆì§€ë§‰ íƒ€ì„ìŠ¤íƒ¬í”„ ì´í›„ í…ìŠ¤íŠ¸ ì¶”ê°€\r\n  if (lastIndex < text.length) {\r\n    result.push(text.substring(lastIndex))\r\n  }\r\n  \r\n  return result\r\n}\r\n\r\n/**\r\n * ìœ íŠœë¸Œ URL ìœ íš¨ì„± ê²€ì‚¬\r\n * @param url - ê²€ì¦í•  URL\r\n * @returns ìœ íš¨í•œ ìœ íŠœë¸Œ URL ì—¬ë¶€\r\n */\r\nexport const isValidYouTubeUrl = (url: string): boolean => {\r\n  if (!url) return false\r\n  return extractYouTubeId(url) !== null\r\n}\r\n\r\n/**\r\n * ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ ID ì¶”ì¶œ\r\n * @param url - ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ URL\r\n * @returns ì¬ìƒ ëª©ë¡ ID ë˜ëŠ” null\r\n */\r\nexport const extractYouTubePlaylistId = (url: string): string | null => {\r\n  if (!url) return null\r\n  \r\n  // ì¬ìƒ ëª©ë¡ URL íŒ¨í„´\r\n  const patterns = [\r\n    /[?&]list=([a-zA-Z0-9_-]{13,})/,  // ?list=PLAYLIST_ID ë˜ëŠ” &list=PLAYLIST_ID\r\n    /youtube\\.com\\/playlist\\?list=([a-zA-Z0-9_-]{13,})/,  // playlist ì „ìš© URL\r\n  ]\r\n  \r\n  for (const pattern of patterns) {\r\n    const match = url.match(pattern)\r\n    if (match && match[1]) {\r\n      return match[1]\r\n    }\r\n  }\r\n  \r\n  return null\r\n}\r\n\r\n/**\r\n * ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ ì„ë² ë“œ URL ìƒì„±\r\n * @param playlistId - ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ ID\r\n * @param startVideoId - ì‹œì‘í•  ì˜ìƒ ID (ì„ íƒì‚¬í•­)\r\n * @returns ì¬ìƒ ëª©ë¡ ì„ë² ë“œ URL\r\n */\r\nexport const getYouTubePlaylistEmbedUrl = (playlistId: string, startVideoId?: string): string => {\r\n  const params = new URLSearchParams()\r\n  \r\n  params.append('list', playlistId)\r\n  params.append('rel', '0')\r\n  params.append('modestbranding', '1')\r\n  params.append('iv_load_policy', '3')\r\n  params.append('showinfo', '0')\r\n  params.append('fs', '1')\r\n  params.append('cc_load_policy', '0')\r\n  params.append('controls', '1')\r\n  params.append('enablejsapi', '1')\r\n  \r\n  if (startVideoId) {\r\n    // íŠ¹ì • ì˜ìƒë¶€í„° ì‹œì‘\r\n    return `https://www.youtube.com/embed/${startVideoId}?${params.toString()}`\r\n  } else {\r\n    // ì¬ìƒ ëª©ë¡ ì²« ì˜ìƒë¶€í„° ì‹œì‘\r\n    return `https://www.youtube.com/embed?${params.toString()}`\r\n  }\r\n}\r\n\r\n/**\r\n * ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ ì¸ë„¤ì¼ URL ìƒì„±\r\n * @param playlistId - ìœ íŠœë¸Œ ì¬ìƒ ëª©ë¡ ID\r\n * @returns ì¸ë„¤ì¼ URL\r\n */\r\nexport const getYouTubePlaylistThumbnail = (playlistId: string): string => {\r\n  // ì¬ìƒ ëª©ë¡ ì¸ë„¤ì¼ì€ íŠ¹ì • APIë¥¼ í†µí•´ì„œë§Œ ê°€ëŠ¥í•˜ë¯€ë¡œ\r\n  // ëŒ€ì‹  ì²« ë²ˆì§¸ ì˜ìƒì˜ ì¸ë„¤ì¼ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ê¸°ë³¸ ì´ë¯¸ì§€ ì‚¬ìš©\r\n  return `https://i.ytimg.com/vi//hqdefault.jpg` // í”Œë ˆì´ìŠ¤í™€ë”\r\n}\r\n\r\n/**\r\n * ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ ë³€í™˜\r\n * @param markdown - ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸\r\n * @returns HTML ë¬¸ìì—´\r\n */\r\nexport const renderMarkdown = (markdown: string): string => {\r\n  if (!markdown) return ''\r\n  \r\n  return markdown\r\n    // ì œëª©\r\n    .replace(/^### (.*$)/gim, '<h3 class=\"text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-white\">$1</h3>')\r\n    .replace(/^## (.*$)/gim, '<h2 class=\"text-xl font-semibold mt-4 mb-2 text-gray-900 dark:text-white\">$1</h2>')\r\n    .replace(/^# (.*$)/gim, '<h1 class=\"text-2xl font-bold mt-4 mb-2 text-gray-900 dark:text-white\">$1</h1>')\r\n    // ë³¼ë“œ\r\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"font-bold\">$1</strong>')\r\n    // ì´íƒ¤ë¦­\r\n    .replace(/\\*(.*?)\\*/g, '<em class=\"italic\">$1</em>')\r\n    // ë°‘ì¤„\r\n    .replace(/__(.*?)__/g, '<u class=\"underline\">$1</u>')\r\n    // ì¸ë¼ì¸ ì½”ë“œ\r\n    .replace(/`(.*?)`/g, '<code class=\"bg-gray-200 dark:bg-gray-600 text-red-600 dark:text-red-400 px-1 rounded text-sm\">$1</code>')\r\n    // í† ê¸€\r\n    .replace(/^â–¶ (.*$)/gim, '<div class=\"flex items-center mt-2 mb-1\"><span class=\"mr-2\">â–¶</span><span class=\"font-medium text-gray-900 dark:text-white\">$1</span></div>')\r\n    // ë¶ˆë¦¿ ë¦¬ìŠ¤íŠ¸\r\n    .replace(/^[\\s]*[-*+]\\s(.*$)/gim, '<div class=\"ml-4 mb-1\"><span class=\"mr-2\">â€¢</span>$1</div>')\r\n    // ìˆ«ì ë¦¬ìŠ¤íŠ¸\r\n    .replace(/^[\\s]*\\d+\\.\\s(.*$)/gim, '<div class=\"ml-4 mb-1\"><span class=\"mr-2\">1.</span>$1</div>')\r\n    // ì½”ë“œ ë¸”ë¡\r\n    .replace(/```(.*?)\\n([\\s\\S]*?)\\n```/gim, (_match, p1, p2) => {\r\n      const lang = p1 ? `language-${p1.trim()}` : ''\r\n      return `<pre class=\"bg-gray-800 p-3 rounded-lg overflow-x-auto my-3\"><code class=\"${lang} text-sm text-gray-100\">${p2.trim()}</code></pre>`\r\n    })\r\n    // ì¤„ë°”ê¿ˆ\r\n    .replace(/\\n/g, '<br>')\r\n}\r\n\r\n/**\r\n * ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ ë³€í™˜í•˜ê³  íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ í´ë¦­ ê°€ëŠ¥í•œ ë²„íŠ¼ìœ¼ë¡œ ë³€í™˜\r\n * @param markdown - ë§ˆí¬ë‹¤ìš´ í˜•ì‹ì˜ ì½˜í…ì¸ \r\n * @param onTimestampClick - íƒ€ì„ìŠ¤íƒ¬í”„ í´ë¦­ í•¸ë“¤ëŸ¬\r\n * @returns ë³€í™˜ëœ HTML ë¬¸ìì—´\r\n */\r\nexport const renderHtmlWithTimestamps = (\r\n  markdown: string,\r\n  onTimestampClick?: (seconds: number) => void\r\n): string => {\r\n  if (!markdown) return ''\r\n  \r\n  // 1ë‹¨ê³„: ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ ë³€í™˜\r\n  let html = renderMarkdown(markdown)\r\n  \r\n  // 2ë‹¨ê³„: íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ ë²„íŠ¼ìœ¼ë¡œ ë³€í™˜\r\n  const pattern = /\\[(\\d{1,2}):(\\d{2})(?::(\\d{2}))?\\]/g\r\n  \r\n  html = html.replace(pattern, (match, ...groups) => {\r\n    const hours = groups[2] ? parseInt(groups[0], 10) : 0\r\n    const minutes = groups[2] ? parseInt(groups[1], 10) : parseInt(groups[0], 10)\r\n    const seconds = groups[2] ? parseInt(groups[2], 10) : parseInt(groups[1], 10)\r\n    \r\n    const totalSeconds = hours * 3600 + minutes * 60 + seconds\r\n    \r\n    // ë°ì´í„° ì†ì„±ìœ¼ë¡œ ì´ˆë¥¼ ì €ì¥í•˜ì—¬ í´ë¦­ ì´ë²¤íŠ¸ì—ì„œ ì‚¬ìš©\r\n    return `<button \r\n      class=\"inline-flex items-center px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-mono text-xs font-bold transition-colors mx-1 cursor-pointer\"\r\n      data-timestamp=\"${totalSeconds}\"\r\n      title=\"ì˜ìƒ ${match} ìœ„ì¹˜ë¡œ ì´ë™\"\r\n    >${match}</button>`\r\n  })\r\n  \r\n  return html\r\n}\r\n\r\n","import React from 'react'\r\nimport { FaBook, FaBriefcase, FaProjectDiagram, FaSync, FaCalendarAlt } from 'react-icons/fa'\r\n\r\ninterface DataCounts {\r\n  books: number\r\n  experiences: number\r\n  projects: number\r\n  messages: number\r\n  skills: number\r\n}\r\n\r\ninterface DashboardHomeProps {\r\n  counts: DataCounts\r\n}\r\n\r\nconst DashboardHome: React.FC<DashboardHomeProps> = ({ counts }) => {\r\n  // ì‚¬ì´íŠ¸ í™œë™ í†µê³„ë¥¼ ìœ„í•œ ê°€ìƒ ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì™€ì•¼ í•¨)\r\n  const siteActivityStats = {\r\n    recentUpdates: [\r\n      { type: 'book', typeName: 'ì±…', title: 'ìµœì‹  ë„ì„œ ì¶”ê°€', updatedAt: new Date() },\r\n      { type: 'project', typeName: 'í”„ë¡œì íŠ¸', title: 'ìƒˆ í”„ë¡œì íŠ¸ ì™„ë£Œ', updatedAt: new Date() },\r\n      { type: 'experience', typeName: 'ê²½ë ¥', title: 'ê²½ë ¥ ì •ë³´ ì—…ë°ì´íŠ¸', updatedAt: new Date() }\r\n    ],\r\n    weeklyStats: {\r\n      booksAdded: 2,\r\n      projectsCompleted: 1,\r\n      experiencesUpdated: 3\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-6\">ê´€ë¦¬ì ì„¤ì •</h2>\r\n      \r\n      {/* ì½˜í…ì¸  í†µê³„ ì¹´ë“œ */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          ğŸ“Š ì½˜í…ì¸  í†µê³„\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <button className=\"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-lg border border-orange-200 dark:border-orange-800 hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-left w-full\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-orange-600 dark:text-orange-400\">ë“±ë¡ëœ ì±…</p>\r\n                <p className=\"text-3xl font-bold text-orange-900 dark:text-orange-100\">{counts.books}</p>\r\n                <p className=\"text-xs text-orange-500 dark:text-orange-400 mt-1\">ê¶Œ</p>\r\n              </div>\r\n              <FaBook className=\"text-orange-500 text-3xl\" />\r\n            </div>\r\n          </button>\r\n\r\n          <button className=\"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-left w-full\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-blue-600 dark:text-blue-400\">ë“±ë¡ëœ ê²½ë ¥</p>\r\n                <p className=\"text-3xl font-bold text-blue-900 dark:text-blue-100\">{counts.experiences}</p>\r\n                <p className=\"text-xs text-blue-500 dark:text-blue-400 mt-1\">ê°œ</p>\r\n              </div>\r\n              <FaBriefcase className=\"text-blue-500 text-3xl\" />\r\n            </div>\r\n          </button>\r\n\r\n          <button className=\"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg border border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-left w-full\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm font-medium text-green-600 dark:text-green-400\">ë“±ë¡ëœ í”„ë¡œì íŠ¸</p>\r\n                <p className=\"text-3xl font-bold text-green-900 dark:text-green-100\">{counts.projects}</p>\r\n                <p className=\"text-xs text-green-500 dark:text-green-400 mt-1\">ê°œ</p>\r\n              </div>\r\n              <FaProjectDiagram className=\"text-green-500 text-3xl\" />\r\n            </div>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ì‚¬ì´íŠ¸ í™œë™ í†µê³„ ì¹´ë“œ */}\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-4\">\r\n          ğŸ“Š ì‚¬ì´íŠ¸ í™œë™\r\n        </h2>\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ì½˜í…ì¸  */}\r\n          <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <FaSync className=\"text-purple-500 text-xl\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">ìµœê·¼ ì—…ë°ì´íŠ¸</h3>\r\n            </div>\r\n            <div className=\"space-y-3\">\r\n              {siteActivityStats.recentUpdates.length > 0 ? (\r\n                siteActivityStats.recentUpdates.map((item, index) => (\r\n                  <div key={`${item.type}-${index}`} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                      <div className={`w-2 h-2 rounded-full ${\r\n                        index === 0 ? 'bg-green-500' : index === 1 ? 'bg-yellow-500' : 'bg-blue-500'\r\n                      }`}></div>\r\n                      <div>\r\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{item.title}</p>\r\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">{item.typeName}</p>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                      {item.updatedAt.toLocaleDateString('ko-KR')}\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <p className=\"text-gray-500 dark:text-gray-400 text-sm\">ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ì½˜í…ì¸ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* ì£¼ê°„ í†µê³„ */}\r\n          <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700\">\r\n            <div className=\"flex items-center gap-3 mb-4\">\r\n              <FaCalendarAlt className=\"text-indigo-500 text-xl\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">ì´ë²ˆ ì£¼ í™œë™</h3>\r\n            </div>\r\n            <div className=\"space-y-4\">\r\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <FaBook className=\"text-orange-500\" />\r\n                  <span className=\"text-sm text-gray-900 dark:text-white\">ìƒˆë¡œ ì¶”ê°€ëœ ì±…</span>\r\n                </div>\r\n                <span className=\"text-lg font-bold text-orange-600 dark:text-orange-400\">\r\n                  {siteActivityStats.weeklyStats.booksAdded}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <FaProjectDiagram className=\"text-green-500\" />\r\n                  <span className=\"text-sm text-gray-900 dark:text-white\">ì™„ë£Œëœ í”„ë¡œì íŠ¸</span>\r\n                </div>\r\n                <span className=\"text-lg font-bold text-green-600 dark:text-green-400\">\r\n                  {siteActivityStats.weeklyStats.projectsCompleted}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <FaBriefcase className=\"text-blue-500\" />\r\n                  <span className=\"text-sm text-gray-900 dark:text-white\">ì—…ë°ì´íŠ¸ëœ ê²½ë ¥</span>\r\n                </div>\r\n                <span className=\"text-lg font-bold text-blue-600 dark:text-blue-400\">\r\n                  {siteActivityStats.weeklyStats.experiencesUpdated}\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DashboardHome","import React, { useState, useMemo, useCallback, useEffect } from 'react'\r\nimport { FaPlus, FaEdit, FaTrash, FaEye, FaTimes, FaBook, FaStar } from 'react-icons/fa'\r\nimport { Book, BookFormData, Learning, Chapter } from '../../types'\r\nimport BookForm from '../forms/BookForm'\r\nimport ChapterForm from '../forms/ChapterForm'\r\nimport LearningForm from '../forms/LearningForm'\r\nimport ChapterLearningList from '../common/ChapterLearningList'\r\nimport ToastContainer from '../common/Toast'\r\nimport { useBookManagerData } from '../../hooks/useBookManagerData'\r\nimport { useCRUDManager } from '../../hooks/useCRUDManager'\r\nimport { useOptimisticArrayUpdate } from '../../hooks/useOptimisticUpdate'\r\nimport { useAbortController } from '../../hooks/useAbortController'\r\nimport { useToastHelpers } from '../../hooks/useToast'\r\nimport { chaptersAPI, learningsAPI } from '../../services/api'\r\nimport { formatDate } from '../../utils/dateUtils'\r\n\r\ninterface BookManagerProps {\r\n  bookFilter?: 'all' | 'five-star' | 'category'\r\n  bookSearchTerm?: string\r\n  selectedBookCategory?: string\r\n  initialEditId?: string  // ğŸŒŸ URL stateë¡œ ì „ë‹¬ëœ ìˆ˜ì • ëŒ€ìƒ ID\r\n}\r\n\r\nconst BookManager: React.FC<BookManagerProps> = ({ \r\n  bookFilter = 'all', \r\n  bookSearchTerm = '', \r\n  selectedBookCategory = '',\r\n  initialEditId  // ğŸŒŸ ì´ˆê¸° ìˆ˜ì • ID ë°›ê¸°\r\n}) => {\r\n  const { books, isLoading, createBook, updateBook, deleteBook } = useBookManagerData()\r\n  const { success, error } = useToastHelpers()\r\n  const { createAbortController } = useAbortController()\r\n  \r\n  // Toast ìƒíƒœ\r\n  const { toasts, hideToast } = useToastHelpers()\r\n  \r\n  // ì„œì  CRUD ê´€ë¦¬\r\n  const [bookState, bookActions] = useCRUDManager<Book>({\r\n    onSave: async (data: BookFormData, editingItem) => {\r\n      console.log('ğŸ“š BookManager - ì €ì¥ ì‹œì‘:', data)\r\n      console.log('ğŸ”— skillIds:', data.skillIds)\r\n      \r\n      if (editingItem) {\r\n        console.log('âœï¸ ì„œì  ìˆ˜ì • ëª¨ë“œ:', editingItem._id)\r\n        const result = await updateBook(editingItem._id, data)\r\n        console.log('âœ… ìˆ˜ì • ê²°ê³¼:', result)\r\n        success('ì„œì  ìˆ˜ì • ì™„ë£Œ', 'ì„œì  ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      } else {\r\n        console.log('â• ì„œì  ìƒì„± ëª¨ë“œ')\r\n        const result = await createBook(data)\r\n        console.log('âœ… ìƒì„± ê²°ê³¼:', result)\r\n        success('ì„œì  ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ ì„œì ì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      }\r\n    },\r\n    onDelete: async (book: Book) => {\r\n      await deleteBook(book._id)\r\n      success('ì„œì  ì‚­ì œ ì™„ë£Œ', `${book.title}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)\r\n    },\r\n    onError: (err) => {\r\n      console.error('âŒ ì„œì  ì €ì¥ ì‹¤íŒ¨:', err)\r\n      error('ì‘ì—… ì‹¤íŒ¨', err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  })\r\n\r\n  // ëª©ì°¨ ë‚™ê´€ì  ì—…ë°ì´íŠ¸\r\n  const {\r\n    data: chapters,\r\n    optimisticAdd: optimisticAddChapter,\r\n    optimisticUpdateItem: optimisticUpdateChapter,\r\n    optimisticDelete: optimisticDeleteChapter,\r\n    resetData: resetChapters\r\n  } = useOptimisticArrayUpdate<Chapter>([])\r\n\r\n  // í•™ìŠµ ë‚´ìš© ë‚™ê´€ì  ì—…ë°ì´íŠ¸ (í˜„ì¬ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ í–¥í›„ í™•ì¥ì„ ìœ„í•´ ìœ ì§€)\r\n  // const {\r\n  //   data: learnings,\r\n  //   optimisticAdd: optimisticAddLearning,\r\n  //   optimisticUpdateItem: optimisticUpdateLearning,\r\n  //   optimisticDelete: optimisticDeleteLearning,\r\n  //   resetData: resetLearnings\r\n  // } = useOptimisticArrayUpdate<Learning>([])\r\n\r\n  // ì„œì  ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ìƒíƒœ\r\n  const [showBookDetailModal, setShowBookDetailModal] = useState(false)\r\n  const [selectedBook, setSelectedBook] = useState<Book | null>(null)\r\n  const [selectedChapterId, setSelectedChapterId] = useState<string | null>(null)\r\n\r\n  // í¼ ìƒíƒœ\r\n  const [showChapterForm, setShowChapterForm] = useState(false)\r\n  const [editingChapter, setEditingChapter] = useState<Chapter | null>(null)\r\n  const [showLearningForm, setShowLearningForm] = useState(false)\r\n  const [editingLearning, setEditingLearning] = useState<Learning | null>(null)\r\n  const [hasAutoOpened, setHasAutoOpened] = useState(false)  // ğŸŒŸ ìë™ ì—´ë¦¼ ì¶”ì \r\n\r\n  // ğŸŒŸ initialEditIdê°€ ì „ë‹¬ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ì„œì  ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜ (í•œ ë²ˆë§Œ)\r\n  useEffect(() => {\r\n    if (initialEditId && books.length > 0 && !hasAutoOpened) {\r\n      const bookToEdit = books.find(book => book._id === initialEditId)\r\n      if (bookToEdit) {\r\n        console.log('ğŸ¯ ìë™ ìˆ˜ì • ëª¨ë“œ í™œì„±í™”:', bookToEdit.title)\r\n        bookActions.handleEdit(bookToEdit)\r\n        setHasAutoOpened(true)  // ğŸŒŸ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ í‘œì‹œ\r\n      }\r\n    }\r\n  }, [initialEditId, books, hasAutoOpened, bookActions])\r\n\r\n  // í•„í„°ë§ëœ ì„œì  ëª©ë¡ ê³„ì‚°\r\n  const filteredBooks = useMemo(() => {\r\n    let filtered = [...books]\r\n\r\n    // í•„í„° ì ìš©\r\n    if (bookFilter === 'five-star') {\r\n      filtered = filtered.filter(book => book.rating === 5)\r\n    } else if (bookFilter === 'category' && selectedBookCategory) {\r\n      filtered = filtered.filter(book => book.category === selectedBookCategory)\r\n    }\r\n\r\n    // ê²€ìƒ‰ì–´ ì ìš©\r\n    if (bookSearchTerm) {\r\n      const searchLower = bookSearchTerm.toLowerCase()\r\n      filtered = filtered.filter(book => \r\n        book.title.toLowerCase().includes(searchLower) ||\r\n        book.author.toLowerCase().includes(searchLower) ||\r\n        book.category.toLowerCase().includes(searchLower)\r\n      )\r\n    }\r\n\r\n    return filtered.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime())\r\n  }, [books, bookFilter, bookSearchTerm, selectedBookCategory])\r\n\r\n  // ì„œì  ìƒì„¸ë³´ê¸° ëª¨ë‹¬ ì—´ê¸°\r\n  const handleBookDetailClick = useCallback(async (book: Book) => {\r\n    setSelectedBook(book)\r\n    setShowBookDetailModal(true)\r\n    setSelectedChapterId(null)\r\n\r\n    try {\r\n      const abortController = createAbortController()\r\n      \r\n      // ëª©ì°¨ë§Œ ê°€ì ¸ì˜¤ê¸° (í•™ìŠµ ë‚´ìš©ì€ populateë˜ì–´ ìˆìŒ)\r\n      const chaptersResponse = await chaptersAPI.getByBook(book._id)\r\n\r\n      if (!abortController.signal.aborted) {\r\n        resetChapters(chaptersResponse.data || [])\r\n      }\r\n    } catch (err) {\r\n      if (!(err as Error).name?.includes('AbortError')) {\r\n        error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨', 'ì„œì  ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n      }\r\n    }\r\n  }, [createAbortController, resetChapters, error])\r\n\r\n  // ëª©ì°¨ ê´€ë¦¬ í•¸ë“¤ëŸ¬ë“¤\r\n  const handleSaveChapter = useCallback(async (chapterData: { title: string; order: number }) => {\r\n    if (!selectedBook) return\r\n\r\n    try {\r\n      if (editingChapter) {\r\n        // ìˆ˜ì •\r\n        await optimisticUpdateChapter(\r\n          editingChapter._id,\r\n          chapterData,\r\n          () => chaptersAPI.update(selectedBook._id, editingChapter._id, chapterData).then(res => res.data)\r\n        )\r\n        success('ëª©ì°¨ ìˆ˜ì • ì™„ë£Œ', 'ëª©ì°¨ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        setShowChapterForm(false)\r\n        setEditingChapter(null)\r\n      } else {\r\n        // ì¶”ê°€\r\n        await optimisticAddChapter(\r\n          { ...chapterData, _id: '', learnings: [], createdAt: new Date().toISOString(), updatedAt: new Date().toISOString() } as Chapter,\r\n          () => chaptersAPI.create(selectedBook._id, chapterData).then(res => res.data)\r\n        )\r\n        success('ëª©ì°¨ ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ ëª©ì°¨ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        setShowChapterForm(false)\r\n      }\r\n    } catch (err) {\r\n      error('ëª©ì°¨ ì‘ì—… ì‹¤íŒ¨', 'ëª©ì°¨ ì‘ì—…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }, [selectedBook, editingChapter, optimisticAddChapter, optimisticUpdateChapter, success, error])\r\n\r\n  const handleDeleteChapter = useCallback(async (chapter: Chapter) => {\r\n    if (!selectedBook) return\r\n\r\n    try {\r\n      await optimisticDeleteChapter(\r\n        chapter._id,\r\n        () => chaptersAPI.delete(selectedBook._id, chapter._id).then(() => {})\r\n      )\r\n      success('ëª©ì°¨ ì‚­ì œ ì™„ë£Œ', 'ëª©ì°¨ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n    } catch (err) {\r\n      error('ëª©ì°¨ ì‚­ì œ ì‹¤íŒ¨', 'ëª©ì°¨ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }, [selectedBook, optimisticDeleteChapter, success, error])\r\n\r\n  // í•™ìŠµ ë‚´ìš© ê´€ë¦¬ í•¸ë“¤ëŸ¬ë“¤\r\n  const handleAddLearningClick = useCallback((chapterId: string) => {\r\n    setSelectedChapterId(chapterId)\r\n    setShowLearningForm(true)\r\n    setEditingLearning(null)\r\n  }, [])\r\n\r\n  const handleEditLearningClick = useCallback((learning: Learning, chapterId: string) => {\r\n    setSelectedChapterId(chapterId)\r\n    setEditingLearning(learning)\r\n    setShowLearningForm(true)\r\n  }, [])\r\n\r\n  const handleDeleteLearningClick = useCallback(async (learning: Learning, chapterId: string) => {\r\n    if (!selectedBook) return\r\n\r\n    try {\r\n      await learningsAPI.deleteForChapter(selectedBook._id, chapterId, learning._id)\r\n      \r\n      // ëª©ì°¨ ë°ì´í„° ìƒˆë¡œê³ ì¹¨ (í•™ìŠµ ë‚´ìš©ì´ populateë˜ì–´ ìˆìŒ)\r\n      const chaptersResponse = await chaptersAPI.getByBook(selectedBook._id)\r\n      resetChapters(chaptersResponse.data || [])\r\n      \r\n      success('í•™ìŠµ ë‚´ìš© ì‚­ì œ ì™„ë£Œ', 'í•™ìŠµ ë‚´ìš©ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n    } catch (err) {\r\n      error('í•™ìŠµ ë‚´ìš© ì‚­ì œ ì‹¤íŒ¨', 'í•™ìŠµ ë‚´ìš© ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }, [selectedBook, resetChapters, success, error])\r\n\r\n  const handleSaveLearning = useCallback(async (learningData: { topic: string; content: string }) => {\r\n    if (!selectedBook || !selectedChapterId) return\r\n\r\n    try {\r\n      if (editingLearning) {\r\n        // ìˆ˜ì •\r\n        await learningsAPI.updateForChapter(selectedBook._id, selectedChapterId, editingLearning._id, learningData)\r\n        success('í•™ìŠµ ë‚´ìš© ìˆ˜ì • ì™„ë£Œ', 'í•™ìŠµ ë‚´ìš©ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      } else {\r\n        // ì¶”ê°€\r\n        await learningsAPI.createForChapter(selectedBook._id, selectedChapterId, learningData)\r\n        success('í•™ìŠµ ë‚´ìš© ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ í•™ìŠµ ë‚´ìš©ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      }\r\n      \r\n      // ëª©ì°¨ ë°ì´í„° ìƒˆë¡œê³ ì¹¨\r\n      const chaptersResponse = await chaptersAPI.getByBook(selectedBook._id)\r\n      resetChapters(chaptersResponse.data || [])\r\n      \r\n      setShowLearningForm(false)\r\n      setEditingLearning(null)\r\n      setSelectedChapterId(null)\r\n    } catch (err) {\r\n      error('ì‘ì—… ì‹¤íŒ¨', 'í•™ìŠµ ë‚´ìš© ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }, [selectedBook, selectedChapterId, editingLearning, resetChapters, success, error])\r\n\r\n  // ë³„ì  ë Œë”ë§\r\n  const renderRating = (rating: number) => {\r\n    return (\r\n      <div className=\"flex items-center gap-0.5\">\r\n        {Array.from({ length: 5 }, (_, i) => (\r\n          <FaStar \r\n            key={i} \r\n            className={`text-sm ${i < rating ? 'text-yellow-500' : 'text-gray-300 dark:text-gray-600'}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // ë¡œë”© ìƒíƒœ\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Toast ì•Œë¦¼ */}\r\n      <ToastContainer toasts={toasts} onClose={hideToast} />\r\n\r\n      <div className=\"space-y-6\">\r\n        {/* ğŸŒŸ í—¤ë” ë° ì„œì  ì¶”ê°€ ë²„íŠ¼ */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">ì„œì  ê´€ë¦¬</h2>\r\n            <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n              ì´ {filteredBooks.length}ê¶Œì˜ ì„œì \r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={bookActions.handleCreate}\r\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md\"\r\n          >\r\n            <FaPlus />\r\n            ì„œì  ì¶”ê°€\r\n          </button>\r\n        </div>\r\n\r\n        {/* ğŸŒŸ ì„œì  ë¦¬ìŠ¤íŠ¸ (í…Œì´ë¸” í˜•ì‹) */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden\">\r\n          {filteredBooks.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <FaBook className=\"text-6xl text-gray-400 mx-auto mb-4\" />\r\n              <p className=\"text-xl text-gray-600 dark:text-gray-400 mb-2\">\r\n                ë“±ë¡ëœ ì„œì ì´ ì—†ìŠµë‹ˆë‹¤\r\n              </p>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-500\">\r\n                ìƒë‹¨ì˜ 'ì„œì  ì¶”ê°€' ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒˆë¡œìš´ ì„œì ì„ ë“±ë¡í•˜ì„¸ìš”\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead>\r\n                  <tr className=\"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600\">\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      ì„œì  ì •ë³´\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      ì €ì\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      ì¹´í…Œê³ ë¦¬\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      í‰ì \r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      ì½ì€ ë‚ ì§œ\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      ê´€ë¦¬\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n                  {filteredBooks.map((book) => (\r\n                    <tr \r\n                      key={book._id} \r\n                      onClick={() => handleBookDetailClick(book)}\r\n                      className=\"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors\"\r\n                    >\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                          {book.coverImage ? (\r\n                            <img \r\n                              src={book.coverImage} \r\n                              alt={book.title}\r\n                              className=\"w-12 h-16 object-cover rounded shadow-sm\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"w-12 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded flex items-center justify-center shadow-sm\">\r\n                              <FaBook className=\"text-white text-lg\" />\r\n                            </div>\r\n                          )}\r\n                          <div>\r\n                            <p className=\"font-semibold text-gray-900 dark:text-white\">\r\n                              {book.title}\r\n                            </p>\r\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\r\n                              {book.learnings?.length || 0}ê°œì˜ í•™ìŠµ ë‚´ìš©\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <p className=\"text-sm text-gray-900 dark:text-gray-300\">\r\n                          {book.author}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\r\n                          {book.category}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        {renderRating(book.rating)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <p className=\"text-sm text-gray-900 dark:text-gray-300\">\r\n                          {formatDate(book.readDate)}\r\n                        </p>\r\n                      </td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <div className=\"flex items-center justify-end gap-2\">\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation()\r\n                              handleBookDetailClick(book)\r\n                            }}\r\n                            className=\"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors\"\r\n                            title=\"ìƒì„¸ë³´ê¸°\"\r\n                          >\r\n                            <FaEye />\r\n                          </button>\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation()\r\n                              bookActions.handleEdit(book)\r\n                            }}\r\n                            className=\"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors\"\r\n                            title=\"ìˆ˜ì •\"\r\n                          >\r\n                            <FaEdit />\r\n                          </button>\r\n                          <button\r\n                            onClick={(e) => {\r\n                              e.stopPropagation()\r\n                              bookActions.handleDelete(book)\r\n                            }}\r\n                            disabled={bookState.isDeleting}\r\n                            className=\"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors disabled:opacity-50\"\r\n                            title=\"ì‚­ì œ\"\r\n                          >\r\n                            <FaTrash />\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* ì„œì  í¼ ëª¨ë‹¬ */}\r\n        {bookState.showForm && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                    {bookState.editingItem ? 'ì„œì  ìˆ˜ì •' : 'ì„œì  ì¶”ê°€'}\r\n                  </h2>\r\n                  <button\r\n                    onClick={bookActions.handleCancel}\r\n                    className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n                  >\r\n                    <FaTimes />\r\n                  </button>\r\n                </div>\r\n                <BookForm\r\n                  data={bookState.editingItem}\r\n                  onSave={bookActions.handleSave}\r\n                  onCancel={bookActions.handleCancel}\r\n                  isSaving={bookState.isSaving}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ğŸŒŸ ì„œì  ìƒì„¸ë³´ê¸° ëª¨ë‹¬ */}\r\n        {showBookDetailModal && selectedBook && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] flex flex-col shadow-2xl\">\r\n              {/* ğŸŒŸ ê³ ì • í—¤ë” */}\r\n              <div className=\"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 p-6\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex items-start gap-4 flex-1\">\r\n                    {selectedBook.coverImage ? (\r\n                      <img \r\n                        src={selectedBook.coverImage} \r\n                        alt={selectedBook.title}\r\n                        className=\"w-20 h-28 object-cover rounded shadow-lg flex-shrink-0\"\r\n                      />\r\n                    ) : (\r\n                      <div className=\"w-20 h-28 bg-gradient-to-br from-blue-400 to-blue-600 rounded flex items-center justify-center shadow-lg flex-shrink-0\">\r\n                        <FaBook className=\"text-white text-2xl\" />\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2 truncate\">\r\n                        {selectedBook.title}\r\n                      </h2>\r\n                      <p className=\"text-gray-600 dark:text-gray-400 mb-3\">\r\n                        ì €ì: {selectedBook.author}\r\n                      </p>\r\n                      <div className=\"flex items-center gap-3 flex-wrap\">\r\n                        <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200\">\r\n                          {selectedBook.category}\r\n                        </span>\r\n                        {renderRating(selectedBook.rating)}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowBookDetailModal(false)\r\n                      setSelectedChapterId(null)\r\n                    }}\r\n                    className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0\"\r\n                  >\r\n                    <FaTimes className=\"text-xl\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* ğŸŒŸ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•œ ì½˜í…ì¸  ì˜ì—­ */}\r\n              <div className=\"flex-1 overflow-y-auto p-6\">\r\n                <ChapterLearningList\r\n                  chapters={chapters}\r\n                  onAddChapter={() => {\r\n                    setShowChapterForm(true)\r\n                    setEditingChapter(null)\r\n                  }}\r\n                  onEditChapter={(chapter) => {\r\n                    setEditingChapter(chapter)\r\n                    setShowChapterForm(true)\r\n                  }}\r\n                  onDeleteChapter={handleDeleteChapter}\r\n                  onAddLearning={handleAddLearningClick}\r\n                  onEditLearning={handleEditLearningClick}\r\n                  onDeleteLearning={handleDeleteLearningClick}\r\n                  isAuthenticated={true}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ğŸŒŸ ëª©ì°¨ í¼ ëª¨ë‹¬ */}\r\n        {showChapterForm && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60]\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full mx-4 shadow-2xl\">\r\n              <ChapterForm\r\n                chapter={editingChapter}\r\n                onSave={handleSaveChapter}\r\n                onCancel={() => {\r\n                  setShowChapterForm(false)\r\n                  setEditingChapter(null)\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* ğŸŒŸ í•™ìŠµ ë‚´ìš© í¼ ëª¨ë‹¬ */}\r\n        {showLearningForm && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60] p-4\">\r\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl\">\r\n              <LearningForm\r\n                learning={editingLearning}\r\n                onSave={handleSaveLearning}\r\n                onCancel={() => {\r\n                  setShowLearningForm(false)\r\n                  setEditingLearning(null)\r\n                  setSelectedChapterId(null)\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BookManager\r\n","import React, { useState, useMemo, useEffect } from 'react'\nimport { FaPlus, FaEdit, FaTrash, FaVideo, FaStar } from 'react-icons/fa'\nimport { VideoLearning, VideoLearningFormData } from '../../types'\nimport { useVideoLearningManagerData } from '../../hooks/useVideoLearnings'\nimport { useCRUDManager } from '../../hooks/useCRUDManager'\nimport { useToastHelpers } from '../../hooks/useToast'\nimport VideoLearningForm from '../forms/VideoLearningForm'\nimport { formatDate } from '../../utils/dateUtils'\nimport { extractUniqueCategories } from '../../utils/categoryUtils'\nimport { extractYouTubeId, getYouTubeThumbnail } from '../../utils/videoUtils'\n\ninterface VideoLearningManagerProps {\n  initialEditId?: string  // ğŸŒŸ URL stateë¡œ ì „ë‹¬ëœ ìˆ˜ì • ëŒ€ìƒ ID\n}\n\nconst VideoLearningManager: React.FC<VideoLearningManagerProps> = ({ initialEditId }) => {\n  const { success, error } = useToastHelpers()\n  const { \n    videoLearnings, \n    isLoading, \n    createVideoLearning, \n    updateVideoLearning, \n    deleteVideoLearning \n  } = useVideoLearningManagerData()\n\n  // ì˜ìƒ í•™ìŠµ CRUD ê´€ë¦¬\n  const [videoState, videoActions] = useCRUDManager<VideoLearning>({\n    onSave: async (data: VideoLearningFormData, editingItem) => {\n      console.log('ğŸ“¹ VideoLearningManager - ì €ì¥ ì‹œì‘:', data)\n      console.log('ğŸ”— skillIds:', data.skillIds)\n      \n      if (editingItem) {\n        console.log('âœï¸ ì˜ìƒ í•™ìŠµ ìˆ˜ì • ëª¨ë“œ:', editingItem._id)\n        const result = await updateVideoLearning(editingItem._id, data)\n        console.log('âœ… ìˆ˜ì • ê²°ê³¼:', result)\n        if (result.success) {\n          success('ì˜ìƒ í•™ìŠµ ìˆ˜ì • ì™„ë£Œ', 'ì˜ìƒ í•™ìŠµ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\n        }\n      } else {\n        console.log('â• ì˜ìƒ í•™ìŠµ ìƒì„± ëª¨ë“œ')\n        const result = await createVideoLearning(data)\n        console.log('âœ… ìƒì„± ê²°ê³¼:', result)\n        if (result.success) {\n          success('ì˜ìƒ í•™ìŠµ ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ ì˜ìƒ í•™ìŠµì´ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\n        }\n      }\n    },\n    onDelete: async (video: VideoLearning) => {\n      await deleteVideoLearning(video._id)\n      success('ì˜ìƒ í•™ìŠµ ì‚­ì œ ì™„ë£Œ', `${video.title}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)\n    },\n    onError: (err) => {\n      error('ì‘ì—… ì‹¤íŒ¨', err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\n    }\n  })\n\n  // ì¹´í…Œê³ ë¦¬ í•„í„°\n  const [categoryFilter, setCategoryFilter] = useState<string>('all')\n  const [hasAutoOpened, setHasAutoOpened] = useState(false)  // ğŸŒŸ ìë™ ì—´ë¦¼ ì¶”ì \n  \n  // ë™ì  ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ\n  const availableCategories = useMemo(() => \n    extractUniqueCategories(videoLearnings), \n    [videoLearnings]\n  )\n\n  // í•„í„°ë§ëœ ì˜ìƒ ëª©ë¡\n  const filteredVideos = useMemo(() => {\n    if (categoryFilter === 'all') return videoLearnings\n    return videoLearnings.filter(video => video.category === categoryFilter)\n  }, [videoLearnings, categoryFilter])\n\n  // ğŸŒŸ initialEditIdê°€ ì „ë‹¬ë˜ë©´ ìë™ìœ¼ë¡œ í•´ë‹¹ ì˜ìƒ ìˆ˜ì • ëª¨ë“œë¡œ ì „í™˜ (í•œ ë²ˆë§Œ)\n  useEffect(() => {\n    if (initialEditId && videoLearnings.length > 0 && !hasAutoOpened) {\n      const videoToEdit = videoLearnings.find(video => video._id === initialEditId)\n      if (videoToEdit) {\n        console.log('ğŸ¯ ìë™ ìˆ˜ì • ëª¨ë“œ í™œì„±í™”:', videoToEdit.title)\n        videoActions.handleEdit(videoToEdit)\n        setHasAutoOpened(true)  // ğŸŒŸ í•œ ë²ˆë§Œ ì‹¤í–‰ë˜ë„ë¡ í‘œì‹œ\n      }\n    }\n  }, [initialEditId, videoLearnings, hasAutoOpened, videoActions])\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* í—¤ë” */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\n            <FaVideo className=\"text-red-600\" /> ì˜ìƒ í•™ìŠµ ê´€ë¦¬\n          </h2>\n          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n            ìœ íŠœë¸Œ ì˜ìƒì„ í†µí•œ í•™ìŠµ ê¸°ë¡ì„ ê´€ë¦¬í•©ë‹ˆë‹¤\n          </p>\n        </div>\n        {!videoState.showForm && (\n          <button\n            onClick={videoActions.handleCreate}\n            className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium\"\n          >\n            <FaPlus /> ìƒˆ ì˜ìƒ ì¶”ê°€\n          </button>\n        )}\n      </div>\n\n      {/* ì¹´í…Œê³ ë¦¬ í•„í„° */}\n      {!videoState.showForm && availableCategories.length > 0 && (\n        <div className=\"flex gap-2 flex-wrap\">\n          <button\n            onClick={() => setCategoryFilter('all')}\n            className={`px-4 py-2 rounded-lg transition-colors font-medium ${\n              categoryFilter === 'all'\n                ? 'bg-primary-600 text-white'\n                : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600'\n            }`}\n          >\n            ì „ì²´ ({videoLearnings.length})\n          </button>\n          {availableCategories.map((cat) => {\n            const count = videoLearnings.filter(v => v.category === cat).length\n            return (\n              <button\n                key={cat}\n                onClick={() => setCategoryFilter(cat)}\n                className={`px-4 py-2 rounded-lg transition-colors font-medium ${\n                  categoryFilter === cat\n                    ? 'bg-primary-600 text-white'\n                    : 'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600'\n                }`}\n              >\n                {cat} ({count})\n              </button>\n            )\n          })}\n        </div>\n      )}\n\n      {/* í¼ */}\n      {videoState.showForm && (\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700\">\n          <h3 className=\"text-xl font-bold text-gray-900 dark:text-white mb-6\">\n            {videoState.editingItem ? 'ì˜ìƒ í•™ìŠµ ìˆ˜ì •' : 'ìƒˆ ì˜ìƒ í•™ìŠµ ì¶”ê°€'}\n          </h3>\n          <VideoLearningForm\n            data={videoState.editingItem || undefined}\n            onSave={videoActions.handleSave}\n            onCancel={videoActions.handleCancel}\n            isSaving={videoState.isSaving}\n            availableCategories={availableCategories}\n          />\n        </div>\n      )}\n\n      {/* ì˜ìƒ ëª©ë¡ */}\n      {!videoState.showForm && (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {filteredVideos.map((video) => {\n            const videoId = video.videoId\n            const thumbnailUrl = videoId ? getYouTubeThumbnail(videoId, 'hqdefault') : null\n\n            return (\n              <div\n                key={video._id}\n                className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow\"\n              >\n                {/* ì¸ë„¤ì¼ */}\n                {thumbnailUrl && (\n                  <div className=\"relative aspect-video bg-gray-200 dark:bg-gray-700\">\n                    <img\n                      src={thumbnailUrl}\n                      alt={video.title}\n                      className=\"w-full h-full object-cover\"\n                    />\n                    <div className=\"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-white text-xs font-medium\">\n                      YouTube\n                    </div>\n                  </div>\n                )}\n\n                {/* ë‚´ìš© */}\n                <div className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <span className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-medium\">\n                      {video.category}\n                    </span>\n                    {video.rating && (\n                      <div className=\"flex items-center gap-1\">\n                        {Array.from({ length: 5 }, (_, i) => (\n                          <FaStar\n                            key={i}\n                            className={`text-xs ${\n                              i < video.rating! ? 'text-yellow-500' : 'text-gray-300 dark:text-gray-600'\n                            }`}\n                          />\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                  <h4 className=\"font-bold text-gray-900 dark:text-white mb-2 line-clamp-2\">\n                    {video.title}\n                  </h4>\n\n                  {video.purpose && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2\">\n                      {video.purpose}\n                    </p>\n                  )}\n\n                  <div className=\"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-4\">\n                    <span>{formatDate(video.watchDate)}</span>\n                    {video.skillIds && video.skillIds.length > 0 && (\n                      <>\n                        <span>â€¢</span>\n                        <span>ìŠ¤í‚¬ {video.skillIds.length}ê°œ</span>\n                      </>\n                    )}\n                  </div>\n\n                  {/* ì•¡ì…˜ ë²„íŠ¼ */}\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => videoActions.handleEdit(video)}\n                      className=\"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm font-medium\"\n                    >\n                      <FaEdit /> ìˆ˜ì •\n                    </button>\n                    <button\n                      onClick={() => videoActions.handleDelete(video)}\n                      className=\"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-sm font-medium\"\n                    >\n                      <FaTrash /> ì‚­ì œ\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n\n      {/* ë¹ˆ ìƒíƒœ */}\n      {!videoState.showForm && filteredVideos.length === 0 && (\n        <div className=\"text-center py-12\">\n          <FaVideo className=\"text-6xl text-gray-400 mx-auto mb-4\" />\n          <p className=\"text-xl text-gray-600 dark:text-gray-400 mb-4\">\n            {categoryFilter === 'all' \n              ? 'ì•„ì§ ë“±ë¡ëœ ì˜ìƒ í•™ìŠµì´ ì—†ìŠµë‹ˆë‹¤' \n              : `${categoryFilter} ì¹´í…Œê³ ë¦¬ì— ì˜ìƒ í•™ìŠµì´ ì—†ìŠµë‹ˆë‹¤`}\n          </p>\n          <button\n            onClick={videoActions.handleCreate}\n            className=\"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium\"\n          >\n            <FaPlus /> ì²« ì˜ìƒ ì¶”ê°€í•˜ê¸°\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default VideoLearningManager\n\n","/**\r\n * ì¹´í…Œê³ ë¦¬ ê´€ë ¨ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤\r\n */\r\n\r\n/**\r\n * ì¹´í…Œê³ ë¦¬ ë¬¸ìì—´ì˜ ì²« ê¸€ìë¥¼ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ì—¬ í‘œì‹œëª… ìƒì„±\r\n * @param category - ì¹´í…Œê³ ë¦¬ ë¬¸ìì—´\r\n * @returns í‘œì‹œìš© ì¹´í…Œê³ ë¦¬ ì´ë¦„\r\n */\r\nexport const formatCategoryDisplayName = (category: string): string => {\r\n  if (!category) return 'ê¸°íƒ€'\r\n  \r\n  // íŠ¹ë³„í•œ ê²½ìš° ì²˜ë¦¬\r\n  const specialCases: { [key: string]: string } = {\r\n    'plc': 'PLC',\r\n    'iot': 'IoT',\r\n    'ë°ì´í„°ë¶„ì„': 'ë°ì´í„° ë¶„ì„',\r\n    'ë¡œë´‡ê³µí•™': 'ë¡œë´‡ ê³µí•™',\r\n    'ê¸°íƒ€': 'ê¸°íƒ€',\r\n    'all': 'ì „ì²´'\r\n  }\r\n  \r\n  const lowerCategory = category.toLowerCase()\r\n  if (specialCases[lowerCategory]) {\r\n    return specialCases[lowerCategory]\r\n  }\r\n  \r\n  // ì¼ë°˜ì ì¸ ê²½ìš°: ì²« ê¸€ìë§Œ ëŒ€ë¬¸ìë¡œ ë³€í™˜\r\n  return category.charAt(0).toUpperCase() + category.slice(1)\r\n}\r\n\r\n/**\r\n * ì±… ëª©ë¡ì—ì„œ ëª¨ë“  ê³ ìœ  ì¹´í…Œê³ ë¦¬ë¥¼ ì¶”ì¶œ\r\n * @param books - ì±… ëª©ë¡\r\n * @returns ê³ ìœ  ì¹´í…Œê³ ë¦¬ ë°°ì—´ (ì†Œë¬¸ìë¡œ ì •ê·œí™”)\r\n */\r\nexport const extractUniqueCategories = (books: any[]): string[] => {\r\n  const categories = new Set<string>()\r\n  \r\n  // ê¸°ë³¸ ì¹´í…Œê³ ë¦¬ ì¶”ê°€\r\n  categories.add('all')\r\n  \r\n  // ì±…ì—ì„œ ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ\r\n  books.forEach(book => {\r\n    if (book.category) {\r\n      categories.add(book.category.toLowerCase())\r\n    }\r\n  })\r\n  \r\n  return Array.from(categories).sort()\r\n}\r\n\r\n/**\r\n * ì¹´í…Œê³ ë¦¬ë³„ í‘œì‹œëª… ë§¤í•‘ ê°ì²´ ìƒì„±\r\n * @param categories - ì¹´í…Œê³ ë¦¬ ë°°ì—´\r\n * @returns ì¹´í…Œê³ ë¦¬ í‘œì‹œëª… ë§¤í•‘ ê°ì²´\r\n */\r\nexport const createCategoryDisplayNames = (categories: string[]): { [key: string]: string } => {\r\n  const displayNames: { [key: string]: string } = {}\r\n  \r\n  categories.forEach(category => {\r\n    displayNames[category] = formatCategoryDisplayName(category)\r\n  })\r\n  \r\n  return displayNames\r\n}\r\n","import React, { useState } from 'react'\r\nimport { FaPlus, FaEdit, FaTrash, FaList, FaStar, FaVideo, FaChevronDown, FaChevronUp } from 'react-icons/fa'\r\nimport { VideoPlaylist, VideoPlaylistFormData, PlaylistVideoFormData } from '../../types'\r\nimport { useVideoPlaylistManagerData, usePlaylistVideos, useCreatePlaylistVideo, useUpdatePlaylistVideo, useDeletePlaylistVideo } from '../../hooks/useVideoPlaylists'\r\nimport { useCRUDManager } from '../../hooks/useCRUDManager'\r\nimport { useToastHelpers } from '../../hooks/useToast'\r\nimport VideoPlaylistForm from '../forms/VideoPlaylistForm'\r\nimport PlaylistVideoForm from '../forms/PlaylistVideoForm'\r\nimport { formatDate } from '../../utils/dateUtils'\r\nimport { extractYouTubeId } from '../../utils/videoUtils'\r\n\r\nconst VideoPlaylistManager: React.FC = () => {\r\n  const { success, error } = useToastHelpers()\r\n  const { \r\n    playlists, \r\n    isLoading, \r\n    createPlaylist, \r\n    updatePlaylist, \r\n    deletePlaylist \r\n  } = useVideoPlaylistManagerData()\r\n\r\n  const [expandedPlaylistId, setExpandedPlaylistId] = useState<string | null>(null)\r\n  const [showVideoForm, setShowVideoForm] = useState(false)\r\n  const [editingVideo, setEditingVideo] = useState<any>(null)\r\n  const [showBulkAddForm, setShowBulkAddForm] = useState(false)\r\n  const [bulkVideoUrls, setBulkVideoUrls] = useState('')\r\n\r\n  const { data: playlistVideos = [] } = usePlaylistVideos(expandedPlaylistId || undefined)\r\n  const createVideoMutation = useCreatePlaylistVideo()\r\n  const updateVideoMutation = useUpdatePlaylistVideo()\r\n  const deleteVideoMutation = useDeletePlaylistVideo()\r\n\r\n  const [playlistState, playlistActions] = useCRUDManager<VideoPlaylist>({\r\n    onSave: async (data: VideoPlaylistFormData, editingItem) => {\r\n      if (editingItem) {\r\n        const result = await updatePlaylist(editingItem._id, data)\r\n        if (result.success) {\r\n          success('ì¬ìƒ ëª©ë¡ ìˆ˜ì • ì™„ë£Œ', 'ì¬ìƒ ëª©ë¡ì´ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        }\r\n      } else {\r\n        const result = await createPlaylist(data)\r\n        if (result.success) {\r\n          success('ì¬ìƒ ëª©ë¡ ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ ì¬ìƒ ëª©ë¡ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        }\r\n      }\r\n    },\r\n    onDelete: async (playlist: VideoPlaylist) => {\r\n      await deletePlaylist(playlist._id)\r\n      success('ì¬ìƒ ëª©ë¡ ì‚­ì œ ì™„ë£Œ', `${playlist.title}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)\r\n    },\r\n    onError: (err) => {\r\n      error('ì‘ì—… ì‹¤íŒ¨', err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  })\r\n\r\n  // ì˜ìƒ ì €ì¥ í•¸ë“¤ëŸ¬\r\n  const handleSaveVideo = async (data: PlaylistVideoFormData) => {\r\n    try {\r\n      if (editingVideo) {\r\n        await updateVideoMutation.mutateAsync({ id: editingVideo._id, data })\r\n        success('ì˜ìƒ ìˆ˜ì • ì™„ë£Œ', 'ì˜ìƒ í•™ìŠµ ê¸°ë¡ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      } else {\r\n        await createVideoMutation.mutateAsync(data)\r\n        success('ì˜ìƒ ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ ì˜ìƒ í•™ìŠµ ê¸°ë¡ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n      }\r\n      setShowVideoForm(false)\r\n      setEditingVideo(null)\r\n    } catch (err) {\r\n      error('ì˜ìƒ ì €ì¥ ì‹¤íŒ¨', 'ì˜ìƒ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }\r\n\r\n  // ì˜ìƒ ì‚­ì œ í•¸ë“¤ëŸ¬\r\n  const handleDeleteVideo = async (videoId: string) => {\r\n    if (!confirm('ì´ ì˜ìƒ í•™ìŠµ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return\r\n    try {\r\n      await deleteVideoMutation.mutateAsync(videoId)\r\n      success('ì˜ìƒ ì‚­ì œ ì™„ë£Œ', 'ì˜ìƒ í•™ìŠµ ê¸°ë¡ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n    } catch (err) {\r\n      error('ì˜ìƒ ì‚­ì œ ì‹¤íŒ¨', 'ì˜ìƒ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }\r\n\r\n  // ì˜ìƒ URL ì¼ê´„ ì¶”ê°€ í•¸ë“¤ëŸ¬\r\n  const handleBulkAddVideos = async () => {\r\n    if (!bulkVideoUrls.trim() || !expandedPlaylistId) {\r\n      alert('ì˜ìƒ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”')\r\n      return\r\n    }\r\n\r\n    const urls = bulkVideoUrls.split('\\n').map(url => url.trim()).filter((url): url is string => Boolean(url))\r\n    \r\n    if (urls.length === 0) {\r\n      alert('ìœ íš¨í•œ URLì´ ì—†ìŠµë‹ˆë‹¤')\r\n      return\r\n    }\r\n\r\n    try {\r\n      let successCount = 0\r\n      \r\n      for (const url of urls) {\r\n        if (!url) continue\r\n        \r\n        const videoId = extractYouTubeId(url)\r\n        \r\n        if (!videoId) {\r\n          console.warn(`ìœ íš¨í•˜ì§€ ì•Šì€ URL: ${url}`)\r\n          continue\r\n        }\r\n\r\n        const videoData: PlaylistVideoFormData = {\r\n          playlistId: expandedPlaylistId!,\r\n          videoId: videoId,\r\n          title: `ì˜ìƒ ${playlistVideos.length + successCount + 1}`,\r\n          keyTakeaways: '',\r\n          order: playlistVideos.length + successCount,\r\n        }\r\n\r\n        await createVideoMutation.mutateAsync(videoData)\r\n        successCount++\r\n      }\r\n\r\n      setBulkVideoUrls('')\r\n      setShowBulkAddForm(false)\r\n      success('ì¼ê´„ ì¶”ê°€ ì™„ë£Œ', `${successCount}ê°œì˜ ì˜ìƒì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤. ê° ì˜ìƒì˜ ì œëª©ê³¼ í•µì‹¬ ë°°ì›€ì„ ìˆ˜ì •í•´ì£¼ì„¸ìš”.`)\r\n    } catch (err) {\r\n      error('ì¼ê´„ ì¶”ê°€ ì‹¤íŒ¨', 'ì˜ìƒ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n          <FaList className=\"text-red-600\" />\r\n          ì¬ìƒ ëª©ë¡ ê´€ë¦¬\r\n        </h2>\r\n        <button\r\n          onClick={playlistActions.handleCreate}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md\"\r\n        >\r\n          <FaPlus />\r\n          ì¬ìƒ ëª©ë¡ ì¶”ê°€\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì¬ìƒ ëª©ë¡ í¼ */}\r\n      {playlistState.showForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6\">\r\n              <h2 className=\"text-xl font-semibold mb-4 text-gray-900 dark:text-white\">\r\n                {playlistState.editingItem ? 'ì¬ìƒ ëª©ë¡ ìˆ˜ì •' : 'ì¬ìƒ ëª©ë¡ ì¶”ê°€'}\r\n              </h2>\r\n              {playlistState.editingItem ? (\r\n                <VideoPlaylistForm\r\n                  data={playlistState.editingItem}\r\n                  onSave={playlistActions.handleSave}\r\n                  onCancel={playlistActions.handleCancel}\r\n                  isSaving={playlistState.isSaving}\r\n                />\r\n              ) : (\r\n                <VideoPlaylistForm\r\n                  onSave={playlistActions.handleSave}\r\n                  onCancel={playlistActions.handleCancel}\r\n                  isSaving={playlistState.isSaving}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì˜ìƒ í¼ ëª¨ë‹¬ */}\r\n      {showVideoForm && expandedPlaylistId && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6\">\r\n              <h2 className=\"text-xl font-semibold mb-4 text-gray-900 dark:text-white\">\r\n                {editingVideo ? 'ì˜ìƒ í•™ìŠµ ê¸°ë¡ ìˆ˜ì •' : 'ì˜ìƒ í•™ìŠµ ê¸°ë¡ ì¶”ê°€'}\r\n              </h2>\r\n              <PlaylistVideoForm\r\n                playlistId={expandedPlaylistId}\r\n                data={editingVideo}\r\n                onSave={handleSaveVideo}\r\n                onCancel={() => {\r\n                  setShowVideoForm(false)\r\n                  setEditingVideo(null)\r\n                }}\r\n                isSaving={createVideoMutation.isPending || updateVideoMutation.isPending}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì¬ìƒ ëª©ë¡ ëª©ë¡ */}\r\n      <div className=\"grid gap-4\">\r\n        {playlists.map((playlist) => {\r\n          const isExpanded = expandedPlaylistId === playlist._id\r\n          const currentVideos = isExpanded ? playlistVideos : []\r\n          \r\n          return (\r\n            <div\r\n              key={playlist._id}\r\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow\"\r\n            >\r\n              {/* ì¬ìƒ ëª©ë¡ í—¤ë” */}\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center gap-2 mb-2\">\r\n                      <h3 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                        {playlist.title}\r\n                      </h3>\r\n                      <button\r\n                        onClick={() => setExpandedPlaylistId(isExpanded ? null : playlist._id)}\r\n                        className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded\"\r\n                        title={isExpanded ? 'ì˜ìƒ ëª©ë¡ ì ‘ê¸°' : 'ì˜ìƒ ëª©ë¡ í¼ì¹˜ê¸°'}\r\n                      >\r\n                        {isExpanded ? <FaChevronUp /> : <FaChevronDown />}\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"flex flex-wrap gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2\">\r\n                      {/* ğŸŒŸ ë‹¤ì¤‘ ì¹´í…Œê³ ë¦¬ í‘œì‹œ */}\r\n                      {playlist.categoryIds && playlist.categoryIds.length > 0 ? (\r\n                        (playlist.categoryIds as any[]).map((catIdOrObj: any) => {\r\n                          const catName = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?.name\r\n                          return catName ? (\r\n                            <span \r\n                              key={typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id}\r\n                              className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded\"\r\n                            >\r\n                              {catName}\r\n                            </span>\r\n                          ) : null\r\n                        })\r\n                      ) : (\r\n                        // í˜¸í™˜ì„±: categoryIdsê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ category í‘œì‹œ\r\n                        playlist.category && (\r\n                          <span className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded\">\r\n                            {playlist.category}\r\n                          </span>\r\n                        )\r\n                      )}\r\n                      {playlist.rating && (\r\n                        <div className=\"flex items-center gap-1\">\r\n                          {Array.from({ length: 5 }, (_, i) => (\r\n                            <FaStar\r\n                              key={i}\r\n                              className={`text-sm ${\r\n                                i < playlist.rating! ? 'text-yellow-500' : 'text-gray-300'\r\n                              }`}\r\n                            />\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                      <span>ì‹œì²­ì¼: {formatDate(playlist.watchDate)}</span>\r\n                    </div>\r\n                    {playlist.purpose && (\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 line-clamp-2\">{playlist.purpose}</p>\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex gap-2 ml-4\">\r\n                    <button\r\n                      onClick={() => playlistActions.handleEdit(playlist)}\r\n                      className=\"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors\"\r\n                      title=\"ì¬ìƒ ëª©ë¡ ìˆ˜ì •\"\r\n                    >\r\n                      <FaEdit />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => playlistActions.handleDelete(playlist)}\r\n                      disabled={playlistState.isDeleting}\r\n                      className=\"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors\"\r\n                      title=\"ì¬ìƒ ëª©ë¡ ì‚­ì œ\"\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* ì˜ìƒ ê´€ë¦¬ ì„¹ì…˜ - í¼ì³ì§„ ê²½ìš°ì—ë§Œ í‘œì‹œ */}\r\n              {isExpanded && (\r\n                <div className=\"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-6\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h4 className=\"font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n                      <FaVideo /> ì˜ìƒ ê´€ë¦¬ ({currentVideos.length}ê°œ)\r\n                    </h4>\r\n                    <div className=\"flex gap-2\">\r\n                      <button\r\n                        onClick={() => setShowBulkAddForm(!showBulkAddForm)}\r\n                        className=\"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm\"\r\n                      >\r\n                        <FaList /> ì˜ìƒ ì¼ê´„ ì¶”ê°€\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          setEditingVideo(null)\r\n                          setShowVideoForm(true)\r\n                        }}\r\n                        className=\"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm\"\r\n                      >\r\n                        <FaPlus /> ì˜ìƒ ì¶”ê°€\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* ì˜ìƒ URL ì¼ê´„ ì¶”ê°€ í¼ */}\r\n                  {showBulkAddForm && (\r\n                    <div className=\"mb-4 p-4 border-2 border-green-500 rounded-lg bg-white dark:bg-gray-800\">\r\n                      <h5 className=\"font-bold text-gray-900 dark:text-white mb-2\">\r\n                        ğŸ“ ì˜ìƒ URL ì¼ê´„ ì¶”ê°€\r\n                      </h5>\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3\">\r\n                        ì¬ìƒ ëª©ë¡ì˜ ê° ì˜ìƒ URLì„ í•œ ì¤„ì— í•˜ë‚˜ì”© ì…ë ¥í•˜ì„¸ìš”. ìœ„ì—ì„œë¶€í„° ìˆœì„œëŒ€ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.\r\n                      </p>\r\n                      <textarea\r\n                        value={bulkVideoUrls}\r\n                        onChange={(e) => setBulkVideoUrls(e.target.value)}\r\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm mb-3\"\r\n                        rows={6}\r\n                        placeholder=\"https://www.youtube.com/watch?v=VIDEO_ID_1&#10;https://www.youtube.com/watch?v=VIDEO_ID_2&#10;https://www.youtube.com/watch?v=VIDEO_ID_3\"\r\n                      />\r\n                      <div className=\"flex gap-2\">\r\n                        <button\r\n                          onClick={handleBulkAddVideos}\r\n                          disabled={createVideoMutation.isPending}\r\n                          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium\"\r\n                        >\r\n                          {createVideoMutation.isPending ? 'ì¶”ê°€ ì¤‘...' : 'ì¼ê´„ ì¶”ê°€'}\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setShowBulkAddForm(false)\r\n                            setBulkVideoUrls('')\r\n                          }}\r\n                          className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm font-medium\"\r\n                        >\r\n                          ì·¨ì†Œ\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* ì˜ìƒ ëª©ë¡ */}\r\n                  {currentVideos.length > 0 ? (\r\n                    <div className=\"space-y-2\">\r\n                      {currentVideos.map((video, index) => (\r\n                        <div\r\n                          key={video._id}\r\n                          className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4\"\r\n                        >\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <div className=\"flex-1\">\r\n                              <div className=\"flex items-center gap-2 mb-1\">\r\n                                <span className=\"text-sm font-bold text-primary-600 dark:text-primary-400\">\r\n                                  #{index + 1}\r\n                                </span>\r\n                                <h5 className=\"font-semibold text-gray-900 dark:text-white\">\r\n                                  {video.title}\r\n                                </h5>\r\n                              </div>\r\n                              <p className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                                ID: {video.videoId}\r\n                              </p>\r\n                              {video.keyTakeaways && (\r\n                                <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2\">\r\n                                  {video.keyTakeaways}\r\n                                </p>\r\n                              )}\r\n                            </div>\r\n                            <div className=\"flex gap-2 ml-4\">\r\n                              <button\r\n                                onClick={() => {\r\n                                  setEditingVideo(video)\r\n                                  setShowVideoForm(true)\r\n                                }}\r\n                                className=\"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded transition-colors\"\r\n                                title=\"ì˜ìƒ ìˆ˜ì •\"\r\n                              >\r\n                                <FaEdit />\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleDeleteVideo(video._id)}\r\n                                className=\"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors\"\r\n                                title=\"ì˜ìƒ ì‚­ì œ\"\r\n                              >\r\n                                <FaTrash />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"text-center py-8 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg\">\r\n                      <FaVideo className=\"text-4xl mx-auto mb-2 opacity-30\" />\r\n                      <p className=\"text-sm\">ì´ ì¬ìƒ ëª©ë¡ì— ë“±ë¡ëœ ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤</p>\r\n                      <p className=\"text-xs mt-1\">ìœ„ì˜ \"ì˜ìƒ ì¼ê´„ ì¶”ê°€\" ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì„¸ìš”</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )\r\n        })}\r\n\r\n        {playlists.length === 0 && (\r\n          <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\r\n            <FaList className=\"text-6xl mx-auto mb-4 opacity-30\" />\r\n            <p>ì•„ì§ ë“±ë¡ëœ ì¬ìƒ ëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VideoPlaylistManager\r\n\r\n","import React, { useState, useMemo } from 'react'\r\nimport { FaPlus, FaEdit, FaTrash } from 'react-icons/fa'\r\nimport { Experience, ExperienceFormData } from '../../types'\r\nimport ExperienceForm from '../forms/ExperienceForm'\r\nimport { useExperienceManagerData } from '../../hooks/useExperienceManagerData'\r\n\r\ninterface ExperienceManagerProps {\r\n  experienceFilter?: 'all' | 'company' | 'year'\r\n  experienceSearchTerm?: string\r\n  selectedExperienceCompany?: string\r\n  selectedExperienceYear?: string\r\n}\r\n\r\nconst ExperienceManager: React.FC<ExperienceManagerProps> = ({ \r\n  experienceFilter = 'all', \r\n  experienceSearchTerm = '', \r\n  selectedExperienceCompany = '',\r\n  selectedExperienceYear = ''\r\n}) => {\r\n  const { experiences, isLoading, createExperience, updateExperience, deleteExperience } = useExperienceManagerData()\r\n  const [showForm, setShowForm] = useState(false)\r\n  const [editingItem, setEditingItem] = useState<Experience | null>(null)\r\n  const [isSaving, setIsSaving] = useState(false)\r\n  const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n  // í•„í„°ë§ëœ ê²½ë ¥ ëª©ë¡ ê³„ì‚°\r\n  const filteredExperiences = useMemo(() => {\r\n    let filtered = [...experiences]\r\n\r\n    // í•„í„° ì ìš©\r\n    if (experienceFilter === 'company' && selectedExperienceCompany) {\r\n      filtered = filtered.filter(exp => exp.company === selectedExperienceCompany)\r\n    } else if (experienceFilter === 'year' && selectedExperienceYear) {\r\n      filtered = filtered.filter(exp => {\r\n        // periodì—ì„œ ì—°ë„ ì¶”ì¶œ (ì˜ˆ: \"2023.01 - 2023.12\" ë˜ëŠ” \"2023 - í˜„ì¬\")\r\n        const period = exp.period || ''\r\n        return period.includes(selectedExperienceYear)\r\n      })\r\n    }\r\n\r\n    // ê²€ìƒ‰ì–´ ì ìš©\r\n    if (experienceSearchTerm) {\r\n      const searchLower = experienceSearchTerm.toLowerCase()\r\n      filtered = filtered.filter(exp => \r\n        exp.title.toLowerCase().includes(searchLower) ||\r\n        exp.company.toLowerCase().includes(searchLower) ||\r\n        (exp.description && exp.description.toLowerCase().includes(searchLower))\r\n      )\r\n    }\r\n\r\n    return filtered\r\n  }, [experiences, experienceFilter, experienceSearchTerm, selectedExperienceCompany, selectedExperienceYear])\r\n\r\n  // íšŒì‚¬ ëª©ë¡ì€ í•„ìš”ì‹œ ì‚¬ìš©\r\n  // const experienceCompanies = useMemo(() => {\r\n  //   const companies = [...new Set(experiences.map(exp => exp.company))]\r\n  //   return companies.sort()\r\n  // }, [experiences])\r\n\r\n  // ì—°ë„ ëª©ë¡ì€ í•„ìš”ì‹œ ì‚¬ìš©\r\n  // const experienceYears = useMemo(() => {\r\n  //   const years = new Set<string>()\r\n  //   experiences.forEach(exp => {\r\n  //     const period = exp.period || ''\r\n  //     const yearMatches = period.match(/\\b(20\\d{2})\\b/g)\r\n  //     if (yearMatches) {\r\n  //       yearMatches.forEach(year => years.add(year))\r\n  //     }\r\n  //   })\r\n  //   return Array.from(years).sort().reverse()\r\n  // }, [experiences])\r\n\r\n  const handleSave = async (data: ExperienceFormData) => {\r\n    try {\r\n      setIsSaving(true)\r\n      if (editingItem) {\r\n        const result = await updateExperience(editingItem._id!, data)\r\n        if (result.success) {\r\n          setShowForm(false)\r\n          setEditingItem(null)\r\n        }\r\n      } else {\r\n        const result = await createExperience(data)\r\n        if (result.success) {\r\n          setShowForm(false)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('ì €ì¥ ì‹¤íŒ¨:', error)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    setShowForm(false)\r\n    setEditingItem(null)\r\n  }\r\n\r\n  const handleDelete = async (experience: Experience) => {\r\n    if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {\r\n      try {\r\n        setIsDeleting(true)\r\n        await deleteExperience(experience._id!)\r\n      } catch (error) {\r\n        console.error('ì‚­ì œ ì‹¤íŒ¨:', error)\r\n      } finally {\r\n        setIsDeleting(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleAddNew = () => {\r\n    setEditingItem(null)\r\n    setShowForm(true)\r\n  }\r\n\r\n  const handleEdit = (experience: Experience) => {\r\n    setEditingItem(experience)\r\n    setShowForm(true)\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2\">ê²½ë ¥ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold\">ê²½ë ¥ ê´€ë¦¬</h2>\r\n        <button\r\n          onClick={handleAddNew}\r\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n        >\r\n          <FaPlus />\r\n          ê²½ë ¥ ì¶”ê°€\r\n        </button>\r\n      </div>\r\n\r\n      {/* í•„í„° ì •ë³´ í‘œì‹œ */}\r\n      {(experienceFilter !== 'all' || experienceSearchTerm || selectedExperienceCompany || selectedExperienceYear) && (\r\n        <div className=\"mb-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                í˜„ì¬ í•„í„°: \r\n                {experienceFilter === 'all' && !experienceSearchTerm && ' ğŸ’¼ ëª¨ë“  ê²½ë ¥'}\r\n                {experienceFilter === 'company' && selectedExperienceCompany && ` ğŸ¢ ${selectedExperienceCompany} íšŒì‚¬`}\r\n                {experienceFilter === 'year' && selectedExperienceYear && ` ğŸ“… ${selectedExperienceYear}ë…„`}\r\n                {experienceSearchTerm && ` ğŸ” \"${experienceSearchTerm}\" ê²€ìƒ‰`}\r\n              </h4>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                {filteredExperiences.length}ê°œ ê²½ë ¥ í‘œì‹œ ì¤‘ (ì „ì²´ {experiences.length}ê°œ)\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {showForm && (\r\n        <div className=\"mb-6\">\r\n          <ExperienceForm\r\n            data={editingItem}\r\n            onSave={handleSave}\r\n            onCancel={handleCancel}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* ê²½ë ¥ ëª©ë¡ */}\r\n      {filteredExperiences.length > 0 ? (\r\n        <div className=\"space-y-4\">\r\n          {filteredExperiences.map((experience) => (\r\n            <div key={experience._id} className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600\">\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <h3 className=\"font-semibold text-lg\">{experience.title}</h3>\r\n                  <p className=\"text-gray-600 dark:text-gray-400\">{experience.company}</p>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-500\">\r\n                    {experience.period}\r\n                  </p>\r\n                  {experience.description && (\r\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2\">\r\n                      {experience.description}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex gap-2 ml-4\">\r\n                  <button\r\n                    onClick={() => handleEdit(experience)}\r\n                    className=\"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n                    disabled={isSaving || isDeleting}\r\n                  >\r\n                    <FaEdit />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(experience)}\r\n                    className=\"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\r\n                    disabled={isSaving || isDeleting}\r\n                  >\r\n                    <FaTrash />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-lg mb-4\">\r\n            {experienceFilter !== 'all' || experienceSearchTerm || selectedExperienceCompany || selectedExperienceYear\r\n              ? 'í•„í„° ì¡°ê±´ì— ë§ëŠ” ê²½ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.'\r\n              : 'ë“±ë¡ëœ ê²½ë ¥ì´ ì—†ìŠµë‹ˆë‹¤.'\r\n            }\r\n          </p>\r\n          {(experienceFilter !== 'all' || experienceSearchTerm || selectedExperienceCompany || selectedExperienceYear) && (\r\n            <p className=\"text-sm text-gray-400 dark:text-gray-500\">\r\n              í•„í„°ë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ExperienceManager","import React, { useState, useMemo } from 'react'\r\nimport { FaPlus, FaEdit, FaTrash } from 'react-icons/fa'\r\nimport { Project, ProjectFormData } from '../../types'\r\nimport ProjectForm from '../forms/ProjectForm'\r\nimport { useProjectManagerData } from '../../hooks/useProjectManagerData'\r\n\r\ninterface ProjectManagerProps {\r\n  projectFilter?: 'all' | 'category' | 'featured'\r\n  projectSearchTerm?: string\r\n  selectedProjectCategory?: string\r\n}\r\n\r\nconst ProjectManager: React.FC<ProjectManagerProps> = ({ \r\n  projectFilter = 'all', \r\n  projectSearchTerm = '', \r\n  selectedProjectCategory = ''\r\n}) => {\r\n  const { projects, isLoading, createProject, updateProject, deleteProject } = useProjectManagerData()\r\n  const [showForm, setShowForm] = useState(false)\r\n  const [editingItem, setEditingItem] = useState<Project | null>(null)\r\n  const [isSaving, setIsSaving] = useState(false)\r\n  const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n  // í•„í„°ë§ëœ í”„ë¡œì íŠ¸ ëª©ë¡ ê³„ì‚°\r\n  const filteredProjects = useMemo(() => {\r\n    let filtered = [...projects]\r\n\r\n    // í•„í„° ì ìš©\r\n    if (projectFilter === 'category' && selectedProjectCategory) {\r\n      filtered = filtered.filter(project => project.category === selectedProjectCategory)\r\n    } else if (projectFilter === 'featured') {\r\n      // ì£¼ìš” í”„ë¡œì íŠ¸: ì™„ë£Œëœ í”„ë¡œì íŠ¸ ì¤‘ ìƒì„¸ ì„¤ëª…ì´ ìˆëŠ” ê²ƒ\r\n      filtered = filtered.filter(project => \r\n        project.status === 'completed' && \r\n        project.detailedDescription && \r\n        project.detailedDescription.trim().length > 0\r\n      )\r\n    }\r\n\r\n    // ê²€ìƒ‰ì–´ ì ìš©\r\n    if (projectSearchTerm) {\r\n      const searchLower = projectSearchTerm.toLowerCase()\r\n      filtered = filtered.filter(project => \r\n        project.title.toLowerCase().includes(searchLower) ||\r\n        project.description.toLowerCase().includes(searchLower) ||\r\n        (project.technologies && project.technologies.some(tech => \r\n          tech.toLowerCase().includes(searchLower)\r\n        )) ||\r\n        (project.category && project.category.toLowerCase().includes(searchLower))\r\n      )\r\n    }\r\n\r\n    return filtered\r\n  }, [projects, projectFilter, projectSearchTerm, selectedProjectCategory])\r\n\r\n  // ì¹´í…Œê³ ë¦¬ ëª©ë¡ì€ í•„ìš”ì‹œ ì‚¬ìš©\r\n  // const projectCategories = useMemo(() => {\r\n  //   const categories = [...new Set(projects.map(project => project.category).filter(Boolean))]\r\n  //   return categories.sort()\r\n  // }, [projects])\r\n\r\n  // ì£¼ìš” í”„ë¡œì íŠ¸ ìˆ˜ ê³„ì‚°\r\n  const featuredProjectsCount = useMemo(() => {\r\n    return projects.filter(project => \r\n      project.status === 'completed' && \r\n      project.detailedDescription && \r\n      project.detailedDescription.trim().length > 0\r\n    ).length\r\n  }, [projects])\r\n\r\n  const handleSave = async (data: ProjectFormData) => {\r\n    console.log('ğŸ¯ ProjectManager handleSave í˜¸ì¶œë¨')\r\n    console.log('ğŸ“¦ ë°›ì€ ë°ì´í„°:', data)\r\n    console.log('ğŸ”— skillIds:', data.skillIds)\r\n    \r\n    try {\r\n      setIsSaving(true)\r\n      console.log('â³ isSaving = true ì„¤ì •ë¨')\r\n      \r\n      if (editingItem) {\r\n        console.log('âœï¸ í”„ë¡œì íŠ¸ ìˆ˜ì • ëª¨ë“œ:', editingItem._id)\r\n        const result = await updateProject(editingItem._id!, data)\r\n        console.log('âœ… ìˆ˜ì • ê²°ê³¼:', result)\r\n        if (result.success) {\r\n          setShowForm(false)\r\n          setEditingItem(null)\r\n          alert('âœ… í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!')\r\n        } else {\r\n          // ğŸŒŸ ì„œë²„ ì˜¤ë¥˜ ë©”ì‹œì§€ ìƒì„¸ ì¶œë ¥\r\n          console.error('âŒ ì„œë²„ ê±°ë¶€ ì´ìœ :', result.error)\r\n          const errorMsg = (result.error as any)?.response?.data?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'\r\n          alert(`âŒ í”„ë¡œì íŠ¸ ìˆ˜ì • ì‹¤íŒ¨: ${errorMsg}`)\r\n          if ((result.error as any)?.response?.data) {\r\n            console.error('ğŸ“‹ ì„œë²„ ì‘ë‹µ ìƒì„¸:', (result.error as any).response.data)\r\n          }\r\n        }\r\n      } else {\r\n        console.log('â• í”„ë¡œì íŠ¸ ìƒì„± ëª¨ë“œ')\r\n        const result = await createProject(data)\r\n        console.log('âœ… ìƒì„± ê²°ê³¼:', result)\r\n        if (result.success) {\r\n          setShowForm(false)\r\n          alert('âœ… í”„ë¡œì íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!')\r\n        } else {\r\n          // ğŸŒŸ ì„œë²„ ì˜¤ë¥˜ ë©”ì‹œì§€ ìƒì„¸ ì¶œë ¥\r\n          console.error('âŒ ì„œë²„ ê±°ë¶€ ì´ìœ :', result.error)\r\n          const errorMsg = (result.error as any)?.response?.data?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'\r\n          alert(`âŒ í”„ë¡œì íŠ¸ ì¶”ê°€ ì‹¤íŒ¨: ${errorMsg}`)\r\n          if ((result.error as any)?.response?.data) {\r\n            console.error('ğŸ“‹ ì„œë²„ ì‘ë‹µ ìƒì„¸:', (result.error as any).response.data)\r\n          }\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      console.error('âŒ ì €ì¥ ì‹¤íŒ¨:', error)\r\n      // ğŸŒŸ Axios ì˜¤ë¥˜ ìƒì„¸ ì •ë³´ ì¶œë ¥\r\n      const errorMsg = error?.response?.data?.message || error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'\r\n      alert(`âŒ ì €ì¥ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${errorMsg}`)\r\n      if (error?.response?.data) {\r\n        console.error('ğŸ“‹ ì„œë²„ ì‘ë‹µ ìƒì„¸:', error.response.data)\r\n        console.error('ğŸ”¢ ìƒíƒœ ì½”ë“œ:', error.response.status)\r\n      }\r\n    } finally {\r\n      console.log('ğŸ isSaving = false ì„¤ì •ë¨')\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    setShowForm(false)\r\n    setEditingItem(null)\r\n  }\r\n\r\n  const handleDelete = async (project: Project) => {\r\n    if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {\r\n      try {\r\n        setIsDeleting(true)\r\n        await deleteProject(project._id!)\r\n      } catch (error) {\r\n        console.error('ì‚­ì œ ì‹¤íŒ¨:', error)\r\n      } finally {\r\n        setIsDeleting(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleAddNew = () => {\r\n    setEditingItem(null)\r\n    setShowForm(true)\r\n  }\r\n\r\n  const handleEdit = (project: Project) => {\r\n    setEditingItem(project)\r\n    setShowForm(true)\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2\">í”„ë¡œì íŠ¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold\">í”„ë¡œì íŠ¸ ê´€ë¦¬</h2>\r\n        <button\r\n          onClick={handleAddNew}\r\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n        >\r\n          <FaPlus />\r\n          í”„ë¡œì íŠ¸ ì¶”ê°€\r\n        </button>\r\n      </div>\r\n\r\n      {/* í•„í„° ì •ë³´ í‘œì‹œ */}\r\n      {(projectFilter !== 'all' || projectSearchTerm || selectedProjectCategory) && (\r\n        <div className=\"mb-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                í˜„ì¬ í•„í„°: \r\n                {projectFilter === 'all' && !projectSearchTerm && ' ğŸ“ ëª¨ë“  í”„ë¡œì íŠ¸'}\r\n                {projectFilter === 'category' && selectedProjectCategory && ` ğŸ·ï¸ ${selectedProjectCategory} ì¹´í…Œê³ ë¦¬`}\r\n                {projectFilter === 'featured' && ' ğŸŒŸ ì£¼ìš” í”„ë¡œì íŠ¸'}\r\n                {projectSearchTerm && ` ğŸ” \"${projectSearchTerm}\" ê²€ìƒ‰`}\r\n              </h4>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                {filteredProjects.length}ê°œ í”„ë¡œì íŠ¸ í‘œì‹œ ì¤‘ (ì „ì²´ {projects.length}ê°œ)\r\n                {projectFilter === 'featured' && ` (ì£¼ìš” í”„ë¡œì íŠ¸: ${featuredProjectsCount}ê°œ)`}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {showForm && (\r\n        <div className=\"mb-6\">\r\n          <ProjectForm\r\n            data={editingItem}\r\n            onSave={handleSave}\r\n            onCancel={handleCancel}\r\n            isSaving={isSaving}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* í”„ë¡œì íŠ¸ ëª©ë¡ */}\r\n      {filteredProjects.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {filteredProjects.map((project) => (\r\n            <div key={project._id} className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600\">\r\n              <h3 className=\"font-semibold text-lg mb-2\">{project.title}</h3>\r\n              <p className=\"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2\">{project.description}</p>\r\n              {project.category && (\r\n                <p className=\"text-xs text-blue-600 dark:text-blue-400 mb-3\">{project.category}</p>\r\n              )}\r\n              {project.technologies && project.technologies.length > 0 && (\r\n                <div className=\"flex flex-wrap gap-1 mb-3\">\r\n                  {project.technologies.slice(0, 3).map((tech, index) => (\r\n                    <span key={index} className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-1 rounded\">\r\n                      {tech}\r\n                    </span>\r\n                  ))}\r\n                  {project.technologies.length > 3 && (\r\n                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                      +{project.technologies.length - 3}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n              )}\r\n              <div className=\"flex justify-between items-center\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <span className={`px-2 py-1 rounded text-xs ${\r\n                    project.status === 'completed' \r\n                      ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300' \r\n                      : 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300'\r\n                  }`}>\r\n                    {project.status === 'completed' ? 'ì™„ë£Œ' : 'ì§„í–‰ì¤‘'}\r\n                  </span>\r\n                  {project.status === 'completed' && project.detailedDescription && project.detailedDescription.trim().length > 0 && (\r\n                    <span className=\"text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded\">\r\n                      ğŸŒŸ ì£¼ìš”\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => handleEdit(project)}\r\n                    className=\"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n                    disabled={isSaving || isDeleting}\r\n                  >\r\n                    <FaEdit />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDelete(project)}\r\n                    className=\"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\r\n                    disabled={isSaving || isDeleting}\r\n                  >\r\n                    <FaTrash />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-gray-500 dark:text-gray-400 text-lg mb-4\">\r\n            {projectFilter !== 'all' || projectSearchTerm || selectedProjectCategory\r\n              ? 'í•„í„° ì¡°ê±´ì— ë§ëŠ” í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.'\r\n              : 'ë“±ë¡ëœ í”„ë¡œì íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.'\r\n            }\r\n          </p>\r\n          {(projectFilter !== 'all' || projectSearchTerm || selectedProjectCategory) && (\r\n            <p className=\"text-sm text-gray-400 dark:text-gray-500\">\r\n              í•„í„°ë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.\r\n            </p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProjectManager","import React, { useState } from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { FaTimes, FaEnvelope, FaUser, FaCalendar, FaCheck, FaTrash, FaReply, FaArrowLeft, FaSpinner } from 'react-icons/fa'\r\nimport { ContactMessage } from '../../types'\r\nimport { useMessageDetail } from '../../hooks/useMessageDetail'\r\n\r\ninterface MessageDetailProps {\r\n  messageId: string | undefined\r\n  isOpen: boolean\r\n  onClose: () => void\r\n  onMarkAsRead: (id: string) => Promise<void>\r\n  onDelete: (id: string) => Promise<void>\r\n  onReply?: (message: ContactMessage) => void\r\n}\r\n\r\nconst MessageDetail: React.FC<MessageDetailProps> = ({\r\n  messageId,\r\n  isOpen,\r\n  onClose,\r\n  onMarkAsRead,\r\n  onDelete,\r\n  onReply\r\n}) => {\r\n  const [isProcessing, setIsProcessing] = useState(false)\r\n  const [showReplyForm, setShowReplyForm] = useState(false)\r\n  const [replyContent, setReplyContent] = useState('')\r\n\r\n  // React Queryë¥¼ ì‚¬ìš©í•œ ë©”ì‹œì§€ ìƒì„¸ ì •ë³´ ë¡œë”©\r\n  const { \r\n    data: message, \r\n    isLoading, \r\n    isError, \r\n    error,\r\n    refetch \r\n  } = useMessageDetail(messageId, {\r\n    enabled: isOpen && !!messageId // ëª¨ë‹¬ì´ ì—´ë ¤ìˆê³  messageIdê°€ ìˆì„ ë•Œë§Œ ì¿¼ë¦¬ ì‹¤í–‰\r\n  })\r\n\r\n  const handleMarkAsRead = async () => {\r\n    if (!message || message.isRead) return\r\n    \r\n    try {\r\n      setIsProcessing(true)\r\n      await onMarkAsRead(message._id!)\r\n    } catch (error) {\r\n      console.error('ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨:', error)\r\n    } finally {\r\n      setIsProcessing(false)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    if (!message || !confirm('ì •ë§ ì´ ë©”ì‹œì§€ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return\r\n    \r\n    try {\r\n      setIsProcessing(true)\r\n      await onDelete(message._id!)\r\n      onClose()\r\n    } catch (error) {\r\n      console.error('ì‚­ì œ ì‹¤íŒ¨:', error)\r\n    } finally {\r\n      setIsProcessing(false)\r\n    }\r\n  }\r\n\r\n  const handleReply = () => {\r\n    if (!message) return\r\n    if (onReply) {\r\n      onReply(message)\r\n    } else {\r\n      setShowReplyForm(true)\r\n    }\r\n  }\r\n\r\n  const handleSendReply = () => {\r\n    // ë‹µì¥ ê¸°ëŠ¥ êµ¬í˜„ (ì´ë©”ì¼ ë°œì†¡ ë“±)\r\n    console.log('ë‹µì¥ ë‚´ìš©:', replyContent)\r\n    alert('ë‹µì¥ ê¸°ëŠ¥ì€ í–¥í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.')\r\n    setShowReplyForm(false)\r\n    setReplyContent('')\r\n  }\r\n\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString('ko-KR', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    })\r\n  }\r\n\r\n  if (!isOpen) return null\r\n\r\n  // ë¡œë”© ìƒíƒœ ì²˜ë¦¬\r\n  if (isLoading) {\r\n    return (\r\n      <AnimatePresence>\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.9, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0.9, opacity: 0 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"flex flex-col items-center justify-center\">\r\n              <FaSpinner className=\"text-4xl text-blue-600 dark:text-blue-400 animate-spin mb-4\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                ë©”ì‹œì§€ ë¡œë”© ì¤‘...\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”\r\n              </p>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n    )\r\n  }\r\n\r\n  // ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬\r\n  if (isError) {\r\n    return (\r\n      <AnimatePresence>\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.9, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0.9, opacity: 0 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-center\">\r\n              <div className=\"text-red-500 text-4xl mb-4\">âš ï¸</div>\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                ë©”ì‹œì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\">\r\n                {error?.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'}\r\n              </p>\r\n              <div className=\"flex gap-3 justify-center\">\r\n                <button\r\n                  onClick={() => refetch()}\r\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n                >\r\n                  ë‹¤ì‹œ ì‹œë„\r\n                </button>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n                >\r\n                  ë‹«ê¸°\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n    )\r\n  }\r\n\r\n  // ë©”ì‹œì§€ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš°\r\n  if (!message) {\r\n    return (\r\n      <AnimatePresence>\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n          onClick={onClose}\r\n        >\r\n          <motion.div\r\n            initial={{ scale: 0.9, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            exit={{ scale: 0.9, opacity: 0 }}\r\n            className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div className=\"text-center\">\r\n              <FaEnvelope className=\"text-4xl text-gray-400 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\r\n                ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤\r\n              </h3>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\">\r\n                ìš”ì²­í•˜ì‹  ë©”ì‹œì§€ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.\r\n              </p>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n              >\r\n                ë‹«ê¸°\r\n              </button>\r\n            </div>\r\n          </motion.div>\r\n        </motion.div>\r\n      </AnimatePresence>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      <motion.div\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n        className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\r\n        onClick={onClose}\r\n      >\r\n        <motion.div\r\n          initial={{ scale: 0.9, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          exit={{ scale: 0.9, opacity: 0 }}\r\n          className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden\"\r\n          onClick={(e) => e.stopPropagation()}\r\n        >\r\n          {/* Header */}\r\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <FaEnvelope className=\"text-blue-600 dark:text-blue-400 text-xl\" />\r\n              <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\r\n                ë©”ì‹œì§€ ìƒì„¸\r\n              </h2>\r\n              {!message.isRead && (\r\n                <span className=\"bg-blue-500 text-white text-xs px-2 py-1 rounded-full\">\r\n                  ìƒˆ ë©”ì‹œì§€\r\n                </span>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\r\n            >\r\n              <FaTimes className=\"text-gray-500 dark:text-gray-400\" />\r\n            </button>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-140px)]\">\r\n            {/* ë©”ì‹œì§€ ì •ë³´ */}\r\n            <div className=\"grid md:grid-cols-2 gap-6 mb-6\">\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <FaUser className=\"text-gray-500 dark:text-gray-400 mt-1\" />\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">ë³´ë‚¸ì´</p>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                      {message.name}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-start gap-3\">\r\n                  <FaEnvelope className=\"text-gray-500 dark:text-gray-400 mt-1\" />\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">ì´ë©”ì¼</p>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                      {message.email}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-start gap-3\">\r\n                  <FaCalendar className=\"text-gray-500 dark:text-gray-400 mt-1\" />\r\n                  <div>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">ë°›ì€ ì‹œê°„</p>\r\n                    <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                      {formatDate(message.createdAt || '')}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-2\">ìƒíƒœ</p>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    {message.isRead ? (\r\n                      <span className=\"flex items-center gap-1 text-green-600 dark:text-green-400\">\r\n                        <FaCheck /> ì½ìŒ\r\n                      </span>\r\n                    ) : (\r\n                      <span className=\"flex items-center gap-1 text-blue-600 dark:text-blue-400\">\r\n                        <FaEnvelope /> ì½ì§€ ì•ŠìŒ\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ì œëª© */}\r\n            <div className=\"mb-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                {message.subject}\r\n              </h3>\r\n            </div>\r\n\r\n            {/* ë©”ì‹œì§€ ë‚´ìš© */}\r\n            <div className=\"mb-6\">\r\n              <h4 className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3\">\r\n                ë©”ì‹œì§€ ë‚´ìš©\r\n              </h4>\r\n              <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\r\n                <p className=\"text-gray-900 dark:text-white whitespace-pre-wrap\">\r\n                  {message.message}\r\n                </p>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ë‹µì¥ í¼ */}\r\n            <AnimatePresence>\r\n              {showReplyForm && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, height: 0 }}\r\n                  animate={{ opacity: 1, height: 'auto' }}\r\n                  exit={{ opacity: 0, height: 0 }}\r\n                  className=\"mb-6 border-t border-gray-200 dark:border-gray-700 pt-6\"\r\n                >\r\n                  <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\r\n                    ë‹µì¥ ì‘ì„±\r\n                  </h4>\r\n                  <div className=\"space-y-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                        ë°›ëŠ” ì‚¬ëŒ\r\n                      </label>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={message.email}\r\n                        disabled\r\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400\"\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                        ë‹µì¥ ë‚´ìš©\r\n                      </label>\r\n                      <textarea\r\n                        value={replyContent}\r\n                        onChange={(e) => setReplyContent(e.target.value)}\r\n                        placeholder=\"ë‹µì¥ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...\"\r\n                        rows={6}\r\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical\"\r\n                      />\r\n                    </div>\r\n                    <div className=\"flex gap-3\">\r\n                      <button\r\n                        onClick={handleSendReply}\r\n                        disabled={!replyContent.trim()}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\r\n                      >\r\n                        <FaReply /> ë‹µì¥ ë³´ë‚´ê¸°\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          setShowReplyForm(false)\r\n                          setReplyContent('')\r\n                        }}\r\n                        className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors\"\r\n                      >\r\n                        ì·¨ì†Œ\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </div>\r\n\r\n          {/* Footer */}\r\n          <div className=\"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700\">\r\n            <button\r\n              onClick={handleReply}\r\n              className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              <FaReply /> ë‹µì¥\r\n            </button>\r\n            \r\n            <div className=\"flex gap-3\">\r\n              {!message.isRead && (\r\n                <button\r\n                  onClick={handleMarkAsRead}\r\n                  disabled={isProcessing}\r\n                  className=\"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                  <FaCheck /> {isProcessing ? 'ì²˜ë¦¬ ì¤‘...' : 'ì½ìŒ ì²˜ë¦¬'}\r\n                </button>\r\n              )}\r\n              <button\r\n                onClick={handleDelete}\r\n                disabled={isProcessing}\r\n                className=\"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n              >\r\n                <FaTrash /> {isProcessing ? 'ì‚­ì œ ì¤‘...' : 'ì‚­ì œ'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  )\r\n}\r\n\r\nexport default MessageDetail\r\n","import React, { useState } from 'react'\r\nimport { FaTrash, FaEye, FaEnvelope } from 'react-icons/fa'\r\nimport { ContactMessage } from '../../types'\r\nimport { useMessageManagerData } from '../../hooks/useMessageManagerData'\r\nimport MessageDetail from './MessageDetail'\r\n\r\nconst MessageManager: React.FC = () => {\r\n  const { messages, isLoading, markAsRead, deleteMessage } = useMessageManagerData()\r\n  const [isDeleting, setIsDeleting] = useState(false)\r\n  const [selectedMessageId, setSelectedMessageId] = useState<string | undefined>(undefined)\r\n  const [showDetail, setShowDetail] = useState(false)\r\n\r\n  const handleMarkAsRead = async (message: ContactMessage) => {\r\n    try {\r\n      await markAsRead(message._id!)\r\n    } catch (error) {\r\n      console.error('ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨:', error)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async (message: ContactMessage) => {\r\n    if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {\r\n      try {\r\n        setIsDeleting(true)\r\n        await deleteMessage(message._id!)\r\n      } catch (error) {\r\n        console.error('ì‚­ì œ ì‹¤íŒ¨:', error)\r\n      } finally {\r\n        setIsDeleting(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleViewDetail = (message: ContactMessage) => {\r\n    setSelectedMessageId(message._id)\r\n    setShowDetail(true)\r\n  }\r\n\r\n  const handleCloseDetail = () => {\r\n    setShowDetail(false)\r\n    setSelectedMessageId(undefined)\r\n  }\r\n\r\n  const handleDetailMarkAsRead = async (id: string) => {\r\n    await markAsRead(id)\r\n  }\r\n\r\n  const handleDetailDelete = async (id: string) => {\r\n    await deleteMessage(id)\r\n    handleCloseDetail()\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2\">ë©”ì‹œì§€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <h2 className=\"text-2xl font-bold\">ë©”ì‹œì§€ ê´€ë¦¬</h2>\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n            ì´ {messages.length}ê°œì˜ ë©”ì‹œì§€\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"space-y-4\">\r\n          {messages.map((message) => (\r\n            <div \r\n              key={message._id} \r\n              className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow cursor-pointer\"\r\n              onClick={() => handleViewDetail(message)}\r\n            >\r\n              <div className=\"flex justify-between items-start\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center gap-2 mb-2\">\r\n                    <h3 className=\"font-semibold text-lg\">{message.subject}</h3>\r\n                    {!message.isRead && (\r\n                      <span className=\"bg-blue-500 text-white text-xs px-2 py-1 rounded-full\">\r\n                        ìƒˆ ë©”ì‹œì§€\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  <p \r\n                    className=\"text-gray-600 dark:text-gray-400 mb-2\"\r\n                    style={{\r\n                      display: '-webkit-box',\r\n                      WebkitLineClamp: 2,\r\n                      WebkitBoxOrient: 'vertical',\r\n                      overflow: 'hidden'\r\n                    }}\r\n                  >\r\n                    {message.message.length > 100 ? `${message.message.substring(0, 100)}...` : message.message}\r\n                  </p>\r\n                  <div className=\"text-sm text-gray-500 dark:text-gray-500\">\r\n                    <p>ë³´ë‚¸ì´: {message.name} ({message.email})</p>\r\n                    <p>ë°›ì€ ì‹œê°„: {message.createdAt ? new Date(message.createdAt).toLocaleString('ko-KR') : 'ì•Œ ìˆ˜ ì—†ìŒ'}</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex gap-2 ml-4\" onClick={(e) => e.stopPropagation()}>\r\n                  <button\r\n                    onClick={() => handleViewDetail(message)}\r\n                    className=\"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n                    title=\"ìƒì„¸ ë³´ê¸°\"\r\n                  >\r\n                    <FaEye />\r\n                  </button>\r\n                  {!message.isRead && (\r\n                    <button\r\n                      onClick={() => handleMarkAsRead(message)}\r\n                      className=\"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm\"\r\n                    >\r\n                      ì½ìŒ ì²˜ë¦¬\r\n                    </button>\r\n                  )}\r\n                  <button\r\n                    onClick={() => handleDelete(message)}\r\n                    className=\"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\r\n                    disabled={isDeleting}\r\n                    title=\"ì‚­ì œ\"\r\n                  >\r\n                    <FaTrash />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* ë©”ì‹œì§€ ìƒì„¸ ë³´ê¸° ëª¨ë‹¬ */}\r\n      {showDetail && (\r\n        <MessageDetail\r\n          messageId={selectedMessageId}\r\n          isOpen={showDetail}\r\n          onClose={handleCloseDetail}\r\n          onMarkAsRead={handleDetailMarkAsRead}\r\n          onDelete={handleDetailDelete}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default MessageManager","import React from 'react'\r\nimport { FaPlus, FaEdit, FaTrash, FaChevronDown, FaChevronRight, FaBars } from 'react-icons/fa'\r\nimport { useSortable } from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\nimport { SkillCategory } from '../../types'\r\n\r\ninterface SortableCategoryCardProps {\r\n  category: SkillCategory\r\n  isExpanded: boolean\r\n  onToggle: (categoryId: string) => void\r\n  onAddSkill: (categoryId: string) => void\r\n  onEdit: (category: SkillCategory) => void\r\n  onDelete: (category: SkillCategory) => void\r\n  isSaving: boolean\r\n  isDeleting: boolean\r\n  children?: React.ReactNode\r\n}\r\n\r\nconst SortableCategoryCard: React.FC<SortableCategoryCardProps> = ({\r\n  category,\r\n  isExpanded,\r\n  onToggle,\r\n  onAddSkill,\r\n  onEdit,\r\n  onDelete,\r\n  isSaving,\r\n  isDeleting,\r\n  children\r\n}) => {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: category._id! })\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  }\r\n\r\n  return (\r\n    <div \r\n      ref={setNodeRef} \r\n      style={style}\r\n      className=\"bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden\"\r\n    >\r\n      <div className=\"p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center gap-3 flex-1\" onClick={() => onToggle(category._id!)}>\r\n            {/* ğŸŒŸ ë“œë˜ê·¸ í•¸ë“¤ */}\r\n            <div\r\n              {...attributes}\r\n              {...listeners}\r\n              className=\"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1\"\r\n              title=\"ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              <FaBars />\r\n            </div>\r\n            <div \r\n              className=\"w-4 h-4 rounded-full\"\r\n              style={{ backgroundColor: category.color }}\r\n            ></div>\r\n            <h3 className=\"font-semibold text-lg cursor-pointer\">{category.title}</h3>\r\n            <span className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              ({category.skills?.length || 0}ê°œ ìŠ¤í‚¬)\r\n            </span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                onAddSkill(category._id!)\r\n              }}\r\n              className=\"p-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors\"\r\n              disabled={isSaving || isDeleting}\r\n            >\r\n              <FaPlus size={12} />\r\n            </button>\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                onEdit(category)\r\n              }}\r\n              className=\"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors\"\r\n              disabled={isSaving || isDeleting}\r\n            >\r\n              <FaEdit size={12} />\r\n            </button>\r\n            <button\r\n              onClick={(e) => {\r\n                e.stopPropagation()\r\n                onDelete(category)\r\n              }}\r\n              className=\"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\r\n              disabled={isSaving || isDeleting}\r\n            >\r\n              <FaTrash size={12} />\r\n            </button>\r\n            {isExpanded ? (\r\n              <FaChevronDown className=\"text-gray-400\" />\r\n            ) : (\r\n              <FaChevronRight className=\"text-gray-400\" />\r\n            )}\r\n          </div>\r\n        </div>\r\n        {category.description && (\r\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2 ml-7\">\r\n            {category.description}\r\n          </p>\r\n        )}\r\n      </div>\r\n      \r\n      {/* ìŠ¤í‚¬ ëª©ë¡ (childrenìœ¼ë¡œ ì „ë‹¬) */}\r\n      {isExpanded && children}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SortableCategoryCard\r\n\r\n","import React from 'react'\r\nimport { FaEdit, FaTrash, FaBars, FaSave } from 'react-icons/fa'\r\nimport { useSortable } from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\nimport { Skill } from '../../types'\r\nimport DynamicIcon from '../common/DynamicIcon'\r\n\r\ninterface SortableSkillItemProps {\r\n  skill: Skill\r\n  categoryColor: string\r\n  currentLevel: number\r\n  hasChanges: boolean\r\n  isSavingThis: boolean\r\n  isSaving: boolean\r\n  isDeleting: boolean\r\n  onLevelChange: (skillId: string, level: number) => void\r\n  onSaveLevel: (skill: Skill) => void\r\n  onEdit: (skill: Skill) => void\r\n  onDelete: (skill: Skill) => void\r\n  onToggleSidebar: (skill: Skill) => void\r\n  onToggleLanguageCard: (skill: Skill) => void\r\n}\r\n\r\nconst SortableSkillItem: React.FC<SortableSkillItemProps> = ({\r\n  skill,\r\n  categoryColor,\r\n  currentLevel,\r\n  hasChanges,\r\n  isSavingThis,\r\n  isSaving,\r\n  isDeleting,\r\n  onLevelChange,\r\n  onSaveLevel,\r\n  onEdit,\r\n  onDelete,\r\n  onToggleSidebar,\r\n  onToggleLanguageCard\r\n}) => {\r\n  const {\r\n    attributes,\r\n    listeners,\r\n    setNodeRef,\r\n    transform,\r\n    transition,\r\n    isDragging,\r\n  } = useSortable({ id: skill._id! })\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  }\r\n\r\n  return (\r\n    <div \r\n      ref={setNodeRef} \r\n      style={style}\r\n      className=\"flex items-center justify-between bg-white dark:bg-gray-700 p-3 rounded-lg\"\r\n    >\r\n      <div className=\"flex items-center gap-3 flex-1\">\r\n        {/* ğŸŒŸ ë“œë˜ê·¸ í•¸ë“¤ */}\r\n        <div\r\n          {...attributes}\r\n          {...listeners}\r\n          className=\"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1\"\r\n          title=\"ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½\"\r\n        >\r\n          <FaBars />\r\n        </div>\r\n        \r\n        {/* ğŸŒŸ ì‚¬ì´ë“œë°”/ì–¸ì–´ ì¹´ë“œ í‘œì‹œ ì²´í¬ë°•ìŠ¤ */}\r\n        <div className=\"flex flex-col gap-1\">\r\n          <label className=\"flex items-center gap-1 text-xs cursor-pointer\" title=\"ì‚¬ì´ë“œë°” í•µì‹¬ê¸°ìˆ ì— í‘œì‹œ\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={skill.showInSidebar || false}\r\n              onChange={() => onToggleSidebar(skill)}\r\n              disabled={isSaving || isDeleting}\r\n              className=\"w-3 h-3 text-blue-600 rounded focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n            <span className=\"text-gray-600 dark:text-gray-400\">í•µì‹¬</span>\r\n          </label>\r\n          <label className=\"flex items-center gap-1 text-xs cursor-pointer\" title=\"ì‚¬ì´ë“œë°” ì–¸ì–´ì¹´ë“œì— í‘œì‹œ\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={skill.showInLanguageCard || false}\r\n              onChange={() => onToggleLanguageCard(skill)}\r\n              disabled={isSaving || isDeleting}\r\n              className=\"w-3 h-3 text-green-600 rounded focus:ring-2 focus:ring-green-500\"\r\n            />\r\n            <span className=\"text-gray-600 dark:text-gray-400\">ì–¸ì–´</span>\r\n          </label>\r\n        </div>\r\n        \r\n        <div className=\"text-lg text-blue-600 dark:text-blue-400\">\r\n          <DynamicIcon iconName={skill.icon} size={18} />\r\n        </div>\r\n        <span className=\"font-medium min-w-[120px]\">{skill.name}</span>\r\n        <div className=\"flex items-center gap-2 flex-1 max-w-md\">\r\n          <input\r\n            type=\"range\"\r\n            min=\"0\"\r\n            max=\"100\"\r\n            step=\"5\"\r\n            value={currentLevel}\r\n            onChange={(e) => {\r\n              const newLevel = parseInt(e.target.value)\r\n              onLevelChange(skill._id!, newLevel)\r\n            }}\r\n            className=\"flex-1 h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer slider-thumb\"\r\n            style={{\r\n              background: `linear-gradient(to right, ${categoryColor} 0%, ${categoryColor} ${currentLevel}%, #e5e7eb ${currentLevel}%, #e5e7eb 100%)`\r\n            }}\r\n            disabled={isSaving || isDeleting || isSavingThis}\r\n          />\r\n          <span className=\"text-sm text-gray-600 dark:text-gray-400 min-w-[45px] text-right font-medium\">\r\n            {currentLevel}%\r\n          </span>\r\n          {hasChanges && (\r\n            <button\r\n              onClick={() => onSaveLevel(skill)}\r\n              disabled={isSavingThis}\r\n              className={`px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs font-medium transition-colors flex items-center gap-1 ${\r\n                isSavingThis ? 'opacity-50 cursor-not-allowed' : ''\r\n              }`}\r\n              title=\"ë³€ê²½ëœ ìˆ™ë ¨ë„ ì €ì¥\"\r\n            >\r\n              {isSavingThis ? (\r\n                <>\r\n                  <div className=\"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin\" />\r\n                  ì €ì¥ì¤‘\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FaSave size={10} />\r\n                  ì €ì¥\r\n                </>\r\n              )}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"flex gap-2 ml-2\">\r\n        <button\r\n          onClick={() => onEdit(skill)}\r\n          className=\"p-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors\"\r\n          disabled={isSaving || isDeleting}\r\n        >\r\n          <FaEdit size={12} />\r\n        </button>\r\n        <button\r\n          onClick={() => onDelete(skill)}\r\n          className=\"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\r\n          disabled={isSaving || isDeleting}\r\n        >\r\n          <FaTrash size={12} />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SortableSkillItem\r\n\r\n","import React, { useState, useCallback } from 'react'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { SkillCategory, Skill, SkillCategoryFormData, SkillFormData } from '../../types'\r\nimport { useSkillsManagerData } from '../../hooks/useSkillsManagerData'\r\nimport SkillCategoryForm from '../forms/SkillCategoryForm'\r\nimport SkillForm from '../forms/SkillForm'\r\nimport SortableCategoryCard from './SortableCategoryCard'\r\nimport SortableSkillItem from './SortableSkillItem'\r\nimport { DndContext, closestCenter, DragEndEvent } from '@dnd-kit/core'\r\nimport { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable'\r\nimport { arrayMove } from '@dnd-kit/sortable'\r\n\r\nconst SkillsManager: React.FC = () => {\r\n  const { \r\n    skillCategories, \r\n    isLoading, \r\n    createSkillCategory,\r\n    updateSkillCategory,\r\n    deleteSkillCategory,\r\n    createSkill,\r\n    updateSkill,\r\n    deleteSkill\r\n  } = useSkillsManagerData()\r\n\r\n\r\n  // ë‹¨ì¼ í¼ ìƒíƒœ ê´€ë¦¬ - í•œ ë²ˆì— í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ê°€ëŠ¥\r\n  const [activeForm, setActiveForm] = useState<'category' | 'skill' | null>(null)\r\n  const [editingCategory, setEditingCategory] = useState<SkillCategory | null>(null)\r\n  const [editingSkill, setEditingSkill] = useState<Skill | null>(null)\r\n  const [selectedCategoryId, setSelectedCategoryId] = useState<string | null>(null)\r\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set())\r\n  const [isSaving, setIsSaving] = useState(false)\r\n  const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n  // ğŸŒŸ ìˆ™ë ¨ë„ ë¡œì»¬ ìƒíƒœ ê´€ë¦¬ (ë³€ê²½ì‚¬í•­ ì¶”ì ìš©)\r\n  const [localLevels, setLocalLevels] = useState<Map<string, number>>(new Map())\r\n  \r\n  // ğŸŒŸ ì €ì¥ ì¤‘ì¸ ìŠ¤í‚¬ ID ì¶”ì \r\n  const [savingSkillIds, setSavingSkillIds] = useState<Set<string>>(new Set())\r\n\r\n  // ğŸŒŸ ìŠ¬ë¼ì´ë” ë³€ê²½ í•¸ë“¤ëŸ¬ (ì¦‰ì‹œ ì €ì¥ ì—†ì´ ë¡œì»¬ ìƒíƒœë§Œ ì—…ë°ì´íŠ¸)\r\n  const handleLevelChange = useCallback((skillId: string, newLevel: number) => {\r\n    setLocalLevels(prev => {\r\n      const newMap = new Map(prev)\r\n      newMap.set(skillId, newLevel)\r\n      return newMap\r\n    })\r\n  }, [])\r\n\r\n  // ğŸŒŸ ê°œë³„ ìŠ¤í‚¬ ìˆ™ë ¨ë„ ì €ì¥ í•¸ë“¤ëŸ¬\r\n  const handleSaveLevel = useCallback(async (skill: Skill) => {\r\n    const skillId = skill._id!\r\n    const newLevel = localLevels.get(skillId)\r\n    \r\n    if (newLevel === undefined || newLevel === skill.level) {\r\n      // ë³€ê²½ì‚¬í•­ì´ ì—†ìœ¼ë©´ ë¡œì»¬ ìƒíƒœë§Œ ì •ë¦¬\r\n      setLocalLevels(prev => {\r\n        const newMap = new Map(prev)\r\n        newMap.delete(skillId)\r\n        return newMap\r\n      })\r\n      return\r\n    }\r\n\r\n    try {\r\n      setSavingSkillIds(prev => new Set(prev).add(skillId))\r\n      console.log(`ğŸ’¾ ìˆ™ë ¨ë„ ì €ì¥: ${skill.name} = ${newLevel}%`)\r\n      \r\n      await updateSkill(skillId, { \r\n        name: skill.name,\r\n        icon: skill.icon,\r\n        level: newLevel,\r\n        order: skill.order,\r\n        ...(skill.description && { description: skill.description }),\r\n        ...(skill.color && { color: skill.color }),\r\n        ...(skill.showInSidebar !== undefined && { showInSidebar: skill.showInSidebar }),\r\n        ...(skill.showInLanguageCard !== undefined && { showInLanguageCard: skill.showInLanguageCard })\r\n      })\r\n      \r\n      console.log(`âœ… ì €ì¥ ì™„ë£Œ: ${skill.name}`)\r\n      \r\n      // ì €ì¥ ì„±ê³µ í›„ ë¡œì»¬ ìƒíƒœ ì •ë¦¬\r\n      setLocalLevels(prev => {\r\n        const newMap = new Map(prev)\r\n        newMap.delete(skillId)\r\n        return newMap\r\n      })\r\n    } catch (error) {\r\n      console.error(`âŒ ì €ì¥ ì‹¤íŒ¨: ${skill.name}`, error)\r\n      alert(`ì €ì¥ ì‹¤íŒ¨: ${skill.name}`)\r\n    } finally {\r\n      setSavingSkillIds(prev => {\r\n        const newSet = new Set(prev)\r\n        newSet.delete(skillId)\r\n        return newSet\r\n      })\r\n    }\r\n  }, [localLevels, updateSkill])\r\n\r\n  // ğŸŒŸ ì‚¬ì´ë“œë°” í‘œì‹œ í† ê¸€ í•¸ë“¤ëŸ¬\r\n  const handleToggleSidebar = useCallback(async (skill: Skill) => {\r\n    if (!skill._id) return\r\n    \r\n    try {\r\n      setSavingSkillIds(prev => new Set(prev).add(skill._id!))\r\n      const newValue = !skill.showInSidebar\r\n      console.log(`ğŸ’¾ [í•µì‹¬ê¸°ìˆ ] í† ê¸€: ${skill.name} = ${newValue}`)\r\n      console.log(`ğŸ“‹ [í•µì‹¬ê¸°ìˆ ] ì „ì†¡ ë°ì´í„°:`, {\r\n        name: skill.name,\r\n        showInSidebar: newValue,\r\n        showInLanguageCard: skill.showInLanguageCard\r\n      })\r\n      \r\n      const result = await updateSkill(skill._id, {\r\n        name: skill.name,\r\n        icon: skill.icon,\r\n        level: skill.level,\r\n        order: skill.order,\r\n        showInSidebar: newValue,\r\n        ...(skill.description && { description: skill.description }),\r\n        ...(skill.color && { color: skill.color }),\r\n        ...(skill.showInLanguageCard !== undefined && { showInLanguageCard: skill.showInLanguageCard })\r\n      })\r\n      \r\n      console.log(`âœ… [í•µì‹¬ê¸°ìˆ ] í† ê¸€ ì™„ë£Œ:`, result)\r\n    } catch (error) {\r\n      console.error(`âŒ [í•µì‹¬ê¸°ìˆ ] í† ê¸€ ì‹¤íŒ¨: ${skill.name}`, error)\r\n      alert(`ì‚¬ì´ë“œë°” í‘œì‹œ í† ê¸€ ì‹¤íŒ¨: ${skill.name}`)\r\n    } finally {\r\n      setSavingSkillIds(prev => {\r\n        const newSet = new Set(prev)\r\n        newSet.delete(skill._id!)\r\n        return newSet\r\n      })\r\n    }\r\n  }, [updateSkill])\r\n\r\n  // ğŸŒŸ ì–¸ì–´ ì¹´ë“œ í‘œì‹œ í† ê¸€ í•¸ë“¤ëŸ¬\r\n  const handleToggleLanguageCard = useCallback(async (skill: Skill) => {\r\n    if (!skill._id) return\r\n    \r\n    try {\r\n      setSavingSkillIds(prev => new Set(prev).add(skill._id!))\r\n      const newValue = !skill.showInLanguageCard\r\n      console.log(`ğŸ’¾ [ì–¸ì–´ì¹´ë“œ] í† ê¸€: ${skill.name} = ${newValue}`)\r\n      console.log(`ğŸ“‹ [ì–¸ì–´ì¹´ë“œ] ì „ì†¡ ë°ì´í„°:`, {\r\n        name: skill.name,\r\n        showInSidebar: skill.showInSidebar,\r\n        showInLanguageCard: newValue\r\n      })\r\n      \r\n      const result = await updateSkill(skill._id, {\r\n        name: skill.name,\r\n        icon: skill.icon,\r\n        level: skill.level,\r\n        order: skill.order,\r\n        showInLanguageCard: newValue,\r\n        ...(skill.description && { description: skill.description }),\r\n        ...(skill.color && { color: skill.color }),\r\n        ...(skill.showInSidebar !== undefined && { showInSidebar: skill.showInSidebar })\r\n      })\r\n      \r\n      console.log(`âœ… [ì–¸ì–´ì¹´ë“œ] í† ê¸€ ì™„ë£Œ:`, result)\r\n    } catch (error) {\r\n      console.error(`âŒ [ì–¸ì–´ì¹´ë“œ] í† ê¸€ ì‹¤íŒ¨: ${skill.name}`, error)\r\n      alert(`ì–¸ì–´ ì¹´ë“œ í‘œì‹œ í† ê¸€ ì‹¤íŒ¨: ${skill.name}`)\r\n    } finally {\r\n      setSavingSkillIds(prev => {\r\n        const newSet = new Set(prev)\r\n        newSet.delete(skill._id!)\r\n        return newSet\r\n      })\r\n    }\r\n  }, [updateSkill])\r\n\r\n  // ğŸŒŸ ì¹´í…Œê³ ë¦¬ ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬\r\n  const handleCategoryDragEnd = useCallback(async (event: DragEndEvent) => {\r\n    const { active, over } = event\r\n    \r\n    if (!over || active.id === over.id) return\r\n    \r\n    const oldIndex = skillCategories.findIndex(cat => cat._id === active.id)\r\n    const newIndex = skillCategories.findIndex(cat => cat._id === over.id)\r\n    \r\n    if (oldIndex === -1 || newIndex === -1) return\r\n    \r\n    // ë°°ì—´ ìˆœì„œ ë³€ê²½\r\n    const reorderedCategories = arrayMove(skillCategories, oldIndex, newIndex)\r\n    \r\n    // ê° ì¹´í…Œê³ ë¦¬ì˜ order ê°’ì„ ìƒˆë¡œìš´ ì¸ë±ìŠ¤ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ì €ì¥\r\n    try {\r\n      for (let i = 0; i < reorderedCategories.length; i++) {\r\n        const category = reorderedCategories[i]\r\n        if (!category?._id) continue\r\n        \r\n        await updateSkillCategory(category._id, {\r\n          title: category.title,\r\n          color: category.color,\r\n          order: i,\r\n          ...(category.description && { description: category.description })\r\n        })\r\n      }\r\n      console.log('âœ… ì¹´í…Œê³ ë¦¬ ìˆœì„œ ë³€ê²½ ì™„ë£Œ')\r\n    } catch (error) {\r\n      console.error('âŒ ì¹´í…Œê³ ë¦¬ ìˆœì„œ ë³€ê²½ ì‹¤íŒ¨:', error)\r\n      alert('ìˆœì„œ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }, [skillCategories, updateSkillCategory])\r\n\r\n  // ğŸŒŸ ìŠ¤í‚¬ ë“œë˜ê·¸ ì•¤ ë“œë¡­ í•¸ë“¤ëŸ¬ (ì¹´í…Œê³ ë¦¬ë³„)\r\n  const handleSkillDragEnd = useCallback(async (event: DragEndEvent, categoryId: string) => {\r\n    const { active, over } = event\r\n    \r\n    if (!over || active.id === over.id) return\r\n    \r\n    const category = skillCategories.find(cat => cat._id === categoryId)\r\n    if (!category || !category.skills) return\r\n    \r\n    const oldIndex = category.skills.findIndex(skill => skill._id === active.id)\r\n    const newIndex = category.skills.findIndex(skill => skill._id === over.id)\r\n    \r\n    if (oldIndex === -1 || newIndex === -1) return\r\n    \r\n    // ìŠ¤í‚¬ ë°°ì—´ ìˆœì„œ ë³€ê²½\r\n    const reorderedSkills = arrayMove(category.skills, oldIndex, newIndex)\r\n    \r\n    // ê° ìŠ¤í‚¬ì˜ order ê°’ì„ ìƒˆë¡œìš´ ì¸ë±ìŠ¤ë¡œ ì—…ë°ì´íŠ¸í•˜ê³  ì €ì¥\r\n    try {\r\n      for (let i = 0; i < reorderedSkills.length; i++) {\r\n        const skill = reorderedSkills[i]\r\n        if (!skill?._id) continue\r\n        \r\n        await updateSkill(skill._id, {\r\n          name: skill.name,\r\n          icon: skill.icon,\r\n          level: skill.level,\r\n          order: i,\r\n          ...(skill.description && { description: skill.description }),\r\n          ...(skill.color && { color: skill.color })\r\n        })\r\n      }\r\n      console.log(`âœ… ìŠ¤í‚¬ ìˆœì„œ ë³€ê²½ ì™„ë£Œ (ì¹´í…Œê³ ë¦¬: ${category.title})`)\r\n    } catch (error) {\r\n      console.error('âŒ ìŠ¤í‚¬ ìˆœì„œ ë³€ê²½ ì‹¤íŒ¨:', error)\r\n      alert('ìˆœì„œ ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  }, [skillCategories, updateSkill])\r\n\r\n  const toggleCategory = (categoryId: string) => {\r\n    setExpandedCategories(prev => {\r\n      const newSet = new Set(prev)\r\n      if (newSet.has(categoryId)) {\r\n        newSet.delete(categoryId)\r\n      } else {\r\n        newSet.add(categoryId)\r\n      }\r\n      return newSet\r\n    })\r\n  }\r\n\r\n  const handleAddCategory = () => {\r\n    setEditingCategory(null)\r\n    setActiveForm('category')\r\n  }\r\n\r\n  const handleEditCategory = (category: SkillCategory) => {\r\n    setEditingCategory(category)\r\n    setActiveForm('category')\r\n  }\r\n\r\n  const handleSaveCategory = async (data: SkillCategoryFormData) => {\r\n    try {\r\n      setIsSaving(true)\r\n      console.log('ğŸ” ì¹´í…Œê³ ë¦¬ ì €ì¥ ì‹œì‘:', data)\r\n      \r\n      if (editingCategory) {\r\n        console.log('ğŸ“ ì¹´í…Œê³ ë¦¬ ìˆ˜ì • ëª¨ë“œ:', editingCategory._id)\r\n        const result = await updateSkillCategory(editingCategory._id!, data)\r\n        console.log('âœ… ìˆ˜ì • ê²°ê³¼:', result)\r\n        if (result.success) {\r\n          setActiveForm(null)\r\n          setEditingCategory(null)\r\n          alert('ì¹´í…Œê³ ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        } else {\r\n          alert(`ì¹´í…Œê³ ë¦¬ ìˆ˜ì • ì‹¤íŒ¨: ${result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`)\r\n        }\r\n      } else {\r\n        console.log('â• ì¹´í…Œê³ ë¦¬ ìƒì„± ëª¨ë“œ')\r\n        const result = await createSkillCategory(data)\r\n        console.log('âœ… ìƒì„± ê²°ê³¼:', result)\r\n        if (result.success) {\r\n          setActiveForm(null)\r\n          alert('ì¹´í…Œê³ ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        } else {\r\n          alert(`ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì‹¤íŒ¨: ${result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('âŒ ì¹´í…Œê³ ë¦¬ ì €ì¥ ì‹¤íŒ¨:', error)\r\n      alert(`ì¹´í…Œê³ ë¦¬ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error}`)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleDeleteCategory = async (category: SkillCategory) => {\r\n    if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì¹´í…Œê³ ë¦¬ ë‚´ ëª¨ë“  ìŠ¤í‚¬ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.')) {\r\n      try {\r\n        setIsDeleting(true)\r\n        await deleteSkillCategory(category._id!)\r\n      } catch (error) {\r\n        console.error('ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì‹¤íŒ¨:', error)\r\n      } finally {\r\n        setIsDeleting(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleAddSkill = (categoryId: string) => {\r\n    setSelectedCategoryId(categoryId)\r\n    setEditingSkill(null)\r\n    setActiveForm('skill')\r\n  }\r\n\r\n  const handleEditSkill = (skill: Skill) => {\r\n    setEditingSkill(skill)\r\n    setSelectedCategoryId(skill.categoryId)\r\n    setActiveForm('skill')\r\n  }\r\n\r\n  const handleSaveSkill = async (data: SkillFormData) => {\r\n    if (!selectedCategoryId && !editingSkill) return\r\n    \r\n    try {\r\n      setIsSaving(true)\r\n      const categoryId = editingSkill?.categoryId || selectedCategoryId!\r\n      \r\n      if (editingSkill) {\r\n        const result = await updateSkill(editingSkill._id!, data)\r\n        if (result.success) {\r\n          setActiveForm(null)\r\n          setEditingSkill(null)\r\n          setSelectedCategoryId(null)\r\n        }\r\n      } else {\r\n        const result = await createSkill(categoryId, data)\r\n        if (result.success) {\r\n          setActiveForm(null)\r\n          setSelectedCategoryId(null)\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('ìŠ¤í‚¬ ì €ì¥ ì‹¤íŒ¨:', error)\r\n    } finally {\r\n      setIsSaving(false)\r\n    }\r\n  }\r\n\r\n  const handleDeleteSkill = async (skill: Skill) => {\r\n    if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {\r\n      try {\r\n        setIsDeleting(true)\r\n        await deleteSkill(skill._id!)\r\n      } catch (error) {\r\n        console.error('ìŠ¤í‚¬ ì‚­ì œ ì‹¤íŒ¨:', error)\r\n      } finally {\r\n        setIsDeleting(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleCancel = () => {\r\n    setActiveForm(null)\r\n    setEditingCategory(null)\r\n    setEditingSkill(null)\r\n    setSelectedCategoryId(null)\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        <span className=\"ml-2\">ê¸°ìˆ  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold\">ê¸°ìˆ  ê´€ë¦¬</h2>\r\n        <button\r\n          onClick={handleAddCategory}\r\n          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n        >\r\n          <FaPlus />\r\n          ì¹´í…Œê³ ë¦¬ ì¶”ê°€\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì¹´í…Œê³ ë¦¬ í¼ */}\r\n      {activeForm === 'category' && (\r\n        <SkillCategoryForm\r\n          initialData={editingCategory}\r\n          onSave={handleSaveCategory}\r\n          onCancel={handleCancel}\r\n          isSaving={isSaving}\r\n        />\r\n      )}\r\n\r\n      {/* ìŠ¤í‚¬ í¼ */}\r\n      {activeForm === 'skill' && (\r\n        <SkillForm\r\n          initialData={editingSkill}\r\n          categoryId={selectedCategoryId || undefined}\r\n          onSave={handleSaveSkill}\r\n          onCancel={handleCancel}\r\n          isSaving={isSaving}\r\n        />\r\n      )}\r\n\r\n      {/* ì¹´í…Œê³ ë¦¬ ëª©ë¡ - ğŸŒŸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì ìš© */}\r\n      <DndContext collisionDetection={closestCenter} onDragEnd={handleCategoryDragEnd}>\r\n        <SortableContext items={skillCategories.map(cat => cat._id!)} strategy={verticalListSortingStrategy}>\r\n          <div className=\"space-y-4\">\r\n            {skillCategories.map((category) => {\r\n              const isExpanded = expandedCategories.has(category._id!)\r\n              return (\r\n                <SortableCategoryCard\r\n                  key={category._id}\r\n                  category={category}\r\n                  isExpanded={isExpanded}\r\n                  onToggle={toggleCategory}\r\n                  onAddSkill={handleAddSkill}\r\n                  onEdit={handleEditCategory}\r\n                  onDelete={handleDeleteCategory}\r\n                  isSaving={isSaving}\r\n                  isDeleting={isDeleting}\r\n                >\r\n              \r\n                  {/* ìŠ¤í‚¬ ëª©ë¡ - ğŸŒŸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì ìš© */}\r\n                  <div className=\"border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800\">\r\n                    {category.skills && category.skills.length > 0 ? (\r\n                      <DndContext \r\n                        collisionDetection={closestCenter} \r\n                        onDragEnd={(event) => handleSkillDragEnd(event, category._id!)}\r\n                      >\r\n                        <SortableContext \r\n                          items={category.skills.map(skill => skill._id!)} \r\n                          strategy={verticalListSortingStrategy}\r\n                        >\r\n                          <div className=\"p-4 space-y-2\">\r\n                            {category.skills\r\n                              .sort((a, b) => a.order - b.order)\r\n                              .map((skill) => {\r\n                                const currentLevel = localLevels.get(skill._id!) ?? skill.level\r\n                                const hasChanges = localLevels.has(skill._id!) && localLevels.get(skill._id!) !== skill.level\r\n                                const isSavingThis = savingSkillIds.has(skill._id!)\r\n                                \r\n                                return (\r\n                                  <SortableSkillItem\r\n                                    key={skill._id}\r\n                                    skill={skill}\r\n                                    categoryColor={category.color || '#3B82F6'}\r\n                                    currentLevel={currentLevel}\r\n                                    hasChanges={hasChanges}\r\n                                    isSavingThis={isSavingThis}\r\n                                    isSaving={isSaving}\r\n                                    isDeleting={isDeleting}\r\n                                    onLevelChange={handleLevelChange}\r\n                                    onSaveLevel={handleSaveLevel}\r\n                                    onEdit={handleEditSkill}\r\n                                    onDelete={handleDeleteSkill}\r\n                                    onToggleSidebar={handleToggleSidebar}\r\n                                    onToggleLanguageCard={handleToggleLanguageCard}\r\n                                  />\r\n                                )\r\n                              })}\r\n                          </div>\r\n                        </SortableContext>\r\n                      </DndContext>\r\n                    ) : (\r\n                      <div className=\"p-4 text-center text-gray-500 dark:text-gray-400\">\r\n                        <FaPlus size={32} className=\"text-blue-400 dark:text-blue-500 mx-auto mb-2\" />\r\n                        <p className=\"text-sm\">ì•„ì§ ìŠ¤í‚¬ì´ ì—†ìŠµë‹ˆë‹¤.</p>\r\n                        <p className=\"text-xs mt-1\">ì¹´í…Œê³ ë¦¬ ì œëª© ì˜†ì˜ + ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ìŠ¤í‚¬ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </SortableCategoryCard>\r\n              )\r\n            })}\r\n          </div>\r\n        </SortableContext>\r\n      </DndContext>\r\n\r\n      {skillCategories.length === 0 && (\r\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n          <p className=\"text-lg mb-2\">ì•„ì§ ìƒì„±ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>\r\n          <p>ìœ„ì˜ \"ì¹´í…Œê³ ë¦¬ ì¶”ê°€\" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ë²ˆì§¸ ì¹´í…Œê³ ë¦¬ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SkillsManager\r\n","import React, { useState } from 'react'\r\nimport { FaPlus, FaEdit, FaTrash, FaFolder, FaBars } from 'react-icons/fa'\r\nimport { Category, CategoryFormData } from '../../types'\r\nimport { useCategoryManagerData, useCategoryUsage } from '../../hooks/useCategories'\r\nimport { useCRUDManager } from '../../hooks/useCRUDManager'\r\nimport { useToastHelpers } from '../../hooks/useToast'\r\nimport CategoryForm from '../forms/CategoryForm'\r\nimport { DndContext, closestCenter, DragEndEvent } from '@dnd-kit/core'\r\nimport { SortableContext, verticalListSortingStrategy, useSortable, arrayMove } from '@dnd-kit/sortable'\r\nimport { CSS } from '@dnd-kit/utilities'\r\n\r\n// ë“œë˜ê·¸ ê°€ëŠ¥í•œ ì¹´í…Œê³ ë¦¬ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸\r\ninterface SortableCategoryCardProps {\r\n  category: Category\r\n  onEdit: () => void\r\n  onDelete: () => void\r\n  isDeleting: boolean\r\n}\r\n\r\nconst SortableCategoryCard: React.FC<SortableCategoryCardProps> = ({ \r\n  category, \r\n  onEdit, \r\n  onDelete, \r\n  isDeleting \r\n}) => {\r\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ \r\n    id: category._id \r\n  })\r\n\r\n  const style = {\r\n    transform: CSS.Transform.toString(transform),\r\n    transition,\r\n    opacity: isDragging ? 0.5 : 1,\r\n  }\r\n\r\n  // ì¹´í…Œê³ ë¦¬ ì‚¬ìš© í†µê³„ ì¡°íšŒ\r\n  const { data: usageData } = useCategoryUsage(category._id)\r\n\r\n  return (\r\n    <div\r\n      ref={setNodeRef}\r\n      style={style}\r\n      className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow\"\r\n    >\r\n      <div className=\"flex items-start justify-between\">\r\n        <div className=\"flex items-start gap-3 flex-1\">\r\n          {/* ë“œë˜ê·¸ í•¸ë“¤ */}\r\n          <button\r\n            {...attributes}\r\n            {...listeners}\r\n            className=\"mt-1 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-grab active:cursor-grabbing\"\r\n            title=\"ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½\"\r\n          >\r\n            <FaBars />\r\n          </button>\r\n\r\n          <div className=\"flex-1\">\r\n            <h3 className=\"text-lg font-bold text-gray-900 dark:text-white mb-2\">\r\n              {category.name}\r\n            </h3>\r\n            \r\n            {/* ì‚¬ìš© í†µê³„ */}\r\n            {usageData && (\r\n              <div className=\"flex flex-wrap gap-2 text-sm\">\r\n                {usageData.usage.books > 0 && (\r\n                  <span className=\"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded\">\r\n                    ğŸ“š ì„œì  {usageData.usage.books}ê°œ\r\n                  </span>\r\n                )}\r\n                {usageData.usage.projects > 0 && (\r\n                  <span className=\"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded\">\r\n                    ğŸš€ í”„ë¡œì íŠ¸ {usageData.usage.projects}ê°œ\r\n                  </span>\r\n                )}\r\n                {usageData.usage.videoLearnings > 0 && (\r\n                  <span className=\"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded\">\r\n                    ğŸ“¹ ì˜ìƒ {usageData.usage.videoLearnings}ê°œ\r\n                  </span>\r\n                )}\r\n                {usageData.usage.videoPlaylists > 0 && (\r\n                  <span className=\"px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded\">\r\n                    ğŸ“º ì¬ìƒ ëª©ë¡ {usageData.usage.videoPlaylists}ê°œ\r\n                  </span>\r\n                )}\r\n                {usageData.usage.total === 0 && (\r\n                  <span className=\"text-gray-500 dark:text-gray-400 text-xs\">\r\n                    ì‚¬ìš© ì¤‘ì´ì§€ ì•ŠìŒ\r\n                  </span>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex gap-2 ml-4\">\r\n          <button\r\n            onClick={onEdit}\r\n            className=\"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors\"\r\n            title=\"ìˆ˜ì •\"\r\n          >\r\n            <FaEdit />\r\n          </button>\r\n          <button\r\n            onClick={onDelete}\r\n            disabled={isDeleting}\r\n            className=\"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors disabled:opacity-50\"\r\n            title=\"ì‚­ì œ\"\r\n          >\r\n            <FaTrash />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CategoryManager: React.FC = () => {\r\n  const { success, error } = useToastHelpers()\r\n  const { \r\n    categories, \r\n    isLoading, \r\n    createCategory, \r\n    updateCategory, \r\n    deleteCategory \r\n  } = useCategoryManagerData()\r\n\r\n  const [categoryState, categoryActions] = useCRUDManager<Category>({\r\n    onSave: async (data: CategoryFormData, editingItem) => {\r\n      if (editingItem) {\r\n        const result = await updateCategory(editingItem._id, data)\r\n        if (result.success) {\r\n          success('ì¹´í…Œê³ ë¦¬ ìˆ˜ì • ì™„ë£Œ', 'ì¹´í…Œê³ ë¦¬ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        } else {\r\n          throw result.error\r\n        }\r\n      } else {\r\n        const result = await createCategory(data)\r\n        if (result.success) {\r\n          success('ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ì™„ë£Œ', 'ìƒˆë¡œìš´ ì¹´í…Œê³ ë¦¬ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.')\r\n        } else {\r\n          throw result.error\r\n        }\r\n      }\r\n    },\r\n    onDelete: async (category: Category) => {\r\n      const result = await deleteCategory(category._id)\r\n      if (result.success) {\r\n        success('ì¹´í…Œê³ ë¦¬ ì‚­ì œ ì™„ë£Œ', `${category.name}ì´(ê°€) ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`)\r\n      } else {\r\n        // ì‚¬ìš© ì¤‘ì¸ ê²½ìš° ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ\r\n        const errorMsg = result.error?.response?.data?.message || 'ì¹´í…Œê³ ë¦¬ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤'\r\n        const usage = result.error?.response?.data?.usage\r\n        \r\n        if (usage) {\r\n          const usageDetails = []\r\n          if (usage.books > 0) usageDetails.push(`ì„œì  ${usage.books}ê°œ`)\r\n          if (usage.projects > 0) usageDetails.push(`í”„ë¡œì íŠ¸ ${usage.projects}ê°œ`)\r\n          if (usage.videoLearnings > 0) usageDetails.push(`ì˜ìƒ ${usage.videoLearnings}ê°œ`)\r\n          if (usage.videoPlaylists > 0) usageDetails.push(`ì¬ìƒ ëª©ë¡ ${usage.videoPlaylists}ê°œ`)\r\n          \r\n          error('ì‚­ì œ ë¶ˆê°€', `ì´ ì¹´í…Œê³ ë¦¬ëŠ” ${usageDetails.join(', ')}ì—ì„œ ì‚¬ìš© ì¤‘ì…ë‹ˆë‹¤. ë¨¼ì € í•´ë‹¹ í•­ëª©ë“¤ì˜ ì¹´í…Œê³ ë¦¬ë¥¼ ë³€ê²½í•´ì£¼ì„¸ìš”.`)\r\n        } else {\r\n          error('ì‚­ì œ ì‹¤íŒ¨', errorMsg)\r\n        }\r\n        throw result.error\r\n      }\r\n    },\r\n    onError: (err) => {\r\n      error('ì‘ì—… ì‹¤íŒ¨', err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')\r\n    }\r\n  })\r\n\r\n  // ë“œë˜ê·¸ ì•¤ ë“œë¡­ìœ¼ë¡œ ìˆœì„œ ë³€ê²½\r\n  const handleDragEnd = async (event: DragEndEvent) => {\r\n    const { active, over } = event\r\n\r\n    if (!over || active.id === over.id) return\r\n\r\n    const oldIndex = categories.findIndex(cat => cat._id === active.id)\r\n    const newIndex = categories.findIndex(cat => cat._id === over.id)\r\n\r\n    const reorderedCategories = arrayMove(categories, oldIndex, newIndex)\r\n\r\n    // ìˆœì„œ ì—…ë°ì´íŠ¸\r\n    for (let i = 0; i < reorderedCategories.length; i++) {\r\n      const category = reorderedCategories[i]\r\n      if (category && category.order !== i) {\r\n        await updateCategory(category._id, { name: category.name, order: i })\r\n      }\r\n    }\r\n  }\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-12\">\r\n        <div className=\"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin\"></div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n          <FaFolder className=\"text-yellow-600\" />\r\n          ì¹´í…Œê³ ë¦¬ ê´€ë¦¬\r\n        </h2>\r\n        <button\r\n          onClick={categoryActions.handleCreate}\r\n          className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md\"\r\n        >\r\n          <FaPlus />\r\n          ì¹´í…Œê³ ë¦¬ ì¶”ê°€\r\n        </button>\r\n      </div>\r\n\r\n      {/* ì¹´í…Œê³ ë¦¬ í¼ ëª¨ë‹¬ */}\r\n      {categoryState.showForm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full mx-4\">\r\n            <div className=\"p-6\">\r\n              <h2 className=\"text-xl font-semibold mb-4 text-gray-900 dark:text-white\">\r\n                {categoryState.editingItem ? 'ì¹´í…Œê³ ë¦¬ ìˆ˜ì •' : 'ì¹´í…Œê³ ë¦¬ ì¶”ê°€'}\r\n              </h2>\r\n              {categoryState.editingItem ? (\r\n                <CategoryForm\r\n                  data={categoryState.editingItem}\r\n                  onSave={categoryActions.handleSave}\r\n                  onCancel={categoryActions.handleCancel}\r\n                  isSaving={categoryState.isSaving}\r\n                />\r\n              ) : (\r\n                <CategoryForm\r\n                  onSave={categoryActions.handleSave}\r\n                  onCancel={categoryActions.handleCancel}\r\n                  isSaving={categoryState.isSaving}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ì¹´í…Œê³ ë¦¬ ëª©ë¡ - ë“œë˜ê·¸ ì•¤ ë“œë¡­ */}\r\n      <DndContext collisionDetection={closestCenter} onDragEnd={handleDragEnd}>\r\n        <SortableContext items={categories.map(c => c._id)} strategy={verticalListSortingStrategy}>\r\n          <div className=\"grid gap-4\">\r\n            {categories.map((category) => (\r\n              <SortableCategoryCard\r\n                key={category._id}\r\n                category={category}\r\n                onEdit={() => categoryActions.handleEdit(category)}\r\n                onDelete={() => categoryActions.handleDelete(category)}\r\n                isDeleting={categoryState.isDeleting}\r\n              />\r\n            ))}\r\n          </div>\r\n        </SortableContext>\r\n      </DndContext>\r\n\r\n      {categories.length === 0 && (\r\n        <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\r\n          <FaFolder className=\"text-6xl mx-auto mb-4 opacity-30\" />\r\n          <p>ì•„ì§ ë“±ë¡ëœ ì¹´í…Œê³ ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</p>\r\n          <p className=\"text-sm mt-2\">ìœ„ì˜ \"ì¹´í…Œê³ ë¦¬ ì¶”ê°€\" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì²« ì¹´í…Œê³ ë¦¬ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CategoryManager\r\n","import { SiteSettings } from '@/types'\r\nimport { Field, SectionDefinition } from './types'\r\n\r\n// Initial settings with default values\r\nexport const initialSettings: Partial<SiteSettings> = {\r\n  fullName: '', firstName: '', role: '', subtitle: '', location: '', education: '', \r\n  yearsOfExperience: '', email: '', phone: '', githubUrl: '', linkedinUrl: '', \r\n  heroTitle: '', heroSubtitle: '', aboutTitle: '', aboutSubtitle: '', aboutDescription1: '', \r\n  aboutDescription2: '', skillsTitle: '', skillsSubtitle: '', projectsTitle: '', \r\n  projectsSubtitle: '', booksTitle: '', booksSubtitle: '', contactTitle: '', \r\n  contactSubtitle: '', stat1Number: '', stat1Label: '', stat2Number: '', stat2Label: '',\r\n  experienceTitle: '', experienceSubtitle: '',\r\n  // Learning goals defaults\r\n  learningGoalsTitle: 'ì•ìœ¼ë¡œì˜ í•™ìŠµ ëª©í‘œ',\r\n  learningGoalsDescription: '4ì°¨ ì‚°ì—…í˜ëª… ì‹œëŒ€ì— ë°œë§ì¶° **ì§€ëŠ¥í˜• ê³µì¥(Smart Factory) êµ¬í˜„**ì„ ìœ„í•´ ë‹¤ìŒ ê¸°ìˆ ë“¤ì„ ì§‘ì¤‘ì ìœ¼ë¡œ íƒêµ¬í•˜ì—¬ ì „ë¬¸ì„±ì„ í™•ëŒ€í•´ ë‚˜ê°€ê² ìŠµë‹ˆë‹¤.',\r\n  learningGoalsList: ['ì²¨ë‹¨ ë¡œë´‡ ì œì–´', 'ë”¥ëŸ¬ë‹ ê¸°ë°˜ ë¹„ì „ ì‹œìŠ¤í…œ', 'ì—£ì§€ ì»´í“¨íŒ…', 'í´ë¼ìš°ë“œ ì—°ë™', 'MES/ERP ì—°ë™ ê¸°ìˆ '],\r\n  // SEO defaults\r\n  siteTitle: '', siteDescription: '', siteKeywords: '', siteAuthor: '', siteLanguage: 'ko',\r\n  siteUrl: '', ogTitle: '', ogDescription: '', ogImage: '', ogType: 'website',\r\n  twitterCard: 'summary_large_image', twitterSite: '', twitterCreator: '',\r\n  robotsIndex: true, robotsFollow: true, googleAnalyticsId: '', googleSiteVerification: '',\r\n  // Social media defaults\r\n  instagramUrl: '', twitterUrl: '', facebookUrl: '', youtubeUrl: '', tiktokUrl: '',\r\n  behanceUrl: '', dribbbleUrl: '', mediumUrl: '', telegramUrl: '', discordUrl: '',\r\n  kakaoTalkUrl: '', naverBlogUrl: '', tistoryUrl: '', velogUrl: '', notionUrl: '',\r\n  // Analytics defaults\r\n  googleTagManagerId: '', facebookPixelId: '', naverAnalyticsId: '', kakaoPixelId: '',\r\n  hotjarId: '', mixpanelToken: '', amplitudeApiKey: '', sentryDsn: '',\r\n  logRocketId: '', fullStoryOrgId: '', intercomAppId: '', zendeskWidgetKey: '',\r\n  crispWebsiteId: '', tawkToPropertyId: '', liveChatLicense: '', olarkSiteId: '',\r\n  // Security defaults\r\n  enableHttps: true, enableCsp: true, cspDirectives: \"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https:;\",\r\n  enableHsts: true, hstsMaxAge: '31536000', enableXssProtection: true, enableContentTypeOptions: true,\r\n  enableFrameOptions: true, frameOptionsValue: 'DENY', enableReferrerPolicy: true, referrerPolicyValue: 'strict-origin-when-cross-origin',\r\n  enablePermissionsPolicy: true, permissionsPolicyValue: 'camera=(), microphone=(), geolocation=(), payment=()', enableApiRateLimit: true, apiRateLimitPerMinute: '60',\r\n  enableAdminAuth: true, adminSessionTimeout: '3600', enableTwoFactorAuth: false, enableIpWhitelist: false, allowedIpAddresses: '',\r\n  enableAuditLog: true, enableBackup: true, backupFrequency: 'daily'\r\n}\r\n\r\n// All settings sections with field definitions\r\nexport const allSections: SectionDefinition[] = [\r\n  {\r\n    title: 'ğŸ§‘ ê°œì¸ ì •ë³´',\r\n    fields: [\r\n      { key: 'fullName', label: 'ì „ì²´ ì´ë¦„', type: 'text', placeholder: 'ìµœì£¼ì˜', isMultilingual: true },\r\n      { key: 'firstName', label: 'ì´ë¦„', type: 'text', placeholder: 'ì£¼ì˜', isMultilingual: true },\r\n      { key: 'role', label: 'ì—­í• /ì§ì±…', type: 'text', placeholder: 'ê³µì¥ìë™í™” ì „ë¬¸ê°€', isMultilingual: true },\r\n      { key: 'subtitle', label: 'ë¶€ì œëª©', type: 'text', placeholder: 'ë°”ë¦¬ìŠ¤íƒ€ â†’ ìë™í™” ì—”ì§€ë‹ˆì–´', isMultilingual: true },\r\n      { key: 'location', label: 'ìœ„ì¹˜', type: 'text', placeholder: 'ë¶€ì‚°', isMultilingual: true },\r\n      { key: 'education', label: 'êµìœ¡', type: 'text', placeholder: 'ë¶€ì‚°ì¸ë ¥ê°œë°œì›', isMultilingual: true },\r\n      { key: 'yearsOfExperience', label: 'ê²½ë ¥ ê¸°ê°„', type: 'text', placeholder: '5ë…„', isMultilingual: true },\r\n      { key: 'email', label: 'ì´ë©”ì¼', type: 'email', placeholder: 'your@email.com' },\r\n      { key: 'phone', label: 'ì „í™”ë²ˆí˜¸', type: 'tel', placeholder: '+82 10-1234-5678' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ”— ì†Œì…œ ë§í¬',\r\n    fields: [\r\n      { key: 'githubUrl', label: 'GitHub URL', type: 'url', placeholder: 'https://github.com/username' },\r\n      { key: 'linkedinUrl', label: 'LinkedIn URL', type: 'url', placeholder: 'https://linkedin.com/in/username' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'âš™ï¸ ì‚¬ì´ë“œë°” ì„¤ì •',\r\n    fields: [\r\n      { key: 'sidebarSkillCount', label: 'ì‚¬ì´ë“œë°” í•µì‹¬ê¸°ìˆ  í‘œì‹œ ê°œìˆ˜', type: 'number', min: 3, max: 6, placeholder: '4' },\r\n      { key: 'languageCardSkillCount', label: 'ì‚¬ì´ë“œë°” ì–¸ì–´ì¹´ë“œ í‘œì‹œ ê°œìˆ˜', type: 'number', min: 2, max: 5, placeholder: '3' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ  Hero ì„¹ì…˜ (ë©”ì¸ í˜ì´ì§€)',\r\n    fields: [\r\n      { key: 'heroTitle', label: 'Hero ì œëª©', type: 'text', placeholder: 'ê³µì¥ìë™í™” ì „ë¬¸ê°€', isMultilingual: true },\r\n      { key: 'heroSubtitle', label: 'Hero ë¶€ì œëª©', type: 'textarea', rows: 6, placeholder: 'ì—¬ëŸ¬ë¶„ì˜ ì†Œê°œë¥¼ ì‘ì„±í•˜ì„¸ìš”...', isMultilingual: true },\r\n      { key: 'heroTag', label: 'Hero íƒœê·¸', type: 'text', placeholder: 'ğŸ¯ ì·¨ì—… ì¤€ë¹„ ì¤‘', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ‘¤ About ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'aboutTitle', label: 'About ì œëª©', type: 'text', placeholder: 'ì €ì˜ ì—¬ì •', isMultilingual: true },\r\n      { key: 'aboutSubtitle', label: 'About ë¶€ì œëª©', type: 'text', placeholder: 'ì»¤í”¼ í•œ ì”ì—ì„œ ì‹œì‘ëœ...', isMultilingual: true },\r\n      { key: 'aboutDescription1', label: 'About ì„¤ëª… 1', type: 'textarea', rows: 6, placeholder: 'ì²« ë²ˆì§¸ ë¬¸ë‹¨...', isMultilingual: true },\r\n      { key: 'aboutDescription2', label: 'About ì„¤ëª… 2', type: 'textarea', rows: 6, placeholder: 'ë‘ ë²ˆì§¸ ë¬¸ë‹¨...', isMultilingual: true },\r\n      { key: 'aboutCardTitle', label: 'ì†Œê°œ ì¹´ë“œ ì œëª©', type: 'text', placeholder: 'ë°”ë¦¬ìŠ¤íƒ€ì—ì„œ ìë™í™” ì „ë¬¸ê°€ë¡œ', isMultilingual: true },\r\n      { key: 'aboutJourneyTitle', label: 'ì„±ì¥ ì—¬ì • ì œëª©', type: 'text', placeholder: 'ì„±ì¥ ì—¬ì •', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ’¼ Experience ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'experienceTitle', label: 'Experience ì œëª©', type: 'text', placeholder: 'ê²½ë ¥ & í•™ìŠµ', isMultilingual: true },\r\n      { key: 'experienceSubtitle', label: 'Experience ë¶€ì œëª©', type: 'text', placeholder: 'ë°”ë¦¬ìŠ¤íƒ€ì—ì„œ ìë™í™” ì „ë¬¸ê°€ë¡œ...', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ› ï¸ Skills ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'skillsTitle', label: 'Skills ì œëª©', type: 'text', placeholder: 'ê¸°ìˆ  ìŠ¤íƒ', isMultilingual: true },\r\n      { key: 'skillsSubtitle', label: 'Skills ë¶€ì œëª©', type: 'text', placeholder: 'ê³µì¥ìë™í™”ì™€ ë°ì´í„° ë¶„ì„ì„...', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ¯ í•™ìŠµ ëª©í‘œ (Skills í˜ì´ì§€)',\r\n    fields: [\r\n      { key: 'learningGoalsTitle', label: 'í•™ìŠµ ëª©í‘œ ì œëª©', type: 'text', placeholder: 'ì•ìœ¼ë¡œì˜ í•™ìŠµ ëª©í‘œ', isMultilingual: true },\r\n      { key: 'learningGoalsDescription', label: 'í•™ìŠµ ëª©í‘œ ì„¤ëª…', type: 'textarea', placeholder: '4ì°¨ ì‚°ì—…í˜ëª… ì‹œëŒ€ì—...', isMultilingual: true },\r\n      { key: 'learningGoalsList', label: 'í•™ìŠµ ëª©í‘œ ê¸°ìˆ  ëª©ë¡', type: 'array', placeholder: 'ê¸°ìˆ  ì´ë¦„ ì…ë ¥ (Enterë¡œ ì¶”ê°€)' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“ Projects ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'projectsTitle', label: 'Projects ì œëª©', type: 'text', placeholder: 'í”„ë¡œì íŠ¸', isMultilingual: true },\r\n      { key: 'projectsSubtitle', label: 'Projects ë¶€ì œëª©', type: 'text', placeholder: 'ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ í”„ë¡œì íŠ¸...', isMultilingual: true },\r\n      { key: 'projectsUpdateTitle', label: 'ì—…ë°ì´íŠ¸ ì¹´ë“œ ì œëª©', type: 'text', placeholder: 'í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸ ì˜ˆì •', isMultilingual: true },\r\n      { key: 'projectsUpdateDescription', label: 'ì—…ë°ì´íŠ¸ ì¹´ë“œ ì„¤ëª…', type: 'textarea', placeholder: 'í˜„ì¬ í•™ìŠµ ì¤‘ì¸ ê¸°ìˆ ë“¤ì„ í™œìš©í•œ ì‹¤ì œ í”„ë¡œì íŠ¸ë“¤ì„ ê³§ ì—…ë¡œë“œí•  ì˜ˆì •ì…ë‹ˆë‹¤.', isMultilingual: true },\r\n      { key: 'projectsUpdateTechList', label: 'ì—…ë°ì´íŠ¸ ì˜ˆì • ê¸°ìˆ  ëª©ë¡', type: 'array', placeholder: 'ê¸°ìˆ  ì´ë¦„ ì…ë ¥ (Enterë¡œ ì¶”ê°€)' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“š Books ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'booksTitle', label: 'Books ì œëª©', type: 'text', placeholder: 'ê¸°ìˆ  ì„œì  & í•™ìŠµ ë…¸íŠ¸', isMultilingual: true },\r\n      { key: 'booksSubtitle', label: 'Books ë¶€ì œëª©', type: 'text', placeholder: 'ì½ì€ ê¸°ìˆ  ì„œì ê³¼...', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“ Contact ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'contactTitle', label: 'Contact ì œëª©', type: 'text', placeholder: 'ì—°ë½ì²˜', isMultilingual: true },\r\n      { key: 'contactSubtitle', label: 'Contact ë¶€ì œëª©', type: 'text', placeholder: 'í”„ë¡œì íŠ¸ë‚˜ í˜‘ì—…ì—...', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“Š í†µê³„ ì„¹ì…˜',\r\n    fields: [\r\n      { key: 'stat1Number', label: 'í†µê³„ 1 ìˆ«ì', type: 'text', placeholder: '5+' },\r\n      { key: 'stat1Label', label: 'í†µê³„ 1 ë¼ë²¨', type: 'text', placeholder: 'ë…„ ê²½ë ¥', isMultilingual: true },\r\n      { key: 'stat2Number', label: 'í†µê³„ 2 ìˆ«ì', type: 'text', placeholder: '10+' },\r\n      { key: 'stat2Label', label: 'í†µê³„ 2 ë¼ë²¨', type: 'text', placeholder: 'ê¸°ìˆ  ìŠ¤íƒ', isMultilingual: true },\r\n      { key: 'stat3Number', label: 'í†µê³„ 3 ìˆ«ì', type: 'text', placeholder: '3+' },\r\n      { key: 'stat3Label', label: 'í†µê³„ 3 ë¼ë²¨', type: 'text', placeholder: 'ì™„ë£Œ í”„ë¡œì íŠ¸', isMultilingual: true },\r\n    ] as Field[]\r\n  },\r\n  // SEO Settings\r\n  {\r\n    title: 'ğŸ” ê¸°ë³¸ SEO ì„¤ì •',\r\n    fields: [\r\n      { key: 'siteTitle', label: 'ì‚¬ì´íŠ¸ ì œëª©', type: 'text', placeholder: 'í¬íŠ¸í´ë¦¬ì˜¤ - í™ê¸¸ë™' },\r\n      { key: 'siteDescription', label: 'ì‚¬ì´íŠ¸ ì„¤ëª…', type: 'textarea', rows: 3, placeholder: 'ê³µì¥ìë™í™” ì „ë¬¸ê°€ í™ê¸¸ë™ì˜ í¬íŠ¸í´ë¦¬ì˜¤ì…ë‹ˆë‹¤. PLC í”„ë¡œê·¸ë˜ë°, ë°ì´í„° ë¶„ì„, ìë™í™” ì‹œìŠ¤í…œ ê°œë°œ ê²½í—˜ì„ ì†Œê°œí•©ë‹ˆë‹¤.' },\r\n      { key: 'siteKeywords', label: 'í‚¤ì›Œë“œ (ì‰¼í‘œë¡œ êµ¬ë¶„)', type: 'text', placeholder: 'ê³µì¥ìë™í™”, PLC, ë°ì´í„°ë¶„ì„, ìë™í™”ì‹œìŠ¤í…œ' },\r\n      { key: 'siteAuthor', label: 'ì‘ì„±ì', type: 'text', placeholder: 'í™ê¸¸ë™' },\r\n      { key: 'siteLanguage', label: 'ì‚¬ì´íŠ¸ ì–¸ì–´', type: 'select', placeholder: 'ì–¸ì–´ ì„ íƒ', options: [\r\n        { value: 'ko', label: 'í•œêµ­ì–´ (ko)' },\r\n        { value: 'en', label: 'English (en)' },\r\n        { value: 'ja', label: 'æ—¥æœ¬èª (ja)' },\r\n        { value: 'zh', label: 'ä¸­æ–‡ (zh)' }\r\n      ]},\r\n      { key: 'siteUrl', label: 'ì‚¬ì´íŠ¸ URL', type: 'url', placeholder: 'https://yourportfolio.com' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“± Open Graph (Facebook, LinkedIn)',\r\n    fields: [\r\n      { key: 'ogTitle', label: 'OG ì œëª©', type: 'text', placeholder: 'í¬íŠ¸í´ë¦¬ì˜¤ - í™ê¸¸ë™' },\r\n      { key: 'ogDescription', label: 'OG ì„¤ëª…', type: 'textarea', rows: 3, placeholder: 'ê³µì¥ìë™í™” ì „ë¬¸ê°€ í™ê¸¸ë™ì˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.' },\r\n      { key: 'ogImage', label: 'OG ì´ë¯¸ì§€ URL', type: 'url', placeholder: 'https://yourportfolio.com/og-image.jpg' },\r\n      { key: 'ogType', label: 'OG íƒ€ì…', type: 'select', placeholder: 'íƒ€ì… ì„ íƒ', options: [\r\n        { value: 'website', label: 'ì›¹ì‚¬ì´íŠ¸ (website)' },\r\n        { value: 'profile', label: 'í”„ë¡œí•„ (profile)' },\r\n        { value: 'article', label: 'ê¸°ì‚¬ (article)' }\r\n      ]},\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ¦ Twitter Card',\r\n    fields: [\r\n      { key: 'twitterCard', label: 'Twitter Card íƒ€ì…', type: 'select', placeholder: 'ì¹´ë“œ íƒ€ì… ì„ íƒ', options: [\r\n        { value: 'summary', label: 'ìš”ì•½ (summary)' },\r\n        { value: 'summary_large_image', label: 'í° ì´ë¯¸ì§€ ìš”ì•½ (summary_large_image)' },\r\n        { value: 'app', label: 'ì•± (app)' },\r\n        { value: 'player', label: 'í”Œë ˆì´ì–´ (player)' }\r\n      ]},\r\n      { key: 'twitterSite', label: 'Twitter ì‚¬ì´íŠ¸ ê³„ì •', type: 'text', placeholder: '@yourhandle' },\r\n      { key: 'twitterCreator', label: 'Twitter ì‘ì„±ì ê³„ì •', type: 'text', placeholder: '@yourhandle' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ¤– ê²€ìƒ‰ ì—”ì§„ ì„¤ì •',\r\n    fields: [\r\n      { key: 'robotsIndex', label: 'ê²€ìƒ‰ ì—”ì§„ ì¸ë±ì‹± í—ˆìš©', type: 'checkbox', placeholder: 'ê²€ìƒ‰ ì—”ì§„ì´ ì´ ì‚¬ì´íŠ¸ë¥¼ ì¸ë±ì‹±í•  ìˆ˜ ìˆë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤.' },\r\n      { key: 'robotsFollow', label: 'ë§í¬ íŒ”ë¡œìš° í—ˆìš©', type: 'checkbox', placeholder: 'ê²€ìƒ‰ ì—”ì§„ì´ ì´ ì‚¬ì´íŠ¸ì˜ ë§í¬ë¥¼ ë”°ë¼ê°ˆ ìˆ˜ ìˆë„ë¡ í—ˆìš©í•©ë‹ˆë‹¤.' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“Š Google ì„¤ì •',\r\n    fields: [\r\n      { key: 'googleAnalyticsId', label: 'Google Analytics ID', type: 'text', placeholder: 'G-XXXXXXXXXX' },\r\n      { key: 'googleSiteVerification', label: 'Google ì‚¬ì´íŠ¸ ì¸ì¦ ì½”ë“œ', type: 'text', placeholder: 'google-site-verification=...' },\r\n    ] as Field[]\r\n  },\r\n  // Social Media\r\n  {\r\n    title: 'ğŸ“± ê¸€ë¡œë²Œ ì†Œì…œ ë¯¸ë””ì–´',\r\n    fields: [\r\n      { key: 'instagramUrl', label: 'Instagram URL', type: 'url', placeholder: 'https://instagram.com/yourhandle' },\r\n      { key: 'twitterUrl', label: 'Twitter URL', type: 'url', placeholder: 'https://twitter.com/yourhandle' },\r\n      { key: 'facebookUrl', label: 'Facebook URL', type: 'url', placeholder: 'https://facebook.com/yourpage' },\r\n      { key: 'youtubeUrl', label: 'YouTube URL', type: 'url', placeholder: 'https://youtube.com/@yourchannel' },\r\n      { key: 'tiktokUrl', label: 'TikTok URL', type: 'url', placeholder: 'https://tiktok.com/@yourhandle' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ¨ ë””ìì¸ & í¬íŠ¸í´ë¦¬ì˜¤',\r\n    fields: [\r\n      { key: 'behanceUrl', label: 'Behance URL', type: 'url', placeholder: 'https://behance.net/yourprofile' },\r\n      { key: 'dribbbleUrl', label: 'Dribbble URL', type: 'url', placeholder: 'https://dribbble.com/yourhandle' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'âœï¸ ë¸”ë¡œê·¸ & ê¸€ì“°ê¸°',\r\n    fields: [\r\n      { key: 'mediumUrl', label: 'Medium URL', type: 'url', placeholder: 'https://medium.com/@yourhandle' },\r\n      { key: 'velogUrl', label: 'Velog URL', type: 'url', placeholder: 'https://velog.io/@yourhandle' },\r\n      { key: 'tistoryUrl', label: 'Tistory URL', type: 'url', placeholder: 'https://yourblog.tistory.com' },\r\n      { key: 'naverBlogUrl', label: 'ë„¤ì´ë²„ ë¸”ë¡œê·¸ URL', type: 'url', placeholder: 'https://blog.naver.com/yourblog' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ’¬ ë©”ì‹ ì € & ì»¤ë®¤ë‹ˆì¼€ì´ì…˜',\r\n    fields: [\r\n      { key: 'telegramUrl', label: 'Telegram URL', type: 'url', placeholder: 'https://t.me/yourhandle' },\r\n      { key: 'discordUrl', label: 'Discord URL', type: 'url', placeholder: 'https://discord.gg/yourserver' },\r\n      { key: 'kakaoTalkUrl', label: 'ì¹´ì¹´ì˜¤í†¡ URL', type: 'url', placeholder: 'https://open.kakao.com/o/yourgroup' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ & ë„êµ¬',\r\n    fields: [\r\n      { key: 'notionUrl', label: 'Notion ì›Œí¬ìŠ¤í˜ì´ìŠ¤ URL', type: 'url', placeholder: 'https://notion.so/yourworkspace' },\r\n    ] as Field[]\r\n  },\r\n  // Analytics\r\n  {\r\n    title: 'ğŸ“Š ì›¹ ë¶„ì„ ë„êµ¬',\r\n    fields: [\r\n      { key: 'googleTagManagerId', label: 'Google Tag Manager ID', type: 'text', placeholder: 'GTM-XXXXXXX' },\r\n      { key: 'facebookPixelId', label: 'Facebook Pixel ID', type: 'text', placeholder: '123456789012345' },\r\n      { key: 'naverAnalyticsId', label: 'ë„¤ì´ë²„ ì›¹ë§ˆìŠ¤í„° ë„êµ¬ ID', type: 'text', placeholder: 'naver-site-verification=...' },\r\n      { key: 'kakaoPixelId', label: 'ì¹´ì¹´ì˜¤ í”½ì…€ ID', type: 'text', placeholder: '1234567890' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ” ì‚¬ìš©ì í–‰ë™ ë¶„ì„',\r\n    fields: [\r\n      { key: 'hotjarId', label: 'Hotjar Site ID', type: 'text', placeholder: '1234567' },\r\n      { key: 'mixpanelToken', label: 'Mixpanel Project Token', type: 'text', placeholder: 'abc123def456...' },\r\n      { key: 'amplitudeApiKey', label: 'Amplitude API Key', type: 'text', placeholder: 'abc123def456...' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ› ì—ëŸ¬ ì¶”ì  & ëª¨ë‹ˆí„°ë§',\r\n    fields: [\r\n      { key: 'sentryDsn', label: 'Sentry DSN', type: 'text', placeholder: 'https://abc123@sentry.io/123456' },\r\n      { key: 'logRocketId', label: 'LogRocket App ID', type: 'text', placeholder: 'abc123def456' },\r\n      { key: 'fullStoryOrgId', label: 'FullStory Org ID', type: 'text', placeholder: 'ABC123' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ’¬ ê³ ê° ì§€ì› & ì±„íŒ…',\r\n    fields: [\r\n      { key: 'intercomAppId', label: 'Intercom App ID', type: 'text', placeholder: 'abc123def' },\r\n      { key: 'zendeskWidgetKey', label: 'Zendesk Widget Key', type: 'text', placeholder: 'abc123def456...' },\r\n      { key: 'crispWebsiteId', label: 'Crisp Website ID', type: 'text', placeholder: 'abc123def456...' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ§ ì¶”ê°€ ì±„íŒ… ë„êµ¬',\r\n    fields: [\r\n      { key: 'tawkToPropertyId', label: 'Tawk.to Property ID', type: 'text', placeholder: 'abc123def456...' },\r\n      { key: 'liveChatLicense', label: 'LiveChat License Number', type: 'text', placeholder: '12345678' },\r\n      { key: 'olarkSiteId', label: 'Olark Site ID', type: 'text', placeholder: 'abc123def456...' },\r\n    ] as Field[]\r\n  },\r\n  // Security\r\n  {\r\n    title: 'ğŸ”’ ê¸°ë³¸ ë³´ì•ˆ í—¤ë”',\r\n    fields: [\r\n      { key: 'enableHttps', label: 'HTTPS ê°•ì œ ì‚¬ìš©', type: 'checkbox', placeholder: 'ëª¨ë“  HTTP ìš”ì²­ì„ HTTPSë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•©ë‹ˆë‹¤.' },\r\n      { key: 'enableCsp', label: 'Content Security Policy (CSP) í™œì„±í™”', type: 'checkbox', placeholder: 'XSS ê³µê²©ì„ ë°©ì§€í•˜ê¸° ìœ„í•œ CSP í—¤ë”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.' },\r\n      { key: 'cspDirectives', label: 'CSP ì§€ì‹œë¬¸', type: 'textarea', rows: 3, placeholder: 'Content Security Policy ì§€ì‹œë¬¸ì„ ì„¤ì •í•©ë‹ˆë‹¤.' },\r\n      { key: 'enableHsts', label: 'HTTP Strict Transport Security (HSTS) í™œì„±í™”', type: 'checkbox', placeholder: 'HTTPS ì—°ê²°ì„ ê°•ì œí•˜ëŠ” HSTS í—¤ë”ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.' },\r\n      { key: 'hstsMaxAge', label: 'HSTS ìµœëŒ€ ë‚˜ì´ (ì´ˆ)', type: 'text', placeholder: '31536000 (1ë…„)' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ›¡ï¸ ì¶”ê°€ ë³´ì•ˆ í—¤ë”',\r\n    fields: [\r\n      { key: 'enableXssProtection', label: 'XSS ë³´í˜¸ í™œì„±í™”', type: 'checkbox', placeholder: 'ë¸Œë¼ìš°ì €ì˜ XSS í•„í„°ë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.' },\r\n      { key: 'enableContentTypeOptions', label: 'Content-Type ì˜µì…˜ í™œì„±í™”', type: 'checkbox', placeholder: 'MIME íƒ€ì… ìŠ¤ë‹ˆí•‘ ê³µê²©ì„ ë°©ì§€í•©ë‹ˆë‹¤.' },\r\n      { key: 'enableFrameOptions', label: 'X-Frame-Options í™œì„±í™”', type: 'checkbox', placeholder: 'í´ë¦­ì¬í‚¹ ê³µê²©ì„ ë°©ì§€í•©ë‹ˆë‹¤.' },\r\n      { key: 'frameOptionsValue', label: 'X-Frame-Options ê°’', type: 'select', placeholder: 'í—¤ë” ê°’ ì„ íƒ', options: [\r\n        { value: 'DENY', label: 'DENY (ëª¨ë“  í”„ë ˆì„ ì°¨ë‹¨)' },\r\n        { value: 'SAMEORIGIN', label: 'SAMEORIGIN (ê°™ì€ ë„ë©”ì¸ë§Œ í—ˆìš©)' },\r\n        { value: 'ALLOW-FROM', label: 'ALLOW-FROM (íŠ¹ì • ë„ë©”ì¸ í—ˆìš©)' }\r\n      ]},\r\n      { key: 'enableReferrerPolicy', label: 'Referrer Policy í™œì„±í™”', type: 'checkbox', placeholder: 'ë¦¬í¼ëŸ¬ ì •ë³´ ë…¸ì¶œì„ ì œì–´í•©ë‹ˆë‹¤.' },\r\n      { key: 'referrerPolicyValue', label: 'Referrer Policy ê°’', type: 'select', placeholder: 'ì •ì±… ê°’ ì„ íƒ', options: [\r\n        { value: 'no-referrer', label: 'no-referrer (ë¦¬í¼ëŸ¬ ì •ë³´ ì „ì†¡ ì•ˆí•¨)' },\r\n        { value: 'strict-origin-when-cross-origin', label: 'strict-origin-when-cross-origin (êµì°¨ ë„ë©”ì¸ì‹œ ë„ë©”ì¸ë§Œ)' },\r\n        { value: 'same-origin', label: 'same-origin (ê°™ì€ ë„ë©”ì¸ë§Œ)' }\r\n      ]},\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ” ê¶Œí•œ ë° ì •ì±…',\r\n    fields: [\r\n      { key: 'enablePermissionsPolicy', label: 'Permissions Policy í™œì„±í™”', type: 'checkbox', placeholder: 'ë¸Œë¼ìš°ì € ê¸°ëŠ¥ ì‚¬ìš©ì„ ì œì–´í•©ë‹ˆë‹¤.' },\r\n      { key: 'permissionsPolicyValue', label: 'Permissions Policy ê°’', type: 'textarea', rows: 2, placeholder: 'camera=(), microphone=(), geolocation=(), payment=()' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'âš¡ API ë³´ì•ˆ',\r\n    fields: [\r\n      { key: 'enableApiRateLimit', label: 'API ì†ë„ ì œí•œ í™œì„±í™”', type: 'checkbox', placeholder: 'API ìš”ì²­ ë¹ˆë„ë¥¼ ì œí•œí•˜ì—¬ DDoS ê³µê²©ì„ ë°©ì§€í•©ë‹ˆë‹¤.' },\r\n      { key: 'apiRateLimitPerMinute', label: 'ë¶„ë‹¹ API ìš”ì²­ ì œí•œ', type: 'text', placeholder: '60 (ë¶„ë‹¹ 60íšŒ)' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ‘¤ ê´€ë¦¬ì ì¸ì¦',\r\n    fields: [\r\n      { key: 'enableAdminAuth', label: 'ê´€ë¦¬ì ì¸ì¦ í™œì„±í™”', type: 'checkbox', placeholder: 'ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ì„ ìœ„í•œ ì¸ì¦ì„ í™œì„±í™”í•©ë‹ˆë‹¤.' },\r\n      { key: 'adminSessionTimeout', label: 'ê´€ë¦¬ì ì„¸ì…˜ íƒ€ì„ì•„ì›ƒ (ì´ˆ)', type: 'text', placeholder: '3600 (1ì‹œê°„)' },\r\n      { key: 'enableTwoFactorAuth', label: '2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”', type: 'checkbox', placeholder: 'ê´€ë¦¬ì ë¡œê·¸ì¸ì‹œ 2ë‹¨ê³„ ì¸ì¦ì„ ìš”êµ¬í•©ë‹ˆë‹¤.' },\r\n      { key: 'enableIpWhitelist', label: 'IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ í™œì„±í™”', type: 'checkbox', placeholder: 'íŠ¹ì • IP ì£¼ì†Œì—ì„œë§Œ ê´€ë¦¬ì ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤.' },\r\n      { key: 'allowedIpAddresses', label: 'í—ˆìš©ëœ IP ì£¼ì†Œ (ì‰¼í‘œë¡œ êµ¬ë¶„)', type: 'text', placeholder: '192.168.1.1, 10.0.0.1' },\r\n    ] as Field[]\r\n  },\r\n  {\r\n    title: 'ğŸ“‹ ë¡œê·¸ & ë°±ì—…',\r\n    fields: [\r\n      { key: 'enableAuditLog', label: 'ê°ì‚¬ ë¡œê·¸ í™œì„±í™”', type: 'checkbox', placeholder: 'ê´€ë¦¬ì í™œë™ì„ ê¸°ë¡í•˜ì—¬ ë³´ì•ˆ ê°ì‚¬ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.' },\r\n      { key: 'enableBackup', label: 'ìë™ ë°±ì—… í™œì„±í™”', type: 'checkbox', placeholder: 'ì •ê¸°ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°±ì—…í•©ë‹ˆë‹¤.' },\r\n      { key: 'backupFrequency', label: 'ë°±ì—… ë¹ˆë„', type: 'select', placeholder: 'ë°±ì—… ì£¼ê¸° ì„ íƒ', options: [\r\n        { value: 'hourly', label: 'ë§¤ì‹œê°„ (hourly)' },\r\n        { value: 'daily', label: 'ë§¤ì¼ (daily)' },\r\n        { value: 'weekly', label: 'ë§¤ì£¼ (weekly)' },\r\n        { value: 'monthly', label: 'ë§¤ì›” (monthly)' }\r\n      ]},\r\n    ] as Field[]\r\n  },\r\n]\r\n\r\n","import { AdminLanguage } from '@/components/common/LanguageTabs'\r\nimport { SectionDefinition } from './types'\r\nimport { allSections } from './constants'\r\n\r\n/**\r\n * Generate multilingual field key based on language\r\n * @param baseKey - Base field key (e.g., 'heroTitle')\r\n * @param lang - Target language ('ko', 'en', 'ja')\r\n * @returns Localized field key (e.g., 'heroTitleEn' for 'en')\r\n */\r\nexport const getMultilingualKey = (baseKey: string, lang: AdminLanguage): string => {\r\n  if (lang === 'ko') return baseKey\r\n  if (lang === 'en') return `${baseKey}En`\r\n  if (lang === 'ja') return `${baseKey}Ja`\r\n  return baseKey\r\n}\r\n\r\n/**\r\n * Check if a multilingual field has values in all languages\r\n * @param settings - Settings object containing field values\r\n * @param fieldKey - Base field key to check\r\n * @returns Object with completion status for each language\r\n */\r\nexport const isFieldTranslated = (\r\n  settings: any,\r\n  fieldKey: string\r\n): { ko: boolean; en: boolean; ja: boolean; complete: boolean } => {\r\n  const koValue = settings[fieldKey]\r\n  const enValue = settings[getMultilingualKey(fieldKey, 'en')]\r\n  const jaValue = settings[getMultilingualKey(fieldKey, 'ja')]\r\n\r\n  const hasKo = Boolean(koValue && (typeof koValue === 'string' ? koValue.trim() : koValue))\r\n  const hasEn = Boolean(enValue && (typeof enValue === 'string' ? enValue.trim() : enValue))\r\n  const hasJa = Boolean(jaValue && (typeof jaValue === 'string' ? jaValue.trim() : jaValue))\r\n\r\n  return {\r\n    ko: hasKo,\r\n    en: hasEn,\r\n    ja: hasJa,\r\n    complete: hasKo && hasEn && hasJa\r\n  }\r\n}\r\n\r\n/**\r\n * Get active section title based on section ID\r\n * @param activeSection - Section ID ('general', 'appearance', etc.)\r\n * @returns Human-readable section title\r\n */\r\nexport const getActiveSectionTitle = (activeSection: string | null): string => {\r\n  switch (activeSection) {\r\n    case 'general': return 'ğŸ  ì¼ë°˜ ì„¤ì •'\r\n    case 'appearance': return 'ğŸ¨ ì™¸ê´€ ì„¤ì •'\r\n    case 'seo': return 'ğŸ” SEO ì„¤ì •'\r\n    case 'social': return 'ğŸ“± ì†Œì…œ ë¯¸ë””ì–´'\r\n    case 'analytics': return 'ğŸ“Š ë¶„ì„ ë„êµ¬'\r\n    case 'security': return 'ğŸ”’ ë³´ì•ˆ ì„¤ì •'\r\n    default: return 'ì‚¬ì´íŠ¸ ì„¤ì •'\r\n  }\r\n}\r\n\r\n/**\r\n * Get active section description based on section ID\r\n * @param activeSection - Section ID ('general', 'appearance', etc.)\r\n * @returns Section description text\r\n */\r\nexport const getActiveSectionDescription = (activeSection: string | null): string => {\r\n  switch (activeSection) {\r\n    case 'general': return 'ì‚¬ì´íŠ¸ì˜ ê¸°ë³¸ ì •ë³´ì™€ ê°œì¸ ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.'\r\n    case 'appearance': return 'ê° ì„¹ì…˜ì˜ ì œëª©ê³¼ ë‚´ìš©ì„ í¸ì§‘í•©ë‹ˆë‹¤.'\r\n    case 'seo': return 'ê²€ìƒ‰ ì—”ì§„ ìµœì í™” ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.'\r\n    case 'social': return 'ì†Œì…œ ë¯¸ë””ì–´ ë§í¬ì™€ ì—°ë½ì²˜ ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.'\r\n    case 'analytics': return 'Google Analytics ë“± ë¶„ì„ ë„êµ¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.'\r\n    case 'security': return 'ì¸ì¦ ë° ë³´ì•ˆ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.'\r\n    default: return 'í¬íŠ¸í´ë¦¬ì˜¤ì˜ ëª¨ë“  í…ìŠ¤íŠ¸ë¥¼ í¸ì§‘í•˜ê³  ì €ì¥í•˜ì„¸ìš”.'\r\n  }\r\n}\r\n\r\n/**\r\n * Filter sections based on active section ID\r\n * @param activeSection - Section ID or null for all sections\r\n * @returns Filtered array of section definitions\r\n */\r\nexport const getFilteredSections = (activeSection: string | null): SectionDefinition[] => {\r\n  if (!activeSection) return allSections\r\n\r\n  switch (activeSection) {\r\n    case 'general':\r\n      // General settings: Personal info + Social links + Sidebar settings\r\n      return allSections.filter(section =>\r\n        section.title.includes('ê°œì¸ ì •ë³´') || \r\n        section.title.includes('ì†Œì…œ ë§í¬') || \r\n        section.title.includes('ì‚¬ì´ë“œë°” ì„¤ì •')\r\n      )\r\n    \r\n    case 'appearance':\r\n      // Appearance: Hero + About + Experience + Skills + Learning Goals + Projects + Books + Contact + Stats\r\n      return allSections.filter(section =>\r\n        section.title.includes('Hero') ||\r\n        section.title.includes('About') ||\r\n        section.title.includes('Experience') ||\r\n        section.title.includes('Skills') ||\r\n        section.title.includes('í•™ìŠµ ëª©í‘œ') ||\r\n        section.title.includes('Projects') ||\r\n        section.title.includes('Books') ||\r\n        section.title.includes('Contact') ||\r\n        section.title.includes('í†µê³„')\r\n      )\r\n    \r\n    case 'seo':\r\n      // SEO: All SEO-related sections\r\n      return allSections.filter(section =>\r\n        section.title.includes('SEO') ||\r\n        section.title.includes('Open Graph') ||\r\n        section.title.includes('Twitter Card') ||\r\n        section.title.includes('ê²€ìƒ‰ ì—”ì§„') ||\r\n        section.title.includes('Google')\r\n      )\r\n    \r\n    case 'social':\r\n      // Social media: Social links + all social media sections\r\n      return allSections.filter(section =>\r\n        section.title.includes('ì†Œì…œ ë§í¬') ||\r\n        section.title.includes('ê¸€ë¡œë²Œ ì†Œì…œ ë¯¸ë””ì–´') ||\r\n        section.title.includes('ë””ìì¸ & í¬íŠ¸í´ë¦¬ì˜¤') ||\r\n        section.title.includes('ë¸”ë¡œê·¸ & ê¸€ì“°ê¸°') ||\r\n        section.title.includes('ë©”ì‹ ì € & ì»¤ë®¤ë‹ˆì¼€ì´ì…˜') ||\r\n        section.title.includes('ì›Œí¬ìŠ¤í˜ì´ìŠ¤ & ë„êµ¬')\r\n      )\r\n    \r\n    case 'analytics':\r\n      // Analytics: All analytics-related sections\r\n      return allSections.filter(section =>\r\n        section.title.includes('ì›¹ ë¶„ì„ ë„êµ¬') ||\r\n        section.title.includes('ì‚¬ìš©ì í–‰ë™ ë¶„ì„') ||\r\n        section.title.includes('ì—ëŸ¬ ì¶”ì ') ||\r\n        section.title.includes('ê³ ê° ì§€ì›') ||\r\n        section.title.includes('ì¶”ê°€ ì±„íŒ… ë„êµ¬')\r\n      )\r\n    \r\n    case 'security':\r\n      // Security: All security-related sections\r\n      return allSections.filter(section =>\r\n        section.title.includes('ê¸°ë³¸ ë³´ì•ˆ í—¤ë”') ||\r\n        section.title.includes('ì¶”ê°€ ë³´ì•ˆ í—¤ë”') ||\r\n        section.title.includes('ê¶Œí•œ ë° ì •ì±…') ||\r\n        section.title.includes('API ë³´ì•ˆ') ||\r\n        section.title.includes('ê´€ë¦¬ì ì¸ì¦') ||\r\n        section.title.includes('ë¡œê·¸ & ë°±ì—…')\r\n      )\r\n    \r\n    default:\r\n      return allSections\r\n  }\r\n}\r\n\r\n","import { useState, useEffect, useCallback } from 'react'\r\nimport { SiteSettings } from '@/types'\r\nimport { AdminLanguage } from '@/components/common/LanguageTabs'\r\nimport { settingsAPI } from '@/services/api'\r\nimport { useSiteSettings } from '@/hooks/useSiteSettings'\r\nimport { MessageType } from '../types'\r\nimport { initialSettings } from '../constants'\r\nimport { getFilteredSections } from '../utils'\r\n\r\n/**\r\n * Custom hook for managing settings form state and business logic\r\n * @param activeSection - Optional section filter ('general', 'appearance', etc.)\r\n */\r\nexport const useSettingsForm = (activeSection: string | null = null) => {\r\n  const { refetchSettings } = useSiteSettings()\r\n  const [settings, setSettings] = useState<SiteSettings>(initialSettings as SiteSettings)\r\n  const [loading, setLoading] = useState(true)\r\n  const [saving, setSaving] = useState(false)\r\n  const [message, setMessage] = useState<MessageType | null>(null)\r\n  const [expandedSections, setExpandedSections] = useState<Set<string>>(\r\n    new Set(['ê°œì¸ ì •ë³´', 'ì†Œì…œ ë§í¬'])\r\n  )\r\n  const [currentLang, setCurrentLang] = useState<AdminLanguage>('ko')\r\n\r\n  /**\r\n   * Normalize settings data, ensuring number fields are properly typed\r\n   */\r\n  const normalizeSettings = (data: any): SiteSettings => {\r\n    const normalized = { ...initialSettings, ...data }\r\n    \r\n    // Ensure number fields are numbers, not strings\r\n    if (normalized.sidebarSkillCount) {\r\n      normalized.sidebarSkillCount = typeof normalized.sidebarSkillCount === 'number' \r\n        ? normalized.sidebarSkillCount \r\n        : parseInt(String(normalized.sidebarSkillCount)) || 4\r\n    }\r\n    if (normalized.languageCardSkillCount) {\r\n      normalized.languageCardSkillCount = typeof normalized.languageCardSkillCount === 'number'\r\n        ? normalized.languageCardSkillCount\r\n        : parseInt(String(normalized.languageCardSkillCount)) || 3\r\n    }\r\n\r\n    return normalized\r\n  }\r\n\r\n  /**\r\n   * Fetch settings from API\r\n   */\r\n  const fetchSettings = useCallback(async () => {\r\n    try {\r\n      const response = await settingsAPI.get()\r\n      const normalizedData = normalizeSettings(response.data)\r\n      setSettings(normalizedData)\r\n    } catch (error) {\r\n      console.error('Failed to fetch settings:', error)\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ê¸°ë³¸ ê°’ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.' \r\n      })\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  /**\r\n   * Save settings to API\r\n   */\r\n  const handleSave = async () => {\r\n    setSaving(true)\r\n    setMessage(null)\r\n\r\n    try {\r\n      await settingsAPI.update(settings)\r\n      await refetchSettings()\r\n      \r\n      setMessage({ \r\n        type: 'success', \r\n        text: 'âœ… ì„¤ì •ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤! í™”ë©´ì´ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.' \r\n      })\r\n      \r\n      // Auto-hide message after 5 seconds\r\n      setTimeout(() => setMessage(null), 5000)\r\n    } catch (error) {\r\n      console.error('Failed to save settings:', error)\r\n      setMessage({ \r\n        type: 'error', \r\n        text: 'âŒ ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.' \r\n      })\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update a single field value\r\n   */\r\n  const handleChange = (field: keyof SiteSettings, value: string | boolean | string[] | number) => {\r\n    setSettings(prevSettings => ({ ...prevSettings, [field]: value }))\r\n  }\r\n\r\n  /**\r\n   * Toggle section expand/collapse state\r\n   */\r\n  const toggleSection = (sectionTitle: string) => {\r\n    setExpandedSections(prev => {\r\n      const newSet = new Set(prev)\r\n      if (newSet.has(sectionTitle)) {\r\n        newSet.delete(sectionTitle)\r\n      } else {\r\n        newSet.add(sectionTitle)\r\n      }\r\n      return newSet\r\n    })\r\n  }\r\n\r\n  // Initial fetch on mount\r\n  useEffect(() => {\r\n    fetchSettings()\r\n  }, [fetchSettings])\r\n\r\n  // Auto-expand sections based on activeSection\r\n  useEffect(() => {\r\n    if (activeSection) {\r\n      if (activeSection === 'appearance') {\r\n        // Start with all sections collapsed for appearance\r\n        setExpandedSections(new Set())\r\n      } else {\r\n        // Expand all filtered sections for other categories\r\n        const filteredSections = getFilteredSections(activeSection)\r\n        const sectionTitles = filteredSections.map(section => section.title)\r\n        setExpandedSections(new Set(sectionTitles))\r\n      }\r\n    } else {\r\n      // Default expanded sections\r\n      setExpandedSections(new Set(['ê°œì¸ ì •ë³´', 'ì†Œì…œ ë§í¬']))\r\n    }\r\n  }, [activeSection])\r\n\r\n  return {\r\n    settings,\r\n    loading,\r\n    saving,\r\n    message,\r\n    expandedSections,\r\n    currentLang,\r\n    setCurrentLang,\r\n    handleChange,\r\n    handleSave,\r\n    toggleSection,\r\n    setExpandedSections\r\n  }\r\n}\r\n\r\n","import React from 'react'\r\nimport { FaPlus } from 'react-icons/fa'\r\nimport { FieldRendererProps } from '../types'\r\nimport { getMultilingualKey } from '../utils'\r\n\r\n/**\r\n * SettingField Component\r\n * Renders an individual form field with language indicators for multilingual fields\r\n */\r\nconst SettingField: React.FC<FieldRendererProps> = ({ \r\n  field, \r\n  value, \r\n  onChange, \r\n  currentLang = 'ko', \r\n  settings \r\n}) => {\r\n  // Language indicator for multilingual fields\r\n  const renderLanguageIndicator = () => {\r\n    if (!field.isMultilingual || !settings) return null\r\n\r\n    const koValue = settings[field.key]\r\n    const enValue = settings[getMultilingualKey(field.key as string, 'en')]\r\n    const jaValue = settings[getMultilingualKey(field.key as string, 'ja')]\r\n\r\n    return (\r\n      <div className=\"flex gap-2 text-xs mb-2\">\r\n        <span className={`px-2 py-1 rounded ${koValue ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-gray-100 dark:bg-gray-700 text-gray-500'}`}>\r\n          ğŸ‡°ğŸ‡· {koValue ? 'âœ“' : 'â—‹'}\r\n        </span>\r\n        <span className={`px-2 py-1 rounded ${enValue ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-gray-100 dark:bg-gray-700 text-gray-500'}`}>\r\n          ğŸ‡ºğŸ‡¸ {enValue ? 'âœ“' : 'â—‹'}\r\n        </span>\r\n        <span className={`px-2 py-1 rounded ${jaValue ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-gray-100 dark:bg-gray-700 text-gray-500'}`}>\r\n          ğŸ‡¯ğŸ‡µ {jaValue ? 'âœ“' : 'â—‹'}\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // Render input based on field type\r\n  const renderInput = () => {\r\n    switch (field.type) {\r\n      case 'textarea':\r\n        return (\r\n          <>\r\n            {renderLanguageIndicator()}\r\n            <textarea\r\n              id={field.key}\r\n              value={(value as string) || ''}\r\n              onChange={(e) => onChange(e.target.value)}\r\n              rows={field.rows || 3}\r\n              placeholder={field.placeholder}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical\"\r\n            />\r\n          </>\r\n        )\r\n\r\n      case 'select':\r\n        return (\r\n          <select\r\n            id={field.key}\r\n            value={(value as string) || ''}\r\n            onChange={(e) => onChange(e.target.value)}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          >\r\n            {field.options?.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        )\r\n\r\n      case 'checkbox':\r\n        return (\r\n          <div className=\"flex items-center space-x-3\">\r\n            <input\r\n              id={field.key}\r\n              type=\"checkbox\"\r\n              checked={(value as boolean) || false}\r\n              onChange={(e) => onChange(e.target.checked)}\r\n              className=\"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600\"\r\n            />\r\n            <label htmlFor={field.key} className=\"text-sm text-gray-700 dark:text-gray-300\">\r\n              {field.placeholder}\r\n            </label>\r\n          </div>\r\n        )\r\n\r\n      case 'number':\r\n        return (\r\n          <input\r\n            id={field.key}\r\n            type=\"number\"\r\n            value={(value as number) || ''}\r\n            onChange={(e) => onChange(parseInt(e.target.value) || 0)}\r\n            min={field.min}\r\n            max={field.max}\r\n            placeholder={field.placeholder}\r\n            className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n          />\r\n        )\r\n\r\n      case 'array':\r\n        return (\r\n          <div className=\"space-y-2\">\r\n            {((value as string[]) || []).map((item, index) => (\r\n              <div key={index} className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  value={item}\r\n                  onChange={(e) => {\r\n                    const newArray = [...(value as string[])]\r\n                    newArray[index] = e.target.value\r\n                    onChange(newArray)\r\n                  }}\r\n                  className=\"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                  placeholder={field.placeholder}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    const newArray = (value as string[]).filter((_, i) => i !== index)\r\n                    onChange(newArray)\r\n                  }}\r\n                  className=\"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                >\r\n                  ì‚­ì œ\r\n                </button>\r\n              </div>\r\n            ))}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const newArray = [...((value as string[]) || []), '']\r\n                onChange(newArray)\r\n              }}\r\n              className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2\"\r\n            >\r\n              <FaPlus size={12} /> í•­ëª© ì¶”ê°€\r\n            </button>\r\n          </div>\r\n        )\r\n\r\n      default:\r\n        return (\r\n          <>\r\n            {renderLanguageIndicator()}\r\n            <input\r\n              id={field.key}\r\n              type={field.type}\r\n              value={(value as string) || ''}\r\n              onChange={(e) => onChange(e.target.value)}\r\n              placeholder={field.placeholder}\r\n              className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n            />\r\n          </>\r\n        )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {field.type !== 'checkbox' && (\r\n        <label\r\n          htmlFor={field.key}\r\n          className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          {field.label}\r\n        </label>\r\n      )}\r\n      {renderInput()}\r\n      {field.type === 'checkbox' && (\r\n        <label\r\n          htmlFor={field.key}\r\n          className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\"\r\n        >\r\n          {field.label}\r\n        </label>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SettingField\r\n\r\n","import React from 'react'\r\nimport { motion, AnimatePresence } from 'framer-motion'\r\nimport { FaEdit, FaChevronDown, FaChevronRight } from 'react-icons/fa'\r\nimport { SiteSettings } from '@/types'\r\nimport { AdminLanguage } from '@/components/common/LanguageTabs'\r\nimport LanguageTabs from '@/components/common/LanguageTabs'\r\nimport { SectionDefinition } from '../types'\r\nimport { getMultilingualKey } from '../utils'\r\nimport SettingField from './SettingField'\r\n\r\ninterface SettingsSectionProps {\r\n  section: SectionDefinition\r\n  isExpanded: boolean\r\n  onToggle: () => void\r\n  currentLang: AdminLanguage\r\n  settings: SiteSettings\r\n  onChange: (field: keyof SiteSettings, value: string | boolean | string[] | number) => void\r\n  setCurrentLang: (lang: AdminLanguage) => void\r\n}\r\n\r\n/**\r\n * SettingsSection Component\r\n * Renders a collapsible section containing multiple setting fields\r\n */\r\nconst SettingsSection: React.FC<SettingsSectionProps> = ({\r\n  section,\r\n  isExpanded,\r\n  onToggle,\r\n  currentLang,\r\n  settings,\r\n  onChange,\r\n  setCurrentLang\r\n}) => {\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden\">\r\n      {/* Section Header */}\r\n      <button\r\n        onClick={onToggle}\r\n        className=\"w-full p-6 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\r\n      >\r\n        <h3 className=\"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3\">\r\n          <FaEdit className=\"text-primary-500\" size={20} />\r\n          {section.title}\r\n          {isExpanded ? (\r\n            <FaChevronDown className=\"text-gray-400 ml-auto\" size={16} />\r\n          ) : (\r\n            <FaChevronRight className=\"text-gray-400 ml-auto\" size={16} />\r\n          )}\r\n        </h3>\r\n      </button>\r\n\r\n      {/* Section Content */}\r\n      <AnimatePresence>\r\n        {isExpanded && (\r\n          <motion.div\r\n            initial={{ height: 0, opacity: 0 }}\r\n            animate={{ height: 'auto', opacity: 1 }}\r\n            exit={{ height: 0, opacity: 0 }}\r\n            transition={{ duration: 0.3, ease: 'easeInOut' }}\r\n            className=\"overflow-hidden\"\r\n          >\r\n            <div className={`p-6 pt-4 border-t border-gray-200 dark:border-gray-700 ${\r\n              section.title.includes('Hero ì„¹ì…˜') ? 'py-8' : ''\r\n            }`}>\r\n              {/* Language tabs for multilingual sections */}\r\n              {section.fields.some(f => f.isMultilingual) && (\r\n                <LanguageTabs\r\n                  activeLanguage={currentLang}\r\n                  onChange={setCurrentLang}\r\n                />\r\n              )}\r\n\r\n              {/* Fields grid */}\r\n              <div className={`grid gap-6 ${\r\n                section.title.includes('About ì„¹ì…˜') ||\r\n                section.title.includes('Hero ì„¹ì…˜') ||\r\n                section.title.includes('Experience ì„¹ì…˜') ||\r\n                section.title.includes('Skills ì„¹ì…˜') ||\r\n                section.title.includes('Projects ì„¹ì…˜') ||\r\n                section.title.includes('Books ì„¹ì…˜') ||\r\n                section.title.includes('ì†Œì…œ ë§í¬') ||\r\n                section.title.includes('Contact ì„¹ì…˜')\r\n                  ? 'grid-cols-1'\r\n                  : 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3'\r\n              }`}>\r\n                {section.fields.map((field) => {\r\n                  // Use multilingual key if field supports it\r\n                  const activeKey = field.isMultilingual\r\n                    ? getMultilingualKey(field.key as string, currentLang) as keyof SiteSettings\r\n                    : field.key\r\n\r\n                  return (\r\n                    <SettingField\r\n                      key={field.key}\r\n                      field={field}\r\n                      value={settings[activeKey] || (field.type === 'checkbox' ? false : field.type === 'array' ? [] : '')}\r\n                      onChange={(value) => onChange(activeKey, value)}\r\n                      currentLang={currentLang}\r\n                      settings={settings}\r\n                    />\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SettingsSection\r\n\r\n","import React from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { FaSave } from 'react-icons/fa'\r\nimport { SiteSettingsEditorProps } from './settings/types'\r\nimport { useSettingsForm } from './settings/hooks/useSettingsForm'\r\nimport { getFilteredSections, getActiveSectionTitle, getActiveSectionDescription } from './settings/utils'\r\nimport SettingsSection from './settings/components/SettingsSection'\r\n\r\n/**\r\n * SiteSettingsEditor - Main orchestrator component\r\n * Manages the site settings editing interface with categorized sections\r\n */\r\nconst SiteSettingsEditor: React.FC<SiteSettingsEditorProps> = ({ activeSection = null }) => {\r\n  const {\r\n    settings,\r\n    loading,\r\n    saving,\r\n    message,\r\n    expandedSections,\r\n    currentLang,\r\n    setCurrentLang,\r\n    handleChange,\r\n    handleSave,\r\n    toggleSection,\r\n    setExpandedSections\r\n  } = useSettingsForm(activeSection)\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-20\">\r\n        <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n        <p className=\"text-gray-600 dark:text-gray-400\">ì„¤ì •ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const sections = getFilteredSections(activeSection)\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Header with action buttons */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n            {getActiveSectionTitle(activeSection)}\r\n          </h2>\r\n          <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\r\n            {getActiveSectionDescription(activeSection)}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\r\n          <button\r\n            onClick={() => {\r\n              const allSectionTitles = sections.map(s => s.title)\r\n              setExpandedSections(new Set(allSectionTitles))\r\n            }}\r\n            className=\"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm\"\r\n          >\r\n            ëª¨ë‘ í¼ì¹˜ê¸°\r\n          </button>\r\n          <button\r\n            onClick={() => setExpandedSections(new Set())}\r\n            className=\"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm\"\r\n          >\r\n            ëª¨ë‘ ì ‘ê¸°\r\n          </button>\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <FaSave />\r\n            {saving ? 'ì €ì¥ ì¤‘...' : 'ëª¨ë‘ ì €ì¥'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Success/Error message */}\r\n      {message && (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: -10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          exit={{ opacity: 0 }}\r\n          transition={{ duration: 0.3 }}\r\n          className={`p-4 rounded-lg shadow-md ${\r\n            message.type === 'success'\r\n              ? 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-400 dark:border-green-700'\r\n              : 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-400 dark:border-red-700'\r\n          }`}\r\n        >\r\n          {message.text}\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Settings sections */}\r\n      {sections.map((section) => (\r\n        <SettingsSection\r\n          key={section.title}\r\n          section={section}\r\n          isExpanded={expandedSections.has(section.title)}\r\n          onToggle={() => toggleSection(section.title)}\r\n          currentLang={currentLang}\r\n          settings={settings}\r\n          onChange={handleChange}\r\n          setCurrentLang={setCurrentLang}\r\n        />\r\n      ))}\r\n\r\n      {/* Bottom save button (hidden for quick menu) */}\r\n      {!activeSection && (\r\n        <div className=\"py-4\">\r\n          <button\r\n            onClick={handleSave}\r\n            disabled={saving}\r\n            className=\"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            <FaSave size={20} />\r\n            {saving ? 'ì„¤ì • ì €ì¥ ì¤‘...' : 'ëª¨ë‘ ì €ì¥í•˜ê³  ì ìš©'}\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SiteSettingsEditor\r\n\r\n","import React, { useState, useEffect, useMemo } from 'react'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { useAuth } from '@/contexts/AuthContext'\r\nimport { FaSignOutAlt } from 'react-icons/fa'\r\n\r\n// ë¶„ë¦¬ëœ ì»´í¬ë„ŒíŠ¸ë“¤ import\r\nimport DashboardHome from '@/components/admin/DashboardHome'\r\nimport BookManager from '@/components/admin/BookManager'\r\nimport VideoLearningManager from '@/components/admin/VideoLearningManager'\r\nimport VideoPlaylistManager from '@/components/admin/VideoPlaylistManager'\r\nimport ExperienceManager from '@/components/admin/ExperienceManager'\r\nimport ProjectManager from '@/components/admin/ProjectManager'\r\nimport MessageManager from '@/components/admin/MessageManager'\r\nimport SkillsManager from '@/components/admin/SkillsManager'\r\nimport CategoryManager from '@/components/admin/CategoryManager'\r\nimport NotificationDropdown from '@/components/common/NotificationDropdown'\r\nimport RightSidebar from '@/components/common/RightSidebar'\r\nimport SiteSettingsEditor from '@/admin/SiteSettingsEditor'\r\nimport ToastContainer from '@/components/common/Toast'\r\nimport useDataCounts from '@/hooks/useDataCounts'\r\n\r\n// ìƒˆë¡œìš´ ë¦¬íŒ©í† ë§ëœ í›… import\r\nimport { useAdminSidebarState, AdminTab } from '@/hooks/useAdminSidebarState'\r\nimport { useToastHelpers } from '@/hooks/useToast'\r\nimport { useMessages } from '@/hooks/useMessageManagerData'\r\n\r\nconst AdminDashboard: React.FC = () => {\r\n  const { isAuthenticated, logout, isLoading } = useAuth()\r\n  const location = useLocation()\r\n  const [showNotifications, setShowNotifications] = useState(false)\r\n  \r\n  // Toast ì‹œìŠ¤í…œ ì¶”ê°€\r\n  const { toasts, hideToast } = useToastHelpers()\r\n  \r\n  // ìƒˆë¡œìš´ ë¦¬íŒ©í† ë§ëœ ìƒíƒœ ê´€ë¦¬ í›… ì‚¬ìš©\r\n  const {\r\n    activeTab,\r\n    setActiveTab,\r\n    activeSettingsSection,\r\n    setActiveSettingsSection,\r\n    bookFilters,\r\n    experienceFilters,\r\n    projectFilters,\r\n  } = useAdminSidebarState()\r\n  \r\n  // ë°ì´í„° ì¹´ìš´íŠ¸ í›… ì‚¬ìš©\r\n  const { counts, refreshCounts } = useDataCounts()\r\n  \r\n  // ğŸ”” ë©”ì‹œì§€ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì•Œë¦¼ìœ¼ë¡œ ë³€í™˜\r\n  const { data: messages = [] } = useMessages()\r\n  \r\n  // ğŸ”” ì½ì§€ ì•Šì€ ë©”ì‹œì§€ë¥¼ ì•Œë¦¼ í˜•íƒœë¡œ ë³€í™˜\r\n  const notifications = useMemo(() => {\r\n    return messages\r\n      .filter(msg => !msg.isRead)\r\n      .map(msg => ({\r\n        id: msg._id || '',\r\n        message: `${msg.name}ë‹˜ìœ¼ë¡œë¶€í„° ìƒˆë¡œìš´ ë©”ì‹œì§€: ${msg.subject}`,\r\n        read: false,\r\n        createdAt: msg.createdAt || new Date().toISOString()\r\n      }))\r\n      .sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()) // ìµœì‹ ìˆœ ì •ë ¬\r\n  }, [messages])\r\n\r\n  // ğŸŒŸ URL stateë¥¼ í†µí•´ ì „ë‹¬ëœ íƒ­ê³¼ ìˆ˜ì • ID ì²˜ë¦¬\r\n  useEffect(() => {\r\n    const state = location.state as { tab?: AdminTab; editId?: string } | null\r\n    if (state?.tab) {\r\n      setActiveTab(state.tab)\r\n    }\r\n    // editIdëŠ” ê° Manager ì»´í¬ë„ŒíŠ¸ì—ì„œ ì²˜ë¦¬\r\n  }, [location.state, setActiveTab])\r\n\r\n  // ì¸ì¦ë˜ì§€ ì•Šì€ ê²½ìš° ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸\r\n  if (!isAuthenticated && !isLoading) {\r\n    return <div>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</div>\r\n  }\r\n\r\n  // ë¡œë”© ì¤‘ì¼ ë•Œ\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4\"></div>\r\n          <p className=\"text-gray-600 dark:text-gray-400\">ë¡œë”© ì¤‘...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  // íƒ­ë³„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ í•¨ìˆ˜\r\n  const renderActiveTabContent = () => {\r\n    // ğŸŒŸ location.stateì—ì„œ editId ì¶”ì¶œ\r\n    const state = location.state as { tab?: AdminTab; editId?: string } | null\r\n    const editId = state?.editId\r\n    \r\n    switch (activeTab) {\r\n      case 'books':\r\n        return <BookManager \r\n          bookFilter={bookFilters.state.filter}\r\n          bookSearchTerm={bookFilters.state.searchTerm}\r\n          selectedBookCategory={bookFilters.state.selectedCategory}\r\n          initialEditId={editId}  // ğŸŒŸ ìˆ˜ì •í•  ì„œì  ID ì „ë‹¬\r\n        />\r\n      case 'videoLearnings':\r\n        return <VideoLearningManager initialEditId={editId} />  // ğŸŒŸ ìˆ˜ì •í•  ì˜ìƒ ID ì „ë‹¬\r\n      case 'videoPlaylists':\r\n        return <VideoPlaylistManager />\r\n      case 'experiences':\r\n        return <ExperienceManager \r\n          experienceFilter={experienceFilters.state.filter}\r\n          experienceSearchTerm={experienceFilters.state.searchTerm}\r\n          selectedExperienceCompany={experienceFilters.state.selectedCompany}\r\n          selectedExperienceYear={experienceFilters.state.selectedYear}\r\n        />\r\n      case 'projects':\r\n        return <ProjectManager \r\n          projectFilter={projectFilters.state.filter}\r\n          projectSearchTerm={projectFilters.state.searchTerm}\r\n          selectedProjectCategory={projectFilters.state.selectedCategory}\r\n        />\r\n      case 'messages':\r\n        return <MessageManager />\r\n      case 'skills':\r\n        return <SkillsManager />\r\n      case 'categories':\r\n        return <CategoryManager />\r\n      default: // 'settings'\r\n        // activeSettingsSectionì´ ìˆìœ¼ë©´ SiteSettingsEditorë¥¼, ì—†ìœ¼ë©´ DashboardHomeì„ í‘œì‹œ\r\n        return activeSettingsSection \r\n          ? <SiteSettingsEditor activeSection={activeSettingsSection} />\r\n          : <DashboardHome counts={counts} />\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Toast ì•Œë¦¼ ì‹œìŠ¤í…œ */}\r\n      <ToastContainer toasts={toasts} onClose={hideToast} />\r\n      \r\n      <div className=\"bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-white\">\r\n        <div className=\"flex\">\r\n        {/* ë©”ì¸ ì»¨í…ì¸  ì˜ì—­ */}\r\n        <div className=\"flex-1 p-8\">\r\n          <div className=\"max-w-7xl mx-auto\">\r\n            <div className=\"flex gap-8\">\r\n              {/* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */}\r\n              <div className=\"flex-1\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between mb-8\">\r\n                  <h1 className=\"text-4xl font-bold text-gray-900 dark:text-white\">\r\n                    ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ\r\n                  </h1>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    {/* ì•Œë¦¼ ë“œë¡­ë‹¤ìš´ - ì½ì§€ ì•Šì€ ë©”ì‹œì§€ í‘œì‹œ */}\r\n                    <NotificationDropdown\r\n                      notifications={notifications}\r\n                      showNotifications={showNotifications}\r\n                      onToggle={() => setShowNotifications(!showNotifications)}\r\n                      onNotificationClick={() => {\r\n                        setActiveTab('messages')\r\n                        setShowNotifications(false)\r\n                      }}\r\n                    />\r\n                    \r\n                    {/* ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ */}\r\n                    <button\r\n                      onClick={logout}\r\n                      className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2\"\r\n                    >\r\n                      <FaSignOutAlt />\r\n                      ë¡œê·¸ì•„ì›ƒ\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* íƒ­ ì½˜í…ì¸  */}\r\n                {renderActiveTabContent()}\r\n              </div>\r\n\r\n              {/* ë¦¬íŒ©í† ë§ëœ RightSidebar ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© */}\r\n              <RightSidebar\r\n                activeTab={activeTab}\r\n                setActiveTab={setActiveTab}\r\n                activeSettingsSection={activeSettingsSection}\r\n                setActiveSettingsSection={setActiveSettingsSection}\r\n                counts={counts}\r\n                refreshCounts={refreshCounts}\r\n                bookFilters={bookFilters}\r\n                experienceFilters={experienceFilters}\r\n                projectFilters={projectFilters}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default AdminDashboard\r\n"],"names":["API_BASE_URL","VITE_API_URL","api","axios","create","baseURL","withCredentials","timeout","authAPI","username","password","post","booksAPI","getAll","get","getById","id","data","update","put","delete","chaptersAPI","getByBook","bookId","chapterId","reorder","chapterIds","learningsAPI","createForBook","updateForBook","learningId","deleteForBook","getByChapter","createForChapter","updateForChapter","deleteForChapter","updateSkills","skillIds","patch","experiencesAPI","projectsAPI","settingsAPI","contactAPI","sendEmail","messagesAPI","markAsRead","skillsAPI","getCategories","createCategory","updateCategory","deleteCategory","getByCategory","categoryId","clearAllData","cleanupDuplicates","reorderSkills","reorderCategories","categoryIds","categoriesAPI","getUsage","videoLearningsAPI","videoPlaylistsAPI","playlistVideosAPI","getByPlaylist","playlistId","AuthContext","createContext","AuthProvider","children","user","setUser","useState","isLoading","setIsLoading","useEffect","async","response","error","login","useCallback","Error","_b","_a","message","logout","value","useMemo","isAuthenticated","jsx","Provider","useAuth","context","useContext","formatDate","dateString","Date","toLocaleDateString","formatRelativeDate","date","diffInMs","getTime","diffInMinutes","Math","floor","diffInHours","diffInDays","diffInWeeks","diffInMonths","extractYouTubeId","url","patterns","pattern","match","getYouTubeThumbnail","videoId","quality","extractYouTubePlaylistId","getYouTubePlaylistThumbnail","renderHtmlWithTimestamps","markdown","onTimestampClick","html","replace","_match","p1","p2","trim","renderMarkdown","groups","parseInt","DashboardHome","counts","siteActivityStats","recentUpdates","type","typeName","title","updatedAt","weeklyStats","booksAdded","projectsCompleted","experiencesUpdated","className","jsxs","books","FaBook","experiences","FaBriefcase","projects","FaProjectDiagram","FaSync","length","map","item","index","FaCalendarAlt","BookManager","bookFilter","bookSearchTerm","selectedBookCategory","initialEditId","createBook","updateBook","deleteBook","useBookManagerData","success","useToastHelpers","createAbortController","useAbortController","toasts","hideToast","bookState","bookActions","useCRUDManager","onSave","editingItem","_id","onDelete","book","onError","err","chapters","optimisticAdd","optimisticAddChapter","optimisticUpdateItem","optimisticUpdateChapter","optimisticDelete","optimisticDeleteChapter","resetData","resetChapters","useOptimisticArrayUpdate","showBookDetailModal","setShowBookDetailModal","selectedBook","setSelectedBook","selectedChapterId","setSelectedChapterId","showChapterForm","setShowChapterForm","editingChapter","setEditingChapter","showLearningForm","setShowLearningForm","editingLearning","setEditingLearning","hasAutoOpened","setHasAutoOpened","bookToEdit","find","handleEdit","filteredBooks","filtered","filter","rating","category","searchLower","toLowerCase","includes","author","sort","a","b","createdAt","handleBookDetailClick","abortController","chaptersResponse","signal","aborted","name","handleSaveChapter","chapterData","then","res","learnings","toISOString","handleDeleteChapter","chapter","handleAddLearningClick","handleEditLearningClick","learning","handleDeleteLearningClick","handleSaveLearning","learningData","renderRating","Array","from","_","i","jsxRuntimeExports","FaStar","Fragment","ToastContainer","onClose","onClick","handleCreate","FaPlus","coverImage","src","alt","readDate","e","stopPropagation","FaEye","FaEdit","handleDelete","disabled","isDeleting","FaTrash","showForm","handleCancel","FaTimes","BookForm","handleSave","onCancel","isSaving","ChapterLearningList","onAddChapter","onEditChapter","onDeleteChapter","onAddLearning","onEditLearning","onDeleteLearning","ChapterForm","LearningForm","VideoLearningManager","videoLearnings","createVideoLearning","updateVideoLearning","deleteVideoLearning","useVideoLearningManagerData","videoState","videoActions","video","categoryFilter","setCategoryFilter","availableCategories","categories","Set","add","forEach","extractUniqueCategories","filteredVideos","videoToEdit","FaVideo","cat","count","v","VideoLearningForm","thumbnailUrl","purpose","watchDate","VideoPlaylistManager","playlists","createPlaylist","updatePlaylist","deletePlaylist","useVideoPlaylistManagerData","expandedPlaylistId","setExpandedPlaylistId","showVideoForm","setShowVideoForm","editingVideo","setEditingVideo","showBulkAddForm","setShowBulkAddForm","bulkVideoUrls","setBulkVideoUrls","playlistVideos","usePlaylistVideos","createVideoMutation","useCreatePlaylistVideo","updateVideoMutation","useUpdatePlaylistVideo","deleteVideoMutation","useDeletePlaylistVideo","playlistState","playlistActions","playlist","handleBulkAddVideos","alert","urls","split","Boolean","successCount","videoData","keyTakeaways","order","mutateAsync","FaList","VideoPlaylistForm","PlaylistVideoForm","isPending","isExpanded","currentVideos","FaChevronUp","FaChevronDown","catIdOrObj","catName","onChange","target","rows","placeholder","confirm","handleDeleteVideo","ExperienceManager","experienceFilter","experienceSearchTerm","selectedExperienceCompany","selectedExperienceYear","createExperience","updateExperience","deleteExperience","useExperienceManagerData","setShowForm","setEditingItem","setIsSaving","setIsDeleting","filteredExperiences","exp","company","period","description","ExperienceForm","experience","ProjectManager","projectFilter","projectSearchTerm","selectedProjectCategory","createProject","updateProject","deleteProject","useProjectManagerData","filteredProjects","project","status","detailedDescription","technologies","some","tech","featuredProjectsCount","ProjectForm","result","errorMsg","_c","_e","_d","_h","_f","_g","_j","_i","_l","_k","_m","slice","MessageDetail","messageId","isOpen","onMarkAsRead","onReply","isProcessing","setIsProcessing","showReplyForm","setShowReplyForm","replyContent","setReplyContent","isError","refetch","useMessageDetail","enabled","AnimatePresence","motion","div","initial","opacity","animate","exit","scale","FaSpinner","FaEnvelope","isRead","FaUser","email","FaCalendar","toLocaleString","year","month","day","hour","minute","FaCheck","subject","height","FaReply","MessageManager","messages","deleteMessage","useMessageManagerData","selectedMessageId","setSelectedMessageId","showDetail","setShowDetail","handleViewDetail","handleCloseDetail","style","display","WebkitLineClamp","WebkitBoxOrient","overflow","substring","handleMarkAsRead","SortableCategoryCard","onToggle","onAddSkill","onEdit","attributes","listeners","setNodeRef","transform","transition","isDragging","useSortable","CSS","Transform","toString","ref","FaBars","backgroundColor","color","skills","size","FaChevronRight","SortableSkillItem","skill","categoryColor","currentLevel","hasChanges","isSavingThis","onLevelChange","onSaveLevel","onToggleSidebar","onToggleLanguageCard","checked","showInSidebar","showInLanguageCard","DynamicIcon","iconName","icon","min","max","step","newLevel","background","FaSave","SkillsManager","skillCategories","createSkillCategory","updateSkillCategory","deleteSkillCategory","createSkill","updateSkill","deleteSkill","useSkillsManagerData","activeForm","setActiveForm","editingCategory","setEditingCategory","editingSkill","setEditingSkill","selectedCategoryId","setSelectedCategoryId","expandedCategories","setExpandedCategories","localLevels","setLocalLevels","Map","savingSkillIds","setSavingSkillIds","handleLevelChange","skillId","prev","newMap","set","handleSaveLevel","level","newSet","handleToggleSidebar","newValue","handleToggleLanguageCard","handleCategoryDragEnd","event","active","over","oldIndex","findIndex","newIndex","reorderedCategories","arrayMove","handleSkillDragEnd","reorderedSkills","toggleCategory","has","handleEditCategory","handleDeleteCategory","handleAddSkill","handleEditSkill","handleDeleteSkill","SkillCategoryForm","initialData","SkillForm","DndContext","collisionDetection","closestCenter","onDragEnd","SortableContext","items","strategy","verticalListSortingStrategy","usageData","useCategoryUsage","usage","videoPlaylists","total","CategoryManager","useCategoryManagerData","categoryState","categoryActions","usageDetails","push","join","FaFolder","CategoryForm","c","initialSettings","fullName","firstName","role","subtitle","location","education","yearsOfExperience","phone","githubUrl","linkedinUrl","heroTitle","heroSubtitle","aboutTitle","aboutSubtitle","aboutDescription1","aboutDescription2","skillsTitle","skillsSubtitle","projectsTitle","projectsSubtitle","booksTitle","booksSubtitle","contactTitle","contactSubtitle","stat1Number","stat1Label","stat2Number","stat2Label","experienceTitle","experienceSubtitle","learningGoalsTitle","learningGoalsDescription","learningGoalsList","siteTitle","siteDescription","siteKeywords","siteAuthor","siteLanguage","siteUrl","ogTitle","ogDescription","ogImage","ogType","twitterCard","twitterSite","twitterCreator","robotsIndex","robotsFollow","googleAnalyticsId","googleSiteVerification","instagramUrl","twitterUrl","facebookUrl","youtubeUrl","tiktokUrl","behanceUrl","dribbbleUrl","mediumUrl","telegramUrl","discordUrl","kakaoTalkUrl","naverBlogUrl","tistoryUrl","velogUrl","notionUrl","googleTagManagerId","facebookPixelId","naverAnalyticsId","kakaoPixelId","hotjarId","mixpanelToken","amplitudeApiKey","sentryDsn","logRocketId","fullStoryOrgId","intercomAppId","zendeskWidgetKey","crispWebsiteId","tawkToPropertyId","liveChatLicense","olarkSiteId","enableHttps","enableCsp","cspDirectives","enableHsts","hstsMaxAge","enableXssProtection","enableContentTypeOptions","enableFrameOptions","frameOptionsValue","enableReferrerPolicy","referrerPolicyValue","enablePermissionsPolicy","permissionsPolicyValue","enableApiRateLimit","apiRateLimitPerMinute","enableAdminAuth","adminSessionTimeout","enableTwoFactorAuth","enableIpWhitelist","allowedIpAddresses","enableAuditLog","enableBackup","backupFrequency","allSections","fields","key","label","isMultilingual","options","getMultilingualKey","baseKey","lang","getActiveSectionTitle","activeSection","getActiveSectionDescription","getFilteredSections","section","useSettingsForm","refetchSettings","useSiteSettings","settings","setSettings","loading","setLoading","saving","setSaving","setMessage","expandedSections","setExpandedSections","currentLang","setCurrentLang","fetchSettings","normalizedData","normalized","sidebarSkillCount","String","languageCardSkillCount","normalizeSettings","text","sectionTitles","handleChange","field","prevSettings","setTimeout","toggleSection","sectionTitle","SettingField","renderLanguageIndicator","koValue","enValue","jaValue","htmlFor","option","newArray","renderInput","SettingsSection","duration","ease","f","LanguageTabs","activeLanguage","activeKey","SiteSettingsEditor","sections","allSectionTitles","s","y","useLocation","showNotifications","setShowNotifications","activeTab","setActiveTab","activeSettingsSection","setActiveSettingsSection","bookFilters","experienceFilters","projectFilters","useAdminSidebarState","refreshCounts","useDataCounts","useMessages","notifications","msg","read","state","tab","NotificationDropdown","onNotificationClick","FaSignOutAlt","editId","searchTerm","selectedCategory","selectedCompany","selectedYear","renderActiveTabContent","RightSidebar"],"mappings":"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"}