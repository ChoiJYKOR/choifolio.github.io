import{r as e,j as t,ae as a,ay as s,az as r}from"./chunk-2803e76c.js";import{s as n,h as i,i as l,j as c,l as o,v as u,k as d,p as y,m as g,n as p,o as m}from"./chunk-4ab22ddb.js";import{g as h,h as f,i as v,j as w}from"./chunk-726c3250.js";const S={fullName:"",firstName:"",role:"",subtitle:"",location:"",education:"",yearsOfExperience:"",email:"",phone:"",githubUrl:"",linkedinUrl:"",heroTitle:"",heroSubtitle:"",heroTag:"",heroCtaLink1:"",heroCtaLink2:"",aboutTitle:"",aboutSubtitle:"",aboutDescription1:"",aboutDescription2:"",skillsTitle:"",skillsSubtitle:"",projectsTitle:"",projectsSubtitle:"",projectsUpdateTitle:"",projectsUpdateDescription:"",projectsUpdateTechList:[],booksTitle:"",booksSubtitle:"",contactTitle:"",contactSubtitle:"",experienceTitle:"",experienceSubtitle:"",learningGoalsTitle:"앞으로의 학습 목표",learningGoalsDescription:"4차 산업혁명 시대에 발맞춰 **지능형 공장(Smart Factory) 구현**을 위해 다음 기술들을 집중적으로 탐구하여 전문성을 확대해 나가겠습니다.",learningGoalsList:["첨단 로봇 제어","딥러닝 기반 비전 시스템","엣지 컴퓨팅","클라우드 연동","MES/ERP 연동 기술"],stat1Number:"",stat1Label:"",stat2Number:"",stat2Label:"",stat3Number:"",stat3Label:"",mainSkills:[]},k=e.createContext(void 0),C=({children:a})=>{const[s,r]=e.useState(S),[i,l]=e.useState(!0),[c,o]=e.useState(null),u=e.useCallback(async()=>{try{l(!0),o(null);const e=await n.get(),t={...S,...e.data};r(t)}catch(e){o("설정을 불러오는데 실패했습니다."),r(S)}finally{l(!1)}},[]);e.useEffect(()=>{u()},[u]);const d=e.useCallback(async()=>{await u()},[u]),y=e.useMemo(()=>({settings:s,loading:i,error:c,refetchSettings:d}),[s,i,c,d]);return t.jsx(k.Provider,{value:y,children:a})},b=()=>{const t=e.useContext(k);if(void 0===t)throw new Error("useSiteSettings must be used within a SiteSettingsProvider");return t},A=["hero","about","experience","skills","projects","contact","books","projects-page","experience-page","about-page","contact-page","skills-page"],E={offset:80,debounceDelay:100},q=(t={})=>{const{offset:a,debounceDelay:s}={...E,...t},[r,n]=e.useState("hero"),i=e.useRef(null),l=e.useCallback(()=>{const e=window.scrollY+a;let t="hero";for(const s of A){const r=document.getElementById(s);if(!r)continue;e>=r.offsetTop-a&&(t=s)}n(t)},[a]),c=e.useCallback(((e,t)=>{let a=null;return(...s)=>{a&&clearTimeout(a),a=setTimeout(()=>{e(...s)},t)}})(l,s),[l,s]);return e.useEffect(()=>(window.addEventListener("scroll",c,{passive:!0}),l(),()=>{window.removeEventListener("scroll",c),i.current&&clearTimeout(i.current)}),[l,c]),r},F=()=>{const[t,a]=e.useState([]),[s,r]=e.useState([]),[n,l]=e.useState(!1),{settings:c}=b(),o=e.useCallback(async()=>{l(!0);try{const e=(await i.getAll()).data||[];let t=e.filter(e=>e.showInSidebar).sort((e,t)=>e.order-t.order).slice(0,(null==c?void 0:c.sidebarSkillCount)||4);0===t.length&&(t=e.sort((e,t)=>t.level-e.level).slice(0,(null==c?void 0:c.sidebarSkillCount)||4)),a(t);let s=e.filter(e=>e.showInLanguageCard).sort((e,t)=>t.level-e.level).slice(0,(null==c?void 0:c.languageCardSkillCount)||3);r(s)}catch(e){a([]),r([])}finally{l(!1)}},[null==c?void 0:c.sidebarSkillCount,null==c?void 0:c.languageCardSkillCount]);return e.useEffect(()=>{o()},[o]),e.useMemo(()=>({coreSkills:t,languageSkills:s,isLoadingSkills:n}),[t,s,n])},D="books",K=()=>a({queryKey:[D,"list"],queryFn:async()=>{const e=await l.getAll();return e.data.data||e.data||[]},staleTime:3e5,gcTime:6e5}),Q=e=>a({queryKey:[D,"detail",e],queryFn:async()=>{if(!e)throw new Error("Book ID is required");return(await l.getById(e)).data},enabled:!!e,staleTime:3e5,gcTime:6e5}),T=()=>{const e=s();return r({mutationFn:async e=>{await l.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[D,"list"]}),e.invalidateQueries({queryKey:["dataCounts"]})}})},I=["categories"],J=()=>a({queryKey:I,queryFn:async()=>(await c.getAll()).data}),L=e=>a({queryKey:[...I,e,"usage"],queryFn:async()=>{if(!e)throw new Error("ID가 필요합니다");return(await c.getUsage(e)).data},enabled:!!e}),j=()=>{const{data:e=[],isLoading:t}=J(),a=(()=>{const e=s();return r({mutationFn:async e=>(await c.create(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:I})}})})(),n=(()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>(await c.update(e,t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:I})}})})(),i=(()=>{const e=s();return r({mutationFn:async e=>(await c.delete(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:I})}})})();return{categories:e,isLoading:t,createCategory:async e=>{try{return await a.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},updateCategory:async(e,t)=>{try{return await n.mutateAsync({id:e,data:t}),{success:!0}}catch(a){return{success:!1,error:a}}},deleteCategory:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}},P=t=>{const a=s(),[n,i]=e.useState(null),[l,c]=e.useState(null),[u,d]=e.useState({topic:"",content:""}),[y,g]=e.useState(!1),[p,m]=e.useState(null),h=(e=>{const t=s();return r({mutationFn:async t=>(await o.createForBook(e,t)).data,onSuccess:()=>{t.invalidateQueries({queryKey:[D,"detail",e]}),t.invalidateQueries({queryKey:[D,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),f=(e=>{const t=s();return r({mutationFn:async({learningId:t,data:a})=>(await o.updateForBook(e,t,a)).data,onSuccess:()=>{t.invalidateQueries({queryKey:[D,"detail",e]}),t.invalidateQueries({queryKey:[D,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),v=(e=>{const t=s();return r({mutationFn:async t=>{await o.deleteForBook(e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:[D,"detail",e]}),t.invalidateQueries({queryKey:[D,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),w=(e=>{const t=s();return r({mutationFn:async({learningId:t,skillIds:a})=>(await o.updateSkills(e,t,a)).data,onSuccess:()=>{t.invalidateQueries({queryKey:[D,"detail",e]}),t.invalidateQueries({queryKey:[D,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),S=h.isPending||f.isPending||v.isPending||w.isPending,k=()=>{i(null),c(null),d({topic:"",content:""}),g(!1)},C=()=>{k(),m(null)};return{editingLearningId:n,currentFormData:u,setCurrentFormData:d,showAddForm:y,isSaving:S,learningApiError:p,handleToggleAddForm:()=>{n&&C(),y&&d({topic:"",content:""}),g(e=>!e),m(null)},handleAddLearning:async()=>{if(u.topic&&u.content)try{m(null),await h.mutateAsync(u),k()}catch(e){m("학습 내용 추가에 실패했습니다.")}},handleDeleteLearning:async(e,s)=>{if(confirm("이 학습 내용을 삭제하시겠습니까?"))try{m(null),s?await o.deleteForChapter(t,s,e):await v.mutateAsync(e),a.invalidateQueries({queryKey:[D,"detail",t]}),a.invalidateQueries({queryKey:["chapters",t]})}catch(r){m("학습 내용 삭제에 실패했습니다.")}},handleStartEdit:(e,t)=>{g(!1),i(e._id),c(t||null),d({topic:e.topic,content:e.content}),m(null)},handleSaveEdit:async()=>{if(n&&u.topic&&u.content)try{if(m(null),l){await o.updateForChapter(t,l,n,u)}else await f.mutateAsync({learningId:n,data:u});a.invalidateQueries({queryKey:[D,"detail",t]}),a.invalidateQueries({queryKey:["chapters",t]}),k()}catch(e){m("학습 내용 수정에 실패했습니다.")}},handleCancelEdit:C,handleSkillLinkChange:async(e,s,r)=>{const n=[D,"detail",t],i=["chapters",t],l=a.getQueryData(n),c=a.getQueryData(i);try{m(null);let t=[];const o=(c||[]).flatMap(e=>e.learnings||[]).find(t=>t._id===e)||((null==l?void 0:l.learnings)||[]).find(t=>t._id===e);if(o){const e=o.skillIds||[];t=r?Array.from(new Set([...e,s])):e.filter(e=>e!==s)}else t=r?[s]:[];c&&a.setQueryData(i,a=>a?a.map(a=>({...a,learnings:(a.learnings||[]).map(a=>a._id===e?{...a,skillIds:t}:a)})):a),l&&a.setQueryData(n,a=>a?a.chapters&&a.chapters.length>0?{...a,chapters:a.chapters.map(a=>({...a,learnings:(a.learnings||[]).map(a=>a._id===e?{...a,skillIds:t}:a)}))}:{...a,learnings:(a.learnings||[]).map(a=>a._id===e?{...a,skillIds:t}:a)}:a),await w.mutateAsync({learningId:e,skillIds:t})}catch(o){m("스킬 연결/해제에 실패했습니다."),c&&a.setQueryData(i,c),l?a.setQueryData(n,l):(a.invalidateQueries({queryKey:n}),a.invalidateQueries({queryKey:i}))}}}},_=async()=>{var e;const t=await i.getCategories();return(null==(e=t.data)?void 0:e.data)||t.data||[]},x=()=>{const{data:e=[],isLoading:t,error:s,refetch:r}=a({queryKey:["skillCategories"],queryFn:_,staleTime:3e5,gcTime:6e5});return{skillCategories:e,loading:t,error:s?"스킬 데이터를 불러오는데 실패했습니다.":null,refetch:r}},B="videoLearnings",M=()=>a({queryKey:[B,"list"],queryFn:async()=>{var e;const t=await u.getAll();return(null==(e=t.data)?void 0:e.data)||t.data||[]},staleTime:3e5}),O=e=>a({queryKey:[B,"detail",e],queryFn:async()=>{if(!e)throw new Error("ID is required");return(await u.getById(e)).data},enabled:!!e,staleTime:3e5}),V=()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>(await u.update(e,t)).data,onSuccess:(t,a)=>{e.invalidateQueries({queryKey:[B,"list"]}),e.invalidateQueries({queryKey:[B,"detail",a.id]})}})},R=()=>{const e=s();return r({mutationFn:async e=>{await u.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[B,"list"]}),e.invalidateQueries({queryKey:["dataCounts"]})}})},U=()=>{const{data:e=[],isLoading:t,isError:a,error:n,refetch:i}=M(),l=(()=>{const e=s();return r({mutationFn:async e=>(await u.create(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:[B,"list"]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),c=V(),o=R();return{videoLearnings:e,isLoading:t,error:a?n:null,createVideoLearning:async e=>{try{return await l.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},updateVideoLearning:async(e,t)=>{try{return await c.mutateAsync({id:e,data:t}),{success:!0}}catch(a){return{success:!1,error:a}}},deleteVideoLearning:async e=>{try{return await o.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},refetch:i}},$=()=>a({queryKey:["videoPlaylists"],queryFn:async()=>{var e;const t=await d.getAll();return(null==(e=t.data)?void 0:e.data)||t.data||[]},staleTime:3e5}),N=e=>a({queryKey:["videoPlaylist",e],queryFn:async()=>{var t;if(!e)throw new Error("ID가 필요합니다");const a=await d.getById(e);return(null==(t=a.data)?void 0:t.data)||a.data},enabled:!!e,staleTime:3e5}),G=e=>a({queryKey:["playlistVideos",e],queryFn:async()=>{var t;if(!e)return[];const a=await y.getByPlaylist(e);return(null==(t=a.data)?void 0:t.data)||a.data||[]},enabled:!!e,staleTime:3e5}),W=()=>{const e=s();return r({mutationFn:e=>d.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videoPlaylists"]})}})},Y=()=>{const e=s();return r({mutationFn:e=>y.create(e),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["playlistVideos",a.playlistId]})}})},z=()=>{const e=s();return r({mutationFn:({id:e,data:t})=>y.update(e,t),onSuccess:t=>{var a,s;const r=null==(s=null==(a=t.data)?void 0:a.data)?void 0:s.playlistId;r&&e.invalidateQueries({queryKey:["playlistVideos",r]})}})},H=()=>{const e=s();return r({mutationFn:e=>y.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["playlistVideos"]})}})},X=()=>{const{data:e=[],isLoading:t}=$(),a=(()=>{const e=s();return r({mutationFn:e=>d.create(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videoPlaylists"]})}})})(),n=(()=>{const e=s();return r({mutationFn:({id:e,data:t})=>d.update(e,t),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["videoPlaylists"]}),e.invalidateQueries({queryKey:["videoPlaylist",a.id]})}})})(),i=W();return{playlists:e,isLoading:t,createPlaylist:async e=>{try{await a.mutateAsync(e);return{success:!0}}catch(t){return{success:!1,error:t}}},updatePlaylist:async(e,t)=>{try{return await n.mutateAsync({id:e,data:t}),{success:!0}}catch(a){return{success:!1,error:a}}},deletePlaylist:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}};function Z(){const{showToast:t,...a}=function(){const[t,a]=e.useState([]),s=e.useCallback(e=>{const t=Math.random().toString(36).substr(2,9),s={id:t,duration:5e3,...e};a(e=>[...e,s]),s.duration&&s.duration>0&&setTimeout(()=>{r(t)},s.duration)},[]),r=e.useCallback(e=>{a(t=>t.filter(t=>t.id!==e))},[]),n=e.useCallback(()=>{a([])},[]);return{toasts:t,showToast:s,hideToast:r,clearAllToasts:n}}();return{...a,success:e.useCallback((e,a)=>{t({type:"success",title:e,message:a})},[t]),error:e.useCallback((e,a)=>{t({type:"error",title:e,message:a})},[t]),warning:e.useCallback((e,a)=>{t({type:"warning",title:e,message:a})},[t]),info:e.useCallback((e,a)=>{t({type:"info",title:e,message:a})},[t])}}const ee=async()=>(await g.getAll()).data.data,te=()=>{const{data:e=[],isLoading:t,error:s,refetch:r}=a({queryKey:["projects"],queryFn:ee,staleTime:3e5,gcTime:6e5});return{projects:e,loading:t,error:s?"프로젝트를 불러오는데 실패했습니다.":null,refetch:r}},ae=(t,a)=>{const[s,r]=e.useState(null),[n,i]=e.useState(!0),[l,c]=e.useState(null),{skillCategories:o}=x();e.useEffect(()=>{(async()=>{if(t)try{i(!0);const e=await g.getById(t);r(e.data)}catch(e){c("프로젝트를 불러오는데 실패했습니다.")}finally{i(!1)}})()},[t]);const u=e.useMemo(()=>s?{...s,title:h(a,s.title,s.titleEn,s.titleJa),description:h(a,s.description,s.descriptionEn,s.descriptionJa),detailedDescription:h(a,s.detailedDescription,s.detailedDescriptionEn,s.detailedDescriptionJa),technologies:f(a,s.technologies,s.technologiesEn,s.technologiesJa)||[],features:f(a,s.features,s.featuresEn,s.featuresJa)||[],learnings:f(a,s.learnings,s.learningsEn,s.learningsJa)||[],videoDescriptions:f(a,s.videoDescriptions,s.videoDescriptionsEn,s.videoDescriptionsJa)||[]}:null,[s,a]);return{loading:n,error:l,localizedProject:u,linkedSkills:e.useMemo(()=>{if(!s||!o)return[];const e=o.flatMap(e=>e.skills||[]),t=new Set(s.skillIds||[]);return e.filter(e=>t.has(e._id)).map(e=>{return{...e,name:v(a,e),description:w(a,e),levelText:(t=e.level||0,t>=90?"Expert":t>=70?"Proficient":t>=50?"Competent":"Basic")};var t})},[s,o,a])}},se=async()=>(e=>e.slice().sort((e,t)=>void 0!==e.order&&void 0!==t.order?e.order-t.order:e.createdAt&&t.createdAt?new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():0))((await p.getAll()).data.data),re=()=>{const{data:e=[],isLoading:t,error:s,refetch:r}=a({queryKey:["experiences"],queryFn:se,staleTime:3e5,gcTime:6e5});return{experiences:e,loading:t,error:s?"경험 데이터를 불러오는 중 오류가 발생했습니다.":null,refetch:r}};function ne(){var t;const a=e.useRef(null),s=e.useCallback(()=>(a.current&&a.current.abort(),a.current=new AbortController,a.current),[]),r=e.useCallback(()=>(a.current||(a.current=new AbortController),a.current),[]),n=e.useCallback(()=>{a.current&&(a.current.abort(),a.current=null)},[]);return e.useEffect(()=>()=>{a.current&&a.current.abort()},[]),{createAbortController:s,getAbortController:r,abort:n,signal:null==(t=a.current)?void 0:t.signal}}function ie(t,a={}){const{data:s,isOptimistic:r,optimisticUpdate:n,updateData:i,resetData:l}=function(t,a={}){const[s,r]=e.useState(t),[n,i]=e.useState(!1),l=e.useRef(t),{onSuccess:c,onError:o,onRollback:u}=a,d=e.useCallback(async(e,t)=>{l.current=s,r(t=>"function"==typeof e?e(t):e),i(!0);try{const e=await t();return r(e),i(!1),null==c||c(e),e}catch(a){throw r(l.current),i(!1),null==o||o(a,()=>{r(l.current),null==u||u(l.current)}),a}},[s,c,o,u]),y=e.useCallback(e=>{r(t=>"function"==typeof e?e(t):e)},[]),g=e.useCallback(e=>{r(e),l.current=e,i(!1)},[]);return{data:s,isOptimistic:n,optimisticUpdate:d,updateData:y,resetData:g}}(t,a),c=e.useCallback(async(e,t)=>n(t=>[...t,{...e,_id:`temp_${Date.now()}`}],async()=>{const e=await t();return i(t=>t.map(t=>t._id.startsWith("temp_")?e:t)),[...s.filter(e=>!e._id.startsWith("temp_")),e]}),[n,i,s]),o=e.useCallback(async(e,t,a)=>n(a=>a.map(a=>a._id===e?{...a,...t}:a),async()=>{const t=await a();return i(a=>a.map(a=>a._id===e?t:a)),s.map(a=>a._id===e?t:a)}),[n,i,s]),u=e.useCallback(async(e,t)=>{if(s.find(t=>t._id===e))return n(t=>t.filter(t=>t._id!==e),async()=>(await t(),s.filter(t=>t._id!==e)))},[n,s]),d=e.useCallback(async(e,t)=>n(e,async()=>await t()),[n]);return{data:s,isOptimistic:r,optimisticAdd:c,optimisticUpdateItem:o,optimisticDelete:u,optimisticReorder:d,updateData:i,resetData:l}}function le(){const[t,a]=e.useState(!0),[s,r]=e.useState(null),{createAbortController:n}=ne(),{success:i,error:c}=Z(),{data:o,isOptimistic:u,optimisticAdd:d,optimisticUpdateItem:y,optimisticDelete:g,resetData:p}=ie([]),m=e.useCallback(async()=>{var e;try{a(!0),r(null);const e=n(),t=await l.getAll();e.signal.aborted||p(t.data.data||[])}catch(t){if(!(null==(e=t.name)?void 0:e.includes("AbortError"))){const e="서적 목록을 불러오는데 실패했습니다.";r(e),c("로드 실패",e)}}finally{a(!1)}},[n,p,c]),h=e.useCallback(async e=>{try{const t={...e,_id:`temp_${Date.now()}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},a=await d(t,()=>l.create(e).then(e=>e.data));return i("서적 추가 완료",`${e.title}이(가) 성공적으로 추가되었습니다.`),a}catch(t){throw c("서적 추가 실패",t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."),t}},[d,i,c]),f=e.useCallback(async(e,t)=>{try{const a=await y(e,t,()=>l.update(e,t).then(e=>e.data));return i("서적 수정 완료","서적 정보가 성공적으로 수정되었습니다."),a}catch(a){throw c("서적 수정 실패",a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."),a}},[y,i,c]),v=e.useCallback(async e=>{try{const t=await g(e,()=>l.delete(e).then(()=>{}));return i("서적 삭제 완료","서적이 성공적으로 삭제되었습니다."),t}catch(t){throw c("서적 삭제 실패",t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."),t}},[g,i,c]);return e.useEffect(()=>{m()},[]),{books:o,isLoading:t,error:s,isOptimistic:u,createBook:h,updateBook:f,deleteBook:v,refetch:m}}function ce({onSave:t,onDelete:a,onSuccess:s,onError:r}){const[n,i]=e.useState(!1),[l,c]=e.useState(null),[o,u]=e.useState(!1),[d,y]=e.useState(!1),g=e.useCallback(()=>{c(null),i(!0)},[]),p=e.useCallback(e=>{c(e),i(!0)},[]),m=e.useCallback(()=>{i(!1),c(null),u(!1),y(!1)},[]),h=e.useCallback(async e=>{if(!o)try{u(!0),await t(e,l),m(),null==s||s()}catch(a){null==r||r(a)}finally{u(!1)}},[o,l,t,s,r,m]),f=e.useCallback(async e=>{if(d)return;if(window.confirm(`정말 "${e.title||e.name||"이 항목"}"을(를) 삭제하시겠습니까?`))try{y(!0),await a(e),null==s||s()}catch(t){null==r||r(t)}finally{y(!1)}},[d,a,s,r]);return[{showForm:n,editingItem:l,isSaving:o,isDeleting:d},{handleCreate:g,handleEdit:p,handleCancel:m,handleSave:h,handleDelete:f,setShowForm:i,setEditingItem:c}]}const oe=()=>{const[t,a]=e.useState([]),[s,r]=e.useState(!1),n=e.useCallback(async()=>{r(!0);try{const e=await p.getAll();a(e.data.data||[])}catch(e){}finally{r(!1)}},[]),i=e.useCallback(async e=>{try{return await p.create(e),await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]),l=e.useCallback(async(e,t)=>{try{return await p.update(e,t),await n(),{success:!0}}catch(a){return{success:!1,error:a}}},[n]),c=e.useCallback(async e=>{try{return await p.delete(e),await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]);return e.useEffect(()=>{n()},[]),{experiences:t,isLoading:s,fetchExperiences:n,createExperience:i,updateExperience:l,deleteExperience:c}},ue=t=>{const[a,s]=e.useState("ko"),r=(null==t?void 0:t.categoryIds)?t.categoryIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],n=(null==t?void 0:t.skillIds)?t.skillIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],[i,l]=e.useState(()=>(null==t?void 0:t.videos)&&Array.isArray(t.videos)?t.videos.map((e,a)=>{var s,r,n;return{url:e,description:(null==(s=t.videoDescriptions)?void 0:s[a])||"",descriptionEn:(null==(r=t.videoDescriptionsEn)?void 0:r[a])||"",descriptionJa:(null==(n=t.videoDescriptionsJa)?void 0:n[a])||""}}):[]),[c,o]=e.useState(t?{...t,technologies:Array.isArray(t.technologies)?t.technologies.join("\n"):t.technologies||"",technologiesEn:Array.isArray(t.technologiesEn)?t.technologiesEn.join("\n"):t.technologiesEn||"",technologiesJa:Array.isArray(t.technologiesJa)?t.technologiesJa.join("\n"):t.technologiesJa||"",images:Array.isArray(t.images)?t.images.join("\n"):t.images||"",features:Array.isArray(t.features)?t.features.join("\n"):t.features||"",featuresEn:Array.isArray(t.featuresEn)?t.featuresEn.join("\n"):t.featuresEn||"",featuresJa:Array.isArray(t.featuresJa)?t.featuresJa.join("\n"):t.featuresJa||"",learnings:Array.isArray(t.learnings)?t.learnings.join("\n"):t.learnings||"",learningsEn:Array.isArray(t.learningsEn)?t.learningsEn.join("\n"):t.learningsEn||"",learningsJa:Array.isArray(t.learningsJa)?t.learningsJa.join("\n"):t.learningsJa||"",skillIds:n,categoryIds:r}:{title:"",titleEn:"",titleJa:"",description:"",descriptionEn:"",descriptionJa:"",technologies:"",technologiesEn:"",technologiesJa:"",category:"automation",categoryIds:[],status:"preparing",githubLink:"",liveLink:"",image:"",images:"",detailedDescription:"",detailedDescriptionEn:"",detailedDescriptionJa:"",features:"",featuresEn:"",featuresJa:"",learnings:"",learningsEn:"",learningsJa:"",order:0,skillIds:[]});return{formData:c,videoItems:i,currentLang:a,setCurrentLang:s,setFormData:o,setVideoItems:l,handleFieldChange:(e,t)=>{o(a=>({...a,[e]:t}))},handleArrayFieldChange:(e,t)=>{o(a=>({...a,[e]:t}))},handleVideoUrlChange:(e,t)=>{const a=[...i];a[e]&&(a[e].url=t,l(a))},handleVideoDescriptionChange:(e,t,a)=>{const s=[...i];s[e]&&("ko"===a?s[e].description=t:"en"===a?s[e].descriptionEn=t:"ja"===a&&(s[e].descriptionJa=t),l(s))},handleAddVideo:()=>{l([...i,{url:"",description:"",descriptionEn:"",descriptionJa:""}])},handleRemoveVideo:e=>{l(i.filter((t,a)=>a!==e))},prepareDataForSubmit:()=>{const e=i.map(e=>e.url).filter(e=>e.trim().length>0),t=i.map(e=>e.description),a=i.map(e=>e.descriptionEn),s=i.map(e=>e.descriptionJa);for(let r=0;r<i.length;r++){const e=i[r];if(e){if(e.description&&e.description.length>5e3)throw new Error(`영상 ${r+1}의 한국어 설명이 너무 깁니다 (현재: ${e.description.length}자, 최대: 5000자)`);if(e.descriptionEn&&e.descriptionEn.length>5e3)throw new Error(`영상 ${r+1}의 영어 설명이 너무 깁니다 (현재: ${e.descriptionEn.length}자, 최대: 5000자)`);if(e.descriptionJa&&e.descriptionJa.length>5e3)throw new Error(`영상 ${r+1}의 일본어 설명이 너무 깁니다 (현재: ${e.descriptionJa.length}자, 최대: 5000자)`)}}return{...c,technologies:"string"==typeof c.technologies?c.technologies.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):c.technologies||[],technologiesEn:"string"==typeof c.technologiesEn?c.technologiesEn.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):c.technologiesEn||[],technologiesJa:"string"==typeof c.technologiesJa?c.technologiesJa.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):c.technologiesJa||[],images:"string"==typeof c.images?c.images.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.images||[],videos:e,videoDescriptions:t,videoDescriptionsEn:a,videoDescriptionsJa:s,features:"string"==typeof c.features?c.features.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.features||[],featuresEn:"string"==typeof c.featuresEn?c.featuresEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.featuresEn||[],featuresJa:"string"==typeof c.featuresJa?c.featuresJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.featuresJa||[],learnings:"string"==typeof c.learnings?c.learnings.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.learnings||[],learningsEn:"string"==typeof c.learningsEn?c.learningsEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.learningsEn||[],learningsJa:"string"==typeof c.learningsJa?c.learningsJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.learningsJa||[],skillIds:c.skillIds||[]}}}},de=()=>{const[t,a]=e.useState([]),[s,r]=e.useState(!1),n=e.useCallback(async()=>{r(!0);try{const e=(await g.getAll()).data.data||[];a(e)}catch(e){}finally{r(!1)}},[]),i=e.useCallback(async e=>{try{await g.create(e);return await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]),l=e.useCallback(async(e,t)=>{try{await g.update(e,t);return await n(),{success:!0}}catch(a){return{success:!1,error:a}}},[n]),c=e.useCallback(async e=>{try{return await g.delete(e),await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]);return e.useEffect(()=>{n()},[]),{projects:t,isLoading:s,fetchProjects:n,createProject:i,updateProject:l,deleteProject:c}},ye="adminMessages",ge=()=>a({queryKey:[ye,"list"],queryFn:async()=>{const e=await m.getAll();return e.data.data||e.data||[]},staleTime:12e4,gcTime:3e5}),pe=()=>{const{data:e=[],isLoading:t}=ge(),a=(()=>{const e=s();return r({mutationFn:async e=>{await m.markAsRead(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[ye]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),n=(()=>{const e=s();return r({mutationFn:async e=>{await m.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[ye]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),i=(()=>{const e=s();return r({mutationFn:e=>Promise.all(e.map(e=>m.markAsRead(e))).then(()=>{}),onSuccess:()=>{e.invalidateQueries({queryKey:[ye]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),l=(()=>{const e=s();return r({mutationFn:e=>Promise.all(e.map(e=>m.delete(e))).then(()=>{}),onSuccess:()=>{e.invalidateQueries({queryKey:[ye]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})();return{messages:e,isLoading:t,fetchMessages:()=>{},markAsRead:async e=>{try{return await a.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},deleteMessage:async e=>{try{return await n.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},bulkMarkAsRead:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},bulkDelete:async e=>{try{return await l.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}};function me(e,t={}){const{enabled:s=!0,staleTime:r=3e5}=t;return a({queryKey:[ye,"detail",e],queryFn:async()=>{if(!e)return null;return(await m.getById(e)).data.data},enabled:!!e&&s,staleTime:r,gcTime:6e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,select:e=>e||null})}const he=["skillCategories"],fe=()=>{const{skillCategories:e,loading:t,refetch:a}=x(),n=(()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>{var a;const s=await i.update(e,t);return(null==(a=s.data)?void 0:a.data)||s.data},onMutate:async({id:t,data:a})=>{await e.cancelQueries({queryKey:he});const s=e.getQueryData(he);return e.setQueryData(he,e=>e?e.map(e=>{var s;return{...e,skills:(null==(s=e.skills)?void 0:s.map(e=>e._id===t?{...e,...a,updatedAt:(new Date).toISOString()}:e))||[]}}):s),{previousCategories:s}},onError:(t,a,s)=>{(null==s?void 0:s.previousCategories)&&e.setQueryData(he,s.previousCategories)}})})(),l=(()=>{const e=s();return r({mutationFn:async e=>{var t;const a=await i.createCategory(e);return(null==(t=a.data)?void 0:t.data)||a.data},onSuccess:()=>{e.invalidateQueries({queryKey:he})}})})(),c=(()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>{var a;const s=await i.updateCategory(e,t);return(null==(a=s.data)?void 0:a.data)||s.data},onSuccess:()=>{e.invalidateQueries({queryKey:he})}})})(),o=(()=>{const e=s();return r({mutationFn:async e=>{await i.deleteCategory(e)},onSuccess:()=>{e.invalidateQueries({queryKey:he})}})})(),u=(()=>{const e=s();return r({mutationFn:async({categoryId:e,data:t})=>{var a;const s=await i.create(e,t);return(null==(a=s.data)?void 0:a.data)||s.data},onSuccess:()=>{e.invalidateQueries({queryKey:he})}})})(),d=(()=>{const e=s();return r({mutationFn:async e=>{await i.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:he})}})})();return{skillCategories:e,isLoading:t,fetchSkillCategories:a,createSkillCategory:async e=>{try{return{success:!0,data:await l.mutateAsync(e)}}catch(t){return{success:!1,error:t}}},updateSkillCategory:async(e,t)=>{try{return{success:!0,data:await c.mutateAsync({id:e,data:t})}}catch(a){return{success:!1,error:a}}},deleteSkillCategory:async e=>{try{return await o.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},createSkill:async(e,t)=>{try{return{success:!0,data:await u.mutateAsync({categoryId:e,data:t})}}catch(a){return{success:!1,error:a}}},updateSkill:async(e,t)=>{try{return{success:!0,data:await n.mutateAsync({id:e,data:t})}}catch(a){return{success:!1,error:a}}},deleteSkill:async e=>{try{return await d.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}},ve=()=>{s();const{data:e,isLoading:t}=a({queryKey:["dataCounts"],queryFn:async()=>{var e,t,a,s,r,n,o,y,h,f,v,w,S,k,C;const[b,A,E,q,F,D,K,Q]=await Promise.all([l.getAll(),u.getAll(),d.getAll(),p.getAll(),g.getAll(),m.getAll(),i.getCategories(),c.getAll()]);return{books:(null==(t=null==(e=b.data)?void 0:e.data)?void 0:t.length)||0,videoLearnings:(null==(s=null==(a=A.data)?void 0:a.data)?void 0:s.length)||0,videoPlaylists:(null==(n=null==(r=E.data)?void 0:r.data)?void 0:n.length)||0,experiences:(null==(y=null==(o=q.data)?void 0:o.data)?void 0:y.length)||0,projects:(null==(f=null==(h=F.data)?void 0:h.data)?void 0:f.length)||0,messages:(null==(w=null==(v=D.data)?void 0:v.data)?void 0:w.length)||0,skills:(null==(k=null==(S=K.data)?void 0:S.data)?void 0:k.length)||0,categories:(null==(C=Q.data)?void 0:C.length)||0}},staleTime:12e4,gcTime:3e5,refetchOnWindowFocus:!0});return{counts:e||{books:0,videoLearnings:0,videoPlaylists:0,experiences:0,projects:0,messages:0,skills:0,categories:0},isLoading:t,refreshCounts:()=>{}}},we=()=>{const[t,a]=e.useState("settings"),[s,r]=e.useState(null),[n,i]=e.useState("all"),[l,c]=e.useState(""),[o,u]=e.useState(""),[d,y]=e.useState("all"),[g,p]=e.useState(""),[m,h]=e.useState(""),[f,v]=e.useState(""),[w,S]=e.useState("all"),[k,C]=e.useState(""),[b,A]=e.useState("");return{activeTab:t,setActiveTab:a,activeSettingsSection:s,setActiveSettingsSection:r,bookFilters:{state:{filter:n,searchTerm:l,selectedCategory:o},actions:{setFilter:i,setSearchTerm:c,setSelectedCategory:u},data:{categories:["프로그래밍","데이터베이스","웹 개발","AI/ML","시스템 설계"]}},experienceFilters:{state:{filter:d,searchTerm:g,selectedCompany:m,selectedYear:f},actions:{setFilter:y,setSearchTerm:p,setSelectedCompany:h,setSelectedYear:v},data:{companies:["ABC Corp","XYZ Inc","Dev Solutions","Tech Startup"],years:["2024","2023","2022","2021","2020"]}},projectFilters:{state:{filter:w,searchTerm:k,selectedCategory:b},actions:{setFilter:S,setSearchTerm:C,setSelectedCategory:A},data:{categories:["웹 개발","모바일 앱","데이터 분석","임베디드","AI/ML"]}}}};export{T as A,P as B,O as C,R as D,V as E,N as F,W as G,ae as H,J as I,ue as J,K,M as L,$ as M,te as N,re as O,C as P,A as S,Z as a,ne as b,ce as c,ie as d,U as e,X as f,G as g,Y as h,z as i,H as j,oe as k,de as l,me as m,pe as n,fe as o,j as p,L as q,b as r,we as s,ve as t,le as u,ge as v,q as w,F as x,Q as y,x as z};
//# sourceMappingURL=chunk-9e3abf2e.js.map
