{"version":3,"file":"chunk-9bf999dd.js","sources":["../../src/hooks/useExperiences.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { experiencesAPI } from '../services/api';\r\n\r\n// ê²½ë ¥ ìƒì„¸ ì¹´í…Œê³ ë¦¬ íƒ€ì…\r\nexport interface ExperienceDetail {\r\n  category: string;  // ì¹´í…Œê³ ë¦¬ ì´ë¦„ (ì˜ˆ: \"ê·¼ë¬´ê²½í—˜\", \"êµìœ¡\", \"ê·¼ë¬´ë§¤ì¥\")\r\n  categoryEn?: string;\r\n  categoryJa?: string;\r\n  items: string[];   // ì¹´í…Œê³ ë¦¬ë³„ í•­ëª©ë“¤\r\n  itemsEn?: string[];\r\n  itemsJa?: string[];\r\n  order?: number;\r\n}\r\n\r\n// ë°±ì—”ë“œ ExperienceSchemaì— ë§ì¶˜ ì¸í„°í˜ì´ìŠ¤ ì •ì˜\r\nexport interface ExperienceItem {\r\n  _id: string;\r\n  period: string;\r\n  title: string;\r\n  titleEn?: string;\r\n  titleJa?: string;\r\n  company: string;\r\n  companyEn?: string;\r\n  companyJa?: string;\r\n  description: string;\r\n  descriptionEn?: string;\r\n  descriptionJa?: string;\r\n  details?: ExperienceDetail[];  // ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë‚´ìš© (ì‹ ê·œ)\r\n  detailsEn?: ExperienceDetail[];\r\n  detailsJa?: ExperienceDetail[];\r\n  skills: string[];  // ğŸ”„ í˜¸í™˜ì„± ìœ ì§€\r\n  skillsEn?: string[];\r\n  skillsJa?: string[];\r\n  skillIds?: string[];  // ğŸŒŸ ìŠ¤í‚¬ ID ëª©ë¡ (Skills í˜ì´ì§€ì™€ ì—°ê²°)\r\n  iconKey?: string;\r\n  color?: string;\r\n  bgColor?: string;\r\n  order?: number;\r\n  createdAt?: string;\r\n  updatedAt?: string;\r\n}\r\n\r\ninterface UseExperiencesResult {\r\n  experiences: ExperienceItem[];\r\n  loading: boolean;\r\n  error: string | null;\r\n  refetch: () => void;\r\n}\r\n\r\n// ë°ì´í„° ë³€í™˜ ë° ì •ë ¬ í•¨ìˆ˜\r\nconst transformExperiences = (data: ExperienceItem[]): ExperienceItem[] => {\r\n  return data.slice().sort((a, b) => {\r\n    // case 1: ë‘ í•­ëª© ëª¨ë‘ orderê°€ ìˆìœ¼ë©´ orderë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ\r\n    if (a.order !== undefined && b.order !== undefined) {\r\n      return a.order - b.order;\r\n    }\r\n    \r\n    // case 2: orderê°€ í•˜ë‚˜ë§Œ ìˆê±°ë‚˜ ë‘˜ ë‹¤ ì—†ìœ¼ë©´ createdAtì„ ê¸°ì¤€ìœ¼ë¡œ ì—­ìˆœ (ìµœì‹ ìˆœ)\r\n    if (a.createdAt && b.createdAt) {\r\n      // Date ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë¹„êµ (ë‚´ë¦¼ì°¨ìˆœ)\r\n      return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n    }\r\n    \r\n    return 0; // ì •ë ¬í•  í•„ë“œê°€ ëª¨ë‘ ì—†ìœ¼ë©´ ìˆœì„œ ë³€ê²½ ì—†ìŒ\r\n  });\r\n};\r\n\r\n// React Queryë¥¼ ì‚¬ìš©í•œ ë°ì´í„° í˜ì¹­\r\nconst fetchExperiences = async (): Promise<ExperienceItem[]> => {\r\n  const response = await experiencesAPI.getAll();\r\n  const data: ExperienceItem[] = response.data.data;\r\n  return transformExperiences(data);\r\n};\r\n\r\nexport const useExperiences = (): UseExperiencesResult => {\r\n  const {\r\n    data: experiences = [],\r\n    isLoading: loading,\r\n    error,\r\n    refetch\r\n  } = useQuery({\r\n    queryKey: ['experiences'],\r\n    queryFn: fetchExperiences,\r\n    staleTime: 5 * 60 * 1000, // 5ë¶„\r\n    gcTime: 10 * 60 * 1000, // 10ë¶„\r\n  });\r\n\r\n  return { \r\n    experiences, \r\n    loading, \r\n    error: error ? 'ê²½í—˜ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' : null, \r\n    refetch \r\n  };\r\n};\r\n"],"names":["fetchExperiences","async","data","slice","sort","a","b","order","createdAt","Date","getTime","transformExperiences","experiencesAPI","getAll","useExperiences","experiences","isLoading","loading","error","refetch","useQuery","queryKey","queryFn","staleTime","gcTime"],"mappings":"gFAkDA,MAkBMA,EAAmBC,SAlBI,CAACC,GACrBA,EAAKC,QAAQC,KAAK,CAACC,EAAGC,SAEX,IAAZD,EAAEE,YAAmC,IAAZD,EAAEC,MACtBF,EAAEE,MAAQD,EAAEC,MAIjBF,EAAEG,WAAaF,EAAEE,UAEZ,IAAIC,KAAKH,EAAEE,WAAWE,UAAY,IAAID,KAAKJ,EAAEG,WAAWE,UAG1D,GAQFC,QAFgBC,EAAeC,UACEX,KAAKA,MAIlCY,EAAiB,KACtB,MACJZ,KAAMa,EAAc,GACpBC,UAAWC,EAAAC,MACXA,EAAAC,QACAA,GACEC,EAAS,CACXC,SAAU,CAAC,eACXC,QAAStB,EACTuB,UAAW,IACXC,OAAQ,MAGH,MAAA,CACLT,cACAE,UACAC,MAAOA,EAAQ,6BAA+B,KAC9CC"}