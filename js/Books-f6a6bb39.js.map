{"version":3,"file":"Books-f6a6bb39.js","sources":["../../src/components/BookCoverImage.tsx","../../src/pages/Books.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { FaBook, FaImage } from 'react-icons/fa'\r\n\r\ninterface BookCoverImageProps {\r\n  src?: string\r\n  alt: string\r\n  className?: string\r\n  fallbackIcon?: React.ReactNode\r\n}\r\n\r\n/**\r\n * Ï±Ö Ïª§Î≤Ñ Ïù¥ÎØ∏ÏßÄ Ïª¥Ìè¨ÎÑåÌä∏\r\n * - ÏßÄÏó∞ Î°úÎî© ÏßÄÏõê\r\n * - Î°úÎî© ÏÉÅÌÉú ÌëúÏãú\r\n * - Ïò§Î•ò Ïãú ÎåÄÏ≤¥ ÏïÑÏù¥ÏΩò ÌëúÏãú\r\n */\r\nconst BookCoverImage: React.FC<BookCoverImageProps> = ({\r\n  src,\r\n  alt,\r\n  className = \"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300\",\r\n  fallbackIcon\r\n}) => {\r\n  const [imageState, setImageState] = useState<'loading' | 'loaded' | 'error'>('loading')\r\n  const [imageSrc, setImageSrc] = useState(src)\r\n\r\n  const handleImageLoad = () => {\r\n    setImageState('loaded')\r\n  }\r\n\r\n  const handleImageError = () => {\r\n    setImageState('error')\r\n    setImageSrc(undefined)\r\n  }\r\n\r\n  // Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏóÜÍ±∞ÎÇò Ïò§Î•òÍ∞Ä Î∞úÏÉùÌïú Í≤ΩÏö∞ ÎåÄÏ≤¥ ÏïÑÏù¥ÏΩò ÌëúÏãú\r\n  if (!imageSrc || imageState === 'error') {\r\n    return (\r\n      <div className=\"w-full h-64 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center\">\r\n        {fallbackIcon || <FaBook className=\"text-white text-6xl\" />}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative overflow-hidden\">\r\n      {/* Î°úÎî© ÏÉÅÌÉú Ïä§ÏºàÎ†àÌÜ§ */}\r\n      {imageState === 'loading' && (\r\n        <div className=\"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse flex items-center justify-center\">\r\n          <FaImage className=\"text-gray-400 text-4xl\" />\r\n        </div>\r\n      )}\r\n      \r\n      {/* Ïã§Ï†ú Ïù¥ÎØ∏ÏßÄ */}\r\n      <img\r\n        src={imageSrc}\r\n        alt={alt}\r\n        className={`${className} ${imageState === 'loading' ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`}\r\n        loading=\"lazy\"\r\n        decoding=\"async\"\r\n        width=\"400\"\r\n        height=\"256\"\r\n        onLoad={handleImageLoad}\r\n        onError={handleImageError}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default BookCoverImage\r\n","import React, { useState, useMemo, useEffect } from 'react'\r\nimport { motion } from 'framer-motion'\r\nimport { useInView } from 'react-intersection-observer'\r\nimport { FaBook, FaPlus, FaStar, FaCalendar } from 'react-icons/fa'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { useAuth } from '@/contexts/AuthContext'\r\nimport { useSiteSettings } from '@/hooks/useSiteSettings'\r\nimport { useBooks } from '@/hooks/useBooks'\r\nimport { useCategories } from '@/hooks/useCategories'\r\nimport { formatDate } from '@/utils/dateUtils'\r\nimport BookCoverImage from '@/components/BookCoverImage'\r\nimport ScrollToTopButton from '@/components/common/ScrollToTopButton'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { getLocalizedField, getLocalizedCategoryName } from '@/utils/i18nUtils'\r\n\r\nconst Books: React.FC = () => {\r\n  const { settings: siteSettings, loading: settingsLoading } = useSiteSettings()\r\n  const { t, i18n } = useTranslation()\r\n  const currentLang = i18n.language as 'ko' | 'en' | 'ja'\r\n  // üåü React Query useBooks ÌõÖÏùò Î∞òÌôòÍ∞í Íµ¨Ï°∞ ÏàòÏ†ï\r\n  const { data: books = [], isLoading: loading } = useBooks()\r\n  // üåü Ïπ¥ÌÖåÍ≥†Î¶¨ Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞\r\n  const { data: categories = [], isLoading: categoriesLoading } = useCategories()\r\n  const location = useLocation()\r\n  \r\n  const [ref, inView] = useInView({\r\n    triggerOnce: true,\r\n    threshold: 0.1,\r\n  })\r\n\r\n  const [filter, setFilter] = useState('all')\r\n  const { isAuthenticated } = useAuth()\r\n  \r\n  // üåü Ïä§ÌÅ¨Î°§ ÏúÑÏπò Î≥µÏõê\r\n  useEffect(() => {\r\n    const scrollPosition = (location.state as any)?.scrollPosition\r\n    if (scrollPosition) {\r\n      window.scrollTo(0, scrollPosition)\r\n      // stateÎ•º Ï†ïÎ¶¨ÌïòÏó¨ Îí§Î°úÍ∞ÄÍ∏∞ Ïãú Îã§Ïãú Î≥µÏõêÎêòÏßÄ ÏïäÎèÑÎ°ù\r\n      window.history.replaceState({}, document.title)\r\n    }\r\n  }, [])\r\n\r\n  // =================================================================\r\n  // üîç ÌïÑÌÑ∞ÎßÅ Î°úÏßÅ (categoryIds Î∞∞Ïó¥ Í∏∞Î∞ò)\r\n  // =================================================================\r\n  \r\n  const filteredBooks = useMemo(() => {\r\n    const safeBooks = books || []\r\n    if (filter === 'all') return safeBooks\r\n    \r\n    // categoryIds Î∞∞Ïó¥Ïóê ÏÑ†ÌÉùÎêú Ïπ¥ÌÖåÍ≥†Î¶¨ IDÍ∞Ä Ìè¨Ìï®ÎêòÏñ¥ ÏûàÎäîÏßÄ ÌôïÏù∏\r\n    return safeBooks.filter(book => {\r\n      if (!book.categoryIds || book.categoryIds.length === 0) {\r\n        // Ìò∏ÌôòÏÑ±: categoryIdsÍ∞Ä ÏóÜÏúºÎ©¥ Í∏∞Ï°¥ category Î¨∏ÏûêÏó¥ ÏÇ¨Ïö©\r\n        return book.category?.toLowerCase() === filter\r\n      }\r\n      \r\n      // categoryIdsÍ∞Ä populateÎêú Í∞ùÏ≤¥ Î∞∞Ïó¥Ïù∏ Í≤ΩÏö∞ÏôÄ ID Î¨∏ÏûêÏó¥ Î∞∞Ïó¥Ïù∏ Í≤ΩÏö∞ Î™®Îëê Ï≤òÎ¶¨\r\n      return (book.categoryIds as any[]).some((catIdOrObj: any) => {\r\n        const catId = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id\r\n        return catId === filter\r\n      })\r\n    })\r\n  }, [books, filter])\r\n\r\n  // Î°úÎî© ÏÉÅÌÉú ÌÜµÌï©: ÏÑ§Ï†ï Îç∞Ïù¥ÌÑ∞ÏôÄ Ï±Ö Îç∞Ïù¥ÌÑ∞ Ï§ë ÌïòÎÇòÎùºÎèÑ Î°úÎî© Ï§ëÏù¥Î©¥ Î°úÎî© ÌëúÏãú\r\n  const isPageLoading = settingsLoading || loading\r\n\r\n  const containerVariants = {\r\n    hidden: { opacity: 0 },\r\n    visible: {\r\n      opacity: 1,\r\n      transition: {\r\n        staggerChildren: 0.2,\r\n      },\r\n    },\r\n  }\r\n\r\n  const itemVariants = {\r\n    hidden: { opacity: 0, y: 30 },\r\n    visible: {\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: {\r\n        duration: 0.6,\r\n        ease: 'easeOut',\r\n      },\r\n    },\r\n  }\r\n\r\n  return (\r\n    <section className=\"section-padding bg-white dark:bg-dark-800 min-h-screen\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <motion.div\r\n          ref={ref}\r\n          variants={containerVariants}\r\n          initial=\"hidden\"\r\n          animate={inView ? 'visible' : 'hidden'}\r\n        >\r\n          {/* 1. Ï†úÎ™© Î∞è Î∂ÄÏ†úÎ™© */}\r\n          <motion.div variants={itemVariants} className=\"text-center mb-16\">\r\n            <h2 className=\"text-4xl md:text-5xl font-bold text-dark-900 dark:text-white mb-6\">\r\n              {getLocalizedField(currentLang, siteSettings?.booksTitle, siteSettings?.booksTitleEn, siteSettings?.booksTitleJa) || 'Í∏∞Ïà† ÏÑúÏ†Å & ÌïôÏäµ ÎÖ∏Ìä∏'}\r\n            </h2>\r\n            <p className=\"text-xl text-dark-600 dark:text-dark-300 max-w-3xl mx-auto mb-8\">\r\n              {getLocalizedField(currentLang, siteSettings?.booksSubtitle, siteSettings?.booksSubtitleEn, siteSettings?.booksSubtitleJa) || 'ÏùΩÏùÄ Í∏∞Ïà† ÏÑúÏ†ÅÍ≥º Í∑∏Î°úÎ∂ÄÌÑ∞ Î∞∞Ïö¥ ÏßÄÏãùÏùÑ Í≥µÏú†Ìï©ÎãàÎã§'}\r\n            </p>\r\n          </motion.div>\r\n\r\n          {/* 2. ÏÑúÏ†Å Ï∂îÍ∞Ä Î≤ÑÌäº (Ïù∏Ï¶ùÎêú Í≤ΩÏö∞) */}\r\n          {isAuthenticated && (\r\n            <motion.div variants={itemVariants} className=\"mb-8 flex justify-end\">\r\n              <Link\r\n                to=\"/admin\"\r\n                className=\"inline-flex items-center gap-2 bg-accent-500 hover:bg-accent-600 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-600 shadow-medium hover:shadow-glow\"\r\n              >\r\n                <FaPlus /> ÏÑúÏ†Å Ï∂îÍ∞Ä\r\n              </Link>\r\n            </motion.div>\r\n          )}\r\n\r\n          {/* 3. Ïπ¥ÌÖåÍ≥†Î¶¨ ÌïÑÌÑ∞ (categoryIds Î∞∞Ïó¥ Í∏∞Î∞ò) */}\r\n          <motion.div variants={itemVariants} className=\"flex justify-center flex-wrap gap-3 mb-12\">\r\n            {/* 'Ï†ÑÏ≤¥' Î≤ÑÌäº */}\r\n            <button\r\n              key=\"all\"\r\n              onClick={() => setFilter('all')}\r\n              className={`px-4 py-2 rounded-full text-sm font-medium transition-colors duration-600 border ${\r\n                filter === 'all'\r\n                  ? 'bg-primary-500 text-white border-primary-500 dark:bg-primary-600 dark:border-primary-600 shadow-glow'\r\n                  : 'bg-white text-dark-700 border-secondary-300 hover:bg-secondary-50 dark:bg-dark-700 dark:text-dark-300 dark:border-dark-600 dark:hover:bg-dark-600'\r\n              }`}\r\n            >\r\n              Ï†ÑÏ≤¥\r\n            </button>\r\n            {/* Ïπ¥ÌÖåÍ≥†Î¶¨ Î≤ÑÌäº Î†åÎçîÎßÅ */}\r\n            {categories.map((category) => (\r\n              <button\r\n                key={category._id}\r\n                onClick={() => setFilter(category._id)}\r\n                className={`px-4 py-2 rounded-full text-sm font-medium transition-colors duration-600 border ${\r\n                  filter === category._id\r\n                    ? 'bg-primary-500 text-white border-primary-500 dark:bg-primary-600 dark:border-primary-600 shadow-glow'\r\n                    : 'bg-white text-dark-700 border-secondary-300 hover:bg-secondary-50 dark:bg-dark-700 dark:text-dark-300 dark:border-dark-600 dark:hover:bg-dark-600'\r\n                }`}\r\n              >\r\n                {getLocalizedCategoryName(currentLang, category)}\r\n              </button>\r\n            ))}\r\n          </motion.div>\r\n\r\n          {/* 4. Î°úÎî©, Í≤∞Í≥º ÏóÜÏùå, ÎòêÎäî Ï±Ö Î™©Î°ù */}\r\n          {isPageLoading ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"inline-block w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin\"></div>\r\n              <p className=\"mt-4 text-dark-500 dark:text-dark-400\">Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>\r\n            </div>\r\n          ) : filteredBooks.length === 0 ? (\r\n            <motion.div\r\n              variants={itemVariants}\r\n              className=\"text-center py-12\"\r\n            >\r\n              <FaBook className=\"text-6xl text-dark-400 mx-auto mb-4\" />\r\n              <p className=\"text-xl text-dark-600 dark:text-dark-400\">\r\n                {filter === 'all' ? 'Ï†ÑÏ≤¥' : (() => {\r\n                  const cat = categories.find(c => c._id === filter)\r\n                  return cat ? getLocalizedCategoryName(currentLang, cat) : 'ÏÑ†ÌÉùÌïú'\r\n                })()} Ïπ¥ÌÖåÍ≥†Î¶¨Ïùò Îì±Î°ùÎêú ÏÑúÏ†ÅÏù¥ ÏóÜÏäµÎãàÎã§.\r\n              </p>\r\n            </motion.div>\r\n          ) : (\r\n            <motion.div\r\n              variants={containerVariants}\r\n              className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"\r\n            >\r\n              {filteredBooks.map((book) => (\r\n                <motion.div\r\n                  key={book._id}\r\n                  variants={itemVariants}\r\n                  whileHover={{ y: -5 }}\r\n                  className=\"card hover-lift\"\r\n                >\r\n                  <Link\r\n                    to={`/books/${book._id}`}\r\n                    state={{ scrollPosition: window.scrollY }}\r\n                    className=\"block overflow-hidden h-full group\"\r\n                  >\r\n                    {/* Í∞úÏÑ†Îêú Ïù¥ÎØ∏ÏßÄ Ïª¥Ìè¨ÎÑåÌä∏ ÏÇ¨Ïö© */}\r\n                    <BookCoverImage\r\n                      src={book.coverImage || ''}\r\n                      alt={book.title}\r\n                      className=\"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-600\"\r\n                    />\r\n                    \r\n                    <div className=\"p-6\">\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        {/* Ïπ¥ÌÖåÍ≥†Î¶¨ Î∞∞ÏßÄ (Î≥µÏàò ÌëúÏãú) */}\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {book.categoryIds && book.categoryIds.length > 0 ? (\r\n                            (book.categoryIds as any[]).map((catIdOrObj: any) => {\r\n                              const catId = typeof catIdOrObj === 'string' ? catIdOrObj : catIdOrObj?._id\r\n                              const categoryObj = typeof catIdOrObj === 'string' \r\n                                ? categories.find(c => c._id === catId)\r\n                                : catIdOrObj\r\n                              \r\n                              return categoryObj ? (\r\n                                <span \r\n                                  key={catId}\r\n                                  className=\"px-3 py-1 bg-primary-100 dark:bg-primary-800/50 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\"\r\n                                >\r\n                                  {getLocalizedCategoryName(currentLang, categoryObj)}\r\n                                </span>\r\n                              ) : null\r\n                            })\r\n                          ) : (\r\n                            // Ìò∏ÌôòÏÑ±: categoryIdsÍ∞Ä ÏóÜÏúºÎ©¥ Í∏∞Ï°¥ category ÌëúÏãú\r\n                            book.category && (\r\n                              <span className=\"px-3 py-1 bg-primary-100 dark:bg-primary-800/50 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium\">\r\n                                {book.category}\r\n                              </span>\r\n                            )\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <FaStar className=\"text-yellow-500\" />\r\n                          <span className=\"text-dark-700 dark:text-dark-300 font-medium\">\r\n                            {book.rating}/5\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                      <h3 className=\"text-xl font-bold text-dark-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-600\">\r\n                        {getLocalizedField(currentLang, book.title, book.titleEn, book.titleJa)}\r\n                      </h3>\r\n                      <p className=\"text-dark-600 dark:text-dark-400 mb-4\">\r\n                        {getLocalizedField(currentLang, book.author, book.authorEn, book.authorJa)}\r\n                      </p>\r\n                      <div className=\"flex items-center justify-between text-sm text-dark-500 dark:text-dark-500 pt-2 border-t border-secondary-200 dark:border-dark-600\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <FaCalendar />\r\n                          <span>{formatDate(book.readDate)}</span>\r\n                        </div>\r\n                        <span \r\n                          className=\"hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-600 font-medium\"\r\n                        >\r\n                          {(() => {\r\n                            // Î™©Ï∞®Í∞Ä ÏûàÎäî Í≤ΩÏö∞: Î™©Ï∞®Î≥Ñ ÌïôÏäµ ÎÇ¥Ïö© Ìï©Í≥Ñ\r\n                            if (book.chapters && book.chapters.length > 0) {\r\n                              const totalChapterLearnings = book.chapters.reduce((sum, chapter) => \r\n                                sum + (chapter.learnings?.length || 0), 0\r\n                              )\r\n                              return `${book.chapters.length}Í∞ú Î™©Ï∞®, ${totalChapterLearnings}Í∞ú ÌïôÏäµ ÎÇ¥Ïö©`\r\n                            }\r\n                            // Í∏∞Ï°¥ ÌïôÏäµ ÎÇ¥Ïö©Ïù¥ ÏûàÎäî Í≤ΩÏö∞\r\n                            else if (book.learnings && book.learnings.length > 0) {\r\n                              return `${book.learnings.length}Í∞úÏùò ÌïôÏäµ ÎÇ¥Ïö©`\r\n                            }\r\n                            // ÌïôÏäµ ÎÇ¥Ïö©Ïù¥ ÏóÜÎäî Í≤ΩÏö∞\r\n                            else {\r\n                              return 'ÌïôÏäµ ÎÇ¥Ïö© ÏóÜÏùå'\r\n                            }\r\n                          })()}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                </motion.div>\r\n              ))}\r\n            </motion.div>\r\n          )}\r\n        </motion.div>\r\n      </div>\r\n      \r\n      {/* üåü Ïä§ÌÅ¨Î°§ Ìà¨ ÌÉë Î≤ÑÌäº */}\r\n      <ScrollToTopButton />\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Books\r\n\r\n\r\n"],"names":["BookCoverImage","src","alt","className","fallbackIcon","imageState","setImageState","useState","imageSrc","setImageSrc","jsxs","children","jsx","FaImage","jsxRuntimeExports","loading","decoding","width","height","onLoad","onError","FaBook","Books","settings","siteSettings","settingsLoading","useSiteSettings","t","i18n","useTranslation","currentLang","language","data","books","isLoading","useBooks","categories","categoriesLoading","useCategories","location","useLocation","ref","inView","useInView","triggerOnce","threshold","filter","setFilter","isAuthenticated","useAuth","useEffect","scrollPosition","_a","state","window","scrollTo","history","replaceState","document","title","filteredBooks","useMemo","safeBooks","book","categoryIds","length","some","catIdOrObj","_id","category","toLowerCase","isPageLoading","containerVariants","hidden","opacity","visible","transition","staggerChildren","itemVariants","y","duration","ease","motion","div","variants","initial","animate","getLocalizedField","booksTitle","booksTitleEn","booksTitleJa","booksSubtitle","booksSubtitleEn","booksSubtitleJa","Link","to","FaPlus","onClick","map","getLocalizedCategoryName","cat","find","c","whileHover","scrollY","coverImage","catId","categoryObj","FaStar","rating","titleEn","titleJa","author","authorEn","authorJa","FaCalendar","formatDate","readDate","chapters","totalChapterLearnings","reduce","sum","chapter","learnings","ScrollToTopButton"],"mappings":"4cAgBA,MAAMA,EAAgD,EACpDC,MACAC,MACAC,YAAY,mFACZC,mBAEA,MAAOC,EAAYC,GAAiBC,WAAyC,YACtEC,EAAUC,GAAeF,WAASN,GAYrC,OAACO,GAA2B,UAAfH,IASfK,KAAC,MAAI,CAAAP,UAAU,2BAEZQ,SAAA,CAAe,YAAAN,SACb,MAAI,CAAAF,UAAU,+FACbQ,SAACC,EAAAA,IAAAC,EAAA,CAAQV,UAAU,6BAKvBW,EAAAF,IAAC,MAAA,CACCX,IAAKO,EACLN,MACAC,UAAW,GAAGA,KAA4B,YAAfE,EAA2B,YAAc,gDACpEU,QAAQ,OACRC,SAAS,QACTC,MAAM,MACNC,OAAO,MACPC,OApCkB,KACtBb,EAAc,WAoCVc,QAjCmB,KACvBd,EAAc,SACdG,OAAY,WAMVG,IAAC,OAAIT,UAAU,iGACZQ,YAAiBG,EAAAF,IAAAS,EAAA,CAAOlB,UAAU,2BCvBrCmB,EAAkB,KACtB,MAAQC,SAAUC,EAAcT,QAASU,GAAoBC,KACvDC,EAAEA,EAAAC,KAAGA,GAASC,IACdC,EAAcF,EAAKG,UAEjBC,KAAMC,EAAQ,GAAIC,UAAWnB,GAAYoB,KAEzCH,KAAMI,EAAa,GAAIF,UAAWG,GAAsBC,IAC1DC,EAAWC,KAEVC,EAAKC,GAAUC,EAAU,CAC9BC,aAAa,EACbC,UAAW,MAGNC,EAAQC,GAAaxC,WAAS,QAC/ByC,gBAAEA,GAAoBC,IAG5BC,EAAAA,UAAU,WACF,MAAAC,EAAkB,OAAAC,EAASb,EAAAc,YAAe,EAAAD,EAAAD,eAC5CA,IACKG,OAAAC,SAAS,EAAGJ,GAEnBG,OAAOE,QAAQC,aAAa,CAAC,EAAGC,SAASC,SAE1C,IAMG,MAAAC,EAAgBC,EAAAA,QAAQ,KACtB,MAAAC,EAAY7B,GAAS,GAC3B,MAAe,QAAXa,EAAyBgB,EAGtBA,EAAUhB,OAAeiB,UAC9B,OAAKA,EAAKC,aAA2C,IAA5BD,EAAKC,YAAYC,OAMlCF,EAAKC,YAAsBE,KAAMC,IACH,iBAAfA,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAAC,OACvDtB,IANV,OAAAM,EAAAW,EAAKM,eAAL,EAAAjB,EAAekB,iBAAkBxB,KAS3C,CAACb,EAAOa,IAGLyB,EAAgB9C,GAAmBV,EAEnCyD,EAAoB,CACxBC,OAAQ,CAAEC,QAAS,GACnBC,QAAS,CACPD,QAAS,EACTE,WAAY,CACVC,gBAAiB,MAKjBC,EAAe,CACnBL,OAAQ,CAAEC,QAAS,EAAGK,EAAG,IACzBJ,QAAS,CACPD,QAAS,EACTK,EAAG,EACHH,WAAY,CACVI,SAAU,GACVC,KAAM,aAMV,SAAAvE,KAAC,UAAQ,CAAAP,UAAU,yDACjBQ,SAAA,GAACC,IAAA,MAAA,CAAIT,UAAU,oBACbQ,SAAAG,EAAAJ,KAACwE,EAAOC,IAAP,CACC1C,MACA2C,SAAUZ,EACVa,QAAQ,SACRC,QAAS5C,EAAS,UAAY,SAG9B/B,SAAA,CAAAD,OAACwE,EAAOC,IAAP,CAAWC,SAAUN,EAAc3E,UAAU,oBAC5CQ,SAAA,GAAAC,IAAC,KAAG,CAAAT,UAAU,oEACXQ,SAAA4E,EAAkBzD,EAAa,MAAAN,OAAA,EAAAA,EAAcgE,WAA0B,MAAdhE,OAAc,EAAAA,EAAAiE,mBAAcjE,WAAckE,eAAiB,oBAEtH9E,IAAA,IAAA,CAAET,UAAU,kEACVQ,SAAkB4E,EAAAzD,EAAa,MAAAN,OAAA,EAAAA,EAAcmE,cAA6B,MAAdnE,OAAc,EAAAA,EAAAoE,sBAAiBpE,WAAcqE,kBAAoB,mCAKjI7C,SACEkC,EAAOC,IAAP,CAAWC,SAAUN,EAAc3E,UAAU,wBAC5CQ,SAAAG,EAAAJ,KAACoF,EAAA,CACCC,GAAG,SACH5F,UAAU,8KAEVQ,SAAA,CAAAG,EAAAF,IAACoF,EAAO,IAAE,qBAMfd,EAAOC,IAAP,CAAWC,SAAUN,EAAc3E,UAAU,4CAE5CQ,SAAA,CAAAG,EAAAF,IAAC,SAAA,CAECqF,QAAS,IAAMlD,EAAU,OACzB5C,UAAW,qFACE,QAAX2C,EACI,uGACA,qJAEPnC,SAAA,MAPK,OAWLyB,EAAW8D,IAAK7B,GACfvD,EAAAF,IAAC,SAAA,CAECqF,QAAS,IAAMlD,EAAUsB,EAASD,KAClCjE,UAAW,qFACT2C,IAAWuB,EAASD,IAChB,uGACA,qJAGLzD,SAAAwF,EAAyBrE,EAAauC,IARlCA,EAASD,SAcnBG,EACCzD,EAAAJ,KAAC,MAAI,CAAAP,UAAU,oBACbQ,SAAA,GAACC,IAAA,MAAA,CAAIT,UAAU,sGACdS,EAAAA,IAAA,IAAA,CAAET,UAAU,wCAAwCQ,SAAc,sBAE1C,IAAzBiD,EAAcK,OAChBnD,EAAAJ,KAACwE,EAAOC,IAAP,CACCC,SAAUN,EACV3E,UAAU,oBAEVQ,SAAA,GAACC,IAAAS,EAAA,CAAOlB,UAAU,0CAClBO,KAAC,IAAE,CAAAP,UAAU,2CACVQ,SAAA,CAAW,QAAAmC,EAAQ,KAAA,MAClB,MAAMsD,EAAMhE,EAAWiE,KAAUC,GAAAA,EAAElC,MAAQtB,GAC3C,OAAOsD,EAAMD,EAAyBrE,EAAasE,GAAO,KACzD,EAHiB,GAGf,6BAITtF,EAAAF,IAACsE,EAAOC,IAAP,CACCC,SAAUZ,EACVrE,UAAU,2CAETQ,SAAAiD,EAAcsC,IAAKnC,GAClBjD,EAAAF,IAACsE,EAAOC,IAAP,CAECC,SAAUN,EACVyB,WAAY,CAAExB,GAAM,GACpB5E,UAAU,kBAEVQ,SAAAG,EAAAJ,KAACoF,EAAA,CACCC,GAAI,UAAUhC,EAAKK,MACnBf,MAAO,CAAEF,eAAgBG,OAAOkD,SAChCrG,UAAU,qCAGVQ,SAAA,CAAAG,EAAAF,IAACZ,EAAA,CACCC,IAAK8D,EAAK0C,YAAc,GACxBvG,IAAK6D,EAAKJ,MACVxD,UAAU,uFAGZO,KAAC,MAAI,CAAAP,UAAU,MACbQ,SAAA,GAACD,KAAA,MAAA,CAAIP,UAAU,yCAEbQ,SAAA,GAAAC,IAAC,MAAI,CAAAT,UAAU,uBACZQ,SAAAoD,EAAKC,aAAeD,EAAKC,YAAYC,OAAS,EAC5CF,EAAKC,YAAsBkC,IAAK/B,IAC/B,MAAMuC,EAA8B,iBAAfvC,EAA0BA,EAAyB,MAAZA,OAAY,EAAAA,EAAAC,IAClEuC,EAAoC,iBAAfxC,EACvB/B,EAAWiE,KAAUC,GAAAA,EAAElC,MAAQsC,GAC/BvC,EAEJ,OAAOwC,EACL7F,EAAAF,IAAC,OAAA,CAECT,UAAU,0HAETQ,SAAAwF,EAAyBrE,EAAa6E,IAHlCD,GAKL,OAIN3C,EAAKM,UACHzD,EAAAA,IAAC,QAAKT,UAAU,0HACbQ,WAAK0D,eAKd3D,KAAC,MAAI,CAAAP,UAAU,0BACbQ,SAAA,GAACC,IAAAgG,EAAA,CAAOzG,UAAU,sBAClBO,KAAC,OAAK,CAAAP,UAAU,+CACbQ,SAAA,CAAKoD,EAAA8C,OAAO,gBAIlBjG,IAAA,KAAA,CAAGT,UAAU,qJACXQ,SAAkB4E,EAAAzD,EAAaiC,EAAKJ,MAAOI,EAAK+C,QAAS/C,EAAKgD,aAEhEnG,IAAA,IAAA,CAAET,UAAU,wCACVQ,SAAkB4E,EAAAzD,EAAaiC,EAAKiD,OAAQjD,EAAKkD,SAAUlD,EAAKmD,cAEnExG,KAAC,MAAI,CAAAP,UAAU,qIACbQ,SAAA,GAACD,KAAA,MAAA,CAAIP,UAAU,0BACbQ,SAAA,CAAAG,EAAAF,IAACuG,EAAW,IACXvG,EAAAA,IAAA,OAAA,CAAMD,SAAWyG,EAAArD,EAAKsD,eAEzBvG,EAAAF,IAAC,OAAA,CACCT,UAAU,gGAERQ,eAEA,GAAIoD,EAAKuD,UAAYvD,EAAKuD,SAASrD,OAAS,EAAG,CACvC,MAAAsD,EAAwBxD,EAAKuD,SAASE,OAAO,CAACC,EAAKC,WAChD,OAAAD,IAAA,OAAArE,EAAAsE,EAAQC,gBAAR,EAAAvE,EAAmBa,SAAU,IAAI,GAE1C,MAAO,GAAGF,EAAKuD,SAASrD,eAAesD,UAAqB,QAGrDxD,EAAK4D,WAAa5D,EAAK4D,UAAU1D,OAAS,EAC1C,GAAGF,EAAK4D,UAAU1D,iBAIlB,UAER,iBAnFNF,EAAKK,mBAgGrBwD,EAAkB"}