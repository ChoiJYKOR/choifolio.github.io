import{j as e,c as t,u as r,b as a}from"./chunk-9a18e39e.js";import{r as n,f as i,a as l,g as o,R as s,b as c}from"./chunk-324910f1.js";import{f as d,Q as u,a5 as h,a7 as p,a8 as f,C as g,l as y,B as b,j as x,G as m,t as v,p as k,q as j,a9 as w,aa as N,ab as _,a6 as C,v as O,n as E,ac as S,w as A,D as T,E as P,F as L,T as I,U as q,K as D,a as M,b as R,V as F,W as B,X as U,ad as z,Y as H,N as K,ae as J,af as V,Z as G,ag as $,m as W,ah as Z,ai as Y,a4 as X,aj as Q,ak as ee,u as te,al as re,am as ae,an as ne,ao as ie,i as le,ap as oe}from"./index-12c0d33b.js";import{u as se}from"./chunk-d8625230.js";import{u as ce,a as de,b as ue}from"./chunk-94292619.js";import{f as he}from"./chunk-abc135ce.js";import{A as pe,m as fe,D as ge,c as ye,S as be,v as xe,b as me,C as ve,d as ke}from"./chunk-816c63d1.js";import{u as je}from"./chunk-4f2364f3.js";import{d as we}from"./chunk-d2b19a2a.js";import{e as Ne,g as _e,a as Ce,b as Oe}from"./chunk-5cf4a90d.js";import{e as Ee,b as Se,f as Ae,d as Te,g as Pe}from"./chunk-6c9b027c.js";import{R as Le}from"./chunk-28bf6a71.js";import"./chunk-43ad9be7.js";const Ie=({counts:t})=>{const r={recentUpdates:[{type:"book",typeName:"책",title:"최신 도서 추가",updatedAt:new Date},{type:"project",typeName:"프로젝트",title:"새 프로젝트 완료",updatedAt:new Date},{type:"experience",typeName:"경력",title:"경력 정보 업데이트",updatedAt:new Date}],weeklyStats:{booksAdded:2,projectsCompleted:1,experiencesUpdated:3}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"관리자 설정"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"📊 콘텐츠 통계"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("button",{className:"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-lg border border-orange-200 dark:border-orange-800 hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-left w-full",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"등록된 책"}),e.jsx("p",{className:"text-3xl font-bold text-orange-900 dark:text-orange-100",children:t.books}),e.jsx("p",{className:"text-xs text-orange-500 dark:text-orange-400 mt-1",children:"권"})]}),e.jsx(d,{className:"text-orange-500 text-3xl"})]})}),e.jsx("button",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-left w-full",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"등록된 경력"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:t.experiences}),e.jsx("p",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:"개"})]}),e.jsx(u,{className:"text-blue-500 text-3xl"})]})}),e.jsx("button",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg border border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-left w-full",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"등록된 프로젝트"}),e.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:t.projects}),e.jsx("p",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:"개"})]}),e.jsx(h,{className:"text-green-500 text-3xl"})]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"📊 사이트 활동"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(p,{className:"text-purple-500 text-xl"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"최근 업데이트"})]}),e.jsx("div",{className:"space-y-3",children:r.recentUpdates.length>0?r.recentUpdates.map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+(0===r?"bg-green-500":1===r?"bg-yellow-500":"bg-blue-500")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.typeName})]})]}),e.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:t.updatedAt.toLocaleDateString("ko-KR")})]},`${t.type}-${r}`)):e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"최근 업데이트된 콘텐츠가 없습니다."})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(f,{className:"text-indigo-500 text-xl"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"이번 주 활동"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"text-orange-500"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"새로 추가된 책"})]}),e.jsx("span",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:r.weeklyStats.booksAdded})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"text-green-500"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"완료된 프로젝트"})]}),e.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:r.weeklyStats.projectsCompleted})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{className:"text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"업데이트된 경력"})]}),e.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:r.weeklyStats.experiencesUpdated})]})]})]})]})]})]})},qe=({data:t,onSave:r,onCancel:a,isSaving:i=!1,availableCategories:l=["PLC","데이터분석","로봇공학","IoT","기타"]})=>{const{skillCategories:o,loading:s}=se(),{data:c=[],isLoading:d}=ce(),u=(null==t?void 0:t.readDate)&&!isNaN(new Date(t.readDate).getTime())?new Date(t.readDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],h=(null==t?void 0:t.categoryIds)?t.categoryIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],p=(null==t?void 0:t.skillIds)?t.skillIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],[f,x]=n.useState(t?{title:t.title,author:t.author,category:t.category,categoryIds:h,coverImage:t.coverImage||"",readDate:u,rating:t.rating,skillIds:p}:{title:"",author:"",category:l[0]||"PLC",categoryIds:[],coverImage:"",readDate:u,rating:5,skillIds:[]}),m=e=>{const t=f.categoryIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];x({...f,categoryIds:r})},v=e=>{const t=(e.skills||[]).map(e=>e._id).filter(Boolean),r=f.skillIds||[];let a;if(t.every(e=>r.includes(e)))a=r.filter(e=>!t.includes(e));else{const e=new Set([...r,...t]);a=Array.from(e)}x({...f,skillIds:a})},k=""!==f.title.trim()&&""!==f.author.trim()&&""!==f.category.trim();return e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!k)return void alert("필수 필드(제목, 저자, 카테고리)를 모두 입력해주세요.");const t=Array.from(new Set((f.skillIds||[]).map(e=>"string"==typeof e?e:null==e?void 0:e._id).filter(Boolean))),a=Array.from(new Set((f.categoryIds||[]).map(e=>"string"==typeof e?e:null==e?void 0:e._id).filter(Boolean))),{title:n,author:i,category:l,coverImage:o,readDate:s,rating:c}=f;r({title:n,author:i,category:l,coverImage:o||"",readDate:s,rating:c,skillIds:t,categoryIds:a})},className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:t?"서적 수정":"서적 추가"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"제목"}),e.jsx("input",{type:"text",value:f.title,onChange:e=>x({...f,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"저자"}),e.jsx("input",{type:"text",value:f.author,onChange:e=>x({...f,author:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"카테고리 선택 📂 (다중 선택 가능)"}),f.categoryIds&&f.categoryIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:f.categoryIds.map(t=>{const r=c.find(e=>e._id===t);return r?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:[r.name,e.jsx("button",{type:"button",onClick:()=>m(t),className:"hover:bg-blue-700 rounded-full p-0.5",children:e.jsx(g,{className:"text-xs"})})]},t):null})}),d?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"카테고리 로딩 중..."}):c.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:c.map(t=>{const r=(f.categoryIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all "+(r?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>m(t._id),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]},t._id)})}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:'등록된 카테고리가 없습니다. 관리자 메뉴의 "카테고리 관리"에서 추가하세요.'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"평점"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{type:"button",onClick:()=>x({...f,rating:t}),className:"text-2xl transition-colors "+(t<=f.rating?"text-yellow-500 hover:text-yellow-600":"text-gray-300 hover:text-gray-400"),children:e.jsx(y,{})},t))}),e.jsx("input",{type:"number",min:"1",max:"5",step:"0.5",value:f.rating,onChange:e=>{const t=e.target.value,r=""===t?0:parseFloat(t);x({...f,rating:isNaN(r)?f.rating:Math.max(1,Math.min(5,r))})},className:"w-20 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"읽은 날짜"}),e.jsx("input",{type:"date",value:f.readDate,onChange:e=>x({...f,readDate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"표지 이미지 URL"}),e.jsx("input",{type:"text",value:f.coverImage,onChange:e=>x({...f,coverImage:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://..."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"이 서적에서 다루는 핵심 스킬 🔗"}),f.skillIds&&f.skillIds.length>0&&e.jsxs("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded",children:["✓ ",f.skillIds.length,"개 선택됨"]})]}),s?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:"스킬 목록을 불러오는 중입니다..."}):0===o.length?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-4 text-center border border-gray-300 dark:border-gray-600 rounded-lg",children:"등록된 스킬이 없습니다. 먼저 스킬을 추가해주세요."}):e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 max-h-[400px] overflow-y-auto",children:o.map(t=>{const r=(t.skills||[]).map(e=>e._id).filter(Boolean),a=f.skillIds||[],n=r.filter(e=>a.includes(e)).length,i=r.length>0&&n===r.length,l=n>0&&n<r.length;return e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded",onClick:()=>v(t),children:[e.jsx("input",{type:"checkbox",checked:i,ref:e=>{e&&(e.indeterminate=l)},onChange:()=>v(t),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",onClick:e=>e.stopPropagation()}),e.jsxs("label",{className:"font-semibold text-gray-900 dark:text-white flex-1 cursor-pointer",style:{color:t.color||"#3B82F6"},children:[t.title,n>0&&e.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",n,"/",r.length,")"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6",children:(t.skills||[]).map(t=>{const r=(f.skillIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(r?"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700":"hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>(e=>{const t=f.skillIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];x({...f,skillIds:r})})(t._id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm "+(r?"font-semibold text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"),children:t.name})]},t._id)})})]},t._id)})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 이 서적에서 주요하게 다루는 스킬을 선택하세요. 개별 학습 내용에서도 추가로 스킬을 연결할 수 있습니다."})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:i||!k,className:"flex-1 flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 rounded-lg transition-colors "+(i||!k?"opacity-50 cursor-not-allowed":""),children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"저장 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{})," 저장"]})}),e.jsx("button",{type:"button",onClick:a,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 rounded-lg transition-colors",children:"취소"})]})]})},De=({chapter:t,onSave:r,onCancel:a,maxOrder:i=0})=>{const[l,o]=n.useState(""),[s,c]=n.useState(0),[d,u]=n.useState(!1);n.useEffect(()=>{t?(o(t.title),c(t.order)):(o(""),c(i))},[t,i]);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"목차 수정":"목차 추가"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(g,{className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),l.trim())try{u(!0),await r({title:l.trim(),order:s})}catch(t){}finally{u(!1)}else alert("목차 제목을 입력해주세요.")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"목차 제목"}),e.jsx("input",{type:"text",id:"title",value:l,onChange:e=>o(e.target.value),placeholder:"목차 제목을 입력하세요",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"순서"}),e.jsx("input",{type:"number",id:"order",value:s,onChange:e=>c(parseInt(e.target.value)||0),min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:d||!l.trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:[e.jsx(b,{}),d?"저장 중...":t?"수정":"추가"]}),e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})};var Me=function(){this.__data__=[],this.size=0};var Re=function(e,t){return e===t||e!=e&&t!=t},Fe=Re;var Be=function(e,t){for(var r=e.length;r--;)if(Fe(e[r][0],t))return r;return-1},Ue=Be,ze=Array.prototype.splice;var He=Be;var Ke=Be;var Je=Be;var Ve=Me,Ge=function(e){var t=this.__data__,r=Ue(t,e);return!(r<0)&&(r==t.length-1?t.pop():ze.call(t,r,1),--this.size,!0)},$e=function(e){var t=this.__data__,r=He(t,e);return r<0?void 0:t[r][1]},We=function(e){return Ke(this.__data__,e)>-1},Ze=function(e,t){var r=this.__data__,a=Je(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this};function Ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Ye.prototype.clear=Ve,Ye.prototype.delete=Ge,Ye.prototype.get=$e,Ye.prototype.has=We,Ye.prototype.set=Ze;var Xe=Ye,Qe=Xe;var et=function(){this.__data__=new Qe,this.size=0};var tt=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r};var rt=function(e){return this.__data__.get(e)};var at=function(e){return this.__data__.has(e)},nt="object"==typeof i&&i&&i.Object===Object&&i,it=nt,lt="object"==typeof self&&self&&self.Object===Object&&self,ot=it||lt||Function("return this")(),st=ot.Symbol,ct=st,dt=Object.prototype,ut=dt.hasOwnProperty,ht=dt.toString,pt=ct?ct.toStringTag:void 0;var ft=function(e){var t=ut.call(e,pt),r=e[pt];try{e[pt]=void 0;var a=!0}catch(i){}var n=ht.call(e);return a&&(t?e[pt]=r:delete e[pt]),n},gt=Object.prototype.toString;var yt=ft,bt=function(e){return gt.call(e)},xt=st?st.toStringTag:void 0;var mt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":xt&&xt in Object(e)?yt(e):bt(e)};var vt=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},kt=mt,jt=vt;var wt,Nt=function(e){if(!jt(e))return!1;var t=kt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},_t=ot["__core-js_shared__"],Ct=(wt=/[^.]+$/.exec(_t&&_t.keys&&_t.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var Ot=function(e){return!!Ct&&Ct in e},Et=Function.prototype.toString;var St=function(e){if(null!=e){try{return Et.call(e)}catch(t){}try{return e+""}catch(t){}}return""},At=Nt,Tt=Ot,Pt=vt,Lt=St,It=/^\[object .+?Constructor\]$/,qt=Function.prototype,Dt=Object.prototype,Mt=qt.toString,Rt=Dt.hasOwnProperty,Ft=RegExp("^"+Mt.call(Rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Bt=function(e){return!(!Pt(e)||Tt(e))&&(At(e)?Ft:It).test(Lt(e))},Ut=function(e,t){return null==e?void 0:e[t]};var zt=function(e,t){var r=Ut(e,t);return Bt(r)?r:void 0},Ht=zt(ot,"Map"),Kt=zt(Object,"create"),Jt=Kt;var Vt=function(){this.__data__=Jt?Jt(null):{},this.size=0};var Gt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$t=Kt,Wt=Object.prototype.hasOwnProperty;var Zt=function(e){var t=this.__data__;if($t){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Wt.call(t,e)?t[e]:void 0},Yt=Kt,Xt=Object.prototype.hasOwnProperty;var Qt=Kt;var er=Vt,tr=Gt,rr=Zt,ar=function(e){var t=this.__data__;return Yt?void 0!==t[e]:Xt.call(t,e)},nr=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Qt&&void 0===t?"__lodash_hash_undefined__":t,this};function ir(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}ir.prototype.clear=er,ir.prototype.delete=tr,ir.prototype.get=rr,ir.prototype.has=ar,ir.prototype.set=nr;var lr=ir,or=Xe,sr=Ht;var cr=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var dr=function(e,t){var r=e.__data__;return cr(t)?r["string"==typeof t?"string":"hash"]:r.map},ur=dr;var hr=dr;var pr=dr;var fr=dr;var gr=function(){this.size=0,this.__data__={hash:new lr,map:new(sr||or),string:new lr}},yr=function(e){var t=ur(this,e).delete(e);return this.size-=t?1:0,t},br=function(e){return hr(this,e).get(e)},xr=function(e){return pr(this,e).has(e)},mr=function(e,t){var r=fr(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this};function vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}vr.prototype.clear=gr,vr.prototype.delete=yr,vr.prototype.get=br,vr.prototype.has=xr,vr.prototype.set=mr;var kr=vr,jr=Xe,wr=Ht,Nr=kr;var _r=Xe,Cr=et,Or=tt,Er=rt,Sr=at,Ar=function(e,t){var r=this.__data__;if(r instanceof jr){var a=r.__data__;if(!wr||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new Nr(a)}return r.set(e,t),this.size=r.size,this};function Tr(e){var t=this.__data__=new _r(e);this.size=t.size}Tr.prototype.clear=Cr,Tr.prototype.delete=Or,Tr.prototype.get=Er,Tr.prototype.has=Sr,Tr.prototype.set=Ar;var Pr=Tr;var Lr=kr,Ir=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},qr=function(e){return this.__data__.has(e)};function Dr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Lr;++t<r;)this.add(e[t])}Dr.prototype.add=Dr.prototype.push=Ir,Dr.prototype.has=qr;var Mr=Dr,Rr=function(e,t){for(var r=-1,a=null==e?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1},Fr=function(e,t){return e.has(t)};var Br=function(e,t,r,a,n,i){var l=1&r,o=e.length,s=t.length;if(o!=s&&!(l&&s>o))return!1;var c=i.get(e),d=i.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,p=2&r?new Mr:void 0;for(i.set(e,t),i.set(t,e);++u<o;){var f=e[u],g=t[u];if(a)var y=l?a(g,f,u,t,e,i):a(f,g,u,e,t,i);if(void 0!==y){if(y)continue;h=!1;break}if(p){if(!Rr(t,function(e,t){if(!Fr(p,t)&&(f===e||n(f,e,r,a,i)))return p.push(t)})){h=!1;break}}else if(f!==g&&!n(f,g,r,a,i)){h=!1;break}}return i.delete(e),i.delete(t),h};var Ur=ot.Uint8Array,zr=Re,Hr=Br,Kr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,a){r[++t]=[a,e]}),r},Jr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r},Vr=st?st.prototype:void 0,Gr=Vr?Vr.valueOf:void 0;var $r=function(e,t,r,a,n,i,l){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Ur(e),new Ur(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return zr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=Kr;case"[object Set]":var s=1&a;if(o||(o=Jr),e.size!=t.size&&!s)return!1;var c=l.get(e);if(c)return c==t;a|=2,l.set(e,t);var d=Hr(o(e),o(t),a,n,i,l);return l.delete(e),d;case"[object Symbol]":if(Gr)return Gr.call(e)==Gr.call(t)}return!1};var Wr=function(e,t){for(var r=-1,a=t.length,n=e.length;++r<a;)e[n+r]=t[r];return e},Zr=Array.isArray,Yr=Wr,Xr=Zr;var Qr=function(e,t,r){var a=t(e);return Xr(e)?a:Yr(a,r(e))};var ea=function(e,t){for(var r=-1,a=null==e?0:e.length,n=0,i=[];++r<a;){var l=e[r];t(l,r,e)&&(i[n++]=l)}return i},ta=function(){return[]},ra=Object.prototype.propertyIsEnumerable,aa=Object.getOwnPropertySymbols,na=aa?function(e){return null==e?[]:(e=Object(e),ea(aa(e),function(t){return ra.call(e,t)}))}:ta;var ia=function(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a};var la=function(e){return null!=e&&"object"==typeof e},oa=mt,sa=la;var ca,da,ua,ha,pa,fa,ga,ya,ba=function(e){return sa(e)&&"[object Arguments]"==oa(e)},xa=la,ma=Object.prototype,va=ma.hasOwnProperty,ka=ma.propertyIsEnumerable,ja=ba(function(){return arguments}())?ba:function(e){return xa(e)&&va.call(e,"callee")&&!ka.call(e,"callee")},wa={exports:{}};ca=wa,ua=ot,ha=function(){return!1},pa=(da=wa.exports)&&!da.nodeType&&da,fa=pa&&ca&&!ca.nodeType&&ca,ga=fa&&fa.exports===pa?ua.Buffer:void 0,ya=(ga?ga.isBuffer:void 0)||ha,ca.exports=ya;var Na=wa.exports,_a=/^(?:0|[1-9]\d*)$/;var Ca=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&_a.test(e))&&e>-1&&e%1==0&&e<t};var Oa=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ea=mt,Sa=Oa,Aa=la,Ta={};Ta["[object Float32Array]"]=Ta["[object Float64Array]"]=Ta["[object Int8Array]"]=Ta["[object Int16Array]"]=Ta["[object Int32Array]"]=Ta["[object Uint8Array]"]=Ta["[object Uint8ClampedArray]"]=Ta["[object Uint16Array]"]=Ta["[object Uint32Array]"]=!0,Ta["[object Arguments]"]=Ta["[object Array]"]=Ta["[object ArrayBuffer]"]=Ta["[object Boolean]"]=Ta["[object DataView]"]=Ta["[object Date]"]=Ta["[object Error]"]=Ta["[object Function]"]=Ta["[object Map]"]=Ta["[object Number]"]=Ta["[object Object]"]=Ta["[object RegExp]"]=Ta["[object Set]"]=Ta["[object String]"]=Ta["[object WeakMap]"]=!1;var Pa=function(e){return Aa(e)&&Sa(e.length)&&!!Ta[Ea(e)]};var La=function(e){return function(t){return e(t)}},Ia={exports:{}};!function(e,t){var r=nt,a=t&&!t.nodeType&&t,n=a&&e&&!e.nodeType&&e,i=n&&n.exports===a&&r.process,l=function(){try{var e=n&&n.require&&n.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(t){}}();e.exports=l}(Ia,Ia.exports);var qa=Ia.exports,Da=Pa,Ma=La,Ra=qa&&qa.isTypedArray,Fa=Ra?Ma(Ra):Da,Ba=ia,Ua=ja,za=Zr,Ha=Na,Ka=Ca,Ja=Fa,Va=Object.prototype.hasOwnProperty;var Ga=function(e,t){var r=za(e),a=!r&&Ua(e),n=!r&&!a&&Ha(e),i=!r&&!a&&!n&&Ja(e),l=r||a||n||i,o=l?Ba(e.length,String):[],s=o.length;for(var c in e)!t&&!Va.call(e,c)||l&&("length"==c||n&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ka(c,s))||o.push(c);return o},$a=Object.prototype;var Wa=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||$a)};var Za=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),Ya=Wa,Xa=Za,Qa=Object.prototype.hasOwnProperty;var en=Nt,tn=Oa;var rn=Ga,an=function(e){if(!Ya(e))return Xa(e);var t=[];for(var r in Object(e))Qa.call(e,r)&&"constructor"!=r&&t.push(r);return t},nn=function(e){return null!=e&&tn(e.length)&&!en(e)};var ln=Qr,on=na,sn=function(e){return nn(e)?rn(e):an(e)};var cn=function(e){return ln(e,sn,on)},dn=Object.prototype.hasOwnProperty;var un=function(e,t,r,a,n,i){var l=1&r,o=cn(e),s=o.length;if(s!=cn(t).length&&!l)return!1;for(var c=s;c--;){var d=o[c];if(!(l?d in t:dn.call(t,d)))return!1}var u=i.get(e),h=i.get(t);if(u&&h)return u==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=l;++c<s;){var g=e[d=o[c]],y=t[d];if(a)var b=l?a(y,g,d,t,e,i):a(g,y,d,e,t,i);if(!(void 0===b?g===y||n(g,y,r,a,i):b)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var x=e.constructor,m=t.constructor;x==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof m&&m instanceof m||(p=!1)}return i.delete(e),i.delete(t),p},hn=zt(ot,"DataView"),pn=Ht,fn=zt(ot,"Promise"),gn=zt(ot,"Set"),yn=zt(ot,"WeakMap"),bn=mt,xn=St,mn="[object Map]",vn="[object Promise]",kn="[object Set]",jn="[object WeakMap]",wn="[object DataView]",Nn=xn(hn),_n=xn(pn),Cn=xn(fn),On=xn(gn),En=xn(yn),Sn=bn;(hn&&Sn(new hn(new ArrayBuffer(1)))!=wn||pn&&Sn(new pn)!=mn||fn&&Sn(fn.resolve())!=vn||gn&&Sn(new gn)!=kn||yn&&Sn(new yn)!=jn)&&(Sn=function(e){var t=bn(e),r="[object Object]"==t?e.constructor:void 0,a=r?xn(r):"";if(a)switch(a){case Nn:return wn;case _n:return mn;case Cn:return vn;case On:return kn;case En:return jn}return t});var An=Pr,Tn=Br,Pn=$r,Ln=un,In=Sn,qn=Zr,Dn=Na,Mn=Fa,Rn="[object Arguments]",Fn="[object Array]",Bn="[object Object]",Un=Object.prototype.hasOwnProperty;var zn=function(e,t,r,a,n,i){var l=qn(e),o=qn(t),s=l?Fn:In(e),c=o?Fn:In(t),d=(s=s==Rn?Bn:s)==Bn,u=(c=c==Rn?Bn:c)==Bn,h=s==c;if(h&&Dn(e)){if(!Dn(t))return!1;l=!0,d=!1}if(h&&!d)return i||(i=new An),l||Mn(e)?Tn(e,t,r,a,n,i):Pn(e,t,s,r,a,n,i);if(!(1&r)){var p=d&&Un.call(e,"__wrapped__"),f=u&&Un.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,y=f?t.value():t;return i||(i=new An),n(g,y,r,a,i)}}return!!h&&(i||(i=new An),Ln(e,t,r,a,n,i))},Hn=la;var Kn=function e(t,r,a,n,i){return t===r||(null==t||null==r||!Hn(t)&&!Hn(r)?t!=t&&r!=r:zn(t,r,a,n,e,i))},Jn=Kn;var Vn,Gn=function(e,t){return Jn(e,t)},$n={exports:{}};"undefined"!=typeof self&&self,Vn=function(){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),n=r(18),i=r(19),l=r(45),o=r(46),s=r(47),c=r(48),d=r(49),u=r(12),h=r(32),p=r(33),f=r(31),g=r(1),y={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:a.default,Format:n.default,Leaf:i.default,Embed:c.default,Scroll:l.default,Block:s.default,Inline:o.default,Text:d.default,Attributor:{Attribute:u.default,Class:h.default,Style:p.default,Store:f.default}};t.default=y},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return n(t,e),t}(Error);t.ParchmentError=i;var l,o,s={},c={},d={},u={};function h(e,t){var r;if(void 0===t&&(t=l.ANY),"string"==typeof e)r=u[e]||s[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=u.text;else if("number"==typeof e)e&l.LEVEL&l.BLOCK?r=u.block:e&l.LEVEL&l.INLINE&&(r=u.inline);else if(e instanceof HTMLElement){var a=(e.getAttribute("class")||"").split(/\s+/);for(var n in a)if(r=c[a[n]])break;r=r||d[e.tagName]}return null==r?null:t&l.LEVEL&r.scope&&t&l.TYPE&r.scope?r:null}t.DATA_KEY="__blot",(o=l=t.Scope||(t.Scope={}))[o.TYPE=3]="TYPE",o[o.LEVEL=12]="LEVEL",o[o.ATTRIBUTE=13]="ATTRIBUTE",o[o.BLOT=14]="BLOT",o[o.INLINE=7]="INLINE",o[o.BLOCK=11]="BLOCK",o[o.BLOCK_BLOT=10]="BLOCK_BLOT",o[o.INLINE_BLOT=6]="INLINE_BLOT",o[o.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",o[o.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",o[o.ANY=15]="ANY",t.create=function(e,t){var r=h(e);if(null==r)throw new i("Unable to create "+e+" blot");var a=r,n=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:a.create(t);return new a(n,t)},t.find=function e(r,a){return void 0===a&&(a=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:a?e(r.parentNode,a):null},t.query=h,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(t){return e(t)});var a=t[0];if("string"!=typeof a.blotName&&"string"!=typeof a.attrName)throw new i("Invalid definition");if("abstract"===a.blotName)throw new i("Cannot register abstract class");return u[a.blotName||a.attrName]=a,"string"==typeof a.keyName?s[a.keyName]=a:(null!=a.className&&(c[a.className]=a),null!=a.tagName&&(Array.isArray(a.tagName)?a.tagName=a.tagName.map(function(e){return e.toUpperCase()}):a.tagName=a.tagName.toUpperCase(),(Array.isArray(a.tagName)?a.tagName:[a.tagName]).forEach(function(e){null!=d[e]&&null!=a.className||(d[e]=a)}))),a}},function(e,t,r){var a=r(51),n=r(11),i=r(3),l=r(20),o=String.fromCharCode(0),s=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};s.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},s.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},s.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},s.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=i(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(n(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},s.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},s.prototype.filter=function(e){return this.ops.filter(e)},s.prototype.forEach=function(e){this.ops.forEach(e)},s.prototype.map=function(e){return this.ops.map(e)},s.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(a){(e(a)?t:r).push(a)}),[t,r]},s.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},s.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+l.length(t):t.delete?e-t.delete:e},0)},s.prototype.length=function(){return this.reduce(function(e,t){return e+l.length(t)},0)},s.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],a=l.iterator(this.ops),n=0;n<t&&a.hasNext();){var i;n<e?i=a.next(e-n):(i=a.next(t-n),r.push(i)),n+=l.length(i)}return new s(r)},s.prototype.compose=function(e){var t=l.iterator(this.ops),r=l.iterator(e.ops),a=[],i=r.peek();if(null!=i&&"number"==typeof i.retain&&null==i.attributes){for(var o=i.retain;"insert"===t.peekType()&&t.peekLength()<=o;)o-=t.peekLength(),a.push(t.next());i.retain-o>0&&r.next(i.retain-o)}for(var c=new s(a);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var d=Math.min(t.peekLength(),r.peekLength()),u=t.next(d),h=r.next(d);if("number"==typeof h.retain){var p={};"number"==typeof u.retain?p.retain=d:p.insert=u.insert;var f=l.attributes.compose(u.attributes,h.attributes,"number"==typeof u.retain);if(f&&(p.attributes=f),c.push(p),!r.hasNext()&&n(c.ops[c.ops.length-1],p)){var g=new s(t.rest());return c.concat(g).chop()}}else"number"==typeof h.delete&&"number"==typeof u.retain&&c.push(h)}return c.chop()},s.prototype.concat=function(e){var t=new s(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},s.prototype.diff=function(e,t){if(this.ops===e.ops)return new s;var r=[this,e].map(function(t){return t.map(function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:o;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),i=new s,c=a(r[0],r[1],t),d=l.iterator(this.ops),u=l.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case a.INSERT:r=Math.min(u.peekLength(),t),i.push(u.next(r));break;case a.DELETE:r=Math.min(t,d.peekLength()),d.next(r),i.delete(r);break;case a.EQUAL:r=Math.min(d.peekLength(),u.peekLength(),t);var o=d.next(r),s=u.next(r);n(o.insert,s.insert)?i.retain(r,l.attributes.diff(o.attributes,s.attributes)):i.push(s).delete(r)}t-=r}}),i.chop()},s.prototype.eachLine=function(e,t){t=t||"\n";for(var r=l.iterator(this.ops),a=new s,n=0;r.hasNext();){if("insert"!==r.peekType())return;var i=r.peek(),o=l.length(i)-r.peekLength(),c="string"==typeof i.insert?i.insert.indexOf(t,o)-o:-1;if(c<0)a.push(r.next());else if(c>0)a.push(r.next(c));else{if(!1===e(a,r.next(1).attributes||{},n))return;n+=1,a=new s}}a.length()>0&&e(a,{},n)},s.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=l.iterator(this.ops),a=l.iterator(e.ops),n=new s;r.hasNext()||a.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===a.peekType())if("insert"===a.peekType())n.push(a.next());else{var i=Math.min(r.peekLength(),a.peekLength()),o=r.next(i),c=a.next(i);if(o.delete)continue;c.delete?n.push(c):n.retain(i,l.attributes.transform(o.attributes,c.attributes,t))}else n.retain(l.length(r.next()));return n.chop()},s.prototype.transformPosition=function(e,t){t=!!t;for(var r=l.iterator(this.ops),a=0;r.hasNext()&&a<=e;){var n=r.peekLength(),i=r.peekType();r.next(),"delete"!==i?("insert"===i&&(a<e||!t)&&(e+=n),a+=n):e-=Math.min(n,e-a)}return e},e.exports=s},function(e,t){var r=Object.prototype.hasOwnProperty,a=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,l=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===a.call(e)},o=function(e){if(!e||"[object Object]"!==a.call(e))return!1;var t,n=r.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;for(t in e);return void 0===t||r.call(e,t)},s=function(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(i)return i(e,t).value}return e[t]};e.exports=function e(){var t,r,a,n,i,d,u=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"==typeof u&&(f=u,u=arguments[1]||{},h=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});h<p;++h)if(null!=(t=arguments[h]))for(r in t)a=c(u,r),u!==(n=c(t,r))&&(f&&n&&(o(n)||(i=l(n)))?(i?(i=!1,d=a&&l(a)?a:[]):d=a&&o(a)?a:{},s(u,{name:r,newValue:e(f,d,n)})):void 0!==n&&s(u,{name:r,newValue:n}));return u}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=u(r(3)),l=u(r(2)),o=u(r(0)),s=u(r(16)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),a(t,[{key:"attach",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new o.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new l.default).insert(this.value(),(0,i.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=o.default.query(e,o.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,a){this.format(r,a)}},{key:"insertAt",value:function(e,r,a){if("string"==typeof r&&r.endsWith("\n")){var i=o.default.create(y.blotName);this.parent.insertBefore(i,0===e?this:this.next),i.insertAt(0,r.slice(0,-1))}else n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,a)}}]),t}(o.default.Embed);g.scope=o.default.Scope.BLOCK_BLOT;var y=function(e){function t(e){h(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return f(t,e),a(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(o.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),b(t))},new l.default).insert("\n",b(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,a,i){r<=0||(o.default.query(a,o.default.Scope.BLOCK)?e+r===this.length()&&this.format(a,i):n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),a,i),this.cache={})}},{key:"insertAt",value:function(e,r,a){if(null!=a)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,a);if(0!==r.length){var i=r.split("\n"),l=i.shift();l.length>0&&(e<this.length()-1||null==this.children.tail?n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});var o=this;i.reduce(function(e,t){return(o=o.split(e,!0)).insertAt(0,t),t.length},e+l.length)}}},{key:"insertBefore",value:function(e,r){var a=this.children.head;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),a instanceof s.default&&a.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var a=this.clone();return 0===e?(this.parent.insertBefore(a,this),this):(this.parent.insertBefore(a,this.next),a)}var i=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},i}}]),t}(o.default.Block);function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,i.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:b(e.parent,t))}y.blotName="block",y.tagName="P",y.defaultChild="break",y.allowedChildren=[c.default,o.default.Embed,d.default],t.bubbleFormats=b,t.BlockEmbed=g,t.default=y},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}();r(50);var l=y(r(2)),o=y(r(14)),s=y(r(8)),c=y(r(9)),d=y(r(0)),u=r(15),h=y(u),p=y(r(3)),f=y(r(10)),g=y(r(34));function y(e){return e&&e.__esModule?e:{default:e}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,f.default)("quill"),m=function(){function e(t){var r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=v(t,a),this.container=this.options.container,null==this.container)return x.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new s.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new o.default(this.scroll),this.selection=new h.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(s.default.events.EDITOR_CHANGE,function(e){e===s.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(s.default.events.SCROLL_UPDATE,function(e,t){var a=r.selection.lastRange,n=a&&0===a.length?a.index:void 0;k.call(r,function(){return r.editor.update(null,t,n)},e)});var i=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+n+"<p><br></p></div>");this.setContents(i),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return i(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),f.default.level(e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&x.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var n=e.attrName||e.blotName;"string"==typeof n?this.register("formats/"+n,e,t):Object.keys(e).forEach(function(a){r.register(a,e[a],t)})}else null==this.imports[e]||a||x.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?d.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),i(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var a=this,i=j(e,t,r),l=n(i,4);return e=l[0],t=l[1],r=l[3],k.call(this,function(){return a.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.default.sources.API;return k.call(this,function(){var a=r.getSelection(!0),n=new l.default;if(null==a)return n;if(d.default.query(e,d.default.Scope.BLOCK))n=r.editor.formatLine(a.index,a.length,b({},e,t));else{if(0===a.length)return r.selection.format(e,t),n;n=r.editor.formatText(a.index,a.length,b({},e,t))}return r.setSelection(a,s.default.sources.SILENT),n},a)}},{key:"formatLine",value:function(e,t,r,a,i){var l,o=this,s=j(e,t,r,a,i),c=n(s,4);return e=c[0],t=c[1],l=c[2],i=c[3],k.call(this,function(){return o.editor.formatLine(e,t,l)},i,e,0)}},{key:"formatText",value:function(e,t,r,a,i){var l,o=this,s=j(e,t,r,a,i),c=n(s,4);return e=c[0],t=c[1],l=c[2],i=c[3],k.call(this,function(){return o.editor.formatText(e,t,l)},i,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;r="number"==typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var a=this.container.getBoundingClientRect();return{bottom:r.bottom-a.top,height:r.height,left:r.left-a.left,right:r.right-a.left,top:r.top-a.top,width:r.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),a=n(r,2);return e=a[0],t=a[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),a=n(r,2);return e=a[0],t=a[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,a){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return k.call(this,function(){return n.editor.insertEmbed(t,r,a)},i,t)}},{key:"insertText",value:function(e,t,r,a,i){var l,o=this,s=j(e,0,r,a,i),c=n(s,4);return e=c[0],l=c[2],i=c[3],k.call(this,function(){return o.editor.insertText(e,t,l)},i,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var a=this,i=j(e,t,r),l=n(i,4);return e=l[0],t=l[1],r=l[3],k.call(this,function(){return a.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.sources.API;return k.call(this,function(){e=new l.default(e);var r=t.getLength(),a=t.editor.deleteText(0,r),n=t.editor.applyDelta(e),i=n.ops[n.ops.length-1];return null!=i&&"string"==typeof i.insert&&"\n"===i.insert[i.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),n.delete(1)),a.compose(n)},r)}},{key:"setSelection",value:function(t,r,a){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var i=j(t,r,a),l=n(i,4);t=l[0],r=l[1],a=l[3],this.selection.setRange(new u.Range(t,r),a),a!==s.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.sources.API,r=(new l.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.default.sources.API;return k.call(this,function(){return e=new l.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),e}();function v(e,t){if((t=(0,p.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==m.DEFAULTS.theme){if(t.theme=m.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=g.default;var r=(0,p.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var a=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var r=m.import("modules/"+t);return null==r?x.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,p.default)(!0,{},m.DEFAULTS,{modules:a},r,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e},{}),t}function k(e,t,r,a){if(this.options.strict&&!this.isEnabled()&&t===s.default.sources.USER)return new l.default;var n=null==r?null:this.getSelection(),i=this.editor.delta,o=e();if(null!=n&&(!0===r&&(r=n.index),null==a?n=w(n,o,t):0!==a&&(n=w(n,r,a,t)),this.setSelection(n,s.default.sources.SILENT)),o.length()>0){var c,d,u=[s.default.events.TEXT_CHANGE,o,i,t];(c=this.emitter).emit.apply(c,[s.default.events.EDITOR_CHANGE].concat(u)),t!==s.default.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}return o}function j(e,t,r,n,i){var l={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(i=n,n=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(i=n,n=r,r=t,t=0),"object"===(void 0===r?"undefined":a(r))?(l=r,i=n):"string"==typeof r&&(null!=n?l[r]=n:i=r),[e,t,l,i=i||s.default.sources.API]}function w(e,t,r,a){if(null==e)return null;var i=void 0,o=void 0;if(t instanceof l.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,a!==s.default.sources.USER)}),d=n(c,2);i=d[0],o=d[1]}else{var h=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&a===s.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)}),p=n(h,2);i=p[0],o=p[1]}return new u.Range(i,o-i)}m.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},m.events=s.default.events,m.sources=s.default.sources,m.version="1.3.7",m.imports={delta:l.default,parchment:d.default,"core/module":c.default,"core/theme":g.default},t.expandConfig=v,t.overload=j,t.default=m},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=o(r(7)),l=o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"formatAt",value:function(e,r,a,i){if(t.compare(this.statics.blotName,a)<0&&l.default.query(a,l.default.Scope.BLOT)){var o=this.isolate(e,r);i&&o.wrap(a,i)}else n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,a,i)}},{key:"optimize",value:function(e){if(n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var a=t.order.indexOf(e),n=t.order.indexOf(r);return a>=0||n>=0?a-n:e===r?0:e<r?-1:1}}]),t}(l.default.Inline);s.allowedChildren=[s,l.default.Embed,i.default],s.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(0),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((a=n)&&a.__esModule?a:{default:a}).default.Text);t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=l(r(54));function l(e){return e&&e.__esModule?e:{default:e}}var o=(0,l(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)})})});var s=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",o.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"emit",value:function(){o.log.apply(o,arguments),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];(this.listeners[e.type]||[]).forEach(function(t){var a=t.node,n=t.handler;(e.target===a||a.contains(e.target))&&n.apply(void 0,[e].concat(r))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(i.default);s.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},s.sources={API:"api",SILENT:"silent",USER:"user"},t.default=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};a.DEFAULTS={},t.default=a},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=["error","warn","log","info"],n="warn";function i(e){if(a.indexOf(e)<=a.indexOf(n)){for(var t,r=arguments.length,i=Array(r>1?r-1:0),l=1;l<r;l++)i[l-1]=arguments[l];(t=console)[e].apply(t,i)}}function l(e){return a.reduce(function(t,r){return t[r]=i.bind(console,r,e),t},{})}i.level=l.level=function(e){n=e},t.default=l},function(e,t,r){var a=Array.prototype.slice,n=r(52),i=r(53),l=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,d;if(o(e)||o(t))return!1;if(e.prototype!==t.prototype)return!1;if(i(e))return!!i(t)&&(e=a.call(e),t=a.call(t),l(e,t,r));if(s(e)){if(!s(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=n(e),h=n(t)}catch(p){return!1}if(u.length!=h.length)return!1;for(u.sort(),h.sort(),c=u.length-1;c>=0;c--)if(u[c]!=h[c])return!1;for(c=u.length-1;c>=0;c--)if(d=u[c],!l(e[d],t[d],r))return!1;return typeof e==typeof t}(e,t,r))};function o(e){return null==e}function s(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var n=a.Scope.TYPE&a.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&a.Scope.LEVEL|n:this.scope=a.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=a.query(e,a.Scope.BLOT&(this.scope|a.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=n},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=u(r(2)),o=u(r(0)),s=u(r(4)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(c.default);g.blotName="code",g.tagName="CODE";var y=function(e){function t(){return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),n(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,r){return t.insert(r).insert("\n",e.formats())},new l.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var n=this.descendant(d.default,this.length()-1),l=a(n,1)[0];null!=l&&l.deleteAt(l.length()-1,1),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,a,n){if(0!==r&&null!=o.default.query(a,o.default.Scope.BLOCK)&&(a!==this.statics.blotName||n!==this.statics.formats(this.domNode))){var i=this.newlineIndex(e);if(!(i<0||i>=e+r)){var l=this.newlineIndex(e,!0)+1,s=i-l+1,c=this.isolate(l,s),d=c.next;c.format(a,n),d instanceof t&&d.formatAt(0,e-l+r-s,a,n)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var n=this.descendant(d.default,e),i=a(n,2),l=i[0],o=i[1];l.insertAt(o,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(o.default.create("text","\n")),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=o.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof o.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(s.default);y.blotName="code-block",y.tagName="PRE",y.TAB="  ",t.Code=g,t.default=y},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=b(r(2)),o=b(r(20)),s=b(r(0)),c=b(r(13)),d=b(r(24)),u=r(4),h=b(u),p=b(r(16)),f=b(r(21)),g=b(r(11)),y=b(r(3));function b(e){return e&&e.__esModule?e:{default:e}}var x=/^[ -~]*$/,m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return i(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var r=(0,f.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,f.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var a=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(a,t.attributes)}return e.push(t)},new l.default)}(e)).reduce(function(e,l){var c=l.retain||l.delete||l.insert.length||1,d=l.attributes||{};if(null!=l.insert){if("string"==typeof l.insert){var p=l.insert;p.endsWith("\n")&&r&&(r=!1,p=p.slice(0,-1)),e>=i&&!p.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,p);var f=t.scroll.line(e),g=n(f,2),b=g[0],x=g[1],m=(0,y.default)({},(0,u.bubbleFormats)(b));if(b instanceof h.default){var v=b.descendant(s.default.Leaf,x),k=n(v,1)[0];m=(0,y.default)(m,(0,u.bubbleFormats)(k))}d=o.default.attributes.diff(m,d)||{}}else if("object"===a(l.insert)){var j=Object.keys(l.insert)[0];if(null==j)return e;t.scroll.insertAt(e,j,l.insert[j])}i+=c}return Object.keys(d).forEach(function(r){t.scroll.formatAt(e,c,r,d[r])}),e+c},0),e.reduce(function(e,r){return"number"==typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new l.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(a).forEach(function(n){if(null==r.scroll.whitelist||r.scroll.whitelist[n]){var i=r.scroll.lines(e,Math.max(t,1)),l=t;i.forEach(function(t){var i=t.length();if(t instanceof c.default){var o=e-t.offset(r.scroll),s=t.newlineIndex(o+l)-o+1;t.formatAt(o,s,n,a[n])}else t.format(n,a[n]);l-=i})}}),this.scroll.optimize(),this.update((new l.default).retain(e).retain(t,(0,f.default)(a)))}},{key:"formatText",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(a).forEach(function(n){r.scroll.formatAt(e,t,n,a[n])}),this.update((new l.default).retain(e).retain(t,(0,f.default)(a)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new l.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],a=[];0===t?this.scroll.path(e).forEach(function(e){var t=n(e,1)[0];t instanceof h.default?r.push(t):t instanceof s.default.Leaf&&a.push(t)}):(r=this.scroll.lines(e,t),a=this.scroll.descendants(s.default.Leaf,e,t));var i=[r,a].map(function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=v((0,u.bubbleFormats)(r),t)}return t});return y.default.apply(y.default,i)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new l.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(a).forEach(function(n){r.scroll.formatAt(e,t.length,n,a[n])}),this.update((new l.default).retain(e).insert(t,(0,f.default)(a)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===h.default.blotName&&!(e.children.length>1)&&e.children.head instanceof p.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),a=this.scroll.line(e+t),i=n(a,2),o=i[0],s=i[1],d=0,u=new l.default;null!=o&&(d=o instanceof c.default?o.newlineIndex(s)-s+1:o.length()-s,u=o.delta().slice(s,s+d-1).insert("\n"));var h=this.getContents(e,t+d).diff((new l.default).insert(r).concat(u)),p=(new l.default).retain(e).concat(h);return this.applyDelta(p)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(x)&&s.default.find(t[0].target)){var n=s.default.find(t[0].target),i=(0,u.bubbleFormats)(n),o=n.offset(this.scroll),c=t[0].oldValue.replace(d.default.CONTENTS,""),h=(new l.default).insert(c),p=(new l.default).insert(n.value());e=(new l.default).retain(o).concat(h.diff(p,r)).reduce(function(e,t){return t.insert?e.insert(t.insert,i):e.push(t)},new l.default),this.delta=a.compose(e)}else this.delta=this.getDelta(),e&&(0,g.default)(a.compose(e),this.delta)||(e=a.diff(this.delta,r));return e}}]),e}();function v(e,t){return Object.keys(t).reduce(function(r,a){return null==e[a]||(t[a]===e[a]?r[a]=t[a]:Array.isArray(t[a])?t[a].indexOf(e[a])<0&&(r[a]=t[a].concat([e[a]])):r[a]=[t[a],e[a]]),r},{})}t.default=m},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=c(r(0)),l=c(r(21)),o=c(r(11)),s=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=(0,c(r(10)).default)("quill:selection"),p=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=r},f=function(){function e(t,r){var a=this;u(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=i.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){a.mouseDown||setTimeout(a.update.bind(a,s.default.sources.USER),1)}),this.emitter.on(s.default.events.EDITOR_CHANGE,function(e,t){e===s.default.events.TEXT_CHANGE&&t.length()>0&&a.update(s.default.sources.SILENT)}),this.emitter.on(s.default.events.SCROLL_BEFORE_UPDATE,function(){if(a.hasFocus()){var e=a.getNativeRange();null!=e&&e.start.node!==a.cursor.textNode&&a.emitter.once(s.default.events.SCROLL_UPDATE,function(){try{a.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}})}}),this.emitter.on(s.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var r=t.range,n=r.startNode,i=r.startOffset,l=r.endNode,o=r.endOffset;a.setNativeRange(n,i,l,o)}}),this.update(s.default.sources.SILENT)}return n(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(s.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!i.default.query(e,i.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var a=i.default.find(r.start.node,!1);if(null==a)return;if(a instanceof i.default.Leaf){var n=a.split(r.start.offset);a.parent.insertBefore(this.cursor,n)}else a.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var n=void 0,i=this.scroll.leaf(e),l=a(i,2),o=l[0],s=l[1];if(null==o)return null;var c=o.position(s,!0),d=a(c,2);n=d[0],s=d[1];var u=document.createRange();if(t>0){u.setStart(n,s);var h=this.scroll.leaf(e+t),p=a(h,2);if(o=p[0],s=p[1],null==o)return null;var f=o.position(s,!0),g=a(f,2);return n=g[0],s=g[1],u.setEnd(n,s),u.getBoundingClientRect()}var y="left",b=void 0;return n instanceof Text?(s<n.data.length?(u.setStart(n,s),u.setEnd(n,s+1)):(u.setStart(n,s-1),u.setEnd(n,s),y="right"),b=u.getBoundingClientRect()):(b=o.domNode.getBoundingClientRect(),s>0&&(y="right")),{bottom:b.top+b.height,height:b.height,left:b[y],right:b[y],top:b.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return h.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var n=r.map(function(e){var r=a(e,2),n=r[0],l=r[1],o=i.default.find(n,!0),s=o.offset(t.scroll);return 0===l?s:o instanceof i.default.Container?s+o.length():s+o.index(n,l)}),l=Math.min(Math.max.apply(Math,d(n)),this.scroll.length()-1),o=Math.min.apply(Math,[l].concat(d(n)));return new p(o,l-o)}},{key:"normalizeNative",value:function(e){if(!g(this.root,e.startContainer)||!e.collapsed&&!g(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],n=[],i=this.scroll.length();return r.forEach(function(e,r){e=Math.min(i-1,e);var l,o=t.scroll.leaf(e),s=a(o,2),c=s[0],d=s[1],u=c.position(d,0!==r),h=a(u,2);l=h[0],d=h[1],n.push(l,d)}),n.length<2&&(n=n.concat(n)),n}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var n=this.scroll.length()-1,i=this.scroll.line(Math.min(t.index,n)),l=a(i,1)[0],o=l;if(t.length>0){var s=this.scroll.line(Math.min(t.index+t.length,n));o=a(s,1)[0]}if(null!=l&&null!=o){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(h.info("setNativeRange",e,t,r,a),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var i=document.getSelection();if(null!=i)if(null!=e){this.hasFocus()||this.root.focus();var l=(this.getNativeRange()||{}).native;if(null==l||n||e!==l.startContainer||t!==l.startOffset||r!==l.endContainer||a!==l.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(a=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var o=document.createRange();o.setStart(e,t),o.setEnd(r,a),i.removeAllRanges(),i.addRange(o)}}else i.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.default.sources.API;if("string"==typeof t&&(r=t,t=!1),h.info("setRange",e),null!=e){var a=this.rangeToNative(e);this.setNativeRange.apply(this,d(a).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.default.sources.USER,t=this.lastRange,r=this.getRange(),n=a(r,2),i=n[0],c=n[1];if(this.lastRange=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,o.default)(t,this.lastRange)){var d;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var u,h=[s.default.events.SELECTION_CHANGE,(0,l.default)(this.lastRange),(0,l.default)(t),e];(d=this.emitter).emit.apply(d,[s.default.events.EDITOR_CHANGE].concat(h)),e!==s.default.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}}}]),e}();function g(e,t){try{t.parentNode}catch(r){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=p,t.default=f},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"insertInto",value:function(e,r){0===e.children.length?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((a=l)&&a.__esModule?a:{default:a}).default.Embed);o.blotName="break",o.tagName="BR",t.default=o},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(44),l=r(30),o=r(1),s=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return n(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var r=c(t);e.insertBefore(r,e.children.head||void 0)}catch(a){if(a instanceof o.ParchmentError)return;throw a}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},t.prototype.descendant=function(e,r){var a=this.children.find(r),n=a[0],i=a[1];return null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e?[n,i]:n instanceof t?n.descendant(e,i):[null,-1]},t.prototype.descendants=function(e,r,a){void 0===r&&(r=0),void 0===a&&(a=Number.MAX_VALUE);var n=[],i=a;return this.children.forEachAt(r,a,function(r,a,l){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&n.push(r),r instanceof t&&(n=n.concat(r.descendants(e,a,i))),i-=l}),n},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,a){this.children.forEachAt(e,t,function(e,t,n){e.formatAt(t,n,r,a)})},t.prototype.insertAt=function(e,t,r){var a=this.children.find(e),n=a[0],i=a[1];if(n)n.insertAt(i,t,r);else{var l=null==r?o.create("text",t):o.create(t,r);this.appendChild(l)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new o.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(r){e.insertBefore(r,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=o.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var a=this.children.find(e,r),n=a[0],i=a[1],l=[[this,e]];return n instanceof t?l.concat(n.path(i,r)):(null!=n&&l.push([n,i]),l)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),function(e,a,n){e=e.split(a,t),r.appendChild(e)}),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,a=[],n=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(a.push.apply(a,e.addedNodes),n.push.apply(n,e.removedNodes))}),n.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=o.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}}),a.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=o.find(e.nextSibling));var a=c(e);a.next==t&&null!=a.next||(null!=a.parent&&a.parent.removeChild(r),r.insertBefore(a,t||void 0))})},t}(l.default);function c(e){var t=o.find(e);if(null==t)try{t=o.create(e)}catch(r){t=o.create(o.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=s},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(12),l=r(31),o=r(17),s=r(1),c=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new l.default(r.domNode),r}return n(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=s.query(e);r instanceof i.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var a=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(a),a},t.prototype.update=function(t,r){var a=this;e.prototype.update.call(this,t,r),t.some(function(e){return e.target===a.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(r,a){var n=e.prototype.wrap.call(this,r,a);return n instanceof t&&n.statics.scope===this.statics.scope&&this.attributes.move(n),n},t}(o.default);t.default=c},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(30),l=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=l.Scope.INLINE_BLOT,t}(i.default);t.default=o},function(e,t,r){var a=r(11),n=r(3),i={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var a=n(!0,{},t);for(var i in r||(a=Object.keys(a).reduce(function(e,t){return null!=a[t]&&(e[t]=a[t]),e},{})),e)void 0!==e[i]&&void 0===t[i]&&(a[i]=e[i]);return Object.keys(a).length>0?a:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce(function(r,n){return a(e[n],t[n])||(r[n]=void 0===t[n]?null:t[n]),r},{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var a=Object.keys(t).reduce(function(r,a){return void 0===e[a]&&(r[a]=t[a]),r},{});return Object.keys(a).length>0?a:void 0}}},iterator:function(e){return new l(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function l(e){this.ops=e,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,a=i.length(t);if(e>=a-r?(e=a-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var n={};return t.attributes&&(n.attributes=t.attributes),"number"==typeof t.retain?n.retain=e:"string"==typeof t.insert?n.insert=t.insert.substr(r,e):n.insert=t.insert,n}return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?i.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),a=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(a)}return[]},e.exports=i},function(e,t){var r=function(){function e(e,t){return null!=t&&e instanceof t}var t,r,a;try{t=Map}catch(o){t=function(){}}try{r=Set}catch(o){r=function(){}}try{a=Promise}catch(o){a=function(){}}function n(i,o,s,c,d){"object"==typeof o&&(s=o.depth,c=o.prototype,d=o.includeNonEnumerable,o=o.circular);var u=[],h=[],p="undefined"!=typeof Buffer;return void 0===o&&(o=!0),void 0===s&&(s=1/0),function i(s,f){if(null===s)return null;if(0===f)return s;var g,y;if("object"!=typeof s)return s;if(e(s,t))g=new t;else if(e(s,r))g=new r;else if(e(s,a))g=new a(function(e,t){s.then(function(t){e(i(t,f-1))},function(e){t(i(e,f-1))})});else if(n.__isArray(s))g=[];else if(n.__isRegExp(s))g=new RegExp(s.source,l(s)),s.lastIndex&&(g.lastIndex=s.lastIndex);else if(n.__isDate(s))g=new Date(s.getTime());else{if(p&&Buffer.isBuffer(s))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(s.length):new Buffer(s.length),s.copy(g),g;e(s,Error)?g=Object.create(s):void 0===c?(y=Object.getPrototypeOf(s),g=Object.create(y)):(g=Object.create(c),y=c)}if(o){var b=u.indexOf(s);if(-1!=b)return h[b];u.push(s),h.push(g)}for(var x in e(s,t)&&s.forEach(function(e,t){var r=i(t,f-1),a=i(e,f-1);g.set(r,a)}),e(s,r)&&s.forEach(function(e){var t=i(e,f-1);g.add(t)}),s){var m;y&&(m=Object.getOwnPropertyDescriptor(y,x)),m&&null==m.set||(g[x]=i(s[x],f-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(s);for(x=0;x<v.length;x++){var k=v[x];(!(w=Object.getOwnPropertyDescriptor(s,k))||w.enumerable||d)&&(g[k]=i(s[k],f-1),w.enumerable||Object.defineProperty(g,k,{enumerable:!1}))}}if(d){var j=Object.getOwnPropertyNames(s);for(x=0;x<j.length;x++){var w,N=j[x];(w=Object.getOwnPropertyDescriptor(s,N))&&w.enumerable||(g[N]=i(s[N],f-1),Object.defineProperty(g,N,{enumerable:!1}))}}return g}(i,s)}function i(e){return Object.prototype.toString.call(e)}function l(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},n.__objToStr=i,n.__isDate=function(e){return"object"==typeof e&&"[object Date]"===i(e)},n.__isArray=function(e){return"object"==typeof e&&"[object Array]"===i(e)},n.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===i(e)},n.__getRegExpFlags=l,n}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=p(r(0)),o=p(r(8)),s=r(4),c=p(s),d=p(r(16)),u=p(r(13)),h=p(r(25));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof c.default||e instanceof s.BlockEmbed}var g=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.emitter=r.emitter,Array.isArray(r.whitelist)&&(a.whitelist=r.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),a.domNode.addEventListener("DOMNodeInserted",function(){}),a.optimize(),a.enable(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var n=this.line(e),l=a(n,2),o=l[0],c=l[1],h=this.line(e+r),p=a(h,1)[0];if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=p&&o!==p&&c>0){if(o instanceof s.BlockEmbed||p instanceof s.BlockEmbed)return void this.optimize();if(o instanceof u.default){var f=o.newlineIndex(o.length(),!0);if(f>-1&&(o=o.split(f+1))===p)return void this.optimize()}else if(p instanceof u.default){var g=p.newlineIndex(0);g>-1&&p.split(g+1)}var y=p.children.head instanceof d.default?null:p.children.head;o.moveChildren(p,y),o.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,a,n){(null==this.whitelist||this.whitelist[a])&&(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,a,n),this.optimize())}},{key:"insertAt",value:function(e,r,a){if(null==a||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==a||null==l.default.query(r,l.default.Scope.BLOCK)){var n=l.default.create(this.statics.defaultChild);this.appendChild(n),null==a&&r.endsWith("\n")&&(r=r.slice(0,-1)),n.insertAt(0,r,a)}else{var o=l.default.create(r,a);this.appendChild(o)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,a);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===l.default.Scope.INLINE_BLOT){var a=l.default.create(this.statics.defaultChild);a.appendChild(e),e=a}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){return function e(t,r,a){var n=[],i=a;return t.children.forEachAt(r,a,function(t,r,a){f(t)?n.push(t):t instanceof l.default.Container&&(n=n.concat(e(t,r,i))),i-=a}),n}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=o.default.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,r,e),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(o.default.events.SCROLL_UPDATE,r,e)}}}]),t}(l.default.Scroll);g.blotName="scroll",g.className="ql-editor",g.tagName="DIV",g.defaultChild="block",g.allowedChildren=[c.default,s.BlockEmbed,h.default],t.default=g},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=g(r(21)),o=g(r(11)),s=g(r(3)),c=g(r(2)),d=g(r(20)),u=g(r(0)),h=g(r(5)),p=g(r(10)),f=g(r(9));function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=(0,p.default)("quill:keyboard"),x=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",m=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.bindings={},Object.keys(a.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&a.options.bindings[t]&&a.addBinding(a.options.bindings[t])}),a.addBinding({key:t.keys.ENTER,shiftKey:null},N),a.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(a.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},k),a.addBinding({key:t.keys.DELETE},{collapsed:!0},j)):(a.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},k),a.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),a.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},w),a.addBinding({key:t.keys.DELETE},{collapsed:!1},w),a.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},k),a.listen(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"match",value:function(e,t){return t=O(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(r){return!!t[r]!==e[r]&&null!==t[r]})&&t.key===(e.which||e.keyCode)}}]),i(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=O(e);if(null==a||null==a.key)return b.warn("Attempted to add invalid keyboard binding",a);"function"==typeof t&&(t={handler:t}),"function"==typeof r&&(r={handler:r}),a=(0,s.default)(a,t,r),this.bindings[a.key]=this.bindings[a.key]||[],this.bindings[a.key].push(a)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(r){if(!r.defaultPrevented){var i=r.which||r.keyCode,l=(e.bindings[i]||[]).filter(function(e){return t.match(r,e)});if(0!==l.length){var s=e.quill.getSelection();if(null!=s&&e.quill.hasFocus()){var c=e.quill.getLine(s.index),d=n(c,2),h=d[0],p=d[1],f=e.quill.getLeaf(s.index),g=n(f,2),y=g[0],b=g[1],x=0===s.length?[y,b]:e.quill.getLeaf(s.index+s.length),m=n(x,2),v=m[0],k=m[1],j=y instanceof u.default.Text?y.value().slice(0,b):"",w=v instanceof u.default.Text?v.value().slice(k):"",N={collapsed:0===s.length,empty:0===s.length&&h.length()<=1,format:e.quill.getFormat(s),offset:p,prefix:j,suffix:w};l.some(function(t){if(null!=t.collapsed&&t.collapsed!==N.collapsed)return!1;if(null!=t.empty&&t.empty!==N.empty)return!1;if(null!=t.offset&&t.offset!==N.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==N.format[e]}))return!1}else if("object"===a(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=N.format[e]:!1===t.format[e]?null==N.format[e]:(0,o.default)(t.format[e],N.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(N.prefix)||null!=t.suffix&&!t.suffix.test(N.suffix)||!0===t.handler.call(e,s,N))})&&r.preventDefault()}}}})}}]),t}(f.default);function v(e,t){var r,a=e===m.keys.LEFT?"prefix":"suffix";return y(r={key:e,shiftKey:t,altKey:null},a,/^$/),y(r,"handler",function(r){var a=r.index;e===m.keys.RIGHT&&(a+=r.length+1);var i=this.quill.getLeaf(a);return!(n(i,1)[0]instanceof u.default.Embed&&(e===m.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,h.default.sources.USER):this.quill.setSelection(r.index-1,h.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,h.default.sources.USER):this.quill.setSelection(r.index+r.length+1,h.default.sources.USER),1))}),r}function k(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),a=n(r,1)[0],i={};if(0===t.offset){var l=this.quill.getLine(e.index-1),o=n(l,1)[0];if(null!=o&&o.length()>1){var s=a.formats(),c=this.quill.getFormat(e.index-1,1);i=d.default.attributes.diff(s,c)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,h.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(e.index-u,u,i,h.default.sources.USER),this.quill.focus()}}function j(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var a={},i=0,l=this.quill.getLine(e.index),o=n(l,1)[0];if(t.offset>=o.length()-1){var s=this.quill.getLine(e.index+1),c=n(s,1)[0];if(c){var u=o.formats(),p=this.quill.getFormat(e.index,1);a=d.default.attributes.diff(u,p)||{},i=c.length()}}this.quill.deleteText(e.index,r,h.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(e.index+i-1,r,a,h.default.sources.USER)}}function w(e){var t=this.quill.getLines(e),r={};if(t.length>1){var a=t[0].formats(),n=t[t.length-1].formats();r=d.default.attributes.diff(n,a)||{}}this.quill.deleteText(e,h.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,h.default.sources.USER),this.quill.setSelection(e.index,h.default.sources.SILENT),this.quill.focus()}function N(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var a=Object.keys(t.format).reduce(function(e,r){return u.default.query(r,u.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e},{});this.quill.insertText(e.index,"\n",a,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==a[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],h.default.sources.USER))})}function _(e){return{key:m.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=u.default.query("code-block"),a=t.index,i=t.length,l=this.quill.scroll.descendant(r,a),o=n(l,2),s=o[0],c=o[1];if(null!=s){var d=this.quill.getIndex(s),p=s.newlineIndex(c,!0)+1,f=s.newlineIndex(d+c+i),g=s.domNode.textContent.slice(p,f).split("\n");c=0,g.forEach(function(t,n){e?(s.insertAt(p+c,r.TAB),c+=r.TAB.length,0===n?a+=r.TAB.length:i+=r.TAB.length):t.startsWith(r.TAB)&&(s.deleteAt(p+c,r.TAB.length),c-=r.TAB.length,0===n?a-=r.TAB.length:i-=r.TAB.length),c+=t.length+1}),this.quill.update(h.default.sources.USER),this.quill.setSelection(a,i,h.default.sources.SILENT)}}}}function C(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],h.default.sources.USER)}}}function O(e){if("string"==typeof e||"number"==typeof e)return O({key:e});if("object"===(void 0===e?"undefined":a(e))&&(e=(0,l.default)(e,!1)),"string"==typeof e.key)if(null!=m.keys[e.key.toUpperCase()])e.key=m.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[x]=e.shortKey,delete e.shortKey),e}m.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},m.DEFAULTS={bindings:{bold:C("bold"),italic:C("italic"),underline:C("underline"),indent:{key:m.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",h.default.sources.USER)}},outdent:{key:m.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",h.default.sources.USER)}},"outdent backspace":{key:m.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",h.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,h.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:m.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,h.default.sources.USER)}},tab:{key:m.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,h.default.sources.SILENT)}},"list empty enter":{key:m.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,h.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,h.default.sources.USER)}},"checklist enter":{key:m.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=n(t,2),a=r[0],i=r[1],l=(0,s.default)({},a.formats(),{list:"checked"}),o=(new c.default).retain(e.index).insert("\n",l).retain(a.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:m.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),a=n(r,2),i=a[0],l=a[1],o=(new c.default).retain(e.index).insert("\n",t.format).retain(i.length()-l-1).retain(1,{header:null});this.quill.updateContents(o,h.default.sources.USER),this.quill.setSelection(e.index+1,h.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,a=this.quill.getLine(e.index),i=n(a,2),l=i[0],o=i[1];if(o>r)return!0;var s=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(e.index," ",h.default.sources.USER),this.quill.history.cutoff();var d=(new c.default).retain(e.index-o).delete(r+1).retain(l.length()-2-o).retain(1,{list:s});this.quill.updateContents(d,h.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,h.default.sources.SILENT)}},"code exit":{key:m.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=n(t,2),a=r[0],i=r[1],l=(new c.default).retain(e.index+a.length()-i-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(l,h.default.sources.USER)}},"embed left":v(m.keys.LEFT,!1),"embed left shift":v(m.keys.LEFT,!0),"embed right":v(m.keys.RIGHT,!1),"embed right shift":v(m.keys.RIGHT,!0)}},t.default=m,t.SHORTKEY=x},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=s(r(0)),o=s(r(7));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.selection=r,a.textNode=document.createTextNode(t.CONTENTS),a.domNode.appendChild(a.textNode),a._length=0,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"value",value:function(){}}]),i(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var a=this,i=0;null!=a&&a.statics.scope!==l.default.Scope.BLOCK_BLOT;)i+=a.offset(a.parent),a=a.parent;null!=a&&(this._length=t.CONTENTS.length,a.optimize(),a.formatAt(i,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),n=void 0,i=void 0,s=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var c=[e,r.start.offset,r.end.offset];n=c[0],i=c[1],s=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var d=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof o.default?(n=this.next.domNode,this.next.insertAt(0,d),this.textNode.data=t.CONTENTS):(this.textNode.data=d,this.parent.insertBefore(l.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=i){var u=[i,s].map(function(e){return Math.max(0,Math.min(n.data.length,e-1))}),h=a(u,2);return i=h[0],s=h[1],{startNode:n,startOffset:i,endNode:n,endOffset:s}}}}},{key:"update",value:function(e,t){var r=this;if(e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})){var a=this.restore();a&&(t.range=a)}}},{key:"value",value:function(){return""}}]),t}(l.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=l(r(0)),n=r(4),i=l(n);function l(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.default.Container);o.allowedChildren=[i.default,n.BlockEmbed,o],t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(0),o=(a=l)&&a.__esModule?a:{default:a},s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"value",value:function(e){var r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):r}}]),t}(o.default.Attributor.Style),c=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),d=new s("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=s,t.ColorClass=c,t.ColorStyle=d},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return s(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((a=l)&&a.__esModule?a:{default:a}).default);function s(e,t){var r=document.createElement("a");r.href=e;var a=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(a)>-1}o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=o,t.sanitize=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=o(r(23)),l=o(r(107));function o(e){return e&&e.__esModule?e:{default:e}}var s=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var d=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case i.default.keys.ENTER:r.togglePicker();break;case i.default.keys.ESCAPE:r.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return n(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case i.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case i.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=l.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+s,s+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(r){var a=e.buildItem(r);t.appendChild(a),!0===r.selected&&e.selectItem(a)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":a(Event))){var n=document.createEvent("Event");n.initEvent("change",!0,!0),this.select.dispatchEvent(n)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=d},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=b(r(0)),n=b(r(5)),i=r(4),l=b(i),o=b(r(16)),s=b(r(25)),c=b(r(24)),d=b(r(35)),u=b(r(6)),h=b(r(22)),p=b(r(7)),f=b(r(55)),g=b(r(42)),y=b(r(23));function b(e){return e&&e.__esModule?e:{default:e}}n.default.register({"blots/block":l.default,"blots/block/embed":i.BlockEmbed,"blots/break":o.default,"blots/container":s.default,"blots/cursor":c.default,"blots/embed":d.default,"blots/inline":u.default,"blots/scroll":h.default,"blots/text":p.default,"modules/clipboard":f.default,"modules/history":g.default,"modules/keyboard":y.default}),a.default.register(l.default,o.default,c.default,u.default,h.default,p.default),t.default=n.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(){function e(e){this.domNode=e,this.domNode[a.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new a.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return a.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[a.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,n){var i=this.isolate(e,t);if(null!=a.query(r,a.Scope.BLOT)&&n)i.wrap(r,n);else if(null!=a.query(r,a.Scope.ATTRIBUTE)){var l=a.create(this.statics.scope);i.wrap(l),l.format(r,n)}},e.prototype.insertAt=function(e,t,r){var n=null==r?a.create("text",t):a.create(t,r),i=this.split(e);this.parent.insertBefore(n,i)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[a.DATA_KEY]&&delete this.domNode[a.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"==typeof e?a.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"==typeof e?a.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=n},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=r(12),n=r(32),i=r(33),l=r(1),o=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=a.default.keys(this.domNode),r=n.default.keys(this.domNode),o=i.default.keys(this.domNode);t.concat(r).concat(o).forEach(function(t){var r=l.query(t,l.Scope.ATTRIBUTE);r instanceof a.default&&(e.attributes[r.attrName]=r)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var a=t.attributes[r].value(t.domNode);e.format(r,a)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},e}();t.default=o},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=l},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});function i(e){var t=e.split("-"),r=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return a(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();n.DEFAULTS={modules:{}},n.themes={default:n},t.default=n},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=o(r(0)),l=o(r(7));function o(e){return e&&e.__esModule?e:{default:e}}var s="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(e){r.contentNode.appendChild(e)}),r.leftGuard=document.createTextNode(s),r.rightGuard=document.createTextNode(s),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,a=e.data.split(s).join("");if(e===this.leftGuard)if(this.prev instanceof l.default){var n=this.prev.length();this.prev.insertAt(n,a),t={startNode:this.prev.domNode,startOffset:n+a.length}}else r=document.createTextNode(a),this.parent.insertBefore(i.default.create(r),this),t={startNode:r,startOffset:a.length};else e===this.rightGuard&&(this.next instanceof l.default?(this.next.insertAt(0,a),t={startNode:this.next.domNode,startOffset:a.length}):(r=document.createTextNode(a),this.parent.insertBefore(i.default.create(r),this.next),t={startNode:r,startOffset:a.length}));return e.data=s,t}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var a=r.restore(e.target);a&&(t.range=a)}})}}]),t}(i.default.Embed);t.default=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var a,n=r(0),i=(a=n)&&a.__esModule?a:{default:a},l={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new i.default.Attributor.Attribute("align","align",l),s=new i.default.Attributor.Class("align","ql-align",l),c=new i.default.Attributor.Style("align","text-align",l);t.AlignAttribute=o,t.AlignClass=s,t.AlignStyle=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var a,n=r(0),i=(a=n)&&a.__esModule?a:{default:a},l=r(26),o=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),s=new l.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var a,n=r(0),i=(a=n)&&a.__esModule?a:{default:a},l={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},o=new i.default.Attributor.Attribute("direction","dir",l),s=new i.default.Attributor.Class("direction","ql-direction",l),c=new i.default.Attributor.Style("direction","direction",l);t.DirectionAttribute=o,t.DirectionClass=s,t.DirectionStyle=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(0),o=(a=l)&&a.__esModule?a:{default:a},s={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new o.default.Attributor.Class("font","ql-font",s),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"value",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style),u=new d("font","font-family",s);t.FontStyle=u,t.FontClass=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var a,n=r(0),i=(a=n)&&a.__esModule?a:{default:a},l=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=l,t.SizeStyle=o},function(e,t,r){e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=l(r(0)),i=l(r(5));function l(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.lastRecorded=0,a.ignoreChange=!1,a.clear(),a.quill.on(i.default.events.EDITOR_CHANGE,function(e,t,r,n){e!==i.default.events.TEXT_CHANGE||a.ignoreChange||(a.options.userOnly&&n!==i.default.sources.USER?a.transform(t):a.record(t,r))}),a.quill.keyboard.addBinding({key:"Z",shortKey:!0},a.undo.bind(a)),a.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},a.redo.bind(a)),/Win/i.test(navigator.platform)&&a.quill.keyboard.addBinding({key:"Y",shortKey:!0},a.redo.bind(a)),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],i.default.sources.USER),this.ignoreChange=!1;var a=s(r[e]);this.quill.setSelection(a)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),a=Date.now();if(this.lastRecorded+this.options.delay>a&&this.stack.undo.length>0){var n=this.stack.undo.pop();r=r.compose(n.undo),e=n.redo.compose(e)}else this.lastRecorded=a;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(l(r(9)).default);function s(e){var t=e.reduce(function(e,t){return e+=t.delete||0},0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=n.default.query(e,n.default.Scope.BLOCK)}))}(e)&&(r-=1),r}o.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=o,t.getLastChangeIndex=s},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=f(r(3)),l=f(r(2)),o=f(r(8)),s=f(r(23)),c=f(r(34)),d=f(r(59)),u=f(r(60)),h=f(r(28)),p=f(r(61));function f(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=[!1,"center","right","justify"],m=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],v=[!1,"serif","monospace"],k=["1","2","3",!1],j=["small",!1,"large","huge"],w=function(e){function t(e,r){g(this,t);var a=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==a.tooltip||a.tooltip.root.contains(r.target)||document.activeElement===a.tooltip.textbox||a.quill.hasFocus()||a.tooltip.hide(),null!=a.pickers&&a.pickers.forEach(function(e){e.container.contains(r.target)||e.close()})}),a}return b(t,e),a(t,[{key:"addModule",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"==typeof t[r])e.innerHTML=t[r];else{var a=e.value||"";null!=a&&t[r][a]&&(e.innerHTML=t[r][a])}})})}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&_(e,x),new u.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&_(e,m,"background"===r?"#ffffff":"#000000"),new d.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?_(e,v):e.classList.contains("ql-header")?_(e,k):e.classList.contains("ql-size")&&_(e,j)),new h.default(e)}),this.quill.on(o.default.events.EDITOR_CHANGE,function(){r.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);w.DEFAULTS=(0,i.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var a=e.quill.getSelection(!0);e.quill.updateContents((new l.default).retain(a.index).delete(a.length).insert({image:r.target.result}),o.default.sources.USER),e.quill.setSelection(a.index+1,o.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var N=function(e){function t(e,r){g(this,t);var a=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.textbox=a.root.querySelector('input[type="text"]'),a.listen(),a}return b(t,e),a(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){s.default.match(t,"enter")?(e.save(),t.preventDefault()):s.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,r=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var a=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",r,o.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",r,o.default.sources.USER)),this.quill.root.scrollTop=a;break;case"video":r=(t=(e=r).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!r)break;var n=this.quill.getSelection(!0);if(null!=n){var i=n.index+n.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),r,o.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",o.default.sources.USER),this.quill.setSelection(i+2,o.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(p.default);function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var a=document.createElement("option");t===r?a.setAttribute("selected","selected"):a.setAttribute("value",t),e.appendChild(a)})}t.BaseTooltip=N,t.default=w},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,a=this.iterator();r=a();){var n=r.length();if(e<n||t&&e===n&&(null==r.next||0!==r.next.length()))return[r,e];e-=n}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var a,n=this.find(e),i=n[0],l=e-n[1],o=this.iterator(i);(a=o())&&l<e+t;){var s=a.length();e>l?r(a,e-l,Math.min(t,l+s-e)):r(a,0,Math.min(s,e+t-l)),l+=s}},e.prototype.map=function(e){return this.reduce(function(t,r){return t.push(e(r)),t},[])},e.prototype.reduce=function(e,t){for(var r,a=this.iterator();r=a();)t=e(t,r);return t},e}();t.default=a},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(17),l=r(1),o={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},s=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver(function(e){r.update(e)}),r.observer.observe(r.domNode,o),r.attach(),r}return n(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,a,n){this.update(),e.prototype.formatAt.call(this,t,r,a,n)},t.prototype.insertAt=function(t,r,a){this.update(),e.prototype.insertAt.call(this,t,r,a)},t.prototype.optimize=function(t,r){var a=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var n=[].slice.call(this.observer.takeRecords());n.length>0;)t.push(n.pop());for(var o=function(e,t){void 0===t&&(t=!0),null!=e&&e!==a&&null!=e.domNode.parentNode&&(null==e.domNode[l.DATA_KEY].mutations&&(e.domNode[l.DATA_KEY].mutations=[]),t&&o(e.parent))},s=function(e){null!=e.domNode[l.DATA_KEY]&&null!=e.domNode[l.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(s),e.optimize(r))},c=t,d=0;c.length>0;d+=1){if(d>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=l.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(o(l.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=l.find(e,!1);o(t,!1),t instanceof i.default&&t.children.forEach(function(e){o(e,!1)})})):"attributes"===e.type&&o(t.prev)),o(t))}),this.children.forEach(s),n=(c=[].slice.call(this.observer.takeRecords())).slice();n.length>0;)t.push(n.pop())}},t.prototype.update=function(t,r){var a=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map(function(e){var t=l.find(e.target,!0);return null==t?null:null==t.domNode[l.DATA_KEY].mutations?(t.domNode[l.DATA_KEY].mutations=[e],t):(t.domNode[l.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==a&&null!=e.domNode[l.DATA_KEY]&&e.update(e.domNode[l.DATA_KEY].mutations||[],r)}),null!=this.domNode[l.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=l.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=s},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(18),l=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,a){var n=this;r!==this.statics.blotName||a?e.prototype.format.call(this,r,a):(this.children.forEach(function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),n.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,r,a,n){null!=this.formats()[a]||l.query(a,l.Scope.ATTRIBUTE)?this.isolate(t,r).format(a,n):e.prototype.formatAt.call(this,t,r,a,n)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var a=this.formats();if(0===Object.keys(a).length)return this.unwrap();var n=this.next;n instanceof t&&n.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(a,n.formats())&&(n.moveChildren(this),n.remove())},t.blotName="inline",t.scope=l.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=o},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(18),l=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){var a=l.query(t.blotName).tagName;if(r.tagName!==a)return e.formats.call(this,r)},t.prototype.format=function(r,a){null!=l.query(r,l.Scope.BLOCK)&&(r!==this.statics.blotName||a?e.prototype.format.call(this,r,a):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,a,n){null!=l.query(a,l.Scope.BLOCK)?this.format(a,n):e.prototype.formatAt.call(this,t,r,a,n)},t.prototype.insertAt=function(t,r,a){if(null==a||null!=l.query(r,l.Scope.INLINE))e.prototype.insertAt.call(this,t,r,a);else{var n=this.split(t),i=l.create(r,a);n.parent.insertBefore(i,n)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=l.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=o},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,a,n){0===t&&r===this.length()?this.format(a,n):e.prototype.formatAt.call(this,t,r,a,n)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=i},function(e,t,r){var a,n=this&&this.__extends||(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),l=r(1),o=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return n(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,a){null==a?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,a)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=l.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=l.Scope.INLINE_BLOT,t}(i.default);t.default=o},function(e,t,r){var a=document.createElement("div");if(a.classList.toggle("test-class",!1),a.classList.contains("test-class")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:n.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var a=r.indexOf(e,t);return-1!==a&&a===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),a=r.length>>>0,n=arguments[1],i=0;i<a;i++)if(t=r[i],e.call(n,t,i,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var r=-1;function a(e,t,s){if(e==t)return e?[[0,e]]:[];(s<0||e.length<s)&&(s=null);var d=i(e,t),u=e.substring(0,d);d=l(e=e.substring(d),t=t.substring(d));var h=e.substring(e.length-d),p=function(e,t){var o;if(!e)return[[1,t]];if(!t)return[[r,e]];var s=e.length>t.length?e:t,c=e.length>t.length?t:e,d=s.indexOf(c);if(-1!=d)return o=[[1,s.substring(0,d)],[0,c],[1,s.substring(d+c.length)]],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==c.length)return[[r,e],[1,t]];var u=function(e,t){var r=e.length>t.length?e:t,a=e.length>t.length?t:e;if(r.length<4||2*a.length<r.length)return null;function n(e,t,r){for(var a,n,o,s,c=e.substring(r,r+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(c,d+1));){var h=i(e.substring(r),t.substring(d)),p=l(e.substring(0,r),t.substring(0,d));u.length<p+h&&(u=t.substring(d-p,d)+t.substring(d,d+h),a=e.substring(0,r-p),n=e.substring(r+h),o=t.substring(0,d-p),s=t.substring(d+h))}return 2*u.length>=e.length?[a,n,o,s,u]:null}var o,s,c,d,u,h=n(r,a,Math.ceil(r.length/4)),p=n(r,a,Math.ceil(r.length/2));if(!h&&!p)return null;o=p?h&&h[4].length>p[4].length?h:p:h,e.length>t.length?(s=o[0],c=o[1],d=o[2],u=o[3]):(d=o[0],u=o[1],s=o[2],c=o[3]);var f=o[4];return[s,c,d,u,f]}(e,t);if(u){var h=u[0],p=u[1],f=u[2],g=u[3],y=u[4],b=a(h,f),x=a(p,g);return b.concat([[0,y]],x)}return function(e,t){for(var a=e.length,i=t.length,l=Math.ceil((a+i)/2),o=l,s=2*l,c=new Array(s),d=new Array(s),u=0;u<s;u++)c[u]=-1,d[u]=-1;c[o+1]=0,d[o+1]=0;for(var h=a-i,p=h%2!=0,f=0,g=0,y=0,b=0,x=0;x<l;x++){for(var m=-x+f;m<=x-g;m+=2){for(var v=o+m,k=(C=m==-x||m!=x&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-m;C<a&&k<i&&e.charAt(C)==t.charAt(k);)C++,k++;if(c[v]=C,C>a)g+=2;else if(k>i)f+=2;else if(p&&(N=o+h-m)>=0&&N<s&&-1!=d[N]&&C>=(w=a-d[N]))return n(e,t,C,k)}for(var j=-x+y;j<=x-b;j+=2){for(var w,N=o+j,_=(w=j==-x||j!=x&&d[N-1]<d[N+1]?d[N+1]:d[N-1]+1)-j;w<a&&_<i&&e.charAt(a-w-1)==t.charAt(i-_-1);)w++,_++;if(d[N]=w,w>a)b+=2;else if(_>i)y+=2;else if(!p){var C;if((v=o+h-j)>=0&&v<s&&-1!=c[v]&&(k=o+(C=c[v])-v,C>=(w=a-w)))return n(e,t,C,k)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return u&&p.unshift([0,u]),h&&p.push([0,h]),o(p),null!=s&&(p=function(e,t){var a=function(e,t){if(0===t)return[0,e];for(var a=0,n=0;n<e.length;n++){var i=e[n];if(i[0]===r||0===i[0]){var l=a+i[1].length;if(t===l)return[n+1,e];if(t<l){e=e.slice();var o=t-a,s=[i[0],i[1].slice(0,o)],c=[i[0],i[1].slice(o)];return e.splice(n,1,s,c),[n+1,e]}a=l}}throw new Error("cursor_pos is out of bounds!")}(e,t),n=a[1],i=a[0],l=n[i],o=n[i+1];if(null==l)return e;if(0!==l[0])return e;if(null!=o&&l[1]+o[1]===o[1]+l[1])return n.splice(i,2,o,l),c(n,i,2);if(null!=o&&0===o[1].indexOf(l[1])){n.splice(i,2,[o[0],l[1]],[0,l[1]]);var s=o[1].slice(l[1].length);return s.length>0&&n.splice(i+2,0,[o[0],s]),c(n,i,3)}return e}(p,s)),p=function(e){for(var t=!1,a=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},n=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},i=2;i<e.length;i+=1)0===e[i-2][0]&&n(e[i-2][1])&&e[i-1][0]===r&&a(e[i-1][1])&&1===e[i][0]&&a(e[i][1])&&(t=!0,e[i-1][1]=e[i-2][1].slice(-1)+e[i-1][1],e[i][1]=e[i-2][1].slice(-1)+e[i][1],e[i-2][1]=e[i-2][1].slice(0,-1));if(!t)return e;var l=[];for(i=0;i<e.length;i+=1)e[i][1].length>0&&l.push(e[i]);return l}(p)}function n(e,t,r,n){var i=e.substring(0,r),l=t.substring(0,n),o=e.substring(r),s=t.substring(n),c=a(i,l),d=a(o,s);return c.concat(d)}function i(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,a=Math.min(e.length,t.length),n=a,i=0;r<n;)e.substring(i,n)==t.substring(i,n)?i=r=n:a=n,n=Math.floor((a-r)/2+r);return n}function l(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,a=Math.min(e.length,t.length),n=a,i=0;r<n;)e.substring(e.length-n,e.length-i)==t.substring(t.length-n,t.length-i)?i=r=n:a=n,n=Math.floor((a-r)/2+r);return n}function o(e){e.push([0,""]);for(var t,a=0,n=0,s=0,c="",d="";a<e.length;)switch(e[a][0]){case 1:s++,d+=e[a][1],a++;break;case r:n++,c+=e[a][1],a++;break;case 0:n+s>1?(0!==n&&0!==s&&(0!==(t=i(d,c))&&(a-n-s>0&&0==e[a-n-s-1][0]?e[a-n-s-1][1]+=d.substring(0,t):(e.splice(0,0,[0,d.substring(0,t)]),a++),d=d.substring(t),c=c.substring(t)),0!==(t=l(d,c))&&(e[a][1]=d.substring(d.length-t)+e[a][1],d=d.substring(0,d.length-t),c=c.substring(0,c.length-t))),0===n?e.splice(a-s,n+s,[1,d]):0===s?e.splice(a-n,n+s,[r,c]):e.splice(a-n-s,n+s,[r,c],[1,d]),a=a-n-s+(n?1:0)+(s?1:0)+1):0!==a&&0==e[a-1][0]?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,s=0,n=0,c="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(a=1;a<e.length-1;)0==e[a-1][0]&&0==e[a+1][0]&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),u=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),u=!0)),a++;u&&o(e)}var s=a;function c(e,t,r){for(var a=t+r-1;a>=0&&a>=t-1;a--)if(a+1<e.length){var n=e[a],i=e[a+1];n[0]===i[1]&&e.splice(a,2,[n[0],n[1]+i[1]])}return e}s.INSERT=1,s.DELETE=r,s.EQUAL=0,e.exports=s},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function a(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function n(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?a:n).supported=a,t.unsupported=n},function(e,t){var r=Object.prototype.hasOwnProperty,a="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function l(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e,t){var r=a?a+e:e,n=this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var i=0,l=n.length,o=new Array(l);i<l;i++)o[i]=n[i].fn;return o},l.prototype.emit=function(e,t,r,n,i,l){var o=a?a+e:e;if(!this._events[o])return!1;var s,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,n),!0;case 5:return d.fn.call(d.context,t,r,n,i),!0;case 6:return d.fn.call(d.context,t,r,n,i,l),!0}for(c=1,s=new Array(u-1);c<u;c++)s[c-1]=arguments[c];d.fn.apply(d.context,s)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,n);break;default:if(!s)for(h=1,s=new Array(u-1);h<u;h++)s[h-1]=arguments[h];d[c].fn.apply(d[c].context,s)}}return!0},l.prototype.on=function(e,t,r){var n=new i(t,r||this),l=a?a+e:e;return this._events[l]?this._events[l].fn?this._events[l]=[this._events[l],n]:this._events[l].push(n):(this._events[l]=n,this._eventsCount++),this},l.prototype.once=function(e,t,r){var n=new i(t,r||this,!0),l=a?a+e:e;return this._events[l]?this._events[l].fn?this._events[l]=[this._events[l],n]:this._events[l].push(n):(this._events[l]=n,this._eventsCount++),this},l.prototype.removeListener=function(e,t,r,i){var l=a?a+e:e;if(!this._events[l])return this;if(!t)return 0===--this._eventsCount?this._events=new n:delete this._events[l],this;var o=this._events[l];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||(0===--this._eventsCount?this._events=new n:delete this._events[l]);else{for(var s=0,c=[],d=o.length;s<d;s++)(o[s].fn!==t||i&&!o[s].once||r&&o[s].context!==r)&&c.push(o[s]);c.length?this._events[l]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new n:delete this._events[l]}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new n:delete this._events[t])):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=a,l.EventEmitter=l,void 0!==e&&(e.exports=l)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=m(r(3)),o=m(r(2)),s=m(r(0)),c=m(r(5)),d=m(r(10)),u=m(r(9)),h=r(36),p=r(37),f=m(r(13)),g=r(26),y=r(38),b=r(39),x=r(40);function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=(0,d.default)("quill:clipboard"),j="__ql-matcher",w=[[Node.TEXT_NODE,M],[Node.TEXT_NODE,q],["br",function(e,t){return S(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,q],[Node.ELEMENT_NODE,I],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,function(e,t){var r={},a=e.style||{};return a.fontStyle&&"italic"===E(e).fontStyle&&(r.italic=!0),a.fontWeight&&(E(e).fontWeight.startsWith("bold")||parseInt(E(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=O(t,r)),parseFloat(a.textIndent||0)>0&&(t=(new o.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=s.default.query(e);if(null==r||"list-item"!==r.blotName||!S(t,"\n"))return t;for(var a=-1,n=e.parentNode;!n.classList.contains("ql-clipboard");)"list"===(s.default.query(n)||{}).blotName&&(a+=1),n=n.parentNode;return a<=0?t:t.compose((new o.default).retain(t.length()-1).retain(1,{indent:a}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new o.default}]],N=[h.AlignAttribute,y.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),_=[h.AlignStyle,p.BackgroundStyle,g.ColorStyle,y.DirectionStyle,b.FontStyle,x.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),C=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.quill.root.addEventListener("paste",a.onPaste.bind(a)),a.container=a.quill.addContainer("ql-clipboard"),a.container.setAttribute("contenteditable",!0),a.container.setAttribute("tabindex",-1),a.matchers=[],w.concat(a.options.matchers).forEach(function(e){var t=n(e,2),i=t[0],l=t[1];(r.matchVisual||l!==D)&&a.addMatcher(i,l)}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[f.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new o.default).insert(r,v({},f.default.blotName,t[f.default.blotName]))}var a=this.prepareMatching(),i=n(a,2),l=i[0],s=i[1],c=T(this.container,l,s);return S(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new o.default).retain(c.length()-1).delete(1))),k.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var a=this.convert(t);this.quill.updateContents((new o.default).retain(e).concat(a),r),this.quill.setSelection(e+a.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),a=(new o.default).retain(r.index),n=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){a=a.concat(t.convert()).delete(r.length),t.quill.updateContents(a,c.default.sources.USER),t.quill.setSelection(a.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=n,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach(function(a){var i=n(a,2),l=i[0],o=i[1];switch(l){case Node.TEXT_NODE:r.push(o);break;case Node.ELEMENT_NODE:t.push(o);break;default:[].forEach.call(e.container.querySelectorAll(l),function(e){e[j]=e[j]||[],e[j].push(o)})}}),[t,r]}}]),t}(u.default);function O(e,t,r){return"object"===(void 0===t?"undefined":a(t))?Object.keys(t).reduce(function(e,r){return O(e,r,t[r])},e):e.reduce(function(e,a){return a.attributes&&a.attributes[t]?e.push(a):e.insert(a.insert,(0,l.default)({},v({},t,r),a.attributes))},new o.default)}function E(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function S(e,t){for(var r="",a=e.ops.length-1;a>=0&&r.length<t.length;--a){var n=e.ops[a];if("string"!=typeof n.insert)break;r=n.insert+r}return r.slice(-1*t.length)===t}function A(e){if(0===e.childNodes.length)return!1;var t=E(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce(function(t,r){return r(e,t)},new o.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(a,n){var i=T(n,t,r);return n.nodeType===e.ELEMENT_NODE&&(i=t.reduce(function(e,t){return t(n,e)},i),i=(n[j]||[]).reduce(function(e,t){return t(n,e)},i)),a.concat(i)},new o.default):new o.default}function P(e,t,r){return O(r,e,!0)}function L(e,t){var r=s.default.Attributor.Attribute.keys(e),a=s.default.Attributor.Class.keys(e),n=s.default.Attributor.Style.keys(e),i={};return r.concat(a).concat(n).forEach(function(t){var r=s.default.query(t,s.default.Scope.ATTRIBUTE);null!=r&&(i[r.attrName]=r.value(e),i[r.attrName])||(null==(r=N[t])||r.attrName!==t&&r.keyName!==t||(i[r.attrName]=r.value(e)||void 0),null==(r=_[t])||r.attrName!==t&&r.keyName!==t||(r=_[t],i[r.attrName]=r.value(e)||void 0))}),Object.keys(i).length>0&&(t=O(t,i)),t}function I(e,t){var r=s.default.query(e);if(null==r)return t;if(r.prototype instanceof s.default.Embed){var a={},n=r.value(e);null!=n&&(a[r.blotName]=n,t=(new o.default).insert(a,r.formats(e)))}else"function"==typeof r.formats&&(t=O(t,r.blotName,r.formats(e)));return t}function q(e,t){return S(t,"\n")||(A(e)||t.length()>0&&e.nextSibling&&A(e.nextSibling))&&t.insert("\n"),t}function D(e,t){if(A(e)&&null!=e.nextElementSibling&&!S(t,"\n\n")){var r=e.offsetHeight+parseFloat(E(e).marginTop)+parseFloat(E(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function M(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!E(e.parentNode).whiteSpace.startsWith("pre")){var a=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,a.bind(a,!0)),(null==e.previousSibling&&A(e.parentNode)||null!=e.previousSibling&&A(e.previousSibling))&&(r=r.replace(/^\s+/,a.bind(a,!1))),(null==e.nextSibling&&A(e.parentNode)||null!=e.nextSibling&&A(e.nextSibling))&&(r=r.replace(/\s+$/,a.bind(a,!1)))}return t.insert(r)}C.DEFAULTS={matchers:[],matchVisual:!0},t.default=C,t.matchAttributor=L,t.matchBlot=I,t.matchNewline=q,t.matchSpacing=D,t.matchText=M},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((a=l)&&a.__esModule?a:{default:a}).default);o.blotName="bold",o.tagName=["STRONG","B"],t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=d(r(2)),l=d(r(0)),o=d(r(5)),s=d(r(10)),c=d(r(9));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=(0,s.default)("quill:toolbar"),p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(i.options.container)){var l=document.createElement("div");g(l,i.options.container),e.container.parentNode.insertBefore(l,e.container),i.container=l}else"string"==typeof i.options.container?i.container=document.querySelector(i.options.container):i.container=i.options.container;return i.container instanceof HTMLElement?(i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},Object.keys(i.options.handlers).forEach(function(e){i.addHandler(e,i.options.handlers[e])}),[].forEach.call(i.container.querySelectorAll("button, select"),function(e){i.attach(e)}),i.quill.on(o.default.events.EDITOR_CHANGE,function(e,t){e===o.default.events.SELECTION_CHANGE&&i.update(t)}),i.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){var e=i.quill.selection.getRange(),t=a(e,1)[0];i.update(t)}),i):(n=h.error("Container required for toolbar",i.options),u(i,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void h.warn("ignoring attaching to disabled format",r,e);if(null==l.default.query(r))return void h.warn("ignoring attaching to nonexistent format",r,e)}var n="SELECT"===e.tagName?"change":"click";e.addEventListener(n,function(n){var s=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];s=!c.hasAttribute("selected")&&(c.value||!1)}else s=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),n.preventDefault();t.quill.focus();var d=t.quill.selection.getRange(),u=a(d,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,s);else if(l.default.query(r).prototype instanceof l.default.Embed){if(!(s=prompt("Enter "+r)))return;t.quill.updateContents((new i.default).retain(u.index).delete(u.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,s)),o.default.sources.USER)}else t.quill.format(r,s,o.default.sources.USER);t.update(u)}),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(r){var n=a(r,2),i=n[0],l=n[1];if("SELECT"===l.tagName){var o=void 0;if(null==e)o=null;else if(null==t[i])o=l.querySelector("option[selected]");else if(!Array.isArray(t[i])){var s=t[i];"string"==typeof s&&(s=s.replace(/\"/g,'\\"')),o=l.querySelector('option[value="'+s+'"]')}null==o?(l.value="",l.selectedIndex=-1):o.selected=!0}else if(null==e)l.classList.remove("ql-active");else if(l.hasAttribute("value")){var c=t[i]===l.getAttribute("value")||null!=t[i]&&t[i].toString()===l.getAttribute("value")||null==t[i]&&!l.getAttribute("value");l.classList.toggle("ql-active",c)}else l.classList.toggle("ql-active",null!=t[i])})}}]),t}(c.default);function f(e,t,r){var a=document.createElement("button");a.setAttribute("type","button"),a.classList.add("ql-"+t),null!=r&&(a.value=r),e.appendChild(a)}function g(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)f(r,e);else{var t=Object.keys(e)[0],a=e[t];Array.isArray(a)?function(e,t,r){var a=document.createElement("select");a.classList.add("ql-"+t),r.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),a.appendChild(t)}),e.appendChild(a)}(r,t,a):f(r,t,a)}}),e.appendChild(r)})}p.DEFAULTS={},p.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach(function(t){null!=l.default.query(t,l.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,o.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",o.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,o.default.sources.USER),this.quill.format("direction",e,o.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),a=parseInt(r.indent||0);if("+1"===e||"-1"===e){var n="+1"===e?1:-1;"rtl"===r.direction&&(n*=-1),this.quill.format("indent",a+n,o.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,o.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,o.default.sources.USER):this.quill.format("list","unchecked",o.default.sources.USER):this.quill.format("list",e,o.default.sources.USER)}}},t.default=p,t.addControls=g},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(28),o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.label.innerHTML=r,a.container.classList.add("ql-color-picker"),[].slice.call(a.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"buildItem",value:function(e){var r=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var a=this.label.querySelector(".ql-color-label"),n=e&&e.getAttribute("data-value")||"";a&&("line"===a.tagName?a.style.stroke=n:a.style.fill=n)}}]),t}(((a=l)&&a.__esModule?a:{default:a}).default);t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(28),o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.container.classList.add("ql-icon-picker"),[].forEach.call(a.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=r[e.getAttribute("data-value")||""]}),a.defaultItem=a.container.querySelector(".ql-selected"),a.selectItem(a.defaultItem),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"selectItem",value:function(e,r){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((a=l)&&a.__esModule?a:{default:a}).default);t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function(){function e(t,r){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){a.root.style.marginTop=-1*a.quill.root.scrollTop+"px"}),this.hide()}return a(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),i=0;if(n.right>a.right&&(i=a.right-n.right,this.root.style.left=t+i+"px"),n.left<a.left&&(i=a.left-n.left,this.root.style.left=t+i+"px"),n.bottom>a.bottom){var l=n.bottom-n.top,o=e.bottom-e.top+l;this.root.style.top=r-o+"px",this.root.classList.add("ql-flip")}return i}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=n},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],a=!0,n=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(a=(l=o.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(s){n=!0,i=s}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),l=p(r(3)),o=p(r(8)),s=r(43),c=p(s),d=p(r(27)),u=r(15),h=p(r(41));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],x=function(e){function t(e,r){f(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=b);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.quill.container.classList.add("ql-snow"),a}return y(t,e),i(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),h.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),h.default),this.tooltip=new m(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,r){e.handlers.link.call(e,!r.format.link)})}}]),t}(c.default);x.DEFAULTS=(0,l.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var m=function(e){function t(e,r){f(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.preview=a.root.querySelector("a.ql-preview"),a}return y(t,e),i(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,o.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(o.default.events.SELECTION_CHANGE,function(t,r,n){if(null!=t){if(0===t.length&&n===o.default.sources.USER){var i=e.quill.scroll.descendant(d.default,t.index),l=a(i,2),s=l[0],c=l[1];if(null!=s){e.linkRange=new u.Range(t.index-c,s.length());var h=d.default.formats(s.domNode);return e.preview.textContent=h,e.preview.setAttribute("href",h),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(s.BaseTooltip);m.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=x},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a=q(r(29)),n=r(36),i=r(38),l=r(64),o=q(r(65)),s=q(r(66)),c=r(67),d=q(c),u=r(37),h=r(26),p=r(39),f=r(40),g=q(r(56)),y=q(r(68)),b=q(r(27)),x=q(r(69)),m=q(r(70)),v=q(r(71)),k=q(r(72)),j=q(r(73)),w=r(13),N=q(w),_=q(r(74)),C=q(r(75)),O=q(r(57)),E=q(r(41)),S=q(r(28)),A=q(r(59)),T=q(r(60)),P=q(r(61)),L=q(r(108)),I=q(r(62));function q(e){return e&&e.__esModule?e:{default:e}}a.default.register({"attributors/attribute/direction":i.DirectionAttribute,"attributors/class/align":n.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":h.ColorClass,"attributors/class/direction":i.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":n.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":h.ColorStyle,"attributors/style/direction":i.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":f.SizeStyle},!0),a.default.register({"formats/align":n.AlignClass,"formats/direction":i.DirectionClass,"formats/indent":l.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":h.ColorStyle,"formats/font":p.FontClass,"formats/size":f.SizeClass,"formats/blockquote":o.default,"formats/code-block":N.default,"formats/header":s.default,"formats/list":d.default,"formats/bold":g.default,"formats/code":w.Code,"formats/italic":y.default,"formats/link":b.default,"formats/script":x.default,"formats/strike":m.default,"formats/underline":v.default,"formats/image":k.default,"formats/video":j.default,"formats/list/item":c.ListItem,"modules/formula":_.default,"modules/syntax":C.default,"modules/toolbar":O.default,"themes/bubble":L.default,"themes/snow":I.default,"ui/icons":E.default,"ui/picker":S.default,"ui/icon-picker":T.default,"ui/color-picker":A.default,"ui/tooltip":P.default},!0),t.default=a.default},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(0),o=(a=l)&&a.__esModule?a:{default:a},s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var a=this.value(e)||0;r="+1"===r?a+1:a-1}return 0===r?(this.remove(e),!0):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(o.default.Attributor.Class),c=new s("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(4),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((a=n)&&a.__esModule?a:{default:a}).default);i.blotName="blockquote",i.tagName="blockquote",t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=r(4),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((a=i)&&a.__esModule?a:{default:a}).default);l.blotName="header",l.tagName=["H1","H2","H3","H4","H5","H6"],t.default=l},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=s(r(0)),l=s(r(4)),o=s(r(25));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"format",value:function(e,r){e!==p.blotName||r?n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(i.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:n(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(l.default);h.blotName="list-item",h.tagName="LI";var p=function(e){function t(e){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=function(t){if(t.target.parentNode===e){var a=r.statics.formats(e),n=i.default.find(t.target);"checked"===a?n.format("list","unchecked"):"unchecked"===a&&n.format("list","checked")}};return e.addEventListener("touchstart",a),e.addEventListener("mousedown",a),r}return u(t,e),a(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",a=n(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||a.setAttribute("data-checked","checked"===e),a}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),a(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof h)n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var a=null==r?this.length():r.offset(this),i=this.split(a);i.parent.insertBefore(e,i)}}},{key:"optimize",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=i.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(o.default);p.blotName="list",p.scope=i.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[h],t.ListItem=h,t.default=p},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(56),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((a=n)&&a.__esModule?a:{default:a}).default);i.blotName="italic",i.tagName=["EM","I"],t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((a=l)&&a.__esModule?a:{default:a}).default);o.blotName="script",o.tagName=["SUB","SUP"],t.default=o},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((a=n)&&a.__esModule?a:{default:a}).default);i.blotName="strike",i.tagName="S",t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=r(6),i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((a=n)&&a.__esModule?a:{default:a}).default);i.blotName="underline",i.tagName="U",t.default=i},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(0),o=(a=l)&&a.__esModule?a:{default:a},s=r(27),c=["alt","height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,s.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.default.Embed);d.blotName="image",d.tagName="IMG",t.default=d},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var a,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},l=r(4),o=r(27),s=(a=o)&&a.__esModule?a:{default:a},c=["height","width"],d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"format",value:function(e,r){c.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return c.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"sanitize",value:function(e){return s.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(l.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",t.default=d},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=s(r(35)),l=s(r(5)),o=s(r(9));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,null,[{key:"create",value:function(e){var r=n(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(i.default);h.blotName="formula",h.className="ql-formula",h.tagName="SPAN";var p=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return u(t,e),a(t,null,[{key:"register",value:function(){l.default.register(h,!0)}}]),t}(o.default);t.FormulaBlot=h,t.default=p},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),n=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},i=s(r(0)),l=s(r(5)),o=s(r(9));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),a(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(s(r(13)).default);h.className="ql-syntax";var p=new i.default.Attributor.Class("token","hljs",{scope:i.default.Scope.INLINE}),f=function(e){function t(e,r){c(this,t);var a=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!=typeof a.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var n=null;return a.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(n),n=setTimeout(function(){a.highlight(),n=null},a.options.interval)}),a.highlight(),a}return u(t,e),a(t,null,[{key:"register",value:function(){l.default.register(p,!0),l.default.register(h,!0)}}]),a(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(l.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(h).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(l.default.sources.SILENT),null!=t&&this.quill.setSelection(t,l.default.sources.SILENT)}}}]),t}(o.default);f.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=h,t.CodeToken=p,t.default=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var a=function e(t,r,a){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,a)}if("value"in n)return n.value;var l=n.get;return void 0!==l?l.call(a):void 0},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=u(r(3)),l=u(r(8)),o=r(43),s=u(o),c=r(15),d=u(r(41));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],y=function(e){function t(e,r){h(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=g);var a=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.quill.container.classList.add("ql-bubble"),a}return f(t,e),n(t,[{key:"extendToolbar",value:function(e){this.tooltip=new b(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default)}}]),t}(s.default);y.DEFAULTS=(0,i.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var b=function(e){function t(e,r){h(this,t);var a=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return a.quill.on(l.default.events.EDITOR_CHANGE,function(e,t,r,n){if(e===l.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&n===l.default.sources.USER){a.show(),a.root.style.left="0px",a.root.style.width="",a.root.style.width=a.root.offsetWidth+"px";var i=a.quill.getLines(t.index,t.length);if(1===i.length)a.position(a.quill.getBounds(t));else{var o=i[i.length-1],s=a.quill.getIndex(o),d=Math.min(o.length()-1,t.index+t.length-s),u=a.quill.getBounds(new c.Range(s,d));a.position(u)}}else document.activeElement!==a.textbox&&a.quill.hasFocus()&&a.hide()}),a}return f(t,e),n(t,[{key:"listen",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(l.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),n=this.root.querySelector(".ql-tooltip-arrow");if(n.style.marginLeft="",0===r)return r;n.style.marginLeft=-1*r-n.offsetWidth/2+"px"}}]),t}(o.BaseTooltip);b.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=b,t.default=y},function(e,t,r){e.exports=r(63)}]).default};var Wn,Zn=$n.exports=Vn(),Yn=i&&i.__extends||(Wn=function(e,t){return(Wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}Wn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Xn=i&&i.__assign||function(){return Xn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Xn.apply(this,arguments)},Qn=i&&i.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var a=Array(e),n=0;for(t=0;t<r;t++)for(var i=arguments[t],l=0,o=i.length;l<o;l++,n++)a[n]=i[l];return a},ei=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ti=ei(n),ri=ei(l),ai=ei(Gn),ni=ei(Zn);function ii(e){Promise.resolve().then(e)}const li=o(function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,a,n){var i,l,o,s;"text-change"===e?null===(l=(i=r).onEditorChangeText)||void 0===l||l.call(i,r.editor.root.innerHTML,t,n,r.unprivilegedEditor):"selection-change"===e&&(null===(s=(o=r).onEditorChangeSelection)||void 0===s||s.call(o,t,n,r.unprivilegedEditor))};var a=r.isControlled()?t.value:t.defaultValue;return r.value=null!=a?a:"",r}return Yn(t,e),t.prototype.validateProps=function(e){var t;if(ti.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ti.default.Children.count(e.children)&&"textarea"===(null===(t=ti.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,a=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var n=this.getEditorContents(),i=null!=(r=e.value)?r:"";this.isEqualValue(i,n)||this.setEditorContents(this.editor,i)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),Qn(this.cleanProps,this.dirtyProps).some(function(t){return!ai.default(e[t],a.props[t])})},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(r){return!ai.default(e[r],t.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var a=this.editor.getContents(),n=this.editor.getSelection();this.regenerationSnapshot={delta:a,selection:n},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var i=this.regenerationSnapshot,l=(a=i.delta,i.selection);delete this.regenerationSnapshot,this.instantiateEditor();var o=this.editor;o.setContents(a),ii(function(){return r.setEditorSelection(o,l)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new ni.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?ai.default(e.ops,t.ops):ai.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var a=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),ii(function(){return r.setEditorSelection(e,a)})},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,a;(null===(a=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===a?void 0:a.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=ri.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,a=t.preserveWhitespace,n={key:this.state.generation,ref:function(t){e.editingArea=t}};return ti.default.Children.count(r)?ti.default.cloneElement(ti.default.Children.only(r),n):a?ti.default.createElement("pre",Xn({},n)):ti.default.createElement("div",Xn({},n))},t.prototype.render=function(){var e;return ti.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,a){var n,i;if(this.editor){var l=this.isDelta(this.value)?a.getContents():a.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=l,null===(i=(n=this.props).onChange)||void 0===i||i.call(n,e,t,r,a))}},t.prototype.onEditorChangeSelection=function(e,t,r){var a,n,i,l,o,s;if(this.editor){var c=this.getEditorSelection(),d=!c&&e,u=c&&!e;ai.default(e,c)||(this.selection=e,null===(n=(a=this.props).onChangeSelection)||void 0===n||n.call(a,e,t,r),d?null===(l=(i=this.props).onFocus)||void 0===l||l.call(i,e,t,r):u&&(null===(s=(o=this.props).onBlur)||void 0===s||s.call(o,c,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=ni.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(ti.default.Component)),oi=({learning:t,onSave:r,onCancel:a})=>{const[i,l]=n.useState(""),[o,s]=n.useState(""),[c,d]=n.useState(!1);n.useEffect(()=>{t?(l(t.topic),s(t.content)):(l(""),s(""))},[t]);const u=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t?"학습 내용 수정":"학습 내용 추가"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(g,{className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!i.trim())return void alert("학습 주제를 입력해주세요.");if(u(o).trim())try{d(!0),await r({topic:i.trim(),content:o.trim()})}catch(t){}finally{d(!1)}else alert("학습 내용을 입력해주세요.")},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"학습 주제"}),e.jsx("input",{type:"text",id:"topic",value:i,onChange:e=>l(e.target.value),placeholder:"학습 주제를 입력하세요",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["학습 내용",e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(마크다운 문법 지원: **굵게**, *기울임*, # 제목, - 목록)"})]}),e.jsx("div",{className:"rich-text-editor-container",children:e.jsx(li,{theme:"snow",value:o,onChange:e=>{s(e)},placeholder:"학습 내용을 입력하세요. 마크다운 문법을 사용할 수 있습니다.",modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block"],[{color:[]},{background:[]}],["link","image"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","indent","blockquote","code-block","color","background","link","image"],className:"rich-text-editor"})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:c||!i.trim()||!u(o).trim(),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:[e.jsx(b,{}),c?"저장 중...":t?"수정":"추가"]}),e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})},si=({chapters:t,onAddChapter:r,onEditChapter:a,onDeleteChapter:i,onAddLearning:l,onEditLearning:o,onDeleteLearning:s,isAuthenticated:c=!0})=>{const[u,h]=n.useState(new Set(t.map(e=>e._id)));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between sticky top-0 bg-white dark:bg-gray-800 z-10 pb-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"📚 목차별 학습 내용"}),t.length>0&&e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsx("button",{onClick:()=>{h(new Set(t.map(e=>e._id)))},className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline",children:"모두 펼치기"}),e.jsx("span",{className:"text-gray-400",children:"|"}),e.jsx("button",{onClick:()=>{h(new Set)},className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline",children:"모두 접기"})]})]}),c&&e.jsxs("button",{onClick:r,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 text-sm shadow-md",children:[e.jsx(x,{}),"목차 추가"]})]}),t.length>0?e.jsx("div",{className:"space-y-3",children:t.sort((e,t)=>e.order-t.order).map(t=>{var r;const n=u.has(t._id),p=(null==(r=t.learnings)?void 0:r.length)||0;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border-2 border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden transition-all hover:shadow-md",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-gray-700 dark:to-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("button",{onClick:()=>{return e=t._id,void h(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r});var e},className:"flex items-center gap-3 flex-1 text-left hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"flex-shrink-0",children:n?e.jsx(m,{className:"text-blue-600 dark:text-blue-400 w-5 h-5"}):e.jsx(v,{className:"text-gray-400 w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-sm font-bold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/50 px-2 py-0.5 rounded",children:["Chapter ",t.order+1]}),e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg truncate",children:t.title})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["📝 ",p,"개의 학습 내용"]})]})]}),c&&e.jsxs("div",{className:"flex gap-2 ml-3 flex-shrink-0",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),l(t._id)},className:"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded-lg transition-colors",title:"학습 내용 추가",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),a(t)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"목차 수정",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),confirm(`"${t.title}" 목차를 삭제하시겠습니까?\n관련 학습 내용 ${p}개도 모두 삭제됩니다.`)&&i(t)},className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"목차 삭제",children:e.jsx(j,{className:"w-4 h-4"})})]})]})}),n&&e.jsx("div",{className:"p-5 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-200 dark:border-gray-700",children:p>0?e.jsx("div",{className:"space-y-4",children:(t.learnings||[]).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).map((r,a)=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsxs("span",{className:"flex-shrink-0 text-xs font-bold text-white bg-blue-600 dark:bg-blue-500 px-2 py-1 rounded-full",children:["#",a+1]}),e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:r.topic})]}),c&&e.jsxs("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:[e.jsx("button",{onClick:()=>o(r,t._id),className:"p-1.5 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:"수정",children:e.jsx(k,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>{confirm(`"${r.topic}" 학습 내용을 삭제하시겠습니까?`)&&s(r,t._id)},className:"p-1.5 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"삭제",children:e.jsx(j,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("div",{className:"prose prose-sm max-w-none dark:prose-invert text-gray-700 dark:text-gray-300\r\n                                  prose-headings:text-gray-900 dark:prose-headings:text-white\r\n                                  prose-p:text-gray-700 dark:prose-p:text-gray-300\r\n                                  prose-code:bg-gray-200 dark:prose-code:bg-gray-700 prose-code:text-red-600 dark:prose-code:text-red-400 prose-code:px-1 prose-code:rounded\r\n                                  prose-pre:bg-gray-900 dark:prose-pre:bg-gray-950 prose-pre:text-gray-100\r\n                                  prose-a:text-blue-600 dark:prose-a:text-blue-400",dangerouslySetInnerHTML:{__html:r.content}}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:["📅 작성일: ",he(r.createdAt)]}),r.updatedAt&&r.updatedAt!==r.createdAt&&e.jsxs("span",{children:["✏️ 수정일: ",he(r.updatedAt)]})]})]},r._id))}):e.jsxs("div",{className:"text-center py-10 bg-white dark:bg-gray-800 rounded-lg border border-dashed border-gray-300 dark:border-gray-600",children:[e.jsx(d,{className:"mx-auto text-3xl mb-3 text-gray-400 opacity-50"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-3",children:"이 목차에 아직 학습 내용이 없습니다."}),c&&e.jsxs("button",{onClick:()=>l(t._id),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[e.jsx(x,{}),"첫 번째 학습 내용 추가하기"]})]})})]},t._id)})}):e.jsxs("div",{className:"text-center py-16 bg-gray-50 dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:[e.jsx(d,{className:"mx-auto text-5xl mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mb-2 font-medium",children:"아직 목차가 없습니다."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-6",children:"먼저 목차를 추가하고, 각 목차에 학습 내용을 기록하세요."}),c&&e.jsxs("button",{onClick:r,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors inline-flex items-center gap-2 shadow-md",children:[e.jsx(x,{}),"첫 번째 목차 추가하기"]})]})]})},ci=({toast:t,onClose:r})=>e.jsxs(fe.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},transition:{duration:.2},className:`\n        relative flex items-start gap-3 p-4 rounded-lg border shadow-lg\n        ${(()=>{switch(t.type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800";default:return"bg-gray-50 dark:bg-gray-900/20 border-gray-200 dark:border-gray-800"}})()}\n        max-w-md w-full\n      `,children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:(()=>{switch(t.type){case"success":return e.jsx(_,{className:"text-green-500"});case"error":return e.jsx(N,{className:"text-red-500"});case"warning":return e.jsx(N,{className:"text-yellow-500"});default:return e.jsx(w,{className:"text-blue-500"})}})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),t.message&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:t.message})]}),e.jsx("button",{onClick:()=>r(t.id),className:"flex-shrink-0 p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(g,{className:"w-3 h-3 text-gray-400"})})]}),di=({toasts:t,onClose:r})=>e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.jsx(pe,{children:t.map(t=>e.jsx(ci,{toast:t,onClose:r},t.id))})});function ui(){var e;const t=n.useRef(null),r=n.useCallback(()=>(t.current&&t.current.abort(),t.current=new AbortController,t.current),[]),a=n.useCallback(()=>(t.current||(t.current=new AbortController),t.current),[]),i=n.useCallback(()=>{t.current&&(t.current.abort(),t.current=null)},[]);return n.useEffect(()=>()=>{t.current&&t.current.abort()},[]),{createAbortController:r,getAbortController:a,abort:i,signal:null==(e=t.current)?void 0:e.signal}}function hi(e,t={}){const{data:r,isOptimistic:a,optimisticUpdate:i,updateData:l,resetData:o}=function(e,t={}){const[r,a]=n.useState(e),[i,l]=n.useState(!1),o=n.useRef(e),{onSuccess:s,onError:c,onRollback:d}=t,u=n.useCallback(async(e,t)=>{o.current=r,a(t=>"function"==typeof e?e(t):e),l(!0);try{const e=await t();return a(e),l(!1),null==s||s(e),e}catch(n){throw a(o.current),l(!1),null==c||c(n,()=>{a(o.current),null==d||d(o.current)}),n}},[r,s,c,d]),h=n.useCallback(e=>{a(t=>"function"==typeof e?e(t):e)},[]),p=n.useCallback(e=>{a(e),o.current=e,l(!1)},[]);return{data:r,isOptimistic:i,optimisticUpdate:u,updateData:h,resetData:p}}(e,t),s=n.useCallback(async(e,t)=>i(t=>[...t,{...e,_id:`temp_${Date.now()}`}],async()=>{const e=await t();return l(t=>t.map(t=>t._id.startsWith("temp_")?e:t)),[...r.filter(e=>!e._id.startsWith("temp_")),e]}),[i,l,r]),c=n.useCallback(async(e,t,a)=>i(r=>r.map(r=>r._id===e?{...r,...t}:r),async()=>{const t=await a();return l(r=>r.map(r=>r._id===e?t:r)),r.map(r=>r._id===e?t:r)}),[i,l,r]),d=n.useCallback(async(e,t)=>{if(r.find(t=>t._id===e))return i(t=>t.filter(t=>t._id!==e),async()=>(await t(),r.filter(t=>t._id!==e)))},[i,r]),u=n.useCallback(async(e,t)=>i(e,async()=>await t()),[i]);return{data:r,isOptimistic:a,optimisticAdd:s,optimisticUpdateItem:c,optimisticDelete:d,optimisticReorder:u,updateData:l,resetData:o}}function pi({onSave:e,onDelete:t,onSuccess:r,onError:a}){const[i,l]=n.useState(!1),[o,s]=n.useState(null),[c,d]=n.useState(!1),[u,h]=n.useState(!1),p=n.useCallback(()=>{s(null),l(!0)},[]),f=n.useCallback(e=>{s(e),l(!0)},[]),g=n.useCallback(()=>{l(!1),s(null),d(!1),h(!1)},[]),y=n.useCallback(async t=>{if(!c)try{d(!0),await e(t,o),g(),null==r||r()}catch(n){null==a||a(n)}finally{d(!1)}},[c,o,e,r,a,g]),b=n.useCallback(async e=>{if(u)return;if(window.confirm(`정말 "${e.title||e.name||"이 항목"}"을(를) 삭제하시겠습니까?`))try{h(!0),await t(e),null==r||r()}catch(n){null==a||a(n)}finally{h(!1)}},[u,t,r,a]);return[{showForm:i,editingItem:o,isSaving:c,isDeleting:u},{handleCreate:p,handleEdit:f,handleCancel:g,handleSave:y,handleDelete:b,setShowForm:l,setEditingItem:s}]}const fi=({bookFilter:t="all",bookSearchTerm:r="",selectedBookCategory:a="",initialEditId:i})=>{const{books:l,isLoading:o,createBook:s,updateBook:c,deleteBook:u}=function(){const[e,t]=n.useState(!0),[r,a]=n.useState(null),{createAbortController:i}=ui(),{success:l,error:o}=je(),{data:s,isOptimistic:c,optimisticAdd:d,optimisticUpdateItem:u,optimisticDelete:h,resetData:p}=hi([]),f=n.useCallback(async()=>{var e;try{t(!0),a(null);const e=i(),r=await C.getAll();e.signal.aborted||p(r.data.data||[])}catch(r){if(!(null==(e=r.name)?void 0:e.includes("AbortError"))){const e="서적 목록을 불러오는데 실패했습니다.";a(e),o("로드 실패",e)}}finally{t(!1)}},[i,p,o]),g=n.useCallback(async e=>{try{const t={...e,_id:`temp_${Date.now()}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},r=await d(t,()=>C.create(e).then(e=>e.data));return l("서적 추가 완료",`${e.title}이(가) 성공적으로 추가되었습니다.`),r}catch(t){throw o("서적 추가 실패",t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."),t}},[d,l,o]),y=n.useCallback(async(e,t)=>{try{const r=await u(e,t,()=>C.update(e,t).then(e=>e.data));return l("서적 수정 완료","서적 정보가 성공적으로 수정되었습니다."),r}catch(r){throw o("서적 수정 실패",r instanceof Error?r.message:"알 수 없는 오류가 발생했습니다."),r}},[u,l,o]),b=n.useCallback(async e=>{try{const t=await h(e,()=>C.delete(e).then(()=>{}));return l("서적 삭제 완료","서적이 성공적으로 삭제되었습니다."),t}catch(t){throw o("서적 삭제 실패",t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."),t}},[h,l,o]);return n.useEffect(()=>{f()},[]),{books:s,isLoading:e,error:r,isOptimistic:c,createBook:g,updateBook:y,deleteBook:b,refetch:f}}(),{success:h,error:p}=je(),{createAbortController:f}=ui(),{toasts:b,hideToast:m}=je(),[v,w]=pi({onSave:async(e,t)=>{if(t){await c(t._id,e);h("서적 수정 완료","서적 정보가 성공적으로 수정되었습니다.")}else{await s(e);h("서적 추가 완료","새로운 서적이 성공적으로 추가되었습니다.")}},onDelete:async e=>{await u(e._id),h("서적 삭제 완료",`${e.title}이(가) 삭제되었습니다.`)},onError:e=>{p("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}}),{data:N,optimisticAdd:_,optimisticUpdateItem:A,optimisticDelete:T,resetData:P}=hi([]),[L,I]=n.useState(!1),[q,D]=n.useState(null),[M,R]=n.useState(null),[F,B]=n.useState(!1),[U,z]=n.useState(null),[H,K]=n.useState(!1),[J,V]=n.useState(null),[G,$]=n.useState(!1);n.useEffect(()=>{if(i&&l.length>0&&!G){const e=l.find(e=>e._id===i);e&&(w.handleEdit(e),$(!0))}},[i,l,G,w]);const W=n.useMemo(()=>{let e=[...l];if("five-star"===t?e=e.filter(e=>5===e.rating):"category"===t&&a&&(e=e.filter(e=>e.category===a)),r){const t=r.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}return e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())},[l,t,r,a]),Z=n.useCallback(async e=>{var t;D(e),I(!0),R(null);try{const t=f(),r=await O.getByBook(e._id);t.signal.aborted||P(r.data||[])}catch(r){(null==(t=r.name)?void 0:t.includes("AbortError"))||p("데이터 로드 실패","서적 정보를 불러오는데 실패했습니다.")}},[f,P,p]),Y=n.useCallback(async e=>{if(q)try{U?(await A(U._id,e,()=>O.update(q._id,U._id,e).then(e=>e.data)),h("목차 수정 완료","목차가 성공적으로 수정되었습니다."),B(!1),z(null)):(await _({...e,_id:"",learnings:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},()=>O.create(q._id,e).then(e=>e.data)),h("목차 추가 완료","새로운 목차가 추가되었습니다."),B(!1))}catch(t){p("목차 작업 실패","목차 작업에 실패했습니다.")}},[q,U,_,A,h,p]),X=n.useCallback(async e=>{if(q)try{await T(e._id,()=>O.delete(q._id,e._id).then(()=>{})),h("목차 삭제 완료","목차가 삭제되었습니다.")}catch(t){p("목차 삭제 실패","목차 삭제에 실패했습니다.")}},[q,T,h,p]),Q=n.useCallback(e=>{R(e),K(!0),V(null)},[]),ee=n.useCallback((e,t)=>{R(t),V(e),K(!0)},[]),te=n.useCallback(async(e,t)=>{if(q)try{await E.deleteForChapter(q._id,t,e._id);const r=await O.getByBook(q._id);P(r.data||[]),h("학습 내용 삭제 완료","학습 내용이 삭제되었습니다.")}catch(r){p("학습 내용 삭제 실패","학습 내용 삭제에 실패했습니다.")}},[q,P,h,p]),re=n.useCallback(async e=>{if(q&&M)try{J?(await E.updateForChapter(q._id,M,J._id,e),h("학습 내용 수정 완료","학습 내용이 성공적으로 수정되었습니다.")):(await E.createForChapter(q._id,M,e),h("학습 내용 추가 완료","새로운 학습 내용이 추가되었습니다."));const t=await O.getByBook(q._id);P(t.data||[]),K(!1),V(null),R(null)}catch(t){p("작업 실패","학습 내용 저장에 실패했습니다.")}},[q,M,J,P,h,p]),ae=t=>e.jsx("div",{className:"flex items-center gap-0.5",children:Array.from({length:5},(r,a)=>e.jsx(y,{className:"text-sm "+(a<t?"text-yellow-500":"text-gray-300 dark:text-gray-600")},a))});return o?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e.jsxs(e.Fragment,{children:[e.jsx(di,{toasts:b,onClose:m}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"서적 관리"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["총 ",W.length,"권의 서적"]})]}),e.jsxs("button",{onClick:w.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx(x,{}),"서적 추가"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:0===W.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(d,{className:"text-6xl text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-2",children:"등록된 서적이 없습니다"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"상단의 '서적 추가' 버튼을 눌러 새로운 서적을 등록하세요"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"서적 정보"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"저자"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"카테고리"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"평점"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"읽은 날짜"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"관리"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:W.map(t=>{var r;return e.jsxs("tr",{onClick:()=>Z(t),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.coverImage?e.jsx("img",{src:t.coverImage,alt:t.title,className:"w-12 h-16 object-cover rounded shadow-sm"}):e.jsx("div",{className:"w-12 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded flex items-center justify-center shadow-sm",children:e.jsx(d,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[(null==(r=t.learnings)?void 0:r.length)||0,"개의 학습 내용"]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-300",children:t.author})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:t.category})}),e.jsx("td",{className:"px-6 py-4",children:ae(t.rating)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-300",children:he(t.readDate)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),Z(t)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors",title:"상세보기",children:e.jsx(S,{})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),w.handleEdit(t)},className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors",title:"수정",children:e.jsx(k,{})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),w.handleDelete(t)},disabled:v.isDeleting,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors disabled:opacity-50",title:"삭제",children:e.jsx(j,{})})]})})]},t._id)})})]})})}),v.showForm&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:v.editingItem?"서적 수정":"서적 추가"}),e.jsx("button",{onClick:w.handleCancel,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(g,{})})]}),e.jsx(qe,{data:v.editingItem,onSave:w.handleSave,onCancel:w.handleCancel,isSaving:v.isSaving})]})})}),L&&q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] flex flex-col shadow-2xl",children:[e.jsx("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[q.coverImage?e.jsx("img",{src:q.coverImage,alt:q.title,className:"w-20 h-28 object-cover rounded shadow-lg flex-shrink-0"}):e.jsx("div",{className:"w-20 h-28 bg-gradient-to-br from-blue-400 to-blue-600 rounded flex items-center justify-center shadow-lg flex-shrink-0",children:e.jsx(d,{className:"text-white text-2xl"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 truncate",children:q.title}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:["저자: ",q.author]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:q.category}),ae(q.rating)]})]})]}),e.jsx("button",{onClick:()=>{I(!1),R(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0",children:e.jsx(g,{className:"text-xl"})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(si,{chapters:N,onAddChapter:()=>{B(!0),z(null)},onEditChapter:e=>{z(e),B(!0)},onDeleteChapter:X,onAddLearning:Q,onEditLearning:ee,onDeleteLearning:te,isAuthenticated:!0})})]})}),F&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60]",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full mx-4 shadow-2xl",children:e.jsx(De,{chapter:U,onSave:Y,onCancel:()=>{B(!1),z(null)}})})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:e.jsx(oi,{learning:J,onSave:re,onCancel:()=>{K(!1),V(null),R(null)}})})})]})]})},gi=({data:t,onSave:r,onCancel:a,isSaving:i=!1,availableCategories:l=["PLC","데이터분석","로봇공학","IoT","기타"]})=>{const{skillCategories:o,loading:s}=se(),{data:c=[],isLoading:d}=ce(),u=(null==t?void 0:t.watchDate)&&!isNaN(new Date(t.watchDate).getTime())?new Date(t.watchDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],[h,p]=n.useState(()=>(null==t?void 0:t.videoId)?`https://www.youtube.com/watch?v=${t.videoId}`:(null==t?void 0:t.videoUrl)?t.videoUrl:""),f=(null==t?void 0:t.skillIds)?t.skillIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],x=(null==t?void 0:t.categoryIds)?t.categoryIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],[m,v]=n.useState(t?{title:t.title,category:t.category,categoryIds:x,watchDate:u,rating:t.rating||3,purpose:t.purpose||"",keyTakeaways:t.keyTakeaways||"",application:t.application||"",skillIds:f,order:t.order||0}:{title:"",category:l[0]||"PLC",categoryIds:[],watchDate:u,rating:3,purpose:"",keyTakeaways:"",application:"",skillIds:[],order:0}),k=n.useMemo(()=>Ne(h),[h]),j=n.useMemo(()=>k?_e(k):null,[k]),w=n.useMemo(()=>null!==k,[k]),N=e=>{const t=m.categoryIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];v({...m,categoryIds:r})},_=m.title.trim()&&h.trim()&&w;return e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!m.title.trim()||!h.trim())return void alert("필수 필드(제목, 영상 URL)를 모두 입력해주세요.");if(!w||!k)return void alert("❌ 올바른 유튜브 URL을 입력해주세요.");const{title:t,category:a,watchDate:n,rating:i,purpose:l,keyTakeaways:o,application:s,skillIds:c,order:d}=m;r({title:t,videoId:k,category:a,watchDate:n,...void 0!==i&&{rating:i},...l&&{purpose:l},...o&&{keyTakeaways:o},...s&&{application:s},skillIds:c||[],order:d||0})},className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["제목 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:m.title,onChange:e=>v({...m,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"영상 제목을 입력하세요",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["영상 URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white "+(h&&!w?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"https://www.youtube.com/watch?v=...",required:!0}),h&&!w&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"올바른 유튜브 URL을 입력해주세요"}),k&&e.jsxs("p",{className:"text-green-600 text-sm mt-1",children:["✅ 영상 ID: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:k})]}),j&&w&&e.jsxs("div",{className:"mt-3",children:[e.jsx("img",{src:j,alt:"영상 썸네일",className:"w-full max-w-md rounded-lg shadow-md",onError:e=>{const t=e.target;t.src.includes("maxresdefault")&&(t.src=_e(k,"hqdefault"))}}),e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-2",children:"✓ 유효한 유튜브 URL"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"카테고리 선택 📂 (다중 선택 가능)"}),m.categoryIds&&m.categoryIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:m.categoryIds.map(t=>{const r=c.find(e=>e._id===t);return r?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:[r.name,e.jsx("button",{type:"button",onClick:()=>N(t),className:"hover:bg-blue-700 rounded-full p-0.5",children:e.jsx(g,{className:"text-xs"})})]},t):null})}),d?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"카테고리 로딩 중..."}):c.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:c.map(t=>{const r=(m.categoryIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all "+(r?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>N(t._id),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]},t._id)})}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:'등록된 카테고리가 없습니다. 관리자 메뉴의 "카테고리 관리"에서 추가하세요.'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"시청 날짜"}),e.jsx("input",{type:"date",value:m.watchDate,onChange:e=>v({...m,watchDate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이해도 평점"}),e.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:5},(t,r)=>{const a=r+1;return e.jsx("button",{type:"button",onClick:()=>v({...m,rating:a}),className:"text-3xl transition-colors "+(a<=(m.rating||0)?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-gray-400"),children:e.jsx(y,{})},r)}),e.jsxs("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:[m.rating,"/5"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"시청 목적"}),e.jsx("textarea",{value:m.purpose,onChange:e=>v({...m,purpose:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical",rows:3,placeholder:"이 영상을 왜 시청했는지, 어떤 문제를 해결하기 위해서인지 작성하세요..."}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"최대 1000자"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"핵심 배움 (마크다운 지원)"}),e.jsx("textarea",{value:m.keyTakeaways,onChange:e=>v({...m,keyTakeaways:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm",rows:8,placeholder:"영상에서 얻은 핵심 지식 3-5가지를 정리하세요...\n\n예시:\n- [2:30] React Query의 staleTime과 cacheTime 차이\n- [5:15] Optimistic Updates 구현 방법\n- [8:45] Query Invalidation 전략"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"최대 5000자 | 타임스탬프 형식: [MM:SS] 또는 [H:MM:SS]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"적용 계획 (마크다운 지원)"}),e.jsx("textarea",{value:m.application,onChange:e=>v({...m,application:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm",rows:5,placeholder:"이 지식을 어떻게 활용할 계획인지, 또는 이미 적용한 경험을 작성하세요..."}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"최대 3000자"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"관련 기술 연동 🔗"}),s?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:"스킬 목록을 불러오는 중입니다..."}):e.jsxs(e.Fragment,{children:[(m.skillIds||[]).length>0&&e.jsx("div",{className:"mb-3 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:["✓ ",(m.skillIds||[]).length,"개 선택됨"]})}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 max-h-[400px] overflow-y-auto bg-gray-50 dark:bg-gray-800/50",children:o.map(t=>{const r=t.skills||[],a=r.map(e=>e._id).filter(Boolean),n=a.filter(e=>(m.skillIds||[]).includes(e)),i=a.length>0&&n.length===a.length,l=n.length>0&&!i;return e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsxs("div",{onClick:()=>(e=>{const t=(e.skills||[]).map(e=>e._id).filter(Boolean),r=m.skillIds||[];let a;if(t.every(e=>r.includes(e)))a=r.filter(e=>!t.includes(e));else{const e=new Set([...r,...t]);a=Array.from(e)}v({...m,skillIds:a})})(t),className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors mb-2",children:[e.jsx("input",{type:"checkbox",checked:i,ref:e=>{e&&(e.indeterminate=l)},onChange:()=>{},className:"w-5 h-5 text-primary-600 rounded focus:ring-2 focus:ring-primary-500"}),e.jsxs("label",{className:"font-bold text-base cursor-pointer flex-1",style:{color:t.color||"#3B82F6"},children:[t.title," (",n.length,"/",r.length,")"]})]}),e.jsx("div",{className:"ml-8 space-y-2",children:r.map(t=>{const r=(m.skillIds||[]).includes(t._id);return e.jsxs("div",{onClick:()=>(e=>{const t=m.skillIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];v({...m,skillIds:r})})(t._id),className:"flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-all "+(r?"bg-blue-100 dark:bg-blue-900/30 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-600"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>{},className:"w-4 h-4 text-primary-600 rounded focus:ring-2 focus:ring-primary-500"}),e.jsx("label",{className:"cursor-pointer flex-1 text-sm",style:{color:r?t.color:void 0},children:t.name})]},t._id)})})]},t._id)})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"순서 (낮을수록 먼저 표시)"}),e.jsx("input",{type:"number",value:m.order,onChange:e=>v({...m,order:parseInt(e.target.value)||0}),className:"w-32 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{type:"submit",disabled:i||!_||!w,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:[e.jsx(b,{})," ",i?"저장 중...":"저장"]}),e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"취소"})]})]})},yi=({initialEditId:t})=>{const{success:r,error:a}=je(),{videoLearnings:i,isLoading:l,createVideoLearning:o,updateVideoLearning:s,deleteVideoLearning:c}=we(),[d,u]=pi({onSave:async(e,t)=>{if(t){(await s(t._id,e)).success&&r("영상 학습 수정 완료","영상 학습 정보가 성공적으로 수정되었습니다.")}else{(await o(e)).success&&r("영상 학습 추가 완료","새로운 영상 학습이 성공적으로 추가되었습니다.")}},onDelete:async e=>{await c(e._id),r("영상 학습 삭제 완료",`${e.title}이(가) 삭제되었습니다.`)},onError:e=>{a("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}}),[h,p]=n.useState("all"),[f,g]=n.useState(!1),b=n.useMemo(()=>(e=>{const t=new Set;return t.add("all"),e.forEach(e=>{e.category&&t.add(e.category.toLowerCase())}),Array.from(t).sort()})(i),[i]),m=n.useMemo(()=>"all"===h?i:i.filter(e=>e.category===h),[i,h]);return n.useEffect(()=>{if(t&&i.length>0&&!f){const e=i.find(e=>e._id===t);e&&(u.handleEdit(e),g(!0))}},[t,i,f,u]),l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(A,{className:"text-red-600"})," 영상 학습 관리"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"유튜브 영상을 통한 학습 기록을 관리합니다"})]}),!d.showForm&&e.jsxs("button",{onClick:u.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(x,{})," 새 영상 추가"]})]}),!d.showForm&&b.length>0&&e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:()=>p("all"),className:"px-4 py-2 rounded-lg transition-colors font-medium "+("all"===h?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:["전체 (",i.length,")"]}),b.map(t=>{const r=i.filter(e=>e.category===t).length;return e.jsxs("button",{onClick:()=>p(t),className:"px-4 py-2 rounded-lg transition-colors font-medium "+(h===t?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:[t," (",r,")"]},t)})]}),d.showForm&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:d.editingItem?"영상 학습 수정":"새 영상 학습 추가"}),e.jsx(gi,{data:d.editingItem||void 0,onSave:u.handleSave,onCancel:u.handleCancel,isSaving:d.isSaving,availableCategories:b})]}),!d.showForm&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>{const r=t.videoId,a=r?_e(r,"hqdefault"):null;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[a&&e.jsxs("div",{className:"relative aspect-video bg-gray-200 dark:bg-gray-700",children:[e.jsx("img",{src:a,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-white text-xs font-medium",children:"YouTube"})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-medium",children:t.category}),t.rating&&e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(r,a)=>e.jsx(y,{className:"text-xs "+(a<t.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600")},a))})]}),e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:t.title}),t.purpose&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:t.purpose}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-4",children:[e.jsx("span",{children:he(t.watchDate)}),t.skillIds&&t.skillIds.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["스킬 ",t.skillIds.length,"개"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>u.handleEdit(t),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(k,{})," 수정"]}),e.jsxs("button",{onClick:()=>u.handleDelete(t),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(j,{})," 삭제"]})]})]})]},t._id)})}),!d.showForm&&0===m.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"text-6xl text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:"all"===h?"아직 등록된 영상 학습이 없습니다":`${h} 카테고리에 영상 학습이 없습니다`}),e.jsxs("button",{onClick:u.handleCreate,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[e.jsx(x,{})," 첫 영상 추가하기"]})]})]})},bi=({data:t,onSave:r,onCancel:a,isSaving:i=!1,availableCategories:l=["PLC","데이터분석","로봇공학","IoT","기타"]})=>{const{skillCategories:o,loading:s}=se(),{data:c=[],isLoading:d}=ce(),u=(null==t?void 0:t.watchDate)&&!isNaN(new Date(t.watchDate).getTime())?new Date(t.watchDate).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],[h,p]=n.useState(()=>(null==t?void 0:t.playlistId)?`https://www.youtube.com/playlist?list=${t.playlistId}`:""),f=(null==t?void 0:t.categoryIds)?t.categoryIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],[x,m]=n.useState(t?{title:t.title,category:t.category,categoryIds:f,watchDate:u,rating:t.rating||3,purpose:t.purpose||"",application:t.application||"",skillIds:(t.skillIds||[]).map(e=>"string"==typeof e?e:e._id).filter(Boolean),order:t.order||0}:{title:"",category:l[0]||"PLC",categoryIds:[],watchDate:u,rating:3,purpose:"",application:"",skillIds:[],order:0}),v=n.useMemo(()=>Ce(h),[h]);n.useMemo(()=>v?Oe():null,[v]);const k=n.useMemo(()=>null!==v,[v]),j=e=>{const t=x.categoryIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];m({...x,categoryIds:r})},w=x.title.trim()&&h.trim()&&k;return e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!x.title.trim()||!h.trim())return void alert("필수 필드(제목, 재생 목록 URL)를 모두 입력해주세요.");if(!k||!v)return void alert("❌ 올바른 유튜브 재생 목록 URL을 입력해주세요.");const{title:t,category:a,categoryIds:n,watchDate:i,rating:l,purpose:o,application:s,skillIds:c,order:d}=x,u={title:t,playlistId:v,category:a,categoryIds:n||[],watchDate:i,...void 0!==l&&{rating:l},...o&&{purpose:o},...s&&{application:s},skillIds:c||[],order:d||0};r(u)},className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["제목 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x.title,onChange:e=>m({...x,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"재생 목록 제목을 입력하세요",required:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["재생 목록 URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white "+(h&&!k?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"https://www.youtube.com/playlist?list=...",required:!0}),h&&!k&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"올바른 유튜브 재생 목록 URL을 입력해주세요"}),v&&e.jsxs("p",{className:"text-green-600 text-sm mt-1",children:["✅ 재생 목록 ID: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:v})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"카테고리 선택 📂 (다중 선택 가능)"}),x.categoryIds&&x.categoryIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:x.categoryIds.map(t=>{const r=c.find(e=>e._id===t);return r?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:[r.name,e.jsx("button",{type:"button",onClick:()=>j(t),className:"hover:bg-blue-700 rounded-full p-0.5",children:e.jsx(g,{className:"text-xs"})})]},t):null})}),d?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"카테고리 로딩 중..."}):c.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:c.map(t=>{const r=(x.categoryIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all "+(r?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>j(t._id),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]},t._id)})}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:'등록된 카테고리가 없습니다. 관리자 메뉴의 "카테고리 관리"에서 추가하세요.'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"시청 날짜"}),e.jsx("input",{type:"date",value:x.watchDate,onChange:e=>m({...x,watchDate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"평점"}),e.jsxs("div",{className:"flex items-center gap-2",children:[Array.from({length:5},(t,r)=>{const a=r+1;return e.jsx("button",{type:"button",onClick:()=>m({...x,rating:a}),className:"text-3xl transition-colors "+(a<=(x.rating||0)?"text-yellow-500 hover:text-yellow-600":"text-gray-300 dark:text-gray-600 hover:text-gray-400"),children:e.jsx(y,{})},r)}),e.jsxs("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:[x.rating,"/5"]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"시청 목적"}),e.jsx("textarea",{value:x.purpose,onChange:e=>m({...x,purpose:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical",rows:3,placeholder:"이 재생 목록을 왜 시청했는지 작성하세요..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"통합 적용 계획 (마크다운 지원)"}),e.jsx("textarea",{value:x.application,onChange:e=>m({...x,application:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm",rows:5,placeholder:"이 지식을 어떻게 활용할 계획인지 작성하세요..."})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"관련 기술 연동 🔗"}),s?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:"스킬 목록을 불러오는 중입니다..."}):e.jsxs(e.Fragment,{children:[(x.skillIds||[]).length>0&&e.jsx("div",{className:"mb-3 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("span",{className:"text-sm text-blue-700 dark:text-blue-300 font-medium",children:["✓ ",(x.skillIds||[]).length,"개 선택됨"]})}),e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 max-h-[300px] overflow-y-auto bg-gray-50 dark:bg-gray-800/50",children:o.map(t=>e.jsxs("div",{className:"mb-3 last:mb-0",children:[e.jsx("label",{className:"font-bold text-sm block mb-2",style:{color:t.color||"#3B82F6"},children:t.title}),e.jsx("div",{className:"ml-4 space-y-1",children:(t.skills||[]).map(t=>{const r=(x.skillIds||[]).includes(t._id);return e.jsxs("div",{onClick:()=>(e=>{const t=x.skillIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];m({...x,skillIds:r})})(t._id),className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-all "+(r?"bg-blue-100 dark:bg-blue-900/30 font-medium":"hover:bg-gray-100 dark:hover:bg-gray-600"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>{},className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:t.name})]},t._id)})})]},t._id))})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{type:"submit",disabled:i||!w||!k,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:[e.jsx(b,{})," ",i?"저장 중...":"저장"]}),e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"취소"})]})]})},xi=({playlistId:t,data:r,onSave:a,onCancel:i,isSaving:l=!1})=>{const[o,s]=n.useState(()=>(null==r?void 0:r.videoId)?`https://www.youtube.com/watch?v=${r.videoId}`:""),[c,d]=n.useState(r?{title:r.title,keyTakeaways:r.keyTakeaways||"",order:r.order||0}:{title:"",keyTakeaways:"",order:0}),u=n.useMemo(()=>Ne(o),[o]),h=n.useMemo(()=>u?_e(u):null,[u]),p=n.useMemo(()=>null!==u,[u]),f=c.title.trim()&&o.trim()&&p;return e.jsxs("form",{onSubmit:e=>{e.preventDefault(),c.title.trim()&&o.trim()?p&&u?a({playlistId:t,videoId:u,title:c.title,keyTakeaways:c.keyTakeaways||"",order:c.order||0}):alert("❌ 올바른 유튜브 영상 URL을 입력해주세요."):alert("필수 필드(제목, 영상 URL)를 모두 입력해주세요.")},className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["영상 URL ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white "+(o&&!p?"border-red-500":"border-gray-300 dark:border-gray-600"),placeholder:"https://www.youtube.com/watch?v=...",required:!0}),o&&!p&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"올바른 유튜브 URL을 입력해주세요"}),u&&e.jsxs("p",{className:"text-green-600 text-sm mt-1",children:["✅ 영상 ID: ",e.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:u})]}),h&&p&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:h,alt:"영상 썸네일",className:"w-full max-w-xs rounded-lg shadow-md"})})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["영상 제목 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:c.title,onChange:e=>d({...c,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"영상 제목을 입력하세요",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"핵심 배움 (마크다운 지원)"}),e.jsx("textarea",{value:c.keyTakeaways,onChange:e=>d({...c,keyTakeaways:e.target.value}),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical font-mono text-sm",rows:6,placeholder:"예시:\n- [2:30] React Query의 staleTime 이해\n- [5:15] 캐시 무효화 전략\n- [8:45] Optimistic Updates"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"타임스탬프 형식: [MM:SS] 또는 [H:MM:SS]"})]})]}),e.jsxs("div",{className:"flex gap-4 pt-4",children:[e.jsxs("button",{type:"submit",disabled:l||!f,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:[e.jsx(b,{})," ",l?"저장 중...":"저장"]}),e.jsx("button",{type:"button",onClick:i,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors font-medium",children:"취소"})]})]})},mi=()=>{const{success:t,error:r}=je(),{playlists:a,isLoading:i,createPlaylist:l,updatePlaylist:o,deletePlaylist:s}=Ee(),[c,d]=n.useState(null),[u,h]=n.useState(!1),[p,f]=n.useState(null),[g,b]=n.useState(!1),[v,w]=n.useState(""),{data:N=[]}=Se(c||void 0),_=Ae(),C=Te(),O=Pe(),[E,S]=pi({onSave:async(e,r)=>{if(r){(await o(r._id,e)).success&&t("재생 목록 수정 완료","재생 목록이 성공적으로 수정되었습니다.")}else{(await l(e)).success&&t("재생 목록 추가 완료","새로운 재생 목록이 추가되었습니다.")}},onDelete:async e=>{await s(e._id),t("재생 목록 삭제 완료",`${e.title}이(가) 삭제되었습니다.`)},onError:e=>{r("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}}),L=async()=>{if(!v.trim()||!c)return void alert("영상 URL을 입력해주세요");const e=v.split("\n").map(e=>e.trim()).filter(e=>Boolean(e));if(0!==e.length)try{let r=0;for(const t of e){if(!t)continue;const e=Ne(t);if(!e)continue;const a={playlistId:c,videoId:e,title:`영상 ${N.length+r+1}`,keyTakeaways:"",order:N.length+r};await _.mutateAsync(a),r++}w(""),b(!1),t("일괄 추가 완료",`${r}개의 영상이 추가되었습니다. 각 영상의 제목과 핵심 배움을 수정해주세요.`)}catch(a){r("일괄 추가 실패","영상 추가 중 오류가 발생했습니다.")}else alert("유효한 URL이 없습니다")};return i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(T,{className:"text-red-600"}),"재생 목록 관리"]}),e.jsxs("button",{onClick:S.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx(x,{}),"재생 목록 추가"]})]}),E.showForm&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:E.editingItem?"재생 목록 수정":"재생 목록 추가"}),E.editingItem?e.jsx(bi,{data:E.editingItem,onSave:S.handleSave,onCancel:S.handleCancel,isSaving:E.isSaving}):e.jsx(bi,{onSave:S.handleSave,onCancel:S.handleCancel,isSaving:E.isSaving})]})})}),u&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:p?"영상 학습 기록 수정":"영상 학습 기록 추가"}),e.jsx(xi,{playlistId:c,data:p,onSave:async e=>{try{p?(await C.mutateAsync({id:p._id,data:e}),t("영상 수정 완료","영상 학습 기록이 수정되었습니다.")):(await _.mutateAsync(e),t("영상 추가 완료","새로운 영상 학습 기록이 추가되었습니다.")),h(!1),f(null)}catch(a){r("영상 저장 실패","영상 저장 중 오류가 발생했습니다.")}},onCancel:()=>{h(!1),f(null)},isSaving:_.isPending||C.isPending})]})})}),e.jsxs("div",{className:"grid gap-4",children:[a.map(a=>{const n=c===a._id,i=n?N:[];return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a.title}),e.jsx("button",{onClick:()=>d(n?null:a._id),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:n?"영상 목록 접기":"영상 목록 펼치기",children:n?e.jsx(P,{}):e.jsx(m,{})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[a.categoryIds&&a.categoryIds.length>0?a.categoryIds.map(t=>{const r="string"==typeof t?t:null==t?void 0:t.name;return r?e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:r},"string"==typeof t?t:null==t?void 0:t._id):null}):a.category&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:a.category}),a.rating&&e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(t,r)=>e.jsx(y,{className:"text-sm "+(r<a.rating?"text-yellow-500":"text-gray-300")},r))}),e.jsxs("span",{children:["시청일: ",he(a.watchDate)]})]}),a.purpose&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:a.purpose})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>S.handleEdit(a),className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors",title:"재생 목록 수정",children:e.jsx(k,{})}),e.jsx("button",{onClick:()=>S.handleDelete(a),disabled:E.isDeleting,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors",title:"재생 목록 삭제",children:e.jsx(j,{})})]})]})}),n&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(A,{})," 영상 관리 (",i.length,"개)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>b(!g),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(T,{})," 영상 일괄 추가"]}),e.jsxs("button",{onClick:()=>{f(null),h(!0)},className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(x,{})," 영상 추가"]})]})]}),g&&e.jsxs("div",{className:"mb-4 p-4 border-2 border-green-500 rounded-lg bg-white dark:bg-gray-800",children:[e.jsx("h5",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"📝 영상 URL 일괄 추가"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"재생 목록의 각 영상 URL을 한 줄에 하나씩 입력하세요. 위에서부터 순서대로 추가됩니다."}),e.jsx("textarea",{value:v,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm mb-3",rows:6,placeholder:"https://www.youtube.com/watch?v=VIDEO_ID_1\nhttps://www.youtube.com/watch?v=VIDEO_ID_2\nhttps://www.youtube.com/watch?v=VIDEO_ID_3"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:L,disabled:_.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:_.isPending?"추가 중...":"일괄 추가"}),e.jsx("button",{onClick:()=>{b(!1),w("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm font-medium",children:"취소"})]})]}),i.length>0?e.jsx("div",{className:"space-y-2",children:i.map((a,n)=>e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:["#",n+1]}),e.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:a.title})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",a.videoId]}),a.keyTakeaways&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:a.keyTakeaways})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>{f(a),h(!0)},className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded transition-colors",title:"영상 수정",children:e.jsx(k,{})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("이 영상 학습 기록을 삭제하시겠습니까?"))try{await O.mutateAsync(e),t("영상 삭제 완료","영상 학습 기록이 삭제되었습니다.")}catch(a){r("영상 삭제 실패","영상 삭제 중 오류가 발생했습니다.")}})(a._id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors",title:"영상 삭제",children:e.jsx(j,{})})]})]})},a._id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg",children:[e.jsx(A,{className:"text-4xl mx-auto mb-2 opacity-30"}),e.jsx("p",{className:"text-sm",children:"이 재생 목록에 등록된 영상이 없습니다"}),e.jsx("p",{className:"text-xs mt-1",children:'위의 "영상 일괄 추가" 버튼을 사용하세요'})]})]})]},a._id)}),0===a.length&&e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(T,{className:"text-6xl mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"아직 등록된 재생 목록이 없습니다"})]})]})]})},vi=({activeLanguage:t,onChange:r})=>e.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-200 dark:border-gray-700",children:[{code:"ko",flag:"🇰🇷",label:"한국어"},{code:"en",flag:"🇺🇸",label:"English"},{code:"ja",flag:"🇯🇵",label:"日本語"}].map(a=>{const n=t===a.code;return e.jsxs("button",{type:"button",onClick:()=>r(a.code),className:"flex items-center gap-2 px-6 py-3 font-semibold transition-all duration-200 border-b-2 "+(n?"border-blue-600 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800"),children:[e.jsx("span",{className:"text-xl",children:a.flag}),e.jsx("span",{children:a.label})]},a.code)})}),ki=[{key:"FaBriefcase",icon:u,label:"💼 일반 업무"},{key:"FaCoffee",icon:L,label:"☕ 서비스/카페"},{key:"FaGraduationCap",icon:I,label:"🎓 교육/학습"},{key:"FaChartLine",icon:q,label:"📈 성장/분석"},{key:"FaLaptopCode",icon:D,label:"💻 프로그래밍"},{key:"FaCode",icon:M,label:"⌨️ 개발/코딩"},{key:"FaCog",icon:R,label:"⚙️ 기술/엔지니어링"},{key:"FaRobot",icon:F,label:"🤖 자동화/AI"},{key:"FaCar",icon:B,label:"🚗 자동차/운전"},{key:"FaShieldAlt",icon:U,label:"🛡️ 군대/보안"}],ji=({detail:t,index:r,editingCategoryIndex:a,onEdit:n,onRemove:i})=>{const{attributes:l,listeners:o,setNodeRef:s,transform:c,transition:d,isDragging:u}=me({id:r}),h={transform:ve.Transform.toString(c),transition:d,opacity:u?.5:1,zIndex:u?1e3:"auto"};return e.jsxs("div",{ref:s,style:h,className:"bg-white dark:bg-gray-800 p-4 rounded-lg border-2 border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-600 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{...l,...o,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",title:"드래그하여 순서 변경",children:e.jsx(z,{})}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"}),e.jsx("h5",{className:"font-bold text-gray-900 dark:text-white",children:t.category}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",t.items.length,"개 항목)"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>n(r),disabled:null!==a,className:"px-3 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors "+(null!==a?"opacity-50 cursor-not-allowed":""),children:"수정"}),e.jsx("button",{type:"button",onClick:()=>i(r),disabled:null!==a,className:"p-1.5 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors "+(null!==a?"opacity-50 cursor-not-allowed":""),title:"카테고리 삭제",children:e.jsx(j,{className:"text-xs"})})]})]}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 pl-4",children:[t.items.slice(0,3).map((t,r)=>e.jsx("li",{className:"list-disc",children:t},r)),t.items.length>3&&e.jsxs("li",{className:"text-gray-500 dark:text-gray-400 italic",children:["외 ",t.items.length-3,"개 항목..."]})]})]})},wi=({data:t,onSave:r,onCancel:a,isSaving:i=!1})=>{var l;const[o,c]=n.useState("ko"),{skillCategories:d,loading:h}=se(),p=(null==t?void 0:t.skillIds)?t.skillIds.map(e=>"string"==typeof e?e:null==e?void 0:e._id).filter(Boolean):[],f=t?{...t,iconKey:t.iconKey||"FaBriefcase",details:(t.details||[]).map((e,t)=>({...e,order:e.order??t})),skills:t.skills||[],skillsEn:t.skillsEn||[],skillsJa:t.skillsJa||[],skillIds:p}:{period:"",title:"",company:"",description:"",details:[],skills:[],skillsEn:[],skillsJa:[],skillIds:[],order:0,iconKey:"FaBriefcase"},[g,y]=n.useState(f),[m,v]=n.useState(Array.isArray(g.skills)?g.skills.join(", "):""),[k,j]=n.useState(null),[w,N]=n.useState({category:"",categoryEn:"",categoryJa:"",content:"",contentEn:"",contentJa:""}),_=e=>{const t=(e.skills||[]).map(e=>e._id).filter(Boolean),r=g.skillIds||[];let a;if(t.every(e=>r.includes(e)))a=r.filter(e=>!t.includes(e));else{const e=new Set([...r,...t]);a=Array.from(e)}y({...g,skillIds:a})},C=e=>{var t,r;const a=(g.details||[])[e];a&&(j(e),N({category:a.category,categoryEn:a.categoryEn||"",categoryJa:a.categoryJa||"",content:a.items.join("\n"),contentEn:(null==(t=a.itemsEn)?void 0:t.join("\n"))||"",contentJa:(null==(r=a.itemsJa)?void 0:r.join("\n"))||""}))},O=e=>{if(!confirm("이 카테고리를 삭제하시겠습니까?"))return;const t=[...g.details||[]];t.splice(e,1),y({...g,details:t})},E=""!==g.title.trim()&&""!==g.company.trim()&&""!==g.period.trim();return e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!E)return void alert("필수 필드(기간, 직책, 회사/기관)를 모두 입력해주세요.");const t=m.split(",").map(e=>e.trim()).filter(e=>e.length>0),a=Array.from(new Set((g.skillIds||[]).map(e=>"string"==typeof e?e:null==e?void 0:e._id).filter(Boolean))),n=(g.details||[]).map((e,t)=>({...e,order:e.order??t})),i={...g,skills:t,skillIds:a,details:n};r(i)},className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:t?"경력 수정":"경력 추가"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"기간"}),e.jsx("input",{type:"text",value:g.period,onChange:e=>y({...g,period:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"2018 - 2023"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"직책"}),e.jsx("input",{type:"text",value:g.title,onChange:e=>y({...g,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"회사/기관"}),e.jsx("input",{type:"text",value:g.company,onChange:e=>y({...g,company:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"순서"}),e.jsx("input",{type:"number",value:g.order,onChange:e=>{const t=parseInt(e.target.value);y({...g,order:isNaN(t)?0:t})},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0",placeholder:"표시 순서 (숫자가 작을수록 먼저 표시)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"아이콘"}),e.jsx("select",{value:g.iconKey||"FaBriefcase",onChange:e=>y({...g,iconKey:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:ki.map(t=>e.jsx("option",{value:t.key,children:t.label},t.key))}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{children:"미리보기:"}),s.createElement((null==(l=ki.find(e=>e.key===(g.iconKey||"FaBriefcase")))?void 0:l.icon)||u,{className:"text-xl"})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-2 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-bold text-gray-900 dark:text-white",children:"📋 카테고리별 상세 내용"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:"근무경험, 교육, 근무매장 등 카테고리별로 구체적인 내용을 정리하세요"})]}),e.jsxs("button",{type:"button",onClick:()=>{j((g.details||[]).length),N({category:"",categoryEn:"",categoryJa:"",content:"",contentEn:"",contentJa:""})},disabled:null!==k,className:"px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors flex items-center gap-2 text-sm "+(null!==k?"opacity-50 cursor-not-allowed":""),children:[e.jsx(x,{className:"text-xs"}),"카테고리 추가"]})]}),g.details&&g.details.length>0&&e.jsx(ge,{collisionDetection:ye,onDragEnd:e=>{const{active:t,over:r}=e;if(!r||t.id===r.id)return;const a=(g.details||[]).findIndex((e,r)=>r===t.id),n=(g.details||[]).findIndex((e,t)=>t===r.id);if(-1===a||-1===n)return;const i=[...g.details||[]],[l]=i.splice(a,1);if(!l)return;i.splice(n,0,l);const o=i.map((e,t)=>({...e,order:t}));y({...g,details:o})},children:e.jsx(be,{items:g.details.map((e,t)=>t),strategy:xe,children:e.jsx("div",{className:"space-y-3 mb-4",children:g.details.map((t,r)=>e.jsx(ji,{detail:t,index:r,editingCategoryIndex:k,onEdit:C,onRemove:O},r))})})}),null!==k&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-5 rounded-lg border-2 border-blue-400 dark:border-blue-600 shadow-lg",children:[e.jsx("h5",{className:"font-bold text-gray-900 dark:text-white mb-4",children:k<(g.details||[]).length?"카테고리 수정":"카테고리 추가"}),e.jsx("div",{className:"mb-4",children:e.jsx(vi,{activeLanguage:o,onChange:c})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["카테고리 이름 ","ko"===o&&e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===o?"🇰🇷 한국어":"en"===o?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===o&&e.jsx("input",{type:"text",value:w.category,onChange:e=>N({...w,category:e.target.value}),placeholder:"예: 근무경험, 교육, 근무매장",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-semibold"}),"en"===o&&e.jsx("input",{type:"text",value:w.categoryEn,onChange:e=>N({...w,categoryEn:e.target.value}),placeholder:"e.g., Work Experience, Education, Store",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-semibold"}),"ja"===o&&e.jsx("input",{type:"text",value:w.categoryJa,onChange:e=>N({...w,categoryJa:e.target.value}),placeholder:"例: 職務経験、教育、店舗",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-semibold"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["카테고리 내용 ","ko"===o&&e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===o?"🇰🇷 한국어":"en"===o?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===o&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{value:w.content,onChange:e=>N({...w,content:e}),placeholder:"항목들을 한 줄씩 입력하세요\n예:\n매장인원 관리\n신규파트너 교육\n라떼아트 교육",rows:8,className:"min-h-[200px]"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 한 줄에 하나씩 항목을 입력하세요 (Enter로 구분)"})]}),"en"===o&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{value:w.contentEn,onChange:e=>N({...w,contentEn:e}),placeholder:"Enter items one per line\ne.g.\nStore Staff Management\nNew Partner Training\nLatte Art Education",rows:8,className:"min-h-[200px]"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 Enter one item per line (separated by Enter)"})]}),"ja"===o&&e.jsxs(e.Fragment,{children:[e.jsx(Le,{value:w.contentJa,onChange:e=>N({...w,contentJa:e}),placeholder:"1行に1項目を入力してください\n例:\n店舗スタッフ管理\n新規パートナー教育\nラテアート教育",rows:8,className:"min-h-[200px]"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 1行に1項目を入力してください (Enterで区切る)"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{if(!w.category.trim()||!w.content.trim())return void alert("카테고리 이름과 내용을 모두 입력해주세요.");const e=w.content.split("\n").map(e=>e.trim()).filter(e=>e.length>0),t=w.contentEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0),r=w.contentJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0),a={category:w.category.trim(),categoryEn:w.categoryEn.trim()||void 0,categoryJa:w.categoryJa.trim()||void 0,items:e,itemsEn:t.length>0?t:void 0,itemsJa:r.length>0?r:void 0},n=[...g.details||[]];null!==k&&(n[k]=a),y({...g,details:n}),j(null),N({category:"",categoryEn:"",categoryJa:"",content:"",contentEn:"",contentJa:""})},className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(b,{}),"저장"]}),e.jsx("button",{type:"button",onClick:()=>{j(null),N({category:"",categoryEn:"",categoryJa:"",content:"",contentEn:"",contentJa:""})},className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg transition-colors",children:"취소"})]})]})]}),(!g.details||0===g.details.length)&&null===k&&e.jsxs("div",{className:"text-center py-6 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"아직 카테고리가 없습니다"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:'상단의 "카테고리 추가" 버튼을 눌러 시작하세요'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"설명 (리치텍스트 에디터) - 선택사항"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:'💡 위의 "카테고리별 상세 내용"을 사용하면 더 체계적으로 정리됩니다. 이 필드는 하위 호환성을 위해 유지됩니다.'}),e.jsx(Le,{value:g.description||"",onChange:e=>y({...g,description:e}),placeholder:"(선택사항) 전체적인 설명을 작성하거나, 위의 카테고리별 입력을 사용하세요.",rows:4,className:"min-h-[150px]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"이 경력에서 사용한 스킬 🔗"}),g.skillIds&&g.skillIds.length>0&&e.jsxs("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded",children:["✓ ",g.skillIds.length,"개 선택됨"]})]}),h?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:"스킬 목록을 불러오는 중입니다..."}):0===d.length?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-4 text-center border border-gray-300 dark:border-gray-600 rounded-lg",children:"등록된 스킬이 없습니다. 먼저 스킬을 추가해주세요."}):e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 max-h-[400px] overflow-y-auto",children:d.map(t=>{const r=(t.skills||[]).map(e=>e._id).filter(Boolean),a=g.skillIds||[],n=r.filter(e=>a.includes(e)).length,i=r.length>0&&n===r.length,l=n>0&&n<r.length;return e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded",onClick:()=>_(t),children:[e.jsx("input",{type:"checkbox",checked:i,ref:e=>{e&&(e.indeterminate=l)},onChange:()=>_(t),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",onClick:e=>e.stopPropagation()}),e.jsxs("label",{className:"font-semibold text-gray-900 dark:text-white flex-1 cursor-pointer",style:{color:t.color||"#3B82F6"},children:[t.title,n>0&&e.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",n,"/",r.length,")"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6",children:(t.skills||[]).map(t=>{const r=(g.skillIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(r?"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700":"hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>(e=>{const t=g.skillIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];y({...g,skillIds:r})})(t._id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm "+(r?"font-semibold text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"),children:t.name})]},t._id)})})]},t._id)})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 체크박스를 클릭하여 경력에서 사용한 스킬을 선택하세요. 카테고리 제목을 클릭하면 전체 선택/해제할 수 있습니다."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"기술 (쉼표로 구분) - 선택사항"}),e.jsx("input",{type:"text",value:m,onChange:e=>v(e.target.value),onBlur:()=>{const e=m.split(",").map(e=>e.trim()).filter(e=>e.length>0);y({...g,skills:e})},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"PLC 프로그래밍, Python, 데이터 분석"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 위의 스킬 체크박스를 사용하는 것을 권장합니다. 이 필드는 하위 호환성을 위해 유지됩니다."})]}),null!==k&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border-2 border-yellow-300 dark:border-yellow-700",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-300 font-medium",children:'⚠️ 카테고리 입력 중입니다. 위의 "저장" 버튼을 먼저 눌러 카테고리를 저장하세요.'})}),g.details&&g.details.length>0&&null===k&&e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-2 border-green-300 dark:border-green-700",children:[e.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300 font-medium mb-2",children:["✅ ",g.details.length,"개의 카테고리가 준비되었습니다"]}),e.jsx("p",{className:"text-xs text-green-700 dark:text-green-400",children:'아래 "저장" 버튼을 눌러 경력 데이터를 최종 저장하세요'})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t-2 border-gray-300 dark:border-gray-600",children:[e.jsx("button",{type:"submit",disabled:i||!E||null!==k,className:"flex-1 flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-bold py-3 rounded-lg transition-colors text-lg "+(i||!E||null!==k?"opacity-50 cursor-not-allowed":"shadow-lg"),title:null!==k?"카테고리 입력을 먼저 완료하세요":"",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"저장 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"text-xl"})," 최종 저장"]})}),e.jsx("button",{type:"button",onClick:a,disabled:i,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-3 rounded-lg transition-colors "+(i?"opacity-50 cursor-not-allowed":""),children:"취소"})]})]})},Ni=({experienceFilter:t="all",experienceSearchTerm:r="",selectedExperienceCompany:a="",selectedExperienceYear:i=""})=>{const{experiences:l,isLoading:o,createExperience:s,updateExperience:c,deleteExperience:d}=(()=>{const[e,t]=n.useState([]),[r,a]=n.useState(!1),i=n.useCallback(async()=>{a(!0);try{const e=await H.getAll();t(e.data.data||[])}catch(e){}finally{a(!1)}},[]),l=n.useCallback(async e=>{try{return await H.create(e),await i(),{success:!0}}catch(t){return{success:!1,error:t}}},[i]),o=n.useCallback(async(e,t)=>{try{return await H.update(e,t),await i(),{success:!0}}catch(r){return{success:!1,error:r}}},[i]),s=n.useCallback(async e=>{try{return await H.delete(e),await i(),{success:!0}}catch(t){return{success:!1,error:t}}},[i]);return n.useEffect(()=>{i()},[]),{experiences:e,isLoading:r,fetchExperiences:i,createExperience:l,updateExperience:o,deleteExperience:s}})(),[u,h]=n.useState(!1),[p,f]=n.useState(null),[g,y]=n.useState(!1),[b,m]=n.useState(!1),v=n.useMemo(()=>{let e=[...l];if("company"===t&&a?e=e.filter(e=>e.company===a):"year"===t&&i&&(e=e.filter(e=>(e.period||"").includes(i))),r){const t=r.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.company.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}return e},[l,t,r,a,i]);return o?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"경력 데이터를 불러오는 중..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"경력 관리"}),e.jsxs("button",{onClick:()=>{f(null),h(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(x,{}),"경력 추가"]})]}),("all"!==t||r||a||i)&&e.jsx("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["현재 필터:","all"===t&&!r&&" 💼 모든 경력","company"===t&&a&&` 🏢 ${a} 회사`,"year"===t&&i&&` 📅 ${i}년`,r&&` 🔍 "${r}" 검색`]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[v.length,"개 경력 표시 중 (전체 ",l.length,"개)"]})]})})}),u&&e.jsx("div",{className:"mb-6",children:e.jsx(wi,{data:p,onSave:async e=>{try{if(y(!0),p){(await c(p._id,e)).success&&(h(!1),f(null))}else{(await s(e)).success&&h(!1)}}catch(t){}finally{y(!1)}},onCancel:()=>{h(!1),f(null)}})}),v.length>0?e.jsx("div",{className:"space-y-4",children:v.map(t=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.company}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:t.period}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:t.description})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:()=>(e=>{f(e),h(!0)})(t),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:g||b,children:e.jsx(k,{})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("정말 삭제하시겠습니까?"))try{m(!0),await d(e._id)}catch(t){}finally{m(!1)}})(t),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:g||b,children:e.jsx(j,{})})]})]})},t._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:"all"!==t||r||a||i?"필터 조건에 맞는 경력이 없습니다.":"등록된 경력이 없습니다."}),("all"!==t||r||a||i)&&e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"필터를 초기화하거나 다른 검색어를 시도해보세요."})]})]})},_i=({data:t,onSave:r,onCancel:a,isSaving:i=!1})=>{const{formData:l,videoItems:o,currentLang:s,setCurrentLang:c,setFormData:d,handleVideoUrlChange:u,handleVideoDescriptionChange:h,handleAddVideo:p,handleRemoveVideo:f,prepareDataForSubmit:y}=(e=>{const[t,r]=n.useState("ko"),a=(null==e?void 0:e.categoryIds)?e.categoryIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],i=(null==e?void 0:e.skillIds)?e.skillIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],[l,o]=n.useState(()=>(null==e?void 0:e.videos)&&Array.isArray(e.videos)?e.videos.map((t,r)=>{var a,n,i;return{url:t,description:(null==(a=e.videoDescriptions)?void 0:a[r])||"",descriptionEn:(null==(n=e.videoDescriptionsEn)?void 0:n[r])||"",descriptionJa:(null==(i=e.videoDescriptionsJa)?void 0:i[r])||""}}):[]),[s,c]=n.useState(e?{...e,technologies:Array.isArray(e.technologies)?e.technologies.join("\n"):e.technologies||"",technologiesEn:Array.isArray(e.technologiesEn)?e.technologiesEn.join("\n"):e.technologiesEn||"",technologiesJa:Array.isArray(e.technologiesJa)?e.technologiesJa.join("\n"):e.technologiesJa||"",images:Array.isArray(e.images)?e.images.join("\n"):e.images||"",features:Array.isArray(e.features)?e.features.join("\n"):e.features||"",featuresEn:Array.isArray(e.featuresEn)?e.featuresEn.join("\n"):e.featuresEn||"",featuresJa:Array.isArray(e.featuresJa)?e.featuresJa.join("\n"):e.featuresJa||"",learnings:Array.isArray(e.learnings)?e.learnings.join("\n"):e.learnings||"",learningsEn:Array.isArray(e.learningsEn)?e.learningsEn.join("\n"):e.learningsEn||"",learningsJa:Array.isArray(e.learningsJa)?e.learningsJa.join("\n"):e.learningsJa||"",skillIds:i,categoryIds:a}:{title:"",titleEn:"",titleJa:"",description:"",descriptionEn:"",descriptionJa:"",technologies:"",technologiesEn:"",technologiesJa:"",category:"automation",categoryIds:[],status:"preparing",githubLink:"",liveLink:"",image:"",images:"",detailedDescription:"",detailedDescriptionEn:"",detailedDescriptionJa:"",features:"",featuresEn:"",featuresJa:"",learnings:"",learningsEn:"",learningsJa:"",order:0,skillIds:[]});return{formData:s,videoItems:l,currentLang:t,setCurrentLang:r,setFormData:c,setVideoItems:o,handleFieldChange:(e,t)=>{c(r=>({...r,[e]:t}))},handleArrayFieldChange:(e,t)=>{c(r=>({...r,[e]:t}))},handleVideoUrlChange:(e,t)=>{const r=[...l];r[e]&&(r[e].url=t,o(r))},handleVideoDescriptionChange:(e,t,r)=>{const a=[...l];a[e]&&("ko"===r?a[e].description=t:"en"===r?a[e].descriptionEn=t:"ja"===r&&(a[e].descriptionJa=t),o(a))},handleAddVideo:()=>{o([...l,{url:"",description:"",descriptionEn:"",descriptionJa:""}])},handleRemoveVideo:e=>{o(l.filter((t,r)=>r!==e))},prepareDataForSubmit:()=>{const e=l.map(e=>e.url).filter(e=>e.trim().length>0),t=l.map(e=>e.description),r=l.map(e=>e.descriptionEn),a=l.map(e=>e.descriptionJa);for(let n=0;n<l.length;n++){const e=l[n];if(e){if(e.description&&e.description.length>5e3)throw new Error(`영상 ${n+1}의 한국어 설명이 너무 깁니다 (현재: ${e.description.length}자, 최대: 5000자)`);if(e.descriptionEn&&e.descriptionEn.length>5e3)throw new Error(`영상 ${n+1}의 영어 설명이 너무 깁니다 (현재: ${e.descriptionEn.length}자, 최대: 5000자)`);if(e.descriptionJa&&e.descriptionJa.length>5e3)throw new Error(`영상 ${n+1}의 일본어 설명이 너무 깁니다 (현재: ${e.descriptionJa.length}자, 최대: 5000자)`)}}return{...s,technologies:"string"==typeof s.technologies?s.technologies.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):s.technologies||[],technologiesEn:"string"==typeof s.technologiesEn?s.technologiesEn.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):s.technologiesEn||[],technologiesJa:"string"==typeof s.technologiesJa?s.technologiesJa.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):s.technologiesJa||[],images:"string"==typeof s.images?s.images.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.images||[],videos:e,videoDescriptions:t,videoDescriptionsEn:r,videoDescriptionsJa:a,features:"string"==typeof s.features?s.features.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.features||[],featuresEn:"string"==typeof s.featuresEn?s.featuresEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.featuresEn||[],featuresJa:"string"==typeof s.featuresJa?s.featuresJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.featuresJa||[],learnings:"string"==typeof s.learnings?s.learnings.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.learnings||[],learningsEn:"string"==typeof s.learningsEn?s.learningsEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.learningsEn||[],learningsJa:"string"==typeof s.learningsJa?s.learningsJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0):s.learningsJa||[],skillIds:s.skillIds||[]}}}})(t),{skillCategories:m,loading:v}=se(),{data:k=[],isLoading:w}=ce(),N=e=>{const t=l.categoryIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];d({...l,categoryIds:r})},_=e=>{const t=(e.skills||[]).map(e=>e._id).filter(Boolean),r=l.skillIds||[];let a;if(t.every(e=>r.includes(e)))a=r.filter(e=>!t.includes(e));else{const e=new Set([...r,...t]);a=Array.from(e)}d({...l,skillIds:a})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:t?"프로젝트 수정":"프로젝트 추가"}),e.jsx(vi,{activeLanguage:s,onChange:c}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["제목 ","ko"===s&&e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===s&&e.jsx("input",{type:"text",value:l.title,onChange:e=>d({...l,title:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"프로젝트 제목",required:!0}),"en"===s&&e.jsx("input",{type:"text",value:l.titleEn||"",onChange:e=>d({...l,titleEn:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Project Title"}),"ja"===s&&e.jsx("input",{type:"text",value:l.titleJa||"",onChange:e=>d({...l,titleJa:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"プロジェクトタイトル"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"카테고리 선택 📂 (다중 선택 가능)"}),l.categoryIds&&l.categoryIds.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:l.categoryIds.map(t=>{const r=k.find(e=>e._id===t);return r?e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm",children:[r.name,e.jsx("button",{type:"button",onClick:()=>N(t),className:"hover:bg-blue-700 rounded-full p-0.5",children:e.jsx(g,{className:"text-xs"})})]},t):null})}),w?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"카테고리 로딩 중..."}):k.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:k.map(t=>{const r=(l.categoryIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-3 border-2 rounded-lg cursor-pointer transition-all "+(r?"border-primary-600 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>N(t._id),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]},t._id)})}):e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:'등록된 카테고리가 없습니다. 관리자 메뉴의 "카테고리 관리"에서 추가하세요.'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"상태"}),e.jsxs("select",{value:l.status,onChange:e=>d({...l,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"preparing",children:"준비 중"}),e.jsx("option",{value:"planning",children:"계획 중"}),e.jsx("option",{value:"completed",children:"완료"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"GitHub URL"}),e.jsx("input",{type:"text",value:l.githubLink||"",onChange:e=>d({...l,githubLink:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://github.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Live URL"}),e.jsx("input",{type:"text",value:l.liveLink||"",onChange:e=>d({...l,liveLink:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"이미지 URL"}),e.jsx("input",{type:"text",value:l.image,onChange:e=>d({...l,image:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"순서"}),e.jsx("input",{type:"number",value:l.order,onChange:e=>d({...l,order:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"사용된 스킬 (프로젝트 연동) 🔗"}),l.skillIds&&l.skillIds.length>0&&e.jsxs("span",{className:"text-xs font-semibold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded",children:["✓ ",l.skillIds.length,"개 선택됨"]})]}),v?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-2",children:"스킬 목록을 불러오는 중입니다..."}):0===m.length?e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 py-4 text-center border border-gray-300 dark:border-gray-600 rounded-lg",children:"등록된 스킬이 없습니다. 먼저 스킬을 추가해주세요."}):e.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 max-h-[400px] overflow-y-auto",children:m.map(t=>{const r=(t.skills||[]).map(e=>e._id).filter(Boolean),a=r.filter(e=>(l.skillIds||[]).includes(e)).length,n=r.length>0&&a===r.length,i=a>0&&a<r.length;return e.jsxs("div",{className:"mb-4 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300 dark:border-gray-600 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 p-2 rounded",onClick:()=>_(t),children:[e.jsx("input",{type:"checkbox",checked:n,ref:e=>{e&&(e.indeterminate=i)},onChange:()=>_(t),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",onClick:e=>e.stopPropagation()}),e.jsxs("label",{className:"font-semibold text-gray-900 dark:text-white flex-1 cursor-pointer",style:{color:t.color||"#3B82F6"},children:[t.title,a>0&&e.jsxs("span",{className:"ml-2 text-xs font-normal text-gray-500 dark:text-gray-400",children:["(",a,"/",r.length,")"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 pl-6",children:(t.skills||[]).map(t=>{const r=(l.skillIds||[]).includes(t._id);return e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded cursor-pointer transition-colors "+(r?"bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700":"hover:bg-gray-100 dark:hover:bg-gray-700 border border-transparent"),children:[e.jsx("input",{type:"checkbox",checked:r,onChange:()=>(e=>{const t=l.skillIds||[],r=t.includes(e)?t.filter(t=>t!==e):[...t,e];d({...l,skillIds:r})})(t._id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm "+(r?"font-semibold text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300"),children:t.name})]},t._id)})})]},t._id)})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"💡 체크박스를 클릭하여 프로젝트에서 사용한 스킬을 선택하세요. 카테고리 제목을 클릭하면 전체 선택/해제할 수 있습니다."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["설명 (리치텍스트 에디터)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===s&&e.jsx(Le,{value:l.description||"",onChange:e=>d({...l,description:e}),placeholder:"프로젝트에 대한 간단한 설명을 작성하세요.",rows:4,className:"min-h-[150px]"}),"en"===s&&e.jsx(Le,{value:l.descriptionEn||"",onChange:e=>d({...l,descriptionEn:e}),placeholder:"Write a brief description of the project.",rows:4,className:"min-h-[150px]"}),"ja"===s&&e.jsx(Le,{value:l.descriptionJa||"",onChange:e=>d({...l,descriptionJa:e}),placeholder:"プロジェクトの簡単な説明を書いてください。",rows:4,className:"min-h-[150px]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["기술 스택 (쉼표 또는 줄바꿈으로 구분)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===s&&e.jsx("textarea",{value:"string"==typeof l.technologies?l.technologies:Array.isArray(l.technologies)?l.technologies.join("\n"):"",onChange:e=>d({...l,technologies:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"PLC, Python, Arduino"}),"en"===s&&e.jsx("textarea",{value:"string"==typeof l.technologiesEn?l.technologiesEn:Array.isArray(l.technologiesEn)?l.technologiesEn.join("\n"):"",onChange:e=>d({...l,technologiesEn:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"PLC, Python, Arduino"}),"ja"===s&&e.jsx("textarea",{value:"string"==typeof l.technologiesJa?l.technologiesJa:Array.isArray(l.technologiesJa)?l.technologiesJa.join("\n"):"",onChange:e=>d({...l,technologiesJa:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"PLC, Python, Arduino"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"추가 이미지 URLs (줄바꿈으로 구분)"}),e.jsx("textarea",{value:"string"==typeof l.images?l.images:Array.isArray(l.images)?l.images.join("\n"):"",onChange:e=>{const t=e.target.value;d({...l,images:t})},rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"https://example.com/image1.jpg\r\nhttps://example.com/image2.jpg"})]}),e.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{className:"block text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(A,{className:"text-blue-600 dark:text-blue-400"}),"동영상 관리"]}),e.jsxs("button",{type:"button",onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors text-sm font-medium",children:[e.jsx(x,{})," 영상 추가"]})]}),0===o.length?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(A,{className:"text-4xl mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"아직 추가된 영상이 없습니다."}),e.jsx("p",{className:"text-sm mt-1",children:'위의 "영상 추가" 버튼을 클릭하여 영상을 추가하세요.'})]}):e.jsx("div",{className:"space-y-6",children:o.map((t,r)=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-white dark:bg-gray-900 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-md font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded-full text-sm font-bold",children:r+1}),"영상 ",r+1]}),e.jsxs("button",{type:"button",onClick:()=>f(r),className:"flex items-center gap-1 px-3 py-1 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-sm",children:[e.jsx(j,{})," 삭제"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"영상 URL *"}),e.jsx("input",{type:"url",value:t.url,onChange:e=>u(r,e.target.value),placeholder:"https://youtube.com/watch?v=... 또는 https://youtube.com/shorts/...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["영상 설명 (리치텍스트)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),e.jsxs("span",{className:"text-xs "+(("ko"===s?t.description.length:"en"===s?t.descriptionEn.length:t.descriptionJa.length)>5e3?"text-red-600 dark:text-red-400 font-bold":("ko"===s?t.description.length:"en"===s?t.descriptionEn.length:t.descriptionJa.length)>4e3?"text-orange-600 dark:text-orange-400":"text-gray-500 dark:text-gray-400"),children:["ko"===s?t.description.length:"en"===s?t.descriptionEn.length:t.descriptionJa.length," / 5000자"]})]}),"ko"===s&&e.jsx(Le,{value:t.description,onChange:e=>h(r,e,"ko"),placeholder:"이 영상에 대한 상세한 설명을 작성하세요. 굵게, 기울임, 리스트 등 다양한 서식을 사용할 수 있습니다.",rows:4,className:"min-h-[150px]"}),"en"===s&&e.jsx(Le,{value:t.descriptionEn,onChange:e=>h(r,e,"en"),placeholder:"Write a detailed description of this video. You can use bold, italic, lists, and other formatting.",rows:4,className:"min-h-[150px]"}),"ja"===s&&e.jsx(Le,{value:t.descriptionJa,onChange:e=>h(r,e,"ja"),placeholder:"この動画の詳細な説明を書いてください。太字、斜体、リストなどの書式を使用できます。",rows:4,className:"min-h-[150px]"}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"💡 이 설명은 프로젝트 상세 페이지에서 영상 하단에 표시됩니다."}),("ko"===s?t.description.length:"en"===s?t.descriptionEn.length:t.descriptionJa.length)>4e3&&e.jsx("p",{className:"text-xs text-orange-600 dark:text-orange-400",children:"⚠️ 글자 수가 많습니다. 간결하게 작성해주세요."})]})]})]},r))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["상세 설명 (리치텍스트 에디터)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===s&&e.jsx(Le,{value:l.detailedDescription||"",onChange:e=>d({...l,detailedDescription:e}),placeholder:"프로젝트의 상세한 설명을 작성해주세요.",rows:6,className:"min-h-[200px]"}),"en"===s&&e.jsx(Le,{value:l.detailedDescriptionEn||"",onChange:e=>d({...l,detailedDescriptionEn:e}),placeholder:"Write a detailed description of the project.",rows:6,className:"min-h-[200px]"}),"ja"===s&&e.jsx(Le,{value:l.detailedDescriptionJa||"",onChange:e=>d({...l,detailedDescriptionJa:e}),placeholder:"プロジェクトの詳細な説明を書いてください。",rows:6,className:"min-h-[200px]"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["주요 기능 (줄바꿈으로 구분)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===s&&e.jsx("textarea",{value:"string"==typeof l.features?l.features:Array.isArray(l.features)?l.features.join("\n"):"",onChange:e=>d({...l,features:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"실시간 모니터링\n데이터 수집 및 분석\n알림 시스템"}),"en"===s&&e.jsx("textarea",{value:"string"==typeof l.featuresEn?l.featuresEn:Array.isArray(l.featuresEn)?l.featuresEn.join("\n"):"",onChange:e=>d({...l,featuresEn:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"Real-time monitoring\nData collection and analysis\nAlert system"}),"ja"===s&&e.jsx("textarea",{value:"string"==typeof l.featuresJa?l.featuresJa:Array.isArray(l.featuresJa)?l.featuresJa.join("\n"):"",onChange:e=>d({...l,featuresJa:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"リアルタイム監視\nデータ収集と分析\n通知システム"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["학습 내용 (줄바꿈으로 구분)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===s?"🇰🇷 한국어":"en"===s?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===s&&e.jsx("textarea",{value:"string"==typeof l.learnings?l.learnings:Array.isArray(l.learnings)?l.learnings.join("\n"):"",onChange:e=>d({...l,learnings:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"PLC 프로그래밍 기법\n실시간 데이터 처리\n웹 기반 대시보드 구축"}),"en"===s&&e.jsx("textarea",{value:"string"==typeof l.learningsEn?l.learningsEn:Array.isArray(l.learningsEn)?l.learningsEn.join("\n"):"",onChange:e=>d({...l,learningsEn:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"PLC programming techniques\nReal-time data processing\nWeb-based dashboard development"}),"ja"===s&&e.jsx("textarea",{value:"string"==typeof l.learningsJa?l.learningsJa:Array.isArray(l.learningsJa)?l.learningsJa.join("\n"):"",onChange:e=>d({...l,learningsJa:e.target.value}),rows:4,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-y",placeholder:"PLCプログラミング技術\nリアルタイムデータ処理\nWebベースダッシュボード開発"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{try{const e=y();r(e)}catch(e){alert(e.message||"저장 중 오류가 발생했습니다. 콘솔을 확인해주세요.")}},disabled:i,className:"flex-1 flex items-center justify-center gap-2 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 rounded-lg transition-colors "+(i?"opacity-50 cursor-not-allowed":""),children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"저장 중..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{})," 저장"]})}),e.jsx("button",{type:"button",onClick:a,className:"flex-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-900 dark:text-white font-medium py-2 rounded-lg transition-colors",children:"취소"})]})]})},Ci=({projectFilter:t="all",projectSearchTerm:r="",selectedProjectCategory:a=""})=>{const{projects:i,isLoading:l,createProject:o,updateProject:s,deleteProject:c}=(()=>{const[e,t]=n.useState([]),[r,a]=n.useState(!1),i=n.useCallback(async()=>{a(!0);try{const e=(await K.getAll()).data.data||[];t(e)}catch(e){}finally{a(!1)}},[]),l=n.useCallback(async e=>{try{return await K.create(e),await i(),{success:!0}}catch(t){return{success:!1,error:t}}},[i]),o=n.useCallback(async(e,t)=>{try{return await K.update(e,t),await i(),{success:!0}}catch(r){return{success:!1,error:r}}},[i]),s=n.useCallback(async e=>{try{return await K.delete(e),await i(),{success:!0}}catch(t){return{success:!1,error:t}}},[i]);return n.useEffect(()=>{i()},[]),{projects:e,isLoading:r,fetchProjects:i,createProject:l,updateProject:o,deleteProject:s}})(),[d,u]=n.useState(!1),[h,p]=n.useState(null),[f,g]=n.useState(!1),[y,b]=n.useState(!1),m=n.useMemo(()=>{let e=[...i];if("category"===t&&a?e=e.filter(e=>e.category===a):"featured"===t&&(e=e.filter(e=>"completed"===e.status&&e.detailedDescription&&e.detailedDescription.trim().length>0)),r){const t=r.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.technologies&&e.technologies.some(e=>e.toLowerCase().includes(t))||e.category&&e.category.toLowerCase().includes(t))}return e},[i,t,r,a]),v=n.useMemo(()=>i.filter(e=>"completed"===e.status&&e.detailedDescription&&e.detailedDescription.trim().length>0).length,[i]);return l?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"프로젝트 데이터를 불러오는 중..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"프로젝트 관리"}),e.jsxs("button",{onClick:()=>{p(null),u(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(x,{}),"프로젝트 추가"]})]}),("all"!==t||r||a)&&e.jsx("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["현재 필터:","all"===t&&!r&&" 📁 모든 프로젝트","category"===t&&a&&` 🏷️ ${a} 카테고리`,"featured"===t&&" 🌟 주요 프로젝트",r&&` 🔍 "${r}" 검색`]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m.length,"개 프로젝트 표시 중 (전체 ",i.length,"개)","featured"===t&&` (주요 프로젝트: ${v}개)`]})]})})}),d&&e.jsx("div",{className:"mb-6",children:e.jsx(_i,{data:h,onSave:async e=>{var t,r,a,n,i,l,c,d,f,y,b,x,m;try{if(g(!0),h){const l=await s(h._id,e);if(l.success)u(!1),p(null),alert("✅ 프로젝트가 성공적으로 수정되었습니다!");else{const e=(null==(a=null==(r=null==(t=l.error)?void 0:t.response)?void 0:r.data)?void 0:a.message)||"알 수 없는 오류";alert(`❌ 프로젝트 수정 실패: ${e}`),null==(i=null==(n=l.error)?void 0:n.response)||i.data}}else{const t=await o(e);if(t.success)u(!1),alert("✅ 프로젝트가 성공적으로 추가되었습니다!");else{const e=(null==(d=null==(c=null==(l=t.error)?void 0:l.response)?void 0:c.data)?void 0:d.message)||"알 수 없는 오류";alert(`❌ 프로젝트 추가 실패: ${e}`),null==(y=null==(f=t.error)?void 0:f.response)||y.data}}}catch(v){const e=(null==(x=null==(b=null==v?void 0:v.response)?void 0:b.data)?void 0:x.message)||v.message||"알 수 없는 오류";alert(`❌ 저장 중 오류 발생: ${e}`),null==(m=null==v?void 0:v.response)||m.data}finally{g(!1)}},onCancel:()=>{u(!1),p(null)},isSaving:f})}),m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:t.description}),t.category&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-3",children:t.category}),t.technologies&&t.technologies.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[t.technologies.slice(0,3).map((t,r)=>e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:t},r)),t.technologies.length>3&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",t.technologies.length-3]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs "+("completed"===t.status?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"),children:"completed"===t.status?"완료":"진행중"}),"completed"===t.status&&t.detailedDescription&&t.detailedDescription.trim().length>0&&e.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded",children:"🌟 주요"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>(e=>{p(e),u(!0)})(t),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:f||y,children:e.jsx(k,{})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("정말 삭제하시겠습니까?"))try{b(!0),await c(e._id)}catch(t){}finally{b(!1)}})(t),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:f||y,children:e.jsx(j,{})})]})]})]},t._id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:"all"!==t||r||a?"필터 조건에 맞는 프로젝트가 없습니다.":"등록된 프로젝트가 없습니다."}),("all"!==t||r||a)&&e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"필터를 초기화하거나 다른 검색어를 시도해보세요."})]})]})},Oi="adminMessages",Ei=()=>t({queryKey:[Oi,"list"],queryFn:async()=>{const e=await J.getAll();return e.data.data||e.data||[]},staleTime:12e4,gcTime:3e5}),Si=()=>{const{data:e=[],isLoading:t}=Ei(),n=(()=>{const e=r();return a({mutationFn:async e=>{await J.markAsRead(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[Oi]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),i=(()=>{const e=r();return a({mutationFn:async e=>{await J.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[Oi]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),l=(()=>{const e=r();return a({mutationFn:e=>Promise.all(e.map(e=>J.markAsRead(e))).then(()=>{}),onSuccess:()=>{e.invalidateQueries({queryKey:[Oi]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),o=(()=>{const e=r();return a({mutationFn:e=>Promise.all(e.map(e=>J.delete(e))).then(()=>{}),onSuccess:()=>{e.invalidateQueries({queryKey:[Oi]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})();return{messages:e,isLoading:t,fetchMessages:()=>{},markAsRead:async e=>{try{return await n.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},deleteMessage:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},bulkMarkAsRead:async e=>{try{return await l.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},bulkDelete:async e=>{try{return await o.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}};const Ai=({messageId:r,isOpen:a,onClose:i,onMarkAsRead:l,onDelete:o,onReply:s})=>{const[c,d]=n.useState(!1),[u,h]=n.useState(!1),[p,f]=n.useState(""),{data:y,isLoading:b,isError:x,error:m,refetch:v}=function(e,r={}){const{enabled:a=!0,staleTime:n=3e5}=r;return t({queryKey:[Oi,"detail",e],queryFn:async()=>e?(await J.getById(e)).data.data:null,enabled:!!e&&a,staleTime:n,gcTime:6e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,select:e=>e||null})}(r,{enabled:a&&!!r});return a?b?e.jsx(pe,{children:e.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsx(fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8",onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(V,{className:"text-4xl text-blue-600 dark:text-blue-400 animate-spin mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"메시지 로딩 중..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"잠시만 기다려주세요"})]})})})}):x?e.jsx(pe,{children:e.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsx(fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8",onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"메시지를 불러올 수 없습니다"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:(null==m?void 0:m.message)||"알 수 없는 오류가 발생했습니다."}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>v(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"다시 시도"}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"닫기"})]})]})})})}):y?e.jsx(pe,{children:e.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsxs(fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"text-blue-600 dark:text-blue-400 text-xl"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"메시지 상세"}),!y.isRead&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"새 메시지"})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(g,{className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($,{className:"text-gray-500 dark:text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"보낸이"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:y.name})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(G,{className:"text-gray-500 dark:text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"이메일"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:y.email})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(W,{className:"text-gray-500 dark:text-gray-400 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"받은 시간"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(k=y.createdAt||"",new Date(k).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"상태"}),e.jsx("div",{className:"flex items-center gap-2",children:y.isRead?e.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[e.jsx(_,{})," 읽음"]}):e.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[e.jsx(G,{})," 읽지 않음"]})})]})})]}),e.jsx("div",{className:"mb-6",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:y.subject})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"메시지 내용"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:y.message})})]}),e.jsx(pe,{children:u&&e.jsxs(fe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"답장 작성"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"받는 사람"}),e.jsx("input",{type:"email",value:y.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"답장 내용"}),e.jsx("textarea",{value:p,onChange:e=>f(e.target.value),placeholder:"답장 내용을 입력하세요...",rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{alert("답장 기능은 향후 구현 예정입니다."),h(!1),f("")},disabled:!p.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[e.jsx(Z,{})," 답장 보내기"]}),e.jsx("button",{onClick:()=>{h(!1),f("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("button",{onClick:()=>{y&&(s?s(y):h(!0))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Z,{})," 답장"]}),e.jsxs("div",{className:"flex gap-3",children:[!y.isRead&&e.jsxs("button",{onClick:async()=>{if(y&&!y.isRead)try{d(!0),await l(y._id)}catch(e){}finally{d(!1)}},disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[e.jsx(_,{})," ",c?"처리 중...":"읽음 처리"]}),e.jsxs("button",{onClick:async()=>{if(y&&confirm("정말 이 메시지를 삭제하시겠습니까?"))try{d(!0),await o(y._id),i()}catch(e){}finally{d(!1)}},disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[e.jsx(j,{})," ",c?"삭제 중...":"삭제"]})]})]})]})})}):e.jsx(pe,{children:e.jsx(fe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:i,children:e.jsx(fe.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8",onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"text-center",children:[e.jsx(G,{className:"text-4xl text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"메시지를 찾을 수 없습니다"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"요청하신 메시지가 존재하지 않거나 삭제되었습니다."}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"닫기"})]})})})}):null;var k},Ti=()=>{const{messages:t,isLoading:r,markAsRead:a,deleteMessage:i}=Si(),[l,o]=n.useState(!1),[s,c]=n.useState(void 0),[d,u]=n.useState(!1),h=e=>{c(e._id),u(!0)},p=()=>{u(!1),c(void 0)};return r?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"메시지 데이터를 불러오는 중..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"메시지 관리"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["총 ",t.length,"개의 메시지"]})]}),e.jsx("div",{className:"space-y-4",children:t.map(t=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>h(t),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.subject}),!t.isRead&&e.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"새 메시지"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:t.message.length>100?`${t.message.substring(0,100)}...`:t.message}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:[e.jsxs("p",{children:["보낸이: ",t.name," (",t.email,")"]}),e.jsxs("p",{children:["받은 시간: ",t.createdAt?new Date(t.createdAt).toLocaleString("ko-KR"):"알 수 없음"]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:()=>h(t),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",title:"상세 보기",children:e.jsx(S,{})}),!t.isRead&&e.jsx("button",{onClick:()=>(async e=>{try{await a(e._id)}catch(t){}})(t),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm",children:"읽음 처리"}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("정말 삭제하시겠습니까?"))try{o(!0),await i(e._id)}catch(t){}finally{o(!1)}})(t),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:l,title:"삭제",children:e.jsx(j,{})})]})]})},t._id))})]}),d&&e.jsx(Ai,{messageId:s,isOpen:d,onClose:p,onMarkAsRead:async e=>{await a(e)},onDelete:async e=>{await i(e),p()}})]})},Pi=["skillCategories"],Li=()=>{const{skillCategories:e,loading:t,refetch:n}=se(),i=(()=>{const e=r();return a({mutationFn:async({id:e,data:t})=>{var r;const a=await Y.update(e,t);return(null==(r=a.data)?void 0:r.data)||a.data},onMutate:async({id:t,data:r})=>{await e.cancelQueries({queryKey:Pi});const a=e.getQueryData(Pi);return e.setQueryData(Pi,e=>e?e.map(e=>{var a;return{...e,skills:(null==(a=e.skills)?void 0:a.map(e=>e._id===t?{...e,...r,updatedAt:(new Date).toISOString()}:e))||[]}}):a),{previousCategories:a}},onError:(t,r,a)=>{(null==a?void 0:a.previousCategories)&&e.setQueryData(Pi,a.previousCategories)}})})(),l=(()=>{const e=r();return a({mutationFn:async e=>{var t;const r=await Y.createCategory(e);return(null==(t=r.data)?void 0:t.data)||r.data},onSuccess:()=>{e.invalidateQueries({queryKey:Pi})}})})(),o=(()=>{const e=r();return a({mutationFn:async({id:e,data:t})=>{var r;const a=await Y.updateCategory(e,t);return(null==(r=a.data)?void 0:r.data)||a.data},onSuccess:()=>{e.invalidateQueries({queryKey:Pi})}})})(),s=(()=>{const e=r();return a({mutationFn:async e=>{await Y.deleteCategory(e)},onSuccess:()=>{e.invalidateQueries({queryKey:Pi})}})})(),c=(()=>{const e=r();return a({mutationFn:async({categoryId:e,data:t})=>{var r;const a=await Y.create(e,t);return(null==(r=a.data)?void 0:r.data)||a.data},onSuccess:()=>{e.invalidateQueries({queryKey:Pi})}})})(),d=(()=>{const e=r();return a({mutationFn:async e=>{await Y.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:Pi})}})})();return{skillCategories:e,isLoading:t,fetchSkillCategories:n,createSkillCategory:async e=>{try{return{success:!0,data:await l.mutateAsync(e)}}catch(t){return{success:!1,error:t}}},updateSkillCategory:async(e,t)=>{try{return{success:!0,data:await o.mutateAsync({id:e,data:t})}}catch(r){return{success:!1,error:r}}},deleteSkillCategory:async e=>{try{return await s.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},createSkill:async(e,t)=>{try{return{success:!0,data:await c.mutateAsync({categoryId:e,data:t})}}catch(r){return{success:!1,error:r}}},updateSkill:async(e,t)=>{try{return{success:!0,data:await i.mutateAsync({id:e,data:t})}}catch(r){return{success:!1,error:r}}},deleteSkill:async e=>{try{return await d.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}},Ii=({initialData:t,onSave:r,onCancel:a,isSaving:i=!1})=>{const[l,o]=n.useState("ko"),[s,c]=n.useState({title:"",titleEn:"",titleJa:"",description:"",descriptionEn:"",descriptionJa:"",color:"#3B82F6",order:0});n.useEffect(()=>{t&&c({title:t.title,titleEn:t.titleEn||"",titleJa:t.titleJa||"",description:t.description||"",descriptionEn:t.descriptionEn||"",descriptionJa:t.descriptionJa||"",color:t.color,order:t.order})},[t]);const d=(e,t)=>{c(r=>({...r,[e]:t}))};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t?"카테고리 수정":"새 카테고리 추가"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(s)},className:"space-y-4",children:[e.jsx(vi,{activeLanguage:l,onChange:o}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["제목 ","ko"===l&&e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===l?"🇰🇷 한국어":"en"===l?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===l&&e.jsx("input",{type:"text",value:s.title,onChange:e=>d("title",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"예: 프로그래밍 언어",required:!0}),"en"===l&&e.jsx("input",{type:"text",value:s.titleEn||"",onChange:e=>d("titleEn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Programming Languages"}),"ja"===l&&e.jsx("input",{type:"text",value:s.titleJa||"",onChange:e=>d("titleJa",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"例: プログラミング言語"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["설명",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===l?"🇰🇷 한국어":"en"===l?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===l&&e.jsx("textarea",{value:s.description,onChange:e=>d("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"카테고리에 대한 설명을 입력하세요"}),"en"===l&&e.jsx("textarea",{value:s.descriptionEn||"",onChange:e=>d("descriptionEn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"Enter description for this category"}),"ja"===l&&e.jsx("textarea",{value:s.descriptionJa||"",onChange:e=>d("descriptionJa",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"このカテゴリの説明を入力してください"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"색상"}),e.jsx("input",{type:"color",value:s.color,onChange:e=>d("color",e.target.value),className:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"순서 (고급 옵션)"}),e.jsx("input",{type:"number",value:s.order,onChange:e=>d("order",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 카테고리 목록에서 드래그하여 순서를 변경할 수 있습니다"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"저장 중...":"저장"}),e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})},qi=({initialData:t,onSave:r,onCancel:a,isSaving:i=!1})=>{const[l,o]=n.useState("ko"),[s,c]=n.useState({name:"",nameEn:"",nameJa:"",level:50,icon:"FaMicrochip",description:"",descriptionEn:"",descriptionJa:"",order:0});n.useEffect(()=>{t&&c({name:t.name,nameEn:t.nameEn||"",nameJa:t.nameJa||"",level:t.level,icon:t.icon,description:t.description||"",descriptionEn:t.descriptionEn||"",descriptionJa:t.descriptionJa||"",order:t.order})},[t]);const d=(e,t)=>{c(r=>({...r,[e]:t}))};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:t?"스킬 수정":"새 스킬 추가"}),e.jsxs("form",{onSubmit:e=>{e.preventDefault(),r(s)},className:"space-y-4",children:[e.jsx(vi,{activeLanguage:l,onChange:o}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["이름 ","ko"===l&&e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===l?"🇰🇷 한국어":"en"===l?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===l&&e.jsx("input",{type:"text",value:s.name,onChange:e=>d("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"예: Python, React, PLC",required:!0}),"en"===l&&e.jsx("input",{type:"text",value:s.nameEn||"",onChange:e=>d("nameEn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Python, React, PLC"}),"ja"===l&&e.jsx("input",{type:"text",value:s.nameJa||"",onChange:e=>d("nameJa",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"例: Python, React, PLC"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["설명 (선택사항)",e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===l?"🇰🇷 한국어":"en"===l?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===l&&e.jsx("textarea",{value:s.description||"",onChange:e=>d("description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"스킬에 대한 간단한 설명"}),"en"===l&&e.jsx("textarea",{value:s.descriptionEn||"",onChange:e=>d("descriptionEn",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"Brief description of this skill"}),"ja"===l&&e.jsx("textarea",{value:s.descriptionJa||"",onChange:e=>d("descriptionJa",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,placeholder:"このスキルの簡単な説明"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"아이콘"}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"text-lg text-blue-600 dark:text-blue-400",children:e.jsx(X,{iconName:s.icon,size:20})}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"미리보기"})]}),e.jsxs("select",{value:s.icon,onChange:e=>d("icon",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsxs("optgroup",{label:"프로그래밍 언어",children:[e.jsx("option",{value:"FaPython",children:"Python"}),e.jsx("option",{value:"SiJavascript",children:"JavaScript"}),e.jsx("option",{value:"SiTypescript",children:"TypeScript"}),e.jsx("option",{value:"SiC",children:"C"}),e.jsx("option",{value:"SiCplusplus",children:"C++"}),e.jsx("option",{value:"SiCsharp",children:"C#"}),e.jsx("option",{value:"SiGo",children:"Go"}),e.jsx("option",{value:"SiRust",children:"Rust"}),e.jsx("option",{value:"SiJava",children:"Java"}),e.jsx("option",{value:"SiPhp",children:"PHP"}),e.jsx("option",{value:"SiRuby",children:"Ruby"}),e.jsx("option",{value:"SiSwift",children:"Swift"}),e.jsx("option",{value:"SiKotlin",children:"Kotlin"})]}),e.jsxs("optgroup",{label:"프레임워크 & 라이브러리",children:[e.jsx("option",{value:"SiReact",children:"React"}),e.jsx("option",{value:"SiNodedotjs",children:"Node.js"}),e.jsx("option",{value:"SiVuedotjs",children:"Vue.js"}),e.jsx("option",{value:"SiAngular",children:"Angular"}),e.jsx("option",{value:"SiNextdotjs",children:"Next.js"}),e.jsx("option",{value:"SiExpress",children:"Express"}),e.jsx("option",{value:"SiDjango",children:"Django"}),e.jsx("option",{value:"SiFlask",children:"Flask"}),e.jsx("option",{value:"SiSpring",children:"Spring"})]}),e.jsxs("optgroup",{label:"데이터베이스",children:[e.jsx("option",{value:"FaDatabase",children:"Database"}),e.jsx("option",{value:"SiMysql",children:"MySQL"}),e.jsx("option",{value:"SiMongodb",children:"MongoDB"}),e.jsx("option",{value:"SiPostgresql",children:"PostgreSQL"}),e.jsx("option",{value:"SiRedis",children:"Redis"}),e.jsx("option",{value:"SiSqlite",children:"SQLite"})]}),e.jsxs("optgroup",{label:"자동화 & 하드웨어",children:[e.jsx("option",{value:"FaMicrochip",children:"Microchip"}),e.jsx("option",{value:"FaRobot",children:"Robot"}),e.jsx("option",{value:"SiArduino",children:"Arduino"}),e.jsx("option",{value:"SiRaspberrypi",children:"Raspberry Pi"}),e.jsx("option",{value:"SiSiemens",children:"Siemens"}),e.jsx("option",{value:"SiMitsubishi",children:"Mitsubishi"})]}),e.jsxs("optgroup",{label:"개발 도구",children:[e.jsx("option",{value:"FaCode",children:"Code"}),e.jsx("option",{value:"FaServer",children:"Server"}),e.jsx("option",{value:"SiDocker",children:"Docker"}),e.jsx("option",{value:"SiGit",children:"Git"}),e.jsx("option",{value:"SiLinux",children:"Linux"}),e.jsx("option",{value:"SiGithub",children:"GitHub"}),e.jsx("option",{value:"SiGitlab",children:"GitLab"}),e.jsx("option",{value:"SiVisualstudiocode",children:"VS Code"})]}),e.jsxs("optgroup",{label:"언어",children:[e.jsx("option",{value:"FaLanguage",children:"언어 일반"}),e.jsx("option",{value:"FaGlobeAsia",children:"일본어"}),e.jsx("option",{value:"FaGlobeEurope",children:"독일어"}),e.jsx("option",{value:"FaFlag",children:"러시아어"}),e.jsx("option",{value:"FaFlagCheckered",children:"한국어"}),e.jsx("option",{value:"FaGlobe",children:"에스토니아어"}),e.jsx("option",{value:"FaFont",children:"중국어"}),e.jsx("option",{value:"FaComment",children:"영어"})]}),e.jsxs("optgroup",{label:"학문 & 전공",children:[e.jsx("option",{value:"FaLaptopCode",children:"컴퓨터공학"}),e.jsx("option",{value:"FaChartBar",children:"통계학"}),e.jsx("option",{value:"FaCalculator",children:"수학"}),e.jsx("option",{value:"FaSquareRootAlt",children:"수학 (고급)"}),e.jsx("option",{value:"FaUniversity",children:"대학/학술"}),e.jsx("option",{value:"FaGraduationCap",children:"졸업/학위"})]}),e.jsxs("optgroup",{label:"공학",children:[e.jsx("option",{value:"FaCogs",children:"공학 일반"}),e.jsx("option",{value:"FaTools",children:"기계공학"}),e.jsx("option",{value:"FaWrench",children:"기계설계"}),e.jsx("option",{value:"FaBolt",children:"전기공학"}),e.jsx("option",{value:"FaPlug",children:"전력공학"}),e.jsx("option",{value:"FaMicrochip",children:"전자공학"}),e.jsx("option",{value:"FaHardHat",children:"토목공학"}),e.jsx("option",{value:"FaBuilding",children:"건축공학"}),e.jsx("option",{value:"FaIndustry",children:"산업공학"}),e.jsx("option",{value:"FaChartLine",children:"경영공학"}),e.jsx("option",{value:"FaFlask",children:"화학공학"}),e.jsx("option",{value:"FaCubes",children:"재료공학"}),e.jsx("option",{value:"FaPlane",children:"항공공학"}),e.jsx("option",{value:"FaRocket",children:"우주공학"}),e.jsx("option",{value:"FaLeaf",children:"환경공학"}),e.jsx("option",{value:"FaRecycle",children:"자원공학"}),e.jsx("option",{value:"FaDna",children:"생명공학"}),e.jsx("option",{value:"FaOilCan",children:"석유공학"}),e.jsx("option",{value:"FaFire",children:"에너지공학"}),e.jsx("option",{value:"FaShieldAlt",children:"안전공학"})]}),e.jsxs("optgroup",{label:"과학",children:[e.jsx("option",{value:"FaAtom",children:"원자/물리학"}),e.jsx("option",{value:"FaFlask",children:"화학/실험"}),e.jsx("option",{value:"FaMicroscope",children:"생물학/연구"}),e.jsx("option",{value:"FaDna",children:"DNA/유전학"}),e.jsx("option",{value:"FaRocket",children:"우주/항공"}),e.jsx("option",{value:"FaSatellite",children:"위성/통신"}),e.jsx("option",{value:"FaBrain",children:"뇌과학/심리학"}),e.jsx("option",{value:"FaLightbulb",children:"발명/혁신"}),e.jsx("option",{value:"FaWaveSquare",children:"전자/전기공학"}),e.jsx("option",{value:"FaMagnet",children:"자기학/물리"})]}),e.jsxs("optgroup",{label:"예술 & 취미",children:[e.jsx("option",{value:"FaPalette",children:"미술"}),e.jsx("option",{value:"FaPaintBrush",children:"그림"}),e.jsx("option",{value:"FaCamera",children:"사진"}),e.jsx("option",{value:"FaCameraRetro",children:"사진 (레트로)"}),e.jsx("option",{value:"FaCoffee",children:"커피"}),e.jsx("option",{value:"FaMugHot",children:"커피 (머그)"}),e.jsx("option",{value:"FaMusic",children:"음악"}),e.jsx("option",{value:"FaGuitar",children:"악기"}),e.jsx("option",{value:"FaFilm",children:"영화/영상"})]}),e.jsxs("optgroup",{label:"경력 & 경험",children:[e.jsx("option",{value:"FaUserShield",children:"군인"}),e.jsx("option",{value:"FaShieldAlt",children:"방어/보안"}),e.jsx("option",{value:"FaCar",children:"운전"}),e.jsx("option",{value:"FaTruck",children:"트럭 운전"}),e.jsx("option",{value:"FaShippingFast",children:"물류"}),e.jsx("option",{value:"FaBriefcase",children:"비즈니스"}),e.jsx("option",{value:"FaHandshake",children:"협업"})]}),e.jsxs("optgroup",{label:"기타",children:[e.jsx("option",{value:"FaChartLine",children:"Chart"}),e.jsx("option",{value:"FaCubes",children:"Cubes"}),e.jsx("option",{value:"FaCog",children:"Settings"}),e.jsx("option",{value:"FaMobile",children:"Mobile"}),e.jsx("option",{value:"FaDesktop",children:"Desktop"}),e.jsx("option",{value:"FaCloud",children:"Cloud"}),e.jsx("option",{value:"FaNetworkWired",children:"Network"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"순서 (고급 옵션)"}),e.jsx("input",{type:"number",value:s.order,onChange:e=>d("order",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 스킬 목록에서 드래그하여 순서를 변경할 수 있습니다"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:i?"저장 중...":"저장"}),e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})},Di=({category:t,isExpanded:r,onToggle:a,onAddSkill:n,onEdit:i,onDelete:l,isSaving:o,isDeleting:s,children:c})=>{var d;const{attributes:u,listeners:h,setNodeRef:p,transform:f,transition:g,isDragging:y}=me({id:t._id}),b={transform:ve.Transform.toString(f),transition:g,opacity:y?.5:1};return e.jsxs("div",{ref:p,style:b,className:"bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[e.jsxs("div",{className:"p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",onClick:()=>a(t._id),children:[e.jsx("div",{...u,...h,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",title:"드래그하여 순서 변경",onClick:e=>e.stopPropagation(),children:e.jsx(z,{})}),e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:t.color}}),e.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:t.title}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",(null==(d=t.skills)?void 0:d.length)||0,"개 스킬)"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),n(t._id)},className:"p-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",disabled:o||s,children:e.jsx(x,{size:12})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),i(t)},className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:o||s,children:e.jsx(k,{size:12})}),e.jsx("button",{onClick:e=>{e.stopPropagation(),l(t)},className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:o||s,children:e.jsx(j,{size:12})}),r?e.jsx(m,{className:"text-gray-400"}):e.jsx(v,{className:"text-gray-400"})]})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 ml-7",children:t.description})]}),r&&c]})},Mi=({skill:t,categoryColor:r,currentLevel:a,hasChanges:n,isSavingThis:i,isSaving:l,isDeleting:o,onLevelChange:s,onSaveLevel:c,onEdit:d,onDelete:u,onToggleSidebar:h,onToggleLanguageCard:p})=>{const{attributes:f,listeners:g,setNodeRef:y,transform:x,transition:m,isDragging:v}=me({id:t._id}),w={transform:ve.Transform.toString(x),transition:m,opacity:v?.5:1};return e.jsxs("div",{ref:y,style:w,className:"flex items-center justify-between bg-white dark:bg-gray-700 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{...f,...g,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",title:"드래그하여 순서 변경",children:e.jsx(z,{})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("label",{className:"flex items-center gap-1 text-xs cursor-pointer",title:"사이드바 핵심기술에 표시",children:[e.jsx("input",{type:"checkbox",checked:t.showInSidebar||!1,onChange:()=>h(t),disabled:l||o,className:"w-3 h-3 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"핵심"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs cursor-pointer",title:"사이드바 언어카드에 표시",children:[e.jsx("input",{type:"checkbox",checked:t.showInLanguageCard||!1,onChange:()=>p(t),disabled:l||o,className:"w-3 h-3 text-green-600 rounded focus:ring-2 focus:ring-green-500"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"언어"})]})]}),e.jsx("div",{className:"text-lg text-blue-600 dark:text-blue-400",children:e.jsx(X,{iconName:t.icon,size:18})}),e.jsx("span",{className:"font-medium min-w-[120px]",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:a,onChange:e=>{const r=parseInt(e.target.value);s(t._id,r)},className:"flex-1 h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, ${r} 0%, ${r} ${a}%, #e5e7eb ${a}%, #e5e7eb 100%)`},disabled:l||o||i}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 min-w-[45px] text-right font-medium",children:[a,"%"]}),n&&e.jsx("button",{onClick:()=>c(t),disabled:i,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs font-medium transition-colors flex items-center gap-1 "+(i?"opacity-50 cursor-not-allowed":""),title:"변경된 숙련도 저장",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"저장중"]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{size:10}),"저장"]})})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2",children:[e.jsx("button",{onClick:()=>d(t),className:"p-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",disabled:l||o,children:e.jsx(k,{size:12})}),e.jsx("button",{onClick:()=>u(t),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:l||o,children:e.jsx(j,{size:12})})]})]})},Ri=()=>{const{skillCategories:t,isLoading:r,createSkillCategory:a,updateSkillCategory:i,deleteSkillCategory:l,createSkill:o,updateSkill:s,deleteSkill:c}=Li(),[d,u]=n.useState(null),[h,p]=n.useState(null),[f,g]=n.useState(null),[y,b]=n.useState(null),[m,v]=n.useState(new Set),[k,j]=n.useState(!1),[w,N]=n.useState(!1),[_,C]=n.useState(new Map),[O,E]=n.useState(new Set),S=n.useCallback((e,t)=>{C(r=>{const a=new Map(r);return a.set(e,t),a})},[]),A=n.useCallback(async e=>{const t=e._id,r=_.get(t);if(void 0!==r&&r!==e.level)try{E(e=>new Set(e).add(t)),await s(t,{name:e.name,icon:e.icon,level:r,order:e.order,...e.description&&{description:e.description},...e.color&&{color:e.color},...void 0!==e.showInSidebar&&{showInSidebar:e.showInSidebar},...void 0!==e.showInLanguageCard&&{showInLanguageCard:e.showInLanguageCard}}),C(e=>{const r=new Map(e);return r.delete(t),r})}catch(a){alert(`저장 실패: ${e.name}`)}finally{E(e=>{const r=new Set(e);return r.delete(t),r})}else C(e=>{const r=new Map(e);return r.delete(t),r})},[_,s]),T=n.useCallback(async e=>{if(e._id)try{E(t=>new Set(t).add(e._id));const t=!e.showInSidebar;await s(e._id,{name:e.name,icon:e.icon,level:e.level,order:e.order,showInSidebar:t,...e.description&&{description:e.description},...e.color&&{color:e.color},...void 0!==e.showInLanguageCard&&{showInLanguageCard:e.showInLanguageCard}})}catch(t){alert(`사이드바 표시 토글 실패: ${e.name}`)}finally{E(t=>{const r=new Set(t);return r.delete(e._id),r})}},[s]),P=n.useCallback(async e=>{if(e._id)try{E(t=>new Set(t).add(e._id));const t=!e.showInLanguageCard;await s(e._id,{name:e.name,icon:e.icon,level:e.level,order:e.order,showInLanguageCard:t,...e.description&&{description:e.description},...e.color&&{color:e.color},...void 0!==e.showInSidebar&&{showInSidebar:e.showInSidebar}})}catch(t){alert(`언어 카드 표시 토글 실패: ${e.name}`)}finally{E(t=>{const r=new Set(t);return r.delete(e._id),r})}},[s]),L=n.useCallback(async e=>{const{active:r,over:a}=e;if(!a||r.id===a.id)return;const n=t.findIndex(e=>e._id===r.id),l=t.findIndex(e=>e._id===a.id);if(-1===n||-1===l)return;const o=ke(t,n,l);try{for(let e=0;e<o.length;e++){const t=o[e];(null==t?void 0:t._id)&&await i(t._id,{title:t.title,color:t.color,order:e,...t.description&&{description:t.description}})}}catch(s){alert("순서 변경에 실패했습니다.")}},[t,i]),I=n.useCallback(async(e,r)=>{const{active:a,over:n}=e;if(!n||a.id===n.id)return;const i=t.find(e=>e._id===r);if(!i||!i.skills)return;const l=i.skills.findIndex(e=>e._id===a.id),o=i.skills.findIndex(e=>e._id===n.id);if(-1===l||-1===o)return;const c=ke(i.skills,l,o);try{for(let e=0;e<c.length;e++){const t=c[e];(null==t?void 0:t._id)&&await s(t._id,{name:t.name,icon:t.icon,level:t.level,order:e,...t.description&&{description:t.description},...t.color&&{color:t.color}})}}catch(d){alert("순서 변경에 실패했습니다.")}},[t,s]),q=e=>{v(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},D=e=>{p(e),u("category")},M=async e=>{if(confirm("정말 삭제하시겠습니까? 카테고리 내 모든 스킬도 함께 삭제됩니다."))try{N(!0),await l(e._id)}catch(t){}finally{N(!1)}},R=e=>{b(e),g(null),u("skill")},F=e=>{g(e),b(e.categoryId),u("skill")},B=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{N(!0),await c(e._id)}catch(t){}finally{N(!1)}},U=()=>{u(null),p(null),g(null),b(null)};return r?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2",children:"기술 데이터를 불러오는 중..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"기술 관리"}),e.jsxs("button",{onClick:()=>{p(null),u("category")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(x,{}),"카테고리 추가"]})]}),"category"===d&&e.jsx(Ii,{initialData:h,onSave:async e=>{try{if(j(!0),h){const t=await i(h._id,e);t.success?(u(null),p(null),alert("카테고리가 성공적으로 수정되었습니다.")):alert(`카테고리 수정 실패: ${t.error||"알 수 없는 오류"}`)}else{const t=await a(e);t.success?(u(null),alert("카테고리가 성공적으로 추가되었습니다.")):alert(`카테고리 추가 실패: ${t.error||"알 수 없는 오류"}`)}}catch(t){alert(`카테고리 저장 중 오류가 발생했습니다: ${t}`)}finally{j(!1)}},onCancel:U,isSaving:k}),"skill"===d&&e.jsx(qi,{initialData:f,categoryId:y||void 0,onSave:async e=>{if(y||f)try{j(!0);const t=(null==f?void 0:f.categoryId)||y;if(f){(await s(f._id,e)).success&&(u(null),g(null),b(null))}else{(await o(t,e)).success&&(u(null),b(null))}}catch(t){}finally{j(!1)}},onCancel:U,isSaving:k}),e.jsx(ge,{collisionDetection:ye,onDragEnd:L,children:e.jsx(be,{items:t.map(e=>e._id),strategy:xe,children:e.jsx("div",{className:"space-y-4",children:t.map(t=>{const r=m.has(t._id);return e.jsx(Di,{category:t,isExpanded:r,onToggle:q,onAddSkill:R,onEdit:D,onDelete:M,isSaving:k,isDeleting:w,children:e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800",children:t.skills&&t.skills.length>0?e.jsx(ge,{collisionDetection:ye,onDragEnd:e=>I(e,t._id),children:e.jsx(be,{items:t.skills.map(e=>e._id),strategy:xe,children:e.jsx("div",{className:"p-4 space-y-2",children:t.skills.sort((e,t)=>e.order-t.order).map(r=>{const a=_.get(r._id)??r.level,n=_.has(r._id)&&_.get(r._id)!==r.level,i=O.has(r._id);return e.jsx(Mi,{skill:r,categoryColor:t.color||"#3B82F6",currentLevel:a,hasChanges:n,isSavingThis:i,isSaving:k,isDeleting:w,onLevelChange:S,onSaveLevel:A,onEdit:F,onDelete:B,onToggleSidebar:T,onToggleLanguageCard:P},r._id)})})})}):e.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(x,{size:32,className:"text-blue-400 dark:text-blue-500 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"아직 스킬이 없습니다."}),e.jsx("p",{className:"text-xs mt-1",children:"카테고리 제목 옆의 + 버튼을 클릭하여 스킬을 추가하세요."})]})})},t._id)})})})}),0===t.length&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx("p",{className:"text-lg mb-2",children:"아직 생성된 카테고리가 없습니다."}),e.jsx("p",{children:'위의 "카테고리 추가" 버튼을 클릭하여 첫 번째 카테고리를 만들어보세요.'})]})]})},Fi=({data:t,onSave:r,onCancel:a,isSaving:i=!1})=>{const[l,o]=n.useState("ko"),[s,c]=n.useState(t?{name:t.name,nameEn:t.nameEn,nameJa:t.nameJa,order:t.order||0}:{name:"",nameEn:"",nameJa:"",order:0});return e.jsxs("form",{onSubmit:e=>{e.preventDefault(),s.name.trim()?r(s):alert("카테고리 이름을 입력해주세요")},className:"space-y-4",children:[e.jsx(vi,{activeLanguage:l,onChange:o}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["카테고리 이름 ","ko"===l&&e.jsx("span",{className:"text-red-500",children:"*"}),e.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(","ko"===l?"🇰🇷 한국어":"en"===l?"🇺🇸 English":"🇯🇵 日本語",")"]})]}),"ko"===l&&e.jsx("input",{type:"text",value:s.name,onChange:e=>c({...s,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"예: PLC, 웹개발, AI/ML",required:!0}),"en"===l&&e.jsx("input",{type:"text",value:s.nameEn||"",onChange:e=>c({...s,nameEn:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., PLC, Web Development, AI/ML"}),"ja"===l&&e.jsx("input",{type:"text",value:s.nameJa||"",onChange:e=>c({...s,nameJa:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"例: PLC, ウェブ開発, AI/ML"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"순서 (고급 옵션)"}),e.jsx("input",{type:"number",value:s.order,onChange:e=>c({...s,order:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"💡 카테고리 목록에서 드래그 앤 드롭으로 순서를 변경할 수 있습니다"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:i||!s.name.trim(),className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:[e.jsx(b,{}),i?"저장 중...":"저장"]}),e.jsx("button",{type:"button",onClick:a,disabled:i,className:"px-6 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:"취소"})]})]})},Bi=({category:t,onEdit:r,onDelete:a,isDeleting:n})=>{const{attributes:i,listeners:l,setNodeRef:o,transform:s,transition:c,isDragging:d}=me({id:t._id}),u={transform:ve.Transform.toString(s),transition:c,opacity:d?.5:1},{data:h}=ue(t._id);return e.jsx("div",{ref:o,style:u,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("button",{...i,...l,className:"mt-1 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-grab active:cursor-grabbing",title:"드래그하여 순서 변경",children:e.jsx(z,{})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.name}),h&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[h.usage.books>0&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:["📚 서적 ",h.usage.books,"개"]}),h.usage.projects>0&&e.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:["🚀 프로젝트 ",h.usage.projects,"개"]}),h.usage.videoLearnings>0&&e.jsxs("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:["📹 영상 ",h.usage.videoLearnings,"개"]}),h.usage.videoPlaylists>0&&e.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded",children:["📺 재생 목록 ",h.usage.videoPlaylists,"개"]}),0===h.usage.total&&e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"사용 중이지 않음"})]})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx("button",{onClick:r,className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors",title:"수정",children:e.jsx(k,{})}),e.jsx("button",{onClick:a,disabled:n,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors disabled:opacity-50",title:"삭제",children:e.jsx(j,{})})]})]})})},Ui=()=>{const{success:t,error:r}=je(),{categories:a,isLoading:n,createCategory:i,updateCategory:l,deleteCategory:o}=de(),[s,c]=pi({onSave:async(e,r)=>{if(r){const a=await l(r._id,e);if(!a.success)throw a.error;t("카테고리 수정 완료","카테고리가 성공적으로 수정되었습니다.")}else{const r=await i(e);if(!r.success)throw r.error;t("카테고리 추가 완료","새로운 카테고리가 추가되었습니다.")}},onDelete:async e=>{var a,n,i,l,s,c;const d=await o(e._id);if(!d.success){const e=(null==(i=null==(n=null==(a=d.error)?void 0:a.response)?void 0:n.data)?void 0:i.message)||"카테고리 삭제에 실패했습니다",t=null==(c=null==(s=null==(l=d.error)?void 0:l.response)?void 0:s.data)?void 0:c.usage;if(t){const e=[];t.books>0&&e.push(`서적 ${t.books}개`),t.projects>0&&e.push(`프로젝트 ${t.projects}개`),t.videoLearnings>0&&e.push(`영상 ${t.videoLearnings}개`),t.videoPlaylists>0&&e.push(`재생 목록 ${t.videoPlaylists}개`),r("삭제 불가",`이 카테고리는 ${e.join(", ")}에서 사용 중입니다. 먼저 해당 항목들의 카테고리를 변경해주세요.`)}else r("삭제 실패",e);throw d.error}t("카테고리 삭제 완료",`${e.name}이(가) 삭제되었습니다.`)},onError:e=>{r("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}});return n?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Q,{className:"text-yellow-600"}),"카테고리 관리"]}),e.jsxs("button",{onClick:c.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[e.jsx(x,{}),"카테고리 추가"]})]}),s.showForm&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full mx-4",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:s.editingItem?"카테고리 수정":"카테고리 추가"}),s.editingItem?e.jsx(Fi,{data:s.editingItem,onSave:c.handleSave,onCancel:c.handleCancel,isSaving:s.isSaving}):e.jsx(Fi,{onSave:c.handleSave,onCancel:c.handleCancel,isSaving:s.isSaving})]})})}),e.jsx(ge,{collisionDetection:ye,onDragEnd:async e=>{const{active:t,over:r}=e;if(!r||t.id===r.id)return;const n=a.findIndex(e=>e._id===t.id),i=a.findIndex(e=>e._id===r.id),o=ke(a,n,i);for(let a=0;a<o.length;a++){const e=o[a];e&&e.order!==a&&await l(e._id,{name:e.name,order:a})}},children:e.jsx(be,{items:a.map(e=>e._id),strategy:xe,children:e.jsx("div",{className:"grid gap-4",children:a.map(t=>e.jsx(Bi,{category:t,onEdit:()=>c.handleEdit(t),onDelete:()=>c.handleDelete(t),isDeleting:s.isDeleting},t._id))})})}),0===a.length&&e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Q,{className:"text-6xl mx-auto mb-4 opacity-30"}),e.jsx("p",{children:"아직 등록된 카테고리가 없습니다"}),e.jsx("p",{className:"text-sm mt-2",children:'위의 "카테고리 추가" 버튼을 클릭하여 첫 카테고리를 만들어보세요'})]})]})},zi=({notifications:t,showNotifications:r,onToggle:a,onNotificationClick:n})=>{const i=()=>t.filter(e=>!e.read).length;return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:a,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors relative",children:[e.jsx(ee,{}),"알림",i()>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i()})]}),r&&e.jsx("div",{className:"absolute right-0 top-full mt-2 w-80 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-50",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"알림"}),0===t.length?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"새로운 알림이 없습니다."}):e.jsxs("div",{className:"space-y-2",children:[t.slice(0,5).map(t=>e.jsxs("div",{onClick:()=>null==n?void 0:n(t.id),className:"p-3 rounded-lg border cursor-pointer transition-all hover:shadow-md "+(t.read?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30"),children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:t.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(t.createdAt).toLocaleString("ko-KR")})]},t.id)),t.length>5&&e.jsxs("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400 pt-2 border-t border-gray-200 dark:border-gray-700",children:["+",t.length-5,"개 더 보기"]})]})]})})]})},Hi=({filterGroup:t,count:r})=>{const{state:a,actions:i,data:l}=t,[o,s]=n.useState(!1);return e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"서적 관리"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>{i.setFilter("all"),i.setSearchTerm(""),s(!1),i.setSelectedCategory("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("all"!==a.filter||a.searchTerm||a.selectedCategory?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"),children:["📖 모든 서적 (",r,")"]}),e.jsx("button",{onClick:()=>{i.setFilter("five-star"),i.setSearchTerm(""),s(!1),i.setSelectedCategory("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("five-star"===a.filter?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"⭐ 평점 5점 서적"}),e.jsx("button",{onClick:()=>{i.setFilter("category"),i.setSearchTerm(""),s(!1)},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("category"===a.filter?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"📚 카테고리별 보기"}),"category"===a.filter&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsxs("select",{value:a.selectedCategory,onChange:e=>i.setSelectedCategory(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"카테고리 선택"}),l.categories.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("button",{onClick:()=>s(!o),className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+(o?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"🔍 서적 검색"}),o&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsx("input",{type:"text",placeholder:"제목, 저자, 카테고리 검색...",value:a.searchTerm,onChange:e=>i.setSearchTerm(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})}),("all"!==a.filter||a.searchTerm||a.selectedCategory)&&e.jsx("button",{onClick:()=>{i.setFilter("all"),i.setSearchTerm(""),i.setSelectedCategory(""),s(!1)},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:"🔄 필터 초기화"})]})]})},Ki=({filterGroup:t,count:r})=>{const{state:a,actions:i,data:l}=t,[o,s]=n.useState(!1);return e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"경력 관리"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>{i.setFilter("all"),i.setSearchTerm(""),s(!1),i.setSelectedCompany(""),i.setSelectedYear("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("all"!==a.filter||a.searchTerm||a.selectedCompany||a.selectedYear?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"),children:["💼 모든 경력 (",r,")"]}),e.jsx("button",{onClick:()=>{i.setFilter("company"),i.setSearchTerm(""),s(!1),i.setSelectedYear("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("company"===a.filter?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"🏢 회사별 보기"}),"company"===a.filter&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsxs("select",{value:a.selectedCompany,onChange:e=>i.setSelectedCompany(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"회사 선택"}),l.companies.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("button",{onClick:()=>{i.setFilter("year"),i.setSearchTerm(""),s(!1),i.setSelectedCompany("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("year"===a.filter?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"📅 연도별 보기"}),"year"===a.filter&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsxs("select",{value:a.selectedYear,onChange:e=>i.setSelectedYear(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"연도 선택"}),l.years.map(t=>e.jsxs("option",{value:t,children:[t,"년"]},t))]})}),e.jsx("button",{onClick:()=>s(!o),className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+(o?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"🔍 경력 검색"}),o&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsx("input",{type:"text",placeholder:"제목, 회사, 설명 검색...",value:a.searchTerm,onChange:e=>i.setSearchTerm(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})}),("all"!==a.filter||a.searchTerm||a.selectedCompany||a.selectedYear)&&e.jsx("button",{onClick:()=>{i.setFilter("all"),i.setSearchTerm(""),i.setSelectedCompany(""),i.setSelectedYear(""),s(!1)},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:"🔄 필터 초기화"})]})]})},Ji=({filterGroup:t,count:r})=>{const{state:a,actions:i,data:l}=t,[o,s]=n.useState(!1);return e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"프로젝트 관리"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>{i.setFilter("all"),i.setSearchTerm(""),s(!1),i.setSelectedCategory("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("all"!==a.filter||a.searchTerm||a.selectedCategory?"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300"),children:["📁 모든 프로젝트 (",r,")"]}),e.jsx("button",{onClick:()=>{i.setFilter("category"),i.setSearchTerm(""),s(!1)},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("category"===a.filter?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"🏷️ 카테고리별 보기"}),"category"===a.filter&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsxs("select",{value:a.selectedCategory,onChange:e=>i.setSelectedCategory(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"카테고리 선택"}),l.categories.map(t=>e.jsx("option",{value:t,children:t},t))]})}),e.jsx("button",{onClick:()=>{i.setFilter("featured"),i.setSearchTerm(""),s(!1),i.setSelectedCategory("")},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+("featured"===a.filter?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"🌟 주요 프로젝트"}),e.jsx("button",{onClick:()=>s(!o),className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+(o?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:"🔍 프로젝트 검색"}),o&&e.jsx("div",{className:"ml-4 mb-2",children:e.jsx("input",{type:"text",placeholder:"제목, 설명, 기술스택 검색...",value:a.searchTerm,onChange:e=>i.setSearchTerm(e.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})}),("all"!==a.filter||a.searchTerm||a.selectedCategory)&&e.jsx("button",{onClick:()=>{i.setFilter("all"),i.setSearchTerm(""),i.setSelectedCategory(""),s(!1)},className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:"🔄 필터 초기화"})]})]})},Vi=({activeSettingsSection:t,setActiveSettingsSection:r})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"사이트 설정"}),e.jsx("div",{className:"space-y-1",children:[{id:"general",label:"🏠 일반 설정",description:"사이트 기본 정보"},{id:"appearance",label:"🎨 외관 설정",description:"테마 및 디자인"},{id:"seo",label:"🔍 SEO 설정",description:"검색 엔진 최적화"},{id:"social",label:"📱 소셜 미디어",description:"소셜 링크 및 연락처"},{id:"analytics",label:"📊 분석 도구",description:"Google Analytics 등"},{id:"security",label:"🔒 보안 설정",description:"인증 및 보안"}].map(a=>e.jsx("button",{onClick:()=>r(a.id),className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors "+(t===a.id?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:a.label}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:a.description})]})},a.id))}),t&&e.jsx("button",{onClick:()=>r(null),className:"w-full text-left px-3 py-2 text-sm rounded-lg transition-colors text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"← 설정 메뉴로 돌아가기"})]}),Gi=({activeTab:t,setActiveTab:r,activeSettingsSection:a,setActiveSettingsSection:n,counts:i,refreshCounts:l,bookFilters:o,experienceFilters:s,projectFilters:c})=>e.jsx("div",{className:"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 p-6",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"빠른 메뉴"}),e.jsx("div",{className:"mb-8",children:e.jsxs("button",{onClick:()=>{r("settings"),n(null)},className:"w-full flex items-center gap-3 px-4 py-3 text-sm font-semibold rounded-lg transition-colors "+("settings"===t&&null===a?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{className:"text-lg",children:"🏠"}),"관리자 대시보드"]})}),e.jsxs("div",{className:"space-y-2 mb-8",children:[e.jsxs("button",{onClick:()=>r("books"),className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("books"===t?"bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"📚 서적 관리"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.books})]}),e.jsxs("button",{onClick:()=>{n(null),r("videoLearnings")},className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("videoLearnings"===t?"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"📹 개별 영상"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.videoLearnings||0})]}),e.jsxs("button",{onClick:()=>{n(null),r("videoPlaylists")},className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("videoPlaylists"===t?"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"📺 시리즈 영상"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.videoPlaylists||0})]}),e.jsxs("button",{onClick:()=>r("experiences"),className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("experiences"===t?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"💼 경력 관리"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.experiences})]}),e.jsxs("button",{onClick:()=>r("projects"),className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("projects"===t?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"🚀 프로젝트 관리"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.projects})]}),e.jsxs("button",{onClick:()=>r("messages"),className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("messages"===t?"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"💬 메시지 관리"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.messages})]}),e.jsxs("button",{onClick:()=>r("skills"),className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("skills"===t?"bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"⚡ 기술 관리"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.skills})]}),e.jsxs("button",{onClick:()=>{n(null),r("categories")},className:"w-full flex items-center justify-between px-4 py-2 text-sm rounded-lg transition-colors "+("categories"===t?"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[e.jsx("span",{children:"📂 카테고리 관리"}),e.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded-full",children:i.categories||0})]})]}),"books"===t&&e.jsx(Hi,{filterGroup:o,count:i.books}),"experiences"===t&&e.jsx(Ki,{filterGroup:s,count:i.experiences}),"projects"===t&&e.jsx(Ji,{filterGroup:c,count:i.projects}),"settings"===t&&e.jsx(Vi,{activeSettingsSection:a,setActiveSettingsSection:n}),e.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:l,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx("span",{children:"🔄"}),"데이터 새로고침"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:["마지막 업데이트: ",(new Date).toLocaleTimeString("ko-KR")]})]})})]})}),$i={fullName:"",firstName:"",role:"",subtitle:"",location:"",education:"",yearsOfExperience:"",email:"",phone:"",githubUrl:"",linkedinUrl:"",heroTitle:"",heroSubtitle:"",aboutTitle:"",aboutSubtitle:"",aboutDescription1:"",aboutDescription2:"",skillsTitle:"",skillsSubtitle:"",projectsTitle:"",projectsSubtitle:"",booksTitle:"",booksSubtitle:"",contactTitle:"",contactSubtitle:"",stat1Number:"",stat1Label:"",stat2Number:"",stat2Label:"",experienceTitle:"",experienceSubtitle:"",learningGoalsTitle:"앞으로의 학습 목표",learningGoalsDescription:"4차 산업혁명 시대에 발맞춰 **지능형 공장(Smart Factory) 구현**을 위해 다음 기술들을 집중적으로 탐구하여 전문성을 확대해 나가겠습니다.",learningGoalsList:["첨단 로봇 제어","딥러닝 기반 비전 시스템","엣지 컴퓨팅","클라우드 연동","MES/ERP 연동 기술"],siteTitle:"",siteDescription:"",siteKeywords:"",siteAuthor:"",siteLanguage:"ko",siteUrl:"",ogTitle:"",ogDescription:"",ogImage:"",ogType:"website",twitterCard:"summary_large_image",twitterSite:"",twitterCreator:"",robotsIndex:!0,robotsFollow:!0,googleAnalyticsId:"",googleSiteVerification:"",instagramUrl:"",twitterUrl:"",facebookUrl:"",youtubeUrl:"",tiktokUrl:"",behanceUrl:"",dribbbleUrl:"",mediumUrl:"",telegramUrl:"",discordUrl:"",kakaoTalkUrl:"",naverBlogUrl:"",tistoryUrl:"",velogUrl:"",notionUrl:"",googleTagManagerId:"",facebookPixelId:"",naverAnalyticsId:"",kakaoPixelId:"",hotjarId:"",mixpanelToken:"",amplitudeApiKey:"",sentryDsn:"",logRocketId:"",fullStoryOrgId:"",intercomAppId:"",zendeskWidgetKey:"",crispWebsiteId:"",tawkToPropertyId:"",liveChatLicense:"",olarkSiteId:"",enableHttps:!0,enableCsp:!0,cspDirectives:"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https:;",enableHsts:!0,hstsMaxAge:"31536000",enableXssProtection:!0,enableContentTypeOptions:!0,enableFrameOptions:!0,frameOptionsValue:"DENY",enableReferrerPolicy:!0,referrerPolicyValue:"strict-origin-when-cross-origin",enablePermissionsPolicy:!0,permissionsPolicyValue:"camera=(), microphone=(), geolocation=(), payment=()",enableApiRateLimit:!0,apiRateLimitPerMinute:"60",enableAdminAuth:!0,adminSessionTimeout:"3600",enableTwoFactorAuth:!1,enableIpWhitelist:!1,allowedIpAddresses:"",enableAuditLog:!0,enableBackup:!0,backupFrequency:"daily"},Wi=[{title:"🧑 개인 정보",fields:[{key:"fullName",label:"전체 이름",type:"text",placeholder:"최주영",isMultilingual:!0},{key:"firstName",label:"이름",type:"text",placeholder:"주영",isMultilingual:!0},{key:"role",label:"역할/직책",type:"text",placeholder:"공장자동화 전문가",isMultilingual:!0},{key:"subtitle",label:"부제목",type:"text",placeholder:"바리스타 → 자동화 엔지니어",isMultilingual:!0},{key:"location",label:"위치",type:"text",placeholder:"부산",isMultilingual:!0},{key:"education",label:"교육",type:"text",placeholder:"부산인력개발원",isMultilingual:!0},{key:"yearsOfExperience",label:"경력 기간",type:"text",placeholder:"5년",isMultilingual:!0},{key:"email",label:"이메일",type:"email",placeholder:"your@email.com"},{key:"phone",label:"전화번호",type:"tel",placeholder:"+82 10-1234-5678"}]},{title:"🔗 소셜 링크",fields:[{key:"githubUrl",label:"GitHub URL",type:"url",placeholder:"https://github.com/username"},{key:"linkedinUrl",label:"LinkedIn URL",type:"url",placeholder:"https://linkedin.com/in/username"}]},{title:"⚙️ 사이드바 설정",fields:[{key:"sidebarSkillCount",label:"사이드바 핵심기술 표시 개수",type:"number",min:3,max:6,placeholder:"4"},{key:"languageCardSkillCount",label:"사이드바 언어카드 표시 개수",type:"number",min:2,max:5,placeholder:"3"}]},{title:"🏠 Hero 섹션 (메인 페이지)",fields:[{key:"heroTitle",label:"Hero 제목",type:"text",placeholder:"공장자동화 전문가",isMultilingual:!0},{key:"heroSubtitle",label:"Hero 부제목",type:"textarea",rows:6,placeholder:"여러분의 소개를 작성하세요...",isMultilingual:!0},{key:"heroTag",label:"Hero 태그",type:"text",placeholder:"🎯 취업 준비 중",isMultilingual:!0}]},{title:"👤 About 섹션",fields:[{key:"aboutTitle",label:"About 제목",type:"text",placeholder:"저의 여정",isMultilingual:!0},{key:"aboutSubtitle",label:"About 부제목",type:"text",placeholder:"커피 한 잔에서 시작된...",isMultilingual:!0},{key:"aboutDescription1",label:"About 설명 1",type:"textarea",rows:6,placeholder:"첫 번째 문단...",isMultilingual:!0},{key:"aboutDescription2",label:"About 설명 2",type:"textarea",rows:6,placeholder:"두 번째 문단...",isMultilingual:!0},{key:"aboutCardTitle",label:"소개 카드 제목",type:"text",placeholder:"바리스타에서 자동화 전문가로",isMultilingual:!0},{key:"aboutJourneyTitle",label:"성장 여정 제목",type:"text",placeholder:"성장 여정",isMultilingual:!0}]},{title:"💼 Experience 섹션",fields:[{key:"experienceTitle",label:"Experience 제목",type:"text",placeholder:"경력 & 학습",isMultilingual:!0},{key:"experienceSubtitle",label:"Experience 부제목",type:"text",placeholder:"바리스타에서 자동화 전문가로...",isMultilingual:!0}]},{title:"🛠️ Skills 섹션",fields:[{key:"skillsTitle",label:"Skills 제목",type:"text",placeholder:"기술 스택",isMultilingual:!0},{key:"skillsSubtitle",label:"Skills 부제목",type:"text",placeholder:"공장자동화와 데이터 분석을...",isMultilingual:!0}]},{title:"🎯 학습 목표 (Skills 페이지)",fields:[{key:"learningGoalsTitle",label:"학습 목표 제목",type:"text",placeholder:"앞으로의 학습 목표",isMultilingual:!0},{key:"learningGoalsDescription",label:"학습 목표 설명",type:"textarea",placeholder:"4차 산업혁명 시대에...",isMultilingual:!0},{key:"learningGoalsList",label:"학습 목표 기술 목록",type:"array",placeholder:"기술 이름 입력 (Enter로 추가)"}]},{title:"📁 Projects 섹션",fields:[{key:"projectsTitle",label:"Projects 제목",type:"text",placeholder:"프로젝트",isMultilingual:!0},{key:"projectsSubtitle",label:"Projects 부제목",type:"text",placeholder:"다양한 분야의 프로젝트...",isMultilingual:!0},{key:"projectsUpdateTitle",label:"업데이트 카드 제목",type:"text",placeholder:"프로젝트 업데이트 예정",isMultilingual:!0},{key:"projectsUpdateDescription",label:"업데이트 카드 설명",type:"textarea",placeholder:"현재 학습 중인 기술들을 활용한 실제 프로젝트들을 곧 업로드할 예정입니다.",isMultilingual:!0},{key:"projectsUpdateTechList",label:"업데이트 예정 기술 목록",type:"array",placeholder:"기술 이름 입력 (Enter로 추가)"}]},{title:"📚 Books 섹션",fields:[{key:"booksTitle",label:"Books 제목",type:"text",placeholder:"기술 서적 & 학습 노트",isMultilingual:!0},{key:"booksSubtitle",label:"Books 부제목",type:"text",placeholder:"읽은 기술 서적과...",isMultilingual:!0}]},{title:"📞 Contact 섹션",fields:[{key:"contactTitle",label:"Contact 제목",type:"text",placeholder:"연락처",isMultilingual:!0},{key:"contactSubtitle",label:"Contact 부제목",type:"text",placeholder:"프로젝트나 협업에...",isMultilingual:!0}]},{title:"📊 통계 섹션",fields:[{key:"stat1Number",label:"통계 1 숫자",type:"text",placeholder:"5+"},{key:"stat1Label",label:"통계 1 라벨",type:"text",placeholder:"년 경력",isMultilingual:!0},{key:"stat2Number",label:"통계 2 숫자",type:"text",placeholder:"10+"},{key:"stat2Label",label:"통계 2 라벨",type:"text",placeholder:"기술 스택",isMultilingual:!0},{key:"stat3Number",label:"통계 3 숫자",type:"text",placeholder:"3+"},{key:"stat3Label",label:"통계 3 라벨",type:"text",placeholder:"완료 프로젝트",isMultilingual:!0}]},{title:"🔍 기본 SEO 설정",fields:[{key:"siteTitle",label:"사이트 제목",type:"text",placeholder:"포트폴리오 - 홍길동"},{key:"siteDescription",label:"사이트 설명",type:"textarea",rows:3,placeholder:"공장자동화 전문가 홍길동의 포트폴리오입니다. PLC 프로그래밍, 데이터 분석, 자동화 시스템 개발 경험을 소개합니다."},{key:"siteKeywords",label:"키워드 (쉼표로 구분)",type:"text",placeholder:"공장자동화, PLC, 데이터분석, 자동화시스템"},{key:"siteAuthor",label:"작성자",type:"text",placeholder:"홍길동"},{key:"siteLanguage",label:"사이트 언어",type:"select",placeholder:"언어 선택",options:[{value:"ko",label:"한국어 (ko)"},{value:"en",label:"English (en)"},{value:"ja",label:"日本語 (ja)"},{value:"zh",label:"中文 (zh)"}]},{key:"siteUrl",label:"사이트 URL",type:"url",placeholder:"https://yourportfolio.com"}]},{title:"📱 Open Graph (Facebook, LinkedIn)",fields:[{key:"ogTitle",label:"OG 제목",type:"text",placeholder:"포트폴리오 - 홍길동"},{key:"ogDescription",label:"OG 설명",type:"textarea",rows:3,placeholder:"공장자동화 전문가 홍길동의 포트폴리오를 확인해보세요."},{key:"ogImage",label:"OG 이미지 URL",type:"url",placeholder:"https://yourportfolio.com/og-image.jpg"},{key:"ogType",label:"OG 타입",type:"select",placeholder:"타입 선택",options:[{value:"website",label:"웹사이트 (website)"},{value:"profile",label:"프로필 (profile)"},{value:"article",label:"기사 (article)"}]}]},{title:"🐦 Twitter Card",fields:[{key:"twitterCard",label:"Twitter Card 타입",type:"select",placeholder:"카드 타입 선택",options:[{value:"summary",label:"요약 (summary)"},{value:"summary_large_image",label:"큰 이미지 요약 (summary_large_image)"},{value:"app",label:"앱 (app)"},{value:"player",label:"플레이어 (player)"}]},{key:"twitterSite",label:"Twitter 사이트 계정",type:"text",placeholder:"@yourhandle"},{key:"twitterCreator",label:"Twitter 작성자 계정",type:"text",placeholder:"@yourhandle"}]},{title:"🤖 검색 엔진 설정",fields:[{key:"robotsIndex",label:"검색 엔진 인덱싱 허용",type:"checkbox",placeholder:"검색 엔진이 이 사이트를 인덱싱할 수 있도록 허용합니다."},{key:"robotsFollow",label:"링크 팔로우 허용",type:"checkbox",placeholder:"검색 엔진이 이 사이트의 링크를 따라갈 수 있도록 허용합니다."}]},{title:"📊 Google 설정",fields:[{key:"googleAnalyticsId",label:"Google Analytics ID",type:"text",placeholder:"G-XXXXXXXXXX"},{key:"googleSiteVerification",label:"Google 사이트 인증 코드",type:"text",placeholder:"google-site-verification=..."}]},{title:"📱 글로벌 소셜 미디어",fields:[{key:"instagramUrl",label:"Instagram URL",type:"url",placeholder:"https://instagram.com/yourhandle"},{key:"twitterUrl",label:"Twitter URL",type:"url",placeholder:"https://twitter.com/yourhandle"},{key:"facebookUrl",label:"Facebook URL",type:"url",placeholder:"https://facebook.com/yourpage"},{key:"youtubeUrl",label:"YouTube URL",type:"url",placeholder:"https://youtube.com/@yourchannel"},{key:"tiktokUrl",label:"TikTok URL",type:"url",placeholder:"https://tiktok.com/@yourhandle"}]},{title:"🎨 디자인 & 포트폴리오",fields:[{key:"behanceUrl",label:"Behance URL",type:"url",placeholder:"https://behance.net/yourprofile"},{key:"dribbbleUrl",label:"Dribbble URL",type:"url",placeholder:"https://dribbble.com/yourhandle"}]},{title:"✍️ 블로그 & 글쓰기",fields:[{key:"mediumUrl",label:"Medium URL",type:"url",placeholder:"https://medium.com/@yourhandle"},{key:"velogUrl",label:"Velog URL",type:"url",placeholder:"https://velog.io/@yourhandle"},{key:"tistoryUrl",label:"Tistory URL",type:"url",placeholder:"https://yourblog.tistory.com"},{key:"naverBlogUrl",label:"네이버 블로그 URL",type:"url",placeholder:"https://blog.naver.com/yourblog"}]},{title:"💬 메신저 & 커뮤니케이션",fields:[{key:"telegramUrl",label:"Telegram URL",type:"url",placeholder:"https://t.me/yourhandle"},{key:"discordUrl",label:"Discord URL",type:"url",placeholder:"https://discord.gg/yourserver"},{key:"kakaoTalkUrl",label:"카카오톡 URL",type:"url",placeholder:"https://open.kakao.com/o/yourgroup"}]},{title:"📝 워크스페이스 & 도구",fields:[{key:"notionUrl",label:"Notion 워크스페이스 URL",type:"url",placeholder:"https://notion.so/yourworkspace"}]},{title:"📊 웹 분석 도구",fields:[{key:"googleTagManagerId",label:"Google Tag Manager ID",type:"text",placeholder:"GTM-XXXXXXX"},{key:"facebookPixelId",label:"Facebook Pixel ID",type:"text",placeholder:"123456789012345"},{key:"naverAnalyticsId",label:"네이버 웹마스터 도구 ID",type:"text",placeholder:"naver-site-verification=..."},{key:"kakaoPixelId",label:"카카오 픽셀 ID",type:"text",placeholder:"1234567890"}]},{title:"🔍 사용자 행동 분석",fields:[{key:"hotjarId",label:"Hotjar Site ID",type:"text",placeholder:"1234567"},{key:"mixpanelToken",label:"Mixpanel Project Token",type:"text",placeholder:"abc123def456..."},{key:"amplitudeApiKey",label:"Amplitude API Key",type:"text",placeholder:"abc123def456..."}]},{title:"🐛 에러 추적 & 모니터링",fields:[{key:"sentryDsn",label:"Sentry DSN",type:"text",placeholder:"https://abc123@sentry.io/123456"},{key:"logRocketId",label:"LogRocket App ID",type:"text",placeholder:"abc123def456"},{key:"fullStoryOrgId",label:"FullStory Org ID",type:"text",placeholder:"ABC123"}]},{title:"💬 고객 지원 & 채팅",fields:[{key:"intercomAppId",label:"Intercom App ID",type:"text",placeholder:"abc123def"},{key:"zendeskWidgetKey",label:"Zendesk Widget Key",type:"text",placeholder:"abc123def456..."},{key:"crispWebsiteId",label:"Crisp Website ID",type:"text",placeholder:"abc123def456..."}]},{title:"🎧 추가 채팅 도구",fields:[{key:"tawkToPropertyId",label:"Tawk.to Property ID",type:"text",placeholder:"abc123def456..."},{key:"liveChatLicense",label:"LiveChat License Number",type:"text",placeholder:"12345678"},{key:"olarkSiteId",label:"Olark Site ID",type:"text",placeholder:"abc123def456..."}]},{title:"🔒 기본 보안 헤더",fields:[{key:"enableHttps",label:"HTTPS 강제 사용",type:"checkbox",placeholder:"모든 HTTP 요청을 HTTPS로 리다이렉트합니다."},{key:"enableCsp",label:"Content Security Policy (CSP) 활성화",type:"checkbox",placeholder:"XSS 공격을 방지하기 위한 CSP 헤더를 설정합니다."},{key:"cspDirectives",label:"CSP 지시문",type:"textarea",rows:3,placeholder:"Content Security Policy 지시문을 설정합니다."},{key:"enableHsts",label:"HTTP Strict Transport Security (HSTS) 활성화",type:"checkbox",placeholder:"HTTPS 연결을 강제하는 HSTS 헤더를 설정합니다."},{key:"hstsMaxAge",label:"HSTS 최대 나이 (초)",type:"text",placeholder:"31536000 (1년)"}]},{title:"🛡️ 추가 보안 헤더",fields:[{key:"enableXssProtection",label:"XSS 보호 활성화",type:"checkbox",placeholder:"브라우저의 XSS 필터를 활성화합니다."},{key:"enableContentTypeOptions",label:"Content-Type 옵션 활성화",type:"checkbox",placeholder:"MIME 타입 스니핑 공격을 방지합니다."},{key:"enableFrameOptions",label:"X-Frame-Options 활성화",type:"checkbox",placeholder:"클릭재킹 공격을 방지합니다."},{key:"frameOptionsValue",label:"X-Frame-Options 값",type:"select",placeholder:"헤더 값 선택",options:[{value:"DENY",label:"DENY (모든 프레임 차단)"},{value:"SAMEORIGIN",label:"SAMEORIGIN (같은 도메인만 허용)"},{value:"ALLOW-FROM",label:"ALLOW-FROM (특정 도메인 허용)"}]},{key:"enableReferrerPolicy",label:"Referrer Policy 활성화",type:"checkbox",placeholder:"리퍼러 정보 노출을 제어합니다."},{key:"referrerPolicyValue",label:"Referrer Policy 값",type:"select",placeholder:"정책 값 선택",options:[{value:"no-referrer",label:"no-referrer (리퍼러 정보 전송 안함)"},{value:"strict-origin-when-cross-origin",label:"strict-origin-when-cross-origin (교차 도메인시 도메인만)"},{value:"same-origin",label:"same-origin (같은 도메인만)"}]}]},{title:"🔐 권한 및 정책",fields:[{key:"enablePermissionsPolicy",label:"Permissions Policy 활성화",type:"checkbox",placeholder:"브라우저 기능 사용을 제어합니다."},{key:"permissionsPolicyValue",label:"Permissions Policy 값",type:"textarea",rows:2,placeholder:"camera=(), microphone=(), geolocation=(), payment=()"}]},{title:"⚡ API 보안",fields:[{key:"enableApiRateLimit",label:"API 속도 제한 활성화",type:"checkbox",placeholder:"API 요청 빈도를 제한하여 DDoS 공격을 방지합니다."},{key:"apiRateLimitPerMinute",label:"분당 API 요청 제한",type:"text",placeholder:"60 (분당 60회)"}]},{title:"👤 관리자 인증",fields:[{key:"enableAdminAuth",label:"관리자 인증 활성화",type:"checkbox",placeholder:"관리자 대시보드 접근을 위한 인증을 활성화합니다."},{key:"adminSessionTimeout",label:"관리자 세션 타임아웃 (초)",type:"text",placeholder:"3600 (1시간)"},{key:"enableTwoFactorAuth",label:"2단계 인증 활성화",type:"checkbox",placeholder:"관리자 로그인시 2단계 인증을 요구합니다."},{key:"enableIpWhitelist",label:"IP 화이트리스트 활성화",type:"checkbox",placeholder:"특정 IP 주소에서만 관리자 접근을 허용합니다."},{key:"allowedIpAddresses",label:"허용된 IP 주소 (쉼표로 구분)",type:"text",placeholder:"192.168.1.1, 10.0.0.1"}]},{title:"📋 로그 & 백업",fields:[{key:"enableAuditLog",label:"감사 로그 활성화",type:"checkbox",placeholder:"관리자 활동을 기록하여 보안 감사를 지원합니다."},{key:"enableBackup",label:"자동 백업 활성화",type:"checkbox",placeholder:"정기적으로 데이터를 백업합니다."},{key:"backupFrequency",label:"백업 빈도",type:"select",placeholder:"백업 주기 선택",options:[{value:"hourly",label:"매시간 (hourly)"},{value:"daily",label:"매일 (daily)"},{value:"weekly",label:"매주 (weekly)"},{value:"monthly",label:"매월 (monthly)"}]}]}],Zi=(e,t)=>"ko"===t?e:"en"===t?`${e}En`:"ja"===t?`${e}Ja`:e,Yi=e=>{switch(e){case"general":return"🏠 일반 설정";case"appearance":return"🎨 외관 설정";case"seo":return"🔍 SEO 설정";case"social":return"📱 소셜 미디어";case"analytics":return"📊 분석 도구";case"security":return"🔒 보안 설정";default:return"사이트 설정"}},Xi=e=>{switch(e){case"general":return"사이트의 기본 정보와 개인 정보를 설정합니다.";case"appearance":return"각 섹션의 제목과 내용을 편집합니다.";case"seo":return"검색 엔진 최적화 설정을 관리합니다.";case"social":return"소셜 미디어 링크와 연락처 정보를 설정합니다.";case"analytics":return"Google Analytics 등 분석 도구를 설정합니다.";case"security":return"인증 및 보안 설정을 관리합니다.";default:return"포트폴리오의 모든 텍스트를 편집하고 저장하세요."}},Qi=e=>{if(!e)return Wi;switch(e){case"general":return Wi.filter(e=>e.title.includes("개인 정보")||e.title.includes("소셜 링크")||e.title.includes("사이드바 설정"));case"appearance":return Wi.filter(e=>e.title.includes("Hero")||e.title.includes("About")||e.title.includes("Experience")||e.title.includes("Skills")||e.title.includes("학습 목표")||e.title.includes("Projects")||e.title.includes("Books")||e.title.includes("Contact")||e.title.includes("통계"));case"seo":return Wi.filter(e=>e.title.includes("SEO")||e.title.includes("Open Graph")||e.title.includes("Twitter Card")||e.title.includes("검색 엔진")||e.title.includes("Google"));case"social":return Wi.filter(e=>e.title.includes("소셜 링크")||e.title.includes("글로벌 소셜 미디어")||e.title.includes("디자인 & 포트폴리오")||e.title.includes("블로그 & 글쓰기")||e.title.includes("메신저 & 커뮤니케이션")||e.title.includes("워크스페이스 & 도구"));case"analytics":return Wi.filter(e=>e.title.includes("웹 분석 도구")||e.title.includes("사용자 행동 분석")||e.title.includes("에러 추적")||e.title.includes("고객 지원")||e.title.includes("추가 채팅 도구"));case"security":return Wi.filter(e=>e.title.includes("기본 보안 헤더")||e.title.includes("추가 보안 헤더")||e.title.includes("권한 및 정책")||e.title.includes("API 보안")||e.title.includes("관리자 인증")||e.title.includes("로그 & 백업"));default:return Wi}},el=(e=null)=>{const{refetchSettings:t}=te(),[r,a]=n.useState($i),[i,l]=n.useState(!0),[o,s]=n.useState(!1),[c,d]=n.useState(null),[u,h]=n.useState(new Set(["개인 정보","소셜 링크"])),[p,f]=n.useState("ko"),g=n.useCallback(async()=>{try{const e=(e=>{const t={...$i,...e};return t.sidebarSkillCount&&(t.sidebarSkillCount="number"==typeof t.sidebarSkillCount?t.sidebarSkillCount:parseInt(String(t.sidebarSkillCount))||4),t.languageCardSkillCount&&(t.languageCardSkillCount="number"==typeof t.languageCardSkillCount?t.languageCardSkillCount:parseInt(String(t.languageCardSkillCount))||3),t})((await re.get()).data);a(e)}catch(e){d({type:"error",text:"설정을 불러오는데 실패했습니다. 기본 값으로 표시됩니다."})}finally{l(!1)}},[]);return n.useEffect(()=>{g()},[g]),n.useEffect(()=>{if(e)if("appearance"===e)h(new Set);else{const t=Qi(e).map(e=>e.title);h(new Set(t))}else h(new Set(["개인 정보","소셜 링크"]))},[e]),{settings:r,loading:i,saving:o,message:c,expandedSections:u,currentLang:p,setCurrentLang:f,handleChange:(e,t)=>{a(r=>({...r,[e]:t}))},handleSave:async()=>{s(!0),d(null);try{await re.update(r),await t(),d({type:"success",text:"✅ 설정이 성공적으로 저장되었습니다! 화면이 업데이트됩니다."}),setTimeout(()=>d(null),5e3)}catch(e){d({type:"error",text:"❌ 설정 저장에 실패했습니다. 콘솔을 확인해주세요."})}finally{s(!1)}},toggleSection:e=>{h(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},setExpandedSections:h}},tl=({field:t,value:r,onChange:a,currentLang:n="ko",settings:i})=>{const l=()=>{if(!t.isMultilingual||!i)return null;const r=i[t.key],a=i[Zi(t.key,"en")],n=i[Zi(t.key,"ja")];return e.jsxs("div",{className:"flex gap-2 text-xs mb-2",children:[e.jsxs("span",{className:"px-2 py-1 rounded "+(r?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["🇰🇷 ",r?"✓":"○"]}),e.jsxs("span",{className:"px-2 py-1 rounded "+(a?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["🇺🇸 ",a?"✓":"○"]}),e.jsxs("span",{className:"px-2 py-1 rounded "+(n?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["🇯🇵 ",n?"✓":"○"]})]})};return e.jsxs("div",{children:["checkbox"!==t.type&&e.jsx("label",{htmlFor:t.key,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t.label}),(()=>{var n;switch(t.type){case"textarea":return e.jsxs(e.Fragment,{children:[l(),e.jsx("textarea",{id:t.key,value:r||"",onChange:e=>a(e.target.value),rows:t.rows||3,placeholder:t.placeholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical"})]});case"select":return e.jsx("select",{id:t.key,value:r||"",onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:null==(n=t.options)?void 0:n.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))});case"checkbox":return e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:t.key,type:"checkbox",checked:r||!1,onChange:e=>a(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e.jsx("label",{htmlFor:t.key,className:"text-sm text-gray-700 dark:text-gray-300",children:t.placeholder})]});case"number":return e.jsx("input",{id:t.key,type:"number",value:r||"",onChange:e=>a(parseInt(e.target.value)||0),min:t.min,max:t.max,placeholder:t.placeholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"});case"array":return e.jsxs("div",{className:"space-y-2",children:[(r||[]).map((n,i)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:e=>{const t=[...r];t[i]=e.target.value,a(t)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t.placeholder}),e.jsx("button",{type:"button",onClick:()=>{const e=r.filter((e,t)=>t!==i);a(e)},className:"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"삭제"})]},i)),e.jsxs("button",{type:"button",onClick:()=>{const e=[...r||[],""];a(e)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(x,{size:12})," 항목 추가"]})]});default:return e.jsxs(e.Fragment,{children:[l(),e.jsx("input",{id:t.key,type:t.type,value:r||"",onChange:e=>a(e.target.value),placeholder:t.placeholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}})(),"checkbox"===t.type&&e.jsx("label",{htmlFor:t.key,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:t.label})]})},rl=({section:t,isExpanded:r,onToggle:a,currentLang:n,settings:i,onChange:l,setCurrentLang:o})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsx("button",{onClick:a,className:"w-full p-6 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(k,{className:"text-primary-500",size:20}),t.title,r?e.jsx(m,{className:"text-gray-400 ml-auto",size:16}):e.jsx(v,{className:"text-gray-400 ml-auto",size:16})]})}),e.jsx(pe,{children:r&&e.jsx(fe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 pt-4 border-t border-gray-200 dark:border-gray-700 "+(t.title.includes("Hero 섹션")?"py-8":""),children:[t.fields.some(e=>e.isMultilingual)&&e.jsx(vi,{activeLanguage:n,onChange:o}),e.jsx("div",{className:"grid gap-6 "+(t.title.includes("About 섹션")||t.title.includes("Hero 섹션")||t.title.includes("Experience 섹션")||t.title.includes("Skills 섹션")||t.title.includes("Projects 섹션")||t.title.includes("Books 섹션")||t.title.includes("소셜 링크")||t.title.includes("Contact 섹션")?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),children:t.fields.map(t=>{const r=t.isMultilingual?Zi(t.key,n):t.key;return e.jsx(tl,{field:t,value:i[r]||"checkbox"!==t.type&&("array"===t.type?[]:""),onChange:e=>l(r,e),currentLang:n,settings:i},t.key)})})]})})})]}),al=({activeSection:t=null})=>{const{settings:r,loading:a,saving:n,message:i,expandedSections:l,currentLang:o,setCurrentLang:s,handleChange:c,handleSave:d,toggleSection:u,setExpandedSections:h}=el(t);if(a)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"설정을 불러오는 중..."})]});const p=Qi(t);return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Yi(t)}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:Xi(t)})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{const e=p.map(e=>e.title);h(new Set(e))},className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm",children:"모두 펼치기"}),e.jsx("button",{onClick:()=>h(new Set),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm",children:"모두 접기"}),e.jsxs("button",{onClick:d,disabled:n,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(b,{}),n?"저장 중...":"모두 저장"]})]})]}),i&&e.jsx(fe.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},className:"p-4 rounded-lg shadow-md "+("success"===i.type?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-400 dark:border-green-700":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-400 dark:border-red-700"),children:i.text}),p.map(t=>e.jsx(rl,{section:t,isExpanded:l.has(t.title),onToggle:()=>u(t.title),currentLang:o,settings:r,onChange:c,setCurrentLang:s},t.title)),!t&&e.jsx("div",{className:"py-4",children:e.jsxs("button",{onClick:d,disabled:n,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(b,{size:20}),n?"설정 저장 중...":"모두 저장하고 적용"]})})]})},nl=()=>{const{isAuthenticated:a,logout:i,isLoading:l}=le(),o=c(),[s,d]=n.useState(!1),{toasts:u,hideToast:h}=je(),{activeTab:p,setActiveTab:f,activeSettingsSection:g,setActiveSettingsSection:y,bookFilters:b,experienceFilters:x,projectFilters:m}=(()=>{const[e,t]=n.useState("settings"),[r,a]=n.useState(null),[i,l]=n.useState("all"),[o,s]=n.useState(""),[c,d]=n.useState(""),[u,h]=n.useState("all"),[p,f]=n.useState(""),[g,y]=n.useState(""),[b,x]=n.useState(""),[m,v]=n.useState("all"),[k,j]=n.useState(""),[w,N]=n.useState("");return{activeTab:e,setActiveTab:t,activeSettingsSection:r,setActiveSettingsSection:a,bookFilters:{state:{filter:i,searchTerm:o,selectedCategory:c},actions:{setFilter:l,setSearchTerm:s,setSelectedCategory:d},data:{categories:["프로그래밍","데이터베이스","웹 개발","AI/ML","시스템 설계"]}},experienceFilters:{state:{filter:u,searchTerm:p,selectedCompany:g,selectedYear:b},actions:{setFilter:h,setSearchTerm:f,setSelectedCompany:y,setSelectedYear:x},data:{companies:["ABC Corp","XYZ Inc","Dev Solutions","Tech Startup"],years:["2024","2023","2022","2021","2020"]}},projectFilters:{state:{filter:m,searchTerm:k,selectedCategory:w},actions:{setFilter:v,setSearchTerm:j,setSelectedCategory:N},data:{categories:["웹 개발","모바일 앱","데이터 분석","임베디드","AI/ML"]}}}})(),{counts:v,refreshCounts:k}=(()=>{r();const{data:e,isLoading:a}=t({queryKey:["dataCounts"],queryFn:async()=>{var e,t,r,a,n,i,l,o,s,c,d,u,h,p,f;const[g,y,b,x,m,v,k,j]=await Promise.all([C.getAll(),ae.getAll(),ne.getAll(),H.getAll(),K.getAll(),J.getAll(),Y.getCategories(),ie.getAll()]);return{books:(null==(t=null==(e=g.data)?void 0:e.data)?void 0:t.length)||0,videoLearnings:(null==(a=null==(r=y.data)?void 0:r.data)?void 0:a.length)||0,videoPlaylists:(null==(i=null==(n=b.data)?void 0:n.data)?void 0:i.length)||0,experiences:(null==(o=null==(l=x.data)?void 0:l.data)?void 0:o.length)||0,projects:(null==(c=null==(s=m.data)?void 0:s.data)?void 0:c.length)||0,messages:(null==(u=null==(d=v.data)?void 0:d.data)?void 0:u.length)||0,skills:(null==(p=null==(h=k.data)?void 0:h.data)?void 0:p.length)||0,categories:(null==(f=j.data)?void 0:f.length)||0}},staleTime:12e4,gcTime:3e5,refetchOnWindowFocus:!0});return{counts:e||{books:0,videoLearnings:0,videoPlaylists:0,experiences:0,projects:0,messages:0,skills:0,categories:0},isLoading:a,refreshCounts:()=>{}}})(),{data:j=[]}=Ei(),w=n.useMemo(()=>j.filter(e=>!e.isRead).map(e=>({id:e._id||"",message:`${e.name}님으로부터 새로운 메시지: ${e.subject}`,read:!1,createdAt:e.createdAt||(new Date).toISOString()})).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),[j]);if(n.useEffect(()=>{const e=o.state;(null==e?void 0:e.tab)&&f(e.tab)},[o.state,f]),!a&&!l)return e.jsx("div",{children:"로그인이 필요합니다."});if(l)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})});return e.jsxs(e.Fragment,{children:[e.jsx(di,{toasts:u,onClose:h}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-white",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"flex-1 p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"관리자 대시보드"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(zi,{notifications:w,showNotifications:s,onToggle:()=>d(!s),onNotificationClick:()=>{f("messages"),d(!1)}}),e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[e.jsx(oe,{}),"로그아웃"]})]})]}),(()=>{const t=o.state,r=null==t?void 0:t.editId;switch(p){case"books":return e.jsx(fi,{bookFilter:b.state.filter,bookSearchTerm:b.state.searchTerm,selectedBookCategory:b.state.selectedCategory,initialEditId:r});case"videoLearnings":return e.jsx(yi,{initialEditId:r});case"videoPlaylists":return e.jsx(mi,{});case"experiences":return e.jsx(Ni,{experienceFilter:x.state.filter,experienceSearchTerm:x.state.searchTerm,selectedExperienceCompany:x.state.selectedCompany,selectedExperienceYear:x.state.selectedYear});case"projects":return e.jsx(Ci,{projectFilter:m.state.filter,projectSearchTerm:m.state.searchTerm,selectedProjectCategory:m.state.selectedCategory});case"messages":return e.jsx(Ti,{});case"skills":return e.jsx(Ri,{});case"categories":return e.jsx(Ui,{});default:return g?e.jsx(al,{activeSection:g}):e.jsx(Ie,{counts:v})}})()]}),e.jsx(Gi,{activeTab:p,setActiveTab:f,activeSettingsSection:g,setActiveSettingsSection:y,counts:v,refreshCounts:k,bookFilters:b,experienceFilters:x,projectFilters:m})]})})})})})]})};export{nl as default};
//# sourceMappingURL=Dashboard-d2fabd75.js.map
