import{c as e,u as a,b as t}from"./chunk-9a18e39e.js";import{an as s,aq as r}from"./index-5373f156.js";const i=()=>e({queryKey:["videoPlaylists"],queryFn:async()=>{var e;const a=await s.getAll();return(null==(e=a.data)?void 0:e.data)||a.data||[]},staleTime:3e5}),n=a=>e({queryKey:["videoPlaylist",a],queryFn:async()=>{var e;if(!a)throw new Error("ID가 필요합니다");const t=await s.getById(a);return(null==(e=t.data)?void 0:e.data)||t.data},enabled:!!a,staleTime:3e5}),u=a=>e({queryKey:["playlistVideos",a],queryFn:async()=>{var e;if(!a)return[];const t=await r.getByPlaylist(a);return(null==(e=t.data)?void 0:e.data)||t.data||[]},enabled:!!a,staleTime:3e5}),l=()=>{const e=a();return t({mutationFn:e=>s.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videoPlaylists"]})}})},c=()=>{const e=a();return t({mutationFn:e=>r.create(e),onSuccess:(a,t)=>{e.invalidateQueries({queryKey:["playlistVideos",t.playlistId]})}})},d=()=>{const e=a();return t({mutationFn:({id:e,data:a})=>r.update(e,a),onSuccess:a=>{var t,s;const r=null==(s=null==(t=a.data)?void 0:t.data)?void 0:s.playlistId;r&&e.invalidateQueries({queryKey:["playlistVideos",r]})}})},y=()=>{const e=a();return t({mutationFn:e=>r.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["playlistVideos"]})}})},o=()=>{const{data:e=[],isLoading:r}=i(),n=(()=>{const e=a();return t({mutationFn:e=>s.create(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videoPlaylists"]})}})})(),u=(()=>{const e=a();return t({mutationFn:({id:e,data:a})=>s.update(e,a),onSuccess:(a,t)=>{e.invalidateQueries({queryKey:["videoPlaylists"]}),e.invalidateQueries({queryKey:["videoPlaylist",t.id]})}})})(),c=l();return{playlists:e,isLoading:r,createPlaylist:async e=>{try{await n.mutateAsync(e);return{success:!0}}catch(a){return{success:!1,error:a}}},updatePlaylist:async(e,a)=>{try{return await u.mutateAsync({id:e,data:a}),{success:!0}}catch(t){return{success:!1,error:t}}},deletePlaylist:async e=>{try{return await c.mutateAsync(e),{success:!0}}catch(a){return{success:!1,error:a}}}}};export{n as a,u as b,l as c,d,o as e,c as f,y as g,i as u};
//# sourceMappingURL=chunk-7523ae4e.js.map
