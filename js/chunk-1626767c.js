import{r as e,j as t,F as a,a as s,b as l,c as r,d as i,e as n,f as d,g as o,h as c,i as x,k as g,l as u,m,n as p,o as h,u as b,p as y,q as k,s as j,t as f,v,w,x as N,y as C,z as S,A as I,B as $,C as L}from"./chunk-2803e76c.js";import{a as _}from"./chunk-783a0963.js";import{T as D,B as T,C as A,a as P,L as E,V as M,b as U,P as F,E as R,c as B,D as O,S as z,d as X,e as G,f as H,N as V,R as K}from"./chunk-54db4ccc.js";import{u as W,a as Y,b as Z,c as q,d as J,e as Q,f as ee,g as te,h as ae,i as se,j as le,k as re,l as ie,m as ne,n as de,o as oe,p as ce,q as xe,r as ge,s as ue,t as me,v as pe}from"./chunk-794f0cde.js";import{A as he,m as be}from"./chunk-5eab360c.js";import{u as ye,C as ke,a as je,D as fe,c as ve,S as we,v as Ne}from"./chunk-7dc7c94b.js";const Ce={}.VITE_API_URL||"https://choifolio-github-io-backend.onrender.com/api",Se=_.create({baseURL:Ce,withCredentials:!0,timeout:3e4}),Ie=(e,t)=>Se.post("/auth/login",{username:e,password:t}),$e=()=>Se.post("/auth/verify"),Le=()=>Se.post("/auth/logout"),_e={getAll:()=>Se.get("/books"),getById:e=>Se.get(`/books/${e}`),create:e=>Se.post("/books",e),update:(e,t)=>Se.put(`/books/${e}`,t),delete:e=>Se.delete(`/books/${e}`)},De={getByBook:e=>Se.get(`/books/${e}/chapters`),create:(e,t)=>Se.post(`/books/${e}/chapters`,t),update:(e,t,a)=>Se.put(`/books/${e}/chapters/${t}`,a),delete:(e,t)=>Se.delete(`/books/${e}/chapters/${t}`),reorder:(e,t)=>Se.put(`/books/${e}/chapters/reorder`,{chapterIds:t})},Te={getByBook:e=>Se.get(`/books/${e}/learnings`),createForBook:(e,t)=>Se.post(`/books/${e}/learnings`,t),updateForBook:(e,t,a)=>Se.put(`/books/${e}/learnings/${t}`,a),deleteForBook:(e,t)=>Se.delete(`/books/${e}/learnings/${t}`),getByChapter:(e,t)=>Se.get(`/books/${e}/chapters/${t}/learnings`),createForChapter:(e,t,a)=>Se.post(`/books/${e}/chapters/${t}/learnings`,a),updateForChapter:(e,t,a,s)=>Se.put(`/books/${e}/chapters/${t}/learnings/${a}`,s),deleteForChapter:(e,t,a)=>Se.delete(`/books/${e}/chapters/${t}/learnings/${a}`),updateSkills:(e,t,a)=>Se.patch(`/books/${e}/learnings/${t}/skills`,{skillIds:a})},Ae={getAll:()=>Se.get("/experiences"),getById:e=>Se.get(`/experiences/${e}`),create:e=>Se.post("/experiences",e),update:(e,t)=>Se.put(`/experiences/${e}`,t),delete:e=>Se.delete(`/experiences/${e}`)},Pe={getAll:()=>Se.get("/projects"),getById:e=>Se.get(`/projects/${e}`),create:e=>Se.post("/projects",e),update:(e,t)=>Se.put(`/projects/${e}`,t),delete:e=>Se.delete(`/projects/${e}`)},Ee={get:()=>Se.get("/settings"),update:e=>Se.put("/settings",e)},Me={sendEmail:e=>Se.post("/contact",e)},Ue={getAll:()=>Se.get("/admin/messages"),getById:e=>Se.get(`/admin/messages/${e}`),markAsRead:e=>Se.put(`/admin/messages/${e}/read`),delete:e=>Se.delete(`/admin/messages/${e}`)},Fe={getCategories:()=>Se.get("/skill-categories"),createCategory:e=>Se.post("/skill-categories",e),updateCategory:(e,t)=>Se.put(`/skill-categories/${e}`,t),deleteCategory:e=>Se.delete(`/skill-categories/${e}`),getAll:()=>Se.get("/skills"),getByCategory:e=>Se.get(`/skill-categories/${e}/skills`),create:(e,t)=>Se.post(`/skill-categories/${e}/skills`,t),update:(e,t)=>Se.put(`/skills/${e}`,t),delete:e=>Se.delete(`/skills/${e}`),clearAllData:()=>Se.post("/skills/clear-all-data"),cleanupDuplicates:()=>Se.post("/skills/cleanup-duplicates"),reorderSkills:e=>Se.put("/skills/reorder",{skillIds:e}),reorderCategories:e=>Se.put("/skill-categories/reorder",{categoryIds:e})},Re={getAll:()=>Se.get("/categories"),getById:e=>Se.get(`/categories/${e}`),getUsage:e=>Se.get(`/categories/${e}/usage`),create:e=>Se.post("/categories",e),update:(e,t)=>Se.put(`/categories/${e}`,t),delete:e=>Se.delete(`/categories/${e}`)},Be={getAll:()=>Se.get("/video-learnings"),getById:e=>Se.get(`/video-learnings/${e}`),create:e=>Se.post("/video-learnings",e),update:(e,t)=>Se.put(`/video-learnings/${e}`,t),delete:e=>Se.delete(`/video-learnings/${e}`)},Oe={getAll:()=>Se.get("/video-playlists"),getById:e=>Se.get(`/video-playlists/${e}`),create:e=>Se.post("/video-playlists",e),update:(e,t)=>Se.put(`/video-playlists/${e}`,t),delete:e=>Se.delete(`/video-playlists/${e}`)},ze={getByPlaylist:e=>Se.get(`/playlist-videos?playlistId=${e}`),getById:e=>Se.get(`/playlist-videos/${e}`),create:e=>Se.post("/playlist-videos",e),update:(e,t)=>Se.put(`/playlist-videos/${e}`,t),delete:e=>Se.delete(`/playlist-videos/${e}`)},Xe=e.createContext(void 0),Ge=({children:a})=>{const[s,l]=e.useState(null),[r,i]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const e=await $e();l(e.data.user)}catch(e){l(null)}})()},[]);const n=e.useCallback(async(e,t)=>{var a,s;try{i(!0);const a=await Ie(e,t);l(a.data.user),i(!1)}catch(r){throw i(!1),new Error((null==(s=null==(a=r.response)?void 0:a.data)?void 0:s.message)||"로그인에 실패했습니다.")}},[]),d=e.useCallback(async()=>{try{await Le()}catch(e){}l(null)},[]),o=e.useMemo(()=>({user:s,login:n,logout:d,isAuthenticated:!!s,isLoading:r}),[s,n,d,r]);return t.jsx(Xe.Provider,{value:o,children:a})},He=()=>{const t=e.useContext(Xe);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t},Ve=e=>{try{return new Date(e).toLocaleDateString("ko-KR")}catch(t){return"날짜 정보 없음"}},Ke=e=>{try{const t=new Date(e),a=(new Date).getTime()-t.getTime();if(a<0)return"방금 전";const s=Math.floor(a/6e4);if(s<1)return"방금 전";if(s<60)return`${s}분 전`;const l=Math.floor(a/36e5);if(l<24)return`${l}시간 전`;const r=Math.floor(a/864e5);if(1===r)return"어제";if(r<7)return`${r}일 전`;const i=Math.floor(r/7);if(i<4)return`${i}주 전`;const n=Math.floor(r/30);if(n<12)return`${n}개월 전`;return`${Math.floor(r/365)}년 전`}catch(t){return"날짜 정보 없음"}},We=e=>{if(!e)return null;const t=[/(?:youtube\.com\/watch\?v=)([a-zA-Z0-9_-]{11})/,/(?:youtu\.be\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/embed\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/shorts\/)([a-zA-Z0-9_-]{11})/,/(?:youtube\.com\/v\/)([a-zA-Z0-9_-]{11})/];for(const a of t){const t=e.match(a);if(t&&t[1])return t[1]}return null},Ye=(e,t="maxresdefault")=>`https://img.youtube.com/vi/${e}/${t}.jpg`,Ze=e=>{if(!e)return null;const t=[/[?&]list=([a-zA-Z0-9_-]{13,})/,/youtube\.com\/playlist\?list=([a-zA-Z0-9_-]{13,})/];for(const a of t){const t=e.match(a);if(t&&t[1])return t[1]}return null},qe=e=>"https://i.ytimg.com/vi//hqdefault.jpg",Je=(e,t)=>{if(!e)return"";let a=(e=>e?e.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-white">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mt-4 mb-2 text-gray-900 dark:text-white">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mt-4 mb-2 text-gray-900 dark:text-white">$1</h1>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>').replace(/__(.*?)__/g,'<u class="underline">$1</u>').replace(/`(.*?)`/g,'<code class="bg-gray-200 dark:bg-gray-600 text-red-600 dark:text-red-400 px-1 rounded text-sm">$1</code>').replace(/^▶ (.*$)/gim,'<div class="flex items-center mt-2 mb-1"><span class="mr-2">▶</span><span class="font-medium text-gray-900 dark:text-white">$1</span></div>').replace(/^[\s]*[-*+]\s(.*$)/gim,'<div class="ml-4 mb-1"><span class="mr-2">•</span>$1</div>').replace(/^[\s]*\d+\.\s(.*$)/gim,'<div class="ml-4 mb-1"><span class="mr-2">1.</span>$1</div>').replace(/```(.*?)\n([\s\S]*?)\n```/gim,(e,t,a)=>`<pre class="bg-gray-800 p-3 rounded-lg overflow-x-auto my-3"><code class="${t?`language-${t.trim()}`:""} text-sm text-gray-100">${a.trim()}</code></pre>`).replace(/\n/g,"<br>"):"")(e);return a=a.replace(/\[(\d{1,2}):(\d{2})(?::(\d{2}))?\]/g,(e,...t)=>`<button \n      class="inline-flex items-center px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded font-mono text-xs font-bold transition-colors mx-1 cursor-pointer"\n      data-timestamp="${3600*(t[2]?parseInt(t[0],10):0)+60*(t[2]?parseInt(t[1],10):parseInt(t[0],10))+(t[2]?parseInt(t[2],10):parseInt(t[1],10))}"\n      title="영상 ${e} 위치로 이동"\n    >${e}</button>`),a},Qe=({counts:e})=>{const n={recentUpdates:[{type:"book",typeName:"책",title:"최신 도서 추가",updatedAt:new Date},{type:"project",typeName:"프로젝트",title:"새 프로젝트 완료",updatedAt:new Date},{type:"experience",typeName:"경력",title:"경력 정보 업데이트",updatedAt:new Date}],weeklyStats:{booksAdded:2,projectsCompleted:1,experiencesUpdated:3}};return t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold mb-6",children:"관리자 설정"}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"📊 콘텐츠 통계"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("button",{className:"bg-orange-50 dark:bg-orange-900/20 p-6 rounded-lg border border-orange-200 dark:border-orange-800 hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors text-left w-full",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"등록된 책"}),t.jsx("p",{className:"text-3xl font-bold text-orange-900 dark:text-orange-100",children:e.books}),t.jsx("p",{className:"text-xs text-orange-500 dark:text-orange-400 mt-1",children:"권"})]}),t.jsx(a,{className:"text-orange-500 text-3xl"})]})}),t.jsx("button",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-200 dark:border-blue-800 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors text-left w-full",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"등록된 경력"}),t.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:e.experiences}),t.jsx("p",{className:"text-xs text-blue-500 dark:text-blue-400 mt-1",children:"개"})]}),t.jsx(s,{className:"text-blue-500 text-3xl"})]})}),t.jsx("button",{className:"bg-green-50 dark:bg-green-900/20 p-6 rounded-lg border border-green-200 dark:border-green-800 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors text-left w-full",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"등록된 프로젝트"}),t.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:e.projects}),t.jsx("p",{className:"text-xs text-green-500 dark:text-green-400 mt-1",children:"개"})]}),t.jsx(l,{className:"text-green-500 text-3xl"})]})})]})]}),t.jsxs("div",{className:"mb-8",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"📊 사이트 활동"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(r,{className:"text-purple-500 text-xl"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"최근 업데이트"})]}),t.jsx("div",{className:"space-y-3",children:n.recentUpdates.length>0?n.recentUpdates.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-2 h-2 rounded-full "+(0===a?"bg-green-500":1===a?"bg-yellow-500":"bg-blue-500")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.typeName})]})]}),t.jsx("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.updatedAt.toLocaleDateString("ko-KR")})]},`${e.type}-${a}`)):t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"최근 업데이트된 콘텐츠가 없습니다."})})]}),t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx(i,{className:"text-indigo-500 text-xl"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"이번 주 활동"})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(a,{className:"text-orange-500"}),t.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"새로 추가된 책"})]}),t.jsx("span",{className:"text-lg font-bold text-orange-600 dark:text-orange-400",children:n.weeklyStats.booksAdded})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(l,{className:"text-green-500"}),t.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"완료된 프로젝트"})]}),t.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:n.weeklyStats.projectsCompleted})]}),t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(s,{className:"text-blue-500"}),t.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"업데이트된 경력"})]}),t.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:n.weeklyStats.experiencesUpdated})]})]})]})]})]})]})},et=({bookFilter:s="all",bookSearchTerm:l="",selectedBookCategory:r="",initialEditId:i})=>{const{books:u,isLoading:m,createBook:p,updateBook:h,deleteBook:b}=W(),{success:y,error:k}=Y(),{createAbortController:j}=Z(),{toasts:f,hideToast:v}=Y(),[w,N]=q({onSave:async(e,t)=>{if(t){await h(t._id,e);y("서적 수정 완료","서적 정보가 성공적으로 수정되었습니다.")}else{await p(e);y("서적 추가 완료","새로운 서적이 성공적으로 추가되었습니다.")}},onDelete:async e=>{await b(e._id),y("서적 삭제 완료",`${e.title}이(가) 삭제되었습니다.`)},onError:e=>{k("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}}),{data:C,optimisticAdd:S,optimisticUpdateItem:I,optimisticDelete:$,resetData:L}=J([]),[_,M]=e.useState(!1),[U,F]=e.useState(null),[R,B]=e.useState(null),[O,z]=e.useState(!1),[X,G]=e.useState(null),[H,V]=e.useState(!1),[K,Q]=e.useState(null),[ee,te]=e.useState(!1);e.useEffect(()=>{if(i&&u.length>0&&!ee){const e=u.find(e=>e._id===i);e&&(N.handleEdit(e),te(!0))}},[i,u,ee,N]);const ae=e.useMemo(()=>{let e=[...u];if("five-star"===s?e=e.filter(e=>5===e.rating):"category"===s&&r&&(e=e.filter(e=>e.category===r)),l){const t=l.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.author.toLowerCase().includes(t)||e.category.toLowerCase().includes(t))}return e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())},[u,s,l,r]),se=e.useCallback(async e=>{var t;F(e),M(!0),B(null);try{const t=j(),a=await De.getByBook(e._id);t.signal.aborted||L(a.data||[])}catch(a){(null==(t=a.name)?void 0:t.includes("AbortError"))||k("데이터 로드 실패","서적 정보를 불러오는데 실패했습니다.")}},[j,L,k]),le=e.useCallback(async e=>{if(U)try{X?(await I(X._id,e,()=>De.update(U._id,X._id,e).then(e=>e.data)),y("목차 수정 완료","목차가 성공적으로 수정되었습니다."),z(!1),G(null)):(await S({...e,_id:"",learnings:[],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},()=>De.create(U._id,e).then(e=>e.data)),y("목차 추가 완료","새로운 목차가 추가되었습니다."),z(!1))}catch(t){k("목차 작업 실패","목차 작업에 실패했습니다.")}},[U,X,S,I,y,k]),re=e.useCallback(async e=>{if(U)try{await $(e._id,()=>De.delete(U._id,e._id).then(()=>{})),y("목차 삭제 완료","목차가 삭제되었습니다.")}catch(t){k("목차 삭제 실패","목차 삭제에 실패했습니다.")}},[U,$,y,k]),ie=e.useCallback(e=>{B(e),V(!0),Q(null)},[]),ne=e.useCallback((e,t)=>{B(t),Q(e),V(!0)},[]),de=e.useCallback(async(e,t)=>{if(U)try{await Te.deleteForChapter(U._id,t,e._id);const a=await De.getByBook(U._id);L(a.data||[]),y("학습 내용 삭제 완료","학습 내용이 삭제되었습니다.")}catch(a){k("학습 내용 삭제 실패","학습 내용 삭제에 실패했습니다.")}},[U,L,y,k]),oe=e.useCallback(async e=>{if(U&&R)try{K?(await Te.updateForChapter(U._id,R,K._id,e),y("학습 내용 수정 완료","학습 내용이 성공적으로 수정되었습니다.")):(await Te.createForChapter(U._id,R,e),y("학습 내용 추가 완료","새로운 학습 내용이 추가되었습니다."));const t=await De.getByBook(U._id);L(t.data||[]),V(!1),Q(null),B(null)}catch(t){k("작업 실패","학습 내용 저장에 실패했습니다.")}},[U,R,K,L,y,k]),ce=e=>t.jsx("div",{className:"flex items-center gap-0.5",children:Array.from({length:5},(a,s)=>t.jsx(g,{className:"text-sm "+(s<e?"text-yellow-500":"text-gray-300 dark:text-gray-600")},s))});return m?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t.jsxs(t.Fragment,{children:[t.jsx(D,{toasts:f,onClose:v}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"서적 관리"}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["총 ",ae.length,"권의 서적"]})]}),t.jsxs("button",{onClick:N.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[t.jsx(n,{}),"서적 추가"]})]}),t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:0===ae.length?t.jsxs("div",{className:"text-center py-12",children:[t.jsx(a,{className:"text-6xl text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-2",children:"등록된 서적이 없습니다"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"상단의 '서적 추가' 버튼을 눌러 새로운 서적을 등록하세요"})]}):t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"서적 정보"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"저자"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"카테고리"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"평점"}),t.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"읽은 날짜"}),t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"관리"})]})}),t.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ae.map(e=>{var s;return t.jsxs("tr",{onClick:()=>se(e),className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",children:[t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[e.coverImage?t.jsx("img",{src:e.coverImage,alt:e.title,className:"w-12 h-16 object-cover rounded shadow-sm"}):t.jsx("div",{className:"w-12 h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded flex items-center justify-center shadow-sm",children:t.jsx(a,{className:"text-white text-lg"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:e.title}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[(null==(s=e.learnings)?void 0:s.length)||0,"개의 학습 내용"]})]})]})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-300",children:e.author})}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:e.category})}),t.jsx("td",{className:"px-6 py-4",children:ce(e.rating)}),t.jsx("td",{className:"px-6 py-4",children:t.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-300",children:Ve(e.readDate)})}),t.jsx("td",{className:"px-6 py-4",children:t.jsxs("div",{className:"flex items-center justify-end gap-2",children:[t.jsx("button",{onClick:t=>{t.stopPropagation(),se(e)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900 rounded-lg transition-colors",title:"상세보기",children:t.jsx(d,{})}),t.jsx("button",{onClick:t=>{t.stopPropagation(),N.handleEdit(e)},className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors",title:"수정",children:t.jsx(o,{})}),t.jsx("button",{onClick:t=>{t.stopPropagation(),N.handleDelete(e)},disabled:w.isDeleting,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors disabled:opacity-50",title:"삭제",children:t.jsx(c,{})})]})})]},e._id)})})]})})}),w.showForm&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:w.editingItem?"서적 수정":"서적 추가"}),t.jsx("button",{onClick:N.handleCancel,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(x,{})})]}),t.jsx(T,{data:w.editingItem,onSave:N.handleSave,onCancel:N.handleCancel,isSaving:w.isSaving})]})})}),_&&U&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-6xl w-full max-h-[90vh] flex flex-col shadow-2xl",children:[t.jsx("div",{className:"flex-shrink-0 border-b border-gray-200 dark:border-gray-700 p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[U.coverImage?t.jsx("img",{src:U.coverImage,alt:U.title,className:"w-20 h-28 object-cover rounded shadow-lg flex-shrink-0"}):t.jsx("div",{className:"w-20 h-28 bg-gradient-to-br from-blue-400 to-blue-600 rounded flex items-center justify-center shadow-lg flex-shrink-0",children:t.jsx(a,{className:"text-white text-2xl"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2 truncate",children:U.title}),t.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:["저자: ",U.author]}),t.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:U.category}),ce(U.rating)]})]})]}),t.jsx("button",{onClick:()=>{M(!1),B(null)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex-shrink-0",children:t.jsx(x,{className:"text-xl"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:t.jsx(A,{chapters:C,onAddChapter:()=>{z(!0),G(null)},onEditChapter:e=>{G(e),z(!0)},onDeleteChapter:re,onAddLearning:ie,onEditLearning:ne,onDeleteLearning:de,isAuthenticated:!0})})]})}),O&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60]",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full mx-4 shadow-2xl",children:t.jsx(P,{chapter:X,onSave:le,onCancel:()=>{z(!1),G(null)}})})}),H&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[60] p-4",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl",children:t.jsx(E,{learning:K,onSave:oe,onCancel:()=>{V(!1),Q(null),B(null)}})})})]})]})},tt=({initialEditId:a})=>{const{success:s,error:l}=Y(),{videoLearnings:r,isLoading:i,createVideoLearning:d,updateVideoLearning:x,deleteVideoLearning:m}=Q(),[p,h]=q({onSave:async(e,t)=>{if(t){(await x(t._id,e)).success&&s("영상 학습 수정 완료","영상 학습 정보가 성공적으로 수정되었습니다.")}else{(await d(e)).success&&s("영상 학습 추가 완료","새로운 영상 학습이 성공적으로 추가되었습니다.")}},onDelete:async e=>{await m(e._id),s("영상 학습 삭제 완료",`${e.title}이(가) 삭제되었습니다.`)},onError:e=>{l("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}}),[b,y]=e.useState("all"),[k,j]=e.useState(!1),f=e.useMemo(()=>(e=>{const t=new Set;return t.add("all"),e.forEach(e=>{e.category&&t.add(e.category.toLowerCase())}),Array.from(t).sort()})(r),[r]),v=e.useMemo(()=>"all"===b?r:r.filter(e=>e.category===b),[r,b]);return e.useEffect(()=>{if(a&&r.length>0&&!k){const e=r.find(e=>e._id===a);e&&(h.handleEdit(e),j(!0))}},[a,r,k,h]),i?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(u,{className:"text-red-600"})," 영상 학습 관리"]}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"유튜브 영상을 통한 학습 기록을 관리합니다"})]}),!p.showForm&&t.jsxs("button",{onClick:h.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[t.jsx(n,{})," 새 영상 추가"]})]}),!p.showForm&&f.length>0&&t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsxs("button",{onClick:()=>y("all"),className:"px-4 py-2 rounded-lg transition-colors font-medium "+("all"===b?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:["전체 (",r.length,")"]}),f.map(e=>{const a=r.filter(t=>t.category===e).length;return t.jsxs("button",{onClick:()=>y(e),className:"px-4 py-2 rounded-lg transition-colors font-medium "+(b===e?"bg-primary-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:[e," (",a,")"]},e)})]}),p.showForm&&t.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border border-gray-200 dark:border-gray-700",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:p.editingItem?"영상 학습 수정":"새 영상 학습 추가"}),t.jsx(M,{data:p.editingItem||void 0,onSave:h.handleSave,onCancel:h.handleCancel,isSaving:p.isSaving,availableCategories:f})]}),!p.showForm&&t.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(e=>{const a=e.videoId,s=a?Ye(a,"hqdefault"):null;return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow",children:[s&&t.jsxs("div",{className:"relative aspect-video bg-gray-200 dark:bg-gray-700",children:[t.jsx("img",{src:s,alt:e.title,className:"w-full h-full object-cover"}),t.jsx("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-white text-xs font-medium",children:"YouTube"})]}),t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded text-xs font-medium",children:e.category}),e.rating&&t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(a,s)=>t.jsx(g,{className:"text-xs "+(s<e.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600")},s))})]}),t.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2 line-clamp-2",children:e.title}),e.purpose&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:e.purpose}),t.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 mb-4",children:[t.jsx("span",{children:Ve(e.watchDate)}),e.skillIds&&e.skillIds.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"•"}),t.jsxs("span",{children:["스킬 ",e.skillIds.length,"개"]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>h.handleEdit(e),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm font-medium",children:[t.jsx(o,{})," 수정"]}),t.jsxs("button",{onClick:()=>h.handleDelete(e),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors text-sm font-medium",children:[t.jsx(c,{})," 삭제"]})]})]})]},e._id)})}),!p.showForm&&0===v.length&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(u,{className:"text-6xl text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-4",children:"all"===b?"아직 등록된 영상 학습이 없습니다":`${b} 카테고리에 영상 학습이 없습니다`}),t.jsxs("button",{onClick:h.handleCreate,className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[t.jsx(n,{})," 첫 영상 추가하기"]})]})]})},at=()=>{const{success:a,error:s}=Y(),{playlists:l,isLoading:r,createPlaylist:i,updatePlaylist:d,deletePlaylist:x}=ee(),[b,y]=e.useState(null),[k,j]=e.useState(!1),[f,v]=e.useState(null),[w,N]=e.useState(!1),[C,S]=e.useState(""),{data:I=[]}=te(b||void 0),$=ae(),L=se(),_=le(),[D,T]=q({onSave:async(e,t)=>{if(t){(await d(t._id,e)).success&&a("재생 목록 수정 완료","재생 목록이 성공적으로 수정되었습니다.")}else{(await i(e)).success&&a("재생 목록 추가 완료","새로운 재생 목록이 추가되었습니다.")}},onDelete:async e=>{await x(e._id),a("재생 목록 삭제 완료",`${e.title}이(가) 삭제되었습니다.`)},onError:e=>{s("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}}),A=async()=>{if(!C.trim()||!b)return void alert("영상 URL을 입력해주세요");const e=C.split("\n").map(e=>e.trim()).filter(e=>Boolean(e));if(0!==e.length)try{let t=0;for(const a of e){if(!a)continue;const e=We(a);if(!e)continue;const s={playlistId:b,videoId:e,title:`영상 ${I.length+t+1}`,keyTakeaways:"",order:I.length+t};await $.mutateAsync(s),t++}S(""),N(!1),a("일괄 추가 완료",`${t}개의 영상이 추가되었습니다. 각 영상의 제목과 핵심 배움을 수정해주세요.`)}catch(t){s("일괄 추가 실패","영상 추가 중 오류가 발생했습니다.")}else alert("유효한 URL이 없습니다")};return r?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(m,{className:"text-red-600"}),"재생 목록 관리"]}),t.jsxs("button",{onClick:T.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[t.jsx(n,{}),"재생 목록 추가"]})]}),D.showForm&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:D.editingItem?"재생 목록 수정":"재생 목록 추가"}),D.editingItem?t.jsx(U,{data:D.editingItem,onSave:T.handleSave,onCancel:T.handleCancel,isSaving:D.isSaving}):t.jsx(U,{onSave:T.handleSave,onCancel:T.handleCancel,isSaving:D.isSaving})]})})}),k&&b&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:f?"영상 학습 기록 수정":"영상 학습 기록 추가"}),t.jsx(F,{playlistId:b,data:f,onSave:async e=>{try{f?(await L.mutateAsync({id:f._id,data:e}),a("영상 수정 완료","영상 학습 기록이 수정되었습니다.")):(await $.mutateAsync(e),a("영상 추가 완료","새로운 영상 학습 기록이 추가되었습니다.")),j(!1),v(null)}catch(t){s("영상 저장 실패","영상 저장 중 오류가 발생했습니다.")}},onCancel:()=>{j(!1),v(null)},isSaving:$.isPending||L.isPending})]})})}),t.jsxs("div",{className:"grid gap-4",children:[l.map(e=>{const l=b===e._id,r=l?I:[];return t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.title}),t.jsx("button",{onClick:()=>y(l?null:e._id),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",title:l?"영상 목록 접기":"영상 목록 펼치기",children:l?t.jsx(p,{}):t.jsx(h,{})})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[e.categoryIds&&e.categoryIds.length>0?e.categoryIds.map(e=>{const a="string"==typeof e?e:null==e?void 0:e.name;return a?t.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:a},"string"==typeof e?e:null==e?void 0:e._id):null}):e.category&&t.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:e.category}),e.rating&&t.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:5},(a,s)=>t.jsx(g,{className:"text-sm "+(s<e.rating?"text-yellow-500":"text-gray-300")},s))}),t.jsxs("span",{children:["시청일: ",Ve(e.watchDate)]})]}),e.purpose&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.purpose})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>T.handleEdit(e),className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors",title:"재생 목록 수정",children:t.jsx(o,{})}),t.jsx("button",{onClick:()=>T.handleDelete(e),disabled:D.isDeleting,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors",title:"재생 목록 삭제",children:t.jsx(c,{})})]})]})}),l&&t.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 p-6",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h4",{className:"font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(u,{})," 영상 관리 (",r.length,"개)"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>N(!w),className:"flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[t.jsx(m,{})," 영상 일괄 추가"]}),t.jsxs("button",{onClick:()=>{v(null),j(!0)},className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[t.jsx(n,{})," 영상 추가"]})]})]}),w&&t.jsxs("div",{className:"mb-4 p-4 border-2 border-green-500 rounded-lg bg-white dark:bg-gray-800",children:[t.jsx("h5",{className:"font-bold text-gray-900 dark:text-white mb-2",children:"📝 영상 URL 일괄 추가"}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"재생 목록의 각 영상 URL을 한 줄에 하나씩 입력하세요. 위에서부터 순서대로 추가됩니다."}),t.jsx("textarea",{value:C,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-green-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm mb-3",rows:6,placeholder:"https://www.youtube.com/watch?v=VIDEO_ID_1\nhttps://www.youtube.com/watch?v=VIDEO_ID_2\nhttps://www.youtube.com/watch?v=VIDEO_ID_3"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:A,disabled:$.isPending,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:$.isPending?"추가 중...":"일괄 추가"}),t.jsx("button",{onClick:()=>{N(!1),S("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm font-medium",children:"취소"})]})]}),r.length>0?t.jsx("div",{className:"space-y-2",children:r.map((e,l)=>t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("span",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:["#",l+1]}),t.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white",children:e.title})]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",e.videoId]}),e.keyTakeaways&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:e.keyTakeaways})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>{v(e),j(!0)},className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded transition-colors",title:"영상 수정",children:t.jsx(o,{})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("이 영상 학습 기록을 삭제하시겠습니까?"))try{await _.mutateAsync(e),a("영상 삭제 완료","영상 학습 기록이 삭제되었습니다.")}catch(t){s("영상 삭제 실패","영상 삭제 중 오류가 발생했습니다.")}})(e._id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded transition-colors",title:"영상 삭제",children:t.jsx(c,{})})]})]})},e._id))}):t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 rounded-lg",children:[t.jsx(u,{className:"text-4xl mx-auto mb-2 opacity-30"}),t.jsx("p",{className:"text-sm",children:"이 재생 목록에 등록된 영상이 없습니다"}),t.jsx("p",{className:"text-xs mt-1",children:'위의 "영상 일괄 추가" 버튼을 사용하세요'})]})]})]},e._id)}),0===l.length&&t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx(m,{className:"text-6xl mx-auto mb-4 opacity-30"}),t.jsx("p",{children:"아직 등록된 재생 목록이 없습니다"})]})]})]})},st=({experienceFilter:a="all",experienceSearchTerm:s="",selectedExperienceCompany:l="",selectedExperienceYear:r=""})=>{const{t:i}=b(),{experiences:d,isLoading:x,createExperience:g,updateExperience:u,deleteExperience:m}=re(),[p,h]=e.useState(!1),[y,k]=e.useState(null),[j,f]=e.useState(!1),[v,w]=e.useState(!1),N=e.useMemo(()=>{let e=[...d];if("company"===a&&l?e=e.filter(e=>e.company===l):"year"===a&&r&&(e=e.filter(e=>(e.period||"").includes(r))),s){const t=s.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.company.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}return e},[d,a,s,l,r]);return x?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2",children:i("experience.loading")})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:i("experience.management")}),t.jsxs("button",{onClick:()=>{k(null),h(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx(n,{}),i("experience.add")]})]}),("all"!==a||s||l||r)&&t.jsx("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[i("experience.currentFilter"),"all"===a&&!s&&` 💼 ${i("experience.allExperiences")}`,"company"===a&&l&&` 🏢 ${l} ${i("experience.company_")}`,"year"===a&&r&&` 📅 ${r}${i("experience.year")}`,s&&` 🔍 "${s}" ${i("experience.search")}`]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[N.length,i("experience.showing")," ",d.length,i("experience.total")]})]})})}),p&&t.jsx("div",{className:"mb-6",children:t.jsx(R,{data:y,onSave:async e=>{try{if(f(!0),y){(await u(y._id,e)).success&&(h(!1),k(null))}else{(await g(e)).success&&h(!1)}}catch(t){}finally{f(!1)}},onCancel:()=>{h(!1),k(null)}})}),N.length>0?t.jsx("div",{className:"space-y-4",children:N.map(e=>t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-semibold text-lg",children:e.title}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e.company}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:e.period}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2",children:e.description})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>(e=>{k(e),h(!0)})(e),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:j||v,children:t.jsx(o,{})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm(i("experience.confirmDelete")))try{w(!0),await m(e._id)}catch(t){}finally{w(!1)}})(e),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:j||v,children:t.jsx(c,{})})]})]})},e._id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:i("all"!==a||s||l||r?"experience.noFilteredResults":"experience.noExperiences")}),("all"!==a||s||l||r)&&t.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:i("experience.resetFilter")})]})]})},lt=({projectFilter:a="all",projectSearchTerm:s="",selectedProjectCategory:l=""})=>{const{projects:r,isLoading:i,createProject:d,updateProject:x,deleteProject:g}=ie(),[u,m]=e.useState(!1),[p,h]=e.useState(null),[b,y]=e.useState(!1),[k,j]=e.useState(!1),f=e.useMemo(()=>{let e=[...r];if("category"===a&&l?e=e.filter(e=>e.category===l):"featured"===a&&(e=e.filter(e=>"completed"===e.status&&e.detailedDescription&&e.detailedDescription.trim().length>0)),s){const t=s.toLowerCase();e=e.filter(e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.technologies&&e.technologies.some(e=>e.toLowerCase().includes(t))||e.category&&e.category.toLowerCase().includes(t))}return e},[r,a,s,l]),v=e.useMemo(()=>r.filter(e=>"completed"===e.status&&e.detailedDescription&&e.detailedDescription.trim().length>0).length,[r]);return i?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2",children:"프로젝트 데이터를 불러오는 중..."})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"프로젝트 관리"}),t.jsxs("button",{onClick:()=>{h(null),m(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx(n,{}),"프로젝트 추가"]})]}),("all"!==a||s||l)&&t.jsx("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-gray-700 rounded-lg",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["현재 필터:","all"===a&&!s&&" 📁 모든 프로젝트","category"===a&&l&&` 🏷️ ${l} 카테고리`,"featured"===a&&" 🌟 주요 프로젝트",s&&` 🔍 "${s}" 검색`]}),t.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[f.length,"개 프로젝트 표시 중 (전체 ",r.length,"개)","featured"===a&&` (주요 프로젝트: ${v}개)`]})]})})}),u&&t.jsx("div",{className:"mb-6",children:t.jsx(B,{data:p,onSave:async e=>{var t,a,s,l,r,i,n,o,c,g,u,b,k;try{if(y(!0),p){const i=await x(p._id,e);if(i.success)m(!1),h(null),alert("✅ 프로젝트가 성공적으로 수정되었습니다!");else{const e=(null==(s=null==(a=null==(t=i.error)?void 0:t.response)?void 0:a.data)?void 0:s.message)||"알 수 없는 오류";alert(`❌ 프로젝트 수정 실패: ${e}`),null==(r=null==(l=i.error)?void 0:l.response)||r.data}}else{const t=await d(e);if(t.success)m(!1),alert("✅ 프로젝트가 성공적으로 추가되었습니다!");else{const e=(null==(o=null==(n=null==(i=t.error)?void 0:i.response)?void 0:n.data)?void 0:o.message)||"알 수 없는 오류";alert(`❌ 프로젝트 추가 실패: ${e}`),null==(g=null==(c=t.error)?void 0:c.response)||g.data}}}catch(j){const e=(null==(b=null==(u=null==j?void 0:j.response)?void 0:u.data)?void 0:b.message)||j.message||"알 수 없는 오류";alert(`❌ 저장 중 오류 발생: ${e}`),null==(k=null==j?void 0:j.response)||k.data}finally{y(!1)}},onCancel:()=>{m(!1),h(null)},isSaving:b})}),f.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>t.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600",children:[t.jsx("h3",{className:"font-semibold text-lg mb-2",children:e.title}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-2 line-clamp-2",children:e.description}),e.category&&t.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mb-3",children:e.category}),e.technologies&&e.technologies.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[e.technologies.slice(0,3).map((e,a)=>t.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:e},a)),e.technologies.length>3&&t.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",e.technologies.length-3]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"px-2 py-1 rounded text-xs "+("completed"===e.status?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"),children:"completed"===e.status?"완료":"진행중"}),"completed"===e.status&&e.detailedDescription&&e.detailedDescription.trim().length>0&&t.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 px-2 py-1 rounded",children:"🌟 주요"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>(e=>{h(e),m(!0)})(e),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:b||k,children:t.jsx(o,{})}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("정말 삭제하시겠습니까?"))try{j(!0),await g(e._id)}catch(t){}finally{j(!1)}})(e),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:b||k,children:t.jsx(c,{})})]})]})]},e._id))}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-lg mb-4",children:"all"!==a||s||l?"필터 조건에 맞는 프로젝트가 없습니다.":"등록된 프로젝트가 없습니다."}),("all"!==a||s||l)&&t.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"필터를 초기화하거나 다른 검색어를 시도해보세요."})]})]})},rt=({messageId:a,isOpen:s,onClose:l,onMarkAsRead:r,onDelete:i,onReply:n})=>{const[d,o]=e.useState(!1),[g,u]=e.useState(!1),[m,p]=e.useState(""),{data:h,isLoading:b,isError:N,error:C,refetch:S}=ne(a,{enabled:s&&!!a});return s?b?t.jsx(he,{children:t.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:l,children:t.jsx(be.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8",onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"flex flex-col items-center justify-center",children:[t.jsx(y,{className:"text-4xl text-blue-600 dark:text-blue-400 animate-spin mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"메시지 로딩 중..."}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"잠시만 기다려주세요"})]})})})}):N?t.jsx(he,{children:t.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:l,children:t.jsx(be.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8",onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"메시지를 불러올 수 없습니다"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:(null==C?void 0:C.message)||"알 수 없는 오류가 발생했습니다."}),t.jsxs("div",{className:"flex gap-3 justify-center",children:[t.jsx("button",{onClick:()=>S(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"다시 시도"}),t.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"닫기"})]})]})})})}):h?t.jsx(he,{children:t.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:l,children:t.jsxs(be.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(k,{className:"text-blue-600 dark:text-blue-400 text-xl"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"메시지 상세"}),!h.isRead&&t.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"새 메시지"})]}),t.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:t.jsx(x,{className:"text-gray-500 dark:text-gray-400"})})]}),t.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[t.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(j,{className:"text-gray-500 dark:text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"보낸이"}),t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:h.name})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(k,{className:"text-gray-500 dark:text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"이메일"}),t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:h.email})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(f,{className:"text-gray-500 dark:text-gray-400 mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"받은 시간"}),t.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(I=h.createdAt||"",new Date(I).toLocaleString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]})]})]}),t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"상태"}),t.jsx("div",{className:"flex items-center gap-2",children:h.isRead?t.jsxs("span",{className:"flex items-center gap-1 text-green-600 dark:text-green-400",children:[t.jsx(v,{})," 읽음"]}):t.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[t.jsx(k,{})," 읽지 않음"]})})]})})]}),t.jsx("div",{className:"mb-6",children:t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h.subject})}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"메시지 내용"}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:t.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:h.message})})]}),t.jsx(he,{children:g&&t.jsxs(be.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-6 border-t border-gray-200 dark:border-gray-700 pt-6",children:[t.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"답장 작성"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"받는 사람"}),t.jsx("input",{type:"email",value:h.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"답장 내용"}),t.jsx("textarea",{value:m,onChange:e=>p(e.target.value),placeholder:"답장 내용을 입력하세요...",rows:6,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>{alert("답장 기능은 향후 구현 예정입니다."),u(!1),p("")},disabled:!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[t.jsx(w,{})," 답장 보내기"]}),t.jsx("button",{onClick:()=>{u(!1),p("")},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"취소"})]})]})]})})]}),t.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[t.jsxs("button",{onClick:()=>{h&&(n?n(h):u(!0))},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[t.jsx(w,{})," 답장"]}),t.jsxs("div",{className:"flex gap-3",children:[!h.isRead&&t.jsxs("button",{onClick:async()=>{if(h&&!h.isRead)try{o(!0),await r(h._id)}catch(e){}finally{o(!1)}},disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[t.jsx(v,{})," ",d?"처리 중...":"읽음 처리"]}),t.jsxs("button",{onClick:async()=>{if(h&&confirm("정말 이 메시지를 삭제하시겠습니까?"))try{o(!0),await i(h._id),l()}catch(e){}finally{o(!1)}},disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:[t.jsx(c,{})," ",d?"삭제 중...":"삭제"]})]})]})]})})}):t.jsx(he,{children:t.jsx(be.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:l,children:t.jsx(be.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-8",onClick:e=>e.stopPropagation(),children:t.jsxs("div",{className:"text-center",children:[t.jsx(k,{className:"text-4xl text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"메시지를 찾을 수 없습니다"}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"요청하신 메시지가 존재하지 않거나 삭제되었습니다."}),t.jsx("button",{onClick:l,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"닫기"})]})})})}):null;var I},it=()=>{const{messages:a,isLoading:s,markAsRead:l,deleteMessage:r}=de(),[i,n]=e.useState(!1),[o,x]=e.useState(void 0),[g,u]=e.useState(!1),m=e=>{x(e._id),u(!0)},p=()=>{u(!1),x(void 0)};return s?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2",children:"메시지 데이터를 불러오는 중..."})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"메시지 관리"}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["총 ",a.length,"개의 메시지"]})]}),t.jsx("div",{className:"space-y-4",children:a.map(e=>t.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>m(e),children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("h3",{className:"font-semibold text-lg",children:e.subject}),!e.isRead&&t.jsx("span",{className:"bg-blue-500 text-white text-xs px-2 py-1 rounded-full",children:"새 메시지"})]}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.message.length>100?`${e.message.substring(0,100)}...`:e.message}),t.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:[t.jsxs("p",{children:["보낸이: ",e.name," (",e.email,")"]}),t.jsxs("p",{children:["받은 시간: ",e.createdAt?new Date(e.createdAt).toLocaleString("ko-KR"):"알 수 없음"]})]})]}),t.jsxs("div",{className:"flex gap-2 ml-4",onClick:e=>e.stopPropagation(),children:[t.jsx("button",{onClick:()=>m(e),className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",title:"상세 보기",children:t.jsx(d,{})}),!e.isRead&&t.jsx("button",{onClick:()=>(async e=>{try{await l(e._id)}catch(t){}})(e),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm",children:"읽음 처리"}),t.jsx("button",{onClick:()=>(async e=>{if(confirm("정말 삭제하시겠습니까?"))try{n(!0),await r(e._id)}catch(t){}finally{n(!1)}})(e),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:i,title:"삭제",children:t.jsx(c,{})})]})]})},e._id))})]}),g&&t.jsx(rt,{messageId:o,isOpen:g,onClose:p,onMarkAsRead:async e=>{await l(e)},onDelete:async e=>{await r(e),p()}})]})},nt=({category:e,isExpanded:a,onToggle:s,onAddSkill:l,onEdit:r,onDelete:i,isSaving:d,isDeleting:x,children:g})=>{var u;const{attributes:m,listeners:p,setNodeRef:b,transform:y,transition:k,isDragging:j}=ye({id:e._id}),f={transform:ke.Transform.toString(y),transition:k,opacity:j?.5:1};return t.jsxs("div",{ref:b,style:f,className:"bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 overflow-hidden",children:[t.jsxs("div",{className:"p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",onClick:()=>s(e._id),children:[t.jsx("div",{...m,...p,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",title:"드래그하여 순서 변경",onClick:e=>e.stopPropagation(),children:t.jsx(N,{})}),t.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color}}),t.jsx("h3",{className:"font-semibold text-lg cursor-pointer",children:e.title}),t.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",(null==(u=e.skills)?void 0:u.length)||0,"개 스킬)"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:t=>{t.stopPropagation(),l(e._id)},className:"p-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors",disabled:d||x,children:t.jsx(n,{size:12})}),t.jsx("button",{onClick:t=>{t.stopPropagation(),r(e)},className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",disabled:d||x,children:t.jsx(o,{size:12})}),t.jsx("button",{onClick:t=>{t.stopPropagation(),i(e)},className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:d||x,children:t.jsx(c,{size:12})}),a?t.jsx(h,{className:"text-gray-400"}):t.jsx(C,{className:"text-gray-400"})]})]}),e.description&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 ml-7",children:e.description})]}),a&&g]})},dt=({skill:e,categoryColor:a,currentLevel:s,hasChanges:l,isSavingThis:r,isSaving:i,isDeleting:n,onLevelChange:d,onSaveLevel:x,onEdit:g,onDelete:u,onToggleSidebar:m,onToggleLanguageCard:p})=>{const{attributes:h,listeners:b,setNodeRef:y,transform:k,transition:j,isDragging:f}=ye({id:e._id}),v={transform:ke.Transform.toString(k),transition:j,opacity:f?.5:1};return t.jsxs("div",{ref:y,style:v,className:"flex items-center justify-between bg-white dark:bg-gray-700 p-3 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[t.jsx("div",{...h,...b,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 p-1",title:"드래그하여 순서 변경",children:t.jsx(N,{})}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsxs("label",{className:"flex items-center gap-1 text-xs cursor-pointer",title:"사이드바 핵심기술에 표시",children:[t.jsx("input",{type:"checkbox",checked:e.showInSidebar||!1,onChange:()=>m(e),disabled:i||n,className:"w-3 h-3 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"핵심"})]}),t.jsxs("label",{className:"flex items-center gap-1 text-xs cursor-pointer",title:"사이드바 언어카드에 표시",children:[t.jsx("input",{type:"checkbox",checked:e.showInLanguageCard||!1,onChange:()=>p(e),disabled:i||n,className:"w-3 h-3 text-green-600 rounded focus:ring-2 focus:ring-green-500"}),t.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"언어"})]})]}),t.jsx("div",{className:"text-lg text-blue-600 dark:text-blue-400",children:t.jsx(O,{iconName:e.icon,size:18})}),t.jsx("span",{className:"font-medium min-w-[120px]",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-md",children:[t.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:s,onChange:t=>{const a=parseInt(t.target.value);d(e._id,a)},className:"flex-1 h-2 bg-gray-200 dark:bg-gray-600 rounded-lg appearance-none cursor-pointer slider-thumb",style:{background:`linear-gradient(to right, ${a} 0%, ${a} ${s}%, #e5e7eb ${s}%, #e5e7eb 100%)`},disabled:i||n||r}),t.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 min-w-[45px] text-right font-medium",children:[s,"%"]}),l&&t.jsx("button",{onClick:()=>x(e),disabled:r,className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-xs font-medium transition-colors flex items-center gap-1 "+(r?"opacity-50 cursor-not-allowed":""),title:"변경된 숙련도 저장",children:r?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"저장중"]}):t.jsxs(t.Fragment,{children:[t.jsx(S,{size:10}),"저장"]})})]})]}),t.jsxs("div",{className:"flex gap-2 ml-2",children:[t.jsx("button",{onClick:()=>g(e),className:"p-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors",disabled:i||n,children:t.jsx(o,{size:12})}),t.jsx("button",{onClick:()=>u(e),className:"p-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",disabled:i||n,children:t.jsx(c,{size:12})})]})]})},ot=()=>{const{skillCategories:a,isLoading:s,createSkillCategory:l,updateSkillCategory:r,deleteSkillCategory:i,createSkill:d,updateSkill:o,deleteSkill:c}=oe(),[x,g]=e.useState(null),[u,m]=e.useState(null),[p,h]=e.useState(null),[b,y]=e.useState(null),[k,j]=e.useState(new Set),[f,v]=e.useState(!1),[w,N]=e.useState(!1),[C,S]=e.useState(new Map),[I,$]=e.useState(new Set),L=e.useCallback((e,t)=>{S(a=>{const s=new Map(a);return s.set(e,t),s})},[]),_=e.useCallback(async e=>{const t=e._id,a=C.get(t);if(void 0!==a&&a!==e.level)try{$(e=>new Set(e).add(t)),await o(t,{name:e.name,icon:e.icon,level:a,order:e.order,...e.description&&{description:e.description},...e.color&&{color:e.color},...void 0!==e.showInSidebar&&{showInSidebar:e.showInSidebar},...void 0!==e.showInLanguageCard&&{showInLanguageCard:e.showInLanguageCard}}),S(e=>{const a=new Map(e);return a.delete(t),a})}catch(s){alert(`저장 실패: ${e.name}`)}finally{$(e=>{const a=new Set(e);return a.delete(t),a})}else S(e=>{const a=new Map(e);return a.delete(t),a})},[C,o]),D=e.useCallback(async e=>{if(e._id)try{$(t=>new Set(t).add(e._id));const t=!e.showInSidebar;await o(e._id,{name:e.name,icon:e.icon,level:e.level,order:e.order,showInSidebar:t,...e.description&&{description:e.description},...e.color&&{color:e.color},...void 0!==e.showInLanguageCard&&{showInLanguageCard:e.showInLanguageCard}})}catch(t){alert(`사이드바 표시 토글 실패: ${e.name}`)}finally{$(t=>{const a=new Set(t);return a.delete(e._id),a})}},[o]),T=e.useCallback(async e=>{if(e._id)try{$(t=>new Set(t).add(e._id));const t=!e.showInLanguageCard;await o(e._id,{name:e.name,icon:e.icon,level:e.level,order:e.order,showInLanguageCard:t,...e.description&&{description:e.description},...e.color&&{color:e.color},...void 0!==e.showInSidebar&&{showInSidebar:e.showInSidebar}})}catch(t){alert(`언어 카드 표시 토글 실패: ${e.name}`)}finally{$(t=>{const a=new Set(t);return a.delete(e._id),a})}},[o]),A=e.useCallback(async e=>{const{active:t,over:s}=e;if(!s||t.id===s.id)return;const l=a.findIndex(e=>e._id===t.id),i=a.findIndex(e=>e._id===s.id);if(-1===l||-1===i)return;const n=je(a,l,i);try{for(let e=0;e<n.length;e++){const t=n[e];(null==t?void 0:t._id)&&await r(t._id,{title:t.title,color:t.color,order:e,...t.description&&{description:t.description}})}}catch(d){alert("순서 변경에 실패했습니다.")}},[a,r]),P=e.useCallback(async(e,t)=>{const{active:s,over:l}=e;if(!l||s.id===l.id)return;const r=a.find(e=>e._id===t);if(!r||!r.skills)return;const i=r.skills.findIndex(e=>e._id===s.id),n=r.skills.findIndex(e=>e._id===l.id);if(-1===i||-1===n)return;const d=je(r.skills,i,n);try{for(let e=0;e<d.length;e++){const t=d[e];(null==t?void 0:t._id)&&await o(t._id,{name:t.name,icon:t.icon,level:t.level,order:e,...t.description&&{description:t.description},...t.color&&{color:t.color}})}}catch(c){alert("순서 변경에 실패했습니다.")}},[a,o]),E=e=>{j(t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},M=e=>{m(e),g("category")},U=async e=>{if(confirm("정말 삭제하시겠습니까? 카테고리 내 모든 스킬도 함께 삭제됩니다."))try{N(!0),await i(e._id)}catch(t){}finally{N(!1)}},F=e=>{y(e),h(null),g("skill")},R=e=>{h(e),y(e.categoryId),g("skill")},B=async e=>{if(confirm("정말 삭제하시겠습니까?"))try{N(!0),await c(e._id)}catch(t){}finally{N(!1)}},O=()=>{g(null),m(null),h(null),y(null)};return s?t.jsxs("div",{className:"flex items-center justify-center py-8",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t.jsx("span",{className:"ml-2",children:"기술 데이터를 불러오는 중..."})]}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"기술 관리"}),t.jsxs("button",{onClick:()=>{m(null),g("category")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx(n,{}),"카테고리 추가"]})]}),"category"===x&&t.jsx(z,{initialData:u,onSave:async e=>{try{if(v(!0),u){const t=await r(u._id,e);t.success?(g(null),m(null),alert("카테고리가 성공적으로 수정되었습니다.")):alert(`카테고리 수정 실패: ${t.error||"알 수 없는 오류"}`)}else{const t=await l(e);t.success?(g(null),alert("카테고리가 성공적으로 추가되었습니다.")):alert(`카테고리 추가 실패: ${t.error||"알 수 없는 오류"}`)}}catch(t){alert(`카테고리 저장 중 오류가 발생했습니다: ${t}`)}finally{v(!1)}},onCancel:O,isSaving:f}),"skill"===x&&t.jsx(X,{initialData:p,categoryId:b||void 0,onSave:async e=>{if(b||p)try{v(!0);const t=(null==p?void 0:p.categoryId)||b;if(p){(await o(p._id,e)).success&&(g(null),h(null),y(null))}else{(await d(t,e)).success&&(g(null),y(null))}}catch(t){}finally{v(!1)}},onCancel:O,isSaving:f}),t.jsx(fe,{collisionDetection:ve,onDragEnd:A,children:t.jsx(we,{items:a.map(e=>e._id),strategy:Ne,children:t.jsx("div",{className:"space-y-4",children:a.map(e=>{const a=k.has(e._id);return t.jsx(nt,{category:e,isExpanded:a,onToggle:E,onAddSkill:F,onEdit:M,onDelete:U,isSaving:f,isDeleting:w,children:t.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 bg-gray-100 dark:bg-gray-800",children:e.skills&&e.skills.length>0?t.jsx(fe,{collisionDetection:ve,onDragEnd:t=>P(t,e._id),children:t.jsx(we,{items:e.skills.map(e=>e._id),strategy:Ne,children:t.jsx("div",{className:"p-4 space-y-2",children:e.skills.sort((e,t)=>e.order-t.order).map(a=>{const s=C.get(a._id)??a.level,l=C.has(a._id)&&C.get(a._id)!==a.level,r=I.has(a._id);return t.jsx(dt,{skill:a,categoryColor:e.color||"#3B82F6",currentLevel:s,hasChanges:l,isSavingThis:r,isSaving:f,isDeleting:w,onLevelChange:L,onSaveLevel:_,onEdit:R,onDelete:B,onToggleSidebar:D,onToggleLanguageCard:T},a._id)})})})}):t.jsxs("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:[t.jsx(n,{size:32,className:"text-blue-400 dark:text-blue-500 mx-auto mb-2"}),t.jsx("p",{className:"text-sm",children:"아직 스킬이 없습니다."}),t.jsx("p",{className:"text-xs mt-1",children:"카테고리 제목 옆의 + 버튼을 클릭하여 스킬을 추가하세요."})]})})},e._id)})})})}),0===a.length&&t.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[t.jsx("p",{className:"text-lg mb-2",children:"아직 생성된 카테고리가 없습니다."}),t.jsx("p",{children:'위의 "카테고리 추가" 버튼을 클릭하여 첫 번째 카테고리를 만들어보세요.'})]})]})},ct=({category:e,onEdit:a,onDelete:s,isDeleting:l})=>{const{attributes:r,listeners:i,setNodeRef:n,transform:d,transition:x,isDragging:g}=ye({id:e._id}),u={transform:ke.Transform.toString(d),transition:x,opacity:g?.5:1},{data:m}=xe(e._id);return t.jsx("div",{ref:n,style:u,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.jsx("button",{...r,...i,className:"mt-1 p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 cursor-grab active:cursor-grabbing",title:"드래그하여 순서 변경",children:t.jsx(N,{})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:e.name}),m&&t.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[m.usage.books>0&&t.jsxs("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded",children:["📚 서적 ",m.usage.books,"개"]}),m.usage.projects>0&&t.jsxs("span",{className:"px-2 py-1 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded",children:["🚀 프로젝트 ",m.usage.projects,"개"]}),m.usage.videoLearnings>0&&t.jsxs("span",{className:"px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded",children:["📹 영상 ",m.usage.videoLearnings,"개"]}),m.usage.videoPlaylists>0&&t.jsxs("span",{className:"px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded",children:["📺 재생 목록 ",m.usage.videoPlaylists,"개"]}),0===m.usage.total&&t.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"사용 중이지 않음"})]})]})]}),t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:a,className:"p-2 text-yellow-600 hover:bg-yellow-100 dark:hover:bg-yellow-900 rounded-lg transition-colors",title:"수정",children:t.jsx(o,{})}),t.jsx("button",{onClick:s,disabled:l,className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900 rounded-lg transition-colors disabled:opacity-50",title:"삭제",children:t.jsx(c,{})})]})]})})},xt=()=>{const{success:e,error:a}=Y(),{categories:s,isLoading:l,createCategory:r,updateCategory:i,deleteCategory:d}=ce(),[o,c]=q({onSave:async(t,a)=>{if(a){const s=await i(a._id,t);if(!s.success)throw s.error;e("카테고리 수정 완료","카테고리가 성공적으로 수정되었습니다.")}else{const a=await r(t);if(!a.success)throw a.error;e("카테고리 추가 완료","새로운 카테고리가 추가되었습니다.")}},onDelete:async t=>{var s,l,r,i,n,o;const c=await d(t._id);if(!c.success){const e=(null==(r=null==(l=null==(s=c.error)?void 0:s.response)?void 0:l.data)?void 0:r.message)||"카테고리 삭제에 실패했습니다",t=null==(o=null==(n=null==(i=c.error)?void 0:i.response)?void 0:n.data)?void 0:o.usage;if(t){const e=[];t.books>0&&e.push(`서적 ${t.books}개`),t.projects>0&&e.push(`프로젝트 ${t.projects}개`),t.videoLearnings>0&&e.push(`영상 ${t.videoLearnings}개`),t.videoPlaylists>0&&e.push(`재생 목록 ${t.videoPlaylists}개`),a("삭제 불가",`이 카테고리는 ${e.join(", ")}에서 사용 중입니다. 먼저 해당 항목들의 카테고리를 변경해주세요.`)}else a("삭제 실패",e);throw c.error}e("카테고리 삭제 완료",`${t.name}이(가) 삭제되었습니다.`)},onError:e=>{a("작업 실패",e.message||"알 수 없는 오류가 발생했습니다.")}});return l?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx("div",{className:"w-12 h-12 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[t.jsx(I,{className:"text-yellow-600"}),"카테고리 관리"]}),t.jsxs("button",{onClick:c.handleCreate,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[t.jsx(n,{}),"카테고리 추가"]})]}),o.showForm&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full mx-4",children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:o.editingItem?"카테고리 수정":"카테고리 추가"}),o.editingItem?t.jsx(G,{data:o.editingItem,onSave:c.handleSave,onCancel:c.handleCancel,isSaving:o.isSaving}):t.jsx(G,{onSave:c.handleSave,onCancel:c.handleCancel,isSaving:o.isSaving})]})})}),t.jsx(fe,{collisionDetection:ve,onDragEnd:async e=>{const{active:t,over:a}=e;if(!a||t.id===a.id)return;const l=s.findIndex(e=>e._id===t.id),r=s.findIndex(e=>e._id===a.id),n=je(s,l,r);for(let s=0;s<n.length;s++){const e=n[s];e&&e.order!==s&&await i(e._id,{name:e.name,order:s})}},children:t.jsx(we,{items:s.map(e=>e._id),strategy:Ne,children:t.jsx("div",{className:"grid gap-4",children:s.map(e=>t.jsx(ct,{category:e,onEdit:()=>c.handleEdit(e),onDelete:()=>c.handleDelete(e),isDeleting:o.isDeleting},e._id))})})}),0===s.length&&t.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[t.jsx(I,{className:"text-6xl mx-auto mb-4 opacity-30"}),t.jsx("p",{children:"아직 등록된 카테고리가 없습니다"}),t.jsx("p",{className:"text-sm mt-2",children:'위의 "카테고리 추가" 버튼을 클릭하여 첫 카테고리를 만들어보세요'})]})]})},gt={fullName:"",firstName:"",role:"",subtitle:"",location:"",education:"",yearsOfExperience:"",email:"",phone:"",githubUrl:"",linkedinUrl:"",heroTitle:"",heroSubtitle:"",aboutTitle:"",aboutSubtitle:"",aboutDescription1:"",aboutDescription2:"",skillsTitle:"",skillsSubtitle:"",projectsTitle:"",projectsSubtitle:"",booksTitle:"",booksSubtitle:"",contactTitle:"",contactSubtitle:"",stat1Number:"",stat1Label:"",stat2Number:"",stat2Label:"",experienceTitle:"",experienceSubtitle:"",learningGoalsTitle:"앞으로의 학습 목표",learningGoalsDescription:"4차 산업혁명 시대에 발맞춰 **지능형 공장(Smart Factory) 구현**을 위해 다음 기술들을 집중적으로 탐구하여 전문성을 확대해 나가겠습니다.",learningGoalsList:["첨단 로봇 제어","딥러닝 기반 비전 시스템","엣지 컴퓨팅","클라우드 연동","MES/ERP 연동 기술"],siteTitle:"",siteDescription:"",siteKeywords:"",siteAuthor:"",siteLanguage:"ko",siteUrl:"",ogTitle:"",ogDescription:"",ogImage:"",ogType:"website",twitterCard:"summary_large_image",twitterSite:"",twitterCreator:"",robotsIndex:!0,robotsFollow:!0,googleAnalyticsId:"",googleSiteVerification:"",instagramUrl:"",twitterUrl:"",facebookUrl:"",youtubeUrl:"",tiktokUrl:"",behanceUrl:"",dribbbleUrl:"",mediumUrl:"",telegramUrl:"",discordUrl:"",kakaoTalkUrl:"",naverBlogUrl:"",tistoryUrl:"",velogUrl:"",notionUrl:"",googleTagManagerId:"",facebookPixelId:"",naverAnalyticsId:"",kakaoPixelId:"",hotjarId:"",mixpanelToken:"",amplitudeApiKey:"",sentryDsn:"",logRocketId:"",fullStoryOrgId:"",intercomAppId:"",zendeskWidgetKey:"",crispWebsiteId:"",tawkToPropertyId:"",liveChatLicense:"",olarkSiteId:"",enableHttps:!0,enableCsp:!0,cspDirectives:"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https:;",enableHsts:!0,hstsMaxAge:"31536000",enableXssProtection:!0,enableContentTypeOptions:!0,enableFrameOptions:!0,frameOptionsValue:"DENY",enableReferrerPolicy:!0,referrerPolicyValue:"strict-origin-when-cross-origin",enablePermissionsPolicy:!0,permissionsPolicyValue:"camera=(), microphone=(), geolocation=(), payment=()",enableApiRateLimit:!0,apiRateLimitPerMinute:"60",enableAdminAuth:!0,adminSessionTimeout:"3600",enableTwoFactorAuth:!1,enableIpWhitelist:!1,allowedIpAddresses:"",enableAuditLog:!0,enableBackup:!0,backupFrequency:"daily"},ut=[{title:"🧑 개인 정보",fields:[{key:"fullName",label:"전체 이름",type:"text",placeholder:"최주영",isMultilingual:!0},{key:"firstName",label:"이름",type:"text",placeholder:"주영",isMultilingual:!0},{key:"role",label:"역할/직책",type:"text",placeholder:"공장자동화 전문가",isMultilingual:!0},{key:"subtitle",label:"부제목",type:"text",placeholder:"바리스타 → 자동화 엔지니어",isMultilingual:!0},{key:"location",label:"위치",type:"text",placeholder:"부산",isMultilingual:!0},{key:"education",label:"교육",type:"text",placeholder:"부산인력개발원",isMultilingual:!0},{key:"yearsOfExperience",label:"경력 기간",type:"text",placeholder:"5년",isMultilingual:!0},{key:"email",label:"이메일",type:"email",placeholder:"your@email.com"},{key:"phone",label:"전화번호",type:"tel",placeholder:"+82 10-1234-5678"}]},{title:"🔗 소셜 링크",fields:[{key:"githubUrl",label:"GitHub URL",type:"url",placeholder:"https://github.com/username"},{key:"linkedinUrl",label:"LinkedIn URL",type:"url",placeholder:"https://linkedin.com/in/username"}]},{title:"⚙️ 사이드바 설정",fields:[{key:"sidebarSkillCount",label:"사이드바 핵심기술 표시 개수",type:"number",min:3,max:6,placeholder:"4"},{key:"languageCardSkillCount",label:"사이드바 언어카드 표시 개수",type:"number",min:2,max:5,placeholder:"3"}]},{title:"🏠 Hero 섹션 (메인 페이지)",fields:[{key:"heroTitle",label:"Hero 제목",type:"text",placeholder:"공장자동화 전문가",isMultilingual:!0},{key:"heroSubtitle",label:"Hero 부제목",type:"textarea",rows:6,placeholder:"여러분의 소개를 작성하세요...",isMultilingual:!0},{key:"heroTag",label:"Hero 태그",type:"text",placeholder:"🎯 취업 준비 중",isMultilingual:!0}]},{title:"👤 About 섹션",fields:[{key:"aboutTitle",label:"About 제목",type:"text",placeholder:"저의 여정",isMultilingual:!0},{key:"aboutSubtitle",label:"About 부제목",type:"text",placeholder:"커피 한 잔에서 시작된...",isMultilingual:!0},{key:"aboutDescription1",label:"About 설명 1",type:"textarea",rows:6,placeholder:"첫 번째 문단...",isMultilingual:!0},{key:"aboutDescription2",label:"About 설명 2",type:"textarea",rows:6,placeholder:"두 번째 문단...",isMultilingual:!0},{key:"aboutCardTitle",label:"소개 카드 제목",type:"text",placeholder:"바리스타에서 자동화 전문가로",isMultilingual:!0},{key:"aboutJourneyTitle",label:"성장 여정 제목",type:"text",placeholder:"성장 여정",isMultilingual:!0}]},{title:"💼 Experience 섹션",fields:[{key:"experienceTitle",label:"Experience 제목",type:"text",placeholder:"경력 & 학습",isMultilingual:!0},{key:"experienceSubtitle",label:"Experience 부제목",type:"text",placeholder:"바리스타에서 자동화 전문가로...",isMultilingual:!0}]},{title:"🛠️ Skills 섹션",fields:[{key:"skillsTitle",label:"Skills 제목",type:"text",placeholder:"기술 스택",isMultilingual:!0},{key:"skillsSubtitle",label:"Skills 부제목",type:"text",placeholder:"공장자동화와 데이터 분석을...",isMultilingual:!0}]},{title:"🎯 학습 목표 (Skills 페이지)",fields:[{key:"learningGoalsTitle",label:"학습 목표 제목",type:"text",placeholder:"앞으로의 학습 목표",isMultilingual:!0},{key:"learningGoalsDescription",label:"학습 목표 설명",type:"textarea",placeholder:"4차 산업혁명 시대에...",isMultilingual:!0},{key:"learningGoalsList",label:"학습 목표 기술 목록",type:"array",placeholder:"기술 이름 입력 (Enter로 추가)"}]},{title:"📁 Projects 섹션",fields:[{key:"projectsTitle",label:"Projects 제목",type:"text",placeholder:"프로젝트",isMultilingual:!0},{key:"projectsSubtitle",label:"Projects 부제목",type:"text",placeholder:"다양한 분야의 프로젝트...",isMultilingual:!0},{key:"projectsUpdateTitle",label:"업데이트 카드 제목",type:"text",placeholder:"프로젝트 업데이트 예정",isMultilingual:!0},{key:"projectsUpdateDescription",label:"업데이트 카드 설명",type:"textarea",placeholder:"현재 학습 중인 기술들을 활용한 실제 프로젝트들을 곧 업로드할 예정입니다.",isMultilingual:!0},{key:"projectsUpdateTechList",label:"업데이트 예정 기술 목록",type:"array",placeholder:"기술 이름 입력 (Enter로 추가)"}]},{title:"📚 Books 섹션",fields:[{key:"booksTitle",label:"Books 제목",type:"text",placeholder:"기술 서적 & 학습 노트",isMultilingual:!0},{key:"booksSubtitle",label:"Books 부제목",type:"text",placeholder:"읽은 기술 서적과...",isMultilingual:!0}]},{title:"📞 Contact 섹션",fields:[{key:"contactTitle",label:"Contact 제목",type:"text",placeholder:"연락처",isMultilingual:!0},{key:"contactSubtitle",label:"Contact 부제목",type:"text",placeholder:"프로젝트나 협업에...",isMultilingual:!0}]},{title:"📊 통계 섹션",fields:[{key:"stat1Number",label:"통계 1 숫자",type:"text",placeholder:"5+"},{key:"stat1Label",label:"통계 1 라벨",type:"text",placeholder:"년 경력",isMultilingual:!0},{key:"stat2Number",label:"통계 2 숫자",type:"text",placeholder:"10+"},{key:"stat2Label",label:"통계 2 라벨",type:"text",placeholder:"기술 스택",isMultilingual:!0},{key:"stat3Number",label:"통계 3 숫자",type:"text",placeholder:"3+"},{key:"stat3Label",label:"통계 3 라벨",type:"text",placeholder:"완료 프로젝트",isMultilingual:!0}]},{title:"🔍 기본 SEO 설정",fields:[{key:"siteTitle",label:"사이트 제목",type:"text",placeholder:"포트폴리오 - 홍길동"},{key:"siteDescription",label:"사이트 설명",type:"textarea",rows:3,placeholder:"공장자동화 전문가 홍길동의 포트폴리오입니다. PLC 프로그래밍, 데이터 분석, 자동화 시스템 개발 경험을 소개합니다."},{key:"siteKeywords",label:"키워드 (쉼표로 구분)",type:"text",placeholder:"공장자동화, PLC, 데이터분석, 자동화시스템"},{key:"siteAuthor",label:"작성자",type:"text",placeholder:"홍길동"},{key:"siteLanguage",label:"사이트 언어",type:"select",placeholder:"언어 선택",options:[{value:"ko",label:"한국어 (ko)"},{value:"en",label:"English (en)"},{value:"ja",label:"日本語 (ja)"},{value:"zh",label:"中文 (zh)"}]},{key:"siteUrl",label:"사이트 URL",type:"url",placeholder:"https://yourportfolio.com"}]},{title:"📱 Open Graph (Facebook, LinkedIn)",fields:[{key:"ogTitle",label:"OG 제목",type:"text",placeholder:"포트폴리오 - 홍길동"},{key:"ogDescription",label:"OG 설명",type:"textarea",rows:3,placeholder:"공장자동화 전문가 홍길동의 포트폴리오를 확인해보세요."},{key:"ogImage",label:"OG 이미지 URL",type:"url",placeholder:"https://yourportfolio.com/og-image.jpg"},{key:"ogType",label:"OG 타입",type:"select",placeholder:"타입 선택",options:[{value:"website",label:"웹사이트 (website)"},{value:"profile",label:"프로필 (profile)"},{value:"article",label:"기사 (article)"}]}]},{title:"🐦 Twitter Card",fields:[{key:"twitterCard",label:"Twitter Card 타입",type:"select",placeholder:"카드 타입 선택",options:[{value:"summary",label:"요약 (summary)"},{value:"summary_large_image",label:"큰 이미지 요약 (summary_large_image)"},{value:"app",label:"앱 (app)"},{value:"player",label:"플레이어 (player)"}]},{key:"twitterSite",label:"Twitter 사이트 계정",type:"text",placeholder:"@yourhandle"},{key:"twitterCreator",label:"Twitter 작성자 계정",type:"text",placeholder:"@yourhandle"}]},{title:"🤖 검색 엔진 설정",fields:[{key:"robotsIndex",label:"검색 엔진 인덱싱 허용",type:"checkbox",placeholder:"검색 엔진이 이 사이트를 인덱싱할 수 있도록 허용합니다."},{key:"robotsFollow",label:"링크 팔로우 허용",type:"checkbox",placeholder:"검색 엔진이 이 사이트의 링크를 따라갈 수 있도록 허용합니다."}]},{title:"📊 Google 설정",fields:[{key:"googleAnalyticsId",label:"Google Analytics ID",type:"text",placeholder:"G-XXXXXXXXXX"},{key:"googleSiteVerification",label:"Google 사이트 인증 코드",type:"text",placeholder:"google-site-verification=..."}]},{title:"📱 글로벌 소셜 미디어",fields:[{key:"instagramUrl",label:"Instagram URL",type:"url",placeholder:"https://instagram.com/yourhandle"},{key:"twitterUrl",label:"Twitter URL",type:"url",placeholder:"https://twitter.com/yourhandle"},{key:"facebookUrl",label:"Facebook URL",type:"url",placeholder:"https://facebook.com/yourpage"},{key:"youtubeUrl",label:"YouTube URL",type:"url",placeholder:"https://youtube.com/@yourchannel"},{key:"tiktokUrl",label:"TikTok URL",type:"url",placeholder:"https://tiktok.com/@yourhandle"}]},{title:"🎨 디자인 & 포트폴리오",fields:[{key:"behanceUrl",label:"Behance URL",type:"url",placeholder:"https://behance.net/yourprofile"},{key:"dribbbleUrl",label:"Dribbble URL",type:"url",placeholder:"https://dribbble.com/yourhandle"}]},{title:"✍️ 블로그 & 글쓰기",fields:[{key:"mediumUrl",label:"Medium URL",type:"url",placeholder:"https://medium.com/@yourhandle"},{key:"velogUrl",label:"Velog URL",type:"url",placeholder:"https://velog.io/@yourhandle"},{key:"tistoryUrl",label:"Tistory URL",type:"url",placeholder:"https://yourblog.tistory.com"},{key:"naverBlogUrl",label:"네이버 블로그 URL",type:"url",placeholder:"https://blog.naver.com/yourblog"}]},{title:"💬 메신저 & 커뮤니케이션",fields:[{key:"telegramUrl",label:"Telegram URL",type:"url",placeholder:"https://t.me/yourhandle"},{key:"discordUrl",label:"Discord URL",type:"url",placeholder:"https://discord.gg/yourserver"},{key:"kakaoTalkUrl",label:"카카오톡 URL",type:"url",placeholder:"https://open.kakao.com/o/yourgroup"}]},{title:"📝 워크스페이스 & 도구",fields:[{key:"notionUrl",label:"Notion 워크스페이스 URL",type:"url",placeholder:"https://notion.so/yourworkspace"}]},{title:"📊 웹 분석 도구",fields:[{key:"googleTagManagerId",label:"Google Tag Manager ID",type:"text",placeholder:"GTM-XXXXXXX"},{key:"facebookPixelId",label:"Facebook Pixel ID",type:"text",placeholder:"123456789012345"},{key:"naverAnalyticsId",label:"네이버 웹마스터 도구 ID",type:"text",placeholder:"naver-site-verification=..."},{key:"kakaoPixelId",label:"카카오 픽셀 ID",type:"text",placeholder:"1234567890"}]},{title:"🔍 사용자 행동 분석",fields:[{key:"hotjarId",label:"Hotjar Site ID",type:"text",placeholder:"1234567"},{key:"mixpanelToken",label:"Mixpanel Project Token",type:"text",placeholder:"abc123def456..."},{key:"amplitudeApiKey",label:"Amplitude API Key",type:"text",placeholder:"abc123def456..."}]},{title:"🐛 에러 추적 & 모니터링",fields:[{key:"sentryDsn",label:"Sentry DSN",type:"text",placeholder:"https://abc123@sentry.io/123456"},{key:"logRocketId",label:"LogRocket App ID",type:"text",placeholder:"abc123def456"},{key:"fullStoryOrgId",label:"FullStory Org ID",type:"text",placeholder:"ABC123"}]},{title:"💬 고객 지원 & 채팅",fields:[{key:"intercomAppId",label:"Intercom App ID",type:"text",placeholder:"abc123def"},{key:"zendeskWidgetKey",label:"Zendesk Widget Key",type:"text",placeholder:"abc123def456..."},{key:"crispWebsiteId",label:"Crisp Website ID",type:"text",placeholder:"abc123def456..."}]},{title:"🎧 추가 채팅 도구",fields:[{key:"tawkToPropertyId",label:"Tawk.to Property ID",type:"text",placeholder:"abc123def456..."},{key:"liveChatLicense",label:"LiveChat License Number",type:"text",placeholder:"12345678"},{key:"olarkSiteId",label:"Olark Site ID",type:"text",placeholder:"abc123def456..."}]},{title:"🔒 기본 보안 헤더",fields:[{key:"enableHttps",label:"HTTPS 강제 사용",type:"checkbox",placeholder:"모든 HTTP 요청을 HTTPS로 리다이렉트합니다."},{key:"enableCsp",label:"Content Security Policy (CSP) 활성화",type:"checkbox",placeholder:"XSS 공격을 방지하기 위한 CSP 헤더를 설정합니다."},{key:"cspDirectives",label:"CSP 지시문",type:"textarea",rows:3,placeholder:"Content Security Policy 지시문을 설정합니다."},{key:"enableHsts",label:"HTTP Strict Transport Security (HSTS) 활성화",type:"checkbox",placeholder:"HTTPS 연결을 강제하는 HSTS 헤더를 설정합니다."},{key:"hstsMaxAge",label:"HSTS 최대 나이 (초)",type:"text",placeholder:"31536000 (1년)"}]},{title:"🛡️ 추가 보안 헤더",fields:[{key:"enableXssProtection",label:"XSS 보호 활성화",type:"checkbox",placeholder:"브라우저의 XSS 필터를 활성화합니다."},{key:"enableContentTypeOptions",label:"Content-Type 옵션 활성화",type:"checkbox",placeholder:"MIME 타입 스니핑 공격을 방지합니다."},{key:"enableFrameOptions",label:"X-Frame-Options 활성화",type:"checkbox",placeholder:"클릭재킹 공격을 방지합니다."},{key:"frameOptionsValue",label:"X-Frame-Options 값",type:"select",placeholder:"헤더 값 선택",options:[{value:"DENY",label:"DENY (모든 프레임 차단)"},{value:"SAMEORIGIN",label:"SAMEORIGIN (같은 도메인만 허용)"},{value:"ALLOW-FROM",label:"ALLOW-FROM (특정 도메인 허용)"}]},{key:"enableReferrerPolicy",label:"Referrer Policy 활성화",type:"checkbox",placeholder:"리퍼러 정보 노출을 제어합니다."},{key:"referrerPolicyValue",label:"Referrer Policy 값",type:"select",placeholder:"정책 값 선택",options:[{value:"no-referrer",label:"no-referrer (리퍼러 정보 전송 안함)"},{value:"strict-origin-when-cross-origin",label:"strict-origin-when-cross-origin (교차 도메인시 도메인만)"},{value:"same-origin",label:"same-origin (같은 도메인만)"}]}]},{title:"🔐 권한 및 정책",fields:[{key:"enablePermissionsPolicy",label:"Permissions Policy 활성화",type:"checkbox",placeholder:"브라우저 기능 사용을 제어합니다."},{key:"permissionsPolicyValue",label:"Permissions Policy 값",type:"textarea",rows:2,placeholder:"camera=(), microphone=(), geolocation=(), payment=()"}]},{title:"⚡ API 보안",fields:[{key:"enableApiRateLimit",label:"API 속도 제한 활성화",type:"checkbox",placeholder:"API 요청 빈도를 제한하여 DDoS 공격을 방지합니다."},{key:"apiRateLimitPerMinute",label:"분당 API 요청 제한",type:"text",placeholder:"60 (분당 60회)"}]},{title:"👤 관리자 인증",fields:[{key:"enableAdminAuth",label:"관리자 인증 활성화",type:"checkbox",placeholder:"관리자 대시보드 접근을 위한 인증을 활성화합니다."},{key:"adminSessionTimeout",label:"관리자 세션 타임아웃 (초)",type:"text",placeholder:"3600 (1시간)"},{key:"enableTwoFactorAuth",label:"2단계 인증 활성화",type:"checkbox",placeholder:"관리자 로그인시 2단계 인증을 요구합니다."},{key:"enableIpWhitelist",label:"IP 화이트리스트 활성화",type:"checkbox",placeholder:"특정 IP 주소에서만 관리자 접근을 허용합니다."},{key:"allowedIpAddresses",label:"허용된 IP 주소 (쉼표로 구분)",type:"text",placeholder:"192.168.1.1, 10.0.0.1"}]},{title:"📋 로그 & 백업",fields:[{key:"enableAuditLog",label:"감사 로그 활성화",type:"checkbox",placeholder:"관리자 활동을 기록하여 보안 감사를 지원합니다."},{key:"enableBackup",label:"자동 백업 활성화",type:"checkbox",placeholder:"정기적으로 데이터를 백업합니다."},{key:"backupFrequency",label:"백업 빈도",type:"select",placeholder:"백업 주기 선택",options:[{value:"hourly",label:"매시간 (hourly)"},{value:"daily",label:"매일 (daily)"},{value:"weekly",label:"매주 (weekly)"},{value:"monthly",label:"매월 (monthly)"}]}]}],mt=(e,t)=>"ko"===t?e:"en"===t?`${e}En`:"ja"===t?`${e}Ja`:e,pt=e=>{switch(e){case"general":return"🏠 일반 설정";case"appearance":return"🎨 외관 설정";case"seo":return"🔍 SEO 설정";case"social":return"📱 소셜 미디어";case"analytics":return"📊 분석 도구";case"security":return"🔒 보안 설정";default:return"사이트 설정"}},ht=e=>{switch(e){case"general":return"사이트의 기본 정보와 개인 정보를 설정합니다.";case"appearance":return"각 섹션의 제목과 내용을 편집합니다.";case"seo":return"검색 엔진 최적화 설정을 관리합니다.";case"social":return"소셜 미디어 링크와 연락처 정보를 설정합니다.";case"analytics":return"Google Analytics 등 분석 도구를 설정합니다.";case"security":return"인증 및 보안 설정을 관리합니다.";default:return"포트폴리오의 모든 텍스트를 편집하고 저장하세요."}},bt=e=>{if(!e)return ut;switch(e){case"general":return ut.filter(e=>e.title.includes("개인 정보")||e.title.includes("소셜 링크")||e.title.includes("사이드바 설정"));case"appearance":return ut.filter(e=>e.title.includes("Hero")||e.title.includes("About")||e.title.includes("Experience")||e.title.includes("Skills")||e.title.includes("학습 목표")||e.title.includes("Projects")||e.title.includes("Books")||e.title.includes("Contact")||e.title.includes("통계"));case"seo":return ut.filter(e=>e.title.includes("SEO")||e.title.includes("Open Graph")||e.title.includes("Twitter Card")||e.title.includes("검색 엔진")||e.title.includes("Google"));case"social":return ut.filter(e=>e.title.includes("소셜 링크")||e.title.includes("글로벌 소셜 미디어")||e.title.includes("디자인 & 포트폴리오")||e.title.includes("블로그 & 글쓰기")||e.title.includes("메신저 & 커뮤니케이션")||e.title.includes("워크스페이스 & 도구"));case"analytics":return ut.filter(e=>e.title.includes("웹 분석 도구")||e.title.includes("사용자 행동 분석")||e.title.includes("에러 추적")||e.title.includes("고객 지원")||e.title.includes("추가 채팅 도구"));case"security":return ut.filter(e=>e.title.includes("기본 보안 헤더")||e.title.includes("추가 보안 헤더")||e.title.includes("권한 및 정책")||e.title.includes("API 보안")||e.title.includes("관리자 인증")||e.title.includes("로그 & 백업"));default:return ut}},yt=(t=null)=>{const{refetchSettings:a}=ge(),[s,l]=e.useState(gt),[r,i]=e.useState(!0),[n,d]=e.useState(!1),[o,c]=e.useState(null),[x,g]=e.useState(new Set(["개인 정보","소셜 링크"])),[u,m]=e.useState("ko"),p=e.useCallback(async()=>{try{const e=(e=>{const t={...gt,...e};return t.sidebarSkillCount&&(t.sidebarSkillCount="number"==typeof t.sidebarSkillCount?t.sidebarSkillCount:parseInt(String(t.sidebarSkillCount))||4),t.languageCardSkillCount&&(t.languageCardSkillCount="number"==typeof t.languageCardSkillCount?t.languageCardSkillCount:parseInt(String(t.languageCardSkillCount))||3),t})((await Ee.get()).data);l(e)}catch(e){c({type:"error",text:"설정을 불러오는데 실패했습니다. 기본 값으로 표시됩니다."})}finally{i(!1)}},[]);return e.useEffect(()=>{p()},[p]),e.useEffect(()=>{if(t)if("appearance"===t)g(new Set);else{const e=bt(t).map(e=>e.title);g(new Set(e))}else g(new Set(["개인 정보","소셜 링크"]))},[t]),{settings:s,loading:r,saving:n,message:o,expandedSections:x,currentLang:u,setCurrentLang:m,handleChange:(e,t)=>{l(a=>({...a,[e]:t}))},handleSave:async()=>{d(!0),c(null);try{await Ee.update(s),await a(),c({type:"success",text:"✅ 설정이 성공적으로 저장되었습니다! 화면이 업데이트됩니다."}),setTimeout(()=>c(null),5e3)}catch(e){c({type:"error",text:"❌ 설정 저장에 실패했습니다. 콘솔을 확인해주세요."})}finally{d(!1)}},toggleSection:e=>{g(t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},setExpandedSections:g}},kt=({field:e,value:a,onChange:s,currentLang:l="ko",settings:r})=>{const i=()=>{if(!e.isMultilingual||!r)return null;const a=r[e.key],s=r[mt(e.key,"en")],l=r[mt(e.key,"ja")];return t.jsxs("div",{className:"flex gap-2 text-xs mb-2",children:[t.jsxs("span",{className:"px-2 py-1 rounded "+(a?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["🇰🇷 ",a?"✓":"○"]}),t.jsxs("span",{className:"px-2 py-1 rounded "+(s?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["🇺🇸 ",s?"✓":"○"]}),t.jsxs("span",{className:"px-2 py-1 rounded "+(l?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-500"),children:["🇯🇵 ",l?"✓":"○"]})]})};return t.jsxs("div",{children:["checkbox"!==e.type&&t.jsx("label",{htmlFor:e.key,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e.label}),(()=>{var l;switch(e.type){case"textarea":return t.jsxs(t.Fragment,{children:[i(),t.jsx("textarea",{id:e.key,value:a||"",onChange:e=>s(e.target.value),rows:e.rows||3,placeholder:e.placeholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-vertical"})]});case"select":return t.jsx("select",{id:e.key,value:a||"",onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:null==(l=e.options)?void 0:l.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))});case"checkbox":return t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{id:e.key,type:"checkbox",checked:a||!1,onChange:e=>s(e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),t.jsx("label",{htmlFor:e.key,className:"text-sm text-gray-700 dark:text-gray-300",children:e.placeholder})]});case"number":return t.jsx("input",{id:e.key,type:"number",value:a||"",onChange:e=>s(parseInt(e.target.value)||0),min:e.min,max:e.max,placeholder:e.placeholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"});case"array":return t.jsxs("div",{className:"space-y-2",children:[(a||[]).map((l,r)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"text",value:l,onChange:e=>{const t=[...a];t[r]=e.target.value,s(t)},className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:e.placeholder}),t.jsx("button",{type:"button",onClick:()=>{const e=a.filter((e,t)=>t!==r);s(e)},className:"p-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"삭제"})]},r)),t.jsxs("button",{type:"button",onClick:()=>{const e=[...a||[],""];s(e)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[t.jsx(n,{size:12})," 항목 추가"]})]});default:return t.jsxs(t.Fragment,{children:[i(),t.jsx("input",{id:e.key,type:e.type,value:a||"",onChange:e=>s(e.target.value),placeholder:e.placeholder,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})}})(),"checkbox"===e.type&&t.jsx("label",{htmlFor:e.key,className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e.label})]})},jt=({section:e,isExpanded:a,onToggle:s,currentLang:l,settings:r,onChange:i,setCurrentLang:n})=>t.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[t.jsx("button",{onClick:s,className:"w-full p-6 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:t.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[t.jsx(o,{className:"text-primary-500",size:20}),e.title,a?t.jsx(h,{className:"text-gray-400 ml-auto",size:16}):t.jsx(C,{className:"text-gray-400 ml-auto",size:16})]})}),t.jsx(he,{children:a&&t.jsx(be.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:t.jsxs("div",{className:"p-6 pt-4 border-t border-gray-200 dark:border-gray-700 "+(e.title.includes("Hero 섹션")?"py-8":""),children:[e.fields.some(e=>e.isMultilingual)&&t.jsx(H,{activeLanguage:l,onChange:n}),t.jsx("div",{className:"grid gap-6 "+(e.title.includes("About 섹션")||e.title.includes("Hero 섹션")||e.title.includes("Experience 섹션")||e.title.includes("Skills 섹션")||e.title.includes("Projects 섹션")||e.title.includes("Books 섹션")||e.title.includes("소셜 링크")||e.title.includes("Contact 섹션")?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),children:e.fields.map(e=>{const a=e.isMultilingual?mt(e.key,l):e.key;return t.jsx(kt,{field:e,value:r[a]||"checkbox"!==e.type&&("array"===e.type?[]:""),onChange:e=>i(a,e),currentLang:l,settings:r},e.key)})})]})})})]}),ft=({activeSection:e=null})=>{const{settings:a,loading:s,saving:l,message:r,expandedSections:i,currentLang:n,setCurrentLang:d,handleChange:o,handleSave:c,toggleSection:x,setExpandedSections:g}=yt(e);if(s)return t.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"설정을 불러오는 중..."})]});const u=bt(e);return t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:pt(e)}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:ht(e)})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>{const e=u.map(e=>e.title);g(new Set(e))},className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm",children:"모두 펼치기"}),t.jsx("button",{onClick:()=>g(new Set),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white font-medium px-4 py-2 rounded-lg transition-colors text-sm",children:"모두 접기"}),t.jsxs("button",{onClick:c,disabled:l,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(S,{}),l?"저장 중...":"모두 저장"]})]})]}),r&&t.jsx(be.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.3},className:"p-4 rounded-lg shadow-md "+("success"===r.type?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300 border border-green-400 dark:border-green-700":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300 border border-red-400 dark:border-red-700"),children:r.text}),u.map(e=>t.jsx(jt,{section:e,isExpanded:i.has(e.title),onToggle:()=>x(e.title),currentLang:n,settings:a,onChange:o,setCurrentLang:d},e.title)),!e&&t.jsx("div",{className:"py-4",children:t.jsxs("button",{onClick:c,disabled:l,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-8 py-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx(S,{size:20}),l?"설정 저장 중...":"모두 저장하고 적용"]})})]})},vt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{isAuthenticated:a,logout:s,isLoading:l}=He(),r=$(),[i,n]=e.useState(!1),{toasts:d,hideToast:o}=Y(),{activeTab:c,setActiveTab:x,activeSettingsSection:g,setActiveSettingsSection:u,bookFilters:m,experienceFilters:p,projectFilters:h}=ue(),{counts:b,refreshCounts:y}=me(),{data:k=[]}=pe(),j=e.useMemo(()=>k.filter(e=>!e.isRead).map(e=>({id:e._id||"",message:`${e.name}님으로부터 새로운 메시지: ${e.subject}`,read:!1,createdAt:e.createdAt||(new Date).toISOString()})).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),[k]);if(e.useEffect(()=>{const e=r.state;(null==e?void 0:e.tab)&&x(e.tab)},[r.state,x]),!a&&!l)return t.jsx("div",{children:"로그인이 필요합니다."});if(l)return t.jsx("div",{className:"flex items-center justify-center min-h-screen",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"로딩 중..."})]})});return t.jsxs(t.Fragment,{children:[t.jsx(D,{toasts:d,onClose:o}),t.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 min-h-screen text-gray-900 dark:text-white",children:t.jsx("div",{className:"flex",children:t.jsx("div",{className:"flex-1 p-8",children:t.jsx("div",{className:"max-w-7xl mx-auto",children:t.jsxs("div",{className:"flex gap-8",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white",children:"관리자 대시보드"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(V,{notifications:j,showNotifications:i,onToggle:()=>n(!i),onNotificationClick:()=>{x("messages"),n(!1)}}),t.jsxs("button",{onClick:s,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:[t.jsx(L,{}),"로그아웃"]})]})]}),(()=>{const e=r.state,a=null==e?void 0:e.editId;switch(c){case"books":return t.jsx(et,{bookFilter:m.state.filter,bookSearchTerm:m.state.searchTerm,selectedBookCategory:m.state.selectedCategory,initialEditId:a});case"videoLearnings":return t.jsx(tt,{initialEditId:a});case"videoPlaylists":return t.jsx(at,{});case"experiences":return t.jsx(st,{experienceFilter:p.state.filter,experienceSearchTerm:p.state.searchTerm,selectedExperienceCompany:p.state.selectedCompany,selectedExperienceYear:p.state.selectedYear});case"projects":return t.jsx(lt,{projectFilter:h.state.filter,projectSearchTerm:h.state.searchTerm,selectedProjectCategory:h.state.selectedCategory});case"messages":return t.jsx(it,{});case"skills":return t.jsx(ot,{});case"categories":return t.jsx(xt,{});default:return g?t.jsx(ft,{activeSection:g}):t.jsx(Qe,{counts:b})}})()]}),t.jsx(K,{activeTab:c,setActiveTab:x,activeSettingsSection:g,setActiveSettingsSection:u,counts:b,refreshCounts:y,bookFilters:m,experienceFilters:p,projectFilters:h})]})})})})})]})}},Symbol.toStringTag,{value:"Module"}));export{Ge as A,vt as D,Ke as a,Ze as b,De as c,qe as d,We as e,Ve as f,Ye as g,Fe as h,_e as i,Re as j,Oe as k,Te as l,Pe as m,Ae as n,Ue as o,ze as p,Me as q,Je as r,Ee as s,He as u,Be as v};
//# sourceMappingURL=chunk-1626767c.js.map
