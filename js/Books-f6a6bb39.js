import{j as e}from"./chunk-9a18e39e.js";import{r,b as a,L as t}from"./chunk-324910f1.js";import{u as s}from"./chunk-50de54c5.js";import{f as i,h as d,u as o,i as l,g as n,j as c,k as m,l as x,m as h}from"./index-5373f156.js";import{u}from"./chunk-ee28cf2a.js";import{u as p}from"./chunk-eaed8c6b.js";import{f as g}from"./chunk-abc135ce.js";import{S as k}from"./chunk-b63dacd6.js";import{u as b}from"./chunk-43ad9be7.js";import{m as y}from"./chunk-816c63d1.js";const f=({src:a,alt:t,className:s="w-full h-64 object-cover group-hover:scale-105 transition-transform duration-300",fallbackIcon:o})=>{const[l,n]=r.useState("loading"),[c,m]=r.useState(a);return c&&"error"!==l?e.jsxs("div",{className:"relative overflow-hidden",children:["loading"===l&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse flex items-center justify-center",children:e.jsx(d,{className:"text-gray-400 text-4xl"})}),e.jsx("img",{src:c,alt:t,className:`${s} ${"loading"===l?"opacity-0":"opacity-100"} transition-opacity duration-300`,loading:"lazy",decoding:"async",width:"400",height:"256",onLoad:()=>{n("loaded")},onError:()=>{n("error"),m(void 0)}})]}):e.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center",children:o||e.jsx(i,{className:"text-white text-6xl"})})},j=()=>{const{settings:d,loading:j}=o(),{t:v,i18n:N}=b(),w=N.language,{data:_=[],isLoading:I}=u(),{data:S=[],isLoading:E}=p(),$=a(),[L,C]=s({triggerOnce:!0,threshold:.1}),[J,T]=r.useState("all"),{isAuthenticated:O}=l();r.useEffect(()=>{var e;const r=null==(e=$.state)?void 0:e.scrollPosition;r&&(window.scrollTo(0,r),window.history.replaceState({},document.title))},[]);const P=r.useMemo(()=>{const e=_||[];return"all"===J?e:e.filter(e=>{var r;return e.categoryIds&&0!==e.categoryIds.length?e.categoryIds.some(e=>("string"==typeof e?e:null==e?void 0:e._id)===J):(null==(r=e.category)?void 0:r.toLowerCase())===J})},[_,J]),z=j||I,A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},D={hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return e.jsxs("section",{className:"section-padding bg-white dark:bg-dark-800 min-h-screen",children:[e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs(y.div,{ref:L,variants:A,initial:"hidden",animate:C?"visible":"hidden",children:[e.jsxs(y.div,{variants:D,className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-dark-900 dark:text-white mb-6",children:n(w,null==d?void 0:d.booksTitle,null==d?void 0:d.booksTitleEn,null==d?void 0:d.booksTitleJa)||"기술 서적 & 학습 노트"}),e.jsx("p",{className:"text-xl text-dark-600 dark:text-dark-300 max-w-3xl mx-auto mb-8",children:n(w,null==d?void 0:d.booksSubtitle,null==d?void 0:d.booksSubtitleEn,null==d?void 0:d.booksSubtitleJa)||"읽은 기술 서적과 그로부터 배운 지식을 공유합니다"})]}),O&&e.jsx(y.div,{variants:D,className:"mb-8 flex justify-end",children:e.jsxs(t,{to:"/admin",className:"inline-flex items-center gap-2 bg-accent-500 hover:bg-accent-600 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-600 shadow-medium hover:shadow-glow",children:[e.jsx(c,{})," 서적 추가"]})}),e.jsxs(y.div,{variants:D,className:"flex justify-center flex-wrap gap-3 mb-12",children:[e.jsx("button",{onClick:()=>T("all"),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors duration-600 border "+("all"===J?"bg-primary-500 text-white border-primary-500 dark:bg-primary-600 dark:border-primary-600 shadow-glow":"bg-white text-dark-700 border-secondary-300 hover:bg-secondary-50 dark:bg-dark-700 dark:text-dark-300 dark:border-dark-600 dark:hover:bg-dark-600"),children:"전체"},"all"),S.map(r=>e.jsx("button",{onClick:()=>T(r._id),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors duration-600 border "+(J===r._id?"bg-primary-500 text-white border-primary-500 dark:bg-primary-600 dark:border-primary-600 shadow-glow":"bg-white text-dark-700 border-secondary-300 hover:bg-secondary-50 dark:bg-dark-700 dark:text-dark-300 dark:border-dark-600 dark:hover:bg-dark-600"),children:m(w,r)},r._id))]}),z?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-dark-500 dark:text-dark-400",children:"데이터를 불러오는 중..."})]}):0===P.length?e.jsxs(y.div,{variants:D,className:"text-center py-12",children:[e.jsx(i,{className:"text-6xl text-dark-400 mx-auto mb-4"}),e.jsxs("p",{className:"text-xl text-dark-600 dark:text-dark-400",children:["all"===J?"전체":(()=>{const e=S.find(e=>e._id===J);return e?m(w,e):"선택한"})()," 카테고리의 등록된 서적이 없습니다."]})]}):e.jsx(y.div,{variants:A,className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:P.map(r=>e.jsx(y.div,{variants:D,whileHover:{y:-5},className:"card hover-lift",children:e.jsxs(t,{to:`/books/${r._id}`,state:{scrollPosition:window.scrollY},className:"block overflow-hidden h-full group",children:[e.jsx(f,{src:r.coverImage||"",alt:r.title,className:"w-full h-64 object-cover group-hover:scale-105 transition-transform duration-600"}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:r.categoryIds&&r.categoryIds.length>0?r.categoryIds.map(r=>{const a="string"==typeof r?r:null==r?void 0:r._id,t="string"==typeof r?S.find(e=>e._id===a):r;return t?e.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-800/50 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:m(w,t)},a):null}):r.category&&e.jsx("span",{className:"px-3 py-1 bg-primary-100 dark:bg-primary-800/50 text-primary-800 dark:text-primary-200 rounded-full text-sm font-medium",children:r.category})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"text-yellow-500"}),e.jsxs("span",{className:"text-dark-700 dark:text-dark-300 font-medium",children:[r.rating,"/5"]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-dark-900 dark:text-white mb-2 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors duration-600",children:n(w,r.title,r.titleEn,r.titleJa)}),e.jsx("p",{className:"text-dark-600 dark:text-dark-400 mb-4",children:n(w,r.author,r.authorEn,r.authorJa)}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-dark-500 dark:text-dark-500 pt-2 border-t border-secondary-200 dark:border-dark-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{}),e.jsx("span",{children:g(r.readDate)})]}),e.jsx("span",{className:"hover:text-primary-600 dark:hover:text-primary-400 transition-colors duration-600 font-medium",children:(()=>{if(r.chapters&&r.chapters.length>0){const e=r.chapters.reduce((e,r)=>{var a;return e+((null==(a=r.learnings)?void 0:a.length)||0)},0);return`${r.chapters.length}개 목차, ${e}개 학습 내용`}return r.learnings&&r.learnings.length>0?`${r.learnings.length}개의 학습 내용`:"학습 내용 없음"})()})]})]})]})},r._id))})]})}),e.jsx(k,{})]})};export{j as default};
//# sourceMappingURL=Books-f6a6bb39.js.map
