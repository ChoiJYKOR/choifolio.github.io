import{j as e}from"./chunk-9a18e39e.js";import{r as t}from"./chunk-324910f1.js";import{ar as r,as as a,at as s,au as n,av as l,aw as o,ax as i,G as c}from"./index-12c0d33b.js";import{G as d}from"./chunk-816c63d1.js";function g(e){return d({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"}}]})(e)}const x=({value:d,onChange:x,placeholder:m="내용을 입력하세요",rows:u=8,className:b=""})=>{const y=t.useRef(null),[h,p]=t.useState(0),v=()=>{y.current&&p(y.current.selectionStart)},k=()=>{var e;const t=d.split("\n");let r=0,a=0;for(let s=0;s<t.length;s++){const n=((null==(e=t[s])?void 0:e.length)||0)+1;if(h>=a&&(h<a+n||s===t.length-1)){r=s;break}a+=n}return{lineIndex:r,line:t[r]||"",lines:t,lineStart:a}},j=e=>{const{lineIndex:t,line:r,lines:a}=k(),s="#".repeat(e)+" ";r.match(/^#+\s/)?a[t]=s+r.replace(/^#+\s/,""):a[t]=s+r,x(a.join("\n"))},N=e=>{var t;const{lineIndex:r,line:a,lines:s}=k();if((null==a?void 0:a.match(/^[\s]*[-*+]\s/))||(null==a?void 0:a.match(/^[\s]*\d+\.\s/)))s[r]=(null==a?void 0:a.replace(/^[\s]*[-*+\d\.]\s/,"").trim())||"";else{const n=(null==(t=null==a?void 0:a.match(/^[\s]*/))?void 0:t[0])||"",l="bullet"===e?"- ":"1. ";s[r]=n+l+((null==a?void 0:a.trim())||"")}x(s.join("\n"))},f=e=>{const{lineIndex:t,lines:r}=k(),a=r[t]||"";r[t]="in"===e?"  "+a:a.replace(/^[\s]{0,2}/,""),x(r.join("\n"))},$=e=>{const t=y.current;if(!t)return;const r=t.selectionStart,a=t.selectionEnd,s=d.substring(r,a);let n="";switch(e){case"bold":n="**";break;case"italic":n="*";break;case"underline":n="__"}const l=`${n}${s}${n}`,o=d.substring(0,r)+l+d.substring(a);x(o),setTimeout(()=>{r===a?t.setSelectionRange(r+n.length,a+n.length):t.setSelectionRange(a+2*n.length,a+2*n.length),t.focus()},0)};return e.jsxs("div",{className:`border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 ${b}`,children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[e.jsx("button",{type:"button",onClick:()=>j(1),className:"px-2 py-1 text-xs font-bold text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"제목 1",children:"H1"}),e.jsx("button",{type:"button",onClick:()=>j(2),className:"px-2 py-1 text-xs font-semibold text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"제목 2",children:"H2"}),e.jsx("button",{type:"button",onClick:()=>j(3),className:"px-2 py-1 text-xs font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"제목 3",children:"H3"})]}),e.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[e.jsx("button",{type:"button",onClick:()=>$("bold"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"굵게",children:e.jsx(r,{className:"text-xs"})}),e.jsx("button",{type:"button",onClick:()=>$("italic"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"기울임",children:e.jsx(a,{className:"text-xs"})}),e.jsx("button",{type:"button",onClick:()=>$("underline"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"밑줄",children:e.jsx(s,{className:"text-xs"})})]}),e.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[e.jsx("button",{type:"button",onClick:()=>N("bullet"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"불릿 리스트",children:e.jsx(n,{className:"text-xs"})}),e.jsx("button",{type:"button",onClick:()=>N("number"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"번호 리스트",children:e.jsx(l,{className:"text-xs"})})]}),e.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),e.jsxs("div",{className:"flex items-center gap-1 mx-2",children:[e.jsx("button",{type:"button",onClick:()=>f("out"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"내어쓰기",children:e.jsx(o,{className:"text-xs"})}),e.jsx("button",{type:"button",onClick:()=>f("in"),className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"들여쓰기",children:e.jsx(i,{className:"text-xs"})})]}),e.jsx("div",{className:"w-px h-4 bg-gray-300 dark:bg-gray-600"}),e.jsx("button",{type:"button",onClick:()=>{const{lineIndex:e,lines:t,lineStart:r}=k(),a="▶ 토글 제목";t.splice(e+1,0,a,"  토글 내용을 입력하세요"),x(t.join("\n")),setTimeout(()=>{var a;if(y.current){const s=r+((null==(a=t[e])?void 0:a.length)||0)+1+7+1+2;y.current.setSelectionRange(s,s),y.current.focus()}},0)},className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors mx-2",title:"토글 블록",children:e.jsx(c,{className:"text-xs"})}),e.jsx("button",{type:"button",onClick:()=>{const{lineIndex:e,lines:t,lineStart:r}=k(),a=["```javascript","// 여기에 코드를 작성하세요","```"];t.splice(e+1,0,...a);const s=t.join("\n");x(s),setTimeout(()=>{var s,n;if(y.current){const l=r+((null==(s=t[e])?void 0:s.length)||0)+1+((null==(n=a[0])?void 0:n.length)||0)+1+2;y.current.setSelectionRange(l,l),y.current.focus()}},0)},className:"p-1 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded transition-colors",title:"코드 블록",children:e.jsx(g,{className:"text-sm"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:y,value:d,onChange:e=>x(e.target.value),onSelect:v,onKeyUp:v,onMouseUp:v,placeholder:m,rows:u,className:"w-full p-3 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none resize-y"}),d&&e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-0",children:e.jsx("div",{className:"p-3 text-gray-900 dark:text-white whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:(w=d,w.replace(/^### (.*$)/gim,'<h3 class="text-lg font-semibold mt-4 mb-2 text-gray-900 dark:text-white">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-semibold mt-4 mb-2 text-gray-900 dark:text-white">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mt-4 mb-2 text-gray-900 dark:text-white">$1</h1>').replace(/\*\*(.*?)\*\*/g,'<strong class="font-bold">$1</strong>').replace(/\*(.*?)\*/g,'<em class="italic">$1</em>').replace(/__(.*?)__/g,'<u class="underline">$1</u>').replace(/`(.*?)`/g,'<code class="bg-gray-200 dark:bg-gray-600 text-red-600 dark:text-red-400 px-1 rounded text-sm">$1</code>').replace(/^▶ (.*$)/gim,'<div class="flex items-center mt-2 mb-1"><span class="mr-2">▶</span><span class="font-medium text-gray-900 dark:text-white">$1</span></div>').replace(/^[\s]*[-*+]\s(.*$)/gim,'<div class="ml-4 mb-1"><span class="mr-2">•</span>$1</div>').replace(/^[\s]*\d+\.\s(.*$)/gim,'<div class="ml-4 mb-1"><span class="mr-2">1.</span>$1</div>').replace(/```(.*?)\n([\s\S]*?)\n```/gim,(e,t,r)=>`<pre class="bg-gray-800 p-3 rounded-lg overflow-x-auto my-3"><code class="${t?`language-${t.trim()}`:""} text-sm text-gray-100">${r.trim()}</code></pre>`).replace(/\n/g,"<br>"))}})})]})]});var w};export{x as R};
//# sourceMappingURL=chunk-28bf6a71.js.map
