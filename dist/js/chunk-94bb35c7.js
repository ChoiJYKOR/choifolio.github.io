import{r as e,j as t,ad as a,aN as s,aO as r}from"./chunk-24ca1b0f.js";import{b as n,s as i,d as l,e as c,f as o,l as u,v as d,g as y,p as g,h as p,i as h,m}from"./chunk-b47acba7.js";import{g as f,b as v,c as S,d as w,i as k,e as C}from"./chunk-cd8bd7bb.js";const b=e.createContext(void 0),A=({children:a})=>{const[s,r]=e.useState(null),[i,l]=e.useState(!1);e.useEffect(()=>{(async()=>{try{const e=await n.verify();r(e.data.user)}catch(e){r(null)}})()},[]);const c=e.useCallback(async(e,t)=>{var a,s;try{l(!0);const a=await n.login(e,t);r(a.data.user),l(!1)}catch(i){throw l(!1),new Error((null==(s=null==(a=i.response)?void 0:a.data)?void 0:s.message)||"로그인에 실패했습니다.")}},[]),o=e.useCallback(async()=>{try{await n.logout()}catch(e){}r(null)},[]),u=e.useMemo(()=>({user:s,login:c,logout:o,isAuthenticated:!!s,isLoading:i}),[s,c,o,i]);return t.jsx(b.Provider,{value:u,children:a})},E=()=>{const t=e.useContext(b);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t},q={fullName:"",firstName:"",role:"",subtitle:"",location:"",education:"",yearsOfExperience:"",email:"",phone:"",githubUrl:"",linkedinUrl:"",heroTitle:"",heroSubtitle:"",heroTag:"",heroCtaLink1:"",heroCtaLink2:"",aboutTitle:"",aboutSubtitle:"",aboutDescription1:"",aboutDescription2:"",skillsTitle:"",skillsSubtitle:"",projectsTitle:"",projectsSubtitle:"",projectsUpdateTitle:"",projectsUpdateDescription:"",projectsUpdateTechList:[],booksTitle:"",booksSubtitle:"",contactTitle:"",contactSubtitle:"",experienceTitle:"",experienceSubtitle:"",learningGoalsTitle:"앞으로의 학습 목표",learningGoalsDescription:"4차 산업혁명 시대에 발맞춰 **지능형 공장(Smart Factory) 구현**을 위해 다음 기술들을 집중적으로 탐구하여 전문성을 확대해 나가겠습니다.",learningGoalsList:["첨단 로봇 제어","딥러닝 기반 비전 시스템","엣지 컴퓨팅","클라우드 연동","MES/ERP 연동 기술"],stat1Number:"",stat1Label:"",stat2Number:"",stat2Label:"",stat3Number:"",stat3Label:"",mainSkills:[]},F=e.createContext(void 0),D=({children:a})=>{const[s,r]=e.useState(q),[n,l]=e.useState(!0),[c,o]=e.useState(null),u=e.useCallback(async()=>{try{l(!0),o(null);const e=await i.get(),t={...q,...e.data};r(t)}catch(e){o("설정을 불러오는데 실패했습니다."),r(q)}finally{l(!1)}},[]);e.useEffect(()=>{u()},[u]);const d=e.useCallback(async()=>{await u()},[u]),y=e.useMemo(()=>({settings:s,loading:n,error:c,refetchSettings:d}),[s,n,c,d]);return t.jsx(F.Provider,{value:y,children:a})},K=()=>{const t=e.useContext(F);if(void 0===t)throw new Error("useSiteSettings must be used within a SiteSettingsProvider");return t},Q=["hero","about","experience","skills","projects","contact","books","projects-page","experience-page","about-page","contact-page","skills-page"],T={offset:80,debounceDelay:100},I=(t={})=>{const{offset:a,debounceDelay:s}={...T,...t},[r,n]=e.useState("hero"),i=e.useRef(null),l=e.useCallback(()=>{const e=window.scrollY+a;let t="hero";for(const s of Q){const r=document.getElementById(s);if(!r)continue;e>=r.offsetTop-a&&(t=s)}n(t)},[a]),c=e.useCallback(((e,t)=>{let a=null;return(...s)=>{a&&clearTimeout(a),a=setTimeout(()=>{e(...s)},t)}})(l,s),[l,s]);return e.useEffect(()=>(window.addEventListener("scroll",c,{passive:!0}),l(),()=>{window.removeEventListener("scroll",c),i.current&&clearTimeout(i.current)}),[l,c]),r},L=(e,t=80)=>{const a=document.getElementById(e);if(a){const e=a.offsetTop-t;window.scrollTo({top:e,behavior:"smooth"})}},J=()=>{const[t,a]=e.useState([]),[s,r]=e.useState([]),[n,i]=e.useState(!1),{settings:c}=K(),o=e.useCallback(async()=>{i(!0);try{const e=(await l.getAll()).data||[];let t=e.filter(e=>e.showInSidebar).sort((e,t)=>e.order-t.order).slice(0,(null==c?void 0:c.sidebarSkillCount)||4);0===t.length&&(t=e.sort((e,t)=>t.level-e.level).slice(0,(null==c?void 0:c.sidebarSkillCount)||4)),a(t);let s=e.filter(e=>e.showInLanguageCard).sort((e,t)=>t.level-e.level).slice(0,(null==c?void 0:c.languageCardSkillCount)||3);r(s)}catch(e){a([]),r([])}finally{i(!1)}},[null==c?void 0:c.sidebarSkillCount,null==c?void 0:c.languageCardSkillCount]);return e.useEffect(()=>{o()},[o]),e.useMemo(()=>({coreSkills:t,languageSkills:s,isLoadingSkills:n}),[t,s,n])},j="books",P=()=>a({queryKey:[j,"list"],queryFn:async()=>{const e=await c.getAll();return e.data.data||e.data||[]},staleTime:3e5,gcTime:6e5}),x=e=>a({queryKey:[j,"detail",e],queryFn:async()=>{if(!e)throw new Error("Book ID is required");return(await c.getById(e)).data},enabled:!!e,staleTime:3e5,gcTime:6e5}),_=()=>{const e=s();return r({mutationFn:async e=>{await c.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[j,"list"]}),e.invalidateQueries({queryKey:["dataCounts"]})}})},B=["categories"],M=()=>a({queryKey:B,queryFn:async()=>(await o.getAll()).data}),O=e=>a({queryKey:[...B,e,"usage"],queryFn:async()=>{if(!e)throw new Error("ID가 필요합니다");return(await o.getUsage(e)).data},enabled:!!e}),R=()=>{const{data:e=[],isLoading:t}=M(),a=(()=>{const e=s();return r({mutationFn:async e=>(await o.create(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:B})}})})(),n=(()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>(await o.update(e,t)).data,onSuccess:()=>{e.invalidateQueries({queryKey:B})}})})(),i=(()=>{const e=s();return r({mutationFn:async e=>(await o.delete(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:B})}})})();return{categories:e,isLoading:t,createCategory:async e=>{try{return await a.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},updateCategory:async(e,t)=>{try{return await n.mutateAsync({id:e,data:t}),{success:!0}}catch(a){return{success:!1,error:a}}},deleteCategory:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}},U=t=>{const a=s(),[n,i]=e.useState(null),[l,c]=e.useState(null),[o,d]=e.useState({topic:"",content:""}),[y,g]=e.useState(!1),[p,h]=e.useState(null),m=(e=>{const t=s();return r({mutationFn:async t=>(await u.createForBook(e,t)).data,onSuccess:()=>{t.invalidateQueries({queryKey:[j,"detail",e]}),t.invalidateQueries({queryKey:[j,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),f=(e=>{const t=s();return r({mutationFn:async({learningId:t,data:a})=>(await u.updateForBook(e,t,a)).data,onSuccess:()=>{t.invalidateQueries({queryKey:[j,"detail",e]}),t.invalidateQueries({queryKey:[j,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),v=(e=>{const t=s();return r({mutationFn:async t=>{await u.deleteForBook(e,t)},onSuccess:()=>{t.invalidateQueries({queryKey:[j,"detail",e]}),t.invalidateQueries({queryKey:[j,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),S=(e=>{const t=s();return r({mutationFn:async({learningId:t,skillIds:a})=>(await u.updateSkills(e,t,a)).data,onSuccess:()=>{t.invalidateQueries({queryKey:[j,"detail",e]}),t.invalidateQueries({queryKey:[j,"list"]}),t.invalidateQueries({queryKey:["chapters",e]})}})})(t),w=m.isPending||f.isPending||v.isPending||S.isPending,k=()=>{i(null),c(null),d({topic:"",content:""}),g(!1)},C=()=>{k(),h(null)};return{editingLearningId:n,currentFormData:o,setCurrentFormData:d,showAddForm:y,isSaving:w,learningApiError:p,handleToggleAddForm:()=>{n&&C(),y&&d({topic:"",content:""}),g(e=>!e),h(null)},handleAddLearning:async()=>{if(o.topic&&o.content)try{h(null),await m.mutateAsync(o),k()}catch(e){h("학습 내용 추가에 실패했습니다.")}},handleDeleteLearning:async(e,s)=>{if(confirm("이 학습 내용을 삭제하시겠습니까?"))try{h(null),s?await u.deleteForChapter(t,s,e):await v.mutateAsync(e),a.invalidateQueries({queryKey:[j,"detail",t]}),a.invalidateQueries({queryKey:["chapters",t]})}catch(r){h("학습 내용 삭제에 실패했습니다.")}},handleStartEdit:(e,t)=>{g(!1),i(e._id),c(t||null),d({topic:e.topic,content:e.content}),h(null)},handleSaveEdit:async()=>{if(n&&o.topic&&o.content)try{if(h(null),l){await u.updateForChapter(t,l,n,o)}else await f.mutateAsync({learningId:n,data:o});a.invalidateQueries({queryKey:[j,"detail",t]}),a.invalidateQueries({queryKey:["chapters",t]}),k()}catch(e){h("학습 내용 수정에 실패했습니다.")}},handleCancelEdit:C,handleSkillLinkChange:async(e,s,r)=>{const n=[j,"detail",t],i=["chapters",t],l=a.getQueryData(n),c=a.getQueryData(i);try{h(null);let t=[];const o=(c||[]).flatMap(e=>e.learnings||[]).find(t=>t._id===e)||((null==l?void 0:l.learnings)||[]).find(t=>t._id===e);if(o){const e=o.skillIds||[];t=r?Array.from(new Set([...e,s])):e.filter(e=>e!==s)}else t=r?[s]:[];c&&a.setQueryData(i,a=>a?a.map(a=>({...a,learnings:(a.learnings||[]).map(a=>a._id===e?{...a,skillIds:t}:a)})):a),l&&a.setQueryData(n,a=>a?a.chapters&&a.chapters.length>0?{...a,chapters:a.chapters.map(a=>({...a,learnings:(a.learnings||[]).map(a=>a._id===e?{...a,skillIds:t}:a)}))}:{...a,learnings:(a.learnings||[]).map(a=>a._id===e?{...a,skillIds:t}:a)}:a),await S.mutateAsync({learningId:e,skillIds:t})}catch(o){h("스킬 연결/해제에 실패했습니다."),c&&a.setQueryData(i,c),l?a.setQueryData(n,l):(a.invalidateQueries({queryKey:n}),a.invalidateQueries({queryKey:i}))}}}},V=async()=>{var e;const t=await l.getCategories();return(null==(e=t.data)?void 0:e.data)||t.data||[]},$=()=>{const{data:e=[],isLoading:t,error:s,refetch:r}=a({queryKey:["skillCategories"],queryFn:V,staleTime:3e5,cacheTime:6e5});return{skillCategories:e,loading:t,error:s?"스킬 데이터를 불러오는데 실패했습니다.":null,refetch:r}},N="videoLearnings",G=()=>a({queryKey:[N,"list"],queryFn:async()=>{var e;const t=await d.getAll();return(null==(e=t.data)?void 0:e.data)||t.data||[]},staleTime:3e5}),W=e=>a({queryKey:[N,"detail",e],queryFn:async()=>{if(!e)throw new Error("ID is required");return(await d.getById(e)).data},enabled:!!e,staleTime:3e5}),Y=()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>(await d.update(e,t)).data,onSuccess:(t,a)=>{e.invalidateQueries({queryKey:[N,"list"]}),e.invalidateQueries({queryKey:[N,"detail",a.id]})}})},z=()=>{const e=s();return r({mutationFn:async e=>{await d.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:[N,"list"]}),e.invalidateQueries({queryKey:["dataCounts"]})}})},H=()=>{const{data:e=[],isLoading:t,isError:a,error:n,refetch:i}=G(),l=(()=>{const e=s();return r({mutationFn:async e=>(await d.create(e)).data,onSuccess:()=>{e.invalidateQueries({queryKey:[N,"list"]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),c=Y(),o=z();return{videoLearnings:e,isLoading:t,error:a?n:null,createVideoLearning:async e=>{try{return await l.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},updateVideoLearning:async(e,t)=>{try{return await c.mutateAsync({id:e,data:t}),{success:!0}}catch(a){return{success:!1,error:a}}},deleteVideoLearning:async e=>{try{return await o.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},refetch:i}},X=()=>a({queryKey:["videoPlaylists"],queryFn:async()=>{var e;const t=await y.getAll();return(null==(e=t.data)?void 0:e.data)||t.data||[]},staleTime:3e5}),Z=e=>a({queryKey:["videoPlaylist",e],queryFn:async()=>{var t;if(!e)throw new Error("ID가 필요합니다");const a=await y.getById(e);return(null==(t=a.data)?void 0:t.data)||a.data},enabled:!!e,staleTime:3e5}),ee=e=>a({queryKey:["playlistVideos",e],queryFn:async()=>{var t;if(!e)return[];const a=await g.getByPlaylist(e);return(null==(t=a.data)?void 0:t.data)||a.data||[]},enabled:!!e,staleTime:3e5}),te=()=>{const e=s();return r({mutationFn:e=>y.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videoPlaylists"]})}})},ae=()=>{const e=s();return r({mutationFn:e=>g.create(e),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["playlistVideos",a.playlistId]})}})},se=()=>{const e=s();return r({mutationFn:({id:e,data:t})=>g.update(e,t),onSuccess:t=>{var a,s;const r=null==(s=null==(a=t.data)?void 0:a.data)?void 0:s.playlistId;r&&e.invalidateQueries({queryKey:["playlistVideos",r]})}})},re=()=>{const e=s();return r({mutationFn:e=>g.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["playlistVideos"]})}})},ne=()=>{const{data:e=[],isLoading:t}=X(),a=(()=>{const e=s();return r({mutationFn:e=>y.create(e),onSuccess:()=>{e.invalidateQueries({queryKey:["videoPlaylists"]})}})})(),n=(()=>{const e=s();return r({mutationFn:({id:e,data:t})=>y.update(e,t),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["videoPlaylists"]}),e.invalidateQueries({queryKey:["videoPlaylist",a.id]})}})})(),i=te();return{playlists:e,isLoading:t,createPlaylist:async e=>{try{await a.mutateAsync(e);return{success:!0}}catch(t){return{success:!1,error:t}}},updatePlaylist:async(e,t)=>{try{return await n.mutateAsync({id:e,data:t}),{success:!0}}catch(a){return{success:!1,error:a}}},deletePlaylist:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}};function ie(){const{showToast:t,...a}=function(){const[t,a]=e.useState([]),s=e.useCallback(e=>{const t=Math.random().toString(36).substr(2,9),s={id:t,duration:5e3,...e};a(e=>[...e,s]),s.duration&&s.duration>0&&setTimeout(()=>{r(t)},s.duration)},[]),r=e.useCallback(e=>{a(t=>t.filter(t=>t.id!==e))},[]),n=e.useCallback(()=>{a([])},[]);return{toasts:t,showToast:s,hideToast:r,clearAllToasts:n}}();return{...a,success:e.useCallback((e,a)=>{t({type:"success",title:e,message:a})},[t]),error:e.useCallback((e,a)=>{t({type:"error",title:e,message:a})},[t]),warning:e.useCallback((e,a)=>{t({type:"warning",title:e,message:a})},[t]),info:e.useCallback((e,a)=>{t({type:"info",title:e,message:a})},[t])}}const le=async()=>(await p.getAll()).data.data,ce=()=>{const{data:e=[],isLoading:t,error:s,refetch:r}=a({queryKey:["projects"],queryFn:le,staleTime:3e5,cacheTime:6e5});return{projects:e,loading:t,error:s?"프로젝트를 불러오는데 실패했습니다.":null,refetch:r}},oe=(t,a)=>{const[s,r]=e.useState(null),[n,i]=e.useState(!0),[l,c]=e.useState(null),{skillCategories:o}=$();e.useEffect(()=>{(async()=>{if(t)try{i(!0);const e=await p.getById(t);r(e.data)}catch(e){c("프로젝트를 불러오는데 실패했습니다.")}finally{i(!1)}})()},[t]);const u=e.useMemo(()=>s?{...s,title:f(a,s.title,s.titleEn,s.titleJa),description:f(a,s.description,s.descriptionEn,s.descriptionJa),detailedDescription:f(a,s.detailedDescription,s.detailedDescriptionEn,s.detailedDescriptionJa),technologies:v(a,s.technologies,s.technologiesEn,s.technologiesJa)||[],features:v(a,s.features,s.featuresEn,s.featuresJa)||[],learnings:v(a,s.learnings,s.learningsEn,s.learningsJa)||[],videoDescriptions:v(a,s.videoDescriptions,s.videoDescriptionsEn,s.videoDescriptionsJa)||[]}:null,[s,a]);return{loading:n,error:l,localizedProject:u,linkedSkills:e.useMemo(()=>{if(!s||!o)return[];const e=o.flatMap(e=>e.skills||[]),t=new Set(s.skillIds||[]);return e.filter(e=>t.has(e._id)).map(e=>{return{...e,name:S(a,e),description:w(a,e),levelText:(t=e.level||0,t>=90?"Expert":t>=70?"Proficient":t>=50?"Competent":"Basic")};var t})},[s,o,a])}},ue=async()=>(e=>e.slice().sort((e,t)=>void 0!==e.order&&void 0!==t.order?e.order-t.order:e.createdAt&&t.createdAt?new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():0))((await h.getAll()).data.data),de=()=>{const{data:e=[],isLoading:t,error:s,refetch:r}=a({queryKey:["experiences"],queryFn:ue,staleTime:3e5,cacheTime:6e5});return{experiences:e,loading:t,error:s?"경험 데이터를 불러오는 중 오류가 발생했습니다.":null,refetch:r}};function ye(){var t;const a=e.useRef(null),s=e.useCallback(()=>(a.current&&a.current.abort(),a.current=new AbortController,a.current),[]),r=e.useCallback(()=>(a.current||(a.current=new AbortController),a.current),[]),n=e.useCallback(()=>{a.current&&(a.current.abort(),a.current=null)},[]);return e.useEffect(()=>()=>{a.current&&a.current.abort()},[]),{createAbortController:s,getAbortController:r,abort:n,signal:null==(t=a.current)?void 0:t.signal}}function ge(t,a={}){const{data:s,isOptimistic:r,optimisticUpdate:n,updateData:i,resetData:l}=function(t,a={}){const[s,r]=e.useState(t),[n,i]=e.useState(!1),l=e.useRef(t),{onSuccess:c,onError:o,onRollback:u}=a,d=e.useCallback(async(e,t)=>{l.current=s,r(t=>"function"==typeof e?e(t):e),i(!0);try{const e=await t();return r(e),i(!1),null==c||c(e),e}catch(a){throw r(l.current),i(!1),null==o||o(a,()=>{r(l.current),null==u||u(l.current)}),a}},[s,c,o,u]),y=e.useCallback(e=>{r(t=>"function"==typeof e?e(t):e)},[]),g=e.useCallback(e=>{r(e),l.current=e,i(!1)},[]);return{data:s,isOptimistic:n,optimisticUpdate:d,updateData:y,resetData:g}}(t,a),c=e.useCallback(async(e,t)=>n(t=>[...t,{...e,_id:`temp_${Date.now()}`}],async()=>{const e=await t();return i(t=>t.map(t=>t._id.startsWith("temp_")?e:t)),[...s.filter(e=>!e._id.startsWith("temp_")),e]}),[n,i,s]),o=e.useCallback(async(e,t,a)=>n(a=>a.map(a=>a._id===e?{...a,...t}:a),async()=>{const t=await a();return i(a=>a.map(a=>a._id===e?t:a)),s.map(a=>a._id===e?t:a)}),[n,i,s]),u=e.useCallback(async(e,t)=>{if(s.find(t=>t._id===e))return n(t=>t.filter(t=>t._id!==e),async()=>(await t(),s.filter(t=>t._id!==e)))},[n,s]),d=e.useCallback(async(e,t)=>n(e,async()=>await t()),[n]);return{data:s,isOptimistic:r,optimisticAdd:c,optimisticUpdateItem:o,optimisticDelete:u,optimisticReorder:d,updateData:i,resetData:l}}function pe(){const[t,a]=e.useState(!0),[s,r]=e.useState(null),{createAbortController:n}=ye(),{success:i,error:l}=ie(),{data:o,isOptimistic:u,optimisticAdd:d,optimisticUpdateItem:y,optimisticDelete:g,resetData:p}=ge([]),h=e.useCallback(async()=>{var e;try{a(!0),r(null);const e=n(),t=await c.getAll();e.signal.aborted||p(t.data.data||[])}catch(t){if(!(null==(e=t.name)?void 0:e.includes("AbortError"))){const e="서적 목록을 불러오는데 실패했습니다.";r(e),l("로드 실패",e)}}finally{a(!1)}},[n,p,l]),m=e.useCallback(async e=>{try{const t={...e,_id:`temp_${Date.now()}`,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},a=await d(t,()=>c.create(e).then(e=>e.data));return i("서적 추가 완료",`${e.title}이(가) 성공적으로 추가되었습니다.`),a}catch(t){throw l("서적 추가 실패",t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."),t}},[d,i,l]),f=e.useCallback(async(e,t)=>{try{const a=await y(e,t,()=>c.update(e,t).then(e=>e.data));return i("서적 수정 완료","서적 정보가 성공적으로 수정되었습니다."),a}catch(a){throw l("서적 수정 실패",a instanceof Error?a.message:"알 수 없는 오류가 발생했습니다."),a}},[y,i,l]),v=e.useCallback(async e=>{try{const t=await g(e,()=>c.delete(e).then(()=>{}));return i("서적 삭제 완료","서적이 성공적으로 삭제되었습니다."),t}catch(t){throw l("서적 삭제 실패",t instanceof Error?t.message:"알 수 없는 오류가 발생했습니다."),t}},[g,i,l]);return e.useEffect(()=>{h()},[]),{books:o,isLoading:t,error:s,isOptimistic:u,createBook:m,updateBook:f,deleteBook:v,refetch:h}}function he({onSave:t,onDelete:a,onSuccess:s,onError:r}){const[n,i]=e.useState(!1),[l,c]=e.useState(null),[o,u]=e.useState(!1),[d,y]=e.useState(!1),g=e.useCallback(()=>{c(null),i(!0)},[]),p=e.useCallback(e=>{c(e),i(!0)},[]),h=e.useCallback(()=>{i(!1),c(null),u(!1),y(!1)},[]),m=e.useCallback(async e=>{if(!o)try{u(!0),await t(e,l),h(),null==s||s()}catch(a){null==r||r(a)}finally{u(!1)}},[o,l,t,s,r,h]),f=e.useCallback(async e=>{if(d)return;if(window.confirm(`정말 "${e.title||e.name||"이 항목"}"을(를) 삭제하시겠습니까?`))try{y(!0),await a(e),null==s||s()}catch(t){null==r||r(t)}finally{y(!1)}},[d,a,s,r]);return[{showForm:n,editingItem:l,isSaving:o,isDeleting:d},{handleCreate:g,handleEdit:p,handleCancel:h,handleSave:m,handleDelete:f,setShowForm:i,setEditingItem:c}]}const me=()=>{const[t,a]=e.useState([]),[s,r]=e.useState(!1),n=e.useCallback(async()=>{r(!0);try{const e=await h.getAll();a(e.data.data||[])}catch(e){}finally{r(!1)}},[]),i=e.useCallback(async e=>{try{return await h.create(e),await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]),l=e.useCallback(async(e,t)=>{try{return await h.update(e,t),await n(),{success:!0}}catch(a){return{success:!1,error:a}}},[n]),c=e.useCallback(async e=>{try{return await h.delete(e),await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]);return e.useEffect(()=>{n()},[]),{experiences:t,isLoading:s,fetchExperiences:n,createExperience:i,updateExperience:l,deleteExperience:c}},fe=t=>{const[a,s]=e.useState("ko"),r=(null==t?void 0:t.categoryIds)?t.categoryIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],n=(null==t?void 0:t.skillIds)?t.skillIds.map(e=>"string"==typeof e?e:e._id).filter(Boolean):[],[i,l]=e.useState(()=>(null==t?void 0:t.videos)&&Array.isArray(t.videos)?t.videos.map((e,a)=>{var s,r,n;return{url:e,description:(null==(s=t.videoDescriptions)?void 0:s[a])||"",descriptionEn:(null==(r=t.videoDescriptionsEn)?void 0:r[a])||"",descriptionJa:(null==(n=t.videoDescriptionsJa)?void 0:n[a])||""}}):[]),[c,o]=e.useState(t?{...t,technologies:Array.isArray(t.technologies)?t.technologies.join("\n"):t.technologies||"",technologiesEn:Array.isArray(t.technologiesEn)?t.technologiesEn.join("\n"):t.technologiesEn||"",technologiesJa:Array.isArray(t.technologiesJa)?t.technologiesJa.join("\n"):t.technologiesJa||"",images:Array.isArray(t.images)?t.images.join("\n"):t.images||"",features:Array.isArray(t.features)?t.features.join("\n"):t.features||"",featuresEn:Array.isArray(t.featuresEn)?t.featuresEn.join("\n"):t.featuresEn||"",featuresJa:Array.isArray(t.featuresJa)?t.featuresJa.join("\n"):t.featuresJa||"",learnings:Array.isArray(t.learnings)?t.learnings.join("\n"):t.learnings||"",learningsEn:Array.isArray(t.learningsEn)?t.learningsEn.join("\n"):t.learningsEn||"",learningsJa:Array.isArray(t.learningsJa)?t.learningsJa.join("\n"):t.learningsJa||"",skillIds:n,categoryIds:r}:{title:"",titleEn:"",titleJa:"",description:"",descriptionEn:"",descriptionJa:"",technologies:"",technologiesEn:"",technologiesJa:"",category:"automation",categoryIds:[],status:"preparing",githubLink:"",liveLink:"",image:"",images:"",detailedDescription:"",detailedDescriptionEn:"",detailedDescriptionJa:"",features:"",featuresEn:"",featuresJa:"",learnings:"",learningsEn:"",learningsJa:"",order:0,skillIds:[]});return{formData:c,videoItems:i,currentLang:a,setCurrentLang:s,setFormData:o,setVideoItems:l,handleFieldChange:(e,t)=>{o(a=>({...a,[e]:t}))},handleArrayFieldChange:(e,t)=>{o(a=>({...a,[e]:t}))},handleVideoUrlChange:(e,t)=>{const a=[...i];a[e]&&(a[e].url=t,l(a))},handleVideoDescriptionChange:(e,t,a)=>{const s=[...i];s[e]&&("ko"===a?s[e].description=t:"en"===a?s[e].descriptionEn=t:"ja"===a&&(s[e].descriptionJa=t),l(s))},handleAddVideo:()=>{l([...i,{url:"",description:"",descriptionEn:"",descriptionJa:""}])},handleRemoveVideo:e=>{l(i.filter((t,a)=>a!==e))},prepareDataForSubmit:()=>{const e=i.map(e=>e.url).filter(e=>e.trim().length>0),t=i.map(e=>e.description),a=i.map(e=>e.descriptionEn),s=i.map(e=>e.descriptionJa);for(let r=0;r<i.length;r++){const e=i[r];if(e.description&&e.description.length>5e3)throw new Error(`영상 ${r+1}의 한국어 설명이 너무 깁니다 (현재: ${e.description.length}자, 최대: 5000자)`);if(e.descriptionEn&&e.descriptionEn.length>5e3)throw new Error(`영상 ${r+1}의 영어 설명이 너무 깁니다 (현재: ${e.descriptionEn.length}자, 최대: 5000자)`);if(e.descriptionJa&&e.descriptionJa.length>5e3)throw new Error(`영상 ${r+1}의 일본어 설명이 너무 깁니다 (현재: ${e.descriptionJa.length}자, 최대: 5000자)`)}return{...c,technologies:"string"==typeof c.technologies?c.technologies.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):c.technologies||[],technologiesEn:"string"==typeof c.technologiesEn?c.technologiesEn.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):c.technologiesEn||[],technologiesJa:"string"==typeof c.technologiesJa?c.technologiesJa.split(/[,\n]/).map(e=>e.trim()).filter(e=>e.length>0):c.technologiesJa||[],images:"string"==typeof c.images?c.images.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.images||[],videos:e,videoDescriptions:t,videoDescriptionsEn:a,videoDescriptionsJa:s,features:"string"==typeof c.features?c.features.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.features||[],featuresEn:"string"==typeof c.featuresEn?c.featuresEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.featuresEn||[],featuresJa:"string"==typeof c.featuresJa?c.featuresJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.featuresJa||[],learnings:"string"==typeof c.learnings?c.learnings.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.learnings||[],learningsEn:"string"==typeof c.learningsEn?c.learningsEn.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.learningsEn||[],learningsJa:"string"==typeof c.learningsJa?c.learningsJa.split("\n").map(e=>e.trim()).filter(e=>e.length>0):c.learningsJa||[],skillIds:c.skillIds||[]}}}},ve=()=>{const[t,a]=e.useState([]),[s,r]=e.useState(!1),n=e.useCallback(async()=>{r(!0);try{const e=(await p.getAll()).data.data||[];a(e)}catch(e){}finally{r(!1)}},[]),i=e.useCallback(async e=>{try{await p.create(e);return await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]),l=e.useCallback(async(e,t)=>{try{await p.update(e,t);return await n(),{success:!0}}catch(a){return{success:!1,error:a}}},[n]),c=e.useCallback(async e=>{try{return await p.delete(e),await n(),{success:!0}}catch(t){return{success:!1,error:t}}},[n]);return e.useEffect(()=>{n()},[]),{projects:t,isLoading:s,fetchProjects:n,createProject:i,updateProject:l,deleteProject:c}},Se="adminMessages",we=()=>a({queryKey:[Se,"list"],queryFn:async()=>{const e=await m.getAll();return e.data.data||e.data||[]},staleTime:12e4,gcTime:3e5}),ke=()=>{const{data:e=[],isLoading:t}=we(),a=(()=>{const e=s();return r({mutationFn:e=>m.markAsRead(e),onSuccess:()=>{e.invalidateQueries({queryKey:[Se]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),n=(()=>{const e=s();return r({mutationFn:e=>m.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:[Se]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),i=(()=>{const e=s();return r({mutationFn:e=>Promise.all(e.map(e=>m.markAsRead(e))).then(()=>{}),onSuccess:()=>{e.invalidateQueries({queryKey:[Se]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})(),l=(()=>{const e=s();return r({mutationFn:e=>Promise.all(e.map(e=>m.delete(e))).then(()=>{}),onSuccess:()=>{e.invalidateQueries({queryKey:[Se]}),e.invalidateQueries({queryKey:["dataCounts"]})}})})();return{messages:e,isLoading:t,fetchMessages:()=>{},markAsRead:async e=>{try{return await a.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},deleteMessage:async e=>{try{return await n.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},bulkMarkAsRead:async e=>{try{return await i.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},bulkDelete:async e=>{try{return await l.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}};function Ce(e,t={}){const{enabled:s=!0,staleTime:r=3e5}=t;return a({queryKey:[Se,"detail",e],queryFn:async()=>{if(!e)return null;return(await m.getById(e)).data.data},enabled:!!e&&s,staleTime:r,gcTime:6e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,select:e=>e||null})}const be=["skillCategories"],Ae=()=>{const{skillCategories:e,loading:t,refetch:a}=$(),n=(()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>{var a;const s=await l.update(e,t);return(null==(a=s.data)?void 0:a.data)||s.data},onMutate:async({id:t,data:a})=>{await e.cancelQueries({queryKey:be});const s=e.getQueryData(be);return e.setQueryData(be,e=>e?e.map(e=>{var s;return{...e,skills:(null==(s=e.skills)?void 0:s.map(e=>e._id===t?{...e,...a,updatedAt:(new Date).toISOString()}:e))||[]}}):s),{previousCategories:s}},onError:(t,a,s)=>{(null==s?void 0:s.previousCategories)&&e.setQueryData(be,s.previousCategories)}})})(),i=(()=>{const e=s();return r({mutationFn:async e=>{var t;const a=await l.createCategory(e);return(null==(t=a.data)?void 0:t.data)||a.data},onSuccess:()=>{e.invalidateQueries({queryKey:be})}})})(),c=(()=>{const e=s();return r({mutationFn:async({id:e,data:t})=>{var a;const s=await l.updateCategory(e,t);return(null==(a=s.data)?void 0:a.data)||s.data},onSuccess:()=>{e.invalidateQueries({queryKey:be})}})})(),o=(()=>{const e=s();return r({mutationFn:async e=>{await l.deleteCategory(e)},onSuccess:()=>{e.invalidateQueries({queryKey:be})}})})(),u=(()=>{const e=s();return r({mutationFn:async({categoryId:e,data:t})=>{var a;const s=await l.create(e,t);return(null==(a=s.data)?void 0:a.data)||s.data},onSuccess:()=>{e.invalidateQueries({queryKey:be})}})})(),d=(()=>{const e=s();return r({mutationFn:async e=>{await l.delete(e)},onSuccess:()=>{e.invalidateQueries({queryKey:be})}})})();return{skillCategories:e,isLoading:t,fetchSkillCategories:a,createSkillCategory:async e=>{try{return{success:!0,data:await i.mutateAsync(e)}}catch(t){return{success:!1,error:t}}},updateSkillCategory:async(e,t)=>{try{return{success:!0,data:await c.mutateAsync({id:e,data:t})}}catch(a){return{success:!1,error:a}}},deleteSkillCategory:async e=>{try{return await o.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}},createSkill:async(e,t)=>{try{return{success:!0,data:await u.mutateAsync({categoryId:e,data:t})}}catch(a){return{success:!1,error:a}}},updateSkill:async(e,t)=>{try{return{success:!0,data:await n.mutateAsync({id:e,data:t})}}catch(a){return{success:!1,error:a}}},deleteSkill:async e=>{try{return await d.mutateAsync(e),{success:!0}}catch(t){return{success:!1,error:t}}}}},Ee=(t=null)=>{const{refetchSettings:a}=K(),[s,r]=e.useState(k),[n,l]=e.useState(!0),[c,o]=e.useState(!1),[u,d]=e.useState(null),[y,g]=e.useState(new Set(["개인 정보","소셜 링크"])),[p,h]=e.useState("ko"),m=e.useCallback(async()=>{try{const e=(e=>{const t={...k,...e};return t.sidebarSkillCount&&(t.sidebarSkillCount="number"==typeof t.sidebarSkillCount?t.sidebarSkillCount:parseInt(String(t.sidebarSkillCount))||4),t.languageCardSkillCount&&(t.languageCardSkillCount="number"==typeof t.languageCardSkillCount?t.languageCardSkillCount:parseInt(String(t.languageCardSkillCount))||3),t})((await i.get()).data);r(e)}catch(e){d({type:"error",text:"설정을 불러오는데 실패했습니다. 기본 값으로 표시됩니다."})}finally{l(!1)}},[]);return e.useEffect(()=>{m()},[m]),e.useEffect(()=>{if(t)if("appearance"===t)g(new Set);else{const e=C(t).map(e=>e.title);g(new Set(e))}else g(new Set(["개인 정보","소셜 링크"]))},[t]),{settings:s,loading:n,saving:c,message:u,expandedSections:y,currentLang:p,setCurrentLang:h,handleChange:(e,t)=>{r(a=>({...a,[e]:t}))},handleSave:async()=>{o(!0),d(null);try{await i.update(s),await a(),d({type:"success",text:"✅ 설정이 성공적으로 저장되었습니다! 화면이 업데이트됩니다."}),setTimeout(()=>d(null),5e3)}catch(e){d({type:"error",text:"❌ 설정 저장에 실패했습니다. 콘솔을 확인해주세요."})}finally{o(!1)}},toggleSection:e=>{g(t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})},setExpandedSections:g}},qe=()=>{s();const{data:e,isLoading:t}=a({queryKey:["dataCounts"],queryFn:async()=>{var e,t,a,s,r,n,i,u,g,f,v,S,w,k,C,b,A,E,q,F,D,K;const[Q,T,I,L,J,j,P,x]=await Promise.all([c.getAll(),d.getAll(),y.getAll(),h.getAll(),p.getAll(),m.getAll(),l.getCategories(),o.getAll()]);return{books:(null==(t=null==(e=Q.data)?void 0:e.data)?void 0:t.length)||(null==(a=Q.data)?void 0:a.length)||0,videoLearnings:(null==(r=null==(s=T.data)?void 0:s.data)?void 0:r.length)||(null==(n=T.data)?void 0:n.length)||0,videoPlaylists:(null==(u=null==(i=I.data)?void 0:i.data)?void 0:u.length)||(null==(g=I.data)?void 0:g.length)||0,experiences:(null==(v=null==(f=L.data)?void 0:f.data)?void 0:v.length)||(null==(S=L.data)?void 0:S.length)||0,projects:(null==(k=null==(w=J.data)?void 0:w.data)?void 0:k.length)||(null==(C=J.data)?void 0:C.length)||0,messages:(null==(A=null==(b=j.data)?void 0:b.data)?void 0:A.length)||(null==(E=j.data)?void 0:E.length)||0,skills:(null==(F=null==(q=P.data)?void 0:q.data)?void 0:F.length)||(null==(D=P.data)?void 0:D.length)||0,categories:(null==(K=x.data)?void 0:K.length)||0}},staleTime:12e4,gcTime:3e5,refetchOnWindowFocus:!0});return{counts:e||{books:0,videoLearnings:0,videoPlaylists:0,experiences:0,projects:0,messages:0,skills:0,categories:0},isLoading:t,refreshCounts:()=>{}}},Fe=()=>{const[t,a]=e.useState("settings"),[s,r]=e.useState(null),[n,i]=e.useState("all"),[l,c]=e.useState(""),[o,u]=e.useState(""),[d,y]=e.useState("all"),[g,p]=e.useState(""),[h,m]=e.useState(""),[f,v]=e.useState(""),[S,w]=e.useState("all"),[k,C]=e.useState(""),[b,A]=e.useState("");return{activeTab:t,setActiveTab:a,activeSettingsSection:s,setActiveSettingsSection:r,bookFilters:{state:{filter:n,searchTerm:l,selectedCategory:o},actions:{setFilter:i,setSearchTerm:c,setSelectedCategory:u},data:{categories:["프로그래밍","데이터베이스","웹 개발","AI/ML","시스템 설계"]}},experienceFilters:{state:{filter:d,searchTerm:g,selectedCompany:h,selectedYear:f},actions:{setFilter:y,setSearchTerm:p,setSelectedCompany:m,setSelectedYear:v},data:{companies:["ABC Corp","XYZ Inc","Dev Solutions","Tech Startup"],years:["2024","2023","2022","2021","2020"]}},projectFilters:{state:{filter:S,searchTerm:k,selectedCategory:b},actions:{setFilter:w,setSearchTerm:C,setSelectedCategory:A},data:{categories:["웹 개발","모바일 앱","데이터 분석","임베디드","AI/ML"]}}}};export{ae as A,re as B,me as C,ve as D,Ce as E,ke as F,Ae as G,R as H,O as I,P as J,G as K,X as L,ce as M,de as N,Ee as O,Fe as P,qe as Q,we as R,Q as S,D as T,A as U,M as a,fe as b,E as c,K as d,I as e,J as f,x as g,_ as h,U as i,W as j,z as k,Y as l,ie as m,Z as n,ee as o,te as p,se as q,oe as r,L as s,pe as t,$ as u,ye as v,he as w,ge as x,H as y,ne as z};
//# sourceMappingURL=chunk-94bb35c7.js.map
